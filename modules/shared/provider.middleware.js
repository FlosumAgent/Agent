const a126_0x450d=['1XkLmez','getApi','typedi','57JxvtOf','__decorate','object','1374476RMLKph','350994ndeNgX','metadata','before','235WeqEak','length','update','design:paramtypes','x-git-provider','toString','../../core/errors/unauthorized.error','__esModule','headers','function','decorate','appSettings','AppSettingsService','256728rYnZcN','GitProviderManager','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','ProviderMiddleware','29KPUGdL','default','getOwnPropertyDescriptor','726fMKYEz','17151aRlGKp','477211CjsURk','defineProperty','UnauthorizedError','./services/app-settings.service','1WXyLeD','2642pyPPsu'];const a126_0x551324=a126_0x3ce7;(function(_0xd4e049,_0x588574){const _0x36b4fd=a126_0x3ce7;while(!![]){try{const _0x5ed414=-parseInt(_0x36b4fd(0x85))+-parseInt(_0x36b4fd(0x9a))*parseInt(_0x36b4fd(0x9e))+-parseInt(_0x36b4fd(0x88))*parseInt(_0x36b4fd(0x9d))+parseInt(_0x36b4fd(0x95))+parseInt(_0x36b4fd(0xa4))*parseInt(_0x36b4fd(0x81))+parseInt(_0x36b4fd(0x7e))*-parseInt(_0x36b4fd(0x9f))+-parseInt(_0x36b4fd(0x84))*-parseInt(_0x36b4fd(0xa3));if(_0x5ed414===_0x588574)break;else _0xd4e049['push'](_0xd4e049['shift']());}catch(_0x13a55d){_0xd4e049['push'](_0xd4e049['shift']());}}}(a126_0x450d,0x45ba4));const a126_0x36f840=function(){let _0x38f602=!![];return function(_0x5b3222,_0x58297b){const _0x39acec=_0x38f602?function(){if(_0x58297b){const _0x33eba5=_0x58297b['apply'](_0x5b3222,arguments);return _0x58297b=null,_0x33eba5;}}:function(){};return _0x38f602=![],_0x39acec;};}(),a126_0x1eaa95=a126_0x36f840(this,function(){const _0x733551=function(){const _0x3ecf30=a126_0x3ce7,_0x296bc4=_0x733551[_0x3ecf30(0x98)](_0x3ecf30(0x97))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x296bc4['test'](a126_0x1eaa95);};return _0x733551();});a126_0x1eaa95();'use strict';var __decorate=this&&this[a126_0x551324(0x82)]||function(_0x1680eb,_0x1e85f1,_0xad7bf,_0x3d02e9){const _0x534f38=a126_0x551324;var _0x2bf776=arguments[_0x534f38(0x89)],_0x4465e5=_0x2bf776<0x3?_0x1e85f1:_0x3d02e9===null?_0x3d02e9=Object[_0x534f38(0x9c)](_0x1e85f1,_0xad7bf):_0x3d02e9,_0x4dbfee;if(typeof Reflect===_0x534f38(0x83)&&typeof Reflect['decorate']===_0x534f38(0x91))_0x4465e5=Reflect[_0x534f38(0x92)](_0x1680eb,_0x1e85f1,_0xad7bf,_0x3d02e9);else{for(var _0x30aaea=_0x1680eb[_0x534f38(0x89)]-0x1;_0x30aaea>=0x0;_0x30aaea--)if(_0x4dbfee=_0x1680eb[_0x30aaea])_0x4465e5=(_0x2bf776<0x3?_0x4dbfee(_0x4465e5):_0x2bf776>0x3?_0x4dbfee(_0x1e85f1,_0xad7bf,_0x4465e5):_0x4dbfee(_0x1e85f1,_0xad7bf))||_0x4465e5;}return _0x2bf776>0x3&&_0x4465e5&&Object[_0x534f38(0xa0)](_0x1e85f1,_0xad7bf,_0x4465e5),_0x4465e5;},__metadata=this&&this['__metadata']||function(_0x2b4bfd,_0x4f38d2){const _0x402774=a126_0x551324;if(typeof Reflect==='object'&&typeof Reflect[_0x402774(0x86)]==='function')return Reflect['metadata'](_0x2b4bfd,_0x4f38d2);},__importDefault=this&&this['__importDefault']||function(_0x32a796){const _0x46adac=a126_0x551324;return _0x32a796&&_0x32a796[_0x46adac(0x8f)]?_0x32a796:{'default':_0x32a796};};Object[a126_0x551324(0xa0)](exports,a126_0x551324(0x8f),{'value':!![]}),exports[a126_0x551324(0x99)]=void 0x0;function a126_0x3ce7(_0x178da9,_0x353880){return a126_0x3ce7=function(_0x3f1c53,_0x1eaa95){_0x3f1c53=_0x3f1c53-0x7e;let _0x36f840=a126_0x450d[_0x3f1c53];return _0x36f840;},a126_0x3ce7(_0x178da9,_0x353880);}const core_1=require('../../core'),unauthorized_error_1=require(a126_0x551324(0x8e)),typedi_1=__importDefault(require(a126_0x551324(0x80))),git_provider_manager_1=require('./git-provider.manager'),app_settings_service_1=require(a126_0x551324(0xa2));let ProviderMiddleware=class ProviderMiddleware{constructor(_0x471cef){const _0x5f3f43=a126_0x551324;this[_0x5f3f43(0x93)]=_0x471cef;}async['handle'](_0x4349a8,_0x464096){const _0x411ffc=a126_0x551324;if(_0x4349a8[_0x411ffc(0x90)][_0x411ffc(0x8c)]){this[_0x411ffc(0x93)][_0x411ffc(0x8a)]({'provider':_0x4349a8[_0x411ffc(0x90)][_0x411ffc(0x8c)][_0x411ffc(0x8d)]()});const _0x3a9792=typedi_1[_0x411ffc(0x9b)]['get'](git_provider_manager_1[_0x411ffc(0x96)])[_0x411ffc(0x7f)]();await _0x3a9792['testConnection']();try{await _0x3a9792['isLoggedIn']();}catch(_0x559f00){throw new unauthorized_error_1[(_0x411ffc(0xa1))](_0x559f00);}}}};ProviderMiddleware=__decorate([core_1['Middleware'](a126_0x551324(0x87)),__metadata(a126_0x551324(0x8b),[app_settings_service_1[a126_0x551324(0x94)]])],ProviderMiddleware),exports[a126_0x551324(0x99)]=ProviderMiddleware;