const a126_0x4a22=['10332GGlluD','typedi','Middleware','316202DESHnJ','x-git-provider','apply','GitProviderManager','defineProperty','97mYjFpx','1OKtqRB','function','constructor','before','239612EaNbgv','get','127189EQEByC','1086090Oapyiu','__metadata','object','AppSettingsService','update','getOwnPropertyDescriptor','default','ProviderMiddleware','3vigsVo','decorate','6639YwVXna','__decorate','9jgbOXG','./git-provider.manager','2915407WVLvbV','handle','1vWICrP','length','__importDefault','test','appSettings'];function a126_0x40ed(_0x5009b8,_0x81000c){return a126_0x40ed=function(_0x467fd8,_0x37dfc1){_0x467fd8=_0x467fd8-0x78;let _0x16da31=a126_0x4a22[_0x467fd8];return _0x16da31;},a126_0x40ed(_0x5009b8,_0x81000c);}const a126_0x4f6d17=a126_0x40ed;(function(_0x2c4d91,_0x22d3f7){const _0x29d938=a126_0x40ed;while(!![]){try{const _0x44cf13=-parseInt(_0x29d938(0x92))+-parseInt(_0x29d938(0x95))+-parseInt(_0x29d938(0x94))*-parseInt(_0x29d938(0x78))+-parseInt(_0x29d938(0x85))*parseInt(_0x29d938(0x8d))+-parseInt(_0x29d938(0x7a))*parseInt(_0x29d938(0x7c))+-parseInt(_0x29d938(0x88))*parseInt(_0x29d938(0x80))+-parseInt(_0x29d938(0x7e))*-parseInt(_0x29d938(0x8e));if(_0x44cf13===_0x22d3f7)break;else _0x2c4d91['push'](_0x2c4d91['shift']());}catch(_0x1021d2){_0x2c4d91['push'](_0x2c4d91['shift']());}}}(a126_0x4a22,0x90cdb));const a126_0x16da31=function(){let _0x31c831=!![];return function(_0x299c3d,_0x17735d){const _0x54609f=_0x31c831?function(){const _0xc73449=a126_0x40ed;if(_0x17735d){const _0x42683b=_0x17735d[_0xc73449(0x8a)](_0x299c3d,arguments);return _0x17735d=null,_0x42683b;}}:function(){};return _0x31c831=![],_0x54609f;};}(),a126_0x37dfc1=a126_0x16da31(this,function(){const _0x48e18f=function(){const _0x32f5e7=a126_0x40ed,_0x38dcf2=_0x48e18f['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x32f5e7(0x90)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x38dcf2[_0x32f5e7(0x83)](a126_0x37dfc1);};return _0x48e18f();});a126_0x37dfc1();'use strict';var __decorate=this&&this[a126_0x4f6d17(0x7b)]||function(_0x3230f8,_0x418c39,_0x5c25a6,_0xe01353){const _0x5d6993=a126_0x4f6d17;var _0x3318f2=arguments['length'],_0x2294f2=_0x3318f2<0x3?_0x418c39:_0xe01353===null?_0xe01353=Object[_0x5d6993(0x9a)](_0x418c39,_0x5c25a6):_0xe01353,_0x385376;if(typeof Reflect==='object'&&typeof Reflect[_0x5d6993(0x79)]===_0x5d6993(0x8f))_0x2294f2=Reflect[_0x5d6993(0x79)](_0x3230f8,_0x418c39,_0x5c25a6,_0xe01353);else{for(var _0x30d150=_0x3230f8[_0x5d6993(0x81)]-0x1;_0x30d150>=0x0;_0x30d150--)if(_0x385376=_0x3230f8[_0x30d150])_0x2294f2=(_0x3318f2<0x3?_0x385376(_0x2294f2):_0x3318f2>0x3?_0x385376(_0x418c39,_0x5c25a6,_0x2294f2):_0x385376(_0x418c39,_0x5c25a6))||_0x2294f2;}return _0x3318f2>0x3&&_0x2294f2&&Object[_0x5d6993(0x8c)](_0x418c39,_0x5c25a6,_0x2294f2),_0x2294f2;},__metadata=this&&this[a126_0x4f6d17(0x96)]||function(_0x34ee5f,_0x508cb5){const _0x435355=a126_0x4f6d17;if(typeof Reflect===_0x435355(0x97)&&typeof Reflect['metadata']===_0x435355(0x8f))return Reflect['metadata'](_0x34ee5f,_0x508cb5);},__importDefault=this&&this[a126_0x4f6d17(0x82)]||function(_0x17e21c){return _0x17e21c&&_0x17e21c['__esModule']?_0x17e21c:{'default':_0x17e21c};};Object[a126_0x4f6d17(0x8c)](exports,'__esModule',{'value':!![]}),exports[a126_0x4f6d17(0x9c)]=void 0x0;const core_1=require('../../core'),unauthorized_error_1=require('../../core/errors/unauthorized.error'),typedi_1=__importDefault(require(a126_0x4f6d17(0x86))),git_provider_manager_1=require(a126_0x4f6d17(0x7d)),app_settings_service_1=require('./services/app-settings.service');let ProviderMiddleware=class ProviderMiddleware{constructor(_0x3156ff){const _0x460167=a126_0x4f6d17;this[_0x460167(0x84)]=_0x3156ff;}async[a126_0x4f6d17(0x7f)](_0x34d442,_0x50c910){const _0xc13ea9=a126_0x4f6d17;if(_0x34d442['headers'][_0xc13ea9(0x89)]){this[_0xc13ea9(0x84)][_0xc13ea9(0x99)]({'provider':_0x34d442['headers'][_0xc13ea9(0x89)]['toString']()});const _0x48b474=typedi_1[_0xc13ea9(0x9b)][_0xc13ea9(0x93)](git_provider_manager_1[_0xc13ea9(0x8b)])['getApi']();await _0x48b474['testConnection']();try{await _0x48b474['isLoggedIn']();}catch(_0x2be0ab){throw new unauthorized_error_1['UnauthorizedError'](_0x2be0ab);}}}};ProviderMiddleware=__decorate([core_1[a126_0x4f6d17(0x87)](a126_0x4f6d17(0x91)),__metadata('design:paramtypes',[app_settings_service_1[a126_0x4f6d17(0x98)]])],ProviderMiddleware),exports[a126_0x4f6d17(0x9c)]=ProviderMiddleware;