const a63_0x16dc=['__param','AppSettingsService','typedi','../../shared/services/app-settings.service','3929ZzdeOA','metadata','290200UlYHqi','createRequest','%clientToken%','__metadata','checkAccessToken','__importDefault','data','user','505069lntaZy','GitApiService','request','getHeaders','309253QRWOTj','__esModule','object','apply','getCurrentUser','post','constructor','245349PXklzp','bitbucket','1uGwrZU','default','apiRequest','./git-api.service','get','AuthSettingsService','now','grant_type=client_credentials','accessToken','86CgTcZO','isLoggedIn','BITBUCKET_REFRESH_TOKEN_URL','1htpmXp','Service','1GvDMib','use','BitbucketApiService','decorate','length','test','update','refreshToken','../../../constants','function','authSettings','Bearer\x20','replace','interceptors','782427eVbNrz','Authorization','accessTokenExpiresAt','__decorate','1148615yinORu','defineProperty','then'];const a63_0x64a53c=a63_0x3426;(function(_0x10723e,_0x2fe76e){const _0x541df4=a63_0x3426;while(!![]){try{const _0x36741a=-parseInt(_0x541df4(0x1c3))*-parseInt(_0x541df4(0x1d8))+parseInt(_0x541df4(0x1ca))*parseInt(_0x541df4(0x1cc))+-parseInt(_0x541df4(0x1b5))*-parseInt(_0x541df4(0x1d5))+-parseInt(_0x541df4(0x1b7))+-parseInt(_0x541df4(0x1aa))+parseInt(_0x541df4(0x1da))*-parseInt(_0x541df4(0x1bf))+parseInt(_0x541df4(0x1ae));if(_0x36741a===_0x2fe76e)break;else _0x10723e['push'](_0x10723e['shift']());}catch(_0x150b68){_0x10723e['push'](_0x10723e['shift']());}}}(a63_0x16dc,0x71237));const a63_0x49ed1b=function(){let _0x4524e8=!![];return function(_0x10bd07,_0x2ae1ce){const _0x3654e8=_0x4524e8?function(){const _0x86e9b2=a63_0x3426;if(_0x2ae1ce){const _0x2ee726=_0x2ae1ce[_0x86e9b2(0x1c6)](_0x10bd07,arguments);return _0x2ae1ce=null,_0x2ee726;}}:function(){};return _0x4524e8=![],_0x3654e8;};}(),a63_0x1ed847=a63_0x49ed1b(this,function(){const _0x509604=function(){const _0x43ba3b=a63_0x3426,_0x16b4ab=_0x509604['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x43ba3b(0x1c9)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x16b4ab[_0x43ba3b(0x1df)](a63_0x1ed847);};return _0x509604();});a63_0x1ed847();'use strict';var __decorate=this&&this[a63_0x64a53c(0x1ad)]||function(_0x3f4e28,_0x33f259,_0x5d0d5e,_0x12d5c5){const _0x10f1a6=a63_0x64a53c;var _0x4e813b=arguments[_0x10f1a6(0x1de)],_0x53e270=_0x4e813b<0x3?_0x33f259:_0x12d5c5===null?_0x12d5c5=Object['getOwnPropertyDescriptor'](_0x33f259,_0x5d0d5e):_0x12d5c5,_0x15fe2b;if(typeof Reflect===_0x10f1a6(0x1c5)&&typeof Reflect[_0x10f1a6(0x1dd)]==='function')_0x53e270=Reflect['decorate'](_0x3f4e28,_0x33f259,_0x5d0d5e,_0x12d5c5);else{for(var _0x1c149c=_0x3f4e28[_0x10f1a6(0x1de)]-0x1;_0x1c149c>=0x0;_0x1c149c--)if(_0x15fe2b=_0x3f4e28[_0x1c149c])_0x53e270=(_0x4e813b<0x3?_0x15fe2b(_0x53e270):_0x4e813b>0x3?_0x15fe2b(_0x33f259,_0x5d0d5e,_0x53e270):_0x15fe2b(_0x33f259,_0x5d0d5e))||_0x53e270;}return _0x4e813b>0x3&&_0x53e270&&Object[_0x10f1a6(0x1af)](_0x33f259,_0x5d0d5e,_0x53e270),_0x53e270;},__metadata=this&&this[a63_0x64a53c(0x1ba)]||function(_0x3a7ede,_0x309ecb){const _0x35df31=a63_0x64a53c;if(typeof Reflect===_0x35df31(0x1c5)&&typeof Reflect[_0x35df31(0x1b6)]===_0x35df31(0x1e3))return Reflect[_0x35df31(0x1b6)](_0x3a7ede,_0x309ecb);},__param=this&&this[a63_0x64a53c(0x1b1)]||function(_0x3d4fee,_0x5c748a){return function(_0x8dc142,_0x5eaf0b){_0x5c748a(_0x8dc142,_0x5eaf0b,_0x3d4fee);};},__importDefault=this&&this[a63_0x64a53c(0x1bc)]||function(_0x430929){return _0x430929&&_0x430929['__esModule']?_0x430929:{'default':_0x430929};};Object['defineProperty'](exports,a63_0x64a53c(0x1c4),{'value':!![]}),exports[a63_0x64a53c(0x1dc)]=void 0x0;const constants_1=require(a63_0x64a53c(0x1e2)),app_settings_service_1=require(a63_0x64a53c(0x1b4)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x64a53c(0x1b3)),git_api_service_1=require(a63_0x64a53c(0x1cf));function a63_0x3426(_0x6f735a,_0x20f2dc){return a63_0x3426=function(_0x2bb039,_0x1ed847){_0x2bb039=_0x2bb039-0x1a6;let _0x49ed1b=a63_0x16dc[_0x2bb039];return _0x49ed1b;},a63_0x3426(_0x6f735a,_0x20f2dc);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x64a53c(0x1c0)]{constructor(_0x3c3f44,_0x523aad){const _0x4033f0=a63_0x64a53c;super(_0x3c3f44),this[_0x4033f0(0x1a6)]=_0x523aad,this[_0x4033f0(0x1ac)]=-0x1,this['request']=this[_0x4033f0(0x1b8)]();}get[a63_0x64a53c(0x1ce)](){const _0x2dd8b9=a63_0x64a53c;return this[_0x2dd8b9(0x1c1)];}['createRequest'](_0x13fac5){const _0x42a3b3=a63_0x64a53c,_0x5701ca=super[_0x42a3b3(0x1b8)](_0x13fac5);return _0x5701ca[_0x42a3b3(0x1a9)]['request'][_0x42a3b3(0x1db)](async _0x3439d4=>{const _0x14c54b=_0x42a3b3;return await this[_0x14c54b(0x1bb)](),_0x3439d4['headers'][_0x14c54b(0x1ab)]=_0x14c54b(0x1a7)+this['accessToken'],_0x3439d4;}),_0x5701ca;}async[a63_0x64a53c(0x1bb)](){const _0x5a8fcf=a63_0x64a53c;if(this[_0x5a8fcf(0x1d4)]&&Date[_0x5a8fcf(0x1d2)]()<this[_0x5a8fcf(0x1ac)])return;await this[_0x5a8fcf(0x1e1)]();}async[a63_0x64a53c(0x1e1)](){const _0x2d7fc6=a63_0x64a53c,{clientToken:_0x5c2037}=this[_0x2d7fc6(0x1a6)][_0x2d7fc6(0x1cb)],_0xc11da0=await axios_1[_0x2d7fc6(0x1cd)][_0x2d7fc6(0x1c8)](constants_1[_0x2d7fc6(0x1d7)][_0x2d7fc6(0x1a8)](_0x2d7fc6(0x1b9),_0x5c2037),_0x2d7fc6(0x1d3))[_0x2d7fc6(0x1b0)](_0x15209e=>_0x15209e[_0x2d7fc6(0x1bd)]),{expires_in:_0x45f3cc,access_token:_0x54f6ba}=_0xc11da0;this['authSettings'][_0x2d7fc6(0x1e0)]({'bitbucket':{...this['authSettings'][_0x2d7fc6(0x1cb)],'token':_0x54f6ba}}),this['accessTokenExpiresAt']=Date[_0x2d7fc6(0x1d2)]()+_0x45f3cc*0x3e8,this[_0x2d7fc6(0x1d4)]=_0x54f6ba;}[a63_0x64a53c(0x1c2)](){return{};}[a63_0x64a53c(0x1c7)](){const _0x8bc4e4=a63_0x64a53c;return this[_0x8bc4e4(0x1c1)][_0x8bc4e4(0x1d0)](_0x8bc4e4(0x1be));}async[a63_0x64a53c(0x1d6)](){const _0x157b17=a63_0x64a53c;return await this[_0x157b17(0x1c7)](),!![];}};BitbucketApiService=__decorate([typedi_1[a63_0x64a53c(0x1d9)](),__param(0x0,typedi_1['Inject']()),__metadata('design:paramtypes',[app_settings_service_1[a63_0x64a53c(0x1b2)],auth_settings_service_1[a63_0x64a53c(0x1d1)]])],BitbucketApiService),exports[a63_0x64a53c(0x1dc)]=BitbucketApiService;