const a63_0x3b42=['update','checkAccessToken','BitbucketApiService','GitApiService','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','headers','179kGWExp','Bearer\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','accessToken','decorate','107659cfsrSC','__metadata','replace','get','defineProperty','getCurrentUser','129909UUKVeX','__param','typedi','Service','__esModule','constructor','metadata','user','Authorization','./git-api.service','authSettings','233289exeXmb','208626GRcxvG','request','Inject','../../shared/services/auth-settings.service','apiRequest','161778ygoKYv','getOwnPropertyDescriptor','AuthSettingsService','createRequest','2xWTRln','99wXrquX','1251IPGYAt','1987tYUWZv','now','bitbucket','refreshToken','getHeaders','grant_type=client_credentials','accessTokenExpiresAt','length','test','function','apply','__decorate','../../shared/services/app-settings.service'];const a63_0x11d5fa=a63_0x3115;(function(_0x550e16,_0x81141c){const _0x3fbfb9=a63_0x3115;while(!![]){try{const _0x44736a=parseInt(_0x3fbfb9(0xf9))+-parseInt(_0x3fbfb9(0xf8))+-parseInt(_0x3fbfb9(0xfe))+parseInt(_0x3fbfb9(0xed))+-parseInt(_0x3fbfb9(0x103))*-parseInt(_0x3fbfb9(0x105))+-parseInt(_0x3fbfb9(0x102))*parseInt(_0x3fbfb9(0xe7))+-parseInt(_0x3fbfb9(0x104))*-parseInt(_0x3fbfb9(0x118));if(_0x44736a===_0x81141c)break;else _0x550e16['push'](_0x550e16['shift']());}catch(_0x5ef1cc){_0x550e16['push'](_0x550e16['shift']());}}}(a63_0x3b42,0x24538));const a63_0x2d9c5a=function(){let _0x3ef921=!![];return function(_0x5ae36c,_0x1cccf6){const _0x53ad8b=_0x3ef921?function(){const _0x5a777a=a63_0x3115;if(_0x1cccf6){const _0x1438ef=_0x1cccf6[_0x5a777a(0x10f)](_0x5ae36c,arguments);return _0x1cccf6=null,_0x1438ef;}}:function(){};return _0x3ef921=![],_0x53ad8b;};}(),a63_0xf11a32=a63_0x2d9c5a(this,function(){const _0x2d7db9=function(){const _0x292de1=a63_0x3115,_0x2c400d=_0x2d7db9[_0x292de1(0xf2)](_0x292de1(0xe4))()['constructor'](_0x292de1(0x116));return!_0x2c400d[_0x292de1(0x10d)](a63_0xf11a32);};return _0x2d7db9();});a63_0xf11a32();'use strict';var __decorate=this&&this[a63_0x11d5fa(0x110)]||function(_0x57d6ee,_0x5c4e0e,_0x20a248,_0x2461f2){const _0xc641cb=a63_0x11d5fa;var _0x106a3e=arguments[_0xc641cb(0x10c)],_0xc96efd=_0x106a3e<0x3?_0x5c4e0e:_0x2461f2===null?_0x2461f2=Object[_0xc641cb(0xff)](_0x5c4e0e,_0x20a248):_0x2461f2,_0x2e0a77;if(typeof Reflect==='object'&&typeof Reflect[_0xc641cb(0xe6)]===_0xc641cb(0x10e))_0xc96efd=Reflect[_0xc641cb(0xe6)](_0x57d6ee,_0x5c4e0e,_0x20a248,_0x2461f2);else{for(var _0x48c9ba=_0x57d6ee['length']-0x1;_0x48c9ba>=0x0;_0x48c9ba--)if(_0x2e0a77=_0x57d6ee[_0x48c9ba])_0xc96efd=(_0x106a3e<0x3?_0x2e0a77(_0xc96efd):_0x106a3e>0x3?_0x2e0a77(_0x5c4e0e,_0x20a248,_0xc96efd):_0x2e0a77(_0x5c4e0e,_0x20a248))||_0xc96efd;}return _0x106a3e>0x3&&_0xc96efd&&Object[_0xc641cb(0xeb)](_0x5c4e0e,_0x20a248,_0xc96efd),_0xc96efd;},__metadata=this&&this[a63_0x11d5fa(0xe8)]||function(_0x21b9ae,_0x30844a){const _0x1ed8e3=a63_0x11d5fa;if(typeof Reflect==='object'&&typeof Reflect[_0x1ed8e3(0xf3)]===_0x1ed8e3(0x10e))return Reflect[_0x1ed8e3(0xf3)](_0x21b9ae,_0x30844a);},__param=this&&this[a63_0x11d5fa(0xee)]||function(_0x2ab8a9,_0x2ada75){return function(_0x4bb437,_0x4c4182){_0x2ada75(_0x4bb437,_0x4c4182,_0x2ab8a9);};},__importDefault=this&&this['__importDefault']||function(_0x40d91d){const _0x5d080c=a63_0x11d5fa;return _0x40d91d&&_0x40d91d[_0x5d080c(0xf1)]?_0x40d91d:{'default':_0x40d91d};};Object['defineProperty'](exports,a63_0x11d5fa(0xf1),{'value':!![]}),exports[a63_0x11d5fa(0x114)]=void 0x0;function a63_0x3115(_0x2af778,_0x3ebd52){return a63_0x3115=function(_0x2fe1e1,_0xf11a32){_0x2fe1e1=_0x2fe1e1-0xe3;let _0x2d9c5a=a63_0x3b42[_0x2fe1e1];return _0x2d9c5a;},a63_0x3115(_0x2af778,_0x3ebd52);}const constants_1=require('../../../constants'),app_settings_service_1=require(a63_0x11d5fa(0x111)),auth_settings_service_1=require(a63_0x11d5fa(0xfc)),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x11d5fa(0xef)),git_api_service_1=require(a63_0x11d5fa(0xf6));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x11d5fa(0x115)]{constructor(_0xed12ea,_0x5dc386){const _0x3f4e56=a63_0x11d5fa;super(_0xed12ea),this[_0x3f4e56(0xf7)]=_0x5dc386,this[_0x3f4e56(0x10b)]=-0x1,this[_0x3f4e56(0xfa)]=this[_0x3f4e56(0x101)]();}get[a63_0x11d5fa(0xfd)](){const _0x498351=a63_0x11d5fa;return this[_0x498351(0xfa)];}[a63_0x11d5fa(0x101)](_0x17f481){const _0x491bce=a63_0x11d5fa,_0x398911=super[_0x491bce(0x101)](_0x17f481);return _0x398911['interceptors'][_0x491bce(0xfa)]['use'](async _0x2579b0=>{const _0x355f24=_0x491bce;return await this[_0x355f24(0x113)](),_0x2579b0[_0x355f24(0x117)][_0x355f24(0xf5)]=_0x355f24(0xe3)+this[_0x355f24(0xe5)],_0x2579b0;}),_0x398911;}async[a63_0x11d5fa(0x113)](){const _0x48a274=a63_0x11d5fa;if(this[_0x48a274(0xe5)]&&Date['now']()<this[_0x48a274(0x10b)])return;await this['refreshToken']();}async[a63_0x11d5fa(0x108)](){const _0x6e49f7=a63_0x11d5fa,{clientToken:_0x35b27e}=this[_0x6e49f7(0xf7)]['bitbucket'],_0x4f8dd4=await axios_1['default']['post'](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x6e49f7(0xe9)]('%clientToken%',_0x35b27e),_0x6e49f7(0x10a))['then'](_0x1259c8=>_0x1259c8['data']),{expires_in:_0x1a4212,access_token:_0x8c460b}=_0x4f8dd4;this[_0x6e49f7(0xf7)][_0x6e49f7(0x112)]({'bitbucket':{...this[_0x6e49f7(0xf7)][_0x6e49f7(0x107)],'token':_0x8c460b}}),this['accessTokenExpiresAt']=Date[_0x6e49f7(0x106)]()+_0x1a4212*0x3e8,this[_0x6e49f7(0xe5)]=_0x8c460b;}[a63_0x11d5fa(0x109)](){return{};}[a63_0x11d5fa(0xec)](){const _0x54e2b9=a63_0x11d5fa;return this[_0x54e2b9(0xfa)][_0x54e2b9(0xea)](_0x54e2b9(0xf4));}async['isLoggedIn'](){try{return await this['getCurrentUser'](),!![];}catch(_0x8fe47a){return![];}}};BitbucketApiService=__decorate([typedi_1[a63_0x11d5fa(0xf0)](),__param(0x0,typedi_1[a63_0x11d5fa(0xfb)]()),__metadata('design:paramtypes',[app_settings_service_1['AppSettingsService'],auth_settings_service_1[a63_0x11d5fa(0x100)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;