const a63_0x14b0=['^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','request','update','metadata','../../../constants','function','default','__importDefault','isLoggedIn','createRequest','31rJuTSL','return\x20/\x22\x20+\x20this\x20+\x20\x22/','apply','accessToken','data','./git-api.service','grant_type=client_credentials','test','post','__esModule','constructor','use','Service','getOwnPropertyDescriptor','86639tcnNLw','%clientToken%','getHeaders','interceptors','Inject','BitbucketApiService','BITBUCKET_REFRESH_TOKEN_URL','167658HgXBfW','get','__metadata','../../shared/services/app-settings.service','AuthSettingsService','__decorate','195109LbEPly','length','typedi','1172746KWpRGJ','replace','1411825LDUVIp','1127079DYtMJJ','1QpNIZJ','121ypJLPG','refreshToken','now','Authorization','defineProperty','bitbucket','object','accessTokenExpiresAt','apiRequest','decorate','3699VfgqfI','authSettings','then','getCurrentUser'];const a63_0x116cb9=a63_0xc9fc;(function(_0x381c7b,_0x1e5c76){const _0x254a30=a63_0xc9fc;while(!![]){try{const _0x467722=-parseInt(_0x254a30(0x146))+-parseInt(_0x254a30(0x145))+parseInt(_0x254a30(0x143))*-parseInt(_0x254a30(0x147))+-parseInt(_0x254a30(0x152))*parseInt(_0x254a30(0x148))+-parseInt(_0x254a30(0x140))+-parseInt(_0x254a30(0x133))+parseInt(_0x254a30(0x125))*parseInt(_0x254a30(0x13a));if(_0x467722===_0x1e5c76)break;else _0x381c7b['push'](_0x381c7b['shift']());}catch(_0x14570e){_0x381c7b['push'](_0x381c7b['shift']());}}}(a63_0x14b0,0xb8ac5));const a63_0x3a5d67=function(){let _0x41ddb7=!![];return function(_0x302e9f,_0x15b0b1){const _0x8669e7=_0x41ddb7?function(){const _0x3eaca=a63_0xc9fc;if(_0x15b0b1){const _0x4eb817=_0x15b0b1[_0x3eaca(0x127)](_0x302e9f,arguments);return _0x15b0b1=null,_0x4eb817;}}:function(){};return _0x41ddb7=![],_0x8669e7;};}(),a63_0x2cc474=a63_0x3a5d67(this,function(){const _0x1b0a2=function(){const _0x5da720=a63_0xc9fc,_0x106d29=_0x1b0a2[_0x5da720(0x12f)](_0x5da720(0x126))()[_0x5da720(0x12f)](_0x5da720(0x156));return!_0x106d29[_0x5da720(0x12c)](a63_0x2cc474);};return _0x1b0a2();});a63_0x2cc474();function a63_0xc9fc(_0x315413,_0x15383b){return a63_0xc9fc=function(_0x4ee7f7,_0x2cc474){_0x4ee7f7=_0x4ee7f7-0x11d;let _0x3a5d67=a63_0x14b0[_0x4ee7f7];return _0x3a5d67;},a63_0xc9fc(_0x315413,_0x15383b);}'use strict';var __decorate=this&&this[a63_0x116cb9(0x13f)]||function(_0x36938d,_0x587727,_0x423dd2,_0x4b0ed1){const _0x1da752=a63_0x116cb9;var _0x5053ab=arguments['length'],_0x5298b1=_0x5053ab<0x3?_0x587727:_0x4b0ed1===null?_0x4b0ed1=Object[_0x1da752(0x132)](_0x587727,_0x423dd2):_0x4b0ed1,_0x323378;if(typeof Reflect===_0x1da752(0x14e)&&typeof Reflect[_0x1da752(0x151)]===_0x1da752(0x120))_0x5298b1=Reflect[_0x1da752(0x151)](_0x36938d,_0x587727,_0x423dd2,_0x4b0ed1);else{for(var _0xf396c0=_0x36938d[_0x1da752(0x141)]-0x1;_0xf396c0>=0x0;_0xf396c0--)if(_0x323378=_0x36938d[_0xf396c0])_0x5298b1=(_0x5053ab<0x3?_0x323378(_0x5298b1):_0x5053ab>0x3?_0x323378(_0x587727,_0x423dd2,_0x5298b1):_0x323378(_0x587727,_0x423dd2))||_0x5298b1;}return _0x5053ab>0x3&&_0x5298b1&&Object['defineProperty'](_0x587727,_0x423dd2,_0x5298b1),_0x5298b1;},__metadata=this&&this[a63_0x116cb9(0x13c)]||function(_0x5e16aa,_0x7dc56){const _0x782416=a63_0x116cb9;if(typeof Reflect===_0x782416(0x14e)&&typeof Reflect['metadata']===_0x782416(0x120))return Reflect[_0x782416(0x11e)](_0x5e16aa,_0x7dc56);},__param=this&&this['__param']||function(_0x5c9d1d,_0x5f17b0){return function(_0x2e926f,_0x2e185d){_0x5f17b0(_0x2e926f,_0x2e185d,_0x5c9d1d);};},__importDefault=this&&this[a63_0x116cb9(0x122)]||function(_0x8e7a9a){const _0x5826d6=a63_0x116cb9;return _0x8e7a9a&&_0x8e7a9a[_0x5826d6(0x12e)]?_0x8e7a9a:{'default':_0x8e7a9a};};Object[a63_0x116cb9(0x14c)](exports,a63_0x116cb9(0x12e),{'value':!![]}),exports[a63_0x116cb9(0x138)]=void 0x0;const constants_1=require(a63_0x116cb9(0x11f)),app_settings_service_1=require(a63_0x116cb9(0x13d)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x116cb9(0x142)),git_api_service_1=require(a63_0x116cb9(0x12a));let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x31106a,_0x3b54a8){const _0x1529aa=a63_0x116cb9;super(_0x31106a),this[_0x1529aa(0x153)]=_0x3b54a8,this[_0x1529aa(0x14f)]=-0x1,this[_0x1529aa(0x157)]=this['createRequest']();}get[a63_0x116cb9(0x150)](){const _0x2e40db=a63_0x116cb9;return this[_0x2e40db(0x157)];}[a63_0x116cb9(0x124)](_0x4c1cfe){const _0x14f0ed=a63_0x116cb9,_0x2c7aa1=super[_0x14f0ed(0x124)](_0x4c1cfe);return _0x2c7aa1[_0x14f0ed(0x136)][_0x14f0ed(0x157)][_0x14f0ed(0x130)](async _0x16c0f8=>{const _0x1acda1=_0x14f0ed;return await this['checkAccessToken'](),_0x16c0f8['headers'][_0x1acda1(0x14b)]='Bearer\x20'+this['accessToken'],_0x16c0f8;}),_0x2c7aa1;}async['checkAccessToken'](){const _0xb51ba1=a63_0x116cb9;if(this[_0xb51ba1(0x128)]&&Date[_0xb51ba1(0x14a)]()<this[_0xb51ba1(0x14f)])return;await this[_0xb51ba1(0x149)]();}async[a63_0x116cb9(0x149)](){const _0x33b614=a63_0x116cb9,{clientToken:_0x295307}=this[_0x33b614(0x153)][_0x33b614(0x14d)],_0x23f4e1=await axios_1[_0x33b614(0x121)][_0x33b614(0x12d)](constants_1[_0x33b614(0x139)][_0x33b614(0x144)](_0x33b614(0x134),_0x295307),_0x33b614(0x12b))[_0x33b614(0x154)](_0x5ef466=>_0x5ef466[_0x33b614(0x129)]),{expires_in:_0x1866c7,access_token:_0x548f54}=_0x23f4e1;this[_0x33b614(0x153)][_0x33b614(0x11d)]({'bitbucket':{...this[_0x33b614(0x153)]['bitbucket'],'token':_0x548f54}}),this[_0x33b614(0x14f)]=Date[_0x33b614(0x14a)]()+_0x1866c7*0x3e8,this[_0x33b614(0x128)]=_0x548f54;}[a63_0x116cb9(0x135)](){return{};}[a63_0x116cb9(0x155)](){const _0x2d1ac7=a63_0x116cb9;return this['request'][_0x2d1ac7(0x13b)]('user');}async[a63_0x116cb9(0x123)](){try{return await this['getCurrentUser'](),!![];}catch(_0x3d9b8e){return![];}}};BitbucketApiService=__decorate([typedi_1[a63_0x116cb9(0x131)](),__param(0x0,typedi_1[a63_0x116cb9(0x137)]()),__metadata('design:paramtypes',[app_settings_service_1['AppSettingsService'],auth_settings_service_1[a63_0x116cb9(0x13e)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;