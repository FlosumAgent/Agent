const a63_0x34de=['object','bitbucket','isLoggedIn','Inject','constructor','axios','get','refreshToken','./git-api.service','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','decorate','defineProperty','getCurrentUser','replace','createRequest','31769iCdpqP','AppSettingsService','../../../constants','getOwnPropertyDescriptor','request','return\x20/\x22\x20+\x20this\x20+\x20\x22/','grant_type=client_credentials','apply','apiRequest','../../shared/services/auth-settings.service','Authorization','1QhbWnS','118436ZKNsFS','GitApiService','data','__metadata','accessTokenExpiresAt','checkAccessToken','metadata','function','design:paramtypes','BitbucketApiService','117732EbFXae','1398600UxVgkw','../../shared/services/app-settings.service','12RfznFA','__param','accessToken','Bearer\x20','headers','then','50RQdruO','getHeaders','length','__decorate','1732292vPkiWN','authSettings','typedi','887555CYsZcW','933684XrJqbq','__esModule','now','post','AuthSettingsService'];const a63_0x3b0c5d=a63_0x22c5;function a63_0x22c5(_0x479c90,_0x31a97e){return a63_0x22c5=function(_0x31e26a,_0x5b1816){_0x31e26a=_0x31e26a-0x114;let _0x3261cc=a63_0x34de[_0x31e26a];return _0x3261cc;},a63_0x22c5(_0x479c90,_0x31a97e);}(function(_0x4150c2,_0x387946){const _0x1efd8f=a63_0x22c5;while(!![]){try{const _0x4e750d=-parseInt(_0x1efd8f(0x119))+-parseInt(_0x1efd8f(0x143))*-parseInt(_0x1efd8f(0x146))+parseInt(_0x1efd8f(0x118))*-parseInt(_0x1efd8f(0x138))+-parseInt(_0x1efd8f(0x115))+parseInt(_0x1efd8f(0x144))+parseInt(_0x1efd8f(0x12d))*parseInt(_0x1efd8f(0x14c))+parseInt(_0x1efd8f(0x139));if(_0x4e750d===_0x387946)break;else _0x4150c2['push'](_0x4150c2['shift']());}catch(_0x3b554b){_0x4150c2['push'](_0x4150c2['shift']());}}}(a63_0x34de,0xeb883));const a63_0x3261cc=function(){let _0x4e3c8b=!![];return function(_0x210373,_0x530fb1){const _0x19f9a=_0x4e3c8b?function(){const _0x5727be=a63_0x22c5;if(_0x530fb1){const _0x26b814=_0x530fb1[_0x5727be(0x134)](_0x210373,arguments);return _0x530fb1=null,_0x26b814;}}:function(){};return _0x4e3c8b=![],_0x19f9a;};}(),a63_0x5b1816=a63_0x3261cc(this,function(){const _0x5e3374=function(){const _0xe9efdb=a63_0x22c5,_0x16fc54=_0x5e3374[_0xe9efdb(0x122)](_0xe9efdb(0x132))()[_0xe9efdb(0x122)](_0xe9efdb(0x127));return!_0x16fc54['test'](a63_0x5b1816);};return _0x5e3374();});a63_0x5b1816();'use strict';var __decorate=this&&this[a63_0x3b0c5d(0x114)]||function(_0x267dbb,_0x3e347b,_0x25a74e,_0x2d8b93){const _0x424408=a63_0x3b0c5d;var _0x5dc2be=arguments[_0x424408(0x14e)],_0x2f3dfa=_0x5dc2be<0x3?_0x3e347b:_0x2d8b93===null?_0x2d8b93=Object[_0x424408(0x130)](_0x3e347b,_0x25a74e):_0x2d8b93,_0x213c64;if(typeof Reflect===_0x424408(0x11e)&&typeof Reflect[_0x424408(0x128)]===_0x424408(0x140))_0x2f3dfa=Reflect['decorate'](_0x267dbb,_0x3e347b,_0x25a74e,_0x2d8b93);else{for(var _0x1f01e2=_0x267dbb[_0x424408(0x14e)]-0x1;_0x1f01e2>=0x0;_0x1f01e2--)if(_0x213c64=_0x267dbb[_0x1f01e2])_0x2f3dfa=(_0x5dc2be<0x3?_0x213c64(_0x2f3dfa):_0x5dc2be>0x3?_0x213c64(_0x3e347b,_0x25a74e,_0x2f3dfa):_0x213c64(_0x3e347b,_0x25a74e))||_0x2f3dfa;}return _0x5dc2be>0x3&&_0x2f3dfa&&Object[_0x424408(0x129)](_0x3e347b,_0x25a74e,_0x2f3dfa),_0x2f3dfa;},__metadata=this&&this[a63_0x3b0c5d(0x13c)]||function(_0x13d208,_0x59da0a){const _0x295904=a63_0x3b0c5d;if(typeof Reflect==='object'&&typeof Reflect[_0x295904(0x13f)]===_0x295904(0x140))return Reflect['metadata'](_0x13d208,_0x59da0a);},__param=this&&this[a63_0x3b0c5d(0x147)]||function(_0x5b112d,_0x151905){return function(_0x4b174b,_0x5dd8a2){_0x151905(_0x4b174b,_0x5dd8a2,_0x5b112d);};},__importDefault=this&&this['__importDefault']||function(_0x4da3e0){return _0x4da3e0&&_0x4da3e0['__esModule']?_0x4da3e0:{'default':_0x4da3e0};};Object[a63_0x3b0c5d(0x129)](exports,a63_0x3b0c5d(0x11a),{'value':!![]}),exports[a63_0x3b0c5d(0x142)]=void 0x0;const constants_1=require(a63_0x3b0c5d(0x12f)),app_settings_service_1=require(a63_0x3b0c5d(0x145)),auth_settings_service_1=require(a63_0x3b0c5d(0x136)),axios_1=__importDefault(require(a63_0x3b0c5d(0x123))),typedi_1=require(a63_0x3b0c5d(0x117)),git_api_service_1=require(a63_0x3b0c5d(0x126));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x3b0c5d(0x13a)]{constructor(_0x16747c,_0x59dca1){const _0xfa788c=a63_0x3b0c5d;super(_0x16747c),this[_0xfa788c(0x116)]=_0x59dca1,this['accessTokenExpiresAt']=-0x1,this[_0xfa788c(0x131)]=this[_0xfa788c(0x12c)]();}get[a63_0x3b0c5d(0x135)](){const _0x4b2c3d=a63_0x3b0c5d;return this[_0x4b2c3d(0x131)];}[a63_0x3b0c5d(0x12c)](_0x250136){const _0x38f1a6=a63_0x3b0c5d,_0x253fb2=super['createRequest'](_0x250136);return _0x253fb2['interceptors'][_0x38f1a6(0x131)]['use'](async _0x1805c9=>{const _0x9c5d28=_0x38f1a6;return await this[_0x9c5d28(0x13e)](),_0x1805c9[_0x9c5d28(0x14a)][_0x9c5d28(0x137)]=_0x9c5d28(0x149)+this[_0x9c5d28(0x148)],_0x1805c9;}),_0x253fb2;}async[a63_0x3b0c5d(0x13e)](){const _0x93037d=a63_0x3b0c5d;if(this[_0x93037d(0x148)]&&Date[_0x93037d(0x11b)]()<this[_0x93037d(0x13d)])return;await this[_0x93037d(0x125)]();}async[a63_0x3b0c5d(0x125)](){const _0x44d7bc=a63_0x3b0c5d,{clientToken:_0x5b2a4f}=this[_0x44d7bc(0x116)][_0x44d7bc(0x11f)],_0x46f069=await axios_1['default'][_0x44d7bc(0x11c)](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x44d7bc(0x12b)]('%clientToken%',_0x5b2a4f),_0x44d7bc(0x133))[_0x44d7bc(0x14b)](_0x3ae5bf=>_0x3ae5bf[_0x44d7bc(0x13b)]),{expires_in:_0x2bfc1b,access_token:_0x3c5733}=_0x46f069;this[_0x44d7bc(0x116)]['update']({'bitbucket':{...this[_0x44d7bc(0x116)]['bitbucket'],'token':_0x3c5733}}),this[_0x44d7bc(0x13d)]=Date[_0x44d7bc(0x11b)]()+_0x2bfc1b*0x3e8,this[_0x44d7bc(0x148)]=_0x3c5733;}[a63_0x3b0c5d(0x14d)](){return{};}['getCurrentUser'](){const _0x4af66e=a63_0x3b0c5d;return this[_0x4af66e(0x131)][_0x4af66e(0x124)]('user');}async[a63_0x3b0c5d(0x120)](){const _0x5bd903=a63_0x3b0c5d;try{return await this[_0x5bd903(0x12a)](),!![];}catch(_0x3fd415){return![];}}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a63_0x3b0c5d(0x121)]()),__metadata(a63_0x3b0c5d(0x141),[app_settings_service_1[a63_0x3b0c5d(0x12e)],auth_settings_service_1[a63_0x3b0c5d(0x11d)]])],BitbucketApiService),exports[a63_0x3b0c5d(0x142)]=BitbucketApiService;