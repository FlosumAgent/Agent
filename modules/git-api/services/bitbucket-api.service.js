const a63_0x2ed1=['then','__decorate','GitApiService','headers','default','grant_type=client_credentials','length','constructor','function','7vayuHD','get','4SIhKVX','__esModule','data','createRequest','344798rvhIkt','metadata','interceptors','getCurrentUser','accessToken','typedi','getHeaders','633324eFyTli','authSettings','bitbucket','../../../constants','decorate','checkAccessToken','AuthSettingsService','937636wTmZQK','%clientToken%','BitbucketApiService','__metadata','apiRequest','replace','post','defineProperty','318452OCLfsD','Inject','__importDefault','../../shared/services/app-settings.service','return\x20/\x22\x20+\x20this\x20+\x20\x22/','3osTbTV','update','445958JqaPvo','apply','../../shared/services/auth-settings.service','request','Authorization','refreshToken','1304874BZOtCu','accessTokenExpiresAt','__param','use','object','89427yXearP','now'];const a63_0x18dbce=a63_0x5b02;(function(_0xef7cce,_0x485a2e){const _0x385f88=a63_0x5b02;while(!![]){try{const _0x19a8f3=-parseInt(_0x385f88(0x15c))*-parseInt(_0x385f88(0x12e))+-parseInt(_0x385f88(0x151))+parseInt(_0x385f88(0x13b))+-parseInt(_0x385f88(0x142))+-parseInt(_0x385f88(0x157))+-parseInt(_0x385f88(0x14a))*-parseInt(_0x385f88(0x14f))+-parseInt(_0x385f88(0x130))*-parseInt(_0x385f88(0x134));if(_0x19a8f3===_0x485a2e)break;else _0xef7cce['push'](_0xef7cce['shift']());}catch(_0x3b54c5){_0xef7cce['push'](_0xef7cce['shift']());}}}(a63_0x2ed1,0xdd0b1));const a63_0x34a3c6=function(){let _0x118648=!![];return function(_0xb65c6f,_0x255c15){const _0x493b03=_0x118648?function(){const _0x508be9=a63_0x5b02;if(_0x255c15){const _0x35fe11=_0x255c15[_0x508be9(0x152)](_0xb65c6f,arguments);return _0x255c15=null,_0x35fe11;}}:function(){};return _0x118648=![],_0x493b03;};}(),a63_0x25fb77=a63_0x34a3c6(this,function(){const _0x3c3f59=function(){const _0x5e924b=a63_0x5b02,_0x1f0f42=_0x3c3f59[_0x5e924b(0x12c)](_0x5e924b(0x14e))()[_0x5e924b(0x12c)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1f0f42['test'](a63_0x25fb77);};return _0x3c3f59();});a63_0x25fb77();'use strict';var __decorate=this&&this[a63_0x18dbce(0x15f)]||function(_0x177e90,_0x54581d,_0x2c176c,_0x33ec7d){const _0x342e49=a63_0x18dbce;var _0xa83173=arguments[_0x342e49(0x12b)],_0x357f1c=_0xa83173<0x3?_0x54581d:_0x33ec7d===null?_0x33ec7d=Object['getOwnPropertyDescriptor'](_0x54581d,_0x2c176c):_0x33ec7d,_0x1e5eeb;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x342e49(0x12d))_0x357f1c=Reflect[_0x342e49(0x13f)](_0x177e90,_0x54581d,_0x2c176c,_0x33ec7d);else{for(var _0xb2579=_0x177e90[_0x342e49(0x12b)]-0x1;_0xb2579>=0x0;_0xb2579--)if(_0x1e5eeb=_0x177e90[_0xb2579])_0x357f1c=(_0xa83173<0x3?_0x1e5eeb(_0x357f1c):_0xa83173>0x3?_0x1e5eeb(_0x54581d,_0x2c176c,_0x357f1c):_0x1e5eeb(_0x54581d,_0x2c176c))||_0x357f1c;}return _0xa83173>0x3&&_0x357f1c&&Object[_0x342e49(0x149)](_0x54581d,_0x2c176c,_0x357f1c),_0x357f1c;},__metadata=this&&this[a63_0x18dbce(0x145)]||function(_0x26b495,_0x54383b){const _0x425545=a63_0x18dbce;if(typeof Reflect===_0x425545(0x15b)&&typeof Reflect[_0x425545(0x135)]===_0x425545(0x12d))return Reflect[_0x425545(0x135)](_0x26b495,_0x54383b);},__param=this&&this[a63_0x18dbce(0x159)]||function(_0x7a7c5c,_0x563974){return function(_0x14975a,_0xa9a018){_0x563974(_0x14975a,_0xa9a018,_0x7a7c5c);};},__importDefault=this&&this[a63_0x18dbce(0x14c)]||function(_0x1a3325){const _0x233e16=a63_0x18dbce;return _0x1a3325&&_0x1a3325[_0x233e16(0x131)]?_0x1a3325:{'default':_0x1a3325};};Object[a63_0x18dbce(0x149)](exports,a63_0x18dbce(0x131),{'value':!![]}),exports[a63_0x18dbce(0x144)]=void 0x0;const constants_1=require(a63_0x18dbce(0x13e)),app_settings_service_1=require(a63_0x18dbce(0x14d)),auth_settings_service_1=require(a63_0x18dbce(0x153)),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x18dbce(0x139)),git_api_service_1=require('./git-api.service');function a63_0x5b02(_0x3593b8,_0x43c669){return a63_0x5b02=function(_0x155a32,_0x25fb77){_0x155a32=_0x155a32-0x128;let _0x34a3c6=a63_0x2ed1[_0x155a32];return _0x34a3c6;},a63_0x5b02(_0x3593b8,_0x43c669);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x18dbce(0x160)]{constructor(_0x4af731,_0x3d1362){const _0x363eb0=a63_0x18dbce;super(_0x4af731),this[_0x363eb0(0x13c)]=_0x3d1362,this[_0x363eb0(0x158)]=-0x1,this[_0x363eb0(0x154)]=this['createRequest']();}get[a63_0x18dbce(0x146)](){const _0x1d82f0=a63_0x18dbce;return this[_0x1d82f0(0x154)];}['createRequest'](_0x2f8291){const _0x35d78b=a63_0x18dbce,_0x47b136=super[_0x35d78b(0x133)](_0x2f8291);return _0x47b136[_0x35d78b(0x136)][_0x35d78b(0x154)][_0x35d78b(0x15a)](async _0x275624=>{const _0x11b45c=_0x35d78b;return await this[_0x11b45c(0x140)](),_0x275624[_0x11b45c(0x128)][_0x11b45c(0x155)]='Bearer\x20'+this[_0x11b45c(0x138)],_0x275624;}),_0x47b136;}async[a63_0x18dbce(0x140)](){const _0x2c41f1=a63_0x18dbce;if(this[_0x2c41f1(0x138)]&&Date[_0x2c41f1(0x15d)]()<this[_0x2c41f1(0x158)])return;await this[_0x2c41f1(0x156)]();}async[a63_0x18dbce(0x156)](){const _0x38529f=a63_0x18dbce,{clientToken:_0x59d3a8}=this[_0x38529f(0x13c)][_0x38529f(0x13d)],_0x44db5c=await axios_1[_0x38529f(0x129)][_0x38529f(0x148)](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x38529f(0x147)](_0x38529f(0x143),_0x59d3a8),_0x38529f(0x12a))[_0x38529f(0x15e)](_0x2a8c8f=>_0x2a8c8f[_0x38529f(0x132)]),{expires_in:_0x401155,access_token:_0x35276f}=_0x44db5c;this['authSettings'][_0x38529f(0x150)]({'bitbucket':{...this[_0x38529f(0x13c)][_0x38529f(0x13d)],'token':_0x35276f}}),this[_0x38529f(0x158)]=Date[_0x38529f(0x15d)]()+_0x401155*0x3e8,this[_0x38529f(0x138)]=_0x35276f;}[a63_0x18dbce(0x13a)](){return{};}[a63_0x18dbce(0x137)](){const _0x43e507=a63_0x18dbce;return this[_0x43e507(0x154)][_0x43e507(0x12f)]('user');}async['isLoggedIn'](){const _0x2c0106=a63_0x18dbce;return await this[_0x2c0106(0x137)](),!![];}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a63_0x18dbce(0x14b)]()),__metadata('design:paramtypes',[app_settings_service_1['AppSettingsService'],auth_settings_service_1[a63_0x18dbce(0x141)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;