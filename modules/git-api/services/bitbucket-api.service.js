const a63_0x1df2=['authSettings','8fjYcJO','./git-api.service','1071FpJAMF','apply','Service','length','createRequest','182447oIIaxQ','__param','82101RisedW','26LgiDgV','constructor','object','isLoggedIn','bitbucket','refreshToken','1180847MlNLro','now','get','user','__metadata','getCurrentUser','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','request','GitApiService','__esModule','1PlpHma','getOwnPropertyDescriptor','defineProperty','Authorization','accessTokenExpiresAt','replace','accessToken','8QIkiys','19749ZSFHli','data','BitbucketApiService','../../shared/services/auth-settings.service','checkAccessToken','grant_type=client_credentials','headers','function','use','test','decorate','AppSettingsService','getHeaders','429296SiDWUm','axios','interceptors','626967ZCrwlv'];const a63_0x45a002=a63_0x41e2;(function(_0x2a5630,_0x2fe9ad){const _0x119d3=a63_0x41e2;while(!![]){try{const _0x5c6f9e=-parseInt(_0x119d3(0x13c))*-parseInt(_0x119d3(0x146))+parseInt(_0x119d3(0x127))+-parseInt(_0x119d3(0x11a))*-parseInt(_0x119d3(0x136))+-parseInt(_0x119d3(0x14d))*parseInt(_0x119d3(0x12e))+-parseInt(_0x119d3(0x12a))+-parseInt(_0x119d3(0x133))+-parseInt(_0x119d3(0x135))*parseInt(_0x119d3(0x12c));if(_0x5c6f9e===_0x2fe9ad)break;else _0x2a5630['push'](_0x2a5630['shift']());}catch(_0x5097c0){_0x2a5630['push'](_0x2a5630['shift']());}}}(a63_0x1df2,0x9e67b));const a63_0x44fb8c=function(){let _0xd32077=!![];return function(_0xc65f7c,_0x5bb929){const _0x47ab54=_0xd32077?function(){const _0x404470=a63_0x41e2;if(_0x5bb929){const _0x27edba=_0x5bb929[_0x404470(0x12f)](_0xc65f7c,arguments);return _0x5bb929=null,_0x27edba;}}:function(){};return _0xd32077=![],_0x47ab54;};}(),a63_0x15d760=a63_0x44fb8c(this,function(){const _0x25c0a7=function(){const _0x32229f=a63_0x41e2,_0x3e6679=_0x25c0a7[_0x32229f(0x137)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x32229f(0x137)](_0x32229f(0x142));return!_0x3e6679[_0x32229f(0x123)](a63_0x15d760);};return _0x25c0a7();});a63_0x15d760();'use strict';var __decorate=this&&this['__decorate']||function(_0x5a8023,_0x52f71a,_0x849885,_0x29d017){const _0x443893=a63_0x41e2;var _0x243d64=arguments[_0x443893(0x131)],_0xe66c9=_0x243d64<0x3?_0x52f71a:_0x29d017===null?_0x29d017=Object[_0x443893(0x147)](_0x52f71a,_0x849885):_0x29d017,_0x191d2d;if(typeof Reflect===_0x443893(0x138)&&typeof Reflect[_0x443893(0x124)]===_0x443893(0x121))_0xe66c9=Reflect[_0x443893(0x124)](_0x5a8023,_0x52f71a,_0x849885,_0x29d017);else{for(var _0x36ea54=_0x5a8023[_0x443893(0x131)]-0x1;_0x36ea54>=0x0;_0x36ea54--)if(_0x191d2d=_0x5a8023[_0x36ea54])_0xe66c9=(_0x243d64<0x3?_0x191d2d(_0xe66c9):_0x243d64>0x3?_0x191d2d(_0x52f71a,_0x849885,_0xe66c9):_0x191d2d(_0x52f71a,_0x849885))||_0xe66c9;}return _0x243d64>0x3&&_0xe66c9&&Object[_0x443893(0x148)](_0x52f71a,_0x849885,_0xe66c9),_0xe66c9;},__metadata=this&&this[a63_0x45a002(0x140)]||function(_0x353994,_0x2d3bd2){const _0x5b2944=a63_0x45a002;if(typeof Reflect===_0x5b2944(0x138)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x353994,_0x2d3bd2);},__param=this&&this[a63_0x45a002(0x134)]||function(_0x2d5a87,_0x260da2){return function(_0x42c9f7,_0x4521bc){_0x260da2(_0x42c9f7,_0x4521bc,_0x2d5a87);};},__importDefault=this&&this['__importDefault']||function(_0x8796b4){return _0x8796b4&&_0x8796b4['__esModule']?_0x8796b4:{'default':_0x8796b4};};function a63_0x41e2(_0x2d287b,_0x53dc84){return a63_0x41e2=function(_0x13b5bc,_0x15d760){_0x13b5bc=_0x13b5bc-0x11a;let _0x44fb8c=a63_0x1df2[_0x13b5bc];return _0x44fb8c;},a63_0x41e2(_0x2d287b,_0x53dc84);}Object[a63_0x45a002(0x148)](exports,a63_0x45a002(0x145),{'value':!![]}),exports[a63_0x45a002(0x11c)]=void 0x0;const constants_1=require('../../../constants'),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require(a63_0x45a002(0x11d)),axios_1=__importDefault(require(a63_0x45a002(0x128))),typedi_1=require('typedi'),git_api_service_1=require(a63_0x45a002(0x12d));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x45a002(0x144)]{constructor(_0x4f3cbd,_0x27e3f0){const _0x315c19=a63_0x45a002;super(_0x4f3cbd),this[_0x315c19(0x12b)]=_0x27e3f0,this[_0x315c19(0x14a)]=-0x1,this[_0x315c19(0x143)]=this[_0x315c19(0x132)]();}get['apiRequest'](){const _0x52e227=a63_0x45a002;return this[_0x52e227(0x143)];}[a63_0x45a002(0x132)](_0x31eb3d){const _0xb397b9=a63_0x45a002,_0x1ed1a4=super[_0xb397b9(0x132)](_0x31eb3d);return _0x1ed1a4[_0xb397b9(0x129)][_0xb397b9(0x143)][_0xb397b9(0x122)](async _0x56f6bb=>{const _0x367090=_0xb397b9;return await this['checkAccessToken'](),_0x56f6bb[_0x367090(0x120)][_0x367090(0x149)]='Bearer\x20'+this[_0x367090(0x14c)],_0x56f6bb;}),_0x1ed1a4;}async[a63_0x45a002(0x11e)](){const _0x245b0c=a63_0x45a002;if(this[_0x245b0c(0x14c)]&&Date[_0x245b0c(0x13d)]()<this[_0x245b0c(0x14a)])return;await this[_0x245b0c(0x13b)]();}async[a63_0x45a002(0x13b)](){const _0x1af055=a63_0x45a002,{clientToken:_0x395b6d}=this['authSettings'][_0x1af055(0x13a)],_0xe02158=await axios_1['default']['post'](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x1af055(0x14b)]('%clientToken%',_0x395b6d),_0x1af055(0x11f))['then'](_0x5e3ba6=>_0x5e3ba6[_0x1af055(0x11b)]),{expires_in:_0x1571c1,access_token:_0x474e2a}=_0xe02158;this[_0x1af055(0x12b)]['update']({'bitbucket':{...this[_0x1af055(0x12b)][_0x1af055(0x13a)],'token':_0x474e2a}}),this['accessTokenExpiresAt']=Date[_0x1af055(0x13d)]()+_0x1571c1*0x3e8,this[_0x1af055(0x14c)]=_0x474e2a;}[a63_0x45a002(0x126)](){return{};}[a63_0x45a002(0x141)](){const _0x5e9b55=a63_0x45a002;return this[_0x5e9b55(0x143)][_0x5e9b55(0x13e)](_0x5e9b55(0x13f));}async[a63_0x45a002(0x139)](){const _0x571235=a63_0x45a002;try{return await this[_0x571235(0x141)](),!![];}catch(_0x4de1f0){return![];}}};BitbucketApiService=__decorate([typedi_1[a63_0x45a002(0x130)](),__param(0x0,typedi_1['Inject']()),__metadata('design:paramtypes',[app_settings_service_1[a63_0x45a002(0x125)],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;