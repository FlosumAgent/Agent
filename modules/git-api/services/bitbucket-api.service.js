const a64_0xe90821=a64_0x3224;(function(_0x53b69a,_0x37771b){const _0x22df0d=a64_0x3224,_0x1850b8=_0x53b69a();while(!![]){try{const _0x4e6667=-parseInt(_0x22df0d(0x1b2))/0x1+parseInt(_0x22df0d(0x1b4))/0x2+-parseInt(_0x22df0d(0x195))/0x3+-parseInt(_0x22df0d(0x19e))/0x4+parseInt(_0x22df0d(0x19a))/0x5+-parseInt(_0x22df0d(0x1ab))/0x6+parseInt(_0x22df0d(0x1b0))/0x7*(parseInt(_0x22df0d(0x1a1))/0x8);if(_0x4e6667===_0x37771b)break;else _0x1850b8['push'](_0x1850b8['shift']());}catch(_0x46cf94){_0x1850b8['push'](_0x1850b8['shift']());}}}(a64_0x39f1,0x974d7));const a64_0x43016b=function(){let _0x30d872=!![];return function(_0x4dec0b,_0x465844){const _0x48653d=_0x30d872?function(){const _0x379e94=a64_0x3224;if(_0x465844){const _0x3a4bae=_0x465844[_0x379e94(0x1ba)](_0x4dec0b,arguments);return _0x465844=null,_0x3a4bae;}}:function(){};return _0x30d872=![],_0x48653d;};}(),a64_0x49691d=a64_0x43016b(this,function(){const _0x2b1ec2=a64_0x3224;return a64_0x49691d[_0x2b1ec2(0x1ac)]()[_0x2b1ec2(0x19c)](_0x2b1ec2(0x1ae))[_0x2b1ec2(0x1ac)]()[_0x2b1ec2(0x1b6)](a64_0x49691d)[_0x2b1ec2(0x19c)](_0x2b1ec2(0x1ae));});a64_0x49691d();function a64_0x3224(_0x97e502,_0x413c72){const _0x53c2ef=a64_0x39f1();return a64_0x3224=function(_0x49691d,_0x43016b){_0x49691d=_0x49691d-0x188;let _0x39f1a7=_0x53c2ef[_0x49691d];return _0x39f1a7;},a64_0x3224(_0x97e502,_0x413c72);}function a64_0x39f1(){const _0x45413c=['(((.+)+)+)+$','Inject','56yfTtmO','isLoggedIn','1195017PIxiOI','design:paramtypes','273678PaPlVt','__metadata','constructor','data','user','__decorate','apply','post','MAX_REQUEST_PER_HOUR','AuthSettingsService','refreshToken','accessToken','replace','../../shared/services/app-settings.service','get','function','BitbucketApiService','__importDefault','getOwnPropertyDescriptor','interceptors','bitbucket','__esModule','defineProperty','accessTokenExpiresAt','metadata','request','length','axios','now','764673kPmeOV','default','headers','GitApiService','typedi','2942870tMngis','__param','search','%clientToken%','2339128zHmHsQ','object','AppSettingsService','2837216KBIqFB','Service','createRequest','Bearer\x20','then','authSettings','decorate','apiRequest','Authorization','getCurrentUser','5449224xXfNKS','toString','../../shared/services/auth-settings.service'];a64_0x39f1=function(){return _0x45413c;};return a64_0x39f1();}'use strict';var __decorate=this&&this[a64_0xe90821(0x1b9)]||function(_0x1ffaf8,_0x1cc269,_0x5e4489,_0x48e1de){const _0x4df8fe=a64_0xe90821;var _0x1215e7=arguments[_0x4df8fe(0x192)],_0x12f7c9=_0x1215e7<0x3?_0x1cc269:_0x48e1de===null?_0x48e1de=Object[_0x4df8fe(0x18a)](_0x1cc269,_0x5e4489):_0x48e1de,_0x15a01b;if(typeof Reflect==='object'&&typeof Reflect[_0x4df8fe(0x1a7)]===_0x4df8fe(0x1c3))_0x12f7c9=Reflect[_0x4df8fe(0x1a7)](_0x1ffaf8,_0x1cc269,_0x5e4489,_0x48e1de);else{for(var _0x61cb2b=_0x1ffaf8[_0x4df8fe(0x192)]-0x1;_0x61cb2b>=0x0;_0x61cb2b--)if(_0x15a01b=_0x1ffaf8[_0x61cb2b])_0x12f7c9=(_0x1215e7<0x3?_0x15a01b(_0x12f7c9):_0x1215e7>0x3?_0x15a01b(_0x1cc269,_0x5e4489,_0x12f7c9):_0x15a01b(_0x1cc269,_0x5e4489))||_0x12f7c9;}return _0x1215e7>0x3&&_0x12f7c9&&Object['defineProperty'](_0x1cc269,_0x5e4489,_0x12f7c9),_0x12f7c9;},__metadata=this&&this[a64_0xe90821(0x1b5)]||function(_0x2ca01f,_0x5b34df){const _0x3ce3f8=a64_0xe90821;if(typeof Reflect===_0x3ce3f8(0x19f)&&typeof Reflect[_0x3ce3f8(0x190)]==='function')return Reflect[_0x3ce3f8(0x190)](_0x2ca01f,_0x5b34df);},__param=this&&this[a64_0xe90821(0x19b)]||function(_0x22ecec,_0x3af504){return function(_0x1c3981,_0x3e3354){_0x3af504(_0x1c3981,_0x3e3354,_0x22ecec);};},__importDefault=this&&this[a64_0xe90821(0x189)]||function(_0x115d4b){const _0x1dd6db=a64_0xe90821;return _0x115d4b&&_0x115d4b[_0x1dd6db(0x18d)]?_0x115d4b:{'default':_0x115d4b};};Object[a64_0xe90821(0x18e)](exports,a64_0xe90821(0x18d),{'value':!![]}),exports[a64_0xe90821(0x188)]=void 0x0;const constants_1=require('../../../constants'),app_settings_service_1=require(a64_0xe90821(0x1c1)),auth_settings_service_1=require(a64_0xe90821(0x1ad)),axios_1=__importDefault(require(a64_0xe90821(0x193))),typedi_1=require(a64_0xe90821(0x199)),git_api_service_1=require('./git-api.service');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a64_0xe90821(0x198)]{constructor(_0x11e99f,_0x47a897){const _0x2c8e8e=a64_0xe90821;super(_0x11e99f),this[_0x2c8e8e(0x1a6)]=_0x47a897,this['accessTokenExpiresAt']=-0x1,this[_0x2c8e8e(0x1bc)]=0x3e8,this[_0x2c8e8e(0x191)]=this['createRequest']();}get[a64_0xe90821(0x1a8)](){return this['request'];}[a64_0xe90821(0x1a3)](_0x1fa8b8){const _0x21a234=a64_0xe90821,_0x265b7f=super[_0x21a234(0x1a3)](_0x1fa8b8);return _0x265b7f[_0x21a234(0x18b)][_0x21a234(0x191)]['use'](async _0x28ffe9=>{const _0x162602=_0x21a234;return await this['checkAccessToken'](),_0x28ffe9[_0x162602(0x197)][_0x162602(0x1a9)]=_0x162602(0x1a4)+this['accessToken'],_0x28ffe9;}),_0x265b7f;}async['checkAccessToken'](){const _0x1e2c05=a64_0xe90821;if(this[_0x1e2c05(0x1bf)]&&Date[_0x1e2c05(0x194)]()<this[_0x1e2c05(0x18f)])return;await this[_0x1e2c05(0x1be)]();}async[a64_0xe90821(0x1be)](){const _0x22ae7b=a64_0xe90821,{clientToken:_0x38f25b}=this['authSettings']['bitbucket'],_0x57a04d=await axios_1[_0x22ae7b(0x196)][_0x22ae7b(0x1bb)](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x22ae7b(0x1c0)](_0x22ae7b(0x19d),_0x38f25b),'grant_type=client_credentials')[_0x22ae7b(0x1a5)](_0x587757=>_0x587757[_0x22ae7b(0x1b7)]),{expires_in:_0x2d5121,access_token:_0x4ffa85}=_0x57a04d;this['authSettings']['update']({'bitbucket':{...this['authSettings'][_0x22ae7b(0x18c)],'token':_0x4ffa85}}),this[_0x22ae7b(0x18f)]=Date[_0x22ae7b(0x194)]()+_0x2d5121*0x3e8,this['accessToken']=_0x4ffa85;}['getHeaders'](){return{};}[a64_0xe90821(0x1aa)](){const _0x4da782=a64_0xe90821;return this[_0x4da782(0x191)][_0x4da782(0x1c2)](_0x4da782(0x1b8));}async[a64_0xe90821(0x1b1)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a64_0xe90821(0x1a2)])(),__param(0x0,(0x0,typedi_1[a64_0xe90821(0x1af)])()),__metadata(a64_0xe90821(0x1b3),[app_settings_service_1[a64_0xe90821(0x1a0)],auth_settings_service_1[a64_0xe90821(0x1bd)]])],BitbucketApiService),exports[a64_0xe90821(0x188)]=BitbucketApiService;