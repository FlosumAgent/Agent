const a63_0x1dc5=['apply','metadata','default','1263640BjCpsj','test','39284UFAzmR','%clientToken%','use','constructor','checkAccessToken','../../shared/services/auth-settings.service','GitApiService','interceptors','post','authSettings','1CPScgr','1gAcUMc','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','replace','AuthSettingsService','../../../constants','isLoggedIn','6TJqcyG','headers','refreshToken','BitbucketApiService','object','3oeLGWp','bitbucket','1232513VzhWIp','request','accessToken','defineProperty','getOwnPropertyDescriptor','then','apiRequest','user','getHeaders','typedi','data','__param','now','createRequest','__esModule','__importDefault','BITBUCKET_REFRESH_TOKEN_URL','__metadata','accessTokenExpiresAt','1237140KAiTBr','19087oLANJY','decorate','273395yaZQkG','design:paramtypes','function','Inject','__decorate','getCurrentUser','177501HLqrJs','length'];const a63_0x138344=a63_0x5f1d;(function(_0x35b026,_0x287004){const _0x263986=a63_0x5f1d;while(!![]){try{const _0x3e4cc2=parseInt(_0x263986(0x147))+-parseInt(_0x263986(0x139))+-parseInt(_0x263986(0x118))*-parseInt(_0x263986(0x142))+parseInt(_0x263986(0x149))+-parseInt(_0x263986(0x126))*-parseInt(_0x263986(0x119))+-parseInt(_0x263986(0x11f))*-parseInt(_0x263986(0x13a))+parseInt(_0x263986(0x13c))*-parseInt(_0x263986(0x124));if(_0x3e4cc2===_0x287004)break;else _0x35b026['push'](_0x35b026['shift']());}catch(_0x497631){_0x35b026['push'](_0x35b026['shift']());}}}(a63_0x1dc5,0xbc057));const a63_0x54bdcf=function(){let _0x56bf4f=!![];return function(_0x238ffa,_0x268044){const _0x25157a=_0x56bf4f?function(){const _0x281bdf=a63_0x5f1d;if(_0x268044){const _0x3000fe=_0x268044[_0x281bdf(0x144)](_0x238ffa,arguments);return _0x268044=null,_0x3000fe;}}:function(){};return _0x56bf4f=![],_0x25157a;};}(),a63_0x533a39=a63_0x54bdcf(this,function(){const _0x50a7df=function(){const _0x4a7f09=a63_0x5f1d,_0x7dbc18=_0x50a7df[_0x4a7f09(0x14c)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x4a7f09(0x14c)](_0x4a7f09(0x11a));return!_0x7dbc18[_0x4a7f09(0x148)](a63_0x533a39);};return _0x50a7df();});a63_0x533a39();'use strict';var __decorate=this&&this[a63_0x138344(0x140)]||function(_0x253cbc,_0x28924d,_0x4edcb2,_0x53d661){const _0x207fc1=a63_0x138344;var _0x4b4534=arguments[_0x207fc1(0x143)],_0x463f13=_0x4b4534<0x3?_0x28924d:_0x53d661===null?_0x53d661=Object[_0x207fc1(0x12a)](_0x28924d,_0x4edcb2):_0x53d661,_0x31a3e0;if(typeof Reflect===_0x207fc1(0x123)&&typeof Reflect[_0x207fc1(0x13b)]===_0x207fc1(0x13e))_0x463f13=Reflect['decorate'](_0x253cbc,_0x28924d,_0x4edcb2,_0x53d661);else{for(var _0xdeb412=_0x253cbc['length']-0x1;_0xdeb412>=0x0;_0xdeb412--)if(_0x31a3e0=_0x253cbc[_0xdeb412])_0x463f13=(_0x4b4534<0x3?_0x31a3e0(_0x463f13):_0x4b4534>0x3?_0x31a3e0(_0x28924d,_0x4edcb2,_0x463f13):_0x31a3e0(_0x28924d,_0x4edcb2))||_0x463f13;}return _0x4b4534>0x3&&_0x463f13&&Object[_0x207fc1(0x129)](_0x28924d,_0x4edcb2,_0x463f13),_0x463f13;},__metadata=this&&this[a63_0x138344(0x137)]||function(_0x5f3277,_0x240c42){const _0x15a658=a63_0x138344;if(typeof Reflect===_0x15a658(0x123)&&typeof Reflect[_0x15a658(0x145)]===_0x15a658(0x13e))return Reflect['metadata'](_0x5f3277,_0x240c42);},__param=this&&this[a63_0x138344(0x131)]||function(_0x2e4653,_0x2c8963){return function(_0x4b1ec9,_0x2d0ce5){_0x2c8963(_0x4b1ec9,_0x2d0ce5,_0x2e4653);};},__importDefault=this&&this[a63_0x138344(0x135)]||function(_0x43e79f){const _0x4073f6=a63_0x138344;return _0x43e79f&&_0x43e79f[_0x4073f6(0x134)]?_0x43e79f:{'default':_0x43e79f};};Object['defineProperty'](exports,a63_0x138344(0x134),{'value':!![]}),exports[a63_0x138344(0x122)]=void 0x0;const constants_1=require(a63_0x138344(0x11d)),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require(a63_0x138344(0x14e)),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x138344(0x12f)),git_api_service_1=require('./git-api.service');function a63_0x5f1d(_0x290cb7,_0x440192){return a63_0x5f1d=function(_0x224cf3,_0x533a39){_0x224cf3=_0x224cf3-0x115;let _0x54bdcf=a63_0x1dc5[_0x224cf3];return _0x54bdcf;},a63_0x5f1d(_0x290cb7,_0x440192);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x138344(0x14f)]{constructor(_0x2d613d,_0x5205e1){const _0x219c9b=a63_0x138344;super(_0x2d613d),this['authSettings']=_0x5205e1,this[_0x219c9b(0x138)]=-0x1,this[_0x219c9b(0x127)]=this[_0x219c9b(0x133)]();}get[a63_0x138344(0x12c)](){const _0x3b02df=a63_0x138344;return this[_0x3b02df(0x127)];}['createRequest'](_0x32a99c){const _0x3c3a08=a63_0x138344,_0x1216c=super['createRequest'](_0x32a99c);return _0x1216c[_0x3c3a08(0x115)][_0x3c3a08(0x127)][_0x3c3a08(0x14b)](async _0x120f6c=>{const _0x42ce61=_0x3c3a08;return await this['checkAccessToken'](),_0x120f6c[_0x42ce61(0x120)]['Authorization']='Bearer\x20'+this[_0x42ce61(0x128)],_0x120f6c;}),_0x1216c;}async[a63_0x138344(0x14d)](){const _0x12c98b=a63_0x138344;if(this[_0x12c98b(0x128)]&&Date[_0x12c98b(0x132)]()<this[_0x12c98b(0x138)])return;await this['refreshToken']();}async[a63_0x138344(0x121)](){const _0x3a30e6=a63_0x138344,{clientToken:_0x4f0435}=this['authSettings'][_0x3a30e6(0x125)],_0x4695c8=await axios_1[_0x3a30e6(0x146)][_0x3a30e6(0x116)](constants_1[_0x3a30e6(0x136)][_0x3a30e6(0x11b)](_0x3a30e6(0x14a),_0x4f0435),'grant_type=client_credentials')[_0x3a30e6(0x12b)](_0x3f2079=>_0x3f2079[_0x3a30e6(0x130)]),{expires_in:_0x1be7b6,access_token:_0x1f9140}=_0x4695c8;this[_0x3a30e6(0x117)]['update']({'bitbucket':{...this[_0x3a30e6(0x117)][_0x3a30e6(0x125)],'token':_0x1f9140}}),this[_0x3a30e6(0x138)]=Date[_0x3a30e6(0x132)]()+_0x1be7b6*0x3e8,this['accessToken']=_0x1f9140;}[a63_0x138344(0x12e)](){return{};}[a63_0x138344(0x141)](){const _0x311264=a63_0x138344;return this[_0x311264(0x127)]['get'](_0x311264(0x12d));}async[a63_0x138344(0x11e)](){const _0x82d804=a63_0x138344;return await this[_0x82d804(0x141)](),!![];}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a63_0x138344(0x13f)]()),__metadata(a63_0x138344(0x13d),[app_settings_service_1['AppSettingsService'],auth_settings_service_1[a63_0x138344(0x11c)]])],BitbucketApiService),exports[a63_0x138344(0x122)]=BitbucketApiService;