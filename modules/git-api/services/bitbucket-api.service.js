const a62_0x424e=['__decorate','refreshToken','accessTokenExpiresAt','data','function','6277FpPZhx','1esfeOZ','858989lHSNPz','__importDefault','defineProperty','__param','2331745ECSnJH','request','bitbucket','GitApiService','getCurrentUser','design:paramtypes','259341hRNOer','constructor','createRequest','object','../../shared/services/app-settings.service','getOwnPropertyDescriptor','isLoggedIn','AppSettingsService','user','1TSSRYa','125wBQZNh','now','metadata','BitbucketApiService','./git-api.service','BITBUCKET_REFRESH_TOKEN_URL','then','AuthSettingsService','authSettings','length','8FQGzGC','Service','return\x20/\x22\x20+\x20this\x20+\x20\x22/','1158286nieiEN','headers','post','getHeaders','test','interceptors','__metadata','58462GifmEk','typedi','decorate','get','%clientToken%','497397JeEAWr','use','accessToken','checkAccessToken','__esModule','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];const a62_0x353aaa=a62_0x2531;(function(_0x592c4e,_0x40960f){const _0x35300f=a62_0x2531;while(!![]){try{const _0x174beb=parseInt(_0x35300f(0x15b))+parseInt(_0x35300f(0x164))*parseInt(_0x35300f(0x151))+-parseInt(_0x35300f(0x179))*parseInt(_0x35300f(0x16f))+parseInt(_0x35300f(0x14f))*parseInt(_0x35300f(0x165))+parseInt(_0x35300f(0x17e))+parseInt(_0x35300f(0x150))*parseInt(_0x35300f(0x172))+-parseInt(_0x35300f(0x155));if(_0x174beb===_0x40960f)break;else _0x592c4e['push'](_0x592c4e['shift']());}catch(_0x4e1e52){_0x592c4e['push'](_0x592c4e['shift']());}}}(a62_0x424e,0xb959d));const a62_0x3135f2=function(){let _0x4a3560=!![];return function(_0x3a024e,_0x41f1ba){const _0x1a42df=_0x4a3560?function(){if(_0x41f1ba){const _0x2184b6=_0x41f1ba['apply'](_0x3a024e,arguments);return _0x41f1ba=null,_0x2184b6;}}:function(){};return _0x4a3560=![],_0x1a42df;};}(),a62_0xe8099f=a62_0x3135f2(this,function(){const _0x3f83ba=function(){const _0x85fdf1=a62_0x2531,_0xe2f99f=_0x3f83ba[_0x85fdf1(0x15c)](_0x85fdf1(0x171))()[_0x85fdf1(0x15c)](_0x85fdf1(0x149));return!_0xe2f99f[_0x85fdf1(0x176)](a62_0xe8099f);};return _0x3f83ba();});a62_0xe8099f();function a62_0x2531(_0x39ea2c,_0x2c3437){return a62_0x2531=function(_0x429140,_0xe8099f){_0x429140=_0x429140-0x149;let _0x3135f2=a62_0x424e[_0x429140];return _0x3135f2;},a62_0x2531(_0x39ea2c,_0x2c3437);}'use strict';var __decorate=this&&this[a62_0x353aaa(0x14a)]||function(_0x2afeea,_0x5c8f57,_0xbca54d,_0xe5d1eb){const _0x3ba80f=a62_0x353aaa;var _0x348b61=arguments['length'],_0xae841=_0x348b61<0x3?_0x5c8f57:_0xe5d1eb===null?_0xe5d1eb=Object[_0x3ba80f(0x160)](_0x5c8f57,_0xbca54d):_0xe5d1eb,_0x437ed0;if(typeof Reflect==='object'&&typeof Reflect[_0x3ba80f(0x17b)]===_0x3ba80f(0x14e))_0xae841=Reflect[_0x3ba80f(0x17b)](_0x2afeea,_0x5c8f57,_0xbca54d,_0xe5d1eb);else{for(var _0x5d383b=_0x2afeea[_0x3ba80f(0x16e)]-0x1;_0x5d383b>=0x0;_0x5d383b--)if(_0x437ed0=_0x2afeea[_0x5d383b])_0xae841=(_0x348b61<0x3?_0x437ed0(_0xae841):_0x348b61>0x3?_0x437ed0(_0x5c8f57,_0xbca54d,_0xae841):_0x437ed0(_0x5c8f57,_0xbca54d))||_0xae841;}return _0x348b61>0x3&&_0xae841&&Object[_0x3ba80f(0x153)](_0x5c8f57,_0xbca54d,_0xae841),_0xae841;},__metadata=this&&this[a62_0x353aaa(0x178)]||function(_0x2b763a,_0x27c751){const _0x209f9f=a62_0x353aaa;if(typeof Reflect===_0x209f9f(0x15e)&&typeof Reflect[_0x209f9f(0x167)]==='function')return Reflect[_0x209f9f(0x167)](_0x2b763a,_0x27c751);},__param=this&&this[a62_0x353aaa(0x154)]||function(_0x30c8b8,_0x3b8b99){return function(_0x245eee,_0x560292){_0x3b8b99(_0x245eee,_0x560292,_0x30c8b8);};},__importDefault=this&&this[a62_0x353aaa(0x152)]||function(_0x5c09f8){const _0x3f4560=a62_0x353aaa;return _0x5c09f8&&_0x5c09f8[_0x3f4560(0x182)]?_0x5c09f8:{'default':_0x5c09f8};};Object[a62_0x353aaa(0x153)](exports,a62_0x353aaa(0x182),{'value':!![]}),exports[a62_0x353aaa(0x168)]=void 0x0;const constants_1=require('../../../constants'),app_settings_service_1=require(a62_0x353aaa(0x15f)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require(a62_0x353aaa(0x17a)),git_api_service_1=require(a62_0x353aaa(0x169));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a62_0x353aaa(0x158)]{constructor(_0x43aa24,_0xde2b66){const _0x48ecd6=a62_0x353aaa;super(_0x43aa24),this[_0x48ecd6(0x16d)]=_0xde2b66,this[_0x48ecd6(0x14c)]=-0x1,this[_0x48ecd6(0x156)]=this['createRequest']();}get['apiRequest'](){return this['request'];}[a62_0x353aaa(0x15d)](_0x489fbe){const _0x51c3cd=a62_0x353aaa,_0x2be42e=super['createRequest'](_0x489fbe);return _0x2be42e[_0x51c3cd(0x177)][_0x51c3cd(0x156)][_0x51c3cd(0x17f)](async _0x1bce82=>{const _0x4ef0f8=_0x51c3cd;return await this[_0x4ef0f8(0x181)](),_0x1bce82[_0x4ef0f8(0x173)]['Authorization']='Bearer\x20'+this[_0x4ef0f8(0x180)],_0x1bce82;}),_0x2be42e;}async[a62_0x353aaa(0x181)](){const _0x3827e1=a62_0x353aaa;if(this[_0x3827e1(0x180)]&&Date[_0x3827e1(0x166)]()<this[_0x3827e1(0x14c)])return;await this[_0x3827e1(0x14b)]();}async['refreshToken'](){const _0x36d28f=a62_0x353aaa,{clientToken:_0x253c10}=this['authSettings'][_0x36d28f(0x157)],_0x3525bb=await axios_1['default'][_0x36d28f(0x174)](constants_1[_0x36d28f(0x16a)]['replace'](_0x36d28f(0x17d),_0x253c10),'grant_type=client_credentials')[_0x36d28f(0x16b)](_0x2365f2=>_0x2365f2[_0x36d28f(0x14d)]),{expires_in:_0x5103e1,access_token:_0xa5cfa7}=_0x3525bb;this[_0x36d28f(0x16d)]['update']({'bitbucket':{...this[_0x36d28f(0x16d)][_0x36d28f(0x157)],'token':_0xa5cfa7}}),this['accessTokenExpiresAt']=Date['now']()+_0x5103e1*0x3e8,this['accessToken']=_0xa5cfa7;}[a62_0x353aaa(0x175)](){return{};}[a62_0x353aaa(0x159)](){const _0x4e2b5f=a62_0x353aaa;return this[_0x4e2b5f(0x156)][_0x4e2b5f(0x17c)](_0x4e2b5f(0x163));}async[a62_0x353aaa(0x161)](){try{return await this['getCurrentUser'](),!![];}catch(_0x2bf98b){return![];}}};BitbucketApiService=__decorate([typedi_1[a62_0x353aaa(0x170)](),__param(0x0,typedi_1['Inject']()),__metadata(a62_0x353aaa(0x15a),[app_settings_service_1[a62_0x353aaa(0x162)],auth_settings_service_1[a62_0x353aaa(0x16c)]])],BitbucketApiService),exports[a62_0x353aaa(0x168)]=BitbucketApiService;