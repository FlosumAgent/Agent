const a63_0x28c6=['interceptors','function','length','getCurrentUser','AppSettingsService','use','metadata','AuthSettingsService','typedi','getOwnPropertyDescriptor','Authorization','accessTokenExpiresAt','replace','bitbucket','design:paramtypes','object','then','%clientToken%','1490843ahOdyX','Inject','refreshToken','GitApiService','request','5113moQuiu','__metadata','71uJZqoi','BITBUCKET_REFRESH_TOKEN_URL','133337aMlYUM','251836cNgLQm','Service','__decorate','accessToken','createRequest','constructor','getHeaders','1bybsmX','data','__importDefault','../../shared/services/auth-settings.service','checkAccessToken','headers','decorate','143201gcUpgf','./git-api.service','authSettings','default','../../../constants','defineProperty','__param','312916IPFoMl','../../shared/services/app-settings.service','771531VBkvwm','get','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','grant_type=client_credentials','BitbucketApiService','__esModule','Bearer\x20'];const a63_0x164dd6=a63_0x453e;(function(_0x130050,_0x5286a0){const _0x5c8871=a63_0x453e;while(!![]){try{const _0x176266=parseInt(_0x5c8871(0x1bb))+-parseInt(_0x5c8871(0x1c4))+parseInt(_0x5c8871(0x1c2))+parseInt(_0x5c8871(0x1e2))*-parseInt(_0x5c8871(0x1e4))+-parseInt(_0x5c8871(0x1e7))+-parseInt(_0x5c8871(0x1e6))*parseInt(_0x5c8871(0x1ee))+parseInt(_0x5c8871(0x1dd));if(_0x176266===_0x5286a0)break;else _0x130050['push'](_0x130050['shift']());}catch(_0x3a967e){_0x130050['push'](_0x130050['shift']());}}}(a63_0x28c6,0x684e1));const a63_0x54b452=function(){let _0x14cb2b=!![];return function(_0x2a276b,_0x2aaaf7){const _0x1210a4=_0x14cb2b?function(){if(_0x2aaaf7){const _0x3e5d3b=_0x2aaaf7['apply'](_0x2a276b,arguments);return _0x2aaaf7=null,_0x3e5d3b;}}:function(){};return _0x14cb2b=![],_0x1210a4;};}(),a63_0x42f4f2=a63_0x54b452(this,function(){const _0x331ddd=function(){const _0x18c5bf=a63_0x453e,_0x485d2b=_0x331ddd[_0x18c5bf(0x1ec)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x18c5bf(0x1ec)](_0x18c5bf(0x1c6));return!_0x485d2b['test'](a63_0x42f4f2);};return _0x331ddd();});a63_0x42f4f2();'use strict';var __decorate=this&&this[a63_0x164dd6(0x1e9)]||function(_0x9e57ad,_0x1b365b,_0x2d3c75,_0x210700){const _0x23f2ba=a63_0x164dd6;var _0x420626=arguments[_0x23f2ba(0x1cd)],_0x9dee92=_0x420626<0x3?_0x1b365b:_0x210700===null?_0x210700=Object[_0x23f2ba(0x1d4)](_0x1b365b,_0x2d3c75):_0x210700,_0x3c8d9a;if(typeof Reflect===_0x23f2ba(0x1da)&&typeof Reflect[_0x23f2ba(0x1ba)]==='function')_0x9dee92=Reflect[_0x23f2ba(0x1ba)](_0x9e57ad,_0x1b365b,_0x2d3c75,_0x210700);else{for(var _0x5966f8=_0x9e57ad['length']-0x1;_0x5966f8>=0x0;_0x5966f8--)if(_0x3c8d9a=_0x9e57ad[_0x5966f8])_0x9dee92=(_0x420626<0x3?_0x3c8d9a(_0x9dee92):_0x420626>0x3?_0x3c8d9a(_0x1b365b,_0x2d3c75,_0x9dee92):_0x3c8d9a(_0x1b365b,_0x2d3c75))||_0x9dee92;}return _0x420626>0x3&&_0x9dee92&&Object[_0x23f2ba(0x1c0)](_0x1b365b,_0x2d3c75,_0x9dee92),_0x9dee92;},__metadata=this&&this[a63_0x164dd6(0x1e3)]||function(_0x574f57,_0xe26e75){const _0x7a1784=a63_0x164dd6;if(typeof Reflect===_0x7a1784(0x1da)&&typeof Reflect[_0x7a1784(0x1d1)]===_0x7a1784(0x1cc))return Reflect[_0x7a1784(0x1d1)](_0x574f57,_0xe26e75);},__param=this&&this[a63_0x164dd6(0x1c1)]||function(_0x111f76,_0x23b6a3){return function(_0x3ac4aa,_0x2d55b9){_0x23b6a3(_0x3ac4aa,_0x2d55b9,_0x111f76);};},__importDefault=this&&this[a63_0x164dd6(0x1f0)]||function(_0x3cdd48){const _0x548a6e=a63_0x164dd6;return _0x3cdd48&&_0x3cdd48[_0x548a6e(0x1c9)]?_0x3cdd48:{'default':_0x3cdd48};};Object[a63_0x164dd6(0x1c0)](exports,a63_0x164dd6(0x1c9),{'value':!![]}),exports[a63_0x164dd6(0x1c8)]=void 0x0;function a63_0x453e(_0x96a6a1,_0x2d063e){return a63_0x453e=function(_0x305ff2,_0x42f4f2){_0x305ff2=_0x305ff2-0x1b8;let _0x54b452=a63_0x28c6[_0x305ff2];return _0x54b452;},a63_0x453e(_0x96a6a1,_0x2d063e);}const constants_1=require(a63_0x164dd6(0x1bf)),app_settings_service_1=require(a63_0x164dd6(0x1c3)),auth_settings_service_1=require(a63_0x164dd6(0x1f1)),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x164dd6(0x1d3)),git_api_service_1=require(a63_0x164dd6(0x1bc));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x164dd6(0x1e0)]{constructor(_0x16a021,_0x44604d){const _0x3640f1=a63_0x164dd6;super(_0x16a021),this[_0x3640f1(0x1bd)]=_0x44604d,this['accessTokenExpiresAt']=-0x1,this[_0x3640f1(0x1e1)]=this[_0x3640f1(0x1eb)]();}get['apiRequest'](){const _0x5d4907=a63_0x164dd6;return this[_0x5d4907(0x1e1)];}[a63_0x164dd6(0x1eb)](_0x563225){const _0x577e41=a63_0x164dd6,_0x385509=super['createRequest'](_0x563225);return _0x385509[_0x577e41(0x1cb)][_0x577e41(0x1e1)][_0x577e41(0x1d0)](async _0x55dc5e=>{const _0x467c8d=_0x577e41;return await this[_0x467c8d(0x1b8)](),_0x55dc5e[_0x467c8d(0x1b9)][_0x467c8d(0x1d5)]=_0x467c8d(0x1ca)+this[_0x467c8d(0x1ea)],_0x55dc5e;}),_0x385509;}async[a63_0x164dd6(0x1b8)](){const _0x213256=a63_0x164dd6;if(this['accessToken']&&Date['now']()<this['accessTokenExpiresAt'])return;await this[_0x213256(0x1df)]();}async['refreshToken'](){const _0x1f1599=a63_0x164dd6,{clientToken:_0x56b539}=this[_0x1f1599(0x1bd)][_0x1f1599(0x1d8)],_0x4188c9=await axios_1[_0x1f1599(0x1be)]['post'](constants_1[_0x1f1599(0x1e5)][_0x1f1599(0x1d7)](_0x1f1599(0x1dc),_0x56b539),_0x1f1599(0x1c7))[_0x1f1599(0x1db)](_0x2c4406=>_0x2c4406[_0x1f1599(0x1ef)]),{expires_in:_0x36b61,access_token:_0x5a9c48}=_0x4188c9;this[_0x1f1599(0x1bd)]['update']({'bitbucket':{...this['authSettings'][_0x1f1599(0x1d8)],'token':_0x5a9c48}}),this[_0x1f1599(0x1d6)]=Date['now']()+_0x36b61*0x3e8,this[_0x1f1599(0x1ea)]=_0x5a9c48;}[a63_0x164dd6(0x1ed)](){return{};}[a63_0x164dd6(0x1ce)](){const _0x3fd4f4=a63_0x164dd6;return this[_0x3fd4f4(0x1e1)][_0x3fd4f4(0x1c5)]('user');}async['isLoggedIn'](){const _0x22cf22=a63_0x164dd6;try{return await this[_0x22cf22(0x1ce)](),!![];}catch(_0x2c9132){return![];}}};BitbucketApiService=__decorate([typedi_1[a63_0x164dd6(0x1e8)](),__param(0x0,typedi_1[a63_0x164dd6(0x1de)]()),__metadata(a63_0x164dd6(0x1d9),[app_settings_service_1[a63_0x164dd6(0x1cf)],auth_settings_service_1[a63_0x164dd6(0x1d2)]])],BitbucketApiService),exports[a63_0x164dd6(0x1c8)]=BitbucketApiService;