const a64_0x3e66a4=a64_0x51a0;(function(_0x152b1a,_0x1947b1){const _0xdf06ce=a64_0x51a0,_0x3dd28e=_0x152b1a();while(!![]){try{const _0xfc4c36=-parseInt(_0xdf06ce(0xa0))/0x1+-parseInt(_0xdf06ce(0x9d))/0x2+-parseInt(_0xdf06ce(0xb0))/0x3*(-parseInt(_0xdf06ce(0x96))/0x4)+-parseInt(_0xdf06ce(0xa5))/0x5*(-parseInt(_0xdf06ce(0x91))/0x6)+parseInt(_0xdf06ce(0x93))/0x7*(parseInt(_0xdf06ce(0xa2))/0x8)+-parseInt(_0xdf06ce(0x9f))/0x9*(parseInt(_0xdf06ce(0xac))/0xa)+parseInt(_0xdf06ce(0xa7))/0xb;if(_0xfc4c36===_0x1947b1)break;else _0x3dd28e['push'](_0x3dd28e['shift']());}catch(_0x1da944){_0x3dd28e['push'](_0x3dd28e['shift']());}}}(a64_0x5a10,0xe3a91));const a64_0x2ab842=function(){let _0x3ed00b=!![];return function(_0x4f4634,_0x347721){const _0xc1ebe8=_0x3ed00b?function(){const _0x1e887a=a64_0x51a0;if(_0x347721){const _0x4cd837=_0x347721[_0x1e887a(0xaa)](_0x4f4634,arguments);return _0x347721=null,_0x4cd837;}}:function(){};return _0x3ed00b=![],_0xc1ebe8;};}(),a64_0x4552a4=a64_0x2ab842(this,function(){const _0x567fcd=a64_0x51a0;return a64_0x4552a4[_0x567fcd(0x7e)]()[_0x567fcd(0x85)](_0x567fcd(0xb8))[_0x567fcd(0x7e)]()[_0x567fcd(0x8b)](a64_0x4552a4)[_0x567fcd(0x85)](_0x567fcd(0xb8));});a64_0x4552a4();'use strict';var __decorate=this&&this[a64_0x3e66a4(0x9a)]||function(_0x476bbc,_0x23e1fa,_0x4246a9,_0x3059aa){const _0x437ed5=a64_0x3e66a4;var _0xa65150=arguments[_0x437ed5(0xa9)],_0x5713fa=_0xa65150<0x3?_0x23e1fa:_0x3059aa===null?_0x3059aa=Object[_0x437ed5(0xaf)](_0x23e1fa,_0x4246a9):_0x3059aa,_0x8a8452;if(typeof Reflect===_0x437ed5(0xad)&&typeof Reflect[_0x437ed5(0xb5)]===_0x437ed5(0xa3))_0x5713fa=Reflect[_0x437ed5(0xb5)](_0x476bbc,_0x23e1fa,_0x4246a9,_0x3059aa);else{for(var _0x114c1c=_0x476bbc[_0x437ed5(0xa9)]-0x1;_0x114c1c>=0x0;_0x114c1c--)if(_0x8a8452=_0x476bbc[_0x114c1c])_0x5713fa=(_0xa65150<0x3?_0x8a8452(_0x5713fa):_0xa65150>0x3?_0x8a8452(_0x23e1fa,_0x4246a9,_0x5713fa):_0x8a8452(_0x23e1fa,_0x4246a9))||_0x5713fa;}return _0xa65150>0x3&&_0x5713fa&&Object[_0x437ed5(0x8a)](_0x23e1fa,_0x4246a9,_0x5713fa),_0x5713fa;},__metadata=this&&this[a64_0x3e66a4(0x84)]||function(_0x496081,_0x4b462d){const _0x45cf1f=a64_0x3e66a4;if(typeof Reflect===_0x45cf1f(0xad)&&typeof Reflect[_0x45cf1f(0x9b)]===_0x45cf1f(0xa3))return Reflect['metadata'](_0x496081,_0x4b462d);},__param=this&&this[a64_0x3e66a4(0x8e)]||function(_0x2ae46f,_0x166742){return function(_0xcc7a79,_0x1f7969){_0x166742(_0xcc7a79,_0x1f7969,_0x2ae46f);};},__importDefault=this&&this[a64_0x3e66a4(0x95)]||function(_0x1100f5){return _0x1100f5&&_0x1100f5['__esModule']?_0x1100f5:{'default':_0x1100f5};};Object[a64_0x3e66a4(0x8a)](exports,a64_0x3e66a4(0xb7),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const constants_1=require('../../../constants'),app_settings_service_1=require(a64_0x3e66a4(0x97)),auth_settings_service_1=require(a64_0x3e66a4(0x92)),axios_1=__importDefault(require(a64_0x3e66a4(0xb4))),typedi_1=require('typedi'),git_api_service_1=require('./git-api.service');function a64_0x5a10(){const _0x189c5b=['length','apply','default','16291070wdWCPC','object','getHeaders','getOwnPropertyDescriptor','66ZhcaEQ','BITBUCKET_REFRESH_TOKEN_URL','user','AppSettingsService','axios','decorate','post','__esModule','(((.+)+)+)+$','toString','BitbucketApiService','data','replace','refreshToken','grant_type=client_credentials','__metadata','search','request','apiRequest','%clientToken%','getCurrentUser','defineProperty','constructor','update','interceptors','__param','Inject','get','114OQfLvK','../../shared/services/auth-settings.service','8324197dLOJlc','createRequest','__importDefault','41716TtgEjD','../../shared/services/app-settings.service','authSettings','now','__decorate','metadata','Service','1296828AVogYm','checkAccessToken','9wPjwCy','795376Qrrtyo','accessTokenExpiresAt','8woQRLj','function','accessToken','209735EbIynh','AuthSettingsService','19687712sTSKiT','then'];a64_0x5a10=function(){return _0x189c5b;};return a64_0x5a10();}function a64_0x51a0(_0x30d244,_0x1082ab){const _0x53490e=a64_0x5a10();return a64_0x51a0=function(_0x4552a4,_0x2ab842){_0x4552a4=_0x4552a4-0x7e;let _0x5a1012=_0x53490e[_0x4552a4];return _0x5a1012;},a64_0x51a0(_0x30d244,_0x1082ab);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x5b4a2a,_0xc562ac){const _0x20eb61=a64_0x3e66a4;super(_0x5b4a2a),this[_0x20eb61(0x98)]=_0xc562ac,this[_0x20eb61(0xa1)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8,this[_0x20eb61(0x86)]=this[_0x20eb61(0x94)]();}get[a64_0x3e66a4(0x87)](){const _0x18e106=a64_0x3e66a4;return this[_0x18e106(0x86)];}[a64_0x3e66a4(0x94)](_0x2673d3){const _0x2e8604=a64_0x3e66a4,_0x3307fb=super[_0x2e8604(0x94)](_0x2673d3);return _0x3307fb[_0x2e8604(0x8d)]['request']['use'](async _0x2dd9a0=>{const _0xda63c0=_0x2e8604;return await this[_0xda63c0(0x9e)](),_0x2dd9a0['headers']['Authorization']='Bearer\x20'+this[_0xda63c0(0xa4)],_0x2dd9a0;}),_0x3307fb;}async['checkAccessToken'](){const _0x53eccf=a64_0x3e66a4;if(this['accessToken']&&Date[_0x53eccf(0x99)]()<this[_0x53eccf(0xa1)])return;await this[_0x53eccf(0x82)]();}async['refreshToken'](){const _0x3d68f2=a64_0x3e66a4,{clientToken:_0x278c27}=this[_0x3d68f2(0x98)]['bitbucket'],_0x4d1585=await axios_1[_0x3d68f2(0xab)][_0x3d68f2(0xb6)](constants_1[_0x3d68f2(0xb1)][_0x3d68f2(0x81)](_0x3d68f2(0x88),_0x278c27),_0x3d68f2(0x83))[_0x3d68f2(0xa8)](_0x3e4019=>_0x3e4019[_0x3d68f2(0x80)]),{expires_in:_0xef9025,access_token:_0x26d0e0}=_0x4d1585;this['authSettings'][_0x3d68f2(0x8c)]({'bitbucket':{...this[_0x3d68f2(0x98)]['bitbucket'],'token':_0x26d0e0}}),this[_0x3d68f2(0xa1)]=Date['now']()+_0xef9025*0x3e8,this[_0x3d68f2(0xa4)]=_0x26d0e0;}[a64_0x3e66a4(0xae)](){return{};}[a64_0x3e66a4(0x89)](){const _0x1ab522=a64_0x3e66a4;return this['request'][_0x1ab522(0x90)](_0x1ab522(0xb2));}async['isLoggedIn'](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a64_0x3e66a4(0x9c)])(),__param(0x0,(0x0,typedi_1[a64_0x3e66a4(0x8f)])()),__metadata('design:paramtypes',[app_settings_service_1[a64_0x3e66a4(0xb3)],auth_settings_service_1[a64_0x3e66a4(0xa6)]])],BitbucketApiService),exports[a64_0x3e66a4(0x7f)]=BitbucketApiService;