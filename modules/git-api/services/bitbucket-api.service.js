const a63_0x1eb3=['101884DypnDL','object','getCurrentUser','accessTokenExpiresAt','interceptors','axios','defineProperty','5132lrwYlr','__importDefault','getHeaders','refreshToken','__metadata','replace','return\x20/\x22\x20+\x20this\x20+\x20\x22/','25583fxszIJ','__esModule','../../../constants','decorate','function','../../shared/services/auth-settings.service','isLoggedIn','305727LvmTjf','update','getOwnPropertyDescriptor','../../shared/services/app-settings.service','design:paramtypes','checkAccessToken','Authorization','authSettings','GitApiService','477147WqtOxP','now','test','get','./git-api.service','metadata','then','user','__param','createRequest','headers','AuthSettingsService','BITBUCKET_REFRESH_TOKEN_URL','request','571072KRrpHG','accessToken','data','length','Bearer\x20','constructor','%clientToken%','__decorate','29NAUeNo','97sjQpfb','252018pgHtEc'];const a63_0x267800=a63_0x3e53;(function(_0x596bc4,_0x1322e1){const _0x381f84=a63_0x3e53;while(!![]){try{const _0x1d4949=parseInt(_0x381f84(0x1a5))+-parseInt(_0x381f84(0x1af))+parseInt(_0x381f84(0x1c5))+parseInt(_0x381f84(0x1ad))*-parseInt(_0x381f84(0x1be))+-parseInt(_0x381f84(0x1ae))*-parseInt(_0x381f84(0x1b7))+-parseInt(_0x381f84(0x1b0))+parseInt(_0x381f84(0x1ce));if(_0x1d4949===_0x1322e1)break;else _0x596bc4['push'](_0x596bc4['shift']());}catch(_0x323adf){_0x596bc4['push'](_0x596bc4['shift']());}}}(a63_0x1eb3,0xb88e5));function a63_0x3e53(_0x1b60d3,_0x246414){return a63_0x3e53=function(_0x450bf8,_0x2369b9){_0x450bf8=_0x450bf8-0x19a;let _0x377427=a63_0x1eb3[_0x450bf8];return _0x377427;},a63_0x3e53(_0x1b60d3,_0x246414);}const a63_0x377427=function(){let _0x33c01c=!![];return function(_0x3f2209,_0x1f0a0e){const _0x3cbb38=_0x33c01c?function(){if(_0x1f0a0e){const _0x5bc363=_0x1f0a0e['apply'](_0x3f2209,arguments);return _0x1f0a0e=null,_0x5bc363;}}:function(){};return _0x33c01c=![],_0x3cbb38;};}(),a63_0x2369b9=a63_0x377427(this,function(){const _0x16b097=function(){const _0x56271a=a63_0x3e53,_0x4bb849=_0x16b097[_0x56271a(0x1aa)](_0x56271a(0x1bd))()[_0x56271a(0x1aa)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x4bb849[_0x56271a(0x1d0)](a63_0x2369b9);};return _0x16b097();});a63_0x2369b9();'use strict';var __decorate=this&&this[a63_0x267800(0x1ac)]||function(_0x4bda47,_0x530692,_0x3bbadd,_0x3c46b9){const _0x6c0fdd=a63_0x267800;var _0x28cc51=arguments['length'],_0x131487=_0x28cc51<0x3?_0x530692:_0x3c46b9===null?_0x3c46b9=Object[_0x6c0fdd(0x1c7)](_0x530692,_0x3bbadd):_0x3c46b9,_0x53e435;if(typeof Reflect===_0x6c0fdd(0x1b1)&&typeof Reflect[_0x6c0fdd(0x1c1)]==='function')_0x131487=Reflect[_0x6c0fdd(0x1c1)](_0x4bda47,_0x530692,_0x3bbadd,_0x3c46b9);else{for(var _0x40f28e=_0x4bda47[_0x6c0fdd(0x1a8)]-0x1;_0x40f28e>=0x0;_0x40f28e--)if(_0x53e435=_0x4bda47[_0x40f28e])_0x131487=(_0x28cc51<0x3?_0x53e435(_0x131487):_0x28cc51>0x3?_0x53e435(_0x530692,_0x3bbadd,_0x131487):_0x53e435(_0x530692,_0x3bbadd))||_0x131487;}return _0x28cc51>0x3&&_0x131487&&Object[_0x6c0fdd(0x1b6)](_0x530692,_0x3bbadd,_0x131487),_0x131487;},__metadata=this&&this[a63_0x267800(0x1bb)]||function(_0x173826,_0x5af381){const _0x40f1cf=a63_0x267800;if(typeof Reflect===_0x40f1cf(0x1b1)&&typeof Reflect[_0x40f1cf(0x19c)]===_0x40f1cf(0x1c2))return Reflect[_0x40f1cf(0x19c)](_0x173826,_0x5af381);},__param=this&&this[a63_0x267800(0x19f)]||function(_0x53a564,_0x35210f){return function(_0x5175ae,_0x5495e8){_0x35210f(_0x5175ae,_0x5495e8,_0x53a564);};},__importDefault=this&&this[a63_0x267800(0x1b8)]||function(_0x3f5b79){return _0x3f5b79&&_0x3f5b79['__esModule']?_0x3f5b79:{'default':_0x3f5b79};};Object[a63_0x267800(0x1b6)](exports,a63_0x267800(0x1bf),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const constants_1=require(a63_0x267800(0x1c0)),app_settings_service_1=require(a63_0x267800(0x1c8)),auth_settings_service_1=require(a63_0x267800(0x1c3)),axios_1=__importDefault(require(a63_0x267800(0x1b5))),typedi_1=require('typedi'),git_api_service_1=require(a63_0x267800(0x19b));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x267800(0x1cd)]{constructor(_0x213e88,_0x3216d7){const _0x12848a=a63_0x267800;super(_0x213e88),this[_0x12848a(0x1cc)]=_0x3216d7,this[_0x12848a(0x1b3)]=-0x1,this[_0x12848a(0x1a4)]=this['createRequest']();}get['apiRequest'](){const _0x14a1c5=a63_0x267800;return this[_0x14a1c5(0x1a4)];}[a63_0x267800(0x1a0)](_0x5ebd68){const _0x131f49=a63_0x267800,_0x2ee566=super[_0x131f49(0x1a0)](_0x5ebd68);return _0x2ee566[_0x131f49(0x1b4)]['request']['use'](async _0x77010a=>{const _0x8245be=_0x131f49;return await this[_0x8245be(0x1ca)](),_0x77010a[_0x8245be(0x1a1)][_0x8245be(0x1cb)]=_0x8245be(0x1a9)+this['accessToken'],_0x77010a;}),_0x2ee566;}async['checkAccessToken'](){const _0x4c6002=a63_0x267800;if(this[_0x4c6002(0x1a6)]&&Date[_0x4c6002(0x1cf)]()<this[_0x4c6002(0x1b3)])return;await this['refreshToken']();}async[a63_0x267800(0x1ba)](){const _0x2d1b6d=a63_0x267800,{clientToken:_0xd7e8b7}=this['authSettings']['bitbucket'],_0x5008da=await axios_1['default']['post'](constants_1[_0x2d1b6d(0x1a3)][_0x2d1b6d(0x1bc)](_0x2d1b6d(0x1ab),_0xd7e8b7),'grant_type=client_credentials')[_0x2d1b6d(0x19d)](_0x272681=>_0x272681[_0x2d1b6d(0x1a7)]),{expires_in:_0x1ba986,access_token:_0x1f195a}=_0x5008da;this[_0x2d1b6d(0x1cc)][_0x2d1b6d(0x1c6)]({'bitbucket':{...this['authSettings']['bitbucket'],'token':_0x1f195a}}),this['accessTokenExpiresAt']=Date[_0x2d1b6d(0x1cf)]()+_0x1ba986*0x3e8,this[_0x2d1b6d(0x1a6)]=_0x1f195a;}[a63_0x267800(0x1b9)](){return{};}[a63_0x267800(0x1b2)](){const _0x28e169=a63_0x267800;return this[_0x28e169(0x1a4)][_0x28e169(0x19a)](_0x28e169(0x19e));}async[a63_0x267800(0x1c4)](){const _0x384975=a63_0x267800;return await this[_0x384975(0x1b2)](),!![];}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1['Inject']()),__metadata(a63_0x267800(0x1c9),[app_settings_service_1['AppSettingsService'],auth_settings_service_1[a63_0x267800(0x1a2)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;