const a63_0x5616=['../../shared/services/app-settings.service','../../../constants','data','getOwnPropertyDescriptor','object','replace','decorate','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','getHeaders','bitbucket','grant_type=client_credentials','createRequest','constructor','checkAccessToken','refreshToken','default','function','__importDefault','./git-api.service','GitApiService','isLoggedIn','getCurrentUser','get','user','12959PzCgqd','now','apply','__param','defineProperty','__esModule','request','BITBUCKET_REFRESH_TOKEN_URL','Service','355618gBPSEI','59IgXyLv','accessToken','AppSettingsService','authSettings','19Lwmefc','apiRequest','%clientToken%','typedi','78402umXkRe','Authorization','metadata','headers','157855jceQZa','216500BCkWZn','21347qcKisD','accessTokenExpiresAt','return\x20/\x22\x20+\x20this\x20+\x20\x22/','interceptors','184689aTCGZw','test'];const a63_0x1764f6=a63_0x10bd;(function(_0x27a175,_0xec4521){const _0x288e46=a63_0x10bd;while(!![]){try{const _0x253d08=parseInt(_0x288e46(0x1e3))+parseInt(_0x288e46(0x1ec))+-parseInt(_0x288e46(0x1f1))+-parseInt(_0x288e46(0x1e8))*parseInt(_0x288e46(0x1f2))+-parseInt(_0x288e46(0x1f6))+-parseInt(_0x288e46(0x1f0))+parseInt(_0x288e46(0x1da))*parseInt(_0x288e46(0x1e4));if(_0x253d08===_0xec4521)break;else _0x27a175['push'](_0x27a175['shift']());}catch(_0x5a2bab){_0x27a175['push'](_0x27a175['shift']());}}}(a63_0x5616,0x391ec));const a63_0x1583be=function(){let _0x5e4d48=!![];return function(_0x8402dd,_0x91bb76){const _0x3f4383=_0x5e4d48?function(){const _0x23dfac=a63_0x10bd;if(_0x91bb76){const _0x1f031a=_0x91bb76[_0x23dfac(0x1dc)](_0x8402dd,arguments);return _0x91bb76=null,_0x1f031a;}}:function(){};return _0x5e4d48=![],_0x3f4383;};}(),a63_0x3bc559=a63_0x1583be(this,function(){const _0x170eac=function(){const _0x6112ef=a63_0x10bd,_0x473a3c=_0x170eac[_0x6112ef(0x204)](_0x6112ef(0x1f4))()[_0x6112ef(0x204)](_0x6112ef(0x1ff));return!_0x473a3c[_0x6112ef(0x1f7)](a63_0x3bc559);};return _0x170eac();});a63_0x3bc559();'use strict';var __decorate=this&&this['__decorate']||function(_0x15b674,_0x551597,_0x210c2d,_0x2b8c37){const _0x1bf6fc=a63_0x10bd;var _0x1c53c5=arguments['length'],_0x5cf230=_0x1c53c5<0x3?_0x551597:_0x2b8c37===null?_0x2b8c37=Object[_0x1bf6fc(0x1fb)](_0x551597,_0x210c2d):_0x2b8c37,_0x32c615;if(typeof Reflect===_0x1bf6fc(0x1fc)&&typeof Reflect[_0x1bf6fc(0x1fe)]===_0x1bf6fc(0x208))_0x5cf230=Reflect['decorate'](_0x15b674,_0x551597,_0x210c2d,_0x2b8c37);else{for(var _0xfde40c=_0x15b674['length']-0x1;_0xfde40c>=0x0;_0xfde40c--)if(_0x32c615=_0x15b674[_0xfde40c])_0x5cf230=(_0x1c53c5<0x3?_0x32c615(_0x5cf230):_0x1c53c5>0x3?_0x32c615(_0x551597,_0x210c2d,_0x5cf230):_0x32c615(_0x551597,_0x210c2d))||_0x5cf230;}return _0x1c53c5>0x3&&_0x5cf230&&Object['defineProperty'](_0x551597,_0x210c2d,_0x5cf230),_0x5cf230;},__metadata=this&&this['__metadata']||function(_0x4d7427,_0x24be1b){const _0x210b24=a63_0x10bd;if(typeof Reflect===_0x210b24(0x1fc)&&typeof Reflect[_0x210b24(0x1ee)]===_0x210b24(0x208))return Reflect['metadata'](_0x4d7427,_0x24be1b);},__param=this&&this[a63_0x1764f6(0x1dd)]||function(_0x3a7331,_0x3e6509){return function(_0x2e171e,_0x4138b0){_0x3e6509(_0x2e171e,_0x4138b0,_0x3a7331);};},__importDefault=this&&this[a63_0x1764f6(0x209)]||function(_0x1faf21){const _0x1a43e5=a63_0x1764f6;return _0x1faf21&&_0x1faf21[_0x1a43e5(0x1df)]?_0x1faf21:{'default':_0x1faf21};};Object[a63_0x1764f6(0x1de)](exports,a63_0x1764f6(0x1df),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const constants_1=require(a63_0x1764f6(0x1f9)),app_settings_service_1=require(a63_0x1764f6(0x1f8)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x1764f6(0x1eb)),git_api_service_1=require(a63_0x1764f6(0x20a));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x1764f6(0x20b)]{constructor(_0x1d21d5,_0x2e8627){const _0x1670f5=a63_0x1764f6;super(_0x1d21d5),this['authSettings']=_0x2e8627,this[_0x1670f5(0x1f3)]=-0x1,this[_0x1670f5(0x1e0)]=this[_0x1670f5(0x203)]();}get[a63_0x1764f6(0x1e9)](){const _0x272bff=a63_0x1764f6;return this[_0x272bff(0x1e0)];}['createRequest'](_0x386c5d){const _0x4dfd7f=a63_0x1764f6,_0x50ae9e=super[_0x4dfd7f(0x203)](_0x386c5d);return _0x50ae9e[_0x4dfd7f(0x1f5)]['request']['use'](async _0x318dfc=>{const _0x3192c3=_0x4dfd7f;return await this[_0x3192c3(0x205)](),_0x318dfc[_0x3192c3(0x1ef)][_0x3192c3(0x1ed)]='Bearer\x20'+this[_0x3192c3(0x1e5)],_0x318dfc;}),_0x50ae9e;}async[a63_0x1764f6(0x205)](){const _0x2db5a3=a63_0x1764f6;if(this[_0x2db5a3(0x1e5)]&&Date[_0x2db5a3(0x1db)]()<this[_0x2db5a3(0x1f3)])return;await this[_0x2db5a3(0x206)]();}async['refreshToken'](){const _0x504f46=a63_0x1764f6,{clientToken:_0x537e47}=this[_0x504f46(0x1e7)][_0x504f46(0x201)],_0x50dd97=await axios_1[_0x504f46(0x207)]['post'](constants_1[_0x504f46(0x1e1)][_0x504f46(0x1fd)](_0x504f46(0x1ea),_0x537e47),_0x504f46(0x202))['then'](_0x10552d=>_0x10552d[_0x504f46(0x1fa)]),{expires_in:_0x131dc7,access_token:_0x454042}=_0x50dd97;this[_0x504f46(0x1e7)]['update']({'bitbucket':{...this[_0x504f46(0x1e7)]['bitbucket'],'token':_0x454042}}),this[_0x504f46(0x1f3)]=Date['now']()+_0x131dc7*0x3e8,this[_0x504f46(0x1e5)]=_0x454042;}[a63_0x1764f6(0x200)](){return{};}[a63_0x1764f6(0x20d)](){const _0x47e036=a63_0x1764f6;return this[_0x47e036(0x1e0)][_0x47e036(0x20e)](_0x47e036(0x20f));}async[a63_0x1764f6(0x20c)](){const _0x557c9f=a63_0x1764f6;try{return await this[_0x557c9f(0x20d)](),!![];}catch(_0x1dc6f8){return![];}}};function a63_0x10bd(_0x223991,_0x5dc0aa){return a63_0x10bd=function(_0x359d58,_0x3bc559){_0x359d58=_0x359d58-0x1da;let _0x1583be=a63_0x5616[_0x359d58];return _0x1583be;},a63_0x10bd(_0x223991,_0x5dc0aa);}BitbucketApiService=__decorate([typedi_1[a63_0x1764f6(0x1e2)](),__param(0x0,typedi_1['Inject']()),__metadata('design:paramtypes',[app_settings_service_1[a63_0x1764f6(0x1e6)],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;