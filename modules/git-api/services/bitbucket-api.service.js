const a63_0x2a82=['2YxYEph','87921kFZYmw','Bearer\x20','constructor','decorate','isLoggedIn','./git-api.service','3leLFIg','request','AuthSettingsService','typedi','699631StJKNw','replace','%clientToken%','__metadata','../../shared/services/auth-settings.service','return\x20/\x22\x20+\x20this\x20+\x20\x22/','BITBUCKET_REFRESH_TOKEN_URL','createRequest','Authorization','310759MpJoii','headers','object','../../shared/services/app-settings.service','accessTokenExpiresAt','now','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','bitbucket','then','__param','defineProperty','getOwnPropertyDescriptor','length','24646wCHaaI','checkAccessToken','62433HPoAXH','function','interceptors','1VSlfwU','design:paramtypes','Inject','data','__importDefault','default','user','metadata','__decorate','Service','165926OoJXEw','apiRequest','__esModule','use','authSettings','update','refreshToken','../../../constants','AppSettingsService','getCurrentUser','21314otKuzf','post'];const a63_0x38e7c2=a63_0xdb1e;(function(_0x3f4e88,_0x457cae){const _0xdc63b0=a63_0xdb1e;while(!![]){try{const _0x5ee979=-parseInt(_0xdc63b0(0xfe))+parseInt(_0xdc63b0(0xf1))+parseInt(_0xdc63b0(0xfd))*-parseInt(_0xdc63b0(0xfb))+-parseInt(_0xdc63b0(0x11e))*-parseInt(_0xdc63b0(0x104))+-parseInt(_0xdc63b0(0x111))+-parseInt(_0xdc63b0(0x120))+parseInt(_0xdc63b0(0x123))*parseInt(_0xdc63b0(0x108));if(_0x5ee979===_0x457cae)break;else _0x3f4e88['push'](_0x3f4e88['shift']());}catch(_0x12f457){_0x3f4e88['push'](_0x3f4e88['shift']());}}}(a63_0x2a82,0x6a62a));const a63_0x423b88=function(){let _0x4ef9c1=!![];return function(_0x23e866,_0x4b7c84){const _0x4c7977=_0x4ef9c1?function(){if(_0x4b7c84){const _0x2dde30=_0x4b7c84['apply'](_0x23e866,arguments);return _0x4b7c84=null,_0x2dde30;}}:function(){};return _0x4ef9c1=![],_0x4c7977;};}(),a63_0x26164f=a63_0x423b88(this,function(){const _0x8a858b=function(){const _0x51404a=a63_0xdb1e,_0x5a51df=_0x8a858b[_0x51404a(0x100)](_0x51404a(0x10d))()[_0x51404a(0x100)](_0x51404a(0x117));return!_0x5a51df['test'](a63_0x26164f);};return _0x8a858b();});a63_0x26164f();'use strict';var __decorate=this&&this[a63_0x38e7c2(0xef)]||function(_0x1b1354,_0x28b5b8,_0x1b6e35,_0xd01ba1){const _0x4861c5=a63_0x38e7c2;var _0x391b98=arguments[_0x4861c5(0x11d)],_0x46d036=_0x391b98<0x3?_0x28b5b8:_0xd01ba1===null?_0xd01ba1=Object[_0x4861c5(0x11c)](_0x28b5b8,_0x1b6e35):_0xd01ba1,_0x19fafc;if(typeof Reflect===_0x4861c5(0x113)&&typeof Reflect['decorate']===_0x4861c5(0x121))_0x46d036=Reflect[_0x4861c5(0x101)](_0x1b1354,_0x28b5b8,_0x1b6e35,_0xd01ba1);else{for(var _0x23a88b=_0x1b1354[_0x4861c5(0x11d)]-0x1;_0x23a88b>=0x0;_0x23a88b--)if(_0x19fafc=_0x1b1354[_0x23a88b])_0x46d036=(_0x391b98<0x3?_0x19fafc(_0x46d036):_0x391b98>0x3?_0x19fafc(_0x28b5b8,_0x1b6e35,_0x46d036):_0x19fafc(_0x28b5b8,_0x1b6e35))||_0x46d036;}return _0x391b98>0x3&&_0x46d036&&Object[_0x4861c5(0x11b)](_0x28b5b8,_0x1b6e35,_0x46d036),_0x46d036;},__metadata=this&&this[a63_0x38e7c2(0x10b)]||function(_0x43f04d,_0x5ed936){const _0x4f0a40=a63_0x38e7c2;if(typeof Reflect===_0x4f0a40(0x113)&&typeof Reflect[_0x4f0a40(0xee)]===_0x4f0a40(0x121))return Reflect[_0x4f0a40(0xee)](_0x43f04d,_0x5ed936);},__param=this&&this[a63_0x38e7c2(0x11a)]||function(_0xbd8915,_0x4412fb){return function(_0x64920e,_0x5a650b){_0x4412fb(_0x64920e,_0x5a650b,_0xbd8915);};},__importDefault=this&&this[a63_0x38e7c2(0xeb)]||function(_0x19cf3b){const _0xa2a361=a63_0x38e7c2;return _0x19cf3b&&_0x19cf3b[_0xa2a361(0xf3)]?_0x19cf3b:{'default':_0x19cf3b};};Object[a63_0x38e7c2(0x11b)](exports,a63_0x38e7c2(0xf3),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const constants_1=require(a63_0x38e7c2(0xf8)),app_settings_service_1=require(a63_0x38e7c2(0x114)),auth_settings_service_1=require(a63_0x38e7c2(0x10c)),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x38e7c2(0x107)),git_api_service_1=require(a63_0x38e7c2(0x103));function a63_0xdb1e(_0x3883fd,_0x56083e){return a63_0xdb1e=function(_0x6636a,_0x26164f){_0x6636a=_0x6636a-0xea;let _0x423b88=a63_0x2a82[_0x6636a];return _0x423b88;},a63_0xdb1e(_0x3883fd,_0x56083e);}let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x2971bc,_0x3ea2a7){const _0x29d824=a63_0x38e7c2;super(_0x2971bc),this[_0x29d824(0xf5)]=_0x3ea2a7,this['accessTokenExpiresAt']=-0x1,this['request']=this[_0x29d824(0x10f)]();}get[a63_0x38e7c2(0xf2)](){const _0x5410b1=a63_0x38e7c2;return this[_0x5410b1(0x105)];}['createRequest'](_0x3f1182){const _0xe4c8da=a63_0x38e7c2,_0x13e0df=super[_0xe4c8da(0x10f)](_0x3f1182);return _0x13e0df[_0xe4c8da(0x122)]['request'][_0xe4c8da(0xf4)](async _0x163e88=>{const _0x20d91d=_0xe4c8da;return await this['checkAccessToken'](),_0x163e88[_0x20d91d(0x112)][_0x20d91d(0x110)]=_0x20d91d(0xff)+this['accessToken'],_0x163e88;}),_0x13e0df;}async[a63_0x38e7c2(0x11f)](){const _0xde2520=a63_0x38e7c2;if(this['accessToken']&&Date[_0xde2520(0x116)]()<this['accessTokenExpiresAt'])return;await this[_0xde2520(0xf7)]();}async[a63_0x38e7c2(0xf7)](){const _0x36a52a=a63_0x38e7c2,{clientToken:_0x81a6d0}=this[_0x36a52a(0xf5)][_0x36a52a(0x118)],_0x530220=await axios_1[_0x36a52a(0xec)][_0x36a52a(0xfc)](constants_1[_0x36a52a(0x10e)][_0x36a52a(0x109)](_0x36a52a(0x10a),_0x81a6d0),'grant_type=client_credentials')[_0x36a52a(0x119)](_0x4bafcc=>_0x4bafcc[_0x36a52a(0xea)]),{expires_in:_0x577e1e,access_token:_0x46f7a9}=_0x530220;this[_0x36a52a(0xf5)][_0x36a52a(0xf6)]({'bitbucket':{...this['authSettings'][_0x36a52a(0x118)],'token':_0x46f7a9}}),this[_0x36a52a(0x115)]=Date['now']()+_0x577e1e*0x3e8,this['accessToken']=_0x46f7a9;}['getHeaders'](){return{};}[a63_0x38e7c2(0xfa)](){const _0x3ef87e=a63_0x38e7c2;return this[_0x3ef87e(0x105)]['get'](_0x3ef87e(0xed));}async[a63_0x38e7c2(0x102)](){const _0x796ebd=a63_0x38e7c2;return await this[_0x796ebd(0xfa)](),!![];}};BitbucketApiService=__decorate([typedi_1[a63_0x38e7c2(0xf0)](),__param(0x0,typedi_1[a63_0x38e7c2(0x125)]()),__metadata(a63_0x38e7c2(0x124),[app_settings_service_1[a63_0x38e7c2(0xf9)],auth_settings_service_1[a63_0x38e7c2(0x106)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;