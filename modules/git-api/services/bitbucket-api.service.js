const a63_0x8851=['198401EloqRA','defineProperty','286173XtdFoL','design:paramtypes','accessTokenExpiresAt','headers','constructor','Inject','../../../constants','apiRequest','GitApiService','isLoggedIn','16679TjwcvE','87wDrtQU','checkAccessToken','7041YvanbQ','__importDefault','update','__param','450192smWWCm','request','AuthSettingsService','accessToken','BitbucketApiService','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Bearer\x20','getOwnPropertyDescriptor','typedi','now','BITBUCKET_REFRESH_TOKEN_URL','decorate','refreshToken','../../shared/services/app-settings.service','AppSettingsService','object','Service','apply','length','authSettings','bitbucket','metadata','function','__metadata','5KFioUz','2558nKtnAS','259050OmPdal','Authorization','post','createRequest','getHeaders','return\x20/\x22\x20+\x20this\x20+\x20\x22/','__esModule','%clientToken%','then','interceptors','__decorate','replace','getCurrentUser','data','test'];const a63_0x5cf1a3=a63_0x1e3a;(function(_0x1f4119,_0x47f6a5){const _0x21d704=a63_0x1e3a;while(!![]){try{const _0x3970c8=-parseInt(_0x21d704(0x216))*parseInt(_0x21d704(0x1f7))+parseInt(_0x21d704(0x226))+parseInt(_0x21d704(0x1f9))+parseInt(_0x21d704(0x228))+parseInt(_0x21d704(0x217))+-parseInt(_0x21d704(0x215))*-parseInt(_0x21d704(0x1f6))+-parseInt(_0x21d704(0x1fd));if(_0x3970c8===_0x47f6a5)break;else _0x1f4119['push'](_0x1f4119['shift']());}catch(_0xbbbdad){_0x1f4119['push'](_0x1f4119['shift']());}}}(a63_0x8851,0x2762a));const a63_0x5598ca=function(){let _0x35e28b=!![];return function(_0x2b553a,_0x5ecb5b){const _0x211188=_0x35e28b?function(){const _0x28a699=a63_0x1e3a;if(_0x5ecb5b){const _0x34384b=_0x5ecb5b[_0x28a699(0x20e)](_0x2b553a,arguments);return _0x5ecb5b=null,_0x34384b;}}:function(){};return _0x35e28b=![],_0x211188;};}(),a63_0x339754=a63_0x5598ca(this,function(){const _0x5265ce=function(){const _0x30a69c=a63_0x1e3a,_0x13880d=_0x5265ce[_0x30a69c(0x22c)](_0x30a69c(0x21c))()[_0x30a69c(0x22c)](_0x30a69c(0x202));return!_0x13880d[_0x30a69c(0x225)](a63_0x339754);};return _0x5265ce();});a63_0x339754();'use strict';var __decorate=this&&this[a63_0x5cf1a3(0x221)]||function(_0x5e12b0,_0x51523a,_0x5ba038,_0x1c26c3){const _0x39cd57=a63_0x5cf1a3;var _0x1da521=arguments[_0x39cd57(0x20f)],_0x53949b=_0x1da521<0x3?_0x51523a:_0x1c26c3===null?_0x1c26c3=Object[_0x39cd57(0x204)](_0x51523a,_0x5ba038):_0x1c26c3,_0x546658;if(typeof Reflect===_0x39cd57(0x20c)&&typeof Reflect[_0x39cd57(0x208)]===_0x39cd57(0x213))_0x53949b=Reflect['decorate'](_0x5e12b0,_0x51523a,_0x5ba038,_0x1c26c3);else{for(var _0x46ea57=_0x5e12b0[_0x39cd57(0x20f)]-0x1;_0x46ea57>=0x0;_0x46ea57--)if(_0x546658=_0x5e12b0[_0x46ea57])_0x53949b=(_0x1da521<0x3?_0x546658(_0x53949b):_0x1da521>0x3?_0x546658(_0x51523a,_0x5ba038,_0x53949b):_0x546658(_0x51523a,_0x5ba038))||_0x53949b;}return _0x1da521>0x3&&_0x53949b&&Object[_0x39cd57(0x227)](_0x51523a,_0x5ba038,_0x53949b),_0x53949b;},__metadata=this&&this[a63_0x5cf1a3(0x214)]||function(_0x28a17e,_0x3a5a95){const _0x4a8cbe=a63_0x5cf1a3;if(typeof Reflect===_0x4a8cbe(0x20c)&&typeof Reflect[_0x4a8cbe(0x212)]===_0x4a8cbe(0x213))return Reflect[_0x4a8cbe(0x212)](_0x28a17e,_0x3a5a95);},__param=this&&this[a63_0x5cf1a3(0x1fc)]||function(_0x449f84,_0x4c9eae){return function(_0xba8fe8,_0x3752d2){_0x4c9eae(_0xba8fe8,_0x3752d2,_0x449f84);};},__importDefault=this&&this[a63_0x5cf1a3(0x1fa)]||function(_0x2f11ff){const _0x149adf=a63_0x5cf1a3;return _0x2f11ff&&_0x2f11ff[_0x149adf(0x21d)]?_0x2f11ff:{'default':_0x2f11ff};};function a63_0x1e3a(_0x83745b,_0x247aa1){return a63_0x1e3a=function(_0x52f750,_0x339754){_0x52f750=_0x52f750-0x1f2;let _0x5598ca=a63_0x8851[_0x52f750];return _0x5598ca;},a63_0x1e3a(_0x83745b,_0x247aa1);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a63_0x5cf1a3(0x201)]=void 0x0;const constants_1=require(a63_0x5cf1a3(0x1f2)),app_settings_service_1=require(a63_0x5cf1a3(0x20a)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x5cf1a3(0x205)),git_api_service_1=require('./git-api.service');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x5cf1a3(0x1f4)]{constructor(_0x3aa133,_0x296c9d){const _0x567e82=a63_0x5cf1a3;super(_0x3aa133),this[_0x567e82(0x210)]=_0x296c9d,this[_0x567e82(0x22a)]=-0x1,this[_0x567e82(0x1fe)]=this[_0x567e82(0x21a)]();}get[a63_0x5cf1a3(0x1f3)](){const _0x42e5e1=a63_0x5cf1a3;return this[_0x42e5e1(0x1fe)];}['createRequest'](_0x4fc579){const _0x368db6=a63_0x5cf1a3,_0x4b2e4e=super[_0x368db6(0x21a)](_0x4fc579);return _0x4b2e4e[_0x368db6(0x220)][_0x368db6(0x1fe)]['use'](async _0x1ee1b8=>{const _0x12416d=_0x368db6;return await this[_0x12416d(0x1f8)](),_0x1ee1b8[_0x12416d(0x22b)][_0x12416d(0x218)]=_0x12416d(0x203)+this[_0x12416d(0x200)],_0x1ee1b8;}),_0x4b2e4e;}async['checkAccessToken'](){const _0x140c3e=a63_0x5cf1a3;if(this['accessToken']&&Date['now']()<this[_0x140c3e(0x22a)])return;await this[_0x140c3e(0x209)]();}async['refreshToken'](){const _0x5760bd=a63_0x5cf1a3,{clientToken:_0x5228e9}=this[_0x5760bd(0x210)][_0x5760bd(0x211)],_0x49c714=await axios_1['default'][_0x5760bd(0x219)](constants_1[_0x5760bd(0x207)][_0x5760bd(0x222)](_0x5760bd(0x21e),_0x5228e9),'grant_type=client_credentials')[_0x5760bd(0x21f)](_0x1ecbe6=>_0x1ecbe6[_0x5760bd(0x224)]),{expires_in:_0x5560c1,access_token:_0x4179a7}=_0x49c714;this[_0x5760bd(0x210)][_0x5760bd(0x1fb)]({'bitbucket':{...this['authSettings'][_0x5760bd(0x211)],'token':_0x4179a7}}),this[_0x5760bd(0x22a)]=Date[_0x5760bd(0x206)]()+_0x5560c1*0x3e8,this['accessToken']=_0x4179a7;}[a63_0x5cf1a3(0x21b)](){return{};}[a63_0x5cf1a3(0x223)](){const _0x5d695f=a63_0x5cf1a3;return this[_0x5d695f(0x1fe)]['get']('user');}async[a63_0x5cf1a3(0x1f5)](){const _0x33361e=a63_0x5cf1a3;return await this[_0x33361e(0x223)](),!![];}};BitbucketApiService=__decorate([typedi_1[a63_0x5cf1a3(0x20d)](),__param(0x0,typedi_1[a63_0x5cf1a3(0x22d)]()),__metadata(a63_0x5cf1a3(0x229),[app_settings_service_1[a63_0x5cf1a3(0x20b)],auth_settings_service_1[a63_0x5cf1a3(0x1ff)]])],BitbucketApiService),exports[a63_0x5cf1a3(0x201)]=BitbucketApiService;