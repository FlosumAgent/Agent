const a63_0x47d5=['headers','default','411317uXzsqd','replace','AppSettingsService','length','2102741YmtzMX','../../../constants','checkAccessToken','authSettings','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','accessTokenExpiresAt','use','post','__metadata','getCurrentUser','1JZahvp','return\x20/\x22\x20+\x20this\x20+\x20\x22/','function','interceptors','../../shared/services/app-settings.service','BitbucketApiService','defineProperty','__importDefault','isLoggedIn','refreshToken','getHeaders','Authorization','constructor','test','77318ENmvsd','createRequest','bitbucket','193035FsNEDx','typedi','apply','__param','AuthSettingsService','Service','decorate','axios','request','accessToken','get','671491XrUbBG','21517oFyipe','design:paramtypes','12103KejXjo','46ylXUAk','__esModule','object','metadata','now','user','__decorate','%clientToken%','apiRequest'];const a63_0x50a23d=a63_0x1027;(function(_0x274332,_0xdb5a31){const _0x5e9aeb=a63_0x1027;while(!![]){try{const _0x3ace91=parseInt(_0x5e9aeb(0x123))*-parseInt(_0x5e9aeb(0x131))+-parseInt(_0x5e9aeb(0x151))*parseInt(_0x5e9aeb(0x150))+parseInt(_0x5e9aeb(0x14e))+-parseInt(_0x5e9aeb(0x142))+parseInt(_0x5e9aeb(0x13f))+-parseInt(_0x5e9aeb(0x14d))+parseInt(_0x5e9aeb(0x127));if(_0x3ace91===_0xdb5a31)break;else _0x274332['push'](_0x274332['shift']());}catch(_0x493cf8){_0x274332['push'](_0x274332['shift']());}}}(a63_0x47d5,0x5a163));const a63_0x81f7c6=function(){let _0x5431ec=!![];return function(_0xebfb45,_0x209b85){const _0x896a82=_0x5431ec?function(){const _0x45af5e=a63_0x1027;if(_0x209b85){const _0xa88f73=_0x209b85[_0x45af5e(0x144)](_0xebfb45,arguments);return _0x209b85=null,_0xa88f73;}}:function(){};return _0x5431ec=![],_0x896a82;};}(),a63_0x390fee=a63_0x81f7c6(this,function(){const _0x2a52ca=function(){const _0x3ea599=a63_0x1027,_0x45ed38=_0x2a52ca[_0x3ea599(0x13d)](_0x3ea599(0x132))()['constructor'](_0x3ea599(0x12b));return!_0x45ed38[_0x3ea599(0x13e)](a63_0x390fee);};return _0x2a52ca();});a63_0x390fee();'use strict';function a63_0x1027(_0x285c37,_0x157de3){return a63_0x1027=function(_0x50f4d0,_0x390fee){_0x50f4d0=_0x50f4d0-0x11a;let _0x81f7c6=a63_0x47d5[_0x50f4d0];return _0x81f7c6;},a63_0x1027(_0x285c37,_0x157de3);}var __decorate=this&&this[a63_0x50a23d(0x11e)]||function(_0x2956b1,_0x134da5,_0x586fa1,_0x55cb58){const _0x619ddd=a63_0x50a23d;var _0x495a8b=arguments[_0x619ddd(0x126)],_0xe23b8c=_0x495a8b<0x3?_0x134da5:_0x55cb58===null?_0x55cb58=Object['getOwnPropertyDescriptor'](_0x134da5,_0x586fa1):_0x55cb58,_0x1879e8;if(typeof Reflect===_0x619ddd(0x11a)&&typeof Reflect[_0x619ddd(0x148)]==='function')_0xe23b8c=Reflect[_0x619ddd(0x148)](_0x2956b1,_0x134da5,_0x586fa1,_0x55cb58);else{for(var _0x4cbf52=_0x2956b1['length']-0x1;_0x4cbf52>=0x0;_0x4cbf52--)if(_0x1879e8=_0x2956b1[_0x4cbf52])_0xe23b8c=(_0x495a8b<0x3?_0x1879e8(_0xe23b8c):_0x495a8b>0x3?_0x1879e8(_0x134da5,_0x586fa1,_0xe23b8c):_0x1879e8(_0x134da5,_0x586fa1))||_0xe23b8c;}return _0x495a8b>0x3&&_0xe23b8c&&Object['defineProperty'](_0x134da5,_0x586fa1,_0xe23b8c),_0xe23b8c;},__metadata=this&&this[a63_0x50a23d(0x12f)]||function(_0x1dc4cb,_0x159524){const _0x1d75c7=a63_0x50a23d;if(typeof Reflect===_0x1d75c7(0x11a)&&typeof Reflect['metadata']===_0x1d75c7(0x133))return Reflect[_0x1d75c7(0x11b)](_0x1dc4cb,_0x159524);},__param=this&&this[a63_0x50a23d(0x145)]||function(_0x10666b,_0x26f802){return function(_0x56b265,_0x27402a){_0x26f802(_0x56b265,_0x27402a,_0x10666b);};},__importDefault=this&&this[a63_0x50a23d(0x138)]||function(_0x4a6b80){return _0x4a6b80&&_0x4a6b80['__esModule']?_0x4a6b80:{'default':_0x4a6b80};};Object[a63_0x50a23d(0x137)](exports,a63_0x50a23d(0x152),{'value':!![]}),exports[a63_0x50a23d(0x136)]=void 0x0;const constants_1=require(a63_0x50a23d(0x128)),app_settings_service_1=require(a63_0x50a23d(0x135)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require(a63_0x50a23d(0x149))),typedi_1=require(a63_0x50a23d(0x143)),git_api_service_1=require('./git-api.service');let BitbucketApiService=class BitbucketApiService extends git_api_service_1['GitApiService']{constructor(_0x2717f5,_0x5a2a6b){const _0x530b04=a63_0x50a23d;super(_0x2717f5),this[_0x530b04(0x12a)]=_0x5a2a6b,this[_0x530b04(0x12c)]=-0x1,this[_0x530b04(0x14a)]=this['createRequest']();}get[a63_0x50a23d(0x120)](){return this['request'];}[a63_0x50a23d(0x140)](_0x3499e8){const _0x225f45=a63_0x50a23d,_0x5572c5=super[_0x225f45(0x140)](_0x3499e8);return _0x5572c5[_0x225f45(0x134)]['request'][_0x225f45(0x12d)](async _0x5d8797=>{const _0x146d2b=_0x225f45;return await this[_0x146d2b(0x129)](),_0x5d8797[_0x146d2b(0x121)][_0x146d2b(0x13c)]='Bearer\x20'+this['accessToken'],_0x5d8797;}),_0x5572c5;}async[a63_0x50a23d(0x129)](){const _0x34349d=a63_0x50a23d;if(this[_0x34349d(0x14b)]&&Date['now']()<this[_0x34349d(0x12c)])return;await this[_0x34349d(0x13a)]();}async[a63_0x50a23d(0x13a)](){const _0x1e9e85=a63_0x50a23d,{clientToken:_0xf061ae}=this[_0x1e9e85(0x12a)]['bitbucket'],_0x4bc6a6=await axios_1[_0x1e9e85(0x122)][_0x1e9e85(0x12e)](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x1e9e85(0x124)](_0x1e9e85(0x11f),_0xf061ae),'grant_type=client_credentials')['then'](_0x2dc439=>_0x2dc439['data']),{expires_in:_0x21397f,access_token:_0x2b425e}=_0x4bc6a6;this[_0x1e9e85(0x12a)]['update']({'bitbucket':{...this['authSettings'][_0x1e9e85(0x141)],'token':_0x2b425e}}),this[_0x1e9e85(0x12c)]=Date[_0x1e9e85(0x11c)]()+_0x21397f*0x3e8,this[_0x1e9e85(0x14b)]=_0x2b425e;}[a63_0x50a23d(0x13b)](){return{};}[a63_0x50a23d(0x130)](){const _0x39386c=a63_0x50a23d;return this[_0x39386c(0x14a)][_0x39386c(0x14c)](_0x39386c(0x11d));}async[a63_0x50a23d(0x139)](){const _0x586986=a63_0x50a23d;return await this[_0x586986(0x130)](),!![];}};BitbucketApiService=__decorate([typedi_1[a63_0x50a23d(0x147)](),__param(0x0,typedi_1['Inject']()),__metadata(a63_0x50a23d(0x14f),[app_settings_service_1[a63_0x50a23d(0x125)],auth_settings_service_1[a63_0x50a23d(0x146)]])],BitbucketApiService),exports[a63_0x50a23d(0x136)]=BitbucketApiService;