const a63_0x351cf3=a63_0x5d8f;(function(_0x5a7368,_0x43e784){const _0x4cb70b=a63_0x5d8f,_0x2a68cb=_0x5a7368();while(!![]){try{const _0x51bb8b=-parseInt(_0x4cb70b(0x1a6))/0x1*(parseInt(_0x4cb70b(0x199))/0x2)+parseInt(_0x4cb70b(0x18e))/0x3*(parseInt(_0x4cb70b(0x1a4))/0x4)+parseInt(_0x4cb70b(0x1c5))/0x5+-parseInt(_0x4cb70b(0x198))/0x6*(parseInt(_0x4cb70b(0x195))/0x7)+-parseInt(_0x4cb70b(0x1ad))/0x8+parseInt(_0x4cb70b(0x1b0))/0x9*(-parseInt(_0x4cb70b(0x1ae))/0xa)+-parseInt(_0x4cb70b(0x19d))/0xb*(-parseInt(_0x4cb70b(0x1a0))/0xc);if(_0x51bb8b===_0x43e784)break;else _0x2a68cb['push'](_0x2a68cb['shift']());}catch(_0x13c235){_0x2a68cb['push'](_0x2a68cb['shift']());}}}(a63_0x1dd7,0xa9836));const a63_0xfa42bc=function(){let _0x443a02=!![];return function(_0x5b8b3a,_0x49b736){const _0x6768ae=_0x443a02?function(){if(_0x49b736){const _0x501e78=_0x49b736['apply'](_0x5b8b3a,arguments);return _0x49b736=null,_0x501e78;}}:function(){};return _0x443a02=![],_0x6768ae;};}(),a63_0x5a7d81=a63_0xfa42bc(this,function(){const _0x55bc68=a63_0x5d8f;return a63_0x5a7d81[_0x55bc68(0x1a3)]()[_0x55bc68(0x194)](_0x55bc68(0x1c3))['toString']()[_0x55bc68(0x1b9)](a63_0x5a7d81)[_0x55bc68(0x194)](_0x55bc68(0x1c3));});a63_0x5a7d81();'use strict';var __decorate=this&&this[a63_0x351cf3(0x1a1)]||function(_0x57a6f6,_0x41468e,_0x7bf5e4,_0x2c2836){const _0x5a6c31=a63_0x351cf3;var _0x2008db=arguments['length'],_0x5b5abb=_0x2008db<0x3?_0x41468e:_0x2c2836===null?_0x2c2836=Object[_0x5a6c31(0x1b4)](_0x41468e,_0x7bf5e4):_0x2c2836,_0x56d4af;if(typeof Reflect===_0x5a6c31(0x1a8)&&typeof Reflect['decorate']===_0x5a6c31(0x18f))_0x5b5abb=Reflect[_0x5a6c31(0x1af)](_0x57a6f6,_0x41468e,_0x7bf5e4,_0x2c2836);else{for(var _0xf01087=_0x57a6f6[_0x5a6c31(0x1ba)]-0x1;_0xf01087>=0x0;_0xf01087--)if(_0x56d4af=_0x57a6f6[_0xf01087])_0x5b5abb=(_0x2008db<0x3?_0x56d4af(_0x5b5abb):_0x2008db>0x3?_0x56d4af(_0x41468e,_0x7bf5e4,_0x5b5abb):_0x56d4af(_0x41468e,_0x7bf5e4))||_0x5b5abb;}return _0x2008db>0x3&&_0x5b5abb&&Object['defineProperty'](_0x41468e,_0x7bf5e4,_0x5b5abb),_0x5b5abb;},__metadata=this&&this['__metadata']||function(_0x3ac75e,_0x47f2a9){const _0x5963f4=a63_0x351cf3;if(typeof Reflect==='object'&&typeof Reflect[_0x5963f4(0x1c2)]===_0x5963f4(0x18f))return Reflect[_0x5963f4(0x1c2)](_0x3ac75e,_0x47f2a9);},__param=this&&this[a63_0x351cf3(0x1b7)]||function(_0x31c134,_0x31d5c1){return function(_0x24fe23,_0x445ae2){_0x31d5c1(_0x24fe23,_0x445ae2,_0x31c134);};},__importDefault=this&&this['__importDefault']||function(_0x4d0571){const _0x41b3a4=a63_0x351cf3;return _0x4d0571&&_0x4d0571[_0x41b3a4(0x19e)]?_0x4d0571:{'default':_0x4d0571};};Object[a63_0x351cf3(0x1ac)](exports,'__esModule',{'value':!![]}),exports[a63_0x351cf3(0x1c6)]=void 0x0;function a63_0x1dd7(){const _0x5b37de=['length','Inject','post','replace','isLoggedIn','default','createRequest','interceptors','metadata','(((.+)+)+)+$','typedi','5459630apyZQX','BitbucketApiService','design:paramtypes','6PaigBJ','function','user','accessToken','bitbucket','authSettings','search','7YALnOo','then','getCurrentUser','5307186BQyUBy','1203582EXVyve','grant_type=client_credentials','apiRequest','../../shared/services/app-settings.service','14795OsMotI','__esModule','data','19188tZYKhK','__decorate','Bearer\x20','toString','2251428jEMVkx','GitApiService','2QocbMm','checkAccessToken','object','request','headers','Authorization','defineProperty','8424256YDopXq','2664120Zikqsv','decorate','18OtcHMu','now','update','accessTokenExpiresAt','getOwnPropertyDescriptor','getHeaders','../../shared/services/auth-settings.service','__param','refreshToken','constructor'];a63_0x1dd7=function(){return _0x5b37de;};return a63_0x1dd7();}function a63_0x5d8f(_0x5a60cf,_0x36f8c3){const _0x564a82=a63_0x1dd7();return a63_0x5d8f=function(_0x5a7d81,_0xfa42bc){_0x5a7d81=_0x5a7d81-0x18d;let _0x1dd7a2=_0x564a82[_0x5a7d81];return _0x1dd7a2;},a63_0x5d8f(_0x5a60cf,_0x36f8c3);}const constants_1=require('../../../constants'),app_settings_service_1=require(a63_0x351cf3(0x19c)),auth_settings_service_1=require(a63_0x351cf3(0x1b6)),axios_1=__importDefault(require('axios')),typedi_1=require(a63_0x351cf3(0x1c4)),git_api_service_1=require('./git-api.service');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a63_0x351cf3(0x1a5)]{constructor(_0x4aad09,_0x3d6634){const _0x47891b=a63_0x351cf3;super(_0x4aad09),this[_0x47891b(0x193)]=_0x3d6634,this['accessTokenExpiresAt']=-0x1,this[_0x47891b(0x1a9)]=this[_0x47891b(0x1c0)]();}get[a63_0x351cf3(0x19b)](){const _0xb0b1cf=a63_0x351cf3;return this[_0xb0b1cf(0x1a9)];}[a63_0x351cf3(0x1c0)](_0x5b4b91){const _0x295ce5=a63_0x351cf3,_0x36c3ea=super[_0x295ce5(0x1c0)](_0x5b4b91);return _0x36c3ea[_0x295ce5(0x1c1)]['request']['use'](async _0x5f40e0=>{const _0x169a82=_0x295ce5;return await this['checkAccessToken'](),_0x5f40e0[_0x169a82(0x1aa)][_0x169a82(0x1ab)]=_0x169a82(0x1a2)+this[_0x169a82(0x191)],_0x5f40e0;}),_0x36c3ea;}async[a63_0x351cf3(0x1a7)](){const _0x203801=a63_0x351cf3;if(this[_0x203801(0x191)]&&Date[_0x203801(0x1b1)]()<this[_0x203801(0x1b3)])return;await this[_0x203801(0x1b8)]();}async['refreshToken'](){const _0x51337c=a63_0x351cf3,{clientToken:_0x5a6f15}=this[_0x51337c(0x193)][_0x51337c(0x192)],_0x3a0ca5=await axios_1[_0x51337c(0x1bf)][_0x51337c(0x1bc)](constants_1['BITBUCKET_REFRESH_TOKEN_URL'][_0x51337c(0x1bd)]('%clientToken%',_0x5a6f15),_0x51337c(0x19a))[_0x51337c(0x196)](_0x34a939=>_0x34a939[_0x51337c(0x19f)]),{expires_in:_0xc9ec95,access_token:_0x9ab58f}=_0x3a0ca5;this['authSettings'][_0x51337c(0x1b2)]({'bitbucket':{...this[_0x51337c(0x193)]['bitbucket'],'token':_0x9ab58f}}),this[_0x51337c(0x1b3)]=Date[_0x51337c(0x1b1)]()+_0xc9ec95*0x3e8,this[_0x51337c(0x191)]=_0x9ab58f;}[a63_0x351cf3(0x1b5)](){return{};}['getCurrentUser'](){const _0x356c25=a63_0x351cf3;return this[_0x356c25(0x1a9)]['get'](_0x356c25(0x190));}async[a63_0x351cf3(0x1be)](){const _0x179fd3=a63_0x351cf3;return await this[_0x179fd3(0x197)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a63_0x351cf3(0x1bb)])()),__metadata(a63_0x351cf3(0x18d),[app_settings_service_1['AppSettingsService'],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports[a63_0x351cf3(0x1c6)]=BitbucketApiService;