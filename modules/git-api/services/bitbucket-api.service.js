const a70_0x1e9e=['1lOqSeS','then','%clientToken%','getCurrentUser','__metadata','metadata','apiRequest','Inject','__decorate','data','bitbucket','79988cYZaGr','getOwnPropertyDescriptor','decorate','function','test','3581728AhrIyV','./git-api.service','isLoggedIn','3439FpcbDm','845454hEexZD','interceptors','update','createRequest','refreshToken','BITBUCKET_REFRESH_TOKEN_URL','defineProperty','request','71752fLfmsh','use','object','../../shared/services/app-settings.service','accessTokenExpiresAt','length','211075OKclcl','typedi','GitApiService','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getHeaders','checkAccessToken','AppSettingsService','accessToken','constructor','get','1tJOQvi','__esModule','../../../constants','authSettings','replace','9gcZksp','design:paramtypes','grant_type=client_credentials','BitbucketApiService','AuthSettingsService','axios','post','286576jgsULm','202AarXGD','__param','user','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','now','Bearer\x20'];const a70_0x147912=a70_0x36e9;(function(_0x46c3b9,_0x4a3dec){const _0x432a21=a70_0x36e9;while(!![]){try{const _0x265dc5=-parseInt(_0x432a21(0x1e7))+-parseInt(_0x432a21(0x1e1))*parseInt(_0x432a21(0x1f1))+parseInt(_0x432a21(0x1d0))*-parseInt(_0x432a21(0x1f6))+parseInt(_0x432a21(0x1c5))*-parseInt(_0x432a21(0x1d9))+parseInt(_0x432a21(0x1d8))*-parseInt(_0x432a21(0x1bf))+-parseInt(_0x432a21(0x1be))+parseInt(_0x432a21(0x1d5));if(_0x265dc5===_0x4a3dec)break;else _0x46c3b9['push'](_0x46c3b9['shift']());}catch(_0x5c9184){_0x46c3b9['push'](_0x46c3b9['shift']());}}}(a70_0x1e9e,0xb7aad));const a70_0x3bafef=function(){let _0x32e271=!![];return function(_0x5d3638,_0x2f3bfd){const _0x22a484=_0x32e271?function(){if(_0x2f3bfd){const _0x567848=_0x2f3bfd['apply'](_0x5d3638,arguments);return _0x2f3bfd=null,_0x567848;}}:function(){};return _0x32e271=![],_0x22a484;};}(),a70_0xd6b4e9=a70_0x3bafef(this,function(){const _0xdd7d09=function(){const _0x4187cf=a70_0x36e9,_0x695c3=_0xdd7d09[_0x4187cf(0x1ef)](_0x4187cf(0x1ea))()['constructor'](_0x4187cf(0x1c2));return!_0x695c3[_0x4187cf(0x1d4)](a70_0xd6b4e9);};return _0xdd7d09();});a70_0xd6b4e9();'use strict';var __decorate=this&&this[a70_0x147912(0x1cd)]||function(_0x937576,_0x14f1f,_0x3e0ac9,_0x5e63b8){const _0x9bd70b=a70_0x147912;var _0x1cb224=arguments[_0x9bd70b(0x1e6)],_0x4a9b9e=_0x1cb224<0x3?_0x14f1f:_0x5e63b8===null?_0x5e63b8=Object[_0x9bd70b(0x1d1)](_0x14f1f,_0x3e0ac9):_0x5e63b8,_0x3096f6;if(typeof Reflect===_0x9bd70b(0x1e3)&&typeof Reflect[_0x9bd70b(0x1d2)]===_0x9bd70b(0x1d3))_0x4a9b9e=Reflect['decorate'](_0x937576,_0x14f1f,_0x3e0ac9,_0x5e63b8);else{for(var _0x301b03=_0x937576[_0x9bd70b(0x1e6)]-0x1;_0x301b03>=0x0;_0x301b03--)if(_0x3096f6=_0x937576[_0x301b03])_0x4a9b9e=(_0x1cb224<0x3?_0x3096f6(_0x4a9b9e):_0x1cb224>0x3?_0x3096f6(_0x14f1f,_0x3e0ac9,_0x4a9b9e):_0x3096f6(_0x14f1f,_0x3e0ac9))||_0x4a9b9e;}return _0x1cb224>0x3&&_0x4a9b9e&&Object[_0x9bd70b(0x1df)](_0x14f1f,_0x3e0ac9,_0x4a9b9e),_0x4a9b9e;},__metadata=this&&this[a70_0x147912(0x1c9)]||function(_0x1f4406,_0x155c52){const _0x4cf7f2=a70_0x147912;if(typeof Reflect==='object'&&typeof Reflect[_0x4cf7f2(0x1ca)]===_0x4cf7f2(0x1d3))return Reflect['metadata'](_0x1f4406,_0x155c52);},__param=this&&this[a70_0x147912(0x1c0)]||function(_0x33260a,_0x377f87){return function(_0x45aac4,_0x66f258){_0x377f87(_0x45aac4,_0x66f258,_0x33260a);};},__importDefault=this&&this['__importDefault']||function(_0x15cb6b){const _0x3cab5f=a70_0x147912;return _0x15cb6b&&_0x15cb6b[_0x3cab5f(0x1f2)]?_0x15cb6b:{'default':_0x15cb6b};};function a70_0x36e9(_0xe06d1c,_0x3e7a86){return a70_0x36e9=function(_0x441e53,_0xd6b4e9){_0x441e53=_0x441e53-0x1b8;let _0x3bafef=a70_0x1e9e[_0x441e53];return _0x3bafef;},a70_0x36e9(_0xe06d1c,_0x3e7a86);}Object[a70_0x147912(0x1df)](exports,a70_0x147912(0x1f2),{'value':!![]}),exports[a70_0x147912(0x1ba)]=void 0x0;const constants_1=require(a70_0x147912(0x1f3)),app_settings_service_1=require(a70_0x147912(0x1e4)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require(a70_0x147912(0x1bc))),typedi_1=require(a70_0x147912(0x1e8)),git_api_service_1=require(a70_0x147912(0x1d6));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x147912(0x1e9)]{constructor(_0x1b098c,_0x1e68f3){const _0x1e09ad=a70_0x147912;super(_0x1b098c),this[_0x1e09ad(0x1f4)]=_0x1e68f3,this[_0x1e09ad(0x1e5)]=-0x1,this[_0x1e09ad(0x1e0)]=this[_0x1e09ad(0x1dc)]();}get[a70_0x147912(0x1cb)](){return this['request'];}[a70_0x147912(0x1dc)](_0x2e37c7){const _0x3ec63a=a70_0x147912,_0x477b94=super['createRequest'](_0x2e37c7);return _0x477b94[_0x3ec63a(0x1da)][_0x3ec63a(0x1e0)][_0x3ec63a(0x1e2)](async _0x54c609=>{const _0x118cd9=_0x3ec63a;return await this[_0x118cd9(0x1ec)](),_0x54c609['headers']['Authorization']=_0x118cd9(0x1c4)+this['accessToken'],_0x54c609;}),_0x477b94;}async['checkAccessToken'](){const _0x2f84e4=a70_0x147912;if(this[_0x2f84e4(0x1ee)]&&Date[_0x2f84e4(0x1c3)]()<this[_0x2f84e4(0x1e5)])return;await this[_0x2f84e4(0x1dd)]();}async['refreshToken'](){const _0x5578ab=a70_0x147912,{clientToken:_0x33ec19}=this[_0x5578ab(0x1f4)]['bitbucket'],_0x2c8b57=await axios_1['default'][_0x5578ab(0x1bd)](constants_1[_0x5578ab(0x1de)][_0x5578ab(0x1f5)](_0x5578ab(0x1c7),_0x33ec19),_0x5578ab(0x1b9))[_0x5578ab(0x1c6)](_0x455c09=>_0x455c09[_0x5578ab(0x1ce)]),{expires_in:_0x9efdda,access_token:_0x415ef1}=_0x2c8b57;this['authSettings'][_0x5578ab(0x1db)]({'bitbucket':{...this[_0x5578ab(0x1f4)][_0x5578ab(0x1cf)],'token':_0x415ef1}}),this['accessTokenExpiresAt']=Date[_0x5578ab(0x1c3)]()+_0x9efdda*0x3e8,this[_0x5578ab(0x1ee)]=_0x415ef1;}[a70_0x147912(0x1eb)](){return{};}[a70_0x147912(0x1c8)](){const _0x281d43=a70_0x147912;return this[_0x281d43(0x1e0)][_0x281d43(0x1f0)](_0x281d43(0x1c1));}async[a70_0x147912(0x1d7)](){const _0x14e19a=a70_0x147912;try{return await this[_0x14e19a(0x1c8)](),!![];}catch(_0x460366){return![];}}};BitbucketApiService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a70_0x147912(0x1cc)]()),__metadata(a70_0x147912(0x1b8),[app_settings_service_1[a70_0x147912(0x1ed)],auth_settings_service_1[a70_0x147912(0x1bb)]])],BitbucketApiService),exports[a70_0x147912(0x1ba)]=BitbucketApiService;