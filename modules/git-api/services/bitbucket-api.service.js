const a70_0x10ee=['request','decorate','test','./git-api.service','constructor','__importDefault','Inject','616173MRfISM','metadata','750715bDpuuE','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getCurrentUser','replace','AuthSettingsService','536907ObsHQX','post','__esModule','createRequest','defineProperty','use','headers','BitbucketApiService','function','../../shared/services/auth-settings.service','Authorization','94WAsdKx','Bearer\x20','Service','802966tXdhgm','apply','isLoggedIn','typedi','data','design:paramtypes','default','user','get','%clientToken%','__param','authSettings','object','3kDrULF','154727uBJgoJ','accessTokenExpiresAt','2126ScHxrQ','BITBUCKET_REFRESH_TOKEN_URL','__metadata','getHeaders','update','axios','now','GitApiService','accessToken','bitbucket','checkAccessToken','AppSettingsService','1931DDcnQr','463oQLRXK','length','interceptors'];const a70_0x55eb47=a70_0x3fc0;(function(_0x28cfc4,_0x2505cb){const _0x1c1f86=a70_0x3fc0;while(!![]){try{const _0x2da6c8=-parseInt(_0x1c1f86(0x1fa))+parseInt(_0x1c1f86(0x20f))+-parseInt(_0x1c1f86(0x20c))*-parseInt(_0x1c1f86(0x21f))+-parseInt(_0x1c1f86(0x1fc))+-parseInt(_0x1c1f86(0x201))+-parseInt(_0x1c1f86(0x21c))*-parseInt(_0x1c1f86(0x21d))+-parseInt(_0x1c1f86(0x1ef))*-parseInt(_0x1c1f86(0x1f0));if(_0x2da6c8===_0x2505cb)break;else _0x28cfc4['push'](_0x28cfc4['shift']());}catch(_0x5f1265){_0x28cfc4['push'](_0x28cfc4['shift']());}}}(a70_0x10ee,0x6fa21));const a70_0x5cd995=function(){let _0x24c513=!![];return function(_0x4e9c51,_0x1a21ae){const _0x5bfa17=_0x24c513?function(){const _0x41a279=a70_0x3fc0;if(_0x1a21ae){const _0x182ae1=_0x1a21ae[_0x41a279(0x210)](_0x4e9c51,arguments);return _0x1a21ae=null,_0x182ae1;}}:function(){};return _0x24c513=![],_0x5bfa17;};}(),a70_0x1d02e1=a70_0x5cd995(this,function(){const _0x1018f8=function(){const _0x4f8664=a70_0x3fc0,_0x764e60=_0x1018f8['constructor'](_0x4f8664(0x1fd))()[_0x4f8664(0x1f7)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x764e60[_0x4f8664(0x1f5)](a70_0x1d02e1);};return _0x1018f8();});a70_0x1d02e1();'use strict';var __decorate=this&&this['__decorate']||function(_0x14e7de,_0x50e55b,_0x3f183b,_0x3a0246){const _0x117abd=a70_0x3fc0;var _0x407c6e=arguments[_0x117abd(0x1f1)],_0x1ba3d2=_0x407c6e<0x3?_0x50e55b:_0x3a0246===null?_0x3a0246=Object['getOwnPropertyDescriptor'](_0x50e55b,_0x3f183b):_0x3a0246,_0xf85050;if(typeof Reflect===_0x117abd(0x21b)&&typeof Reflect[_0x117abd(0x1f4)]===_0x117abd(0x209))_0x1ba3d2=Reflect[_0x117abd(0x1f4)](_0x14e7de,_0x50e55b,_0x3f183b,_0x3a0246);else{for(var _0x27609e=_0x14e7de[_0x117abd(0x1f1)]-0x1;_0x27609e>=0x0;_0x27609e--)if(_0xf85050=_0x14e7de[_0x27609e])_0x1ba3d2=(_0x407c6e<0x3?_0xf85050(_0x1ba3d2):_0x407c6e>0x3?_0xf85050(_0x50e55b,_0x3f183b,_0x1ba3d2):_0xf85050(_0x50e55b,_0x3f183b))||_0x1ba3d2;}return _0x407c6e>0x3&&_0x1ba3d2&&Object[_0x117abd(0x205)](_0x50e55b,_0x3f183b,_0x1ba3d2),_0x1ba3d2;},__metadata=this&&this[a70_0x55eb47(0x221)]||function(_0x3f51f0,_0x418889){const _0x2d8f23=a70_0x55eb47;if(typeof Reflect===_0x2d8f23(0x21b)&&typeof Reflect['metadata']===_0x2d8f23(0x209))return Reflect[_0x2d8f23(0x1fb)](_0x3f51f0,_0x418889);},__param=this&&this[a70_0x55eb47(0x219)]||function(_0x3725ab,_0x39d223){return function(_0x563929,_0x41deca){_0x39d223(_0x563929,_0x41deca,_0x3725ab);};},__importDefault=this&&this[a70_0x55eb47(0x1f8)]||function(_0x5af981){const _0x4fabf2=a70_0x55eb47;return _0x5af981&&_0x5af981[_0x4fabf2(0x203)]?_0x5af981:{'default':_0x5af981};};Object[a70_0x55eb47(0x205)](exports,a70_0x55eb47(0x203),{'value':!![]}),exports[a70_0x55eb47(0x208)]=void 0x0;const constants_1=require('../../../constants'),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require(a70_0x55eb47(0x20a)),axios_1=__importDefault(require(a70_0x55eb47(0x224))),typedi_1=require(a70_0x55eb47(0x212)),git_api_service_1=require(a70_0x55eb47(0x1f6));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a70_0x55eb47(0x226)]{constructor(_0x3dddaf,_0x5b4172){const _0x50b009=a70_0x55eb47;super(_0x3dddaf),this[_0x50b009(0x21a)]=_0x5b4172,this[_0x50b009(0x21e)]=-0x1,this[_0x50b009(0x1f3)]=this['createRequest']();}get['apiRequest'](){const _0x4b8f3e=a70_0x55eb47;return this[_0x4b8f3e(0x1f3)];}[a70_0x55eb47(0x204)](_0x27e5dc){const _0x3b8fbd=a70_0x55eb47,_0x3fcfe8=super[_0x3b8fbd(0x204)](_0x27e5dc);return _0x3fcfe8[_0x3b8fbd(0x1f2)][_0x3b8fbd(0x1f3)][_0x3b8fbd(0x206)](async _0x18986b=>{const _0x3e124c=_0x3b8fbd;return await this[_0x3e124c(0x1ed)](),_0x18986b[_0x3e124c(0x207)][_0x3e124c(0x20b)]=_0x3e124c(0x20d)+this[_0x3e124c(0x227)],_0x18986b;}),_0x3fcfe8;}async[a70_0x55eb47(0x1ed)](){const _0x470327=a70_0x55eb47;if(this['accessToken']&&Date[_0x470327(0x225)]()<this[_0x470327(0x21e)])return;await this['refreshToken']();}async['refreshToken'](){const _0x4e7c52=a70_0x55eb47,{clientToken:_0x1bc72b}=this[_0x4e7c52(0x21a)]['bitbucket'],_0x3b0dd1=await axios_1[_0x4e7c52(0x215)][_0x4e7c52(0x202)](constants_1[_0x4e7c52(0x220)][_0x4e7c52(0x1ff)](_0x4e7c52(0x218),_0x1bc72b),'grant_type=client_credentials')['then'](_0x589a0b=>_0x589a0b[_0x4e7c52(0x213)]),{expires_in:_0xbd62cb,access_token:_0x4ce6a7}=_0x3b0dd1;this[_0x4e7c52(0x21a)][_0x4e7c52(0x223)]({'bitbucket':{...this[_0x4e7c52(0x21a)][_0x4e7c52(0x228)],'token':_0x4ce6a7}}),this[_0x4e7c52(0x21e)]=Date[_0x4e7c52(0x225)]()+_0xbd62cb*0x3e8,this[_0x4e7c52(0x227)]=_0x4ce6a7;}[a70_0x55eb47(0x222)](){return{};}[a70_0x55eb47(0x1fe)](){const _0x394b47=a70_0x55eb47;return this[_0x394b47(0x1f3)][_0x394b47(0x217)](_0x394b47(0x216));}async[a70_0x55eb47(0x211)](){try{return await this['getCurrentUser'](),!![];}catch(_0x5b6469){return![];}}};function a70_0x3fc0(_0x41881a,_0x3e9f1e){return a70_0x3fc0=function(_0x5d7033,_0x1d02e1){_0x5d7033=_0x5d7033-0x1ed;let _0x5cd995=a70_0x10ee[_0x5d7033];return _0x5cd995;},a70_0x3fc0(_0x41881a,_0x3e9f1e);}BitbucketApiService=__decorate([typedi_1[a70_0x55eb47(0x20e)](),__param(0x0,typedi_1[a70_0x55eb47(0x1f9)]()),__metadata(a70_0x55eb47(0x214),[app_settings_service_1[a70_0x55eb47(0x1ee)],auth_settings_service_1[a70_0x55eb47(0x200)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;