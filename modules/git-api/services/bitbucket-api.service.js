const a64_0x501faa=a64_0x1a15;(function(_0x4854e9,_0x176522){const _0x131a49=a64_0x1a15,_0x4f9ab4=_0x4854e9();while(!![]){try{const _0x2a35b7=-parseInt(_0x131a49(0xaa))/0x1*(parseInt(_0x131a49(0xbe))/0x2)+-parseInt(_0x131a49(0xb0))/0x3+-parseInt(_0x131a49(0x9e))/0x4+-parseInt(_0x131a49(0xc8))/0x5*(parseInt(_0x131a49(0xae))/0x6)+parseInt(_0x131a49(0xd5))/0x7*(-parseInt(_0x131a49(0xbb))/0x8)+parseInt(_0x131a49(0xbc))/0x9*(-parseInt(_0x131a49(0xbd))/0xa)+-parseInt(_0x131a49(0x9a))/0xb*(-parseInt(_0x131a49(0xa9))/0xc);if(_0x2a35b7===_0x176522)break;else _0x4f9ab4['push'](_0x4f9ab4['shift']());}catch(_0xdabc00){_0x4f9ab4['push'](_0x4f9ab4['shift']());}}}(a64_0x2f90,0x8900b));const a64_0x2b326f=function(){let _0x226dfa=!![];return function(_0xde2d6e,_0x2fda6b){const _0x145695=_0x226dfa?function(){const _0x2dd1c1=a64_0x1a15;if(_0x2fda6b){const _0x437821=_0x2fda6b[_0x2dd1c1(0xb7)](_0xde2d6e,arguments);return _0x2fda6b=null,_0x437821;}}:function(){};return _0x226dfa=![],_0x145695;};}(),a64_0x2e76f8=a64_0x2b326f(this,function(){const _0x509bf3=a64_0x1a15;return a64_0x2e76f8['toString']()[_0x509bf3(0xaf)](_0x509bf3(0xa3))['toString']()[_0x509bf3(0xb6)](a64_0x2e76f8)['search'](_0x509bf3(0xa3));});a64_0x2e76f8();function a64_0x1a15(_0x30b145,_0x3fe36e){const _0x5cfa1e=a64_0x2f90();return a64_0x1a15=function(_0x2e76f8,_0x2b326f){_0x2e76f8=_0x2e76f8-0x99;let _0x2f90d2=_0x5cfa1e[_0x2e76f8];return _0x2f90d2;},a64_0x1a15(_0x30b145,_0x3fe36e);}function a64_0x2f90(){const _0xfb5f6f=['9CoZDlO','3841410qyarXq','3148kJelcB','get','Service','bitbucket','user','decorate','grant_type=client_credentials','__importDefault','function','post','615cuBaTg','update','Authorization','./git-api.service','object','headers','getCurrentUser','MAX_REQUEST_PER_HOUR','now','Bearer\x20','getHeaders','getOwnPropertyDescriptor','design:paramtypes','6845559TxunzL','__metadata','refreshToken','authSettings','22lakjGv','accessTokenExpiresAt','typedi','../../../constants','2912220pKOxHi','metadata','BITBUCKET_REFRESH_TOKEN_URL','AuthSettingsService','isLoggedIn','(((.+)+)+)+$','length','__param','checkAccessToken','GitApiService','createRequest','25190904gxdKoO','361MgbAjP','../../shared/services/auth-settings.service','__esModule','accessToken','40734iecjfD','search','431781jOOWAg','__decorate','defineProperty','apiRequest','BitbucketApiService','request','constructor','apply','interceptors','axios','data','8QSaePy'];a64_0x2f90=function(){return _0xfb5f6f;};return a64_0x2f90();}'use strict';var __decorate=this&&this[a64_0x501faa(0xb1)]||function(_0x127fc0,_0x28b8e1,_0x151d5f,_0x2302eb){const _0xd02975=a64_0x501faa;var _0x393877=arguments[_0xd02975(0xa4)],_0x534d64=_0x393877<0x3?_0x28b8e1:_0x2302eb===null?_0x2302eb=Object[_0xd02975(0xd3)](_0x28b8e1,_0x151d5f):_0x2302eb,_0x146374;if(typeof Reflect===_0xd02975(0xcc)&&typeof Reflect[_0xd02975(0xc3)]===_0xd02975(0xc6))_0x534d64=Reflect[_0xd02975(0xc3)](_0x127fc0,_0x28b8e1,_0x151d5f,_0x2302eb);else{for(var _0x5427ac=_0x127fc0['length']-0x1;_0x5427ac>=0x0;_0x5427ac--)if(_0x146374=_0x127fc0[_0x5427ac])_0x534d64=(_0x393877<0x3?_0x146374(_0x534d64):_0x393877>0x3?_0x146374(_0x28b8e1,_0x151d5f,_0x534d64):_0x146374(_0x28b8e1,_0x151d5f))||_0x534d64;}return _0x393877>0x3&&_0x534d64&&Object['defineProperty'](_0x28b8e1,_0x151d5f,_0x534d64),_0x534d64;},__metadata=this&&this[a64_0x501faa(0xd6)]||function(_0x13eb85,_0x35b5bf){const _0x5a153c=a64_0x501faa;if(typeof Reflect===_0x5a153c(0xcc)&&typeof Reflect[_0x5a153c(0x9f)]===_0x5a153c(0xc6))return Reflect['metadata'](_0x13eb85,_0x35b5bf);},__param=this&&this[a64_0x501faa(0xa5)]||function(_0x1a76ce,_0x4b4eb4){return function(_0x1ef40d,_0x464b83){_0x4b4eb4(_0x1ef40d,_0x464b83,_0x1a76ce);};},__importDefault=this&&this[a64_0x501faa(0xc5)]||function(_0x3cd91e){const _0x203a66=a64_0x501faa;return _0x3cd91e&&_0x3cd91e[_0x203a66(0xac)]?_0x3cd91e:{'default':_0x3cd91e};};Object[a64_0x501faa(0xb2)](exports,a64_0x501faa(0xac),{'value':!![]}),exports[a64_0x501faa(0xb4)]=void 0x0;const constants_1=require(a64_0x501faa(0x9d)),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require(a64_0x501faa(0xab)),axios_1=__importDefault(require(a64_0x501faa(0xb9))),typedi_1=require(a64_0x501faa(0x9c)),git_api_service_1=require(a64_0x501faa(0xcb));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a64_0x501faa(0xa7)]{constructor(_0x3fefff,_0xae05d6){const _0x565abb=a64_0x501faa;super(_0x3fefff),this[_0x565abb(0x99)]=_0xae05d6,this['accessTokenExpiresAt']=-0x1,this[_0x565abb(0xcf)]=0x3e8,this[_0x565abb(0xb5)]=this[_0x565abb(0xa8)]();}get[a64_0x501faa(0xb3)](){const _0x3ac81e=a64_0x501faa;return this[_0x3ac81e(0xb5)];}[a64_0x501faa(0xa8)](_0x515849){const _0x2e3b29=a64_0x501faa,_0xb7c0be=super[_0x2e3b29(0xa8)](_0x515849);return _0xb7c0be[_0x2e3b29(0xb8)][_0x2e3b29(0xb5)]['use'](async _0x4c912c=>{const _0x2d98ee=_0x2e3b29;return await this['checkAccessToken'](),_0x4c912c[_0x2d98ee(0xcd)][_0x2d98ee(0xca)]=_0x2d98ee(0xd1)+this[_0x2d98ee(0xad)],_0x4c912c;}),_0xb7c0be;}async[a64_0x501faa(0xa6)](){const _0x438467=a64_0x501faa;if(this[_0x438467(0xad)]&&Date[_0x438467(0xd0)]()<this['accessTokenExpiresAt'])return;await this['refreshToken']();}async[a64_0x501faa(0xd7)](){const _0x3e13fe=a64_0x501faa,{clientToken:_0x12de4f}=this[_0x3e13fe(0x99)][_0x3e13fe(0xc1)],_0x34ebff=await axios_1['default'][_0x3e13fe(0xc7)](constants_1[_0x3e13fe(0xa0)]['replace']('%clientToken%',_0x12de4f),_0x3e13fe(0xc4))['then'](_0x2f11e0=>_0x2f11e0[_0x3e13fe(0xba)]),{expires_in:_0x1b06e3,access_token:_0x46b30b}=_0x34ebff;this['authSettings'][_0x3e13fe(0xc9)]({'bitbucket':{...this[_0x3e13fe(0x99)][_0x3e13fe(0xc1)],'token':_0x46b30b}}),this[_0x3e13fe(0x9b)]=Date[_0x3e13fe(0xd0)]()+_0x1b06e3*0x3e8,this[_0x3e13fe(0xad)]=_0x46b30b;}[a64_0x501faa(0xd2)](){return{};}[a64_0x501faa(0xce)](){const _0x45a450=a64_0x501faa;return this[_0x45a450(0xb5)][_0x45a450(0xbf)](_0x45a450(0xc2));}async[a64_0x501faa(0xa2)](){const _0x43b5ce=a64_0x501faa;return await this[_0x43b5ce(0xce)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a64_0x501faa(0xc0)])(),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata(a64_0x501faa(0xd4),[app_settings_service_1['AppSettingsService'],auth_settings_service_1[a64_0x501faa(0xa1)]])],BitbucketApiService),exports[a64_0x501faa(0xb4)]=BitbucketApiService;