const a62_0x4e7e=['Inject','createRequest','AppSettingsService','interceptors','axios','grant_type=client_credentials','../../../constants','decorate','object','user','GitApiService','constructor','411909fyrskn','176484hRcHeh','metadata','12082sqPUOj','../../shared/services/auth-settings.service','getHeaders','request','4529lMFpxU','bitbucket','isLoggedIn','Authorization','__esModule','refreshToken','return\x20/\x22\x20+\x20this\x20+\x20\x22/','accessToken','apply','__param','__metadata','use','then','Service','1kcPYNl','109irucqe','update','headers','test','Bearer\x20','53991elBWYS','function','getOwnPropertyDescriptor','defineProperty','typedi','636886AyUQDo','getCurrentUser','BitbucketApiService','post','authSettings','accessTokenExpiresAt','length','BITBUCKET_REFRESH_TOKEN_URL','data','__importDefault','1121990AhoabU','14cQIZAF','checkAccessToken','replace','design:paramtypes'];const a62_0x4b8faf=a62_0x7c66;(function(_0x48381f,_0x24fd69){const _0x344f43=a62_0x7c66;while(!![]){try{const _0x129034=parseInt(_0x344f43(0x1cb))*parseInt(_0x344f43(0x1f7))+parseInt(_0x344f43(0x1f0))*-parseInt(_0x344f43(0x1ca))+-parseInt(_0x344f43(0x1d5))+-parseInt(_0x344f43(0x1d0))+parseInt(_0x344f43(0x1f3))*-parseInt(_0x344f43(0x1e0))+parseInt(_0x344f43(0x1f1))+parseInt(_0x344f43(0x1df));if(_0x129034===_0x24fd69)break;else _0x48381f['push'](_0x48381f['shift']());}catch(_0x4a6485){_0x48381f['push'](_0x48381f['shift']());}}}(a62_0x4e7e,0x7f009));const a62_0x2b1ebe=function(){let _0x203e19=!![];return function(_0x252084,_0x51f0ba){const _0x3619fa=_0x203e19?function(){const _0x400f8c=a62_0x7c66;if(_0x51f0ba){const _0x2fbdb1=_0x51f0ba[_0x400f8c(0x1c4)](_0x252084,arguments);return _0x51f0ba=null,_0x2fbdb1;}}:function(){};return _0x203e19=![],_0x3619fa;};}(),a62_0x54df47=a62_0x2b1ebe(this,function(){const _0x29073a=function(){const _0x3823a3=a62_0x7c66,_0x2c7201=_0x29073a['constructor'](_0x3823a3(0x1c2))()[_0x3823a3(0x1ef)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2c7201[_0x3823a3(0x1ce)](a62_0x54df47);};return _0x29073a();});function a62_0x7c66(_0x201bb0,_0x135077){return a62_0x7c66=function(_0x569f1a,_0x54df47){_0x569f1a=_0x569f1a-0x1bf;let _0x2b1ebe=a62_0x4e7e[_0x569f1a];return _0x2b1ebe;},a62_0x7c66(_0x201bb0,_0x135077);}a62_0x54df47();'use strict';var __decorate=this&&this['__decorate']||function(_0x2eac6e,_0x28d437,_0xb08d88,_0x323009){const _0x3a6120=a62_0x7c66;var _0x4ecc86=arguments[_0x3a6120(0x1db)],_0x271b8b=_0x4ecc86<0x3?_0x28d437:_0x323009===null?_0x323009=Object[_0x3a6120(0x1d2)](_0x28d437,_0xb08d88):_0x323009,_0x371446;if(typeof Reflect==='object'&&typeof Reflect[_0x3a6120(0x1eb)]==='function')_0x271b8b=Reflect['decorate'](_0x2eac6e,_0x28d437,_0xb08d88,_0x323009);else{for(var _0x368c16=_0x2eac6e['length']-0x1;_0x368c16>=0x0;_0x368c16--)if(_0x371446=_0x2eac6e[_0x368c16])_0x271b8b=(_0x4ecc86<0x3?_0x371446(_0x271b8b):_0x4ecc86>0x3?_0x371446(_0x28d437,_0xb08d88,_0x271b8b):_0x371446(_0x28d437,_0xb08d88))||_0x271b8b;}return _0x4ecc86>0x3&&_0x271b8b&&Object[_0x3a6120(0x1d3)](_0x28d437,_0xb08d88,_0x271b8b),_0x271b8b;},__metadata=this&&this[a62_0x4b8faf(0x1c6)]||function(_0x14cceb,_0x6e51e0){const _0x2f95e2=a62_0x4b8faf;if(typeof Reflect===_0x2f95e2(0x1ec)&&typeof Reflect[_0x2f95e2(0x1f2)]===_0x2f95e2(0x1d1))return Reflect[_0x2f95e2(0x1f2)](_0x14cceb,_0x6e51e0);},__param=this&&this[a62_0x4b8faf(0x1c5)]||function(_0x24a9ca,_0xcb095b){return function(_0x2affe6,_0x4edc64){_0xcb095b(_0x2affe6,_0x4edc64,_0x24a9ca);};},__importDefault=this&&this[a62_0x4b8faf(0x1de)]||function(_0x2eb084){const _0x2432f5=a62_0x4b8faf;return _0x2eb084&&_0x2eb084[_0x2432f5(0x1c0)]?_0x2eb084:{'default':_0x2eb084};};Object[a62_0x4b8faf(0x1d3)](exports,a62_0x4b8faf(0x1c0),{'value':!![]}),exports[a62_0x4b8faf(0x1d7)]=void 0x0;const constants_1=require(a62_0x4b8faf(0x1ea)),app_settings_service_1=require('../../shared/services/app-settings.service'),auth_settings_service_1=require(a62_0x4b8faf(0x1f4)),axios_1=__importDefault(require(a62_0x4b8faf(0x1e8))),typedi_1=require(a62_0x4b8faf(0x1d4)),git_api_service_1=require('./git-api.service');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a62_0x4b8faf(0x1ee)]{constructor(_0x2387f7,_0x311a33){const _0x3b7112=a62_0x4b8faf;super(_0x2387f7),this[_0x3b7112(0x1d9)]=_0x311a33,this['accessTokenExpiresAt']=-0x1,this[_0x3b7112(0x1f6)]=this[_0x3b7112(0x1e5)]();}get['apiRequest'](){return this['request'];}[a62_0x4b8faf(0x1e5)](_0x2dbd46){const _0x962606=a62_0x4b8faf,_0x339694=super['createRequest'](_0x2dbd46);return _0x339694[_0x962606(0x1e7)]['request'][_0x962606(0x1c7)](async _0x178403=>{const _0x23628c=_0x962606;return await this[_0x23628c(0x1e1)](),_0x178403[_0x23628c(0x1cd)][_0x23628c(0x1bf)]=_0x23628c(0x1cf)+this[_0x23628c(0x1c3)],_0x178403;}),_0x339694;}async[a62_0x4b8faf(0x1e1)](){const _0x47d86a=a62_0x4b8faf;if(this['accessToken']&&Date['now']()<this[_0x47d86a(0x1da)])return;await this[_0x47d86a(0x1c1)]();}async[a62_0x4b8faf(0x1c1)](){const _0x51c0b2=a62_0x4b8faf,{clientToken:_0xb2c43e}=this[_0x51c0b2(0x1d9)][_0x51c0b2(0x1f8)],_0xeaa45f=await axios_1['default'][_0x51c0b2(0x1d8)](constants_1[_0x51c0b2(0x1dc)][_0x51c0b2(0x1e2)]('%clientToken%',_0xb2c43e),_0x51c0b2(0x1e9))[_0x51c0b2(0x1c8)](_0x1f0a3d=>_0x1f0a3d[_0x51c0b2(0x1dd)]),{expires_in:_0x23acf7,access_token:_0x1c90ed}=_0xeaa45f;this[_0x51c0b2(0x1d9)][_0x51c0b2(0x1cc)]({'bitbucket':{...this[_0x51c0b2(0x1d9)]['bitbucket'],'token':_0x1c90ed}}),this['accessTokenExpiresAt']=Date['now']()+_0x23acf7*0x3e8,this[_0x51c0b2(0x1c3)]=_0x1c90ed;}[a62_0x4b8faf(0x1f5)](){return{};}[a62_0x4b8faf(0x1d6)](){const _0x531f76=a62_0x4b8faf;return this['request']['get'](_0x531f76(0x1ed));}async[a62_0x4b8faf(0x1f9)](){const _0x51362e=a62_0x4b8faf;try{return await this[_0x51362e(0x1d6)](),!![];}catch(_0x56d5cd){return![];}}};BitbucketApiService=__decorate([typedi_1[a62_0x4b8faf(0x1c9)](),__param(0x0,typedi_1[a62_0x4b8faf(0x1e4)]()),__metadata(a62_0x4b8faf(0x1e3),[app_settings_service_1[a62_0x4b8faf(0x1e6)],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports[a62_0x4b8faf(0x1d7)]=BitbucketApiService;