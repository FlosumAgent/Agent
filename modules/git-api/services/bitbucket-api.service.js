const a64_0x3cf4bc=a64_0x12e8;(function(_0x3f8b99,_0x2fe860){const _0x3c4c3b=a64_0x12e8,_0x471bd2=_0x3f8b99();while(!![]){try{const _0x44d910=-parseInt(_0x3c4c3b(0x1ad))/0x1+-parseInt(_0x3c4c3b(0x1a8))/0x2+-parseInt(_0x3c4c3b(0x1b1))/0x3*(parseInt(_0x3c4c3b(0x1a7))/0x4)+parseInt(_0x3c4c3b(0x1b0))/0x5+-parseInt(_0x3c4c3b(0x19b))/0x6*(-parseInt(_0x3c4c3b(0x19e))/0x7)+-parseInt(_0x3c4c3b(0x194))/0x8+parseInt(_0x3c4c3b(0x1b7))/0x9;if(_0x44d910===_0x2fe860)break;else _0x471bd2['push'](_0x471bd2['shift']());}catch(_0x321616){_0x471bd2['push'](_0x471bd2['shift']());}}}(a64_0x433f,0x28952));const a64_0x49f74c=function(){let _0x5bcbcb=!![];return function(_0x13073a,_0xcaf08c){const _0x5e2a65=_0x5bcbcb?function(){const _0xb1dd5a=a64_0x12e8;if(_0xcaf08c){const _0x1cd893=_0xcaf08c[_0xb1dd5a(0x186)](_0x13073a,arguments);return _0xcaf08c=null,_0x1cd893;}}:function(){};return _0x5bcbcb=![],_0x5e2a65;};}(),a64_0x2b82a1=a64_0x49f74c(this,function(){const _0x5d501d=a64_0x12e8;return a64_0x2b82a1[_0x5d501d(0x1b4)]()[_0x5d501d(0x1be)](_0x5d501d(0x1ab))[_0x5d501d(0x1b4)]()[_0x5d501d(0x1bc)](a64_0x2b82a1)['search'](_0x5d501d(0x1ab));});a64_0x2b82a1();'use strict';var __decorate=this&&this[a64_0x3cf4bc(0x1aa)]||function(_0xad82e9,_0x2952c8,_0x295178,_0x11cf66){const _0x32ef8b=a64_0x3cf4bc;var _0x2da671=arguments[_0x32ef8b(0x18e)],_0x5db90c=_0x2da671<0x3?_0x2952c8:_0x11cf66===null?_0x11cf66=Object[_0x32ef8b(0x199)](_0x2952c8,_0x295178):_0x11cf66,_0x2350fc;if(typeof Reflect===_0x32ef8b(0x1b8)&&typeof Reflect[_0x32ef8b(0x192)]===_0x32ef8b(0x189))_0x5db90c=Reflect[_0x32ef8b(0x192)](_0xad82e9,_0x2952c8,_0x295178,_0x11cf66);else{for(var _0x598275=_0xad82e9['length']-0x1;_0x598275>=0x0;_0x598275--)if(_0x2350fc=_0xad82e9[_0x598275])_0x5db90c=(_0x2da671<0x3?_0x2350fc(_0x5db90c):_0x2da671>0x3?_0x2350fc(_0x2952c8,_0x295178,_0x5db90c):_0x2350fc(_0x2952c8,_0x295178))||_0x5db90c;}return _0x2da671>0x3&&_0x5db90c&&Object[_0x32ef8b(0x19d)](_0x2952c8,_0x295178,_0x5db90c),_0x5db90c;},__metadata=this&&this[a64_0x3cf4bc(0x1a4)]||function(_0x11c9a1,_0x55c984){const _0x15b81f=a64_0x3cf4bc;if(typeof Reflect==='object'&&typeof Reflect[_0x15b81f(0x1bd)]===_0x15b81f(0x189))return Reflect[_0x15b81f(0x1bd)](_0x11c9a1,_0x55c984);},__param=this&&this[a64_0x3cf4bc(0x1b2)]||function(_0x1a58ca,_0x214d17){return function(_0x5be79d,_0x5e0213){_0x214d17(_0x5be79d,_0x5e0213,_0x1a58ca);};},__importDefault=this&&this[a64_0x3cf4bc(0x1af)]||function(_0x418b3c){const _0x14dc92=a64_0x3cf4bc;return _0x418b3c&&_0x418b3c[_0x14dc92(0x1a3)]?_0x418b3c:{'default':_0x418b3c};};Object['defineProperty'](exports,a64_0x3cf4bc(0x1a3),{'value':!![]}),exports[a64_0x3cf4bc(0x1b3)]=void 0x0;function a64_0x12e8(_0x5297a0,_0x3e2e71){const _0x4d093c=a64_0x433f();return a64_0x12e8=function(_0x2b82a1,_0x49f74c){_0x2b82a1=_0x2b82a1-0x185;let _0x433f9d=_0x4d093c[_0x2b82a1];return _0x433f9d;},a64_0x12e8(_0x5297a0,_0x3e2e71);}const constants_1=require(a64_0x3cf4bc(0x195)),app_settings_service_1=require(a64_0x3cf4bc(0x1b6)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),axios_1=__importDefault(require('axios')),typedi_1=require(a64_0x3cf4bc(0x197)),git_api_service_1=require(a64_0x3cf4bc(0x19c));let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a64_0x3cf4bc(0x1bb)]{constructor(_0x2e41ba,_0x32ef97){const _0x536984=a64_0x3cf4bc;super(_0x2e41ba),this[_0x536984(0x18d)]=_0x32ef97,this[_0x536984(0x187)]=-0x1,this['MAX_REQUEST_PER_HOUR']=0x3e8,this['request']=this[_0x536984(0x198)]();}get[a64_0x3cf4bc(0x19f)](){const _0x5c7f18=a64_0x3cf4bc;return this[_0x5c7f18(0x1b5)];}[a64_0x3cf4bc(0x198)](_0x44d6ed){const _0x379dc6=a64_0x3cf4bc,_0xcd9727=super[_0x379dc6(0x198)](_0x44d6ed);return _0xcd9727[_0x379dc6(0x188)]['request'][_0x379dc6(0x193)](async _0x2be071=>{const _0x53ea95=_0x379dc6;return await this[_0x53ea95(0x191)](),_0x2be071[_0x53ea95(0x185)][_0x53ea95(0x1c0)]=_0x53ea95(0x1bf)+this[_0x53ea95(0x190)],_0x2be071;}),_0xcd9727;}async[a64_0x3cf4bc(0x191)](){const _0x84682a=a64_0x3cf4bc;if(this[_0x84682a(0x190)]&&Date[_0x84682a(0x18a)]()<this[_0x84682a(0x187)])return;await this[_0x84682a(0x196)]();}async[a64_0x3cf4bc(0x196)](){const _0x34450b=a64_0x3cf4bc,{clientToken:_0x30c946}=this['authSettings'][_0x34450b(0x1a5)],_0x4895d0=await axios_1[_0x34450b(0x18b)]['post'](constants_1['BITBUCKET_REFRESH_TOKEN_URL']['replace'](_0x34450b(0x1a6),_0x30c946),'grant_type=client_credentials')[_0x34450b(0x1b9)](_0x4db2f3=>_0x4db2f3[_0x34450b(0x18f)]),{expires_in:_0xa84876,access_token:_0x4afb9c}=_0x4895d0;this[_0x34450b(0x18d)][_0x34450b(0x1ba)]({'bitbucket':{...this[_0x34450b(0x18d)][_0x34450b(0x1a5)],'token':_0x4afb9c}}),this['accessTokenExpiresAt']=Date['now']()+_0xa84876*0x3e8,this[_0x34450b(0x190)]=_0x4afb9c;}[a64_0x3cf4bc(0x1a9)](){return{};}[a64_0x3cf4bc(0x1ae)](){const _0x3a4e7e=a64_0x3cf4bc;return this['request'][_0x3a4e7e(0x1ac)](_0x3a4e7e(0x18c));}async[a64_0x3cf4bc(0x1a1)](){const _0x389d69=a64_0x3cf4bc;return await this[_0x389d69(0x1ae)](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a64_0x3cf4bc(0x19a)])(),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata(a64_0x3cf4bc(0x1a2),[app_settings_service_1[a64_0x3cf4bc(0x1a0)],auth_settings_service_1['AuthSettingsService']])],BitbucketApiService),exports[a64_0x3cf4bc(0x1b3)]=BitbucketApiService;function a64_0x433f(){const _0x272c19=['28402EytCxc','getHeaders','__decorate','(((.+)+)+)+$','get','91283cgcFPS','getCurrentUser','__importDefault','416965rrhYxh','211353vtrXIQ','__param','BitbucketApiService','toString','request','../../shared/services/app-settings.service','2986164Xmtqrc','object','then','update','GitApiService','constructor','metadata','search','Bearer\x20','Authorization','headers','apply','accessTokenExpiresAt','interceptors','function','now','default','user','authSettings','length','data','accessToken','checkAccessToken','decorate','use','1341320oSNHVn','../../../constants','refreshToken','typedi','createRequest','getOwnPropertyDescriptor','Service','606ywRzpu','./git-api.service','defineProperty','6559OFwyBY','apiRequest','AppSettingsService','isLoggedIn','design:paramtypes','__esModule','__metadata','bitbucket','%clientToken%','4AegFMv'];a64_0x433f=function(){return _0x272c19;};return a64_0x433f();}