const a64_0x4e0d3c=a64_0x5891;(function(_0x28af4d,_0x343282){const _0x1837da=a64_0x5891,_0x808263=_0x28af4d();while(!![]){try{const _0xf2654b=parseInt(_0x1837da(0x205))/0x1+-parseInt(_0x1837da(0x1ee))/0x2*(parseInt(_0x1837da(0x1e7))/0x3)+-parseInt(_0x1837da(0x1f2))/0x4+parseInt(_0x1837da(0x1f7))/0x5*(-parseInt(_0x1837da(0x214))/0x6)+-parseInt(_0x1837da(0x1f1))/0x7+parseInt(_0x1837da(0x21a))/0x8*(-parseInt(_0x1837da(0x20b))/0x9)+parseInt(_0x1837da(0x217))/0xa;if(_0xf2654b===_0x343282)break;else _0x808263['push'](_0x808263['shift']());}catch(_0xcc7eb1){_0x808263['push'](_0x808263['shift']());}}}(a64_0x41d8,0x2186e));const a64_0x59a978=function(){let _0x397b96=!![];return function(_0x28f65f,_0x312cd1){const _0x20f628=_0x397b96?function(){const _0x8b2173=a64_0x5891;if(_0x312cd1){const _0x21ae3b=_0x312cd1[_0x8b2173(0x220)](_0x28f65f,arguments);return _0x312cd1=null,_0x21ae3b;}}:function(){};return _0x397b96=![],_0x20f628;};}(),a64_0x2371d4=a64_0x59a978(this,function(){const _0x1aab4a=a64_0x5891;return a64_0x2371d4[_0x1aab4a(0x1fd)]()['search'](_0x1aab4a(0x221))[_0x1aab4a(0x1fd)]()[_0x1aab4a(0x21f)](a64_0x2371d4)['search'](_0x1aab4a(0x221));});function a64_0x5891(_0x1e1f31,_0xab5d58){const _0x44dd42=a64_0x41d8();return a64_0x5891=function(_0x2371d4,_0x59a978){_0x2371d4=_0x2371d4-0x1e5;let _0x41d8d7=_0x44dd42[_0x2371d4];return _0x41d8d7;},a64_0x5891(_0x1e1f31,_0xab5d58);}a64_0x2371d4();'use strict';var __decorate=this&&this[a64_0x4e0d3c(0x1f8)]||function(_0x112958,_0x2e06e7,_0x4901e5,_0x2a2e2d){const _0xcaa6ca=a64_0x4e0d3c;var _0x23a869=arguments[_0xcaa6ca(0x209)],_0x55acb6=_0x23a869<0x3?_0x2e06e7:_0x2a2e2d===null?_0x2a2e2d=Object[_0xcaa6ca(0x201)](_0x2e06e7,_0x4901e5):_0x2a2e2d,_0x3afa70;if(typeof Reflect===_0xcaa6ca(0x20f)&&typeof Reflect[_0xcaa6ca(0x1ed)]===_0xcaa6ca(0x20c))_0x55acb6=Reflect['decorate'](_0x112958,_0x2e06e7,_0x4901e5,_0x2a2e2d);else{for(var _0x3d16af=_0x112958['length']-0x1;_0x3d16af>=0x0;_0x3d16af--)if(_0x3afa70=_0x112958[_0x3d16af])_0x55acb6=(_0x23a869<0x3?_0x3afa70(_0x55acb6):_0x23a869>0x3?_0x3afa70(_0x2e06e7,_0x4901e5,_0x55acb6):_0x3afa70(_0x2e06e7,_0x4901e5))||_0x55acb6;}return _0x23a869>0x3&&_0x55acb6&&Object[_0xcaa6ca(0x1e5)](_0x2e06e7,_0x4901e5,_0x55acb6),_0x55acb6;},__metadata=this&&this[a64_0x4e0d3c(0x1f6)]||function(_0x16732f,_0x25d66f){const _0x4b33d1=a64_0x4e0d3c;if(typeof Reflect===_0x4b33d1(0x20f)&&typeof Reflect[_0x4b33d1(0x215)]===_0x4b33d1(0x20c))return Reflect[_0x4b33d1(0x215)](_0x16732f,_0x25d66f);},__param=this&&this[a64_0x4e0d3c(0x212)]||function(_0x32302a,_0x376abf){return function(_0x2f1546,_0x174201){_0x376abf(_0x2f1546,_0x174201,_0x32302a);};},__importDefault=this&&this['__importDefault']||function(_0x48b5ca){const _0x3cd30b=a64_0x4e0d3c;return _0x48b5ca&&_0x48b5ca[_0x3cd30b(0x1ea)]?_0x48b5ca:{'default':_0x48b5ca};};function a64_0x41d8(){const _0x5c310a=['1680854WSLebU','815404XwrhVh','accessTokenExpiresAt','post','../../shared/services/auth-settings.service','__metadata','285BMQuYg','__decorate','use','BITBUCKET_REFRESH_TOKEN_URL','accessToken','data','toString','createRequest','bitbucket','%clientToken%','getOwnPropertyDescriptor','getHeaders','Bearer\x20','replace','5186AucTLj','user','../../../constants','refreshToken','length','design:paramtypes','18HPHaSs','function','now','GitApiService','object','../../shared/services/app-settings.service','request','__param','grant_type=client_credentials','24924GeXnpy','metadata','update','12751120CDuhNZ','Service','then','787960jeqTVB','Inject','authSettings','MAX_REQUEST_PER_HOUR','apiRequest','constructor','apply','(((.+)+)+)+$','defineProperty','default','3YBORee','isLoggedIn','AuthSettingsService','__esModule','AppSettingsService','checkAccessToken','decorate','530462jaqxzY','Authorization','axios'];a64_0x41d8=function(){return _0x5c310a;};return a64_0x41d8();}Object[a64_0x4e0d3c(0x1e5)](exports,a64_0x4e0d3c(0x1ea),{'value':!![]}),exports['BitbucketApiService']=void 0x0;const constants_1=require(a64_0x4e0d3c(0x207)),app_settings_service_1=require(a64_0x4e0d3c(0x210)),auth_settings_service_1=require(a64_0x4e0d3c(0x1f5)),axios_1=__importDefault(require(a64_0x4e0d3c(0x1f0))),typedi_1=require('typedi'),git_api_service_1=require('./git-api.service');let BitbucketApiService=class BitbucketApiService extends git_api_service_1[a64_0x4e0d3c(0x20e)]{constructor(_0x187467,_0x55b734){const _0x164929=a64_0x4e0d3c;super(_0x187467),this['authSettings']=_0x55b734,this['accessTokenExpiresAt']=-0x1,this[_0x164929(0x21d)]=0x3e8,this[_0x164929(0x211)]=this[_0x164929(0x1fe)]();}get[a64_0x4e0d3c(0x21e)](){return this['request'];}[a64_0x4e0d3c(0x1fe)](_0x3e15b3){const _0x4c1404=a64_0x4e0d3c,_0x41d181=super['createRequest'](_0x3e15b3);return _0x41d181['interceptors'][_0x4c1404(0x211)][_0x4c1404(0x1f9)](async _0x7a6916=>{const _0x2bb025=_0x4c1404;return await this[_0x2bb025(0x1ec)](),_0x7a6916['headers'][_0x2bb025(0x1ef)]=_0x2bb025(0x203)+this[_0x2bb025(0x1fb)],_0x7a6916;}),_0x41d181;}async[a64_0x4e0d3c(0x1ec)](){const _0x5bc6cf=a64_0x4e0d3c;if(this['accessToken']&&Date[_0x5bc6cf(0x20d)]()<this[_0x5bc6cf(0x1f3)])return;await this[_0x5bc6cf(0x208)]();}async[a64_0x4e0d3c(0x208)](){const _0x2e4250=a64_0x4e0d3c,{clientToken:_0x5822f5}=this['authSettings']['bitbucket'],_0x568e77=await axios_1[_0x2e4250(0x1e6)][_0x2e4250(0x1f4)](constants_1[_0x2e4250(0x1fa)][_0x2e4250(0x204)](_0x2e4250(0x200),_0x5822f5),_0x2e4250(0x213))[_0x2e4250(0x219)](_0x4ec31d=>_0x4ec31d[_0x2e4250(0x1fc)]),{expires_in:_0x2942be,access_token:_0x204b24}=_0x568e77;this[_0x2e4250(0x21c)][_0x2e4250(0x216)]({'bitbucket':{...this[_0x2e4250(0x21c)][_0x2e4250(0x1ff)],'token':_0x204b24}}),this['accessTokenExpiresAt']=Date['now']()+_0x2942be*0x3e8,this[_0x2e4250(0x1fb)]=_0x204b24;}[a64_0x4e0d3c(0x202)](){return{};}['getCurrentUser'](){const _0x4761e0=a64_0x4e0d3c;return this[_0x4761e0(0x211)]['get'](_0x4761e0(0x206));}async[a64_0x4e0d3c(0x1e8)](){return await this['getCurrentUser'](),!![];}};BitbucketApiService=__decorate([(0x0,typedi_1[a64_0x4e0d3c(0x218)])(),__param(0x0,(0x0,typedi_1[a64_0x4e0d3c(0x21b)])()),__metadata(a64_0x4e0d3c(0x20a),[app_settings_service_1[a64_0x4e0d3c(0x1eb)],auth_settings_service_1[a64_0x4e0d3c(0x1e9)]])],BitbucketApiService),exports['BitbucketApiService']=BitbucketApiService;