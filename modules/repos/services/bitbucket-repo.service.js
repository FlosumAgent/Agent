const a91_0xac17=['./git-repo.service','../repo.class','../../internal/git.internal','/repositories/','decorate','__esModule','Git','getOwnPropertyDescriptor','411765GlSJbQ','23VmKDJC','apiRequest','request','__param','typedi','project','bitbucket','fromBitbucket','autoInit','NotFoundError','10884AbUWDu','getOne','1172297BFBRvr','toLowerCase','defineProperty','createEmptyBranch','metadata','627710lBJQLw','delete','GitRepoService','function','workspace','test','apply','constructor','defaultBranch','BitbucketApiService','apiBody','create','ERR_BITBUCKET_MISSING_PROJECT','__decorate','post','name','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','968732aykVqG','../../shared/services/auth-settings.service','575245SLJkaH','Service','1267542aCbRgJ','repositories/','get','AuthSettingsService','put','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../../constants/errors','BitbucketRepoService','master','length','../../../core/errors/not-found.error','Inject','../../git-api/services/bitbucket-api.service','Repo','object','__metadata','1oBVIAT'];const a91_0x4dc3cf=a91_0x3a75;(function(_0x20ab69,_0x3eadd6){const _0x59b2e9=a91_0x3a75;while(!![]){try{const _0x37a85e=-parseInt(_0x59b2e9(0x15f))+parseInt(_0x59b2e9(0x18c))+-parseInt(_0x59b2e9(0x17a))+-parseInt(_0x59b2e9(0x161))+parseInt(_0x59b2e9(0x15d))+-parseInt(_0x59b2e9(0x187))*-parseInt(_0x59b2e9(0x171))+parseInt(_0x59b2e9(0x185))*parseInt(_0x59b2e9(0x17b));if(_0x37a85e===_0x3eadd6)break;else _0x20ab69['push'](_0x20ab69['shift']());}catch(_0xc88741){_0x20ab69['push'](_0x20ab69['shift']());}}}(a91_0xac17,0xbaa67));const a91_0x45ad4f=function(){let _0x562cc1=!![];return function(_0x3e5cc0,_0x4921ec){const _0x25f8a7=_0x562cc1?function(){const _0x25ffdb=a91_0x3a75;if(_0x4921ec){const _0x10aedb=_0x4921ec[_0x25ffdb(0x152)](_0x3e5cc0,arguments);return _0x4921ec=null,_0x10aedb;}}:function(){};return _0x562cc1=![],_0x25f8a7;};}(),a91_0x5490ae=a91_0x45ad4f(this,function(){const _0x210054=function(){const _0x11fe74=a91_0x3a75,_0x224934=_0x210054['constructor'](_0x11fe74(0x166))()[_0x11fe74(0x153)](_0x11fe74(0x15c));return!_0x224934[_0x11fe74(0x151)](a91_0x5490ae);};return _0x210054();});a91_0x5490ae();function a91_0x3a75(_0x30aa5f,_0x6bef55){return a91_0x3a75=function(_0x4d9baf,_0x5490ae){_0x4d9baf=_0x4d9baf-0x14e;let _0x45ad4f=a91_0xac17[_0x4d9baf];return _0x45ad4f;},a91_0x3a75(_0x30aa5f,_0x6bef55);}'use strict';var __decorate=this&&this[a91_0x4dc3cf(0x159)]||function(_0x26199c,_0x2cd938,_0x1dc5fd,_0x16df35){const _0x4904f8=a91_0x4dc3cf;var _0x5a39f0=arguments['length'],_0x2709e0=_0x5a39f0<0x3?_0x2cd938:_0x16df35===null?_0x16df35=Object[_0x4904f8(0x179)](_0x2cd938,_0x1dc5fd):_0x16df35,_0x59da21;if(typeof Reflect===_0x4904f8(0x16f)&&typeof Reflect[_0x4904f8(0x176)]==='function')_0x2709e0=Reflect[_0x4904f8(0x176)](_0x26199c,_0x2cd938,_0x1dc5fd,_0x16df35);else{for(var _0x146e51=_0x26199c[_0x4904f8(0x16a)]-0x1;_0x146e51>=0x0;_0x146e51--)if(_0x59da21=_0x26199c[_0x146e51])_0x2709e0=(_0x5a39f0<0x3?_0x59da21(_0x2709e0):_0x5a39f0>0x3?_0x59da21(_0x2cd938,_0x1dc5fd,_0x2709e0):_0x59da21(_0x2cd938,_0x1dc5fd))||_0x2709e0;}return _0x5a39f0>0x3&&_0x2709e0&&Object['defineProperty'](_0x2cd938,_0x1dc5fd,_0x2709e0),_0x2709e0;},__metadata=this&&this[a91_0x4dc3cf(0x170)]||function(_0x43aa8a,_0x5e6ff1){const _0x4f5ce9=a91_0x4dc3cf;if(typeof Reflect===_0x4f5ce9(0x16f)&&typeof Reflect[_0x4f5ce9(0x18b)]===_0x4f5ce9(0x14f))return Reflect[_0x4f5ce9(0x18b)](_0x43aa8a,_0x5e6ff1);},__param=this&&this[a91_0x4dc3cf(0x17e)]||function(_0x28f5cc,_0x30f4e0){return function(_0x487b87,_0x1ac98b){_0x30f4e0(_0x487b87,_0x1ac98b,_0x28f5cc);};};Object[a91_0x4dc3cf(0x189)](exports,a91_0x4dc3cf(0x177),{'value':!![]}),exports[a91_0x4dc3cf(0x168)]=void 0x0;const errors_1=require(a91_0x4dc3cf(0x167)),bad_request_error_1=require('../../../core/errors/bad-request.error'),not_found_error_1=require(a91_0x4dc3cf(0x16b)),bitbucket_api_service_1=require(a91_0x4dc3cf(0x16d)),auth_settings_service_1=require(a91_0x4dc3cf(0x15e)),typedi_1=require(a91_0x4dc3cf(0x17f)),git_internal_1=require(a91_0x4dc3cf(0x174)),repo_class_1=require(a91_0x4dc3cf(0x173)),git_repo_service_1=require(a91_0x4dc3cf(0x172));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a91_0x4dc3cf(0x14e)]{constructor(_0x495973,_0xb2d110){const _0x12eda0=a91_0x4dc3cf;super(_0x495973),this['authSettings']=_0xb2d110,this['request']=_0x495973[_0x12eda0(0x17c)];if(!this[_0x12eda0(0x150)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this['project'])throw new Error(errors_1[_0x12eda0(0x158)]);}get[a91_0x4dc3cf(0x150)](){const _0x298769=a91_0x4dc3cf;return this['authSettings'][_0x298769(0x181)]['workspace'];}get['project'](){const _0x22883f=a91_0x4dc3cf;return this['authSettings'][_0x22883f(0x181)]['project'];}async[a91_0x4dc3cf(0x157)](_0x19710e){const _0xda3286=a91_0x4dc3cf;try{const {name:_0x280c30}=_0x19710e,_0x23dd88={'name':_0x19710e['name'],'is_private':_0x19710e['private'],..._0x19710e[_0xda3286(0x156)]||{},'project':{'key':this[_0xda3286(0x180)]}},_0x4c5645=await this[_0xda3286(0x17d)][_0xda3286(0x15a)](_0xda3286(0x175)+this['workspace']+'/'+_0x280c30[_0xda3286(0x188)](),_0x23dd88),_0x4532b6=repo_class_1['Repo']['fromBitbucket'](_0x4c5645);return _0x19710e[_0xda3286(0x183)]&&await git_internal_1[_0xda3286(0x178)][_0xda3286(0x18a)](_0x4532b6,_0x19710e[_0xda3286(0x154)]||_0xda3286(0x169)),this[_0xda3286(0x186)](_0x4532b6[_0xda3286(0x15b)]);}catch(_0x447450){throw new bad_request_error_1['BadRequestError'](_0x447450);}}async['getOne'](_0x3b7538){const _0x4b52ab=a91_0x4dc3cf;try{const _0x31be05=await this[_0x4b52ab(0x17d)][_0x4b52ab(0x163)](_0x4b52ab(0x162)+this['workspace']+'/'+_0x3b7538[_0x4b52ab(0x188)]());return repo_class_1[_0x4b52ab(0x16e)][_0x4b52ab(0x182)](_0x31be05);}catch(_0x150aa1){throw new not_found_error_1[(_0x4b52ab(0x184))](_0x150aa1);}}async['update'](_0x9004a3,_0x5056f8){const _0x595882=a91_0x4dc3cf;await this[_0x595882(0x186)](_0x9004a3);try{const _0xc6d216=await this['request'][_0x595882(0x165)]('repositories/'+this[_0x595882(0x150)]+'/'+_0x9004a3[_0x595882(0x188)](),_0x5056f8);return repo_class_1[_0x595882(0x16e)]['fromBitbucket'](_0xc6d216);}catch(_0x4ab736){throw new not_found_error_1[(_0x595882(0x184))](_0x4ab736);}}async[a91_0x4dc3cf(0x18d)](_0x1383fd){const _0x1767e5=a91_0x4dc3cf;try{await this[_0x1767e5(0x17d)][_0x1767e5(0x18d)](_0x1767e5(0x162)+this[_0x1767e5(0x150)]+'/'+_0x1383fd[_0x1767e5(0x188)]());}catch(_0x7f48e1){throw new bad_request_error_1['BadRequestError'](_0x7f48e1);}}};BitbucketRepoService=__decorate([typedi_1[a91_0x4dc3cf(0x160)](),__param(0x0,typedi_1[a91_0x4dc3cf(0x16c)]()),__metadata('design:paramtypes',[bitbucket_api_service_1[a91_0x4dc3cf(0x155)],auth_settings_service_1[a91_0x4dc3cf(0x164)]])],BitbucketRepoService),exports[a91_0x4dc3cf(0x168)]=BitbucketRepoService;