const a92_0x31e355=a92_0x43ba;(function(_0x282f1d,_0x437f6b){const _0x18f31f=a92_0x43ba,_0x504b10=_0x282f1d();while(!![]){try{const _0x167fe5=-parseInt(_0x18f31f(0xb6))/0x1+-parseInt(_0x18f31f(0x9e))/0x2+-parseInt(_0x18f31f(0xbb))/0x3+-parseInt(_0x18f31f(0xa5))/0x4*(parseInt(_0x18f31f(0x99))/0x5)+-parseInt(_0x18f31f(0x9a))/0x6+parseInt(_0x18f31f(0xaa))/0x7+parseInt(_0x18f31f(0x87))/0x8;if(_0x167fe5===_0x437f6b)break;else _0x504b10['push'](_0x504b10['shift']());}catch(_0x507c33){_0x504b10['push'](_0x504b10['shift']());}}}(a92_0x70f7,0x3969d));const a92_0x173fee=function(){let _0x37b2aa=!![];return function(_0x1dd5d2,_0x35689e){const _0x4f0955=_0x37b2aa?function(){const _0x64d6e6=a92_0x43ba;if(_0x35689e){const _0x19a7dd=_0x35689e[_0x64d6e6(0xb9)](_0x1dd5d2,arguments);return _0x35689e=null,_0x19a7dd;}}:function(){};return _0x37b2aa=![],_0x4f0955;};}(),a92_0x1aeec6=a92_0x173fee(this,function(){const _0x2eab54=a92_0x43ba;return a92_0x1aeec6[_0x2eab54(0xb7)]()['search']('(((.+)+)+)+$')[_0x2eab54(0xb7)]()[_0x2eab54(0xbe)](a92_0x1aeec6)['search'](_0x2eab54(0xa6));});function a92_0x70f7(){const _0x58297d=['/repositories/','4wwotCz','(((.+)+)+)+$','decorate','../../../core/errors/bad-request.error','apiRequest','1948583bbSLpI','NotFoundError','apiBody','../../../constants/errors','authSettings','__param','../../../core/errors/not-found.error','../../git-api/services/bitbucket-api.service','Git','BitbucketApiService','fromBitbucket','post','358135zxRATI','toString','create','apply','update','568791pzcwRf','request','object','constructor','private','7712248GpLCot','BadRequestError','../repo.class','./git-repo.service','length','delete','../../internal/git.internal','metadata','workspace','project','getOne','toLowerCase','ERR_BITBUCKET_MISSING_WORKSPACE','Service','name','__decorate','GitRepoService','BitbucketRepoService','1105415qAcOIW','1344462jHVzBh','bitbucket','AuthSettingsService','repositories/','28686LrnhKk','createEmptyBranch','design:paramtypes','function','defineProperty','__esModule'];a92_0x70f7=function(){return _0x58297d;};return a92_0x70f7();}a92_0x1aeec6();'use strict';var __decorate=this&&this[a92_0x31e355(0x96)]||function(_0x1f714a,_0x39a82c,_0x594955,_0x1a681d){const _0xc6e6e7=a92_0x31e355;var _0x4a9a7a=arguments[_0xc6e6e7(0x8b)],_0x463d96=_0x4a9a7a<0x3?_0x39a82c:_0x1a681d===null?_0x1a681d=Object['getOwnPropertyDescriptor'](_0x39a82c,_0x594955):_0x1a681d,_0x2e18ef;if(typeof Reflect===_0xc6e6e7(0xbd)&&typeof Reflect[_0xc6e6e7(0xa7)]===_0xc6e6e7(0xa1))_0x463d96=Reflect[_0xc6e6e7(0xa7)](_0x1f714a,_0x39a82c,_0x594955,_0x1a681d);else{for(var _0x6ac141=_0x1f714a['length']-0x1;_0x6ac141>=0x0;_0x6ac141--)if(_0x2e18ef=_0x1f714a[_0x6ac141])_0x463d96=(_0x4a9a7a<0x3?_0x2e18ef(_0x463d96):_0x4a9a7a>0x3?_0x2e18ef(_0x39a82c,_0x594955,_0x463d96):_0x2e18ef(_0x39a82c,_0x594955))||_0x463d96;}return _0x4a9a7a>0x3&&_0x463d96&&Object[_0xc6e6e7(0xa2)](_0x39a82c,_0x594955,_0x463d96),_0x463d96;},__metadata=this&&this['__metadata']||function(_0x1378b5,_0x4c655f){const _0x1376cf=a92_0x31e355;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x1376cf(0xa1))return Reflect[_0x1376cf(0x8e)](_0x1378b5,_0x4c655f);},__param=this&&this[a92_0x31e355(0xaf)]||function(_0x2d4b7e,_0x5c84f0){return function(_0x1b6332,_0x2c4135){_0x5c84f0(_0x1b6332,_0x2c4135,_0x2d4b7e);};};function a92_0x43ba(_0x240695,_0x80c47f){const _0x4ce88b=a92_0x70f7();return a92_0x43ba=function(_0x1aeec6,_0x173fee){_0x1aeec6=_0x1aeec6-0x86;let _0x70f70=_0x4ce88b[_0x1aeec6];return _0x70f70;},a92_0x43ba(_0x240695,_0x80c47f);}Object[a92_0x31e355(0xa2)](exports,a92_0x31e355(0xa3),{'value':!![]}),exports[a92_0x31e355(0x98)]=void 0x0;const errors_1=require(a92_0x31e355(0xad)),bad_request_error_1=require(a92_0x31e355(0xa8)),not_found_error_1=require(a92_0x31e355(0xb0)),bitbucket_api_service_1=require(a92_0x31e355(0xb1)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),typedi_1=require('typedi'),git_internal_1=require(a92_0x31e355(0x8d)),repo_class_1=require(a92_0x31e355(0x89)),git_repo_service_1=require(a92_0x31e355(0x8a));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a92_0x31e355(0x97)]{constructor(_0x5e93f2,_0x256673){const _0x132794=a92_0x31e355;super(_0x5e93f2),this[_0x132794(0xae)]=_0x256673,this[_0x132794(0xbc)]=_0x5e93f2[_0x132794(0xa9)];if(!this[_0x132794(0x8f)])throw new Error(errors_1[_0x132794(0x93)]);if(!this[_0x132794(0x90)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}get[a92_0x31e355(0x8f)](){const _0xa4d3d=a92_0x31e355;return this['authSettings'][_0xa4d3d(0x9b)]['workspace'];}get['project'](){const _0x1419f8=a92_0x31e355;return this[_0x1419f8(0xae)]['bitbucket'][_0x1419f8(0x90)];}async[a92_0x31e355(0xb8)](_0x38c48c){const _0x2d04bc=a92_0x31e355;try{const {name:_0x5e2de0}=_0x38c48c,_0x24965e={'name':_0x38c48c[_0x2d04bc(0x95)],'is_private':_0x38c48c[_0x2d04bc(0x86)],..._0x38c48c[_0x2d04bc(0xac)]||{},'project':{'key':this[_0x2d04bc(0x90)]}},_0x5ae2ce=await this[_0x2d04bc(0xbc)][_0x2d04bc(0xb5)](_0x2d04bc(0xa4)+this[_0x2d04bc(0x8f)]+'/'+_0x5e2de0[_0x2d04bc(0x92)](),_0x24965e),_0x91ce84=repo_class_1['Repo'][_0x2d04bc(0xb4)](_0x5ae2ce);return _0x38c48c['autoInit']&&await git_internal_1[_0x2d04bc(0xb2)][_0x2d04bc(0x9f)](_0x91ce84,_0x38c48c['defaultBranch']||'master'),this[_0x2d04bc(0x91)](_0x91ce84[_0x2d04bc(0x95)]);}catch(_0x95295d){throw new bad_request_error_1[(_0x2d04bc(0x88))](_0x95295d);}}async[a92_0x31e355(0x91)](_0x17fb50){const _0x54cb9d=a92_0x31e355;try{const _0x5d1670=await this[_0x54cb9d(0xbc)]['get'](_0x54cb9d(0x9d)+this[_0x54cb9d(0x8f)]+'/'+_0x17fb50[_0x54cb9d(0x92)]());return repo_class_1['Repo']['fromBitbucket'](_0x5d1670);}catch(_0x1f374f){throw new not_found_error_1[(_0x54cb9d(0xab))](_0x1f374f);}}async[a92_0x31e355(0xba)](_0x5c41af,_0x1c89d4){const _0x334163=a92_0x31e355;await this[_0x334163(0x91)](_0x5c41af);try{const _0x5a1a64=await this[_0x334163(0xbc)]['put'](_0x334163(0x9d)+this['workspace']+'/'+_0x5c41af[_0x334163(0x92)](),_0x1c89d4);return repo_class_1['Repo']['fromBitbucket'](_0x5a1a64);}catch(_0x3f25fa){throw new not_found_error_1[(_0x334163(0xab))](_0x3f25fa);}}async[a92_0x31e355(0x8c)](_0x53ca17){const _0x9d3a75=a92_0x31e355;try{await this[_0x9d3a75(0xbc)][_0x9d3a75(0x8c)](_0x9d3a75(0x9d)+this[_0x9d3a75(0x8f)]+'/'+_0x53ca17[_0x9d3a75(0x92)]());}catch(_0x16fb53){throw new bad_request_error_1[(_0x9d3a75(0x88))](_0x16fb53);}}};BitbucketRepoService=__decorate([(0x0,typedi_1[a92_0x31e355(0x94)])(),__param(0x0,(0x0,typedi_1['Inject'])()),__metadata(a92_0x31e355(0xa0),[bitbucket_api_service_1[a92_0x31e355(0xb3)],auth_settings_service_1[a92_0x31e355(0x9c)]])],BitbucketRepoService),exports[a92_0x31e355(0x98)]=BitbucketRepoService;