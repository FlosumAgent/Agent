const a91_0x268a=['test','__metadata','Repo','BitbucketRepoService','../repo.class','../../../core/errors/not-found.error','design:paramtypes','106711fCyoTB','BadRequestError','../../../core/errors/bad-request.error','autoInit','typedi','update','name','../../git-api/services/bitbucket-api.service','return\x20/\x22\x20+\x20this\x20+\x20\x22/','master','workspace','function','getOwnPropertyDescriptor','AuthSettingsService','/repositories/','getOne','../../internal/git.internal','Inject','authSettings','__param','decorate','apiBody','154vQCmkm','170803gnJzdM','305390OVboxN','createEmptyBranch','object','416019wyQaZi','repositories/','Service','delete','fromBitbucket','__esModule','bitbucket','2163bLjFHr','request','363791FsvXPg','post','toLowerCase','metadata','constructor','__decorate','project','defineProperty','NotFoundError','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','GitRepoService','415947dvRWyO','ERR_BITBUCKET_MISSING_PROJECT','put'];const a91_0x64dd07=a91_0x2f98;(function(_0x2f1824,_0x6b48e6){const _0x40f239=a91_0x2f98;while(!![]){try{const _0x10e931=parseInt(_0x40f239(0x189))+-parseInt(_0x40f239(0x18c))+-parseInt(_0x40f239(0x167))+parseInt(_0x40f239(0x187))*parseInt(_0x40f239(0x193))+-parseInt(_0x40f239(0x171))+parseInt(_0x40f239(0x195))+parseInt(_0x40f239(0x188));if(_0x10e931===_0x6b48e6)break;else _0x2f1824['push'](_0x2f1824['shift']());}catch(_0x583e06){_0x2f1824['push'](_0x2f1824['shift']());}}}(a91_0x268a,0x393a9));const a91_0x196dfb=function(){let _0x22a908=!![];return function(_0x4c1fad,_0x2f6a35){const _0x2f32bd=_0x22a908?function(){if(_0x2f6a35){const _0x88618f=_0x2f6a35['apply'](_0x4c1fad,arguments);return _0x2f6a35=null,_0x88618f;}}:function(){};return _0x22a908=![],_0x2f32bd;};}(),a91_0x456807=a91_0x196dfb(this,function(){const _0x57c90a=function(){const _0x236f7c=a91_0x2f98,_0x15437d=_0x57c90a[_0x236f7c(0x199)](_0x236f7c(0x179))()[_0x236f7c(0x199)](_0x236f7c(0x165));return!_0x15437d[_0x236f7c(0x16a)](a91_0x456807);};return _0x57c90a();});a91_0x456807();'use strict';var __decorate=this&&this[a91_0x64dd07(0x19a)]||function(_0x374615,_0x48a14e,_0x2f6818,_0x13a07d){const _0x293011=a91_0x64dd07;var _0x3b65bf=arguments['length'],_0x5e7336=_0x3b65bf<0x3?_0x48a14e:_0x13a07d===null?_0x13a07d=Object[_0x293011(0x17d)](_0x48a14e,_0x2f6818):_0x13a07d,_0x20f1c7;if(typeof Reflect===_0x293011(0x18b)&&typeof Reflect['decorate']===_0x293011(0x17c))_0x5e7336=Reflect[_0x293011(0x185)](_0x374615,_0x48a14e,_0x2f6818,_0x13a07d);else{for(var _0x216064=_0x374615['length']-0x1;_0x216064>=0x0;_0x216064--)if(_0x20f1c7=_0x374615[_0x216064])_0x5e7336=(_0x3b65bf<0x3?_0x20f1c7(_0x5e7336):_0x3b65bf>0x3?_0x20f1c7(_0x48a14e,_0x2f6818,_0x5e7336):_0x20f1c7(_0x48a14e,_0x2f6818))||_0x5e7336;}return _0x3b65bf>0x3&&_0x5e7336&&Object[_0x293011(0x163)](_0x48a14e,_0x2f6818,_0x5e7336),_0x5e7336;},__metadata=this&&this[a91_0x64dd07(0x16b)]||function(_0x47f007,_0x91d567){const _0x5b1c53=a91_0x64dd07;if(typeof Reflect===_0x5b1c53(0x18b)&&typeof Reflect[_0x5b1c53(0x198)]===_0x5b1c53(0x17c))return Reflect[_0x5b1c53(0x198)](_0x47f007,_0x91d567);},__param=this&&this[a91_0x64dd07(0x184)]||function(_0x24e6a1,_0x271e87){return function(_0x515775,_0x478808){_0x271e87(_0x515775,_0x478808,_0x24e6a1);};};Object[a91_0x64dd07(0x163)](exports,a91_0x64dd07(0x191),{'value':!![]}),exports[a91_0x64dd07(0x16d)]=void 0x0;const errors_1=require('../../../constants/errors'),bad_request_error_1=require(a91_0x64dd07(0x173)),not_found_error_1=require(a91_0x64dd07(0x16f)),bitbucket_api_service_1=require(a91_0x64dd07(0x178)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),typedi_1=require(a91_0x64dd07(0x175)),git_internal_1=require(a91_0x64dd07(0x181)),repo_class_1=require(a91_0x64dd07(0x16e)),git_repo_service_1=require('./git-repo.service');let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a91_0x64dd07(0x166)]{constructor(_0x569668,_0x2905e7){const _0x57fbbf=a91_0x64dd07;super(_0x569668),this[_0x57fbbf(0x183)]=_0x2905e7,this[_0x57fbbf(0x194)]=_0x569668['apiRequest'];if(!this[_0x57fbbf(0x17b)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x57fbbf(0x162)])throw new Error(errors_1[_0x57fbbf(0x168)]);}get[a91_0x64dd07(0x17b)](){const _0x2c332e=a91_0x64dd07;return this[_0x2c332e(0x183)]['bitbucket'][_0x2c332e(0x17b)];}get[a91_0x64dd07(0x162)](){const _0x363345=a91_0x64dd07;return this[_0x363345(0x183)][_0x363345(0x192)]['project'];}async['create'](_0x3a42f3){const _0x38b9a7=a91_0x64dd07;try{const {name:_0x2b796e}=_0x3a42f3,_0x323380={'name':_0x3a42f3[_0x38b9a7(0x177)],'is_private':_0x3a42f3['private'],..._0x3a42f3[_0x38b9a7(0x186)]||{},'project':{'key':this[_0x38b9a7(0x162)]}},_0x5d1464=await this[_0x38b9a7(0x194)][_0x38b9a7(0x196)](_0x38b9a7(0x17f)+this['workspace']+'/'+_0x2b796e[_0x38b9a7(0x197)](),_0x323380),_0x5b7622=repo_class_1['Repo']['fromBitbucket'](_0x5d1464);return _0x3a42f3[_0x38b9a7(0x174)]&&await git_internal_1['Git'][_0x38b9a7(0x18a)](_0x5b7622,_0x3a42f3['defaultBranch']||_0x38b9a7(0x17a)),this[_0x38b9a7(0x180)](_0x5b7622[_0x38b9a7(0x177)]);}catch(_0x5eab62){throw new bad_request_error_1[(_0x38b9a7(0x172))](_0x5eab62);}}async[a91_0x64dd07(0x180)](_0x3e2b33){const _0x559d5e=a91_0x64dd07;try{const _0x2d8933=await this[_0x559d5e(0x194)]['get'](_0x559d5e(0x18d)+this['workspace']+'/'+_0x3e2b33[_0x559d5e(0x197)]());return repo_class_1[_0x559d5e(0x16c)][_0x559d5e(0x190)](_0x2d8933);}catch(_0x242127){throw new not_found_error_1[(_0x559d5e(0x164))](_0x242127);}}async[a91_0x64dd07(0x176)](_0x3258ac,_0x580ef8){const _0x44b2f7=a91_0x64dd07;await this[_0x44b2f7(0x180)](_0x3258ac);try{const _0x118de4=await this[_0x44b2f7(0x194)][_0x44b2f7(0x169)](_0x44b2f7(0x18d)+this[_0x44b2f7(0x17b)]+'/'+_0x3258ac[_0x44b2f7(0x197)](),_0x580ef8);return repo_class_1['Repo'][_0x44b2f7(0x190)](_0x118de4);}catch(_0x5b26a3){throw new not_found_error_1[(_0x44b2f7(0x164))](_0x5b26a3);}}async[a91_0x64dd07(0x18f)](_0x48385e){const _0xb4a67c=a91_0x64dd07;try{await this[_0xb4a67c(0x194)][_0xb4a67c(0x18f)](_0xb4a67c(0x18d)+this[_0xb4a67c(0x17b)]+'/'+_0x48385e['toLowerCase']());}catch(_0x424ac5){throw new bad_request_error_1[(_0xb4a67c(0x172))](_0x424ac5);}}};function a91_0x2f98(_0x5cc7a9,_0x10dd5a){return a91_0x2f98=function(_0x3553ac,_0x456807){_0x3553ac=_0x3553ac-0x162;let _0x196dfb=a91_0x268a[_0x3553ac];return _0x196dfb;},a91_0x2f98(_0x5cc7a9,_0x10dd5a);}BitbucketRepoService=__decorate([typedi_1[a91_0x64dd07(0x18e)](),__param(0x0,typedi_1[a91_0x64dd07(0x182)]()),__metadata(a91_0x64dd07(0x170),[bitbucket_api_service_1['BitbucketApiService'],auth_settings_service_1[a91_0x64dd07(0x17e)]])],BitbucketRepoService),exports[a91_0x64dd07(0x16d)]=BitbucketRepoService;