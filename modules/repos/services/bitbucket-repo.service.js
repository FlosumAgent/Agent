const a92_0x2d5b=['2ISnTNe','557731WvOMTp','apiBody','89402GqizAk','../repo.class','__decorate','AuthSettingsService','GitRepoService','workspace','create','constructor','authSettings','../../../core/errors/not-found.error','./git-repo.service','__metadata','project','ERR_BITBUCKET_MISSING_WORKSPACE','getOwnPropertyDescriptor','apiRequest','metadata','BitbucketApiService','return\x20/\x22\x20+\x20this\x20+\x20\x22/','update','length','fromBitbucket','getOne','defineProperty','delete','../../shared/services/auth-settings.service','bitbucket','Inject','1727989WWBXFb','toLowerCase','__esModule','private','BitbucketRepoService','object','BadRequestError','request','/repositories/','name','test','562492qIRAEf','function','../../internal/git.internal','1415219bTBAnq','2EwcUaV','201487lwdRwZ','405528euZeRk','1gUTdvj','design:paramtypes','apply','Repo','repositories/','decorate','../../../core/errors/bad-request.error','post'];const a92_0x537e1c=a92_0xf59e;(function(_0x336e27,_0x3967a3){const _0x2b60ff=a92_0xf59e;while(!![]){try{const _0x52ddae=-parseInt(_0x2b60ff(0x202))+-parseInt(_0x2b60ff(0x1d9))+-parseInt(_0x2b60ff(0x205))+parseInt(_0x2b60ff(0x1d8))*-parseInt(_0x2b60ff(0x207))+-parseInt(_0x2b60ff(0x209))*parseInt(_0x2b60ff(0x1db))+parseInt(_0x2b60ff(0x208))+-parseInt(_0x2b60ff(0x206))*-parseInt(_0x2b60ff(0x1f7));if(_0x52ddae===_0x3967a3)break;else _0x336e27['push'](_0x336e27['shift']());}catch(_0x5e62fb){_0x336e27['push'](_0x336e27['shift']());}}}(a92_0x2d5b,0xcb898));function a92_0xf59e(_0x36cf60,_0xdd16ab){return a92_0xf59e=function(_0x5e2e3e,_0x18ced9){_0x5e2e3e=_0x5e2e3e-0x1d8;let _0x136d1a=a92_0x2d5b[_0x5e2e3e];return _0x136d1a;},a92_0xf59e(_0x36cf60,_0xdd16ab);}const a92_0x136d1a=function(){let _0xca19b8=!![];return function(_0x4cb775,_0x2f52d5){const _0x29e078=_0xca19b8?function(){const _0x4de04f=a92_0xf59e;if(_0x2f52d5){const _0x4e6eb2=_0x2f52d5[_0x4de04f(0x20b)](_0x4cb775,arguments);return _0x2f52d5=null,_0x4e6eb2;}}:function(){};return _0xca19b8=![],_0x29e078;};}(),a92_0x18ced9=a92_0x136d1a(this,function(){const _0x16d430=function(){const _0x48954f=a92_0xf59e,_0x29d832=_0x16d430[_0x48954f(0x1e2)](_0x48954f(0x1ed))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x29d832[_0x48954f(0x201)](a92_0x18ced9);};return _0x16d430();});a92_0x18ced9();'use strict';var __decorate=this&&this[a92_0x537e1c(0x1dd)]||function(_0x3e4e3f,_0x554cd1,_0x5cbdf6,_0x48c9d0){const _0x3d0148=a92_0x537e1c;var _0x18e155=arguments[_0x3d0148(0x1ef)],_0x28beed=_0x18e155<0x3?_0x554cd1:_0x48c9d0===null?_0x48c9d0=Object[_0x3d0148(0x1e9)](_0x554cd1,_0x5cbdf6):_0x48c9d0,_0x4790c8;if(typeof Reflect===_0x3d0148(0x1fc)&&typeof Reflect[_0x3d0148(0x20e)]==='function')_0x28beed=Reflect['decorate'](_0x3e4e3f,_0x554cd1,_0x5cbdf6,_0x48c9d0);else{for(var _0x5ab889=_0x3e4e3f[_0x3d0148(0x1ef)]-0x1;_0x5ab889>=0x0;_0x5ab889--)if(_0x4790c8=_0x3e4e3f[_0x5ab889])_0x28beed=(_0x18e155<0x3?_0x4790c8(_0x28beed):_0x18e155>0x3?_0x4790c8(_0x554cd1,_0x5cbdf6,_0x28beed):_0x4790c8(_0x554cd1,_0x5cbdf6))||_0x28beed;}return _0x18e155>0x3&&_0x28beed&&Object['defineProperty'](_0x554cd1,_0x5cbdf6,_0x28beed),_0x28beed;},__metadata=this&&this[a92_0x537e1c(0x1e6)]||function(_0x35060f,_0x5861b6){const _0x338e5c=a92_0x537e1c;if(typeof Reflect===_0x338e5c(0x1fc)&&typeof Reflect['metadata']===_0x338e5c(0x203))return Reflect[_0x338e5c(0x1eb)](_0x35060f,_0x5861b6);},__param=this&&this['__param']||function(_0x26838b,_0x9167e5){return function(_0x50d5d9,_0x34dd17){_0x9167e5(_0x50d5d9,_0x34dd17,_0x26838b);};};Object[a92_0x537e1c(0x1f2)](exports,a92_0x537e1c(0x1f9),{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require('../../../constants/errors'),bad_request_error_1=require(a92_0x537e1c(0x20f)),not_found_error_1=require(a92_0x537e1c(0x1e4)),bitbucket_api_service_1=require('../../git-api/services/bitbucket-api.service'),auth_settings_service_1=require(a92_0x537e1c(0x1f4)),typedi_1=require('typedi'),git_internal_1=require(a92_0x537e1c(0x204)),repo_class_1=require(a92_0x537e1c(0x1dc)),git_repo_service_1=require(a92_0x537e1c(0x1e5));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a92_0x537e1c(0x1df)]{constructor(_0x44abcc,_0x41a03c){const _0x1fb27d=a92_0x537e1c;super(_0x44abcc),this[_0x1fb27d(0x1e3)]=_0x41a03c,this[_0x1fb27d(0x1fe)]=_0x44abcc[_0x1fb27d(0x1ea)];if(!this['workspace'])throw new Error(errors_1[_0x1fb27d(0x1e8)]);if(!this[_0x1fb27d(0x1e7)])throw new Error(errors_1['ERR_BITBUCKET_MISSING_PROJECT']);}get[a92_0x537e1c(0x1e0)](){const _0x404ccc=a92_0x537e1c;return this[_0x404ccc(0x1e3)][_0x404ccc(0x1f5)][_0x404ccc(0x1e0)];}get[a92_0x537e1c(0x1e7)](){const _0x84a416=a92_0x537e1c;return this[_0x84a416(0x1e3)]['bitbucket'][_0x84a416(0x1e7)];}async[a92_0x537e1c(0x1e1)](_0xbf30d8){const _0x544f15=a92_0x537e1c;try{const {name:_0x3641dc}=_0xbf30d8,_0x12d5ee={'name':_0xbf30d8['name'],'is_private':_0xbf30d8[_0x544f15(0x1fa)],..._0xbf30d8[_0x544f15(0x1da)]||{},'project':{'key':this[_0x544f15(0x1e7)]}},_0x1b6094=await this[_0x544f15(0x1fe)][_0x544f15(0x210)](_0x544f15(0x1ff)+this[_0x544f15(0x1e0)]+'/'+_0x3641dc['toLowerCase'](),_0x12d5ee),_0x3e6419=repo_class_1[_0x544f15(0x20c)]['fromBitbucket'](_0x1b6094);return _0xbf30d8['autoInit']&&await git_internal_1['Git']['createEmptyBranch'](_0x3e6419,_0xbf30d8['defaultBranch']||'master'),this[_0x544f15(0x1f1)](_0x3e6419[_0x544f15(0x200)]);}catch(_0x29c978){throw new bad_request_error_1['BadRequestError'](_0x29c978);}}async[a92_0x537e1c(0x1f1)](_0x1c1bbc){const _0x5aea3a=a92_0x537e1c;try{const _0x33f35b=await this[_0x5aea3a(0x1fe)]['get'](_0x5aea3a(0x20d)+this['workspace']+'/'+_0x1c1bbc['toLowerCase']());return repo_class_1[_0x5aea3a(0x20c)][_0x5aea3a(0x1f0)](_0x33f35b);}catch(_0x589dd1){throw new not_found_error_1['NotFoundError'](_0x589dd1);}}async[a92_0x537e1c(0x1ee)](_0x17f7c4,_0x529935){const _0x16ae9e=a92_0x537e1c;await this['getOne'](_0x17f7c4);try{const _0x329197=await this[_0x16ae9e(0x1fe)]['put'](_0x16ae9e(0x20d)+this[_0x16ae9e(0x1e0)]+'/'+_0x17f7c4[_0x16ae9e(0x1f8)](),_0x529935);return repo_class_1['Repo'][_0x16ae9e(0x1f0)](_0x329197);}catch(_0x2d94c0){throw new not_found_error_1['NotFoundError'](_0x2d94c0);}}async[a92_0x537e1c(0x1f3)](_0x1b0d0b){const _0x4cf1f4=a92_0x537e1c;try{await this[_0x4cf1f4(0x1fe)][_0x4cf1f4(0x1f3)]('repositories/'+this['workspace']+'/'+_0x1b0d0b[_0x4cf1f4(0x1f8)]());}catch(_0x19d86a){throw new bad_request_error_1[(_0x4cf1f4(0x1fd))](_0x19d86a);}}};BitbucketRepoService=__decorate([typedi_1['Service'](),__param(0x0,typedi_1[a92_0x537e1c(0x1f6)]()),__metadata(a92_0x537e1c(0x20a),[bitbucket_api_service_1[a92_0x537e1c(0x1ec)],auth_settings_service_1[a92_0x537e1c(0x1de)]])],BitbucketRepoService),exports[a92_0x537e1c(0x1fb)]=BitbucketRepoService;