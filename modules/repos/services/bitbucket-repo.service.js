const a93_0x4f11e2=a93_0x591b;(function(_0x3abf9f,_0x42527d){const _0x306f74=a93_0x591b,_0x51f7ee=_0x3abf9f();while(!![]){try{const _0x1dcf0d=-parseInt(_0x306f74(0x11a))/0x1+-parseInt(_0x306f74(0x105))/0x2+-parseInt(_0x306f74(0xf0))/0x3+parseInt(_0x306f74(0x110))/0x4+parseInt(_0x306f74(0xe2))/0x5*(parseInt(_0x306f74(0x100))/0x6)+parseInt(_0x306f74(0xee))/0x7+parseInt(_0x306f74(0xdd))/0x8;if(_0x1dcf0d===_0x42527d)break;else _0x51f7ee['push'](_0x51f7ee['shift']());}catch(_0x53e5f8){_0x51f7ee['push'](_0x51f7ee['shift']());}}}(a93_0x24e7,0xe6346));function a93_0x24e7(){const _0x219e90=['../../../constants/errors','request','3435180ntoDot','master','fromBitbucket','typedi','Repo','1672212bgxkEr','../repo.class','BadRequestError','search','create','Inject','apiBody','./git-repo.service','../../git-api/services/bitbucket-api.service','__param','/repositories/','2482560JFEbiF','constructor','bitbucket','defaultBranch','ERR_BITBUCKET_MISSING_PROJECT','defineProperty','ApiError','__metadata','toString','length','1879146HiPKHC','toLowerCase','Git','private','repositories/','19832568wWpYtM','BitbucketRepoService','get','NotFoundError','apiRequest','5QnrHMX','put','workspace','createEmptyBranch','post','../../../core/errors/not-found.error','ERR_BITBUCKET_MISSING_WORKSPACE','getOne','../../internal/git.internal','GitRepoService','project','getOwnPropertyDescriptor','5872398RTkzcC','delete','2558955NodoQZ','AuthSettingsService','update','autoInit','push','(((.+)+)+)+$','decorate','__esModule','function','object','values','map','next','authSettings'];a93_0x24e7=function(){return _0x219e90;};return a93_0x24e7();}const a93_0x2237cc=function(){let _0x562d7b=!![];return function(_0x275f73,_0x4644d2){const _0x581bdc=_0x562d7b?function(){if(_0x4644d2){const _0x3ce0cc=_0x4644d2['apply'](_0x275f73,arguments);return _0x4644d2=null,_0x3ce0cc;}}:function(){};return _0x562d7b=![],_0x581bdc;};}(),a93_0x268035=a93_0x2237cc(this,function(){const _0xd0a025=a93_0x591b;return a93_0x268035[_0xd0a025(0x118)]()[_0xd0a025(0x108)](_0xd0a025(0xf5))[_0xd0a025(0x118)]()[_0xd0a025(0x111)](a93_0x268035)[_0xd0a025(0x108)]('(((.+)+)+)+$');});a93_0x268035();function a93_0x591b(_0x404cff,_0x2b047b){const _0x222e17=a93_0x24e7();return a93_0x591b=function(_0x268035,_0x2237cc){_0x268035=_0x268035-0xdb;let _0x24e712=_0x222e17[_0x268035];return _0x24e712;},a93_0x591b(_0x404cff,_0x2b047b);}'use strict';var __decorate=this&&this['__decorate']||function(_0x595b0d,_0xda5746,_0x32e716,_0x105b06){const _0x24555c=a93_0x591b;var _0x1900e2=arguments[_0x24555c(0x119)],_0x61b620=_0x1900e2<0x3?_0xda5746:_0x105b06===null?_0x105b06=Object[_0x24555c(0xed)](_0xda5746,_0x32e716):_0x105b06,_0x72a7f8;if(typeof Reflect==='object'&&typeof Reflect[_0x24555c(0xf6)]===_0x24555c(0xf8))_0x61b620=Reflect[_0x24555c(0xf6)](_0x595b0d,_0xda5746,_0x32e716,_0x105b06);else{for(var _0x4f93dd=_0x595b0d[_0x24555c(0x119)]-0x1;_0x4f93dd>=0x0;_0x4f93dd--)if(_0x72a7f8=_0x595b0d[_0x4f93dd])_0x61b620=(_0x1900e2<0x3?_0x72a7f8(_0x61b620):_0x1900e2>0x3?_0x72a7f8(_0xda5746,_0x32e716,_0x61b620):_0x72a7f8(_0xda5746,_0x32e716))||_0x61b620;}return _0x1900e2>0x3&&_0x61b620&&Object['defineProperty'](_0xda5746,_0x32e716,_0x61b620),_0x61b620;},__metadata=this&&this[a93_0x4f11e2(0x117)]||function(_0x12b44d,_0x28d10e){const _0x298ede=a93_0x4f11e2;if(typeof Reflect===_0x298ede(0xf9)&&typeof Reflect['metadata']===_0x298ede(0xf8))return Reflect['metadata'](_0x12b44d,_0x28d10e);},__param=this&&this[a93_0x4f11e2(0x10e)]||function(_0x364797,_0x15520a){return function(_0x5bc61f,_0x2d9bc3){_0x15520a(_0x5bc61f,_0x2d9bc3,_0x364797);};};Object[a93_0x4f11e2(0x115)](exports,a93_0x4f11e2(0xf7),{'value':!![]}),exports[a93_0x4f11e2(0xde)]=void 0x0;const errors_1=require(a93_0x4f11e2(0xfe)),bad_request_error_1=require('../../../core/errors/bad-request.error'),not_found_error_1=require(a93_0x4f11e2(0xe7)),bitbucket_api_service_1=require(a93_0x4f11e2(0x10d)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),typedi_1=require(a93_0x4f11e2(0x103)),api_error_1=require('../../../core/errors/api.error'),git_internal_1=require(a93_0x4f11e2(0xea)),repo_class_1=require(a93_0x4f11e2(0x106)),git_repo_service_1=require(a93_0x4f11e2(0x10c));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a93_0x4f11e2(0xeb)]{constructor(_0x21a09f,_0xecc777){const _0x3714d2=a93_0x4f11e2;super(_0x21a09f),this['authSettings']=_0xecc777,this[_0x3714d2(0xff)]=_0x21a09f[_0x3714d2(0xe1)];if(!this['workspace'])throw new Error(errors_1[_0x3714d2(0xe8)]);if(!this[_0x3714d2(0xec)])throw new Error(errors_1[_0x3714d2(0x114)]);}get['workspace'](){const _0x5bcf6e=a93_0x4f11e2;return this[_0x5bcf6e(0xfd)]['bitbucket']['workspace'];}get[a93_0x4f11e2(0xec)](){const _0x594045=a93_0x4f11e2;return this[_0x594045(0xfd)][_0x594045(0x112)][_0x594045(0xec)];}async[a93_0x4f11e2(0x109)](_0x33c5eb){const _0x550706=a93_0x4f11e2;try{const {name:_0x2e63d0}=_0x33c5eb,_0x3c21da={'name':_0x33c5eb['name'],'is_private':_0x33c5eb[_0x550706(0xdb)],..._0x33c5eb[_0x550706(0x10b)]||{},'project':{'key':this[_0x550706(0xec)]}},_0x3027b5=await this[_0x550706(0xff)][_0x550706(0xe6)](_0x550706(0x10f)+this[_0x550706(0xe4)]+'/'+_0x2e63d0[_0x550706(0x11b)](),_0x3c21da),_0x493b01=repo_class_1[_0x550706(0x104)][_0x550706(0x102)](_0x3027b5);return _0x33c5eb[_0x550706(0xf3)]&&(await git_internal_1[_0x550706(0x11c)][_0x550706(0xe5)](_0x493b01,_0x33c5eb[_0x550706(0x113)]||_0x550706(0x101)),_0x493b01[_0x550706(0x113)]=_0x33c5eb['defaultBranch']||_0x550706(0x101)),_0x493b01;}catch(_0x3c45e6){if(_0x3c45e6 instanceof api_error_1[_0x550706(0x116)])throw _0x3c45e6;throw new bad_request_error_1[(_0x550706(0x107))](_0x3c45e6);}}async['getAll'](){const _0x356914=a93_0x4f11e2;try{const _0x27634c=[];let _0x5390bb;do{_0x5390bb=await this[_0x356914(0xff)][_0x356914(0xdf)](_0x5390bb?_0x5390bb['next']:_0x356914(0xdc)+this['workspace']),_0x27634c[_0x356914(0xf4)](..._0x5390bb[_0x356914(0xfa)]);}while(_0x5390bb[_0x356914(0xfc)]);return _0x27634c[_0x356914(0xfb)](_0x2e8aab=>repo_class_1['Repo'][_0x356914(0x102)](_0x2e8aab));}catch(_0xa92792){if(_0xa92792 instanceof api_error_1['ApiError'])throw _0xa92792;throw new not_found_error_1[(_0x356914(0xe0))](_0xa92792);}}async['getOne'](_0x4d3306){const _0x7014dc=a93_0x4f11e2;try{const _0x4b04e9=await this[_0x7014dc(0xff)][_0x7014dc(0xdf)](_0x7014dc(0xdc)+this[_0x7014dc(0xe4)]+'/'+_0x4d3306['toLowerCase']());return repo_class_1[_0x7014dc(0x104)][_0x7014dc(0x102)](_0x4b04e9);}catch(_0x4ec386){if(_0x4ec386 instanceof api_error_1['ApiError'])throw _0x4ec386;throw new not_found_error_1[(_0x7014dc(0xe0))](_0x4ec386);}}async[a93_0x4f11e2(0xf2)](_0x28682d,_0x4b36ea){const _0x23ce4d=a93_0x4f11e2;await this[_0x23ce4d(0xe9)](_0x28682d);try{const _0x1ca32f=await this[_0x23ce4d(0xff)][_0x23ce4d(0xe3)](_0x23ce4d(0xdc)+this[_0x23ce4d(0xe4)]+'/'+_0x28682d[_0x23ce4d(0x11b)](),_0x4b36ea);return repo_class_1[_0x23ce4d(0x104)][_0x23ce4d(0x102)](_0x1ca32f);}catch(_0x18a6c6){if(_0x18a6c6 instanceof api_error_1['ApiError'])throw _0x18a6c6;throw new not_found_error_1[(_0x23ce4d(0xe0))](_0x18a6c6);}}async['delete'](_0x33ebdb){const _0x12d5ee=a93_0x4f11e2;try{await this[_0x12d5ee(0xff)][_0x12d5ee(0xef)](_0x12d5ee(0xdc)+this[_0x12d5ee(0xe4)]+'/'+_0x33ebdb[_0x12d5ee(0x11b)]());}catch(_0x40cc4a){if(_0x40cc4a instanceof api_error_1[_0x12d5ee(0x116)])throw _0x40cc4a;throw new bad_request_error_1['BadRequestError'](_0x40cc4a);}}};BitbucketRepoService=__decorate([(0x0,typedi_1['Service'])(),__param(0x0,(0x0,typedi_1[a93_0x4f11e2(0x10a)])()),__metadata('design:paramtypes',[bitbucket_api_service_1['BitbucketApiService'],auth_settings_service_1[a93_0x4f11e2(0xf1)]])],BitbucketRepoService),exports[a93_0x4f11e2(0xde)]=BitbucketRepoService;