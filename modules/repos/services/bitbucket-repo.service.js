const a91_0x35c4=['207465JCNkwE','length','metadata','6694vFVYDO','./git-repo.service','post','../repo.class','__esModule','../../../core/errors/bad-request.error','repositories/','function','../../internal/git.internal','return\x20/\x22\x20+\x20this\x20+\x20\x22/','delete','200477qpivvr','private','project','workspace','BadRequestError','object','apiRequest','../../../core/errors/not-found.error','autoInit','toLowerCase','41787YrRnZw','../../../constants/errors','design:paramtypes','bitbucket','NotFoundError','GitRepoService','createEmptyBranch','name','__param','212193hnymnX','put','ERR_BITBUCKET_MISSING_PROJECT','request','BitbucketRepoService','__metadata','../../shared/services/auth-settings.service','Repo','apply','authSettings','test','53073yuTkuH','master','Service','fromBitbucket','update','/repositories/','defineProperty','AuthSettingsService','getOne','Git','defaultBranch','5gZzdaa','constructor','decorate','../../git-api/services/bitbucket-api.service','137276EmvUfE'];const a91_0x57ddcc=a91_0x3930;(function(_0x62c46,_0x2f529e){const _0x1b7c52=a91_0x3930;while(!![]){try{const _0x5928a1=parseInt(_0x1b7c52(0xa2))+-parseInt(_0x1b7c52(0x81))+parseInt(_0x1b7c52(0x8f))+parseInt(_0x1b7c52(0x71))+-parseInt(_0x1b7c52(0x80))+parseInt(_0x1b7c52(0x7c))*parseInt(_0x1b7c52(0x84))+-parseInt(_0x1b7c52(0x99));if(_0x5928a1===_0x2f529e)break;else _0x62c46['push'](_0x62c46['shift']());}catch(_0x16dbea){_0x62c46['push'](_0x62c46['shift']());}}}(a91_0x35c4,0x1b82d));const a91_0x22bf09=function(){let _0x1d6f31=!![];return function(_0x470a0b,_0x31e16f){const _0x52daf6=_0x1d6f31?function(){const _0xcbe5b=a91_0x3930;if(_0x31e16f){const _0x9712d4=_0x31e16f[_0xcbe5b(0xaa)](_0x470a0b,arguments);return _0x31e16f=null,_0x9712d4;}}:function(){};return _0x1d6f31=![],_0x52daf6;};}(),a91_0x208c6f=a91_0x22bf09(this,function(){const _0x2370a1=function(){const _0x49b35a=a91_0x3930,_0x421944=_0x2370a1['constructor'](_0x49b35a(0x8d))()[_0x49b35a(0x7d)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x421944[_0x49b35a(0xac)](a91_0x208c6f);};return _0x2370a1();});a91_0x208c6f();'use strict';var __decorate=this&&this['__decorate']||function(_0x1f7760,_0x24f611,_0x368b9e,_0x53cd51){const _0x132dca=a91_0x3930;var _0x6c25ad=arguments['length'],_0x160f5a=_0x6c25ad<0x3?_0x24f611:_0x53cd51===null?_0x53cd51=Object['getOwnPropertyDescriptor'](_0x24f611,_0x368b9e):_0x53cd51,_0x399a13;if(typeof Reflect===_0x132dca(0x94)&&typeof Reflect[_0x132dca(0x7e)]===_0x132dca(0x8b))_0x160f5a=Reflect[_0x132dca(0x7e)](_0x1f7760,_0x24f611,_0x368b9e,_0x53cd51);else{for(var _0x128b9d=_0x1f7760[_0x132dca(0x82)]-0x1;_0x128b9d>=0x0;_0x128b9d--)if(_0x399a13=_0x1f7760[_0x128b9d])_0x160f5a=(_0x6c25ad<0x3?_0x399a13(_0x160f5a):_0x6c25ad>0x3?_0x399a13(_0x24f611,_0x368b9e,_0x160f5a):_0x399a13(_0x24f611,_0x368b9e))||_0x160f5a;}return _0x6c25ad>0x3&&_0x160f5a&&Object[_0x132dca(0x77)](_0x24f611,_0x368b9e,_0x160f5a),_0x160f5a;},__metadata=this&&this[a91_0x57ddcc(0xa7)]||function(_0x5c98cb,_0x1bd728){const _0xb88fa4=a91_0x57ddcc;if(typeof Reflect===_0xb88fa4(0x94)&&typeof Reflect[_0xb88fa4(0x83)]===_0xb88fa4(0x8b))return Reflect[_0xb88fa4(0x83)](_0x5c98cb,_0x1bd728);},__param=this&&this[a91_0x57ddcc(0xa1)]||function(_0x2d59f1,_0xa0d44d){return function(_0xdecf9e,_0x1d8e9a){_0xa0d44d(_0xdecf9e,_0x1d8e9a,_0x2d59f1);};};Object[a91_0x57ddcc(0x77)](exports,a91_0x57ddcc(0x88),{'value':!![]}),exports['BitbucketRepoService']=void 0x0;const errors_1=require(a91_0x57ddcc(0x9a)),bad_request_error_1=require(a91_0x57ddcc(0x89)),not_found_error_1=require(a91_0x57ddcc(0x96)),bitbucket_api_service_1=require(a91_0x57ddcc(0x7f)),auth_settings_service_1=require(a91_0x57ddcc(0xa8)),typedi_1=require('typedi'),git_internal_1=require(a91_0x57ddcc(0x8c)),repo_class_1=require(a91_0x57ddcc(0x87)),git_repo_service_1=require(a91_0x57ddcc(0x85));let BitbucketRepoService=class BitbucketRepoService extends git_repo_service_1[a91_0x57ddcc(0x9e)]{constructor(_0x14bd26,_0x4bc3dc){const _0x5f56fe=a91_0x57ddcc;super(_0x14bd26),this[_0x5f56fe(0xab)]=_0x4bc3dc,this[_0x5f56fe(0xa5)]=_0x14bd26[_0x5f56fe(0x95)];if(!this['workspace'])throw new Error(errors_1['ERR_BITBUCKET_MISSING_WORKSPACE']);if(!this[_0x5f56fe(0x91)])throw new Error(errors_1[_0x5f56fe(0xa4)]);}get['workspace'](){const _0x421b03=a91_0x57ddcc;return this['authSettings'][_0x421b03(0x9c)]['workspace'];}get['project'](){const _0x417fa6=a91_0x57ddcc;return this[_0x417fa6(0xab)][_0x417fa6(0x9c)][_0x417fa6(0x91)];}async['create'](_0x5dbb28){const _0x44dc3f=a91_0x57ddcc;try{const {name:_0x36aad8}=_0x5dbb28,_0x509cac={'name':_0x5dbb28[_0x44dc3f(0xa0)],'is_private':_0x5dbb28[_0x44dc3f(0x90)],..._0x5dbb28['apiBody']||{},'project':{'key':this[_0x44dc3f(0x91)]}},_0x31213f=await this[_0x44dc3f(0xa5)][_0x44dc3f(0x86)](_0x44dc3f(0x76)+this[_0x44dc3f(0x92)]+'/'+_0x36aad8[_0x44dc3f(0x98)](),_0x509cac),_0x2bd0e3=repo_class_1[_0x44dc3f(0xa9)][_0x44dc3f(0x74)](_0x31213f);return _0x5dbb28[_0x44dc3f(0x97)]&&await git_internal_1[_0x44dc3f(0x7a)][_0x44dc3f(0x9f)](_0x2bd0e3,_0x5dbb28[_0x44dc3f(0x7b)]||_0x44dc3f(0x72)),this[_0x44dc3f(0x79)](_0x2bd0e3[_0x44dc3f(0xa0)]);}catch(_0xe1052){throw new bad_request_error_1['BadRequestError'](_0xe1052);}}async[a91_0x57ddcc(0x79)](_0x4093bb){const _0x54622a=a91_0x57ddcc;try{const _0x451f9d=await this[_0x54622a(0xa5)]['get'](_0x54622a(0x8a)+this['workspace']+'/'+_0x4093bb[_0x54622a(0x98)]());return repo_class_1['Repo'][_0x54622a(0x74)](_0x451f9d);}catch(_0x12ea29){throw new not_found_error_1[(_0x54622a(0x9d))](_0x12ea29);}}async[a91_0x57ddcc(0x75)](_0x5edde0,_0x2f8b22){const _0x4c43d6=a91_0x57ddcc;await this['getOne'](_0x5edde0);try{const _0x37b1cf=await this[_0x4c43d6(0xa5)][_0x4c43d6(0xa3)](_0x4c43d6(0x8a)+this[_0x4c43d6(0x92)]+'/'+_0x5edde0['toLowerCase'](),_0x2f8b22);return repo_class_1[_0x4c43d6(0xa9)][_0x4c43d6(0x74)](_0x37b1cf);}catch(_0x407080){throw new not_found_error_1[(_0x4c43d6(0x9d))](_0x407080);}}async[a91_0x57ddcc(0x8e)](_0x52badf){const _0x1bb823=a91_0x57ddcc;try{await this[_0x1bb823(0xa5)][_0x1bb823(0x8e)](_0x1bb823(0x8a)+this[_0x1bb823(0x92)]+'/'+_0x52badf[_0x1bb823(0x98)]());}catch(_0x4bf1ac){throw new bad_request_error_1[(_0x1bb823(0x93))](_0x4bf1ac);}}};function a91_0x3930(_0x49897c,_0x28e656){return a91_0x3930=function(_0x532497,_0x208c6f){_0x532497=_0x532497-0x71;let _0x22bf09=a91_0x35c4[_0x532497];return _0x22bf09;},a91_0x3930(_0x49897c,_0x28e656);}BitbucketRepoService=__decorate([typedi_1[a91_0x57ddcc(0x73)](),__param(0x0,typedi_1['Inject']()),__metadata(a91_0x57ddcc(0x9b),[bitbucket_api_service_1['BitbucketApiService'],auth_settings_service_1[a91_0x57ddcc(0x78)]])],BitbucketRepoService),exports[a91_0x57ddcc(0xa6)]=BitbucketRepoService;