const a93_0x491c=['return\x20/\x22\x20+\x20this\x20+\x20\x22/','337cMdQqH','typedi','../../internal/git.internal','180488KjQrwv','update','Service','fromBitbucketServer','apiUrl','createEmptyBranch','/projects/','NotFoundError','api','../../../core/errors/not-found.error','baseURL','/repos/','master','displayId','./git-repo.service','__decorate','length','test','getOwnPropertyDescriptor','apiBody','values','587723FExsWb','defaults','../../../core/errors/bad-request.error','apply','git','682181PTEZYV','__metadata','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','707133ZWORkB','metadata','constructor','defaultBranch','isDefault','autoInit','put','request','2241497quramz','getOne','../../git-api/services/bitbucket-server-api.service','post','BadRequestError','name','joinURL','project','projects/','function','Inject','BitbucketServerRepoService','decorate','311nZfrqf','580624NNwrwS','get','defineProperty','delete','design:paramtypes','__param','Repo','object'];const a93_0x279a3a=a93_0x30a6;(function(_0x1119da,_0x11faef){const _0x150610=a93_0x30a6;while(!![]){try{const _0x8dd13e=parseInt(_0x150610(0xb7))+parseInt(_0x150610(0xb2))+parseInt(_0x150610(0xdc))+parseInt(_0x150610(0xd9))*-parseInt(_0x150610(0xcf))+parseInt(_0x150610(0xba))+parseInt(_0x150610(0xd0))+-parseInt(_0x150610(0xc2));if(_0x8dd13e===_0x11faef)break;else _0x1119da['push'](_0x1119da['shift']());}catch(_0x52b189){_0x1119da['push'](_0x1119da['shift']());}}}(a93_0x491c,0x5faa5));function a93_0x30a6(_0x12924a,_0x5dcf8d){return a93_0x30a6=function(_0x33fd12,_0x4fbb36){_0x33fd12=_0x33fd12-0x9e;let _0x9ab7d4=a93_0x491c[_0x33fd12];return _0x9ab7d4;},a93_0x30a6(_0x12924a,_0x5dcf8d);}const a93_0x9ab7d4=function(){let _0x52caf7=!![];return function(_0x29ab04,_0x559256){const _0x3bb8d3=_0x52caf7?function(){const _0x4eaa45=a93_0x30a6;if(_0x559256){const _0x372c23=_0x559256[_0x4eaa45(0xb5)](_0x29ab04,arguments);return _0x559256=null,_0x372c23;}}:function(){};return _0x52caf7=![],_0x3bb8d3;};}(),a93_0x4fbb36=a93_0x9ab7d4(this,function(){const _0x86659e=function(){const _0x23feb3=a93_0x30a6,_0x63980f=_0x86659e[_0x23feb3(0xbc)](_0x23feb3(0xd8))()[_0x23feb3(0xbc)](_0x23feb3(0xb9));return!_0x63980f[_0x23feb3(0xae)](a93_0x4fbb36);};return _0x86659e();});a93_0x4fbb36();'use strict';var __decorate=this&&this[a93_0x279a3a(0xac)]||function(_0x1ffe0e,_0x5e12b9,_0x3e3bb5,_0x2bb8e1){const _0x419e55=a93_0x279a3a;var _0x484e55=arguments['length'],_0x93bf89=_0x484e55<0x3?_0x5e12b9:_0x2bb8e1===null?_0x2bb8e1=Object[_0x419e55(0xaf)](_0x5e12b9,_0x3e3bb5):_0x2bb8e1,_0x398dca;if(typeof Reflect===_0x419e55(0xd7)&&typeof Reflect[_0x419e55(0xce)]===_0x419e55(0xcb))_0x93bf89=Reflect[_0x419e55(0xce)](_0x1ffe0e,_0x5e12b9,_0x3e3bb5,_0x2bb8e1);else{for(var _0x26df8e=_0x1ffe0e[_0x419e55(0xad)]-0x1;_0x26df8e>=0x0;_0x26df8e--)if(_0x398dca=_0x1ffe0e[_0x26df8e])_0x93bf89=(_0x484e55<0x3?_0x398dca(_0x93bf89):_0x484e55>0x3?_0x398dca(_0x5e12b9,_0x3e3bb5,_0x93bf89):_0x398dca(_0x5e12b9,_0x3e3bb5))||_0x93bf89;}return _0x484e55>0x3&&_0x93bf89&&Object[_0x419e55(0xd2)](_0x5e12b9,_0x3e3bb5,_0x93bf89),_0x93bf89;},__metadata=this&&this[a93_0x279a3a(0xb8)]||function(_0x3d74e3,_0x5bde8b){const _0x3763a0=a93_0x279a3a;if(typeof Reflect===_0x3763a0(0xd7)&&typeof Reflect[_0x3763a0(0xbb)]===_0x3763a0(0xcb))return Reflect[_0x3763a0(0xbb)](_0x3d74e3,_0x5bde8b);},__param=this&&this[a93_0x279a3a(0xd5)]||function(_0x2a2b75,_0x1b5ef0){return function(_0x30f475,_0x54ef1c){_0x1b5ef0(_0x30f475,_0x54ef1c,_0x2a2b75);};};Object[a93_0x279a3a(0xd2)](exports,'__esModule',{'value':!![]}),exports[a93_0x279a3a(0xcd)]=void 0x0;const bad_request_error_1=require(a93_0x279a3a(0xb4)),not_found_error_1=require(a93_0x279a3a(0xa6)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),typedi_1=require(a93_0x279a3a(0xda)),bitbucket_server_api_service_1=require(a93_0x279a3a(0xc4)),git_internal_1=require(a93_0x279a3a(0xdb)),utils_1=require('../../shared/utils'),repo_class_1=require('../repo.class'),git_repo_service_1=require(a93_0x279a3a(0xab));let BitbucketServerRepoService=class BitbucketServerRepoService extends git_repo_service_1['GitRepoService']{constructor(_0x7b3f57,_0x36736a){const _0x408ff7=a93_0x279a3a;super(_0x7b3f57),this[_0x408ff7(0xa5)]=_0x7b3f57,this[_0x408ff7(0xc9)]=_0x36736a['bitbucketServer'][_0x408ff7(0xc9)];}async['create'](_0x315e85){const _0x409204=a93_0x279a3a;try{const _0x1d5e07={'name':_0x315e85['name'],'scmId':_0x409204(0xb6),'defaultBranch':_0x315e85[_0x409204(0xbd)],..._0x315e85[_0x409204(0xb0)]||{}},_0x2a91c1=await this[_0x409204(0xc1)][_0x409204(0xc5)](_0x409204(0xca)+this[_0x409204(0xc9)]+'/repos',_0x1d5e07),_0x9d9ca8=repo_class_1[_0x409204(0xd6)][_0x409204(0xa0)](_0x2a91c1,'');return _0x315e85[_0x409204(0xbf)]&&await git_internal_1['Git'][_0x409204(0xa2)](_0x9d9ca8,_0x315e85['defaultBranch']||_0x409204(0xa9)),this[_0x409204(0xc3)](_0x9d9ca8[_0x409204(0xc7)]);}catch(_0x3e3b7d){throw new bad_request_error_1[(_0x409204(0xc6))](_0x3e3b7d);}}async['getOne'](_0x9669d0){const _0x226e42=a93_0x279a3a;var _0xd05091;try{const _0x4b6235=await this['request'][_0x226e42(0xd1)](_0x226e42(0xca)+this[_0x226e42(0xc9)]+_0x226e42(0xa8)+_0x9669d0),_0x19a583=repo_class_1[_0x226e42(0xd6)]['fromBitbucketServer'](_0x4b6235,utils_1[_0x226e42(0xc8)](this[_0x226e42(0xc1)]['defaults'][_0x226e42(0xa7)]||'',_0x226e42(0xa3)+this[_0x226e42(0xc9)]+_0x226e42(0xa8)+_0x9669d0)),_0x25ddee=await this[_0x226e42(0xc1)][_0x226e42(0xd1)](_0x19a583[_0x226e42(0xa1)]+'/branches')['then'](_0x216258=>_0x216258[_0x226e42(0xb1)]);return _0x19a583['defaultBranch']=(_0xd05091=_0x25ddee['find'](_0xf6d0b0=>_0xf6d0b0[_0x226e42(0xbe)]===!![]))===null||_0xd05091===void 0x0?void 0x0:_0xd05091[_0x226e42(0xaa)],_0x19a583;}catch(_0x2ad1fc){throw new not_found_error_1[(_0x226e42(0xa4))](_0x2ad1fc);}}async[a93_0x279a3a(0x9e)](_0x164001,_0xac20b){const _0x3db43e=a93_0x279a3a;try{const _0x4c08ad=await this[_0x3db43e(0xc1)][_0x3db43e(0xc0)](_0x3db43e(0xca)+this[_0x3db43e(0xc9)]+_0x3db43e(0xa8)+_0x164001,_0xac20b),_0x3309fd=await this[_0x3db43e(0xc1)][_0x3db43e(0xd1)](_0x3db43e(0xca)+this[_0x3db43e(0xc9)]+_0x3db43e(0xa8)+_0x164001+'/default-branch'),_0x308863=repo_class_1[_0x3db43e(0xd6)][_0x3db43e(0xa0)](_0x4c08ad,utils_1[_0x3db43e(0xc8)](this[_0x3db43e(0xc1)][_0x3db43e(0xb3)][_0x3db43e(0xa7)]||'',_0x3db43e(0xa3)+this['project']+'/repos/'+_0x164001));return _0x308863[_0x3db43e(0xbd)]=_0x3309fd[_0x3db43e(0xaa)],_0x308863;}catch(_0x25a68f){throw new not_found_error_1[(_0x3db43e(0xa4))](_0x25a68f);}}async[a93_0x279a3a(0xd3)](_0x9d6cbe){const _0x13e740=a93_0x279a3a;try{await this[_0x13e740(0xc3)](_0x9d6cbe),await this[_0x13e740(0xc1)][_0x13e740(0xd3)]('projects/'+this['project']+_0x13e740(0xa8)+_0x9d6cbe);}catch(_0x380cfa){throw new bad_request_error_1[(_0x13e740(0xc6))](_0x380cfa);}}};BitbucketServerRepoService=__decorate([typedi_1[a93_0x279a3a(0x9f)](),__param(0x1,typedi_1[a93_0x279a3a(0xcc)]()),__metadata(a93_0x279a3a(0xd4),[bitbucket_server_api_service_1['BitbucketServerApiService'],auth_settings_service_1['AuthSettingsService']])],BitbucketServerRepoService),exports[a93_0x279a3a(0xcd)]=BitbucketServerRepoService;