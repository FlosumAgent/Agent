const a146_0x1a8b07=a146_0x4d85;(function(_0x42d1c2,_0x1046b0){const _0x133a4a=a146_0x4d85,_0x4d0fe9=_0x42d1c2();while(!![]){try{const _0x295d9a=parseInt(_0x133a4a(0x180))/0x1*(-parseInt(_0x133a4a(0x140))/0x2)+parseInt(_0x133a4a(0x186))/0x3*(-parseInt(_0x133a4a(0x15d))/0x4)+-parseInt(_0x133a4a(0x15f))/0x5+-parseInt(_0x133a4a(0x134))/0x6*(-parseInt(_0x133a4a(0x178))/0x7)+-parseInt(_0x133a4a(0x183))/0x8+parseInt(_0x133a4a(0x158))/0x9+parseInt(_0x133a4a(0x13a))/0xa;if(_0x295d9a===_0x1046b0)break;else _0x4d0fe9['push'](_0x4d0fe9['shift']());}catch(_0x1f3e3e){_0x4d0fe9['push'](_0x4d0fe9['shift']());}}}(a146_0x5273,0xe8b84));function a146_0x4d85(_0x3ab2a3,_0x529fd5){const _0x1994ec=a146_0x5273();return a146_0x4d85=function(_0x360b3a,_0x19600f){_0x360b3a=_0x360b3a-0x12f;let _0x527343=_0x1994ec[_0x360b3a];return _0x527343;},a146_0x4d85(_0x3ab2a3,_0x529fd5);}const a146_0x19600f=function(){let _0x55108d=!![];return function(_0x4f7b40,_0x374c50){const _0xa70795=_0x55108d?function(){const _0x1b9f72=a146_0x4d85;if(_0x374c50){const _0x24ad2e=_0x374c50[_0x1b9f72(0x167)](_0x4f7b40,arguments);return _0x374c50=null,_0x24ad2e;}}:function(){};return _0x55108d=![],_0xa70795;};}(),a146_0x360b3a=a146_0x19600f(this,function(){const _0xe10f7b=a146_0x4d85;return a146_0x360b3a['toString']()['search'](_0xe10f7b(0x172))['toString']()['constructor'](a146_0x360b3a)['search'](_0xe10f7b(0x172));});a146_0x360b3a();'use strict';function a146_0x5273(){const _0x4be05e=['includes','[ERROR]\x20','363018TQPbGQ','force','metadata','SFDXUtils','defineProperty','__metadata','37036000QSzdsY','gitUrl','Service','__importDefault','logger','://','1690982VVVDqw','removeComponents','components','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','writeComponents','fileName','object','writeFlosumComponents','[INFO]\x20Deleted\x20','../utils/sfdx.utils','AuthSettingsService','mdapiUtils','length','run','[INFO]\x20Prepare\x20mdapi\x20files','name','ms.\x20Commited\x20components\x20-\x20','fileType','__decorate','dir','push','createProjectFrom','__esModule','componentsToWrite','5150628oVdBIo','[INFO]\x20Preparing\x20to\x20delete\x20components','../utils/mdapi.utils','writed','catch','743620aRTztn','GitUtils','6727130ZIjVmJ','copyProjectTo','MDApiUtils','clone','branch','[INFO]\x20Start\x20converting\x20to\x20SFDX','../../shared/services/auth-settings.service','type','apply','exec','sfdxUtils','[INFO]\x20Writed\x20','copyMdapiTo','default','COMPONENTS_PER_TICK','deleted','typedi','getOwnPropertyDescriptor','log','(((.+)+)+)+$','componentsToDelete','design:paramtypes','master','function','send','21raXoQp','clearDir','removeDir','email','getProtocol','sort','commitData','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','1HXQyfy','remote','cleanUp','7531632hUBvIV','replace','\x20components','6XscrsW','commitAndPush','decorate','gitUtils','startTime','authSettings','[INFO]\x20Start\x20clonning\x20repository','CommitComponentsJob','groupComponentsByFileName','reduce','../utils/git.utils','now','splice'];a146_0x5273=function(){return _0x4be05e;};return a146_0x5273();}var __decorate=this&&this[a146_0x1a8b07(0x152)]||function(_0xc7f4e0,_0x458944,_0x2fd33f,_0x4cd01d){const _0x299162=a146_0x1a8b07;var _0x1198fb=arguments['length'],_0x49d282=_0x1198fb<0x3?_0x458944:_0x4cd01d===null?_0x4cd01d=Object[_0x299162(0x170)](_0x458944,_0x2fd33f):_0x4cd01d,_0x438a26;if(typeof Reflect===_0x299162(0x146)&&typeof Reflect[_0x299162(0x188)]==='function')_0x49d282=Reflect[_0x299162(0x188)](_0xc7f4e0,_0x458944,_0x2fd33f,_0x4cd01d);else{for(var _0x3c5421=_0xc7f4e0[_0x299162(0x14c)]-0x1;_0x3c5421>=0x0;_0x3c5421--)if(_0x438a26=_0xc7f4e0[_0x3c5421])_0x49d282=(_0x1198fb<0x3?_0x438a26(_0x49d282):_0x1198fb>0x3?_0x438a26(_0x458944,_0x2fd33f,_0x49d282):_0x438a26(_0x458944,_0x2fd33f))||_0x49d282;}return _0x1198fb>0x3&&_0x49d282&&Object['defineProperty'](_0x458944,_0x2fd33f,_0x49d282),_0x49d282;},__metadata=this&&this[a146_0x1a8b07(0x139)]||function(_0x1225ac,_0x4190a8){const _0x56c00e=a146_0x1a8b07;if(typeof Reflect===_0x56c00e(0x146)&&typeof Reflect[_0x56c00e(0x136)]===_0x56c00e(0x176))return Reflect['metadata'](_0x1225ac,_0x4190a8);},__importDefault=this&&this[a146_0x1a8b07(0x13d)]||function(_0x2cc784){const _0x337009=a146_0x1a8b07;return _0x2cc784&&_0x2cc784[_0x337009(0x156)]?_0x2cc784:{'default':_0x2cc784};};Object[a146_0x1a8b07(0x138)](exports,a146_0x1a8b07(0x156),{'value':!![]}),exports[a146_0x1a8b07(0x18d)]=void 0x0;const auth_settings_service_1=require(a146_0x1a8b07(0x165)),events_1=__importDefault(require('events')),git_utils_1=require(a146_0x1a8b07(0x12f)),mdapi_utils_1=require(a146_0x1a8b07(0x15a)),sfdx_utils_1=require(a146_0x1a8b07(0x149)),typedi_1=require(a146_0x1a8b07(0x16f)),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),utils_1=require('../../shared/utils');let CommitComponentsJob=class CommitComponentsJob extends events_1[a146_0x1a8b07(0x16c)]{constructor(_0x266fb9){const _0x2f1685=a146_0x1a8b07;super(),this[_0x2f1685(0x18b)]=_0x266fb9,this[_0x2f1685(0x16d)]=0x3e8,this['componentsToWrite']=0x0,this[_0x2f1685(0x173)]=0x0,this[_0x2f1685(0x18a)]=Date[_0x2f1685(0x130)]();}get[a146_0x1a8b07(0x181)](){const _0x406da1=a146_0x1a8b07,{repo:_0x48c691}=this[_0x406da1(0x17e)],{gitCredentials:_0x48c786}=this['authSettings'];return _0x48c691[_0x406da1(0x13b)][_0x406da1(0x184)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x406da1(0x17c)])(_0x48c691[_0x406da1(0x13b)])+_0x406da1(0x13f)+_0x48c786+'@');}[a146_0x1a8b07(0x18e)](_0x284e8c){const _0x53093f=a146_0x1a8b07;var _0x41fd02;_0x284e8c[_0x53093f(0x17d)](_0x11b1bb=>child_types_1['default']['includes'](_0x11b1bb[_0x53093f(0x151)])?0x1:-0x1);const _0x2454a8={};for(const _0xc03c06 of _0x284e8c){_0x2454a8[_0x41fd02=_0xc03c06[_0x53093f(0x145)]]||(_0x2454a8[_0x41fd02]=[]),_0x2454a8[_0xc03c06[_0x53093f(0x145)]][_0x53093f(0x154)](_0xc03c06);}return Object['values'](_0x2454a8)[_0x53093f(0x18f)]((_0x4eafcb,_0x448c87)=>[..._0x4eafcb,..._0x448c87],[]);}async[a146_0x1a8b07(0x144)](_0x39d932){const _0x2e0152=a146_0x1a8b07;_0x39d932=this['groupComponentsByFileName'](_0x39d932);let _0x32c9ec=0x0;while(_0x39d932[_0x2e0152(0x14c)]){const _0x44248c=_0x39d932['splice'](0x0,this[_0x2e0152(0x16d)]);await this[_0x2e0152(0x14b)][_0x2e0152(0x147)](_0x44248c,{'skipChildErrors':this[_0x2e0152(0x17e)][_0x2e0152(0x163)][_0x2e0152(0x14f)]===_0x2e0152(0x175),'logger':_0x1bee37=>this[_0x2e0152(0x13e)][_0x2e0152(0x171)](_0x1bee37)}),_0x32c9ec+=_0x44248c[_0x2e0152(0x14c)],this[_0x2e0152(0x13e)][_0x2e0152(0x171)](_0x2e0152(0x16a)+_0x32c9ec+'/'+this['componentsToWrite']+_0x2e0152(0x185)),await this['logger']['send']();}}async[a146_0x1a8b07(0x141)](_0x3a0670){const _0x360c06=a146_0x1a8b07;_0x3a0670['sort'](_0x5e1610=>child_types_1[_0x360c06(0x16c)][_0x360c06(0x132)](_0x5e1610[_0x360c06(0x166)])?-0x1:0x1);let _0x1593b2=0x0;while(_0x3a0670['length']){const _0x136970=_0x3a0670[_0x360c06(0x131)](0x0,this[_0x360c06(0x16d)]);await this[_0x360c06(0x14b)][_0x360c06(0x141)](_0x136970),_0x1593b2+=_0x136970['length'],this[_0x360c06(0x13e)][_0x360c06(0x171)](_0x360c06(0x148)+_0x1593b2+'/'+this[_0x360c06(0x173)]+'\x20components'),await this[_0x360c06(0x13e)][_0x360c06(0x177)]();}}async[a146_0x1a8b07(0x182)](){const _0x187f1c=a146_0x1a8b07;this[_0x187f1c(0x189)]&&await this['gitUtils'][_0x187f1c(0x17a)]()[_0x187f1c(0x15c)](()=>void 0x0),this[_0x187f1c(0x14b)]&&await this[_0x187f1c(0x14b)][_0x187f1c(0x17a)]()[_0x187f1c(0x15c)](()=>void 0x0),this[_0x187f1c(0x169)]&&await this[_0x187f1c(0x169)]['removeDir']()[_0x187f1c(0x15c)](()=>void 0x0);}async[a146_0x1a8b07(0x168)](){const _0x268273=a146_0x1a8b07,{repo:_0x308e20,branch:_0x47df93,components:_0x7b220,convertToSFDX:_0x1d51ce,message:_0x364da9,user:_0x9a98ea}=this['commitData'];this[_0x268273(0x14b)]=new mdapi_utils_1[(_0x268273(0x161))](_0x308e20[_0x268273(0x14f)],_0x47df93[_0x268273(0x14f)]),this[_0x268273(0x189)]=new git_utils_1[(_0x268273(0x15e))](this[_0x268273(0x181)]),this[_0x268273(0x169)]=new sfdx_utils_1[(_0x268273(0x137))](_0x308e20[_0x268273(0x14f)],_0x47df93[_0x268273(0x14f)]);try{this['logger'][_0x268273(0x171)](_0x268273(0x18c)),await this[_0x268273(0x189)][_0x268273(0x162)](_0x47df93['name'],_0x308e20['name']);!this['commitData'][_0x268273(0x135)]?(this[_0x268273(0x13e)][_0x268273(0x171)](_0x268273(0x14e)),await this['mdapiUtils']['prepareMdapi'](this[_0x268273(0x189)][_0x268273(0x153)])):this[_0x268273(0x13e)]['log']('[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');_0x7b220[_0x268273(0x15b)]&&(this['logger']['log']('[INFO]\x20Preparing\x20to\x20write\x20components'),this[_0x268273(0x157)]=_0x7b220['writed']['length'],await this[_0x268273(0x144)](_0x7b220[_0x268273(0x15b)]));_0x7b220[_0x268273(0x16e)]&&(this['logger']['log'](_0x268273(0x159)),this[_0x268273(0x173)]=_0x7b220[_0x268273(0x16e)]['length'],await this[_0x268273(0x141)](_0x7b220[_0x268273(0x16e)]));await this['gitUtils'][_0x268273(0x179)](),await this[_0x268273(0x13e)][_0x268273(0x177)]();_0x1d51ce?(this[_0x268273(0x13e)][_0x268273(0x171)](_0x268273(0x164)),await this[_0x268273(0x169)][_0x268273(0x155)](this[_0x268273(0x14b)]['dir']),await this[_0x268273(0x169)][_0x268273(0x160)](this[_0x268273(0x189)][_0x268273(0x153)]),await this['sfdxUtils'][_0x268273(0x17a)](),await this[_0x268273(0x13e)]['send']()):(this[_0x268273(0x13e)]['log']('[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder'),await this[_0x268273(0x14b)][_0x268273(0x16b)](this[_0x268273(0x189)]['dir']));this[_0x268273(0x13e)][_0x268273(0x171)](_0x268273(0x17f)),await this[_0x268273(0x189)][_0x268273(0x187)](_0x364da9,{'email':_0x9a98ea[_0x268273(0x17b)],'name':_0x9a98ea[_0x268273(0x14f)]},_0x47df93[_0x268273(0x14f)]),await this['gitUtils']['removeDir'](),await this['mdapiUtils'][_0x268273(0x17a)]();const _0xfcb88=this[_0x268273(0x157)]+this[_0x268273(0x173)];this['logger'][_0x268273(0x171)]('[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x268273(0x130)]()-this['startTime'])+_0x268273(0x150)+_0xfcb88),await this['logger'][_0x268273(0x177)]();}catch(_0x1098e4){await this[_0x268273(0x182)](),this['logger']['log'](_0x268273(0x133)+_0x1098e4),await this[_0x268273(0x13e)][_0x268273(0x177)]();throw _0x1098e4;}}async[a146_0x1a8b07(0x14d)](_0x22f1c8){const _0x428453=a146_0x1a8b07;var _0x13d8f9,_0x2c4e14,_0x345e6c,_0x3a7459;const _0x296b65=!!((_0x2c4e14=(_0x13d8f9=_0x22f1c8[_0x428453(0x142)])===null||_0x13d8f9===void 0x0?void 0x0:_0x13d8f9[_0x428453(0x15b)])===null||_0x2c4e14===void 0x0?void 0x0:_0x2c4e14[_0x428453(0x14c)])||!!((_0x3a7459=(_0x345e6c=_0x22f1c8['components'])===null||_0x345e6c===void 0x0?void 0x0:_0x345e6c['deleted'])===null||_0x3a7459===void 0x0?void 0x0:_0x3a7459[_0x428453(0x14c)]);if(!_0x296b65){this[_0x428453(0x13e)]['log'](_0x428453(0x143)),await this[_0x428453(0x13e)][_0x428453(0x177)]();return;}this[_0x428453(0x17e)]=_0x22f1c8,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a146_0x1a8b07(0x13c)])({'transient':!![]}),__metadata(a146_0x1a8b07(0x174),[auth_settings_service_1[a146_0x1a8b07(0x14a)]])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;