const a141_0x41d0=['AuthSettingsService','../utils/mdapi.utils','gitUtils','[INFO]\x20Writed\x20','removeDir','name','\x20components','1077757LmIeGB','values','COMPONENTS_PER_TICK','catch','://','565151RLFrvn','apply','64042OZpXvc','default','dir','decorate','fileType','push','clearDir','fileName','logger','cleanUp','[INFO]\x20Prepare\x20mdapi\x20files','defineProperty','function','componentsToWrite','134003Npogpq','gitUrl','writed','1180969Gyvcfu','CommitComponentsJob','deleted','removeComponents','metadata','getProtocol','copyMdapiTo','length','reduce','force','components','ms.\x20Commited\x20components\x20-\x20','createProjectFrom','../utils/sfdx.utils','sfdxUtils','run','[INFO]\x20Preparing\x20to\x20write\x20components','MDApiUtils','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','constructor','componentsToDelete','design:paramtypes','return\x20/\x22\x20+\x20this\x20+\x20\x22/','test','send','[ERROR]\x20','../../shared/utils','now','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','__esModule','1fjjPcr','1381916HIQnKU','exec','prepareMdapi','authSettings','copyProjectTo','includes','[INFO]\x20Start\x20converting\x20to\x20SFDX','mdapiUtils','remote','clone','1EFVYkZ','653241gLKMuC','../utils/git.utils','getOwnPropertyDescriptor','commitAndPush','object','[INFO]\x20Deleted\x20','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','log','commitData','startTime','splice'];const a141_0x538dbe=a141_0x235d;(function(_0x1326ca,_0x76ba40){const _0x446a78=a141_0x235d;while(!![]){try{const _0x5c736f=parseInt(_0x446a78(0x1ff))+parseInt(_0x446a78(0x212))+-parseInt(_0x446a78(0x1fa))*-parseInt(_0x446a78(0x230))+-parseInt(_0x446a78(0x20f))+-parseInt(_0x446a78(0x201))+-parseInt(_0x446a78(0x1e8))+-parseInt(_0x446a78(0x231))*parseInt(_0x446a78(0x1e7));if(_0x5c736f===_0x76ba40)break;else _0x1326ca['push'](_0x1326ca['shift']());}catch(_0x3e2e8c){_0x1326ca['push'](_0x1326ca['shift']());}}}(a141_0x41d0,0x90353));const a141_0x3ff7f2=function(){let _0x360ce2=!![];return function(_0x42396d,_0x493b62){const _0x5159c6=_0x360ce2?function(){const _0x31d06e=a141_0x235d;if(_0x493b62){const _0x410d2b=_0x493b62[_0x31d06e(0x200)](_0x42396d,arguments);return _0x493b62=null,_0x410d2b;}}:function(){};return _0x360ce2=![],_0x5159c6;};}(),a141_0x59f4f4=a141_0x3ff7f2(this,function(){const _0xcd88d4=function(){const _0x3fc402=a141_0x235d,_0x5d214f=_0xcd88d4[_0x3fc402(0x225)](_0x3fc402(0x228))()[_0x3fc402(0x225)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x5d214f[_0x3fc402(0x229)](a141_0x59f4f4);};return _0xcd88d4();});a141_0x59f4f4();'use strict';var __decorate=this&&this['__decorate']||function(_0x373a23,_0x1786a2,_0x2ffa78,_0x162769){const _0x148df3=a141_0x235d;var _0x215b7d=arguments[_0x148df3(0x219)],_0x31a76a=_0x215b7d<0x3?_0x1786a2:_0x162769===null?_0x162769=Object[_0x148df3(0x1ea)](_0x1786a2,_0x2ffa78):_0x162769,_0xa913e7;if(typeof Reflect===_0x148df3(0x1ec)&&typeof Reflect[_0x148df3(0x204)]===_0x148df3(0x20d))_0x31a76a=Reflect[_0x148df3(0x204)](_0x373a23,_0x1786a2,_0x2ffa78,_0x162769);else{for(var _0x5e33f3=_0x373a23[_0x148df3(0x219)]-0x1;_0x5e33f3>=0x0;_0x5e33f3--)if(_0xa913e7=_0x373a23[_0x5e33f3])_0x31a76a=(_0x215b7d<0x3?_0xa913e7(_0x31a76a):_0x215b7d>0x3?_0xa913e7(_0x1786a2,_0x2ffa78,_0x31a76a):_0xa913e7(_0x1786a2,_0x2ffa78))||_0x31a76a;}return _0x215b7d>0x3&&_0x31a76a&&Object[_0x148df3(0x20c)](_0x1786a2,_0x2ffa78,_0x31a76a),_0x31a76a;},__metadata=this&&this['__metadata']||function(_0x49b610,_0x1d93e6){const _0x2f69d2=a141_0x235d;if(typeof Reflect===_0x2f69d2(0x1ec)&&typeof Reflect[_0x2f69d2(0x216)]===_0x2f69d2(0x20d))return Reflect['metadata'](_0x49b610,_0x1d93e6);},__importDefault=this&&this['__importDefault']||function(_0x20350e){return _0x20350e&&_0x20350e['__esModule']?_0x20350e:{'default':_0x20350e};};function a141_0x235d(_0x5026bb,_0x2ed76f){return a141_0x235d=function(_0x5b1631,_0x59f4f4){_0x5b1631=_0x5b1631-0x1e5;let _0x3ff7f2=a141_0x41d0[_0x5b1631];return _0x3ff7f2;},a141_0x235d(_0x5026bb,_0x2ed76f);}Object[a141_0x538dbe(0x20c)](exports,a141_0x538dbe(0x22f),{'value':!![]}),exports[a141_0x538dbe(0x213)]=void 0x0;const events_1=__importDefault(require('events')),typedi_1=require('typedi'),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),auth_settings_service_1=require('../../shared/services/auth-settings.service'),utils_1=require(a141_0x538dbe(0x22c)),git_utils_1=require(a141_0x538dbe(0x1e9)),mdapi_utils_1=require(a141_0x538dbe(0x1f4)),sfdx_utils_1=require(a141_0x538dbe(0x21f));let CommitComponentsJob=class CommitComponentsJob extends events_1[a141_0x538dbe(0x202)]{constructor(_0x38d43e){const _0x2712fc=a141_0x538dbe;super(),this[_0x2712fc(0x234)]=_0x38d43e,this['COMPONENTS_PER_TICK']=0x3e8,this[_0x2712fc(0x20e)]=0x0,this[_0x2712fc(0x226)]=0x0,this[_0x2712fc(0x1f1)]=Date[_0x2712fc(0x22d)]();}get[a141_0x538dbe(0x1e5)](){const _0x105101=a141_0x538dbe,{repo:_0x5be32c}=this[_0x105101(0x1f0)],{gitCredentials:_0x2decea}=this['authSettings'];return _0x5be32c[_0x105101(0x210)]['replace'](/http(s)?\:\/\/(.+@)?/,utils_1[_0x105101(0x217)](_0x5be32c['gitUrl'])+_0x105101(0x1fe)+_0x2decea+'@');}['groupComponentsByFileName'](_0x402ee9){const _0x53ab65=a141_0x538dbe;var _0x1de1f4;_0x402ee9['sort'](_0x2f973a=>child_types_1[_0x53ab65(0x202)][_0x53ab65(0x236)](_0x2f973a[_0x53ab65(0x205)])?0x1:-0x1);const _0x28f821={};for(const _0x19a331 of _0x402ee9){_0x28f821[_0x1de1f4=_0x19a331[_0x53ab65(0x208)]]||(_0x28f821[_0x1de1f4]=[]),_0x28f821[_0x19a331[_0x53ab65(0x208)]][_0x53ab65(0x206)](_0x19a331);}return Object[_0x53ab65(0x1fb)](_0x28f821)[_0x53ab65(0x21a)]((_0x3f7236,_0xd35546)=>[..._0x3f7236,..._0xd35546],[]);}async['writeComponents'](_0x34db5c){const _0x3ce198=a141_0x538dbe;_0x34db5c=this['groupComponentsByFileName'](_0x34db5c);let _0x3dbccd=0x0;while(_0x34db5c[_0x3ce198(0x219)]){const _0x4a1eb8=_0x34db5c[_0x3ce198(0x1f2)](0x0,this[_0x3ce198(0x1fc)]);await this['mdapiUtils']['writeFlosumComponents'](_0x4a1eb8),_0x3dbccd+=_0x4a1eb8[_0x3ce198(0x219)],this[_0x3ce198(0x209)][_0x3ce198(0x1ef)](_0x3ce198(0x1f6)+_0x3dbccd+'/'+this[_0x3ce198(0x20e)]+_0x3ce198(0x1f9)),await this[_0x3ce198(0x209)][_0x3ce198(0x22a)]();}}async[a141_0x538dbe(0x215)](_0x94cc3e){const _0x57e955=a141_0x538dbe;let _0x455a9a=0x0;while(_0x94cc3e[_0x57e955(0x219)]){const _0x58f1b9=_0x94cc3e[_0x57e955(0x1f2)](0x0,this[_0x57e955(0x1fc)]);await this[_0x57e955(0x238)]['removeComponents'](_0x58f1b9),_0x455a9a+=_0x58f1b9[_0x57e955(0x219)],this[_0x57e955(0x209)][_0x57e955(0x1ef)](_0x57e955(0x1ed)+_0x455a9a+'/'+this[_0x57e955(0x226)]+_0x57e955(0x1f9)),await this['logger'][_0x57e955(0x22a)]();}}async[a141_0x538dbe(0x20a)](){const _0x25e112=a141_0x538dbe;this[_0x25e112(0x1f5)]&&await this[_0x25e112(0x1f5)]['removeDir']()[_0x25e112(0x1fd)](()=>void 0x0),this[_0x25e112(0x238)]&&await this[_0x25e112(0x238)][_0x25e112(0x1f7)]()[_0x25e112(0x1fd)](()=>void 0x0),this[_0x25e112(0x220)]&&await this[_0x25e112(0x220)]['removeDir']()[_0x25e112(0x1fd)](()=>void 0x0);}async[a141_0x538dbe(0x232)](){const _0x554bc8=a141_0x538dbe,{repo:_0x2ff796,branch:_0x108ec7,components:_0x10696d,convertToSFDX:_0x3b06df,message:_0x757f5c,user:_0x475afb}=this[_0x554bc8(0x1f0)];this[_0x554bc8(0x238)]=new mdapi_utils_1[(_0x554bc8(0x223))](_0x2ff796[_0x554bc8(0x1f8)],_0x108ec7[_0x554bc8(0x1f8)]),this[_0x554bc8(0x1f5)]=new git_utils_1['GitUtils'](this['remote']),this[_0x554bc8(0x220)]=new sfdx_utils_1['SFDXUtils'](_0x2ff796[_0x554bc8(0x1f8)],_0x108ec7['name']);try{this['logger'][_0x554bc8(0x1ef)]('[INFO]\x20Start\x20clonning\x20repository'),await this[_0x554bc8(0x1f5)][_0x554bc8(0x1e6)](_0x108ec7['name'],_0x2ff796[_0x554bc8(0x1f8)],utils_1['randomString']());!this[_0x554bc8(0x1f0)][_0x554bc8(0x21b)]?(this[_0x554bc8(0x209)][_0x554bc8(0x1ef)](_0x554bc8(0x20b)),await this[_0x554bc8(0x238)][_0x554bc8(0x233)](this[_0x554bc8(0x1f5)][_0x554bc8(0x203)])):this[_0x554bc8(0x209)]['log'](_0x554bc8(0x22e));_0x10696d['writed']&&(this[_0x554bc8(0x209)]['log'](_0x554bc8(0x222)),this[_0x554bc8(0x20e)]=_0x10696d[_0x554bc8(0x211)]['length'],await this['writeComponents'](_0x10696d[_0x554bc8(0x211)]));_0x10696d[_0x554bc8(0x214)]&&(this[_0x554bc8(0x209)][_0x554bc8(0x1ef)]('[INFO]\x20Preparing\x20to\x20delete\x20components'),this[_0x554bc8(0x226)]=_0x10696d[_0x554bc8(0x214)]['length'],await this[_0x554bc8(0x215)](_0x10696d['deleted']));await this['gitUtils'][_0x554bc8(0x207)](),await this[_0x554bc8(0x209)]['send']();_0x3b06df?(this['logger'][_0x554bc8(0x1ef)](_0x554bc8(0x237)),await this[_0x554bc8(0x220)][_0x554bc8(0x21e)](this['mdapiUtils'][_0x554bc8(0x203)]),await this[_0x554bc8(0x220)][_0x554bc8(0x235)](this[_0x554bc8(0x1f5)][_0x554bc8(0x203)]),await this[_0x554bc8(0x220)]['removeDir'](),await this[_0x554bc8(0x209)][_0x554bc8(0x22a)]()):(this[_0x554bc8(0x209)][_0x554bc8(0x1ef)]('[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder'),await this['mdapiUtils'][_0x554bc8(0x218)](this[_0x554bc8(0x1f5)][_0x554bc8(0x203)]));this[_0x554bc8(0x209)][_0x554bc8(0x1ef)]('[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git'),await this[_0x554bc8(0x1f5)][_0x554bc8(0x1eb)](_0x757f5c,{'email':_0x475afb['email'],'name':_0x475afb['name']},_0x108ec7[_0x554bc8(0x1f8)]),await this['gitUtils'][_0x554bc8(0x1f7)](),await this[_0x554bc8(0x238)]['removeDir']();const _0x29f2a4=this['componentsToWrite']+this[_0x554bc8(0x226)];this[_0x554bc8(0x209)][_0x554bc8(0x1ef)](_0x554bc8(0x224)+(Date[_0x554bc8(0x22d)]()-this[_0x554bc8(0x1f1)])+_0x554bc8(0x21d)+_0x29f2a4),await this[_0x554bc8(0x209)][_0x554bc8(0x22a)]();}catch(_0x261a55){this[_0x554bc8(0x20a)](),this[_0x554bc8(0x209)][_0x554bc8(0x1ef)](_0x554bc8(0x22b)+_0x261a55),await this['logger'][_0x554bc8(0x22a)]();throw _0x261a55;}}async[a141_0x538dbe(0x221)](_0x3b5e0a){const _0x4d4aa5=a141_0x538dbe;var _0x3484a1,_0x4171bb,_0xa26d79,_0x3728ec;const _0x376a36=!!((_0x4171bb=(_0x3484a1=_0x3b5e0a[_0x4d4aa5(0x21c)])===null||_0x3484a1===void 0x0?void 0x0:_0x3484a1['writed'])===null||_0x4171bb===void 0x0?void 0x0:_0x4171bb[_0x4d4aa5(0x219)])||!!((_0x3728ec=(_0xa26d79=_0x3b5e0a['components'])===null||_0xa26d79===void 0x0?void 0x0:_0xa26d79[_0x4d4aa5(0x214)])===null||_0x3728ec===void 0x0?void 0x0:_0x3728ec['length']);if(!_0x376a36){this[_0x4d4aa5(0x209)][_0x4d4aa5(0x1ef)](_0x4d4aa5(0x1ee)),await this[_0x4d4aa5(0x209)][_0x4d4aa5(0x22a)]();return;}this[_0x4d4aa5(0x1f0)]=_0x3b5e0a,await this[_0x4d4aa5(0x232)]();}};CommitComponentsJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a141_0x538dbe(0x227),[auth_settings_service_1[a141_0x538dbe(0x1f3)]])],CommitComponentsJob),exports[a141_0x538dbe(0x213)]=CommitComponentsJob;