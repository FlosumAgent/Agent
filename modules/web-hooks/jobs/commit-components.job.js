const a144_0x302e=['[INFO]\x20Writed\x20','splice','17579ByuoMw','writeFlosumComponents','force','clearDir','3497469rBLKoO','send','../../shared/utils','[INFO]\x20Start\x20clonning\x20repository','commitData','groupComponentsByFileName','dir','fileName','22cpUtzJ','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','getOwnPropertyDescriptor','now','gitUrl','defineProperty','[INFO]\x20Deleted\x20','clone','cleanUp','prepareMdapi','mdapiUtils','413501ehIHzN','constructor','return\x20/\x22\x20+\x20this\x20+\x20\x22/','SFDXUtils','[ERROR]\x20','../utils/git.utils','test','__esModule','events','name','__decorate','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','removeDir','1080273gWVdzv','catch','logger','gitUtils','startTime','design:paramtypes','log','copyProjectTo','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','1335769MGnmHY','__importDefault','metadata','GitUtils','email','apply','1238043InAWsf','reduce','length','COMPONENTS_PER_TICK','CommitComponentsJob','deleted','components','writed','fileType','function','../utils/mdapi.utils','\x20components','default','18407BSszgI','[INFO]\x20Start\x20converting\x20to\x20SFDX','sfdxUtils','16wnzNAn','run','[INFO]\x20Preparing\x20to\x20delete\x20components','componentsToDelete','includes','sort','3ZNfeQT','writeComponents','commitAndPush','componentsToWrite','replace','MDApiUtils','../utils/sfdx.utils','__metadata','remote','decorate','removeComponents','authSettings','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder'];function a144_0xf558(_0x4dfbb6,_0x5612b4){return a144_0xf558=function(_0x7fbda5,_0x262c1b){_0x7fbda5=_0x7fbda5-0x7a;let _0x7ea6b8=a144_0x302e[_0x7fbda5];return _0x7ea6b8;},a144_0xf558(_0x4dfbb6,_0x5612b4);}const a144_0x527825=a144_0xf558;(function(_0x4805f8,_0x1dde1d){const _0x2d95aa=a144_0xf558;while(!![]){try{const _0x2aa7e1=-parseInt(_0x2d95aa(0x7e))+-parseInt(_0x2d95aa(0xc9))*-parseInt(_0x2d95aa(0xa3))+parseInt(_0x2d95aa(0x9d))*parseInt(_0x2d95aa(0x9a))+-parseInt(_0x2d95aa(0x87))+-parseInt(_0x2d95aa(0xbe))*parseInt(_0x2d95aa(0xb2))+-parseInt(_0x2d95aa(0x8d))+parseInt(_0x2d95aa(0xb6));if(_0x2aa7e1===_0x1dde1d)break;else _0x4805f8['push'](_0x4805f8['shift']());}catch(_0x42929d){_0x4805f8['push'](_0x4805f8['shift']());}}}(a144_0x302e,0xf21ad));const a144_0x7ea6b8=function(){let _0x43c097=!![];return function(_0xc4b675,_0x291fd5){const _0x536f49=_0x43c097?function(){const _0x1476c7=a144_0xf558;if(_0x291fd5){const _0x588ad4=_0x291fd5[_0x1476c7(0x8c)](_0xc4b675,arguments);return _0x291fd5=null,_0x588ad4;}}:function(){};return _0x43c097=![],_0x536f49;};}(),a144_0x262c1b=a144_0x7ea6b8(this,function(){const _0x16af26=function(){const _0x4609a5=a144_0xf558,_0x6c85a8=_0x16af26[_0x4609a5(0xca)](_0x4609a5(0xcb))()[_0x4609a5(0xca)](_0x4609a5(0x7c));return!_0x6c85a8[_0x4609a5(0xcf)](a144_0x262c1b);};return _0x16af26();});a144_0x262c1b();'use strict';var __decorate=this&&this[a144_0x527825(0x7b)]||function(_0x33b60e,_0x4bd3fe,_0x25d8fa,_0x1ed501){const _0x5d7e16=a144_0x527825;var _0x5499fb=arguments[_0x5d7e16(0x8f)],_0x39de4e=_0x5499fb<0x3?_0x4bd3fe:_0x1ed501===null?_0x1ed501=Object[_0x5d7e16(0xc0)](_0x4bd3fe,_0x25d8fa):_0x1ed501,_0x5e73c0;if(typeof Reflect==='object'&&typeof Reflect[_0x5d7e16(0xac)]===_0x5d7e16(0x96))_0x39de4e=Reflect[_0x5d7e16(0xac)](_0x33b60e,_0x4bd3fe,_0x25d8fa,_0x1ed501);else{for(var _0x1dac9f=_0x33b60e[_0x5d7e16(0x8f)]-0x1;_0x1dac9f>=0x0;_0x1dac9f--)if(_0x5e73c0=_0x33b60e[_0x1dac9f])_0x39de4e=(_0x5499fb<0x3?_0x5e73c0(_0x39de4e):_0x5499fb>0x3?_0x5e73c0(_0x4bd3fe,_0x25d8fa,_0x39de4e):_0x5e73c0(_0x4bd3fe,_0x25d8fa))||_0x39de4e;}return _0x5499fb>0x3&&_0x39de4e&&Object[_0x5d7e16(0xc3)](_0x4bd3fe,_0x25d8fa,_0x39de4e),_0x39de4e;},__metadata=this&&this[a144_0x527825(0xaa)]||function(_0x342a5a,_0x5e2112){const _0x5b9447=a144_0x527825;if(typeof Reflect==='object'&&typeof Reflect[_0x5b9447(0x89)]===_0x5b9447(0x96))return Reflect[_0x5b9447(0x89)](_0x342a5a,_0x5e2112);},__importDefault=this&&this[a144_0x527825(0x88)]||function(_0x34b519){const _0x2ad486=a144_0x527825;return _0x34b519&&_0x34b519[_0x2ad486(0xd0)]?_0x34b519:{'default':_0x34b519};};Object[a144_0x527825(0xc3)](exports,'__esModule',{'value':!![]}),exports[a144_0x527825(0x91)]=void 0x0;const auth_settings_service_1=require('../../shared/services/auth-settings.service'),events_1=__importDefault(require(a144_0x527825(0xd1))),git_utils_1=require(a144_0x527825(0xce)),mdapi_utils_1=require(a144_0x527825(0x97)),sfdx_utils_1=require(a144_0x527825(0xa9)),typedi_1=require('typedi'),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),utils_1=require(a144_0x527825(0xb8));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(_0xa3c9f6){const _0xf5a798=a144_0x527825;super(),this[_0xf5a798(0xae)]=_0xa3c9f6,this[_0xf5a798(0x90)]=0x3e8,this[_0xf5a798(0xa6)]=0x0,this['componentsToDelete']=0x0,this[_0xf5a798(0x82)]=Date[_0xf5a798(0xc1)]();}get[a144_0x527825(0xab)](){const _0x5b42c7=a144_0x527825,{repo:_0x4b2aec}=this[_0x5b42c7(0xba)],{gitCredentials:_0x5445cd}=this['authSettings'];return _0x4b2aec[_0x5b42c7(0xc2)][_0x5b42c7(0xa7)](/http(s)?\:\/\/(.+@)?/,utils_1['getProtocol'](_0x4b2aec[_0x5b42c7(0xc2)])+'://'+_0x5445cd+'@');}[a144_0x527825(0xbb)](_0x4b8227){const _0x3287e6=a144_0x527825;var _0x5e6879;_0x4b8227[_0x3287e6(0xa2)](_0x592c81=>child_types_1['default'][_0x3287e6(0xa1)](_0x592c81[_0x3287e6(0x95)])?0x1:-0x1);const _0x242276={};for(const _0x3957b9 of _0x4b8227){_0x242276[_0x5e6879=_0x3957b9[_0x3287e6(0xbd)]]||(_0x242276[_0x5e6879]=[]),_0x242276[_0x3957b9[_0x3287e6(0xbd)]]['push'](_0x3957b9);}return Object['values'](_0x242276)[_0x3287e6(0x8e)]((_0x1440a6,_0x3210cb)=>[..._0x1440a6,..._0x3210cb],[]);}async[a144_0x527825(0xa4)](_0x23e3d0){const _0x2e8cec=a144_0x527825;_0x23e3d0=this[_0x2e8cec(0xbb)](_0x23e3d0);let _0x201f99=0x0;while(_0x23e3d0['length']){const _0x235c8c=_0x23e3d0[_0x2e8cec(0xb1)](0x0,this[_0x2e8cec(0x90)]);await this[_0x2e8cec(0xc8)][_0x2e8cec(0xb3)](_0x235c8c),_0x201f99+=_0x235c8c[_0x2e8cec(0x8f)],this[_0x2e8cec(0x80)][_0x2e8cec(0x84)](_0x2e8cec(0xb0)+_0x201f99+'/'+this[_0x2e8cec(0xa6)]+_0x2e8cec(0x98)),await this['logger'][_0x2e8cec(0xb7)]();}}async['removeComponents'](_0x469fb0){const _0x15a906=a144_0x527825;_0x469fb0['sort'](_0x3a25fe=>child_types_1[_0x15a906(0x99)]['includes'](_0x3a25fe['type'])?-0x1:0x1);let _0x49780b=0x0;while(_0x469fb0[_0x15a906(0x8f)]){const _0x535490=_0x469fb0['splice'](0x0,this[_0x15a906(0x90)]);await this[_0x15a906(0xc8)][_0x15a906(0xad)](_0x535490),_0x49780b+=_0x535490[_0x15a906(0x8f)],this[_0x15a906(0x80)][_0x15a906(0x84)](_0x15a906(0xc4)+_0x49780b+'/'+this[_0x15a906(0xa0)]+'\x20components'),await this[_0x15a906(0x80)][_0x15a906(0xb7)]();}}async[a144_0x527825(0xc6)](){const _0x181175=a144_0x527825;this[_0x181175(0x81)]&&await this[_0x181175(0x81)][_0x181175(0x7d)]()[_0x181175(0x7f)](()=>void 0x0),this['mdapiUtils']&&await this[_0x181175(0xc8)]['removeDir']()[_0x181175(0x7f)](()=>void 0x0),this[_0x181175(0x9c)]&&await this[_0x181175(0x9c)][_0x181175(0x7d)]()[_0x181175(0x7f)](()=>void 0x0);}async['exec'](){const _0x4ce9f6=a144_0x527825,{repo:_0x2ddf2c,branch:_0x21e3a9,components:_0x4a48e5,convertToSFDX:_0xd1f5ec,message:_0x34c5e9,user:_0x101227}=this[_0x4ce9f6(0xba)];this[_0x4ce9f6(0xc8)]=new mdapi_utils_1[(_0x4ce9f6(0xa8))](_0x2ddf2c[_0x4ce9f6(0x7a)],_0x21e3a9[_0x4ce9f6(0x7a)]),this['gitUtils']=new git_utils_1[(_0x4ce9f6(0x8a))](this[_0x4ce9f6(0xab)]),this['sfdxUtils']=new sfdx_utils_1[(_0x4ce9f6(0xcc))](_0x2ddf2c['name'],_0x21e3a9[_0x4ce9f6(0x7a)]);try{this['logger']['log'](_0x4ce9f6(0xb9)),await this[_0x4ce9f6(0x81)][_0x4ce9f6(0xc5)](_0x21e3a9['name'],_0x2ddf2c[_0x4ce9f6(0x7a)]);!this['commitData'][_0x4ce9f6(0xb4)]?(this[_0x4ce9f6(0x80)][_0x4ce9f6(0x84)]('[INFO]\x20Prepare\x20mdapi\x20files'),await this[_0x4ce9f6(0xc8)][_0x4ce9f6(0xc7)](this[_0x4ce9f6(0x81)][_0x4ce9f6(0xbc)])):this[_0x4ce9f6(0x80)][_0x4ce9f6(0x84)](_0x4ce9f6(0xbf));_0x4a48e5[_0x4ce9f6(0x94)]&&(this['logger'][_0x4ce9f6(0x84)]('[INFO]\x20Preparing\x20to\x20write\x20components'),this[_0x4ce9f6(0xa6)]=_0x4a48e5[_0x4ce9f6(0x94)][_0x4ce9f6(0x8f)],await this[_0x4ce9f6(0xa4)](_0x4a48e5[_0x4ce9f6(0x94)]));_0x4a48e5['deleted']&&(this[_0x4ce9f6(0x80)]['log'](_0x4ce9f6(0x9f)),this[_0x4ce9f6(0xa0)]=_0x4a48e5[_0x4ce9f6(0x92)][_0x4ce9f6(0x8f)],await this[_0x4ce9f6(0xad)](_0x4a48e5[_0x4ce9f6(0x92)]));await this[_0x4ce9f6(0x81)][_0x4ce9f6(0xb5)](),await this[_0x4ce9f6(0x80)]['send']();_0xd1f5ec?(this[_0x4ce9f6(0x80)][_0x4ce9f6(0x84)](_0x4ce9f6(0x9b)),await this[_0x4ce9f6(0x9c)]['createProjectFrom'](this[_0x4ce9f6(0xc8)]['dir']),await this['sfdxUtils'][_0x4ce9f6(0x85)](this[_0x4ce9f6(0x81)][_0x4ce9f6(0xbc)]),await this[_0x4ce9f6(0x9c)][_0x4ce9f6(0x7d)](),await this[_0x4ce9f6(0x80)][_0x4ce9f6(0xb7)]()):(this[_0x4ce9f6(0x80)][_0x4ce9f6(0x84)](_0x4ce9f6(0xaf)),await this['mdapiUtils']['copyMdapiTo'](this[_0x4ce9f6(0x81)][_0x4ce9f6(0xbc)]));this['logger'][_0x4ce9f6(0x84)]('[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git'),await this[_0x4ce9f6(0x81)][_0x4ce9f6(0xa5)](_0x34c5e9,{'email':_0x101227[_0x4ce9f6(0x8b)],'name':_0x101227[_0x4ce9f6(0x7a)]},_0x21e3a9[_0x4ce9f6(0x7a)]),await this[_0x4ce9f6(0x81)]['removeDir'](),await this[_0x4ce9f6(0xc8)][_0x4ce9f6(0x7d)]();const _0x566a5d=this['componentsToWrite']+this[_0x4ce9f6(0xa0)];this['logger'][_0x4ce9f6(0x84)](_0x4ce9f6(0x86)+(Date[_0x4ce9f6(0xc1)]()-this[_0x4ce9f6(0x82)])+'ms.\x20Commited\x20components\x20-\x20'+_0x566a5d),await this['logger'][_0x4ce9f6(0xb7)]();}catch(_0x33325a){await this[_0x4ce9f6(0xc6)](),this[_0x4ce9f6(0x80)][_0x4ce9f6(0x84)](_0x4ce9f6(0xcd)+_0x33325a),await this[_0x4ce9f6(0x80)][_0x4ce9f6(0xb7)]();throw _0x33325a;}}async[a144_0x527825(0x9e)](_0x1254d5){const _0x13f879=a144_0x527825;var _0x2a2b1c,_0x549b5a,_0x1e4239,_0x320f97;const _0x758a29=!!((_0x549b5a=(_0x2a2b1c=_0x1254d5[_0x13f879(0x93)])===null||_0x2a2b1c===void 0x0?void 0x0:_0x2a2b1c[_0x13f879(0x94)])===null||_0x549b5a===void 0x0?void 0x0:_0x549b5a[_0x13f879(0x8f)])||!!((_0x320f97=(_0x1e4239=_0x1254d5['components'])===null||_0x1e4239===void 0x0?void 0x0:_0x1e4239['deleted'])===null||_0x320f97===void 0x0?void 0x0:_0x320f97[_0x13f879(0x8f)]);if(!_0x758a29){this['logger'][_0x13f879(0x84)]('[INFO]\x20Nothing\x20to\x20commit.\x20Skip.'),await this[_0x13f879(0x80)][_0x13f879(0xb7)]();return;}this[_0x13f879(0xba)]=_0x1254d5,await this['exec']();}};CommitComponentsJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a144_0x527825(0x83),[auth_settings_service_1['AuthSettingsService']])],CommitComponentsJob),exports[a144_0x527825(0x91)]=CommitComponentsJob;