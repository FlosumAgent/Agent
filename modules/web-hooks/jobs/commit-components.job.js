const a173_0x4be197=a173_0x31c1;(function(_0x64e1ab,_0x2b3c65){const _0x5bbd1b=a173_0x31c1,_0xca94f3=_0x64e1ab();while(!![]){try{const _0x48a1e5=-parseInt(_0x5bbd1b(0x1c1))/0x1+-parseInt(_0x5bbd1b(0x1dc))/0x2*(parseInt(_0x5bbd1b(0x1fd))/0x3)+-parseInt(_0x5bbd1b(0x1f5))/0x4+-parseInt(_0x5bbd1b(0x1ad))/0x5*(-parseInt(_0x5bbd1b(0x1ec))/0x6)+parseInt(_0x5bbd1b(0x1da))/0x7*(parseInt(_0x5bbd1b(0x205))/0x8)+-parseInt(_0x5bbd1b(0x1f9))/0x9*(parseInt(_0x5bbd1b(0x1df))/0xa)+parseInt(_0x5bbd1b(0x1c9))/0xb;if(_0x48a1e5===_0x2b3c65)break;else _0xca94f3['push'](_0xca94f3['shift']());}catch(_0x520913){_0xca94f3['push'](_0xca94f3['shift']());}}}(a173_0x51da,0xa8117));function a173_0x31c1(_0x253774,_0x3f7a5b){const _0x839faa=a173_0x51da();return a173_0x31c1=function(_0x101f46,_0x964173){_0x101f46=_0x101f46-0x1a1;let _0x51dad1=_0x839faa[_0x101f46];return _0x51dad1;},a173_0x31c1(_0x253774,_0x3f7a5b);}const a173_0x964173=function(){let _0x10b794=!![];return function(_0x13caf3,_0x3ade19){const _0xce3a3c=_0x10b794?function(){const _0x15abdc=a173_0x31c1;if(_0x3ade19){const _0x5a2755=_0x3ade19[_0x15abdc(0x1b2)](_0x13caf3,arguments);return _0x3ade19=null,_0x5a2755;}}:function(){};return _0x10b794=![],_0xce3a3c;};}(),a173_0x101f46=a173_0x964173(this,function(){const _0x52f1e9=a173_0x31c1;return a173_0x101f46[_0x52f1e9(0x1ea)]()[_0x52f1e9(0x1d3)](_0x52f1e9(0x1cd))['toString']()[_0x52f1e9(0x1ce)](a173_0x101f46)[_0x52f1e9(0x1d3)](_0x52f1e9(0x1cd));});a173_0x101f46();'use strict';var __decorate=this&&this[a173_0x4be197(0x200)]||function(_0x57c330,_0x4e066d,_0x4c13bc,_0xf990c8){const _0x3e3ebf=a173_0x4be197;var _0x37b3df=arguments['length'],_0x526531=_0x37b3df<0x3?_0x4e066d:_0xf990c8===null?_0xf990c8=Object['getOwnPropertyDescriptor'](_0x4e066d,_0x4c13bc):_0xf990c8,_0x89fcf1;if(typeof Reflect===_0x3e3ebf(0x1b7)&&typeof Reflect['decorate']===_0x3e3ebf(0x1cc))_0x526531=Reflect[_0x3e3ebf(0x1fa)](_0x57c330,_0x4e066d,_0x4c13bc,_0xf990c8);else{for(var _0x2b9bf8=_0x57c330[_0x3e3ebf(0x1e2)]-0x1;_0x2b9bf8>=0x0;_0x2b9bf8--)if(_0x89fcf1=_0x57c330[_0x2b9bf8])_0x526531=(_0x37b3df<0x3?_0x89fcf1(_0x526531):_0x37b3df>0x3?_0x89fcf1(_0x4e066d,_0x4c13bc,_0x526531):_0x89fcf1(_0x4e066d,_0x4c13bc))||_0x526531;}return _0x37b3df>0x3&&_0x526531&&Object[_0x3e3ebf(0x1ee)](_0x4e066d,_0x4c13bc,_0x526531),_0x526531;},__metadata=this&&this[a173_0x4be197(0x1f6)]||function(_0x15db67,_0x5b16ec){const _0x17ba0d=a173_0x4be197;if(typeof Reflect===_0x17ba0d(0x1b7)&&typeof Reflect[_0x17ba0d(0x1aa)]==='function')return Reflect[_0x17ba0d(0x1aa)](_0x15db67,_0x5b16ec);},__importDefault=this&&this[a173_0x4be197(0x1c7)]||function(_0x459f31){const _0x557999=a173_0x4be197;return _0x459f31&&_0x459f31[_0x557999(0x1c0)]?_0x459f31:{'default':_0x459f31};};Object[a173_0x4be197(0x1ee)](exports,a173_0x4be197(0x1c0),{'value':!![]}),exports[a173_0x4be197(0x1b3)]=void 0x0;const auth_settings_service_1=require(a173_0x4be197(0x1c3)),events_1=__importDefault(require(a173_0x4be197(0x204))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a173_0x4be197(0x1d6)),typedi_1=require(a173_0x4be197(0x1a5)),child_types_1=__importDefault(require(a173_0x4be197(0x1e8))),utils_1=require('../../shared/utils'),salesforce_logger_v2_service_1=require(a173_0x4be197(0x1cb));let CommitComponentsJob=class CommitComponentsJob extends events_1[a173_0x4be197(0x1bc)]{constructor(_0x5b75ba){const _0x5236d8=a173_0x4be197;super(),this[_0x5236d8(0x1e5)]=_0x5b75ba,this[_0x5236d8(0x1d8)]=0x3e8,this[_0x5236d8(0x201)]=0x0,this[_0x5236d8(0x1a4)]=0x0,this[_0x5236d8(0x1dd)]=Date[_0x5236d8(0x1d4)]();}get[a173_0x4be197(0x1be)](){const _0x5c1da0=a173_0x4be197,{repo:_0x225927}=this[_0x5c1da0(0x1fe)],_0x5e52f4=this[_0x5c1da0(0x1e5)][_0x5c1da0(0x1a6)](this[_0x5c1da0(0x1fe)][_0x5c1da0(0x1bd)]);return _0x225927[_0x5c1da0(0x1e3)][_0x5c1da0(0x1ba)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x5c1da0(0x1a1)](_0x225927['gitUrl'])+_0x5c1da0(0x1d5)+_0x5e52f4+'@');}[a173_0x4be197(0x1cf)](_0x4d7caa){const _0x53dcab=a173_0x4be197;var _0x312c88;_0x4d7caa[_0x53dcab(0x1a3)](_0x1c1ed0=>child_types_1['default'][_0x53dcab(0x1b6)](_0x1c1ed0[_0x53dcab(0x1e6)])?0x1:-0x1);const _0x554016={};for(const _0x6973f0 of _0x4d7caa){_0x554016[_0x312c88=_0x6973f0[_0x53dcab(0x1f3)]]||(_0x554016[_0x312c88]=[]),_0x554016[_0x6973f0[_0x53dcab(0x1f3)]][_0x53dcab(0x1a2)](_0x6973f0);}return Object[_0x53dcab(0x1ab)](_0x554016)['reduce']((_0x29477c,_0x1dee9e)=>[..._0x29477c,..._0x1dee9e],[]);}async[a173_0x4be197(0x1ed)](_0x739e27){const _0x1ff69a=a173_0x4be197;_0x739e27=this[_0x1ff69a(0x1cf)](_0x739e27);let _0x4089f0=0x0;while(_0x739e27['length']){const _0x3f73ae=_0x739e27[_0x1ff69a(0x1d0)](0x0,this[_0x1ff69a(0x1d8)]);await this[_0x1ff69a(0x1ac)][_0x1ff69a(0x1b1)](_0x3f73ae,{'skipChildErrors':this[_0x1ff69a(0x1fe)][_0x1ff69a(0x1b0)][_0x1ff69a(0x1c6)]==='master'}),_0x4089f0+=_0x3f73ae[_0x1ff69a(0x1e2)],this['sfLogger'][_0x1ff69a(0x1b8)](_0x1ff69a(0x1e9)+_0x4089f0+'/'+this[_0x1ff69a(0x201)]+_0x1ff69a(0x1f0)),await this[_0x1ff69a(0x1de)]['send']();}}async['removeComponents'](_0x3ec32b){const _0x5c6d99=a173_0x4be197;_0x3ec32b['sort'](_0xa7c988=>child_types_1[_0x5c6d99(0x1bc)][_0x5c6d99(0x1b6)](_0xa7c988[_0x5c6d99(0x1d2)])?-0x1:0x1);let _0x2c9b45=0x0;while(_0x3ec32b['length']){const _0x2bee6d=_0x3ec32b[_0x5c6d99(0x1d0)](0x0,this[_0x5c6d99(0x1d8)]);await this[_0x5c6d99(0x1ac)][_0x5c6d99(0x1bf)](_0x2bee6d),_0x2c9b45+=_0x2bee6d[_0x5c6d99(0x1e2)],this[_0x5c6d99(0x1de)]['log'](_0x5c6d99(0x1fc)+_0x2c9b45+'/'+this['componentsToDelete']+_0x5c6d99(0x1f0)),await this[_0x5c6d99(0x1de)]['send']();}}async[a173_0x4be197(0x1af)](){const _0x2852ae=a173_0x4be197;this[_0x2852ae(0x1d7)]&&await this[_0x2852ae(0x1d7)][_0x2852ae(0x1ca)]()[_0x2852ae(0x1d1)](()=>void 0x0),this[_0x2852ae(0x1ac)]&&await this[_0x2852ae(0x1ac)][_0x2852ae(0x1ca)]()[_0x2852ae(0x1d1)](()=>void 0x0),this[_0x2852ae(0x1f4)]&&await this[_0x2852ae(0x1f4)][_0x2852ae(0x1ca)]()[_0x2852ae(0x1d1)](()=>void 0x0);}async[a173_0x4be197(0x1e4)](){const _0x348d47=a173_0x4be197,{repo:_0x3378e7,branch:_0x4c456b,components:_0x3fb845,convertToSFDX:_0x2fa986,message:_0x4971d0,user:_0x2a06da}=this[_0x348d47(0x1fe)];this['mdapiUtils']=new mdapi_utils_1[(_0x348d47(0x1ff))](_0x3378e7[_0x348d47(0x1c6)],_0x4c456b[_0x348d47(0x1c6)]),this[_0x348d47(0x1d7)]=new git_utils_1['GitUtils'](this[_0x348d47(0x1be)]),this[_0x348d47(0x1f4)]=new sfdx_utils_1['SFDXUtils'](_0x3378e7[_0x348d47(0x1c6)],_0x4c456b['name']);try{this[_0x348d47(0x1de)][_0x348d47(0x1b8)](_0x348d47(0x206)),await this[_0x348d47(0x1d7)]['clone'](_0x4c456b[_0x348d47(0x1c6)],_0x3378e7[_0x348d47(0x1c6)]);!this[_0x348d47(0x1fe)]['force']?(this['sfLogger'][_0x348d47(0x1b8)]('[INFO]\x20Prepare\x20mdapi\x20files'),await this[_0x348d47(0x1ac)][_0x348d47(0x1db)](this[_0x348d47(0x1d7)][_0x348d47(0x1b4)])):this[_0x348d47(0x1de)][_0x348d47(0x1b8)]('[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');_0x3fb845['writed']&&(this[_0x348d47(0x1de)][_0x348d47(0x1b8)](_0x348d47(0x1b5)),this['componentsToWrite']=_0x3fb845[_0x348d47(0x1f8)]['length'],await this[_0x348d47(0x1ed)](_0x3fb845[_0x348d47(0x1f8)]),await this[_0x348d47(0x1de)][_0x348d47(0x203)]());_0x3fb845[_0x348d47(0x1f7)]&&(this['sfLogger'][_0x348d47(0x1b8)]('[INFO]\x20Preparing\x20to\x20delete\x20components'),this[_0x348d47(0x1a4)]=_0x3fb845['deleted']['length'],await this[_0x348d47(0x1bf)](_0x3fb845[_0x348d47(0x1f7)]),await this['sfLogger'][_0x348d47(0x203)]());await this[_0x348d47(0x1d7)][_0x348d47(0x1c2)](),await this['sfLogger'][_0x348d47(0x203)]();_0x2fa986?(this[_0x348d47(0x1de)][_0x348d47(0x1b8)](_0x348d47(0x1a7)),await this[_0x348d47(0x1f4)][_0x348d47(0x1e7)](this[_0x348d47(0x1ac)]['dir']),await this[_0x348d47(0x1f4)][_0x348d47(0x1c4)](this['gitUtils'][_0x348d47(0x1b4)]),await this[_0x348d47(0x1f4)][_0x348d47(0x1ca)](),await this['sfLogger']['send']()):(this[_0x348d47(0x1de)][_0x348d47(0x1b8)](_0x348d47(0x1f1)),await this['mdapiUtils'][_0x348d47(0x1ef)](this[_0x348d47(0x1d7)][_0x348d47(0x1b4)]),await this[_0x348d47(0x1de)][_0x348d47(0x203)]());this[_0x348d47(0x1de)][_0x348d47(0x1b8)](_0x348d47(0x1e1)),await this[_0x348d47(0x1d7)][_0x348d47(0x1d9)](_0x4971d0,{'email':_0x2a06da[_0x348d47(0x1e0)],'name':_0x2a06da['name']},_0x4c456b[_0x348d47(0x1c6)]),await this[_0x348d47(0x1d7)][_0x348d47(0x1ca)](),await this['mdapiUtils']['removeDir']();const _0x51332e=this[_0x348d47(0x201)]+this[_0x348d47(0x1a4)];this['sfLogger'][_0x348d47(0x1b8)](_0x348d47(0x202)+(Date[_0x348d47(0x1d4)]()-this[_0x348d47(0x1dd)])+_0x348d47(0x1f2)+_0x51332e),await this[_0x348d47(0x1de)][_0x348d47(0x203)]();}catch(_0x45444c){await this['cleanUp'](),this[_0x348d47(0x1de)][_0x348d47(0x1b8)](_0x348d47(0x1c5)+_0x45444c),await this['sfLogger'][_0x348d47(0x203)]();throw _0x45444c;}}async[a173_0x4be197(0x1eb)](_0x227450,_0xc0df9){const _0x584387=a173_0x4be197;var _0x63ed16,_0x543082,_0xe413df,_0x48265a;this[_0x584387(0x1de)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0xc0df9[_0x584387(0x1bb)](),_0xc0df9[_0x584387(0x1a9)]()+_0x584387(0x1c8));const _0x4e68e0=!!((_0x543082=(_0x63ed16=_0x227450[_0x584387(0x1a8)])===null||_0x63ed16===void 0x0?void 0x0:_0x63ed16[_0x584387(0x1f8)])===null||_0x543082===void 0x0?void 0x0:_0x543082[_0x584387(0x1e2)])||!!((_0x48265a=(_0xe413df=_0x227450[_0x584387(0x1a8)])===null||_0xe413df===void 0x0?void 0x0:_0xe413df[_0x584387(0x1f7)])===null||_0x48265a===void 0x0?void 0x0:_0x48265a[_0x584387(0x1e2)]);if(!_0x4e68e0){this[_0x584387(0x1de)][_0x584387(0x1b8)](_0x584387(0x1fb)),await this[_0x584387(0x1de)][_0x584387(0x203)]();return;}this[_0x584387(0x1fe)]=_0x227450,await this[_0x584387(0x1e4)]();}};CommitComponentsJob=__decorate([typedi_1[a173_0x4be197(0x1b9)]({'transient':!![]}),__metadata(a173_0x4be197(0x1ae),[auth_settings_service_1['AuthSettingsService']])],CommitComponentsJob),exports[a173_0x4be197(0x1b3)]=CommitComponentsJob;function a173_0x51da(){const _0xecbec4=['push','sort','componentsToDelete','typedi','getCredentialsFor','[INFO]\x20Start\x20converting\x20to\x20SFDX','components','getPrefix','metadata','values','mdapiUtils','1481790lPlNEr','design:paramtypes','cleanUp','branch','writeFlosumComponents','apply','CommitComponentsJob','dir','[INFO]\x20Preparing\x20to\x20write\x20components','includes','object','log','Service','replace','getLoggerId','default','provider','remote','removeComponents','__esModule','771586VhHDgm','clearDir','../../shared/services/auth-settings.service','copyProjectTo','[ERROR]\x20','name','__importDefault','\x20[COMMIT]','28543724AytCsy','removeDir','../../salesforce/services/salesforce-logger-v2.service','function','(((.+)+)+)+$','constructor','groupComponentsByFileName','splice','catch','type','search','now','://','../utils/sfdx.utils','gitUtils','COMPONENTS_PER_TICK','commitAndPush','1292284nvLfWN','prepareMdapi','2JqBxAV','startTime','sfLogger','10TxLSIr','email','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','length','gitUrl','exec','authSettings','fileType','createProjectFrom','../../parsers/data/child-types','[INFO]\x20Writed\x20','toString','run','6mPmmub','writeComponents','defineProperty','copyMdapiTo','\x20components','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','ms.\x20Commited\x20components\x20-\x20','fileName','sfdxUtils','1665784eYPQrZ','__metadata','deleted','writed','10908738TfYlSY','decorate','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','[INFO]\x20Deleted\x20','1623507HMnjwN','commitData','MDApiUtils','__decorate','componentsToWrite','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','send','events','32mDAmxi','[INFO]\x20Start\x20clonning\x20repository','getProtocol'];a173_0x51da=function(){return _0xecbec4;};return a173_0x51da();}