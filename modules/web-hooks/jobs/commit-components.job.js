const a145_0x4fe6bf=a145_0x4f45;function a145_0x4bfc(){const _0xb236df=['apply','cleanUp','../../shared/services/auth-settings.service','componentsToWrite','__decorate','5428704GrZkRI','clearDir','metadata','removeComponents','AuthSettingsService','COMPONENTS_PER_TICK','run','now','6168071LQXtcS','../utils/git.utils','values','name','default','constructor','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','components','createProjectFrom','startTime','sfdxUtils','sort','decorate','[INFO]\x20Writed\x20','authSettings','catch','clone','[INFO]\x20Start\x20clonning\x20repository','writed','236884zRQnOq','includes','MDApiUtils','search','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','../utils/mdapi.utils','defineProperty','12UJFrqa','\x20components','toString','length','../../parsers/mdapi/child-types','log','copyProjectTo','logger','prepareMdapi','2057682BcRarx','getProtocol','splice','SFDXUtils','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','10sqEOWK','object','email','dir','fileName','1986830pjfnwI','copyMdapiTo','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','7117785WHynHI','1jMVeHY','118268zfZeLE','(((.+)+)+)+$','events','[INFO]\x20Deleted\x20','../utils/sfdx.utils','removeDir','mdapiUtils','__metadata','writeComponents','[INFO]\x20Prepare\x20mdapi\x20files','[INFO]\x20Start\x20converting\x20to\x20SFDX','remote','componentsToDelete','function','type','ms.\x20Commited\x20components\x20-\x20','Service','fileType','send','commitData','deleted','gitUrl','__esModule','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','../../shared/utils','gitUtils','groupComponentsByFileName'];a145_0x4bfc=function(){return _0xb236df;};return a145_0x4bfc();}(function(_0x1c8957,_0x1af521){const _0x37c265=a145_0x4f45,_0xbddc40=_0x1c8957();while(!![]){try{const _0x4107ca=parseInt(_0x37c265(0x201))/0x1*(parseInt(_0x37c265(0x202))/0x2)+-parseInt(_0x37c265(0x1ea))/0x3*(-parseInt(_0x37c265(0x1e3))/0x4)+parseInt(_0x37c265(0x1fd))/0x5+parseInt(_0x37c265(0x1f3))/0x6+parseInt(_0x37c265(0x1d0))/0x7+-parseInt(_0x37c265(0x1c8))/0x8+parseInt(_0x37c265(0x200))/0x9*(-parseInt(_0x37c265(0x1f8))/0xa);if(_0x4107ca===_0x1af521)break;else _0xbddc40['push'](_0xbddc40['shift']());}catch(_0x4aa601){_0xbddc40['push'](_0xbddc40['shift']());}}}(a145_0x4bfc,0x6d61f));function a145_0x4f45(_0x34ad08,_0x1cde20){const _0x53bcdb=a145_0x4bfc();return a145_0x4f45=function(_0x44d795,_0x62006c){_0x44d795=_0x44d795-0x1b2;let _0x4bfc2d=_0x53bcdb[_0x44d795];return _0x4bfc2d;},a145_0x4f45(_0x34ad08,_0x1cde20);}const a145_0x62006c=function(){let _0x27c6b9=!![];return function(_0x4bebb5,_0x2d6bfc){const _0x4a7e9f=_0x27c6b9?function(){const _0x25b79b=a145_0x4f45;if(_0x2d6bfc){const _0x5212ed=_0x2d6bfc[_0x25b79b(0x1c3)](_0x4bebb5,arguments);return _0x2d6bfc=null,_0x5212ed;}}:function(){};return _0x27c6b9=![],_0x4a7e9f;};}(),a145_0x44d795=a145_0x62006c(this,function(){const _0x5de017=a145_0x4f45;return a145_0x44d795[_0x5de017(0x1ec)]()[_0x5de017(0x1e6)]('(((.+)+)+)+$')[_0x5de017(0x1ec)]()[_0x5de017(0x1d5)](a145_0x44d795)[_0x5de017(0x1e6)](_0x5de017(0x203));});a145_0x44d795();'use strict';var __decorate=this&&this[a145_0x4fe6bf(0x1c7)]||function(_0x1d03ad,_0x252e30,_0x11e836,_0x104ab5){const _0x527e18=a145_0x4fe6bf;var _0x1193ed=arguments['length'],_0x47961=_0x1193ed<0x3?_0x252e30:_0x104ab5===null?_0x104ab5=Object['getOwnPropertyDescriptor'](_0x252e30,_0x11e836):_0x104ab5,_0x2b38b1;if(typeof Reflect==='object'&&typeof Reflect[_0x527e18(0x1dc)]===_0x527e18(0x1b5))_0x47961=Reflect[_0x527e18(0x1dc)](_0x1d03ad,_0x252e30,_0x11e836,_0x104ab5);else{for(var _0x4837db=_0x1d03ad[_0x527e18(0x1ed)]-0x1;_0x4837db>=0x0;_0x4837db--)if(_0x2b38b1=_0x1d03ad[_0x4837db])_0x47961=(_0x1193ed<0x3?_0x2b38b1(_0x47961):_0x1193ed>0x3?_0x2b38b1(_0x252e30,_0x11e836,_0x47961):_0x2b38b1(_0x252e30,_0x11e836))||_0x47961;}return _0x1193ed>0x3&&_0x47961&&Object[_0x527e18(0x1e9)](_0x252e30,_0x11e836,_0x47961),_0x47961;},__metadata=this&&this[a145_0x4fe6bf(0x209)]||function(_0x39264d,_0x4f4e80){const _0x373de8=a145_0x4fe6bf;if(typeof Reflect===_0x373de8(0x1f9)&&typeof Reflect[_0x373de8(0x1ca)]==='function')return Reflect[_0x373de8(0x1ca)](_0x39264d,_0x4f4e80);},__importDefault=this&&this['__importDefault']||function(_0x2cbeb9){const _0x60aef6=a145_0x4fe6bf;return _0x2cbeb9&&_0x2cbeb9[_0x60aef6(0x1be)]?_0x2cbeb9:{'default':_0x2cbeb9};};Object['defineProperty'](exports,a145_0x4fe6bf(0x1be),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const auth_settings_service_1=require(a145_0x4fe6bf(0x1c5)),events_1=__importDefault(require(a145_0x4fe6bf(0x204))),git_utils_1=require(a145_0x4fe6bf(0x1d1)),mdapi_utils_1=require(a145_0x4fe6bf(0x1e8)),sfdx_utils_1=require(a145_0x4fe6bf(0x206)),typedi_1=require('typedi'),child_types_1=__importDefault(require(a145_0x4fe6bf(0x1ee))),utils_1=require(a145_0x4fe6bf(0x1c0));let CommitComponentsJob=class CommitComponentsJob extends events_1[a145_0x4fe6bf(0x1d4)]{constructor(_0x36fa4c){const _0x50fae6=a145_0x4fe6bf;super(),this['authSettings']=_0x36fa4c,this['COMPONENTS_PER_TICK']=0x3e8,this[_0x50fae6(0x1c6)]=0x0,this[_0x50fae6(0x1b4)]=0x0,this[_0x50fae6(0x1d9)]=Date[_0x50fae6(0x1cf)]();}get[a145_0x4fe6bf(0x1b3)](){const _0xf89bf0=a145_0x4fe6bf,{repo:_0x2807fa}=this[_0xf89bf0(0x1bb)],{gitCredentials:_0x438aca}=this[_0xf89bf0(0x1de)];return _0x2807fa[_0xf89bf0(0x1bd)]['replace'](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0xf89bf0(0x1f4)])(_0x2807fa[_0xf89bf0(0x1bd)])+'://'+_0x438aca+'@');}[a145_0x4fe6bf(0x1c2)](_0x5c6959){const _0x546b77=a145_0x4fe6bf;var _0x4a3124;_0x5c6959[_0x546b77(0x1db)](_0x5d92d0=>child_types_1[_0x546b77(0x1d4)][_0x546b77(0x1e4)](_0x5d92d0[_0x546b77(0x1b9)])?0x1:-0x1);const _0x1b3d8e={};for(const _0x324127 of _0x5c6959){_0x1b3d8e[_0x4a3124=_0x324127[_0x546b77(0x1fc)]]||(_0x1b3d8e[_0x4a3124]=[]),_0x1b3d8e[_0x324127[_0x546b77(0x1fc)]]['push'](_0x324127);}return Object[_0x546b77(0x1d2)](_0x1b3d8e)['reduce']((_0xaf8d7b,_0x14aff4)=>[..._0xaf8d7b,..._0x14aff4],[]);}async[a145_0x4fe6bf(0x20a)](_0x104c29){const _0x1dbe5e=a145_0x4fe6bf;_0x104c29=this['groupComponentsByFileName'](_0x104c29);let _0xe5c0af=0x0;while(_0x104c29['length']){const _0x5ddcc=_0x104c29['splice'](0x0,this[_0x1dbe5e(0x1cd)]);await this[_0x1dbe5e(0x208)]['writeFlosumComponents'](_0x5ddcc),_0xe5c0af+=_0x5ddcc[_0x1dbe5e(0x1ed)],this[_0x1dbe5e(0x1f1)][_0x1dbe5e(0x1ef)](_0x1dbe5e(0x1dd)+_0xe5c0af+'/'+this[_0x1dbe5e(0x1c6)]+_0x1dbe5e(0x1eb)),await this[_0x1dbe5e(0x1f1)]['send']();}}async['removeComponents'](_0xb35189){const _0x37cd17=a145_0x4fe6bf;_0xb35189[_0x37cd17(0x1db)](_0xbd6eaa=>child_types_1[_0x37cd17(0x1d4)]['includes'](_0xbd6eaa[_0x37cd17(0x1b6)])?-0x1:0x1);let _0x38a60a=0x0;while(_0xb35189[_0x37cd17(0x1ed)]){const _0x5a7044=_0xb35189[_0x37cd17(0x1f5)](0x0,this[_0x37cd17(0x1cd)]);await this[_0x37cd17(0x208)][_0x37cd17(0x1cb)](_0x5a7044),_0x38a60a+=_0x5a7044['length'],this['logger'][_0x37cd17(0x1ef)](_0x37cd17(0x205)+_0x38a60a+'/'+this['componentsToDelete']+_0x37cd17(0x1eb)),await this[_0x37cd17(0x1f1)][_0x37cd17(0x1ba)]();}}async['cleanUp'](){const _0x59ad0d=a145_0x4fe6bf;this[_0x59ad0d(0x1c1)]&&await this['gitUtils'][_0x59ad0d(0x207)]()[_0x59ad0d(0x1df)](()=>void 0x0),this[_0x59ad0d(0x208)]&&await this['mdapiUtils'][_0x59ad0d(0x207)]()[_0x59ad0d(0x1df)](()=>void 0x0),this[_0x59ad0d(0x1da)]&&await this[_0x59ad0d(0x1da)]['removeDir']()[_0x59ad0d(0x1df)](()=>void 0x0);}async['exec'](){const _0x21a723=a145_0x4fe6bf,{repo:_0x4a8419,branch:_0xc09725,components:_0x103541,convertToSFDX:_0x4256a5,message:_0x35bc79,user:_0x4d68d4}=this[_0x21a723(0x1bb)];this['mdapiUtils']=new mdapi_utils_1[(_0x21a723(0x1e5))](_0x4a8419[_0x21a723(0x1d3)],_0xc09725['name']),this['gitUtils']=new git_utils_1['GitUtils'](this[_0x21a723(0x1b3)]),this[_0x21a723(0x1da)]=new sfdx_utils_1[(_0x21a723(0x1f6))](_0x4a8419[_0x21a723(0x1d3)],_0xc09725['name']);try{this[_0x21a723(0x1f1)][_0x21a723(0x1ef)](_0x21a723(0x1e1)),await this[_0x21a723(0x1c1)][_0x21a723(0x1e0)](_0xc09725[_0x21a723(0x1d3)],_0x4a8419[_0x21a723(0x1d3)]);!this[_0x21a723(0x1bb)]['force']?(this[_0x21a723(0x1f1)][_0x21a723(0x1ef)](_0x21a723(0x20b)),await this[_0x21a723(0x208)][_0x21a723(0x1f2)](this['gitUtils'][_0x21a723(0x1fb)])):this[_0x21a723(0x1f1)][_0x21a723(0x1ef)](_0x21a723(0x1f7));_0x103541[_0x21a723(0x1e2)]&&(this[_0x21a723(0x1f1)][_0x21a723(0x1ef)]('[INFO]\x20Preparing\x20to\x20write\x20components'),this[_0x21a723(0x1c6)]=_0x103541[_0x21a723(0x1e2)][_0x21a723(0x1ed)],await this[_0x21a723(0x20a)](_0x103541[_0x21a723(0x1e2)]));_0x103541['deleted']&&(this[_0x21a723(0x1f1)][_0x21a723(0x1ef)]('[INFO]\x20Preparing\x20to\x20delete\x20components'),this[_0x21a723(0x1b4)]=_0x103541[_0x21a723(0x1bc)][_0x21a723(0x1ed)],await this['removeComponents'](_0x103541[_0x21a723(0x1bc)]));await this[_0x21a723(0x1c1)][_0x21a723(0x1c9)](),await this[_0x21a723(0x1f1)][_0x21a723(0x1ba)]();_0x4256a5?(this['logger'][_0x21a723(0x1ef)](_0x21a723(0x1b2)),await this['sfdxUtils'][_0x21a723(0x1d8)](this[_0x21a723(0x208)][_0x21a723(0x1fb)]),await this[_0x21a723(0x1da)][_0x21a723(0x1f0)](this[_0x21a723(0x1c1)][_0x21a723(0x1fb)]),await this['sfdxUtils'][_0x21a723(0x207)](),await this[_0x21a723(0x1f1)][_0x21a723(0x1ba)]()):(this['logger']['log'](_0x21a723(0x1d6)),await this[_0x21a723(0x208)][_0x21a723(0x1fe)](this[_0x21a723(0x1c1)][_0x21a723(0x1fb)]));this[_0x21a723(0x1f1)][_0x21a723(0x1ef)](_0x21a723(0x1e7)),await this['gitUtils']['commitAndPush'](_0x35bc79,{'email':_0x4d68d4[_0x21a723(0x1fa)],'name':_0x4d68d4[_0x21a723(0x1d3)]},_0xc09725['name']),await this[_0x21a723(0x1c1)]['removeDir'](),await this['mdapiUtils'][_0x21a723(0x207)]();const _0x482943=this[_0x21a723(0x1c6)]+this[_0x21a723(0x1b4)];this[_0x21a723(0x1f1)][_0x21a723(0x1ef)](_0x21a723(0x1ff)+(Date['now']()-this[_0x21a723(0x1d9)])+_0x21a723(0x1b7)+_0x482943),await this[_0x21a723(0x1f1)][_0x21a723(0x1ba)]();}catch(_0x2183ef){await this[_0x21a723(0x1c4)](),this[_0x21a723(0x1f1)]['log']('[ERROR]\x20'+_0x2183ef),await this[_0x21a723(0x1f1)][_0x21a723(0x1ba)]();throw _0x2183ef;}}async[a145_0x4fe6bf(0x1ce)](_0x4d1cbb){const _0x4e59b0=a145_0x4fe6bf;var _0x7bf4a0,_0x1ead0e,_0x369886,_0x4f9787;const _0xe416ba=!!((_0x1ead0e=(_0x7bf4a0=_0x4d1cbb[_0x4e59b0(0x1d7)])===null||_0x7bf4a0===void 0x0?void 0x0:_0x7bf4a0['writed'])===null||_0x1ead0e===void 0x0?void 0x0:_0x1ead0e[_0x4e59b0(0x1ed)])||!!((_0x4f9787=(_0x369886=_0x4d1cbb[_0x4e59b0(0x1d7)])===null||_0x369886===void 0x0?void 0x0:_0x369886[_0x4e59b0(0x1bc)])===null||_0x4f9787===void 0x0?void 0x0:_0x4f9787[_0x4e59b0(0x1ed)]);if(!_0xe416ba){this[_0x4e59b0(0x1f1)][_0x4e59b0(0x1ef)](_0x4e59b0(0x1bf)),await this[_0x4e59b0(0x1f1)]['send']();return;}this['commitData']=_0x4d1cbb,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a145_0x4fe6bf(0x1b8)])({'transient':!![]}),__metadata('design:paramtypes',[auth_settings_service_1[a145_0x4fe6bf(0x1cc)]])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;