const a144_0x21bb3d=a144_0x166c;(function(_0x2d9738,_0x40be5d){const _0x3e7ef5=a144_0x166c,_0x48d4ff=_0x2d9738();while(!![]){try{const _0x23bcf6=-parseInt(_0x3e7ef5(0x216))/0x1*(-parseInt(_0x3e7ef5(0x204))/0x2)+-parseInt(_0x3e7ef5(0x233))/0x3+-parseInt(_0x3e7ef5(0x207))/0x4+-parseInt(_0x3e7ef5(0x21f))/0x5+parseInt(_0x3e7ef5(0x1fd))/0x6*(-parseInt(_0x3e7ef5(0x210))/0x7)+parseInt(_0x3e7ef5(0x220))/0x8*(-parseInt(_0x3e7ef5(0x217))/0x9)+parseInt(_0x3e7ef5(0x240))/0xa;if(_0x23bcf6===_0x40be5d)break;else _0x48d4ff['push'](_0x48d4ff['shift']());}catch(_0xeca48b){_0x48d4ff['push'](_0x48d4ff['shift']());}}}(a144_0xf873,0x8d26f));const a144_0x19ca41=function(){let _0x11c377=!![];return function(_0x27ae83,_0x2a5aa1){const _0x2bb2b5=_0x11c377?function(){const _0x8e0037=a144_0x166c;if(_0x2a5aa1){const _0x283252=_0x2a5aa1[_0x8e0037(0x21d)](_0x27ae83,arguments);return _0x2a5aa1=null,_0x283252;}}:function(){};return _0x11c377=![],_0x2bb2b5;};}(),a144_0x5bdbec=a144_0x19ca41(this,function(){const _0x522ab7=a144_0x166c;return a144_0x5bdbec[_0x522ab7(0x21c)]()['search'](_0x522ab7(0x22d))[_0x522ab7(0x21c)]()[_0x522ab7(0x211)](a144_0x5bdbec)[_0x522ab7(0x214)](_0x522ab7(0x22d));});a144_0x5bdbec();'use strict';var __decorate=this&&this[a144_0x21bb3d(0x22b)]||function(_0x17790b,_0x38d352,_0x263de1,_0x13c047){const _0x2df80f=a144_0x21bb3d;var _0xe98b98=arguments['length'],_0x5cf62e=_0xe98b98<0x3?_0x38d352:_0x13c047===null?_0x13c047=Object[_0x2df80f(0x228)](_0x38d352,_0x263de1):_0x13c047,_0x36913c;if(typeof Reflect===_0x2df80f(0x1f3)&&typeof Reflect[_0x2df80f(0x231)]===_0x2df80f(0x20f))_0x5cf62e=Reflect['decorate'](_0x17790b,_0x38d352,_0x263de1,_0x13c047);else{for(var _0x247a9f=_0x17790b[_0x2df80f(0x22c)]-0x1;_0x247a9f>=0x0;_0x247a9f--)if(_0x36913c=_0x17790b[_0x247a9f])_0x5cf62e=(_0xe98b98<0x3?_0x36913c(_0x5cf62e):_0xe98b98>0x3?_0x36913c(_0x38d352,_0x263de1,_0x5cf62e):_0x36913c(_0x38d352,_0x263de1))||_0x5cf62e;}return _0xe98b98>0x3&&_0x5cf62e&&Object[_0x2df80f(0x20e)](_0x38d352,_0x263de1,_0x5cf62e),_0x5cf62e;},__metadata=this&&this[a144_0x21bb3d(0x208)]||function(_0x1c8b73,_0x294375){const _0x39cb8c=a144_0x21bb3d;if(typeof Reflect===_0x39cb8c(0x1f3)&&typeof Reflect['metadata']===_0x39cb8c(0x20f))return Reflect['metadata'](_0x1c8b73,_0x294375);},__importDefault=this&&this['__importDefault']||function(_0xe5c50e){return _0xe5c50e&&_0xe5c50e['__esModule']?_0xe5c50e:{'default':_0xe5c50e};};function a144_0xf873(){const _0x4ecf1b=['24yTcKii','name','COMPONENTS_PER_TICK','[INFO]\x20Start\x20clonning\x20repository','fileType','removeComponents','now','gitUtils','getOwnPropertyDescriptor','logger','exec','__decorate','length','(((.+)+)+)+$','replace','commitData','dir','decorate','log','809463IbJwWc','getProtocol','mdapiUtils','cleanUp','MDApiUtils','splice','://','type','../../shared/services/auth-settings.service','../utils/sfdx.utils','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','componentsToDelete','deleted','20698360WoSucX','copyMdapiTo','typedi','values','reduce','createProjectFrom','[INFO]\x20Prepare\x20mdapi\x20files','includes','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','writeFlosumComponents','writeComponents','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','startTime','object','sfdxUtils','ms.\x20Commited\x20components\x20-\x20','remote','groupComponentsByFileName','[INFO]\x20Deleted\x20','run','[INFO]\x20Start\x20converting\x20to\x20SFDX','[ERROR]\x20','commitAndPush','618NsPFKB','clone','design:paramtypes','__esModule','components','writed','force','489746mqrfQq','removeDir','componentsToWrite','257088nRXPrR','__metadata','copyProjectTo','gitUrl','AuthSettingsService','../../shared/utils','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','defineProperty','function','6727aCgKPl','constructor','catch','send','search','fileName','3uBrqkU','3215043yxFugi','email','\x20components','GitUtils','CommitComponentsJob','toString','apply','default','3607695uOKuDn'];a144_0xf873=function(){return _0x4ecf1b;};return a144_0xf873();}Object[a144_0x21bb3d(0x20e)](exports,a144_0x21bb3d(0x200),{'value':!![]}),exports[a144_0x21bb3d(0x21b)]=void 0x0;const auth_settings_service_1=require(a144_0x21bb3d(0x23b)),events_1=__importDefault(require('events')),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a144_0x21bb3d(0x23c)),typedi_1=require(a144_0x21bb3d(0x242)),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),utils_1=require(a144_0x21bb3d(0x20c));function a144_0x166c(_0x520d4f,_0x44df70){const _0x942259=a144_0xf873();return a144_0x166c=function(_0x5bdbec,_0x19ca41){_0x5bdbec=_0x5bdbec-0x1ee;let _0xf87307=_0x942259[_0x5bdbec];return _0xf87307;},a144_0x166c(_0x520d4f,_0x44df70);}let CommitComponentsJob=class CommitComponentsJob extends events_1[a144_0x21bb3d(0x21e)]{constructor(_0x16b362){const _0x36a4fe=a144_0x21bb3d;super(),this['authSettings']=_0x16b362,this['COMPONENTS_PER_TICK']=0x3e8,this[_0x36a4fe(0x206)]=0x0,this[_0x36a4fe(0x23e)]=0x0,this[_0x36a4fe(0x1f2)]=Date[_0x36a4fe(0x226)]();}get[a144_0x21bb3d(0x1f6)](){const _0x23ab3e=a144_0x21bb3d,{repo:_0x3fd66d}=this['commitData'],{gitCredentials:_0x452093}=this['authSettings'];return _0x3fd66d[_0x23ab3e(0x20a)][_0x23ab3e(0x22e)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x23ab3e(0x234)])(_0x3fd66d[_0x23ab3e(0x20a)])+_0x23ab3e(0x239)+_0x452093+'@');}[a144_0x21bb3d(0x1f7)](_0x177abd){const _0x579ce7=a144_0x21bb3d;var _0x40d7b7;_0x177abd['sort'](_0xfbfa95=>child_types_1['default'][_0x579ce7(0x247)](_0xfbfa95[_0x579ce7(0x224)])?0x1:-0x1);const _0x355270={};for(const _0x44fbd7 of _0x177abd){_0x355270[_0x40d7b7=_0x44fbd7[_0x579ce7(0x215)]]||(_0x355270[_0x40d7b7]=[]),_0x355270[_0x44fbd7['fileName']]['push'](_0x44fbd7);}return Object[_0x579ce7(0x243)](_0x355270)[_0x579ce7(0x244)]((_0x400f8c,_0x1a4642)=>[..._0x400f8c,..._0x1a4642],[]);}async['writeComponents'](_0x5b464a){const _0x1cd074=a144_0x21bb3d;_0x5b464a=this[_0x1cd074(0x1f7)](_0x5b464a);let _0x5af937=0x0;while(_0x5b464a[_0x1cd074(0x22c)]){const _0x426662=_0x5b464a[_0x1cd074(0x238)](0x0,this[_0x1cd074(0x222)]);await this['mdapiUtils'][_0x1cd074(0x1ef)](_0x426662),_0x5af937+=_0x426662[_0x1cd074(0x22c)],this['logger'][_0x1cd074(0x232)]('[INFO]\x20Writed\x20'+_0x5af937+'/'+this['componentsToWrite']+_0x1cd074(0x219)),await this[_0x1cd074(0x229)][_0x1cd074(0x213)]();}}async[a144_0x21bb3d(0x225)](_0x1a9d33){const _0x2d6131=a144_0x21bb3d;_0x1a9d33['sort'](_0x57b7e1=>child_types_1[_0x2d6131(0x21e)]['includes'](_0x57b7e1[_0x2d6131(0x23a)])?-0x1:0x1);let _0x5b8cb6=0x0;while(_0x1a9d33['length']){const _0x50b408=_0x1a9d33[_0x2d6131(0x238)](0x0,this[_0x2d6131(0x222)]);await this[_0x2d6131(0x235)][_0x2d6131(0x225)](_0x50b408),_0x5b8cb6+=_0x50b408[_0x2d6131(0x22c)],this[_0x2d6131(0x229)][_0x2d6131(0x232)](_0x2d6131(0x1f8)+_0x5b8cb6+'/'+this[_0x2d6131(0x23e)]+_0x2d6131(0x219)),await this[_0x2d6131(0x229)]['send']();}}async[a144_0x21bb3d(0x236)](){const _0x261b9d=a144_0x21bb3d;this[_0x261b9d(0x227)]&&await this['gitUtils'][_0x261b9d(0x205)]()['catch'](()=>void 0x0),this[_0x261b9d(0x235)]&&await this['mdapiUtils'][_0x261b9d(0x205)]()[_0x261b9d(0x212)](()=>void 0x0),this[_0x261b9d(0x1f4)]&&await this[_0x261b9d(0x1f4)]['removeDir']()[_0x261b9d(0x212)](()=>void 0x0);}async[a144_0x21bb3d(0x22a)](){const _0x6e2ad7=a144_0x21bb3d,{repo:_0x524087,branch:_0x2cc776,components:_0x103af0,convertToSFDX:_0x20c533,message:_0x526958,user:_0x4ce1e4}=this[_0x6e2ad7(0x22f)];this[_0x6e2ad7(0x235)]=new mdapi_utils_1[(_0x6e2ad7(0x237))](_0x524087[_0x6e2ad7(0x221)],_0x2cc776[_0x6e2ad7(0x221)]),this['gitUtils']=new git_utils_1[(_0x6e2ad7(0x21a))](this[_0x6e2ad7(0x1f6)]),this[_0x6e2ad7(0x1f4)]=new sfdx_utils_1['SFDXUtils'](_0x524087['name'],_0x2cc776[_0x6e2ad7(0x221)]);try{this[_0x6e2ad7(0x229)][_0x6e2ad7(0x232)](_0x6e2ad7(0x223)),await this[_0x6e2ad7(0x227)][_0x6e2ad7(0x1fe)](_0x2cc776[_0x6e2ad7(0x221)],_0x524087[_0x6e2ad7(0x221)]);!this[_0x6e2ad7(0x22f)][_0x6e2ad7(0x203)]?(this[_0x6e2ad7(0x229)][_0x6e2ad7(0x232)](_0x6e2ad7(0x246)),await this[_0x6e2ad7(0x235)]['prepareMdapi'](this[_0x6e2ad7(0x227)][_0x6e2ad7(0x230)])):this[_0x6e2ad7(0x229)]['log'](_0x6e2ad7(0x1ee));_0x103af0[_0x6e2ad7(0x202)]&&(this[_0x6e2ad7(0x229)][_0x6e2ad7(0x232)]('[INFO]\x20Preparing\x20to\x20write\x20components'),this[_0x6e2ad7(0x206)]=_0x103af0[_0x6e2ad7(0x202)][_0x6e2ad7(0x22c)],await this[_0x6e2ad7(0x1f0)](_0x103af0[_0x6e2ad7(0x202)]));_0x103af0[_0x6e2ad7(0x23f)]&&(this[_0x6e2ad7(0x229)]['log']('[INFO]\x20Preparing\x20to\x20delete\x20components'),this['componentsToDelete']=_0x103af0[_0x6e2ad7(0x23f)][_0x6e2ad7(0x22c)],await this[_0x6e2ad7(0x225)](_0x103af0[_0x6e2ad7(0x23f)]));await this[_0x6e2ad7(0x227)]['clearDir'](),await this[_0x6e2ad7(0x229)]['send']();_0x20c533?(this[_0x6e2ad7(0x229)][_0x6e2ad7(0x232)](_0x6e2ad7(0x1fa)),await this[_0x6e2ad7(0x1f4)][_0x6e2ad7(0x245)](this[_0x6e2ad7(0x235)][_0x6e2ad7(0x230)]),await this[_0x6e2ad7(0x1f4)][_0x6e2ad7(0x209)](this[_0x6e2ad7(0x227)][_0x6e2ad7(0x230)]),await this[_0x6e2ad7(0x1f4)][_0x6e2ad7(0x205)](),await this['logger'][_0x6e2ad7(0x213)]()):(this['logger'][_0x6e2ad7(0x232)](_0x6e2ad7(0x20d)),await this[_0x6e2ad7(0x235)][_0x6e2ad7(0x241)](this['gitUtils'][_0x6e2ad7(0x230)]));this['logger']['log']('[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git'),await this['gitUtils'][_0x6e2ad7(0x1fc)](_0x526958,{'email':_0x4ce1e4[_0x6e2ad7(0x218)],'name':_0x4ce1e4[_0x6e2ad7(0x221)]},_0x2cc776['name']),await this['gitUtils']['removeDir'](),await this['mdapiUtils'][_0x6e2ad7(0x205)]();const _0x109ab8=this['componentsToWrite']+this[_0x6e2ad7(0x23e)];this[_0x6e2ad7(0x229)]['log'](_0x6e2ad7(0x1f1)+(Date[_0x6e2ad7(0x226)]()-this[_0x6e2ad7(0x1f2)])+_0x6e2ad7(0x1f5)+_0x109ab8),await this[_0x6e2ad7(0x229)]['send']();}catch(_0x7c6861){await this[_0x6e2ad7(0x236)](),this[_0x6e2ad7(0x229)][_0x6e2ad7(0x232)](_0x6e2ad7(0x1fb)+_0x7c6861),await this['logger'][_0x6e2ad7(0x213)]();throw _0x7c6861;}}async[a144_0x21bb3d(0x1f9)](_0x537b25){const _0xf66209=a144_0x21bb3d;var _0x65c405,_0x1ddaff,_0x4ba18d,_0x2fb297;const _0x448e69=!!((_0x1ddaff=(_0x65c405=_0x537b25[_0xf66209(0x201)])===null||_0x65c405===void 0x0?void 0x0:_0x65c405[_0xf66209(0x202)])===null||_0x1ddaff===void 0x0?void 0x0:_0x1ddaff[_0xf66209(0x22c)])||!!((_0x2fb297=(_0x4ba18d=_0x537b25['components'])===null||_0x4ba18d===void 0x0?void 0x0:_0x4ba18d[_0xf66209(0x23f)])===null||_0x2fb297===void 0x0?void 0x0:_0x2fb297['length']);if(!_0x448e69){this[_0xf66209(0x229)]['log'](_0xf66209(0x23d)),await this[_0xf66209(0x229)][_0xf66209(0x213)]();return;}this[_0xf66209(0x22f)]=_0x537b25,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a144_0x21bb3d(0x1ff),[auth_settings_service_1[a144_0x21bb3d(0x20b)]])],CommitComponentsJob),exports[a144_0x21bb3d(0x21b)]=CommitComponentsJob;