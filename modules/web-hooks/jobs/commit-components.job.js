const a144_0x380f=['__decorate','[INFO]\x20Deleted\x20','\x20components','removeDir','typedi','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','MDApiUtils','gitUtils','send','name','splice','reduce','clearDir','metadata','../../parsers/mdapi/child-types','now','prepareMdapi','test','design:paramtypes','://','GitUtils','[ERROR]\x20','componentsToDelete','fileName','2531jOMwNu','getProtocol','gitUrl','419ezzNOP','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','../../shared/utils','groupComponentsByFileName','writed','writeFlosumComponents','__esModule','constructor','Service','events','components','[INFO]\x20Prepare\x20mdapi\x20files','decorate','340219cuKndk','function','1704179iNgXOn','catch','__importDefault','includes','cleanUp','force','1SuyJeU','38463NyKgwS','645085eGCXTo','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','object','dir','[INFO]\x20Preparing\x20to\x20write\x20components','logger','361497ywZsCN','../utils/mdapi.utils','run','../utils/git.utils','authSettings','remote','length','mdapiUtils','writeComponents','commitAndPush','return\x20/\x22\x20+\x20this\x20+\x20\x22/','default','[INFO]\x20Writed\x20','[INFO]\x20Start\x20converting\x20to\x20SFDX','sfdxUtils','commitData','email','startTime','__metadata','CommitComponentsJob','COMPONENTS_PER_TICK','log','850679lNCvMN','copyMdapiTo','13gifFZO','componentsToWrite','defineProperty','removeComponents','deleted'];const a144_0x3b2807=a144_0x30ee;(function(_0xce8f17,_0x1ffb14){const _0x1dcd01=a144_0x30ee;while(!![]){try{const _0x33b566=-parseInt(_0x1dcd01(0x121))*parseInt(_0x1dcd01(0xd4))+-parseInt(_0x1dcd01(0x123))+-parseInt(_0x1dcd01(0x10c))*parseInt(_0x1dcd01(0x109))+parseInt(_0x1dcd01(0xec))*parseInt(_0x1dcd01(0x122))+-parseInt(_0x1dcd01(0x119))+parseInt(_0x1dcd01(0xea))+parseInt(_0x1dcd01(0x11b));if(_0x33b566===_0x1ffb14)break;else _0xce8f17['push'](_0xce8f17['shift']());}catch(_0x1e5385){_0xce8f17['push'](_0xce8f17['shift']());}}}(a144_0x380f,0x9e1a3));const a144_0x357e43=function(){let _0x51c70f=!![];return function(_0x502bb4,_0x55bbe3){const _0x2d406f=_0x51c70f?function(){if(_0x55bbe3){const _0x450faf=_0x55bbe3['apply'](_0x502bb4,arguments);return _0x55bbe3=null,_0x450faf;}}:function(){};return _0x51c70f=![],_0x2d406f;};}(),a144_0x529b4c=a144_0x357e43(this,function(){const _0x326430=function(){const _0x3010cb=a144_0x30ee,_0x1afe20=_0x326430[_0x3010cb(0x113)](_0x3010cb(0xde))()[_0x3010cb(0x113)](_0x3010cb(0xcf));return!_0x1afe20[_0x3010cb(0x102)](a144_0x529b4c);};return _0x326430();});a144_0x529b4c();'use strict';var __decorate=this&&this[a144_0x3b2807(0xf1)]||function(_0x10bcb7,_0x20ce75,_0x220e08,_0x26eab2){const _0x139152=a144_0x3b2807;var _0x21420c=arguments[_0x139152(0xda)],_0x5d4e8e=_0x21420c<0x3?_0x20ce75:_0x26eab2===null?_0x26eab2=Object['getOwnPropertyDescriptor'](_0x20ce75,_0x220e08):_0x26eab2,_0x5df7c1;if(typeof Reflect===_0x139152(0xd0)&&typeof Reflect[_0x139152(0x118)]===_0x139152(0x11a))_0x5d4e8e=Reflect[_0x139152(0x118)](_0x10bcb7,_0x20ce75,_0x220e08,_0x26eab2);else{for(var _0x217de7=_0x10bcb7['length']-0x1;_0x217de7>=0x0;_0x217de7--)if(_0x5df7c1=_0x10bcb7[_0x217de7])_0x5d4e8e=(_0x21420c<0x3?_0x5df7c1(_0x5d4e8e):_0x21420c>0x3?_0x5df7c1(_0x20ce75,_0x220e08,_0x5d4e8e):_0x5df7c1(_0x20ce75,_0x220e08))||_0x5d4e8e;}return _0x21420c>0x3&&_0x5d4e8e&&Object[_0x139152(0xee)](_0x20ce75,_0x220e08,_0x5d4e8e),_0x5d4e8e;},__metadata=this&&this[a144_0x3b2807(0xe6)]||function(_0x45c960,_0x49fa29){const _0x2efd41=a144_0x3b2807;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x2efd41(0x11a))return Reflect[_0x2efd41(0xfe)](_0x45c960,_0x49fa29);},__importDefault=this&&this[a144_0x3b2807(0x11d)]||function(_0x1d1cff){const _0x39f9a9=a144_0x3b2807;return _0x1d1cff&&_0x1d1cff[_0x39f9a9(0x112)]?_0x1d1cff:{'default':_0x1d1cff};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const events_1=__importDefault(require(a144_0x3b2807(0x115))),typedi_1=require(a144_0x3b2807(0xf5)),child_types_1=__importDefault(require(a144_0x3b2807(0xff))),auth_settings_service_1=require('../../shared/services/auth-settings.service'),utils_1=require(a144_0x3b2807(0x10e)),git_utils_1=require(a144_0x3b2807(0xd7)),mdapi_utils_1=require(a144_0x3b2807(0xd5)),sfdx_utils_1=require('../utils/sfdx.utils');let CommitComponentsJob=class CommitComponentsJob extends events_1[a144_0x3b2807(0xdf)]{constructor(_0x5c4428){const _0x1ce567=a144_0x3b2807;super(),this['authSettings']=_0x5c4428,this['COMPONENTS_PER_TICK']=0x3e8,this[_0x1ce567(0xed)]=0x0,this[_0x1ce567(0x107)]=0x0,this[_0x1ce567(0xe5)]=Date[_0x1ce567(0x100)]();}get[a144_0x3b2807(0xd9)](){const _0x155073=a144_0x3b2807,{repo:_0x289f8e}=this[_0x155073(0xe3)],{gitCredentials:_0x1d2d40}=this[_0x155073(0xd8)];return _0x289f8e[_0x155073(0x10b)]['replace'](/http(s)?\:\/\/(.+@)?/,utils_1[_0x155073(0x10a)](_0x289f8e[_0x155073(0x10b)])+_0x155073(0x104)+_0x1d2d40+'@');}[a144_0x3b2807(0x10f)](_0x1f6e24){const _0x3c1649=a144_0x3b2807;var _0x558dd8;_0x1f6e24['sort'](_0x14ebc3=>child_types_1['default'][_0x3c1649(0x11e)](_0x14ebc3['fileType'])?0x1:-0x1);const _0x2ddc76={};for(const _0x41c49c of _0x1f6e24){_0x2ddc76[_0x558dd8=_0x41c49c[_0x3c1649(0x108)]]||(_0x2ddc76[_0x558dd8]=[]),_0x2ddc76[_0x41c49c[_0x3c1649(0x108)]]['push'](_0x41c49c);}return Object['values'](_0x2ddc76)[_0x3c1649(0xfc)]((_0x4d480c,_0x52d026)=>[..._0x4d480c,..._0x52d026],[]);}async[a144_0x3b2807(0xdc)](_0x2d7799){const _0x1e9ecb=a144_0x3b2807;_0x2d7799=this[_0x1e9ecb(0x10f)](_0x2d7799);let _0x49edc5=0x0;while(_0x2d7799[_0x1e9ecb(0xda)]){const _0xfaf0d4=_0x2d7799[_0x1e9ecb(0xfb)](0x0,this[_0x1e9ecb(0xe8)]);await this[_0x1e9ecb(0xdb)][_0x1e9ecb(0x111)](_0xfaf0d4),_0x49edc5+=_0xfaf0d4[_0x1e9ecb(0xda)],this[_0x1e9ecb(0xd3)]['log'](_0x1e9ecb(0xe0)+_0x49edc5+'/'+this['componentsToWrite']+_0x1e9ecb(0xf3)),await this[_0x1e9ecb(0xd3)]['send']();}}async['removeComponents'](_0x38e4a2){const _0x290bbc=a144_0x3b2807;let _0x5df6b0=0x0;while(_0x38e4a2[_0x290bbc(0xda)]){const _0x30fea8=_0x38e4a2['splice'](0x0,this[_0x290bbc(0xe8)]);await this[_0x290bbc(0xdb)][_0x290bbc(0xef)](_0x30fea8),_0x5df6b0+=_0x30fea8['length'],this[_0x290bbc(0xd3)][_0x290bbc(0xe9)](_0x290bbc(0xf2)+_0x5df6b0+'/'+this['componentsToDelete']+'\x20components'),await this[_0x290bbc(0xd3)][_0x290bbc(0xf9)]();}}async[a144_0x3b2807(0x11f)](){const _0x3249b5=a144_0x3b2807;this[_0x3249b5(0xf8)]&&await this[_0x3249b5(0xf8)][_0x3249b5(0xf4)]()[_0x3249b5(0x11c)](()=>void 0x0),this['mdapiUtils']&&await this[_0x3249b5(0xdb)][_0x3249b5(0xf4)]()[_0x3249b5(0x11c)](()=>void 0x0),this[_0x3249b5(0xe2)]&&await this[_0x3249b5(0xe2)][_0x3249b5(0xf4)]()['catch'](()=>void 0x0);}async['exec'](){const _0xfc5f8f=a144_0x3b2807,{repo:_0x3d0c30,branch:_0xe7669f,components:_0x2184dc,convertToSFDX:_0x5e73d9,message:_0x5f187e,user:_0x529d81}=this[_0xfc5f8f(0xe3)];this[_0xfc5f8f(0xdb)]=new mdapi_utils_1[(_0xfc5f8f(0xf7))](_0x3d0c30[_0xfc5f8f(0xfa)],_0xe7669f['name']),this['gitUtils']=new git_utils_1[(_0xfc5f8f(0x105))](this[_0xfc5f8f(0xd9)]),this[_0xfc5f8f(0xe2)]=new sfdx_utils_1['SFDXUtils'](_0x3d0c30['name'],_0xe7669f[_0xfc5f8f(0xfa)]);try{this['logger'][_0xfc5f8f(0xe9)]('[INFO]\x20Start\x20clonning\x20repository'),await this['gitUtils']['clone'](_0xe7669f[_0xfc5f8f(0xfa)],_0x3d0c30['name']);!this[_0xfc5f8f(0xe3)][_0xfc5f8f(0x120)]?(this['logger'][_0xfc5f8f(0xe9)](_0xfc5f8f(0x117)),await this[_0xfc5f8f(0xdb)][_0xfc5f8f(0x101)](this[_0xfc5f8f(0xf8)][_0xfc5f8f(0xd1)])):this['logger'][_0xfc5f8f(0xe9)]('[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');_0x2184dc[_0xfc5f8f(0x110)]&&(this[_0xfc5f8f(0xd3)][_0xfc5f8f(0xe9)](_0xfc5f8f(0xd2)),this['componentsToWrite']=_0x2184dc[_0xfc5f8f(0x110)]['length'],await this[_0xfc5f8f(0xdc)](_0x2184dc[_0xfc5f8f(0x110)]));_0x2184dc[_0xfc5f8f(0xf0)]&&(this[_0xfc5f8f(0xd3)][_0xfc5f8f(0xe9)]('[INFO]\x20Preparing\x20to\x20delete\x20components'),this[_0xfc5f8f(0x107)]=_0x2184dc['deleted'][_0xfc5f8f(0xda)],await this['removeComponents'](_0x2184dc['deleted']));await this['gitUtils'][_0xfc5f8f(0xfd)](),await this['logger']['send']();_0x5e73d9?(this[_0xfc5f8f(0xd3)]['log'](_0xfc5f8f(0xe1)),await this[_0xfc5f8f(0xe2)]['createProjectFrom'](this[_0xfc5f8f(0xdb)]['dir']),await this[_0xfc5f8f(0xe2)]['copyProjectTo'](this['gitUtils']['dir']),await this[_0xfc5f8f(0xe2)][_0xfc5f8f(0xf4)](),await this[_0xfc5f8f(0xd3)][_0xfc5f8f(0xf9)]()):(this[_0xfc5f8f(0xd3)][_0xfc5f8f(0xe9)]('[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder'),await this[_0xfc5f8f(0xdb)][_0xfc5f8f(0xeb)](this[_0xfc5f8f(0xf8)]['dir']));this[_0xfc5f8f(0xd3)][_0xfc5f8f(0xe9)](_0xfc5f8f(0xf6)),await this[_0xfc5f8f(0xf8)][_0xfc5f8f(0xdd)](_0x5f187e,{'email':_0x529d81[_0xfc5f8f(0xe4)],'name':_0x529d81['name']},_0xe7669f[_0xfc5f8f(0xfa)]),await this['gitUtils'][_0xfc5f8f(0xf4)](),await this[_0xfc5f8f(0xdb)]['removeDir']();const _0x43586f=this['componentsToWrite']+this['componentsToDelete'];this[_0xfc5f8f(0xd3)]['log']('[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0xfc5f8f(0x100)]()-this['startTime'])+'ms.\x20Commited\x20components\x20-\x20'+_0x43586f),await this[_0xfc5f8f(0xd3)][_0xfc5f8f(0xf9)]();}catch(_0x4694c7){await this['cleanUp'](),this[_0xfc5f8f(0xd3)][_0xfc5f8f(0xe9)](_0xfc5f8f(0x106)+_0x4694c7),await this['logger'][_0xfc5f8f(0xf9)]();throw _0x4694c7;}}async[a144_0x3b2807(0xd6)](_0x64408b){const _0x6fdfc6=a144_0x3b2807;var _0x459182,_0x39b24b,_0x2a286f,_0x5c107d;const _0xb350d9=!!((_0x39b24b=(_0x459182=_0x64408b[_0x6fdfc6(0x116)])===null||_0x459182===void 0x0?void 0x0:_0x459182['writed'])===null||_0x39b24b===void 0x0?void 0x0:_0x39b24b['length'])||!!((_0x5c107d=(_0x2a286f=_0x64408b[_0x6fdfc6(0x116)])===null||_0x2a286f===void 0x0?void 0x0:_0x2a286f[_0x6fdfc6(0xf0)])===null||_0x5c107d===void 0x0?void 0x0:_0x5c107d['length']);if(!_0xb350d9){this[_0x6fdfc6(0xd3)]['log'](_0x6fdfc6(0x10d)),await this[_0x6fdfc6(0xd3)][_0x6fdfc6(0xf9)]();return;}this[_0x6fdfc6(0xe3)]=_0x64408b,await this['exec']();}};function a144_0x30ee(_0x4578bf,_0x11f799){return a144_0x30ee=function(_0x44d4f8,_0x529b4c){_0x44d4f8=_0x44d4f8-0xcf;let _0x357e43=a144_0x380f[_0x44d4f8];return _0x357e43;},a144_0x30ee(_0x4578bf,_0x11f799);}CommitComponentsJob=__decorate([typedi_1[a144_0x3b2807(0x114)]({'transient':!![]}),__metadata(a144_0x3b2807(0x103),[auth_settings_service_1['AuthSettingsService']])],CommitComponentsJob),exports[a144_0x3b2807(0xe7)]=CommitComponentsJob;