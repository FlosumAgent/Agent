const a136_0x44d6=['[INFO]\x20Empty\x20repository\x20branch.\x20Skip.','run','1iqxtrT','__metadata','removeDir','169961juCoag','commitData','copyMdapiTo','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','[ERROR]\x20','../utils/mdapi.utils','1VNKfqi','writeFlosumComponents','178954Tpafky','SFDXUtils','707233bEXLdB','default','copyProjectTo','../utils/sfdx.utils','startTime','name','design:paramtypes','gitUrl','message','../../parsers/mdapi/child-types','1052367WwCjSj','now','__esModule','prepareMdapi','defineProperty','apply','324670OSWsXm','function','log','retriever','clearDir','getProtocol','[INFO]\x20Start\x20converting\x20to\x20SFDX','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','497197xqqzGu','sfdxUtils','clone','commitAndPush','COMPONENTS_PER_TICK','Service','614601dHuGNk','mdapiUtils','authSettings','decorate','componentsIds','://','typedi','dir','gitUtils','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','exec','\x20components','AuthSettingsService','test','splice','return\x20/\x22\x20+\x20this\x20+\x20\x22/','MDApiUtils','GitUtils','ms.\x20Commited\x20components\x20-\x20','email','includes','../../shared/utils','getOwnPropertyDescriptor','remote','length','../../shared/services/auth-settings.service','object','SalesforceRetrieverService','__decorate','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];const a136_0x165c8e=a136_0x1150;(function(_0x5c05a7,_0x41bf7a){const _0x388429=a136_0x1150;while(!![]){try{const _0x159bb1=-parseInt(_0x388429(0x187))*-parseInt(_0x388429(0x153))+parseInt(_0x388429(0x161))+parseInt(_0x388429(0x159))+-parseInt(_0x388429(0x149))+parseInt(_0x388429(0x13f))+-parseInt(_0x388429(0x147))*parseInt(_0x388429(0x145))+-parseInt(_0x388429(0x167));if(_0x159bb1===_0x41bf7a)break;else _0x5c05a7['push'](_0x5c05a7['shift']());}catch(_0x2c5684){_0x5c05a7['push'](_0x5c05a7['shift']());}}}(a136_0x44d6,0x84aaf));const a136_0x3e75df=function(){let _0x3baa2b=!![];return function(_0xcadfd7,_0x304dc3){const _0x40d9e3=_0x3baa2b?function(){const _0x4e6a49=a136_0x1150;if(_0x304dc3){const _0xff2b4a=_0x304dc3[_0x4e6a49(0x158)](_0xcadfd7,arguments);return _0x304dc3=null,_0xff2b4a;}}:function(){};return _0x3baa2b=![],_0x40d9e3;};}(),a136_0x3e2d6e=a136_0x3e75df(this,function(){const _0xa385dd=function(){const _0x4f47df=a136_0x1150,_0x5267c0=_0xa385dd['constructor'](_0x4f47df(0x176))()['constructor'](_0x4f47df(0x184));return!_0x5267c0[_0x4f47df(0x174)](a136_0x3e2d6e);};return _0xa385dd();});a136_0x3e2d6e();'use strict';var __decorate=this&&this[a136_0x165c8e(0x183)]||function(_0x107e6c,_0x146272,_0xc5d89f,_0xb196ca){const _0x4c4db9=a136_0x165c8e;var _0x51b7da=arguments[_0x4c4db9(0x17f)],_0x37b474=_0x51b7da<0x3?_0x146272:_0xb196ca===null?_0xb196ca=Object[_0x4c4db9(0x17d)](_0x146272,_0xc5d89f):_0xb196ca,_0xe004f0;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x4c4db9(0x15a))_0x37b474=Reflect[_0x4c4db9(0x16a)](_0x107e6c,_0x146272,_0xc5d89f,_0xb196ca);else{for(var _0x2ecef8=_0x107e6c[_0x4c4db9(0x17f)]-0x1;_0x2ecef8>=0x0;_0x2ecef8--)if(_0xe004f0=_0x107e6c[_0x2ecef8])_0x37b474=(_0x51b7da<0x3?_0xe004f0(_0x37b474):_0x51b7da>0x3?_0xe004f0(_0x146272,_0xc5d89f,_0x37b474):_0xe004f0(_0x146272,_0xc5d89f))||_0x37b474;}return _0x51b7da>0x3&&_0x37b474&&Object[_0x4c4db9(0x157)](_0x146272,_0xc5d89f,_0x37b474),_0x37b474;},__metadata=this&&this[a136_0x165c8e(0x188)]||function(_0x484e28,_0xbfe02c){const _0x10eb92=a136_0x165c8e;if(typeof Reflect===_0x10eb92(0x181)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x484e28,_0xbfe02c);},__importDefault=this&&this['__importDefault']||function(_0x56e829){const _0x1bc858=a136_0x165c8e;return _0x56e829&&_0x56e829[_0x1bc858(0x155)]?_0x56e829:{'default':_0x56e829};};Object[a136_0x165c8e(0x157)](exports,a136_0x165c8e(0x155),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;function a136_0x1150(_0x2f039b,_0x22814b){return a136_0x1150=function(_0x31382e,_0x3e2d6e){_0x31382e=_0x31382e-0x13f;let _0x3e75df=a136_0x44d6[_0x31382e];return _0x3e75df;},a136_0x1150(_0x2f039b,_0x22814b);}const events_1=__importDefault(require('events')),typedi_1=require(a136_0x165c8e(0x16d)),child_types_1=__importDefault(require(a136_0x165c8e(0x152))),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),auth_settings_service_1=require(a136_0x165c8e(0x180)),utils_1=require(a136_0x165c8e(0x17c)),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a136_0x165c8e(0x144)),sfdx_utils_1=require(a136_0x165c8e(0x14c));let CommitComponentsJob=class CommitComponentsJob extends events_1[a136_0x165c8e(0x14a)]{constructor(_0x981fe7,_0x19adbf){const _0x5d8226=a136_0x165c8e;super(),this[_0x5d8226(0x169)]=_0x981fe7,this[_0x5d8226(0x15c)]=_0x19adbf,this[_0x5d8226(0x165)]=0xbb8,this[_0x5d8226(0x14d)]=Date[_0x5d8226(0x154)]();}get[a136_0x165c8e(0x17e)](){const _0x54ef4f=a136_0x165c8e,{repo:_0x295dc9}=this[_0x54ef4f(0x140)],{gitCredentials:_0x4701fe}=this[_0x54ef4f(0x169)];return _0x295dc9[_0x54ef4f(0x150)]['replace'](/http(s)?\:\/\/(.+@)?/,utils_1[_0x54ef4f(0x15e)](_0x295dc9['gitUrl'])+_0x54ef4f(0x16c)+_0x4701fe+'@');}['log'](_0x4d3104){const _0x160bd1=a136_0x165c8e;this['emit'](_0x160bd1(0x15b),_0x4d3104);}async['writeComponents'](_0x4d7fe2){const _0x13afd3=a136_0x165c8e,_0x30b89e=await this['retriever'][_0x13afd3(0x186)](_0x4d7fe2);_0x30b89e['sort'](_0x3895da=>child_types_1[_0x13afd3(0x14a)][_0x13afd3(0x17b)](_0x3895da['fileType'])?0x1:-0x1);let _0x4d2808=0x0;while(_0x30b89e[_0x13afd3(0x17f)]){const _0x4ed84d=_0x30b89e[_0x13afd3(0x175)](0x0,this[_0x13afd3(0x165)]);await this[_0x13afd3(0x168)][_0x13afd3(0x146)](_0x4ed84d),_0x4d2808+=_0x4ed84d[_0x13afd3(0x17f)],this['log']('[INFO]\x20Done\x20'+_0x4d2808+'/'+_0x4d7fe2[_0x13afd3(0x17f)]+_0x13afd3(0x172));}}async[a136_0x165c8e(0x171)](){const _0x20680f=a136_0x165c8e,{repo:_0x55689c,branch:_0x533fd6,componentsIds:_0x4c194b,convertToSFDX:_0x47be9f,message:_0x144099,user:_0x398da1}=this[_0x20680f(0x140)];this[_0x20680f(0x168)]=new mdapi_utils_1[(_0x20680f(0x177))](_0x55689c['name'],_0x533fd6),this[_0x20680f(0x16f)]=new git_utils_1[(_0x20680f(0x178))](this[_0x20680f(0x17e)]),this[_0x20680f(0x162)]=new sfdx_utils_1[(_0x20680f(0x148))](_0x55689c['name'],_0x533fd6);try{this['log']('[INFO]\x20Start\x20clonning\x20repository'),await this[_0x20680f(0x16f)][_0x20680f(0x163)](_0x533fd6,_0x55689c[_0x20680f(0x14e)]),this['log']('[INFO]\x20Prepare\x20mdapi\x20files'),await this['mdapiUtils'][_0x20680f(0x156)](this['gitUtils'][_0x20680f(0x16e)]),await this['writeComponents'](_0x4c194b),await this[_0x20680f(0x16f)][_0x20680f(0x15d)](),_0x47be9f?(this[_0x20680f(0x15b)](_0x20680f(0x15f)),await this[_0x20680f(0x162)]['createProjectFrom'](this[_0x20680f(0x168)]['dir']),await this[_0x20680f(0x162)][_0x20680f(0x14b)](this[_0x20680f(0x16f)][_0x20680f(0x16e)]),await this[_0x20680f(0x162)]['removeDir']()):(this[_0x20680f(0x15b)](_0x20680f(0x160)),await this['mdapiUtils'][_0x20680f(0x141)](this[_0x20680f(0x16f)]['dir'])),this['log'](_0x20680f(0x142)),await this[_0x20680f(0x16f)][_0x20680f(0x164)](_0x144099,{'email':_0x398da1[_0x20680f(0x17a)],'name':_0x398da1[_0x20680f(0x14e)]},_0x533fd6),await this[_0x20680f(0x16f)][_0x20680f(0x189)](),await this[_0x20680f(0x168)][_0x20680f(0x189)](),this['log'](_0x20680f(0x170)+(Date[_0x20680f(0x154)]()-this[_0x20680f(0x14d)])+_0x20680f(0x179)+_0x4c194b[_0x20680f(0x17f)]);}catch(_0x458eeb){this[_0x20680f(0x15b)](_0x20680f(0x143)+(_0x458eeb[_0x20680f(0x151)]||_0x458eeb));throw _0x458eeb;}}async[a136_0x165c8e(0x186)](_0x4381ae){const _0x12cac8=a136_0x165c8e;if(!_0x4381ae[_0x12cac8(0x16b)][_0x12cac8(0x17f)]){this[_0x12cac8(0x15b)](_0x12cac8(0x185));return;}this['commitData']=_0x4381ae,await this[_0x12cac8(0x171)]();}};CommitComponentsJob=__decorate([typedi_1[a136_0x165c8e(0x166)]({'transient':!![]}),__metadata(a136_0x165c8e(0x14f),[auth_settings_service_1[a136_0x165c8e(0x173)],salesforce_retriever_service_1[a136_0x165c8e(0x182)]])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;