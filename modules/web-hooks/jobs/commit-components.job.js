const a146_0x1dc0cc=a146_0x3f06;(function(_0x3a2a43,_0x265014){const _0x516698=a146_0x3f06,_0x5ccf2a=_0x3a2a43();while(!![]){try{const _0x292a05=-parseInt(_0x516698(0x238))/0x1+-parseInt(_0x516698(0x240))/0x2+parseInt(_0x516698(0x22b))/0x3*(-parseInt(_0x516698(0x219))/0x4)+-parseInt(_0x516698(0x206))/0x5*(parseInt(_0x516698(0x222))/0x6)+-parseInt(_0x516698(0x213))/0x7+-parseInt(_0x516698(0x202))/0x8+-parseInt(_0x516698(0x234))/0x9*(-parseInt(_0x516698(0x1f7))/0xa);if(_0x292a05===_0x265014)break;else _0x5ccf2a['push'](_0x5ccf2a['shift']());}catch(_0x34183c){_0x5ccf2a['push'](_0x5ccf2a['shift']());}}}(a146_0x14f6,0x7ffe7));function a146_0x3f06(_0x5bb35b,_0x2e8cc3){const _0xd87e42=a146_0x14f6();return a146_0x3f06=function(_0x1d1ded,_0x5ec801){_0x1d1ded=_0x1d1ded-0x1f2;let _0x14f645=_0xd87e42[_0x1d1ded];return _0x14f645;},a146_0x3f06(_0x5bb35b,_0x2e8cc3);}const a146_0x5ec801=function(){let _0x3b85f7=!![];return function(_0x1dd6e4,_0x11ae46){const _0x19c996=_0x3b85f7?function(){const _0x3fc863=a146_0x3f06;if(_0x11ae46){const _0x243627=_0x11ae46[_0x3fc863(0x21b)](_0x1dd6e4,arguments);return _0x11ae46=null,_0x243627;}}:function(){};return _0x3b85f7=![],_0x19c996;};}(),a146_0x1d1ded=a146_0x5ec801(this,function(){const _0x677543=a146_0x3f06;return a146_0x1d1ded[_0x677543(0x1f6)]()['search']('(((.+)+)+)+$')['toString']()[_0x677543(0x217)](a146_0x1d1ded)[_0x677543(0x1fa)](_0x677543(0x20a));});a146_0x1d1ded();'use strict';var __decorate=this&&this[a146_0x1dc0cc(0x244)]||function(_0x5649e7,_0x2e605d,_0x4b60c8,_0x1205a2){const _0x2e962a=a146_0x1dc0cc;var _0x50f8fb=arguments[_0x2e962a(0x247)],_0x2e09f3=_0x50f8fb<0x3?_0x2e605d:_0x1205a2===null?_0x1205a2=Object[_0x2e962a(0x246)](_0x2e605d,_0x4b60c8):_0x1205a2,_0x169bc0;if(typeof Reflect===_0x2e962a(0x21a)&&typeof Reflect['decorate']===_0x2e962a(0x204))_0x2e09f3=Reflect['decorate'](_0x5649e7,_0x2e605d,_0x4b60c8,_0x1205a2);else{for(var _0x6b97f2=_0x5649e7['length']-0x1;_0x6b97f2>=0x0;_0x6b97f2--)if(_0x169bc0=_0x5649e7[_0x6b97f2])_0x2e09f3=(_0x50f8fb<0x3?_0x169bc0(_0x2e09f3):_0x50f8fb>0x3?_0x169bc0(_0x2e605d,_0x4b60c8,_0x2e09f3):_0x169bc0(_0x2e605d,_0x4b60c8))||_0x2e09f3;}return _0x50f8fb>0x3&&_0x2e09f3&&Object[_0x2e962a(0x22d)](_0x2e605d,_0x4b60c8,_0x2e09f3),_0x2e09f3;},__metadata=this&&this[a146_0x1dc0cc(0x20e)]||function(_0xffb619,_0x552ce5){const _0x3a76bc=a146_0x1dc0cc;if(typeof Reflect===_0x3a76bc(0x21a)&&typeof Reflect['metadata']===_0x3a76bc(0x204))return Reflect['metadata'](_0xffb619,_0x552ce5);},__importDefault=this&&this[a146_0x1dc0cc(0x22f)]||function(_0x3e9470){return _0x3e9470&&_0x3e9470['__esModule']?_0x3e9470:{'default':_0x3e9470};};Object[a146_0x1dc0cc(0x22d)](exports,'__esModule',{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const auth_settings_service_1=require(a146_0x1dc0cc(0x23c)),events_1=__importDefault(require(a146_0x1dc0cc(0x23a))),git_utils_1=require(a146_0x1dc0cc(0x1fc)),mdapi_utils_1=require(a146_0x1dc0cc(0x24a)),sfdx_utils_1=require(a146_0x1dc0cc(0x23e)),typedi_1=require(a146_0x1dc0cc(0x212)),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),utils_1=require(a146_0x1dc0cc(0x1f2));function a146_0x14f6(){const _0x27d950=['[INFO]\x20Prepare\x20mdapi\x20files','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','copyMdapiTo','1077YhtKag','ms.\x20Commited\x20components\x20-\x20','defineProperty','send','__importDefault','removeComponents','now','exec','commitData','9JbRGzU','MDApiUtils','[INFO]\x20Preparing\x20to\x20write\x20components','COMPONENTS_PER_TICK','178355KfFSdX','componentsToWrite','events','dir','../../shared/services/auth-settings.service','[ERROR]\x20','../utils/sfdx.utils','design:paramtypes','972954jCEakx','log','[INFO]\x20Writed\x20','fileName','__decorate','[INFO]\x20Deleted\x20','getOwnPropertyDescriptor','length','GitUtils','push','../utils/mdapi.utils','mdapiUtils','componentsToDelete','../../shared/utils','clone','logger','[INFO]\x20Preparing\x20to\x20delete\x20components','toString','33449420LZjMII','Service','cleanUp','search','commitAndPush','../utils/git.utils','createProjectFrom','startTime','run','includes','groupComponentsByFileName','7689016XJPHpb','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','function','sort','4450myfwIg','email','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','removeDir','(((.+)+)+)+$','gitUtils','\x20components','AuthSettingsService','__metadata','branch','remote','sfdxUtils','typedi','3771775rorKzR','values','default','authSettings','constructor','master','1140ssfHnp','object','apply','writed','[INFO]\x20Start\x20converting\x20to\x20SFDX','://','deleted','reduce','name','3732ywiBAU','catch','force','writeComponents','type','prepareMdapi'];a146_0x14f6=function(){return _0x27d950;};return a146_0x14f6();}let CommitComponentsJob=class CommitComponentsJob extends events_1[a146_0x1dc0cc(0x215)]{constructor(_0x2b157a){const _0x50f890=a146_0x1dc0cc;super(),this[_0x50f890(0x216)]=_0x2b157a,this[_0x50f890(0x237)]=0x3e8,this[_0x50f890(0x239)]=0x0,this[_0x50f890(0x24c)]=0x0,this['startTime']=Date[_0x50f890(0x231)]();}get[a146_0x1dc0cc(0x210)](){const _0x2ec107=a146_0x1dc0cc,{repo:_0x5624f5}=this[_0x2ec107(0x233)],{gitCredentials:_0x425a48}=this[_0x2ec107(0x216)];return _0x5624f5['gitUrl']['replace'](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x5624f5['gitUrl'])+_0x2ec107(0x21e)+_0x425a48+'@');}[a146_0x1dc0cc(0x201)](_0x32beb9){const _0x282cdd=a146_0x1dc0cc;var _0x350377;_0x32beb9[_0x282cdd(0x205)](_0x3b4f77=>child_types_1[_0x282cdd(0x215)][_0x282cdd(0x200)](_0x3b4f77['fileType'])?0x1:-0x1);const _0x312559={};for(const _0x12a7ae of _0x32beb9){_0x312559[_0x350377=_0x12a7ae[_0x282cdd(0x243)]]||(_0x312559[_0x350377]=[]),_0x312559[_0x12a7ae[_0x282cdd(0x243)]][_0x282cdd(0x249)](_0x12a7ae);}return Object[_0x282cdd(0x214)](_0x312559)[_0x282cdd(0x220)]((_0x4845b2,_0x2d57b3)=>[..._0x4845b2,..._0x2d57b3],[]);}async['writeComponents'](_0x263bf6){const _0x3f806a=a146_0x1dc0cc;_0x263bf6=this[_0x3f806a(0x201)](_0x263bf6);let _0x50cc0e=0x0;while(_0x263bf6['length']){const _0x1180a8=_0x263bf6['splice'](0x0,this[_0x3f806a(0x237)]);await this['mdapiUtils']['writeFlosumComponents'](_0x1180a8,{'skipChildErrors':this[_0x3f806a(0x233)][_0x3f806a(0x20f)][_0x3f806a(0x221)]===_0x3f806a(0x218),'logger':_0xc1ef60=>this[_0x3f806a(0x1f4)][_0x3f806a(0x241)](_0xc1ef60)}),_0x50cc0e+=_0x1180a8[_0x3f806a(0x247)],this[_0x3f806a(0x1f4)][_0x3f806a(0x241)](_0x3f806a(0x242)+_0x50cc0e+'/'+this['componentsToWrite']+'\x20components'),await this['logger'][_0x3f806a(0x22e)]();}}async[a146_0x1dc0cc(0x230)](_0x397dba){const _0x203f9e=a146_0x1dc0cc;_0x397dba[_0x203f9e(0x205)](_0x4f3327=>child_types_1['default']['includes'](_0x4f3327[_0x203f9e(0x226)])?-0x1:0x1);let _0x3cf481=0x0;while(_0x397dba[_0x203f9e(0x247)]){const _0x55fa8a=_0x397dba['splice'](0x0,this[_0x203f9e(0x237)]);await this['mdapiUtils']['removeComponents'](_0x55fa8a),_0x3cf481+=_0x55fa8a[_0x203f9e(0x247)],this[_0x203f9e(0x1f4)][_0x203f9e(0x241)](_0x203f9e(0x245)+_0x3cf481+'/'+this[_0x203f9e(0x24c)]+_0x203f9e(0x20c)),await this[_0x203f9e(0x1f4)][_0x203f9e(0x22e)]();}}async['cleanUp'](){const _0x4e5b68=a146_0x1dc0cc;this[_0x4e5b68(0x20b)]&&await this['gitUtils']['removeDir']()['catch'](()=>void 0x0),this[_0x4e5b68(0x24b)]&&await this[_0x4e5b68(0x24b)][_0x4e5b68(0x209)]()[_0x4e5b68(0x223)](()=>void 0x0),this[_0x4e5b68(0x211)]&&await this['sfdxUtils'][_0x4e5b68(0x209)]()['catch'](()=>void 0x0);}async['exec'](){const _0x4fb59b=a146_0x1dc0cc,{repo:_0x3c7e7f,branch:_0x293ce1,components:_0x10143c,convertToSFDX:_0x104321,message:_0x56c28c,user:_0x346e13}=this[_0x4fb59b(0x233)];this[_0x4fb59b(0x24b)]=new mdapi_utils_1[(_0x4fb59b(0x235))](_0x3c7e7f['name'],_0x293ce1['name']),this[_0x4fb59b(0x20b)]=new git_utils_1[(_0x4fb59b(0x248))](this[_0x4fb59b(0x210)]),this[_0x4fb59b(0x211)]=new sfdx_utils_1['SFDXUtils'](_0x3c7e7f['name'],_0x293ce1['name']);try{this['logger'][_0x4fb59b(0x241)]('[INFO]\x20Start\x20clonning\x20repository'),await this['gitUtils'][_0x4fb59b(0x1f3)](_0x293ce1['name'],_0x3c7e7f['name']);!this['commitData'][_0x4fb59b(0x224)]?(this[_0x4fb59b(0x1f4)]['log'](_0x4fb59b(0x228)),await this[_0x4fb59b(0x24b)][_0x4fb59b(0x227)](this['gitUtils']['dir'])):this['logger'][_0x4fb59b(0x241)](_0x4fb59b(0x208));_0x10143c[_0x4fb59b(0x21c)]&&(this[_0x4fb59b(0x1f4)][_0x4fb59b(0x241)](_0x4fb59b(0x236)),this['componentsToWrite']=_0x10143c[_0x4fb59b(0x21c)][_0x4fb59b(0x247)],await this[_0x4fb59b(0x225)](_0x10143c['writed']));_0x10143c['deleted']&&(this[_0x4fb59b(0x1f4)][_0x4fb59b(0x241)](_0x4fb59b(0x1f5)),this[_0x4fb59b(0x24c)]=_0x10143c[_0x4fb59b(0x21f)][_0x4fb59b(0x247)],await this[_0x4fb59b(0x230)](_0x10143c['deleted']));await this[_0x4fb59b(0x20b)]['clearDir'](),await this[_0x4fb59b(0x1f4)][_0x4fb59b(0x22e)]();_0x104321?(this[_0x4fb59b(0x1f4)][_0x4fb59b(0x241)](_0x4fb59b(0x21d)),await this[_0x4fb59b(0x211)][_0x4fb59b(0x1fd)](this[_0x4fb59b(0x24b)][_0x4fb59b(0x23b)]),await this['sfdxUtils']['copyProjectTo'](this[_0x4fb59b(0x20b)][_0x4fb59b(0x23b)]),await this['sfdxUtils']['removeDir'](),await this[_0x4fb59b(0x1f4)][_0x4fb59b(0x22e)]()):(this[_0x4fb59b(0x1f4)][_0x4fb59b(0x241)](_0x4fb59b(0x229)),await this[_0x4fb59b(0x24b)][_0x4fb59b(0x22a)](this[_0x4fb59b(0x20b)][_0x4fb59b(0x23b)]));this[_0x4fb59b(0x1f4)][_0x4fb59b(0x241)]('[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git'),await this[_0x4fb59b(0x20b)][_0x4fb59b(0x1fb)](_0x56c28c,{'email':_0x346e13[_0x4fb59b(0x207)],'name':_0x346e13[_0x4fb59b(0x221)]},_0x293ce1[_0x4fb59b(0x221)]),await this[_0x4fb59b(0x20b)][_0x4fb59b(0x209)](),await this[_0x4fb59b(0x24b)][_0x4fb59b(0x209)]();const _0x1e693e=this[_0x4fb59b(0x239)]+this[_0x4fb59b(0x24c)];this['logger'][_0x4fb59b(0x241)](_0x4fb59b(0x203)+(Date[_0x4fb59b(0x231)]()-this[_0x4fb59b(0x1fe)])+_0x4fb59b(0x22c)+_0x1e693e),await this[_0x4fb59b(0x1f4)][_0x4fb59b(0x22e)]();}catch(_0x197268){await this[_0x4fb59b(0x1f9)](),this[_0x4fb59b(0x1f4)]['log'](_0x4fb59b(0x23d)+_0x197268),await this['logger'][_0x4fb59b(0x22e)]();throw _0x197268;}}async[a146_0x1dc0cc(0x1ff)](_0x37e39a){const _0x4f1901=a146_0x1dc0cc;var _0x1b0ea5,_0x16557f,_0x4cd5fa,_0x263bd3;const _0x340240=!!((_0x16557f=(_0x1b0ea5=_0x37e39a['components'])===null||_0x1b0ea5===void 0x0?void 0x0:_0x1b0ea5[_0x4f1901(0x21c)])===null||_0x16557f===void 0x0?void 0x0:_0x16557f[_0x4f1901(0x247)])||!!((_0x263bd3=(_0x4cd5fa=_0x37e39a['components'])===null||_0x4cd5fa===void 0x0?void 0x0:_0x4cd5fa[_0x4f1901(0x21f)])===null||_0x263bd3===void 0x0?void 0x0:_0x263bd3[_0x4f1901(0x247)]);if(!_0x340240){this['logger']['log']('[INFO]\x20Nothing\x20to\x20commit.\x20Skip.'),await this[_0x4f1901(0x1f4)]['send']();return;}this[_0x4f1901(0x233)]=_0x37e39a,await this[_0x4f1901(0x232)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a146_0x1dc0cc(0x1f8)])({'transient':!![]}),__metadata(a146_0x1dc0cc(0x23f),[auth_settings_service_1[a146_0x1dc0cc(0x20d)]])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;