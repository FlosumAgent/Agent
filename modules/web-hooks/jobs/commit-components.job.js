function a179_0x4114(_0x368985,_0x44e1da){const _0xfb5482=a179_0x20af();return a179_0x4114=function(_0x3cd74e,_0x1be971){_0x3cd74e=_0x3cd74e-0x105;let _0x20af72=_0xfb5482[_0x3cd74e];return _0x20af72;},a179_0x4114(_0x368985,_0x44e1da);}const a179_0x110e44=a179_0x4114;(function(_0x2bfa1d,_0x1805a9){const _0x363681=a179_0x4114,_0x28759c=_0x2bfa1d();while(!![]){try{const _0x1d6182=-parseInt(_0x363681(0x127))/0x1+parseInt(_0x363681(0x120))/0x2+parseInt(_0x363681(0x171))/0x3*(parseInt(_0x363681(0x10e))/0x4)+-parseInt(_0x363681(0x174))/0x5*(-parseInt(_0x363681(0x13d))/0x6)+-parseInt(_0x363681(0x145))/0x7+-parseInt(_0x363681(0x112))/0x8+-parseInt(_0x363681(0x16b))/0x9*(-parseInt(_0x363681(0x126))/0xa);if(_0x1d6182===_0x1805a9)break;else _0x28759c['push'](_0x28759c['shift']());}catch(_0x58c89c){_0x28759c['push'](_0x28759c['shift']());}}}(a179_0x20af,0x7e9ad));const a179_0x1be971=function(){let _0x4d7772=!![];return function(_0x3a9b24,_0x546043){const _0x5057e5=_0x4d7772?function(){const _0x38a3cb=a179_0x4114;if(_0x546043){const _0x459164=_0x546043[_0x38a3cb(0x13f)](_0x3a9b24,arguments);return _0x546043=null,_0x459164;}}:function(){};return _0x4d7772=![],_0x5057e5;};}(),a179_0x3cd74e=a179_0x1be971(this,function(){const _0x22121d=a179_0x4114;return a179_0x3cd74e[_0x22121d(0x16e)]()[_0x22121d(0x108)]('(((.+)+)+)+$')['toString']()[_0x22121d(0x13b)](a179_0x3cd74e)[_0x22121d(0x108)]('(((.+)+)+)+$');});a179_0x3cd74e();function a179_0x20af(){const _0x284ace=['fileName','prepareMdapi','[INFO]\x20Start\x20converting\x20to\x20SFDX','BitbucketApiService','[INFO]\x20Committing\x20and\x20pushing\x20source\x20to\x20git','copyMdapiTo','../utils/sfdx.utils','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','[INFO]\x20Preparing\x20to\x20delete\x20components','commitData','../../parsers/data/child-types','default','sfdxUtils','exec','sfLogger','branch','constructor','design:paramtypes','4370430FtStrV','includes','apply','push','getProtocol','componentsToWrite','reduce','../../git-api/services/bitbucket-api.service','5990572ekcvkz','metadata','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','hasOwnProperty','componentsToDelete','master','SFDXUtils','length','authSettings','type','__esModule','writeComponents','clearDir','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','MDApiUtils','gitUrl','GitUtils','__createBinding','getPrefix','mdapiUtils','SalesforceLogger2','sort','fileType','Service','://','call','[INFO]\x20Prepare\x20mdapi\x20files','__setModuleDefault','groupComponentsByFileName','prototype','removeDir','AuthSettingsService','catch','COMPONENTS_PER_TICK','../../../constants','get','CommitComponentsJob','../utils/mdapi.utils','52515DBcjSW','../../internal/fs.internal','SFDX','toString','isLoggedIn','replace','3oyMLID','bitbucket','\x20components','5ciBQry','[INFO]\x20Preparing\x20to\x20write\x20components','defineProperty','run','dir','events','search','name','typedi','getLoggerId','join','splice','1986328jRIqBv','removeComponents','createProjectFrom','force','610920HHIBou','cleanUp','startTime','getRemote','send','create','[ERROR]\x20','writed','now','../dto/commit-components.dto','path','[INFO]\x20Wrote\x20','gitUtils','log','469582ILLLIt','function','../utils/git.utils','deleted','getCredentialsFor','decorate','390KBbNfk','236609iVBStP','__importStar','components','../../salesforce/utils/sfdx.utils'];a179_0x20af=function(){return _0x284ace;};return a179_0x20af();}'use strict';var __createBinding=this&&this[a179_0x110e44(0x156)]||(Object[a179_0x110e44(0x117)]?function(_0x133f66,_0x2d3a7e,_0x2da274,_0x419b8d){if(_0x419b8d===undefined)_0x419b8d=_0x2da274;Object['defineProperty'](_0x133f66,_0x419b8d,{'enumerable':!![],'get':function(){return _0x2d3a7e[_0x2da274];}});}:function(_0x2c5cb6,_0x3c44ad,_0x1f86f6,_0xaaff65){if(_0xaaff65===undefined)_0xaaff65=_0x1f86f6;_0x2c5cb6[_0xaaff65]=_0x3c44ad[_0x1f86f6];}),__setModuleDefault=this&&this[a179_0x110e44(0x160)]||(Object[a179_0x110e44(0x117)]?function(_0x320506,_0x5ac464){const _0xfad654=a179_0x110e44;Object[_0xfad654(0x176)](_0x320506,_0xfad654(0x136),{'enumerable':!![],'value':_0x5ac464});}:function(_0x51cc37,_0x566374){const _0x290a61=a179_0x110e44;_0x51cc37[_0x290a61(0x136)]=_0x566374;}),__decorate=this&&this['__decorate']||function(_0x6443cf,_0x1510b0,_0x1a7793,_0xf169a){const _0x2059ea=a179_0x110e44;var _0x55b2a3=arguments[_0x2059ea(0x14c)],_0x2216cf=_0x55b2a3<0x3?_0x1510b0:_0xf169a===null?_0xf169a=Object['getOwnPropertyDescriptor'](_0x1510b0,_0x1a7793):_0xf169a,_0xd6d61;if(typeof Reflect==='object'&&typeof Reflect['decorate']==='function')_0x2216cf=Reflect[_0x2059ea(0x125)](_0x6443cf,_0x1510b0,_0x1a7793,_0xf169a);else{for(var _0x45254b=_0x6443cf[_0x2059ea(0x14c)]-0x1;_0x45254b>=0x0;_0x45254b--)if(_0xd6d61=_0x6443cf[_0x45254b])_0x2216cf=(_0x55b2a3<0x3?_0xd6d61(_0x2216cf):_0x55b2a3>0x3?_0xd6d61(_0x1510b0,_0x1a7793,_0x2216cf):_0xd6d61(_0x1510b0,_0x1a7793))||_0x2216cf;}return _0x55b2a3>0x3&&_0x2216cf&&Object[_0x2059ea(0x176)](_0x1510b0,_0x1a7793,_0x2216cf),_0x2216cf;},__importStar=this&&this[a179_0x110e44(0x128)]||function(_0x47a6bf){const _0x466a3f=a179_0x110e44;if(_0x47a6bf&&_0x47a6bf[_0x466a3f(0x14f)])return _0x47a6bf;var _0x4dbe34={};if(_0x47a6bf!=null){for(var _0x360645 in _0x47a6bf)if(_0x360645!==_0x466a3f(0x136)&&Object[_0x466a3f(0x162)][_0x466a3f(0x148)][_0x466a3f(0x15e)](_0x47a6bf,_0x360645))__createBinding(_0x4dbe34,_0x47a6bf,_0x360645);}return __setModuleDefault(_0x4dbe34,_0x47a6bf),_0x4dbe34;},__metadata=this&&this['__metadata']||function(_0x26680b,_0x422fae){const _0x263599=a179_0x110e44;if(typeof Reflect==='object'&&typeof Reflect[_0x263599(0x146)]===_0x263599(0x121))return Reflect[_0x263599(0x146)](_0x26680b,_0x422fae);},__importDefault=this&&this['__importDefault']||function(_0x3d1700){const _0x8079f1=a179_0x110e44;return _0x3d1700&&_0x3d1700[_0x8079f1(0x14f)]?_0x3d1700:{'default':_0x3d1700};};Object[a179_0x110e44(0x176)](exports,a179_0x110e44(0x14f),{'value':!![]}),exports[a179_0x110e44(0x169)]=void 0x0;const auth_settings_service_1=require('../../shared/services/auth-settings.service'),commit_components_dto_1=require(a179_0x110e44(0x11b)),events_1=__importDefault(require(a179_0x110e44(0x107))),git_utils_1=require(a179_0x110e44(0x122)),mdapi_utils_1=require(a179_0x110e44(0x16a)),sfdx_utils_1=require(a179_0x110e44(0x131)),typedi_1=__importStar(require(a179_0x110e44(0x10a))),child_types_1=__importDefault(require(a179_0x110e44(0x135))),utils_1=require('../../shared/utils'),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),constants_1=require(a179_0x110e44(0x167)),bitbucket_api_service_1=require(a179_0x110e44(0x144)),sfdx_utils_2=require(a179_0x110e44(0x12a)),fs_internal_1=require(a179_0x110e44(0x16c)),path_1=require(a179_0x110e44(0x11c));let CommitComponentsJob=class CommitComponentsJob extends events_1[a179_0x110e44(0x136)]{constructor(_0x49b8c7){const _0x153178=a179_0x110e44;super(),this[_0x153178(0x14d)]=_0x49b8c7,this[_0x153178(0x166)]=0x3e8,this[_0x153178(0x142)]=0x0,this[_0x153178(0x149)]=0x0,this[_0x153178(0x114)]=Date['now']();}async[a179_0x110e44(0x115)](){const _0x1a5bd3=a179_0x110e44,{repo:_0x476df5}=this['commitData'];let _0x1d9e97=this['authSettings'][_0x1a5bd3(0x124)](this['commitData']['provider']);if(this[_0x1a5bd3(0x134)]['provider']===_0x1a5bd3(0x172)){const _0x1a45bf=typedi_1['default'][_0x1a5bd3(0x168)](bitbucket_api_service_1[_0x1a5bd3(0x12e)]);await _0x1a45bf[_0x1a5bd3(0x16f)](),_0x1d9e97+=encodeURIComponent(_0x1a45bf['getAccessToken']());}return _0x476df5['gitUrl'][_0x1a5bd3(0x170)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x1a5bd3(0x141)](_0x476df5[_0x1a5bd3(0x154)])+_0x1a5bd3(0x15d)+_0x1d9e97+'@');}[a179_0x110e44(0x161)](_0x4725cc){const _0x264789=a179_0x110e44;var _0x52fb5b;_0x4725cc[_0x264789(0x15a)](_0xb7f6f2=>child_types_1[_0x264789(0x136)][_0x264789(0x13e)](_0xb7f6f2[_0x264789(0x15b)])?0x1:-0x1);const _0x514c5e={};for(const _0x2c56c8 of _0x4725cc){_0x514c5e[_0x52fb5b=_0x2c56c8['fileName']]||(_0x514c5e[_0x52fb5b]=[]),_0x514c5e[_0x2c56c8[_0x264789(0x12b)]][_0x264789(0x140)](_0x2c56c8);}return Object['values'](_0x514c5e)[_0x264789(0x143)]((_0x38809d,_0x32cdd6)=>[..._0x38809d,..._0x32cdd6],[]);}async[a179_0x110e44(0x150)](_0x282019){const _0x371112=a179_0x110e44;_0x282019=this[_0x371112(0x161)](_0x282019);let _0xc16ee3=0x0;while(_0x282019['length']){const _0x402585=_0x282019['splice'](0x0,this[_0x371112(0x166)]);await this['mdapiUtils']['writeFlosumComponents'](_0x402585,{'skipChildErrors':this['commitData'][_0x371112(0x13a)][_0x371112(0x109)]===_0x371112(0x14a)}),_0xc16ee3+=_0x402585[_0x371112(0x14c)],this['sfLogger']['log'](_0x371112(0x11d)+_0xc16ee3+'/'+this['componentsToWrite']+'\x20components'),await this[_0x371112(0x139)]['send']();}}async[a179_0x110e44(0x10f)](_0x4223ef){const _0xbfeff9=a179_0x110e44;_0x4223ef[_0xbfeff9(0x15a)](_0x3dcfb0=>child_types_1[_0xbfeff9(0x136)][_0xbfeff9(0x13e)](_0x3dcfb0[_0xbfeff9(0x14e)])?-0x1:0x1);let _0x12b945=0x0;while(_0x4223ef[_0xbfeff9(0x14c)]){const _0x1d7b94=_0x4223ef[_0xbfeff9(0x10d)](0x0,this[_0xbfeff9(0x166)]);await this[_0xbfeff9(0x158)][_0xbfeff9(0x10f)](_0x1d7b94),_0x12b945+=_0x1d7b94['length'],this['sfLogger'][_0xbfeff9(0x11f)]('[INFO]\x20Deleted\x20'+_0x12b945+'/'+this[_0xbfeff9(0x149)]+_0xbfeff9(0x173)),await this['sfLogger']['send']();}}async[a179_0x110e44(0x113)](){const _0x2d3170=a179_0x110e44;this[_0x2d3170(0x11e)]&&await this[_0x2d3170(0x11e)][_0x2d3170(0x163)]()[_0x2d3170(0x165)](()=>void 0x0),this['mdapiUtils']&&await this[_0x2d3170(0x158)][_0x2d3170(0x163)]()[_0x2d3170(0x165)](()=>void 0x0),this[_0x2d3170(0x137)]&&await this[_0x2d3170(0x137)][_0x2d3170(0x163)]()['catch'](()=>void 0x0);}async[a179_0x110e44(0x138)](){const _0x3319a2=a179_0x110e44,{repo:_0x9149e,branch:_0x122e05,components:_0x56aa08,convertToSFDX:_0x2ea023,message:_0x544091,user:_0x2dcdff}=this[_0x3319a2(0x134)];this[_0x3319a2(0x158)]=new mdapi_utils_1[(_0x3319a2(0x153))](_0x9149e[_0x3319a2(0x109)],_0x122e05['name']),this[_0x3319a2(0x11e)]=new git_utils_1[(_0x3319a2(0x155))](await this[_0x3319a2(0x115)]()),this[_0x3319a2(0x137)]=new sfdx_utils_1[(_0x3319a2(0x14b))](_0x9149e[_0x3319a2(0x109)],_0x122e05[_0x3319a2(0x109)]);let _0x408513=_0x2ea023;try{this[_0x3319a2(0x139)][_0x3319a2(0x11f)]('[INFO]\x20Start\x20clonning\x20repository'),await this[_0x3319a2(0x11e)]['clone'](_0x122e05[_0x3319a2(0x109)],_0x9149e['name']);!this[_0x3319a2(0x134)][_0x3319a2(0x111)]?(this['sfLogger']['log'](_0x3319a2(0x15f)),await this[_0x3319a2(0x158)][_0x3319a2(0x12c)](this[_0x3319a2(0x11e)][_0x3319a2(0x106)])):this[_0x3319a2(0x139)][_0x3319a2(0x11f)](_0x3319a2(0x132));_0x56aa08[_0x3319a2(0x119)]&&(this[_0x3319a2(0x139)][_0x3319a2(0x11f)](_0x3319a2(0x175)),this['componentsToWrite']=_0x56aa08[_0x3319a2(0x119)]['length'],await this[_0x3319a2(0x150)](_0x56aa08[_0x3319a2(0x119)]),await this['sfLogger'][_0x3319a2(0x116)]());_0x56aa08[_0x3319a2(0x123)]&&(this[_0x3319a2(0x139)][_0x3319a2(0x11f)](_0x3319a2(0x133)),this[_0x3319a2(0x149)]=_0x56aa08[_0x3319a2(0x123)]['length'],await this[_0x3319a2(0x10f)](_0x56aa08[_0x3319a2(0x123)]),await this[_0x3319a2(0x139)]['send']());await this[_0x3319a2(0x139)][_0x3319a2(0x116)]();await sfdx_utils_2[_0x3319a2(0x16d)]['isSFDXProject'](this['gitUtils']['dir'])?(_0x408513=!![],await fs_internal_1['FS'][_0x3319a2(0x163)](path_1[_0x3319a2(0x10c)](this['gitUtils'][_0x3319a2(0x106)],'force-app'))):await this[_0x3319a2(0x11e)][_0x3319a2(0x151)]();_0x408513?(this[_0x3319a2(0x139)][_0x3319a2(0x11f)](_0x3319a2(0x12d)),await this[_0x3319a2(0x137)][_0x3319a2(0x110)](this[_0x3319a2(0x158)][_0x3319a2(0x106)]),await this[_0x3319a2(0x137)]['copyProjectTo'](this[_0x3319a2(0x11e)][_0x3319a2(0x106)]),await this[_0x3319a2(0x137)][_0x3319a2(0x163)](),await this['sfLogger'][_0x3319a2(0x116)]()):(this[_0x3319a2(0x139)][_0x3319a2(0x11f)](_0x3319a2(0x152)),await this[_0x3319a2(0x158)][_0x3319a2(0x130)](this[_0x3319a2(0x11e)][_0x3319a2(0x106)]),await this['sfLogger'][_0x3319a2(0x116)]());this['sfLogger'][_0x3319a2(0x11f)](_0x3319a2(0x12f)),await this[_0x3319a2(0x11e)]['commitAndPush'](_0x544091,{'email':constants_1['DEFAULT_GIT_USER_EMAIL'],'name':_0x2dcdff[_0x3319a2(0x109)]},_0x122e05[_0x3319a2(0x109)]),await this[_0x3319a2(0x11e)][_0x3319a2(0x163)](),await this[_0x3319a2(0x158)][_0x3319a2(0x163)]();const _0x276fce=this[_0x3319a2(0x142)]+this[_0x3319a2(0x149)];this['sfLogger']['log']('[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x3319a2(0x11a)]()-this[_0x3319a2(0x114)])+'ms.\x20Committed\x20components\x20-\x20'+_0x276fce),await this['sfLogger'][_0x3319a2(0x116)]();}catch(_0x3233ab){await this[_0x3319a2(0x113)](),this[_0x3319a2(0x139)]['log'](_0x3319a2(0x118)+_0x3233ab),await this[_0x3319a2(0x139)]['send']();throw _0x3233ab;}}async[a179_0x110e44(0x105)](_0xd26d,_0x159ab9){const _0x22a431=a179_0x110e44;var _0x52e13b,_0x5c20fb;this[_0x22a431(0x139)]=new salesforce_logger_v2_service_1[(_0x22a431(0x159))](_0x159ab9[_0x22a431(0x10b)](),_0x159ab9[_0x22a431(0x157)]()+'\x20['+commit_components_dto_1['CommitComponentsDto']['name']+']');const _0xf37b66=!!((_0x52e13b=_0xd26d[_0x22a431(0x129)])===null||_0x52e13b===void 0x0?void 0x0:_0x52e13b['writed'])||!!((_0x5c20fb=_0xd26d['components'])===null||_0x5c20fb===void 0x0?void 0x0:_0x5c20fb[_0x22a431(0x123)]);if(!_0xf37b66){this[_0x22a431(0x139)]['log'](_0x22a431(0x147)),await this[_0x22a431(0x139)][_0x22a431(0x116)]();return;}this['commitData']=_0xd26d,await this[_0x22a431(0x138)]();}};CommitComponentsJob=__decorate([typedi_1[a179_0x110e44(0x15c)]({'transient':!![]}),__metadata(a179_0x110e44(0x13c),[auth_settings_service_1[a179_0x110e44(0x164)]])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;