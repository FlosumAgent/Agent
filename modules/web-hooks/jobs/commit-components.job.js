const a144_0x33a891=a144_0x1919;(function(_0x21d3f1,_0x2ef4fa){const _0x1f2cc2=a144_0x1919,_0x585278=_0x21d3f1();while(!![]){try{const _0x118afe=-parseInt(_0x1f2cc2(0x15b))/0x1+-parseInt(_0x1f2cc2(0x16a))/0x2*(-parseInt(_0x1f2cc2(0x177))/0x3)+parseInt(_0x1f2cc2(0x142))/0x4*(parseInt(_0x1f2cc2(0x183))/0x5)+-parseInt(_0x1f2cc2(0x12f))/0x6*(-parseInt(_0x1f2cc2(0x138))/0x7)+-parseInt(_0x1f2cc2(0x162))/0x8*(parseInt(_0x1f2cc2(0x16f))/0x9)+parseInt(_0x1f2cc2(0x174))/0xa+-parseInt(_0x1f2cc2(0x171))/0xb*(parseInt(_0x1f2cc2(0x15e))/0xc);if(_0x118afe===_0x2ef4fa)break;else _0x585278['push'](_0x585278['shift']());}catch(_0x1029c4){_0x585278['push'](_0x585278['shift']());}}}(a144_0x1f83,0x7a703));const a144_0x203356=function(){let _0x1dfdfc=!![];return function(_0x403740,_0x89755){const _0x2e5758=_0x1dfdfc?function(){const _0x358469=a144_0x1919;if(_0x89755){const _0x5158bb=_0x89755[_0x358469(0x170)](_0x403740,arguments);return _0x89755=null,_0x5158bb;}}:function(){};return _0x1dfdfc=![],_0x2e5758;};}(),a144_0x2dd39f=a144_0x203356(this,function(){const _0x3e9236=a144_0x1919;return a144_0x2dd39f['toString']()[_0x3e9236(0x133)]('(((.+)+)+)+$')[_0x3e9236(0x178)]()[_0x3e9236(0x17b)](a144_0x2dd39f)[_0x3e9236(0x133)](_0x3e9236(0x12b));});a144_0x2dd39f();function a144_0x1f83(){const _0x153514=['name','email','typedi','splice','126IWoOTx','[INFO]\x20Start\x20converting\x20to\x20SFDX','copyMdapiTo','remote','push','run','ms.\x20Commited\x20components\x20-\x20','copyProjectTo','[INFO]\x20Preparing\x20to\x20delete\x20components','__esModule','92DhVmeD','getProtocol','function','../../shared/utils','groupComponentsByFileName','[INFO]\x20Start\x20clonning\x20repository','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','removeDir','object','sort','COMPONENTS_PER_TICK','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','send','writeComponents','metadata','gitUtils','now','startTime','[INFO]\x20Preparing\x20to\x20write\x20components','Service','CommitComponentsJob','clearDir','cleanUp','deleted','428918cKvuSA','createProjectFrom','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','1416helcJZ','removeComponents','log','[INFO]\x20Prepare\x20mdapi\x20files','1544xxRaRP','force','../utils/mdapi.utils','decorate','replace','../../parsers/mdapi/child-types','mdapiUtils','type','1643210NbKlux','values','defineProperty','componentsToDelete','fileName','3609wHVNwN','apply','168443rHkdkQ','[INFO]\x20Deleted\x20','clone','3037670OscRdr','AuthSettingsService','sfdxUtils','3sGutzB','toString','default','__decorate','constructor','catch','componentsToWrite','commitData','__metadata','exec','MDApiUtils','../utils/sfdx.utils','192590dvReUq','writed','writeFlosumComponents','getOwnPropertyDescriptor','[ERROR]\x20','gitUrl','logger','components','(((.+)+)+)+$','dir','design:paramtypes','length','267822QIIkRc','://','events','includes','search'];a144_0x1f83=function(){return _0x153514;};return a144_0x1f83();}function a144_0x1919(_0x4ba897,_0x4b1980){const _0x45d286=a144_0x1f83();return a144_0x1919=function(_0x2dd39f,_0x203356){_0x2dd39f=_0x2dd39f-0x125;let _0x1f83aa=_0x45d286[_0x2dd39f];return _0x1f83aa;},a144_0x1919(_0x4ba897,_0x4b1980);}'use strict';var __decorate=this&&this[a144_0x33a891(0x17a)]||function(_0x2c253b,_0x8fb0d3,_0x46b910,_0x9c8e73){const _0x46b1ff=a144_0x33a891;var _0x2e1f35=arguments[_0x46b1ff(0x12e)],_0x4db104=_0x2e1f35<0x3?_0x8fb0d3:_0x9c8e73===null?_0x9c8e73=Object[_0x46b1ff(0x126)](_0x8fb0d3,_0x46b910):_0x9c8e73,_0xd3f999;if(typeof Reflect===_0x46b1ff(0x14a)&&typeof Reflect[_0x46b1ff(0x165)]==='function')_0x4db104=Reflect['decorate'](_0x2c253b,_0x8fb0d3,_0x46b910,_0x9c8e73);else{for(var _0x4ceaa4=_0x2c253b[_0x46b1ff(0x12e)]-0x1;_0x4ceaa4>=0x0;_0x4ceaa4--)if(_0xd3f999=_0x2c253b[_0x4ceaa4])_0x4db104=(_0x2e1f35<0x3?_0xd3f999(_0x4db104):_0x2e1f35>0x3?_0xd3f999(_0x8fb0d3,_0x46b910,_0x4db104):_0xd3f999(_0x8fb0d3,_0x46b910))||_0x4db104;}return _0x2e1f35>0x3&&_0x4db104&&Object[_0x46b1ff(0x16c)](_0x8fb0d3,_0x46b910,_0x4db104),_0x4db104;},__metadata=this&&this[a144_0x33a891(0x17f)]||function(_0x23b70c,_0x3a060c){const _0x2052d7=a144_0x33a891;if(typeof Reflect===_0x2052d7(0x14a)&&typeof Reflect[_0x2052d7(0x151)]===_0x2052d7(0x144))return Reflect[_0x2052d7(0x151)](_0x23b70c,_0x3a060c);},__importDefault=this&&this['__importDefault']||function(_0x2fda1c){const _0x5e3437=a144_0x33a891;return _0x2fda1c&&_0x2fda1c[_0x5e3437(0x141)]?_0x2fda1c:{'default':_0x2fda1c};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a144_0x33a891(0x157)]=void 0x0;const auth_settings_service_1=require('../../shared/services/auth-settings.service'),events_1=__importDefault(require(a144_0x33a891(0x131))),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a144_0x33a891(0x164)),sfdx_utils_1=require(a144_0x33a891(0x182)),typedi_1=require(a144_0x33a891(0x136)),child_types_1=__importDefault(require(a144_0x33a891(0x167))),utils_1=require(a144_0x33a891(0x145));let CommitComponentsJob=class CommitComponentsJob extends events_1[a144_0x33a891(0x179)]{constructor(_0x57a54a){const _0x52a283=a144_0x33a891;super(),this['authSettings']=_0x57a54a,this[_0x52a283(0x14c)]=0x3e8,this[_0x52a283(0x17d)]=0x0,this[_0x52a283(0x16d)]=0x0,this[_0x52a283(0x154)]=Date[_0x52a283(0x153)]();}get[a144_0x33a891(0x13b)](){const _0x21b0b7=a144_0x33a891,{repo:_0x2e517d}=this['commitData'],{gitCredentials:_0x5b42fd}=this['authSettings'];return _0x2e517d[_0x21b0b7(0x128)][_0x21b0b7(0x166)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x21b0b7(0x143)])(_0x2e517d[_0x21b0b7(0x128)])+_0x21b0b7(0x130)+_0x5b42fd+'@');}[a144_0x33a891(0x146)](_0x25f533){const _0x8a58a2=a144_0x33a891;var _0x353ea1;_0x25f533[_0x8a58a2(0x14b)](_0xb5fdbd=>child_types_1[_0x8a58a2(0x179)][_0x8a58a2(0x132)](_0xb5fdbd['fileType'])?0x1:-0x1);const _0x1d7f59={};for(const _0x898c1b of _0x25f533){_0x1d7f59[_0x353ea1=_0x898c1b[_0x8a58a2(0x16e)]]||(_0x1d7f59[_0x353ea1]=[]),_0x1d7f59[_0x898c1b[_0x8a58a2(0x16e)]][_0x8a58a2(0x13c)](_0x898c1b);}return Object[_0x8a58a2(0x16b)](_0x1d7f59)['reduce']((_0x128c41,_0x529dee)=>[..._0x128c41,..._0x529dee],[]);}async[a144_0x33a891(0x150)](_0x565073){const _0x28c07d=a144_0x33a891;_0x565073=this['groupComponentsByFileName'](_0x565073);let _0xd43a3f=0x0;while(_0x565073[_0x28c07d(0x12e)]){const _0x19b813=_0x565073['splice'](0x0,this[_0x28c07d(0x14c)]);await this[_0x28c07d(0x168)][_0x28c07d(0x125)](_0x19b813),_0xd43a3f+=_0x19b813[_0x28c07d(0x12e)],this['logger'][_0x28c07d(0x160)]('[INFO]\x20Writed\x20'+_0xd43a3f+'/'+this[_0x28c07d(0x17d)]+'\x20components'),await this[_0x28c07d(0x129)][_0x28c07d(0x14f)]();}}async['removeComponents'](_0x5b0fec){const _0xb0da1b=a144_0x33a891;_0x5b0fec[_0xb0da1b(0x14b)](_0x11160d=>child_types_1['default']['includes'](_0x11160d[_0xb0da1b(0x169)])?-0x1:0x1);let _0x35351d=0x0;while(_0x5b0fec[_0xb0da1b(0x12e)]){const _0x527aa7=_0x5b0fec[_0xb0da1b(0x137)](0x0,this['COMPONENTS_PER_TICK']);await this[_0xb0da1b(0x168)][_0xb0da1b(0x15f)](_0x527aa7),_0x35351d+=_0x527aa7[_0xb0da1b(0x12e)],this['logger'][_0xb0da1b(0x160)](_0xb0da1b(0x172)+_0x35351d+'/'+this['componentsToDelete']+'\x20components'),await this['logger'][_0xb0da1b(0x14f)]();}}async[a144_0x33a891(0x159)](){const _0x218057=a144_0x33a891;this[_0x218057(0x152)]&&await this[_0x218057(0x152)][_0x218057(0x149)]()[_0x218057(0x17c)](()=>void 0x0),this[_0x218057(0x168)]&&await this[_0x218057(0x168)]['removeDir']()[_0x218057(0x17c)](()=>void 0x0),this[_0x218057(0x176)]&&await this[_0x218057(0x176)][_0x218057(0x149)]()[_0x218057(0x17c)](()=>void 0x0);}async[a144_0x33a891(0x180)](){const _0x12efc5=a144_0x33a891,{repo:_0x3377cc,branch:_0x4f7be1,components:_0x41d9a9,convertToSFDX:_0x4a12df,message:_0xbe1750,user:_0x5c0baa}=this['commitData'];this['mdapiUtils']=new mdapi_utils_1[(_0x12efc5(0x181))](_0x3377cc[_0x12efc5(0x134)],_0x4f7be1[_0x12efc5(0x134)]),this[_0x12efc5(0x152)]=new git_utils_1['GitUtils'](this[_0x12efc5(0x13b)]),this['sfdxUtils']=new sfdx_utils_1['SFDXUtils'](_0x3377cc[_0x12efc5(0x134)],_0x4f7be1[_0x12efc5(0x134)]);try{this[_0x12efc5(0x129)][_0x12efc5(0x160)](_0x12efc5(0x147)),await this[_0x12efc5(0x152)][_0x12efc5(0x173)](_0x4f7be1[_0x12efc5(0x134)],_0x3377cc[_0x12efc5(0x134)]);!this['commitData'][_0x12efc5(0x163)]?(this[_0x12efc5(0x129)][_0x12efc5(0x160)](_0x12efc5(0x161)),await this[_0x12efc5(0x168)]['prepareMdapi'](this[_0x12efc5(0x152)][_0x12efc5(0x12c)])):this[_0x12efc5(0x129)][_0x12efc5(0x160)](_0x12efc5(0x15d));_0x41d9a9['writed']&&(this[_0x12efc5(0x129)][_0x12efc5(0x160)](_0x12efc5(0x155)),this[_0x12efc5(0x17d)]=_0x41d9a9[_0x12efc5(0x184)][_0x12efc5(0x12e)],await this['writeComponents'](_0x41d9a9['writed']));_0x41d9a9[_0x12efc5(0x15a)]&&(this[_0x12efc5(0x129)]['log'](_0x12efc5(0x140)),this[_0x12efc5(0x16d)]=_0x41d9a9['deleted'][_0x12efc5(0x12e)],await this['removeComponents'](_0x41d9a9[_0x12efc5(0x15a)]));await this[_0x12efc5(0x152)][_0x12efc5(0x158)](),await this[_0x12efc5(0x129)][_0x12efc5(0x14f)]();_0x4a12df?(this['logger']['log'](_0x12efc5(0x139)),await this['sfdxUtils'][_0x12efc5(0x15c)](this['mdapiUtils']['dir']),await this[_0x12efc5(0x176)][_0x12efc5(0x13f)](this['gitUtils'][_0x12efc5(0x12c)]),await this[_0x12efc5(0x176)][_0x12efc5(0x149)](),await this['logger'][_0x12efc5(0x14f)]()):(this[_0x12efc5(0x129)][_0x12efc5(0x160)](_0x12efc5(0x148)),await this['mdapiUtils'][_0x12efc5(0x13a)](this[_0x12efc5(0x152)][_0x12efc5(0x12c)]));this[_0x12efc5(0x129)][_0x12efc5(0x160)]('[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git'),await this[_0x12efc5(0x152)]['commitAndPush'](_0xbe1750,{'email':_0x5c0baa[_0x12efc5(0x135)],'name':_0x5c0baa['name']},_0x4f7be1[_0x12efc5(0x134)]),await this[_0x12efc5(0x152)][_0x12efc5(0x149)](),await this[_0x12efc5(0x168)][_0x12efc5(0x149)]();const _0x1edad6=this[_0x12efc5(0x17d)]+this[_0x12efc5(0x16d)];this[_0x12efc5(0x129)][_0x12efc5(0x160)](_0x12efc5(0x14e)+(Date[_0x12efc5(0x153)]()-this[_0x12efc5(0x154)])+_0x12efc5(0x13e)+_0x1edad6),await this[_0x12efc5(0x129)][_0x12efc5(0x14f)]();}catch(_0x28a521){await this[_0x12efc5(0x159)](),this['logger'][_0x12efc5(0x160)](_0x12efc5(0x127)+_0x28a521),await this[_0x12efc5(0x129)][_0x12efc5(0x14f)]();throw _0x28a521;}}async[a144_0x33a891(0x13d)](_0x5f2573){const _0x78f14b=a144_0x33a891;var _0x430c0d,_0x5bd9a9,_0x2e8122,_0x8b1367;const _0x386408=!!((_0x5bd9a9=(_0x430c0d=_0x5f2573[_0x78f14b(0x12a)])===null||_0x430c0d===void 0x0?void 0x0:_0x430c0d['writed'])===null||_0x5bd9a9===void 0x0?void 0x0:_0x5bd9a9['length'])||!!((_0x8b1367=(_0x2e8122=_0x5f2573[_0x78f14b(0x12a)])===null||_0x2e8122===void 0x0?void 0x0:_0x2e8122[_0x78f14b(0x15a)])===null||_0x8b1367===void 0x0?void 0x0:_0x8b1367['length']);if(!_0x386408){this[_0x78f14b(0x129)][_0x78f14b(0x160)](_0x78f14b(0x14d)),await this[_0x78f14b(0x129)][_0x78f14b(0x14f)]();return;}this[_0x78f14b(0x17e)]=_0x5f2573,await this['exec']();}};CommitComponentsJob=__decorate([(0x0,typedi_1[a144_0x33a891(0x156)])({'transient':!![]}),__metadata(a144_0x33a891(0x12d),[auth_settings_service_1[a144_0x33a891(0x175)]])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;