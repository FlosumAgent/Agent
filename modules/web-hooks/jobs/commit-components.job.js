const a176_0x11cd68=a176_0x56cb;function a176_0x12d4(){const _0x59a307=['replace','design:paramtypes','object','getLoggerId','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','clearDir','typedi','[ERROR]\x20','fileName','type','(((.+)+)+)+$','252uJDpPO','componentsToWrite','removeDir','copyProjectTo','toString','function','5lPzgQx','length','reduce','search','components','cleanUp','1199376WfsMnS','[INFO]\x20Start\x20clonning\x20repository','../../shared/utils','COMPONENTS_PER_TICK','deleted','://','dir','CommitComponentsJob','writeFlosumComponents','gitUtils','MDApiUtils','../utils/git.utils','constructor','master','AuthSettingsService','836152YSwldr','push','log','[INFO]\x20Prepare\x20mdapi\x20files','[INFO]\x20Preparing\x20to\x20delete\x20components','catch','events','exec','groupComponentsByFileName','splice','\x20components','decorate','remote','[INFO]\x20Writed\x20','SFDXUtils','force','writeComponents','startTime','createProjectFrom','provider','Service','mdapiUtils','getProtocol','getOwnPropertyDescriptor','83rvXRld','186525AgsWJV','copyMdapiTo','sort','30424xCwOfc','63BcGsDG','348830sfXYnb','name','9014544WbBUVS','removeComponents','fileType','__decorate','12398OmxBVv','metadata','send','getPrefix','defineProperty','../../salesforce/services/salesforce-logger-v2.service','writed','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','default','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','apply','[INFO]\x20Deleted\x20','componentsToDelete','[INFO]\x20Start\x20converting\x20to\x20SFDX','sfLogger','../utils/mdapi.utils','../utils/sfdx.utils','includes','[INFO]\x20Preparing\x20to\x20write\x20components','now','authSettings','gitUrl','commitData','sfdxUtils','commitAndPush'];a176_0x12d4=function(){return _0x59a307;};return a176_0x12d4();}(function(_0x142e94,_0x25edb1){const _0x420820=a176_0x56cb,_0x205280=_0x142e94();while(!![]){try{const _0x350ac1=-parseInt(_0x420820(0x218))/0x1*(parseInt(_0x420820(0x224))/0x2)+-parseInt(_0x420820(0x219))/0x3+parseInt(_0x420820(0x200))/0x4+parseInt(_0x420820(0x1eb))/0x5*(parseInt(_0x420820(0x1f1))/0x6)+parseInt(_0x420820(0x1e5))/0x7*(-parseInt(_0x420820(0x21c))/0x8)+-parseInt(_0x420820(0x21d))/0x9*(parseInt(_0x420820(0x21e))/0xa)+parseInt(_0x420820(0x220))/0xb;if(_0x350ac1===_0x25edb1)break;else _0x205280['push'](_0x205280['shift']());}catch(_0x2190d9){_0x205280['push'](_0x205280['shift']());}}}(a176_0x12d4,0x42141));const a176_0x5f2744=function(){let _0x3cadec=!![];return function(_0x8052db,_0x1e49a3){const _0x50934f=_0x3cadec?function(){const _0x3aaf6e=a176_0x56cb;if(_0x1e49a3){const _0x3511f3=_0x1e49a3[_0x3aaf6e(0x1cb)](_0x8052db,arguments);return _0x1e49a3=null,_0x3511f3;}}:function(){};return _0x3cadec=![],_0x50934f;};}(),a176_0x3478fd=a176_0x5f2744(this,function(){const _0x3fc2a7=a176_0x56cb;return a176_0x3478fd[_0x3fc2a7(0x1e9)]()[_0x3fc2a7(0x1ee)](_0x3fc2a7(0x1e4))[_0x3fc2a7(0x1e9)]()[_0x3fc2a7(0x1fd)](a176_0x3478fd)[_0x3fc2a7(0x1ee)](_0x3fc2a7(0x1e4));});a176_0x3478fd();'use strict';function a176_0x56cb(_0x48e741,_0x6c41cf){const _0x1f920b=a176_0x12d4();return a176_0x56cb=function(_0x3478fd,_0x5f2744){_0x3478fd=_0x3478fd-0x1c2;let _0x12d4a9=_0x1f920b[_0x3478fd];return _0x12d4a9;},a176_0x56cb(_0x48e741,_0x6c41cf);}var __decorate=this&&this[a176_0x11cd68(0x223)]||function(_0x432213,_0x4c1ded,_0x3bb935,_0x45c18d){const _0x5acd95=a176_0x11cd68;var _0x4761d7=arguments[_0x5acd95(0x1ec)],_0x223274=_0x4761d7<0x3?_0x4c1ded:_0x45c18d===null?_0x45c18d=Object[_0x5acd95(0x217)](_0x4c1ded,_0x3bb935):_0x45c18d,_0x481a1a;if(typeof Reflect===_0x5acd95(0x1dc)&&typeof Reflect[_0x5acd95(0x20b)]===_0x5acd95(0x1ea))_0x223274=Reflect['decorate'](_0x432213,_0x4c1ded,_0x3bb935,_0x45c18d);else{for(var _0x202329=_0x432213['length']-0x1;_0x202329>=0x0;_0x202329--)if(_0x481a1a=_0x432213[_0x202329])_0x223274=(_0x4761d7<0x3?_0x481a1a(_0x223274):_0x4761d7>0x3?_0x481a1a(_0x4c1ded,_0x3bb935,_0x223274):_0x481a1a(_0x4c1ded,_0x3bb935))||_0x223274;}return _0x4761d7>0x3&&_0x223274&&Object[_0x5acd95(0x1c5)](_0x4c1ded,_0x3bb935,_0x223274),_0x223274;},__metadata=this&&this['__metadata']||function(_0x2c9969,_0x4b368b){const _0x693269=a176_0x11cd68;if(typeof Reflect==='object'&&typeof Reflect[_0x693269(0x1c2)]==='function')return Reflect[_0x693269(0x1c2)](_0x2c9969,_0x4b368b);},__importDefault=this&&this['__importDefault']||function(_0x67fa98){return _0x67fa98&&_0x67fa98['__esModule']?_0x67fa98:{'default':_0x67fa98};};Object[a176_0x11cd68(0x1c5)](exports,'__esModule',{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const auth_settings_service_1=require('../../shared/services/auth-settings.service'),events_1=__importDefault(require(a176_0x11cd68(0x206))),git_utils_1=require(a176_0x11cd68(0x1fc)),mdapi_utils_1=require(a176_0x11cd68(0x1d0)),sfdx_utils_1=require(a176_0x11cd68(0x1d1)),typedi_1=require(a176_0x11cd68(0x1e0)),child_types_1=__importDefault(require('../../parsers/data/child-types')),utils_1=require(a176_0x11cd68(0x1f3)),salesforce_logger_v2_service_1=require(a176_0x11cd68(0x1c6));let CommitComponentsJob=class CommitComponentsJob extends events_1[a176_0x11cd68(0x1c9)]{constructor(_0x18062c){const _0xfa532e=a176_0x11cd68;super(),this['authSettings']=_0x18062c,this[_0xfa532e(0x1f4)]=0x3e8,this[_0xfa532e(0x1e6)]=0x0,this[_0xfa532e(0x1cd)]=0x0,this[_0xfa532e(0x211)]=Date[_0xfa532e(0x1d4)]();}get[a176_0x11cd68(0x20c)](){const _0x39d62a=a176_0x11cd68,{repo:_0x37cffb}=this['commitData'],_0xa03334=this[_0x39d62a(0x1d5)]['getCredentialsFor'](this[_0x39d62a(0x1d7)][_0x39d62a(0x213)]);return _0x37cffb[_0x39d62a(0x1d6)][_0x39d62a(0x1da)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x39d62a(0x216)](_0x37cffb[_0x39d62a(0x1d6)])+_0x39d62a(0x1f6)+_0xa03334+'@');}[a176_0x11cd68(0x208)](_0xefbde9){const _0x1e2095=a176_0x11cd68;var _0x581652;_0xefbde9[_0x1e2095(0x21b)](_0xcc44b5=>child_types_1['default']['includes'](_0xcc44b5[_0x1e2095(0x222)])?0x1:-0x1);const _0x548564={};for(const _0x19be06 of _0xefbde9){_0x548564[_0x581652=_0x19be06['fileName']]||(_0x548564[_0x581652]=[]),_0x548564[_0x19be06[_0x1e2095(0x1e2)]][_0x1e2095(0x201)](_0x19be06);}return Object['values'](_0x548564)[_0x1e2095(0x1ed)]((_0x39ff5f,_0x4ce2a5)=>[..._0x39ff5f,..._0x4ce2a5],[]);}async[a176_0x11cd68(0x210)](_0x15d292){const _0x5a400c=a176_0x11cd68;_0x15d292=this[_0x5a400c(0x208)](_0x15d292);let _0x2ab327=0x0;while(_0x15d292[_0x5a400c(0x1ec)]){const _0x288220=_0x15d292[_0x5a400c(0x209)](0x0,this[_0x5a400c(0x1f4)]);await this[_0x5a400c(0x215)][_0x5a400c(0x1f9)](_0x288220,{'skipChildErrors':this[_0x5a400c(0x1d7)]['branch'][_0x5a400c(0x21f)]===_0x5a400c(0x1fe)}),_0x2ab327+=_0x288220['length'],this[_0x5a400c(0x1cf)][_0x5a400c(0x202)](_0x5a400c(0x20d)+_0x2ab327+'/'+this[_0x5a400c(0x1e6)]+_0x5a400c(0x20a)),await this[_0x5a400c(0x1cf)][_0x5a400c(0x1c3)]();}}async[a176_0x11cd68(0x221)](_0x128d3b){const _0x15bb19=a176_0x11cd68;_0x128d3b[_0x15bb19(0x21b)](_0x27ef3c=>child_types_1[_0x15bb19(0x1c9)][_0x15bb19(0x1d2)](_0x27ef3c[_0x15bb19(0x1e3)])?-0x1:0x1);let _0x1db25c=0x0;while(_0x128d3b['length']){const _0x253dfe=_0x128d3b['splice'](0x0,this[_0x15bb19(0x1f4)]);await this[_0x15bb19(0x215)][_0x15bb19(0x221)](_0x253dfe),_0x1db25c+=_0x253dfe[_0x15bb19(0x1ec)],this['sfLogger']['log'](_0x15bb19(0x1cc)+_0x1db25c+'/'+this[_0x15bb19(0x1cd)]+'\x20components'),await this[_0x15bb19(0x1cf)]['send']();}}async[a176_0x11cd68(0x1f0)](){const _0x1b8208=a176_0x11cd68;this[_0x1b8208(0x1fa)]&&await this[_0x1b8208(0x1fa)]['removeDir']()[_0x1b8208(0x205)](()=>void 0x0),this[_0x1b8208(0x215)]&&await this['mdapiUtils'][_0x1b8208(0x1e7)]()[_0x1b8208(0x205)](()=>void 0x0),this[_0x1b8208(0x1d8)]&&await this['sfdxUtils'][_0x1b8208(0x1e7)]()['catch'](()=>void 0x0);}async[a176_0x11cd68(0x207)](){const _0x3edddb=a176_0x11cd68,{repo:_0x585b16,branch:_0x125536,components:_0x2514d2,convertToSFDX:_0x49d811,message:_0x1ede87,user:_0x22f8fe}=this[_0x3edddb(0x1d7)];this[_0x3edddb(0x215)]=new mdapi_utils_1[(_0x3edddb(0x1fb))](_0x585b16[_0x3edddb(0x21f)],_0x125536[_0x3edddb(0x21f)]),this[_0x3edddb(0x1fa)]=new git_utils_1['GitUtils'](this[_0x3edddb(0x20c)]),this[_0x3edddb(0x1d8)]=new sfdx_utils_1[(_0x3edddb(0x20e))](_0x585b16[_0x3edddb(0x21f)],_0x125536[_0x3edddb(0x21f)]);try{this[_0x3edddb(0x1cf)][_0x3edddb(0x202)](_0x3edddb(0x1f2)),await this[_0x3edddb(0x1fa)]['clone'](_0x125536[_0x3edddb(0x21f)],_0x585b16['name']);!this['commitData'][_0x3edddb(0x20f)]?(this[_0x3edddb(0x1cf)][_0x3edddb(0x202)](_0x3edddb(0x203)),await this[_0x3edddb(0x215)]['prepareMdapi'](this[_0x3edddb(0x1fa)]['dir'])):this[_0x3edddb(0x1cf)][_0x3edddb(0x202)]('[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');_0x2514d2[_0x3edddb(0x1c7)]&&(this[_0x3edddb(0x1cf)]['log'](_0x3edddb(0x1d3)),this[_0x3edddb(0x1e6)]=_0x2514d2[_0x3edddb(0x1c7)][_0x3edddb(0x1ec)],await this[_0x3edddb(0x210)](_0x2514d2[_0x3edddb(0x1c7)]),await this['sfLogger'][_0x3edddb(0x1c3)]());_0x2514d2['deleted']&&(this[_0x3edddb(0x1cf)][_0x3edddb(0x202)](_0x3edddb(0x204)),this[_0x3edddb(0x1cd)]=_0x2514d2['deleted'][_0x3edddb(0x1ec)],await this[_0x3edddb(0x221)](_0x2514d2[_0x3edddb(0x1f5)]),await this[_0x3edddb(0x1cf)]['send']());await this['gitUtils'][_0x3edddb(0x1df)](),await this[_0x3edddb(0x1cf)][_0x3edddb(0x1c3)]();_0x49d811?(this[_0x3edddb(0x1cf)][_0x3edddb(0x202)](_0x3edddb(0x1ce)),await this[_0x3edddb(0x1d8)][_0x3edddb(0x212)](this['mdapiUtils']['dir']),await this[_0x3edddb(0x1d8)][_0x3edddb(0x1e8)](this[_0x3edddb(0x1fa)][_0x3edddb(0x1f7)]),await this[_0x3edddb(0x1d8)][_0x3edddb(0x1e7)](),await this[_0x3edddb(0x1cf)][_0x3edddb(0x1c3)]()):(this[_0x3edddb(0x1cf)][_0x3edddb(0x202)](_0x3edddb(0x1c8)),await this['mdapiUtils'][_0x3edddb(0x21a)](this[_0x3edddb(0x1fa)][_0x3edddb(0x1f7)]),await this[_0x3edddb(0x1cf)]['send']());this[_0x3edddb(0x1cf)][_0x3edddb(0x202)](_0x3edddb(0x1de)),await this[_0x3edddb(0x1fa)][_0x3edddb(0x1d9)](_0x1ede87,{'email':_0x22f8fe['email'],'name':_0x22f8fe[_0x3edddb(0x21f)]},_0x125536[_0x3edddb(0x21f)]),await this[_0x3edddb(0x1fa)][_0x3edddb(0x1e7)](),await this['mdapiUtils'][_0x3edddb(0x1e7)]();const _0x17aedd=this[_0x3edddb(0x1e6)]+this[_0x3edddb(0x1cd)];this[_0x3edddb(0x1cf)][_0x3edddb(0x202)](_0x3edddb(0x1ca)+(Date[_0x3edddb(0x1d4)]()-this[_0x3edddb(0x211)])+'ms.\x20Commited\x20components\x20-\x20'+_0x17aedd),await this[_0x3edddb(0x1cf)]['send']();}catch(_0x3f49a4){await this[_0x3edddb(0x1f0)](),this['sfLogger']['log'](_0x3edddb(0x1e1)+_0x3f49a4),await this['sfLogger'][_0x3edddb(0x1c3)]();throw _0x3f49a4;}}async['run'](_0x3d74c5,_0x1a6e27){const _0x58aa4b=a176_0x11cd68;var _0x531b4d,_0x38b5ba,_0x5b1c07,_0x189d58;this[_0x58aa4b(0x1cf)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x1a6e27[_0x58aa4b(0x1dd)](),_0x1a6e27[_0x58aa4b(0x1c4)]()+'\x20[COMMIT]');const _0x1bb6b5=!!((_0x38b5ba=(_0x531b4d=_0x3d74c5[_0x58aa4b(0x1ef)])===null||_0x531b4d===void 0x0?void 0x0:_0x531b4d[_0x58aa4b(0x1c7)])===null||_0x38b5ba===void 0x0?void 0x0:_0x38b5ba[_0x58aa4b(0x1ec)])||!!((_0x189d58=(_0x5b1c07=_0x3d74c5[_0x58aa4b(0x1ef)])===null||_0x5b1c07===void 0x0?void 0x0:_0x5b1c07[_0x58aa4b(0x1f5)])===null||_0x189d58===void 0x0?void 0x0:_0x189d58[_0x58aa4b(0x1ec)]);if(!_0x1bb6b5){this[_0x58aa4b(0x1cf)][_0x58aa4b(0x202)]('[INFO]\x20Nothing\x20to\x20commit.\x20Skip.'),await this['sfLogger']['send']();return;}this[_0x58aa4b(0x1d7)]=_0x3d74c5,await this[_0x58aa4b(0x207)]();}};CommitComponentsJob=__decorate([typedi_1[a176_0x11cd68(0x214)]({'transient':!![]}),__metadata(a176_0x11cd68(0x1db),[auth_settings_service_1[a176_0x11cd68(0x1ff)]])],CommitComponentsJob),exports[a176_0x11cd68(0x1f8)]=CommitComponentsJob;