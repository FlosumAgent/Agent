const a142_0x1496=['includes','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','getOwnPropertyDescriptor','copyProjectTo','clone','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Service','194006Ayogfy','__esModule','sort','191827goeZEH','decorate','authSettings','length','://','reduce','[INFO]\x20Deleted\x20','ms.\x20Commited\x20components\x20-\x20','now','MDApiUtils','sfdxUtils','[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.','AuthSettingsService','removeComponents','copyMdapiTo','[INFO]\x20Start\x20clonning\x20repository','metadata','469QRBQiW','splice','constructor','send','removeDir','fileName','catch','367kmyqmm','groupComponentsByFileName','test','878484lzRwgv','__decorate','defineProperty','run','gitUtils','componentsToDelete','exec','deleted','function','[INFO]\x20Preparing\x20to\x20write\x20components','625930Pcoqwj','components','log','3606iIKsxt','1IetiKp','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','push','commitAndPush','replace','230MRCwWH','email','COMPONENTS_PER_TICK','startTime','clearDir','[INFO]\x20Writed\x20','writed','dir','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','name','412227rXSFQJ','cleanUp','\x20components','mdapiUtils','../utils/git.utils','force','createProjectFrom','writeComponents','logger','commitData','object','componentsToWrite','writeFlosumComponents','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','../utils/mdapi.utils','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','remote','../../shared/services/auth-settings.service'];const a142_0x1b7bc2=a142_0x9a82;(function(_0x16ba17,_0x216f9f){const _0x4e324c=a142_0x9a82;while(!![]){try{const _0x2fb70e=parseInt(_0x4e324c(0x1ff))*parseInt(_0x4e324c(0x205))+-parseInt(_0x4e324c(0x20f))+parseInt(_0x4e324c(0x1d7))*parseInt(_0x4e324c(0x200))+-parseInt(_0x4e324c(0x1d4))+-parseInt(_0x4e324c(0x1e8))*parseInt(_0x4e324c(0x1ef))+-parseInt(_0x4e324c(0x1fc))+parseInt(_0x4e324c(0x1f2));if(_0x2fb70e===_0x216f9f)break;else _0x16ba17['push'](_0x16ba17['shift']());}catch(_0x25292f){_0x16ba17['push'](_0x16ba17['shift']());}}}(a142_0x1496,0x78f2d));const a142_0x1523c9=function(){let _0x394597=!![];return function(_0x9685b,_0x331106){const _0x27e860=_0x394597?function(){if(_0x331106){const _0x5db032=_0x331106['apply'](_0x9685b,arguments);return _0x331106=null,_0x5db032;}}:function(){};return _0x394597=![],_0x27e860;};}(),a142_0x10c642=a142_0x1523c9(this,function(){const _0x3abac4=function(){const _0x11a1f8=a142_0x9a82,_0x4dc47d=_0x3abac4[_0x11a1f8(0x1ea)](_0x11a1f8(0x1d2))()['constructor'](_0x11a1f8(0x201));return!_0x4dc47d[_0x11a1f8(0x1f1)](a142_0x10c642);};return _0x3abac4();});a142_0x10c642();'use strict';var __decorate=this&&this[a142_0x1b7bc2(0x1f3)]||function(_0x3f3de1,_0x6a44be,_0xc3149b,_0x2b610d){const _0x94293f=a142_0x1b7bc2;var _0x1c3611=arguments[_0x94293f(0x1da)],_0x1521df=_0x1c3611<0x3?_0x6a44be:_0x2b610d===null?_0x2b610d=Object[_0x94293f(0x1cf)](_0x6a44be,_0xc3149b):_0x2b610d,_0x595c61;if(typeof Reflect===_0x94293f(0x1c5)&&typeof Reflect[_0x94293f(0x1d8)]===_0x94293f(0x1fa))_0x1521df=Reflect[_0x94293f(0x1d8)](_0x3f3de1,_0x6a44be,_0xc3149b,_0x2b610d);else{for(var _0x1a47a9=_0x3f3de1[_0x94293f(0x1da)]-0x1;_0x1a47a9>=0x0;_0x1a47a9--)if(_0x595c61=_0x3f3de1[_0x1a47a9])_0x1521df=(_0x1c3611<0x3?_0x595c61(_0x1521df):_0x1c3611>0x3?_0x595c61(_0x6a44be,_0xc3149b,_0x1521df):_0x595c61(_0x6a44be,_0xc3149b))||_0x1521df;}return _0x1c3611>0x3&&_0x1521df&&Object[_0x94293f(0x1f4)](_0x6a44be,_0xc3149b,_0x1521df),_0x1521df;},__metadata=this&&this['__metadata']||function(_0x5e5094,_0x565d5d){const _0x23f6cb=a142_0x1b7bc2;if(typeof Reflect==='object'&&typeof Reflect[_0x23f6cb(0x1e7)]===_0x23f6cb(0x1fa))return Reflect['metadata'](_0x5e5094,_0x565d5d);},__importDefault=this&&this['__importDefault']||function(_0x329fb5){return _0x329fb5&&_0x329fb5['__esModule']?_0x329fb5:{'default':_0x329fb5};};Object[a142_0x1b7bc2(0x1f4)](exports,a142_0x1b7bc2(0x1d5),{'value':!![]}),exports['CommitComponentsJob']=void 0x0;function a142_0x9a82(_0x5f4f9f,_0x48f31f){return a142_0x9a82=function(_0x3085da,_0x10c642){_0x3085da=_0x3085da-0x1c5;let _0x1523c9=a142_0x1496[_0x3085da];return _0x1523c9;},a142_0x9a82(_0x5f4f9f,_0x48f31f);}const events_1=__importDefault(require('events')),typedi_1=require('typedi'),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),auth_settings_service_1=require(a142_0x1b7bc2(0x1cc)),utils_1=require('../../shared/utils'),git_utils_1=require(a142_0x1b7bc2(0x213)),mdapi_utils_1=require(a142_0x1b7bc2(0x1c9)),sfdx_utils_1=require('../utils/sfdx.utils');let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(_0x10eace){const _0x2c64c6=a142_0x1b7bc2;super(),this[_0x2c64c6(0x1d9)]=_0x10eace,this['COMPONENTS_PER_TICK']=0x3e8,this['componentsToWrite']=0x0,this[_0x2c64c6(0x1f7)]=0x0,this['startTime']=Date[_0x2c64c6(0x1df)]();}get[a142_0x1b7bc2(0x1cb)](){const _0x1db15b=a142_0x1b7bc2,{repo:_0xdc9aa7}=this[_0x1db15b(0x218)],{gitCredentials:_0xb56224}=this[_0x1db15b(0x1d9)];return _0xdc9aa7['gitUrl'][_0x1db15b(0x204)](/http(s)?\:\/\/(.+@)?/,utils_1['getProtocol'](_0xdc9aa7['gitUrl'])+_0x1db15b(0x1db)+_0xb56224+'@');}[a142_0x1b7bc2(0x1f0)](_0x2923ca){const _0x1ad8d2=a142_0x1b7bc2;var _0x5c8b5f;_0x2923ca[_0x1ad8d2(0x1d6)](_0x444957=>child_types_1['default'][_0x1ad8d2(0x1cd)](_0x444957['fileType'])?0x1:-0x1);const _0x4c482c={};for(const _0x5cc1a0 of _0x2923ca){_0x4c482c[_0x5c8b5f=_0x5cc1a0[_0x1ad8d2(0x1ed)]]||(_0x4c482c[_0x5c8b5f]=[]),_0x4c482c[_0x5cc1a0['fileName']][_0x1ad8d2(0x202)](_0x5cc1a0);}return Object['values'](_0x4c482c)[_0x1ad8d2(0x1dc)]((_0x2ec002,_0x50b129)=>[..._0x2ec002,..._0x50b129],[]);}async[a142_0x1b7bc2(0x216)](_0x893643){const _0xfeaddf=a142_0x1b7bc2;_0x893643=this['groupComponentsByFileName'](_0x893643);let _0x4549cf=0x0;while(_0x893643[_0xfeaddf(0x1da)]){const _0x149e7d=_0x893643[_0xfeaddf(0x1e9)](0x0,this[_0xfeaddf(0x207)]);await this[_0xfeaddf(0x212)][_0xfeaddf(0x1c7)](_0x149e7d),_0x4549cf+=_0x149e7d[_0xfeaddf(0x1da)],this['logger'][_0xfeaddf(0x1fe)](_0xfeaddf(0x20a)+_0x4549cf+'/'+this['componentsToWrite']+_0xfeaddf(0x211)),await this[_0xfeaddf(0x217)][_0xfeaddf(0x1eb)]();}}async[a142_0x1b7bc2(0x1e4)](_0x34c7b4){const _0x31b895=a142_0x1b7bc2;let _0x30872b=0x0;while(_0x34c7b4[_0x31b895(0x1da)]){const _0x521ed7=_0x34c7b4[_0x31b895(0x1e9)](0x0,this[_0x31b895(0x207)]);await this[_0x31b895(0x212)][_0x31b895(0x1e4)](_0x521ed7),_0x30872b+=_0x521ed7[_0x31b895(0x1da)],this[_0x31b895(0x217)][_0x31b895(0x1fe)](_0x31b895(0x1dd)+_0x30872b+'/'+this[_0x31b895(0x1f7)]+_0x31b895(0x211)),await this[_0x31b895(0x217)][_0x31b895(0x1eb)]();}}async[a142_0x1b7bc2(0x210)](){const _0x28daea=a142_0x1b7bc2;this[_0x28daea(0x1f6)]&&await this[_0x28daea(0x1f6)][_0x28daea(0x1ec)]()['catch'](()=>void 0x0),this[_0x28daea(0x212)]&&await this[_0x28daea(0x212)]['removeDir']()[_0x28daea(0x1ee)](()=>void 0x0),this['sfdxUtils']&&await this[_0x28daea(0x1e1)]['removeDir']()[_0x28daea(0x1ee)](()=>void 0x0);}async[a142_0x1b7bc2(0x1f8)](){const _0x2d0daa=a142_0x1b7bc2,{repo:_0x48a14b,branch:_0x4729d3,components:_0x4ddba8,convertToSFDX:_0x5eb929,message:_0x336e42,user:_0x52a8c1}=this[_0x2d0daa(0x218)];this[_0x2d0daa(0x212)]=new mdapi_utils_1[(_0x2d0daa(0x1e0))](_0x48a14b['name'],_0x4729d3[_0x2d0daa(0x20e)]),this[_0x2d0daa(0x1f6)]=new git_utils_1['GitUtils'](this['remote']),this['sfdxUtils']=new sfdx_utils_1['SFDXUtils'](_0x48a14b['name'],_0x4729d3['name']);try{this['logger'][_0x2d0daa(0x1fe)](_0x2d0daa(0x1e6)),await this[_0x2d0daa(0x1f6)][_0x2d0daa(0x1d1)](_0x4729d3[_0x2d0daa(0x20e)],_0x48a14b['name']);!this[_0x2d0daa(0x218)][_0x2d0daa(0x214)]?(this[_0x2d0daa(0x217)][_0x2d0daa(0x1fe)]('[INFO]\x20Prepare\x20mdapi\x20files'),await this[_0x2d0daa(0x212)]['prepareMdapi'](this[_0x2d0daa(0x1f6)]['dir'])):this[_0x2d0daa(0x217)][_0x2d0daa(0x1fe)](_0x2d0daa(0x1e2));_0x4ddba8['writed']&&(this[_0x2d0daa(0x217)][_0x2d0daa(0x1fe)](_0x2d0daa(0x1fb)),this['componentsToWrite']=_0x4ddba8[_0x2d0daa(0x20b)][_0x2d0daa(0x1da)],await this[_0x2d0daa(0x216)](_0x4ddba8['writed']));_0x4ddba8['deleted']&&(this[_0x2d0daa(0x217)]['log']('[INFO]\x20Preparing\x20to\x20delete\x20components'),this[_0x2d0daa(0x1f7)]=_0x4ddba8[_0x2d0daa(0x1f9)][_0x2d0daa(0x1da)],await this[_0x2d0daa(0x1e4)](_0x4ddba8[_0x2d0daa(0x1f9)]));await this[_0x2d0daa(0x1f6)][_0x2d0daa(0x209)](),await this[_0x2d0daa(0x217)][_0x2d0daa(0x1eb)]();_0x5eb929?(this[_0x2d0daa(0x217)][_0x2d0daa(0x1fe)]('[INFO]\x20Start\x20converting\x20to\x20SFDX'),await this[_0x2d0daa(0x1e1)][_0x2d0daa(0x215)](this[_0x2d0daa(0x212)][_0x2d0daa(0x20c)]),await this[_0x2d0daa(0x1e1)][_0x2d0daa(0x1d0)](this['gitUtils']['dir']),await this[_0x2d0daa(0x1e1)][_0x2d0daa(0x1ec)](),await this[_0x2d0daa(0x217)]['send']()):(this['logger']['log'](_0x2d0daa(0x1c8)),await this[_0x2d0daa(0x212)][_0x2d0daa(0x1e5)](this[_0x2d0daa(0x1f6)]['dir']));this[_0x2d0daa(0x217)][_0x2d0daa(0x1fe)](_0x2d0daa(0x1ca)),await this['gitUtils'][_0x2d0daa(0x203)](_0x336e42,{'email':_0x52a8c1[_0x2d0daa(0x206)],'name':_0x52a8c1[_0x2d0daa(0x20e)]},_0x4729d3[_0x2d0daa(0x20e)]),await this[_0x2d0daa(0x1f6)]['removeDir'](),await this['mdapiUtils'][_0x2d0daa(0x1ec)]();const _0x4f89e3=this[_0x2d0daa(0x1c6)]+this[_0x2d0daa(0x1f7)];this[_0x2d0daa(0x217)]['log'](_0x2d0daa(0x1ce)+(Date[_0x2d0daa(0x1df)]()-this[_0x2d0daa(0x208)])+_0x2d0daa(0x1de)+_0x4f89e3),await this[_0x2d0daa(0x217)][_0x2d0daa(0x1eb)]();}catch(_0x1a507f){await this[_0x2d0daa(0x210)](),this[_0x2d0daa(0x217)][_0x2d0daa(0x1fe)]('[ERROR]\x20'+_0x1a507f),await this[_0x2d0daa(0x217)]['send']();throw _0x1a507f;}}async[a142_0x1b7bc2(0x1f5)](_0x284e8b){const _0xfd5e80=a142_0x1b7bc2;var _0x457c3f,_0x15afb2,_0x53bf9e,_0x3f0ef7;const _0x5e0826=!!((_0x15afb2=(_0x457c3f=_0x284e8b[_0xfd5e80(0x1fd)])===null||_0x457c3f===void 0x0?void 0x0:_0x457c3f[_0xfd5e80(0x20b)])===null||_0x15afb2===void 0x0?void 0x0:_0x15afb2[_0xfd5e80(0x1da)])||!!((_0x3f0ef7=(_0x53bf9e=_0x284e8b[_0xfd5e80(0x1fd)])===null||_0x53bf9e===void 0x0?void 0x0:_0x53bf9e[_0xfd5e80(0x1f9)])===null||_0x3f0ef7===void 0x0?void 0x0:_0x3f0ef7[_0xfd5e80(0x1da)]);if(!_0x5e0826){this[_0xfd5e80(0x217)][_0xfd5e80(0x1fe)](_0xfd5e80(0x20d)),await this[_0xfd5e80(0x217)]['send']();return;}this[_0xfd5e80(0x218)]=_0x284e8b,await this[_0xfd5e80(0x1f8)]();}};CommitComponentsJob=__decorate([typedi_1[a142_0x1b7bc2(0x1d3)]({'transient':!![]}),__metadata('design:paramtypes',[auth_settings_service_1[a142_0x1b7bc2(0x1e3)]])],CommitComponentsJob),exports['CommitComponentsJob']=CommitComponentsJob;