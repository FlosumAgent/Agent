const a146_0xa75fab=a146_0x4f85;(function(_0x599dc9,_0x1d6664){const _0x2b881a=a146_0x4f85,_0x4ce580=_0x599dc9();while(!![]){try{const _0x211f6d=parseInt(_0x2b881a(0x250))/0x1+-parseInt(_0x2b881a(0x22c))/0x2+parseInt(_0x2b881a(0x23d))/0x3+parseInt(_0x2b881a(0x240))/0x4*(-parseInt(_0x2b881a(0x222))/0x5)+-parseInt(_0x2b881a(0x1f6))/0x6+-parseInt(_0x2b881a(0x1f8))/0x7+parseInt(_0x2b881a(0x1fd))/0x8*(parseInt(_0x2b881a(0x207))/0x9);if(_0x211f6d===_0x1d6664)break;else _0x4ce580['push'](_0x4ce580['shift']());}catch(_0x3cf861){_0x4ce580['push'](_0x4ce580['shift']());}}}(a146_0x4d1c,0x2fbff));const a146_0x4846cb=function(){let _0x2d08bc=!![];return function(_0x573fee,_0x2cf688){const _0x5d9691=_0x2d08bc?function(){const _0x55fde7=a146_0x4f85;if(_0x2cf688){const _0x3702b5=_0x2cf688[_0x55fde7(0x22a)](_0x573fee,arguments);return _0x2cf688=null,_0x3702b5;}}:function(){};return _0x2d08bc=![],_0x5d9691;};}(),a146_0x36b152=a146_0x4846cb(this,function(){const _0x4603f0=a146_0x4f85;return a146_0x36b152[_0x4603f0(0x238)]()[_0x4603f0(0x229)](_0x4603f0(0x231))[_0x4603f0(0x238)]()['constructor'](a146_0x36b152)[_0x4603f0(0x229)]('(((.+)+)+)+$');});function a146_0x4f85(_0x41822f,_0x2e2ba5){const _0xc7a614=a146_0x4d1c();return a146_0x4f85=function(_0x36b152,_0x4846cb){_0x36b152=_0x36b152-0x1f4;let _0x4d1cc1=_0xc7a614[_0x36b152];return _0x4d1cc1;},a146_0x4f85(_0x41822f,_0x2e2ba5);}a146_0x36b152();'use strict';function a146_0x4d1c(){const _0x126057=['metadata','groupComponentsByFileName','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder','GitUtils','remote','__esModule','dir','type','CommitComponentsJob','getOwnPropertyDescriptor','catch','../utils/git.utils','exec','389513rxuvsJ','branch','fileName','935064VzgroD','writeFlosumComponents','1446277WjUpmU','ms.\x20Commited\x20components\x20-\x20','[ERROR]\x20','copyMdapiTo','commitData','8QJNsvp','gitUrl','length','name','COMPONENTS_PER_TICK','createProjectFrom','[INFO]\x20Writed\x20','__decorate','mdapiUtils','[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git','478827TuGNhQ','clone','cleanUp','componentsToDelete','now','sfdxUtils','removeComponents','deleted','authSettings','components','sort','[INFO]\x20Deleted\x20','\x20components','force','AuthSettingsService','__metadata','commitAndPush','reduce','prepareMdapi','replace','clearDir','[INFO]\x20Preparing\x20to\x20delete\x20components','design:paramtypes','://','master','push','[INFO]\x20Prepare\x20mdapi\x20files','3005rFEtao','function','../../shared/utils','gitUtils','writed','typedi','logger','search','apply','decorate','276358rdSEMM','../utils/sfdx.utils','startTime','splice','removeDir','(((.+)+)+)+$','MDApiUtils','__importDefault','fileType','copyProjectTo','email','componentsToWrite','toString','object','send','getProtocol','defineProperty','836229rGFCdB','includes','default','168mlrWyB','log'];a146_0x4d1c=function(){return _0x126057;};return a146_0x4d1c();}var __decorate=this&&this[a146_0xa75fab(0x204)]||function(_0x339b47,_0xb66386,_0x1aa6e2,_0x3a992f){const _0x5637f3=a146_0xa75fab;var _0x3d44e1=arguments[_0x5637f3(0x1ff)],_0x4a4ce9=_0x3d44e1<0x3?_0xb66386:_0x3a992f===null?_0x3a992f=Object[_0x5637f3(0x24c)](_0xb66386,_0x1aa6e2):_0x3a992f,_0x5dc243;if(typeof Reflect===_0x5637f3(0x239)&&typeof Reflect[_0x5637f3(0x22b)]===_0x5637f3(0x223))_0x4a4ce9=Reflect[_0x5637f3(0x22b)](_0x339b47,_0xb66386,_0x1aa6e2,_0x3a992f);else{for(var _0xcbd9b0=_0x339b47[_0x5637f3(0x1ff)]-0x1;_0xcbd9b0>=0x0;_0xcbd9b0--)if(_0x5dc243=_0x339b47[_0xcbd9b0])_0x4a4ce9=(_0x3d44e1<0x3?_0x5dc243(_0x4a4ce9):_0x3d44e1>0x3?_0x5dc243(_0xb66386,_0x1aa6e2,_0x4a4ce9):_0x5dc243(_0xb66386,_0x1aa6e2))||_0x4a4ce9;}return _0x3d44e1>0x3&&_0x4a4ce9&&Object[_0x5637f3(0x23c)](_0xb66386,_0x1aa6e2,_0x4a4ce9),_0x4a4ce9;},__metadata=this&&this[a146_0xa75fab(0x216)]||function(_0x72eb6d,_0x4eeb7f){const _0x415a36=a146_0xa75fab;if(typeof Reflect===_0x415a36(0x239)&&typeof Reflect[_0x415a36(0x242)]===_0x415a36(0x223))return Reflect[_0x415a36(0x242)](_0x72eb6d,_0x4eeb7f);},__importDefault=this&&this[a146_0xa75fab(0x233)]||function(_0x4fa3a9){const _0x58a4f4=a146_0xa75fab;return _0x4fa3a9&&_0x4fa3a9[_0x58a4f4(0x248)]?_0x4fa3a9:{'default':_0x4fa3a9};};Object[a146_0xa75fab(0x23c)](exports,'__esModule',{'value':!![]}),exports['CommitComponentsJob']=void 0x0;const auth_settings_service_1=require('../../shared/services/auth-settings.service'),events_1=__importDefault(require('events')),git_utils_1=require(a146_0xa75fab(0x24e)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a146_0xa75fab(0x22d)),typedi_1=require(a146_0xa75fab(0x227)),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),utils_1=require(a146_0xa75fab(0x224));let CommitComponentsJob=class CommitComponentsJob extends events_1[a146_0xa75fab(0x23f)]{constructor(_0x553e9f){const _0x4a3766=a146_0xa75fab;super(),this[_0x4a3766(0x20f)]=_0x553e9f,this['COMPONENTS_PER_TICK']=0x3e8,this[_0x4a3766(0x237)]=0x0,this[_0x4a3766(0x20a)]=0x0,this[_0x4a3766(0x22e)]=Date[_0x4a3766(0x20b)]();}get[a146_0xa75fab(0x247)](){const _0x5c4de7=a146_0xa75fab,{repo:_0x17f0e5}=this[_0x5c4de7(0x1fc)],{gitCredentials:_0x207975}=this['authSettings'];return _0x17f0e5[_0x5c4de7(0x1fe)][_0x5c4de7(0x21a)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x5c4de7(0x23b)])(_0x17f0e5[_0x5c4de7(0x1fe)])+_0x5c4de7(0x21e)+_0x207975+'@');}[a146_0xa75fab(0x243)](_0x2b148d){const _0x453e99=a146_0xa75fab;var _0x24f55;_0x2b148d[_0x453e99(0x211)](_0x4d4b72=>child_types_1[_0x453e99(0x23f)][_0x453e99(0x23e)](_0x4d4b72[_0x453e99(0x234)])?0x1:-0x1);const _0x3125db={};for(const _0x5fb225 of _0x2b148d){_0x3125db[_0x24f55=_0x5fb225['fileName']]||(_0x3125db[_0x24f55]=[]),_0x3125db[_0x5fb225[_0x453e99(0x1f5)]][_0x453e99(0x220)](_0x5fb225);}return Object['values'](_0x3125db)[_0x453e99(0x218)]((_0x2e6223,_0x39d0c4)=>[..._0x2e6223,..._0x39d0c4],[]);}async['writeComponents'](_0x317e36){const _0x559399=a146_0xa75fab;_0x317e36=this[_0x559399(0x243)](_0x317e36);let _0x49de3b=0x0;while(_0x317e36[_0x559399(0x1ff)]){const _0x7f3976=_0x317e36[_0x559399(0x22f)](0x0,this[_0x559399(0x201)]);await this['mdapiUtils'][_0x559399(0x1f7)](_0x7f3976,{'skipChildErrors':this[_0x559399(0x1fc)][_0x559399(0x1f4)][_0x559399(0x200)]===_0x559399(0x21f),'logger':_0x2b529e=>this[_0x559399(0x228)][_0x559399(0x241)](_0x2b529e)}),_0x49de3b+=_0x7f3976[_0x559399(0x1ff)],this[_0x559399(0x228)][_0x559399(0x241)](_0x559399(0x203)+_0x49de3b+'/'+this[_0x559399(0x237)]+_0x559399(0x213)),await this[_0x559399(0x228)][_0x559399(0x23a)]();}}async[a146_0xa75fab(0x20d)](_0x15cfd1){const _0x48eebd=a146_0xa75fab;_0x15cfd1[_0x48eebd(0x211)](_0x8f8ed=>child_types_1['default'][_0x48eebd(0x23e)](_0x8f8ed[_0x48eebd(0x24a)])?-0x1:0x1);let _0x50581a=0x0;while(_0x15cfd1[_0x48eebd(0x1ff)]){const _0x448b98=_0x15cfd1[_0x48eebd(0x22f)](0x0,this[_0x48eebd(0x201)]);await this[_0x48eebd(0x205)]['removeComponents'](_0x448b98),_0x50581a+=_0x448b98[_0x48eebd(0x1ff)],this[_0x48eebd(0x228)]['log'](_0x48eebd(0x212)+_0x50581a+'/'+this[_0x48eebd(0x20a)]+_0x48eebd(0x213)),await this['logger'][_0x48eebd(0x23a)]();}}async[a146_0xa75fab(0x209)](){const _0x324df1=a146_0xa75fab;this[_0x324df1(0x225)]&&await this[_0x324df1(0x225)]['removeDir']()['catch'](()=>void 0x0),this['mdapiUtils']&&await this[_0x324df1(0x205)]['removeDir']()[_0x324df1(0x24d)](()=>void 0x0),this[_0x324df1(0x20c)]&&await this[_0x324df1(0x20c)][_0x324df1(0x230)]()[_0x324df1(0x24d)](()=>void 0x0);}async['exec'](){const _0x1af21d=a146_0xa75fab,{repo:_0x3b8a1c,branch:_0x33144b,components:_0x11a32a,convertToSFDX:_0xebb0ee,message:_0x22b8f0,user:_0x2945bd}=this[_0x1af21d(0x1fc)];this['mdapiUtils']=new mdapi_utils_1[(_0x1af21d(0x232))](_0x3b8a1c[_0x1af21d(0x200)],_0x33144b[_0x1af21d(0x200)]),this[_0x1af21d(0x225)]=new git_utils_1[(_0x1af21d(0x246))](this[_0x1af21d(0x247)]),this['sfdxUtils']=new sfdx_utils_1['SFDXUtils'](_0x3b8a1c[_0x1af21d(0x200)],_0x33144b[_0x1af21d(0x200)]);try{this[_0x1af21d(0x228)]['log']('[INFO]\x20Start\x20clonning\x20repository'),await this[_0x1af21d(0x225)][_0x1af21d(0x208)](_0x33144b[_0x1af21d(0x200)],_0x3b8a1c[_0x1af21d(0x200)]);!this['commitData'][_0x1af21d(0x214)]?(this[_0x1af21d(0x228)][_0x1af21d(0x241)](_0x1af21d(0x221)),await this[_0x1af21d(0x205)][_0x1af21d(0x219)](this[_0x1af21d(0x225)]['dir'])):this[_0x1af21d(0x228)]['log']('[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');_0x11a32a[_0x1af21d(0x226)]&&(this[_0x1af21d(0x228)][_0x1af21d(0x241)]('[INFO]\x20Preparing\x20to\x20write\x20components'),this[_0x1af21d(0x237)]=_0x11a32a['writed'][_0x1af21d(0x1ff)],await this['writeComponents'](_0x11a32a[_0x1af21d(0x226)]));_0x11a32a[_0x1af21d(0x20e)]&&(this['logger'][_0x1af21d(0x241)](_0x1af21d(0x21c)),this[_0x1af21d(0x20a)]=_0x11a32a['deleted'][_0x1af21d(0x1ff)],await this[_0x1af21d(0x20d)](_0x11a32a[_0x1af21d(0x20e)]));await this[_0x1af21d(0x225)][_0x1af21d(0x21b)](),await this[_0x1af21d(0x228)][_0x1af21d(0x23a)]();_0xebb0ee?(this[_0x1af21d(0x228)][_0x1af21d(0x241)]('[INFO]\x20Start\x20converting\x20to\x20SFDX'),await this['sfdxUtils'][_0x1af21d(0x202)](this[_0x1af21d(0x205)]['dir']),await this[_0x1af21d(0x20c)][_0x1af21d(0x235)](this[_0x1af21d(0x225)][_0x1af21d(0x249)]),await this[_0x1af21d(0x20c)]['removeDir'](),await this[_0x1af21d(0x228)][_0x1af21d(0x23a)]()):(this[_0x1af21d(0x228)][_0x1af21d(0x241)](_0x1af21d(0x245)),await this[_0x1af21d(0x205)][_0x1af21d(0x1fb)](this['gitUtils']['dir']));this['logger'][_0x1af21d(0x241)](_0x1af21d(0x206)),await this['gitUtils'][_0x1af21d(0x217)](_0x22b8f0,{'email':_0x2945bd[_0x1af21d(0x236)],'name':_0x2945bd[_0x1af21d(0x200)]},_0x33144b[_0x1af21d(0x200)]),await this['gitUtils'][_0x1af21d(0x230)](),await this[_0x1af21d(0x205)][_0x1af21d(0x230)]();const _0x1fcdf4=this[_0x1af21d(0x237)]+this[_0x1af21d(0x20a)];this[_0x1af21d(0x228)]['log']('[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20'+(Date[_0x1af21d(0x20b)]()-this[_0x1af21d(0x22e)])+_0x1af21d(0x1f9)+_0x1fcdf4),await this[_0x1af21d(0x228)]['send']();}catch(_0x5e60fe){await this[_0x1af21d(0x209)](),this['logger']['log'](_0x1af21d(0x1fa)+_0x5e60fe),await this[_0x1af21d(0x228)][_0x1af21d(0x23a)]();throw _0x5e60fe;}}async['run'](_0x16bd45){const _0x2be254=a146_0xa75fab;var _0x16471f,_0x338456,_0x398e9e,_0x4bcde5;const _0x48bb90=!!((_0x338456=(_0x16471f=_0x16bd45[_0x2be254(0x210)])===null||_0x16471f===void 0x0?void 0x0:_0x16471f['writed'])===null||_0x338456===void 0x0?void 0x0:_0x338456['length'])||!!((_0x4bcde5=(_0x398e9e=_0x16bd45['components'])===null||_0x398e9e===void 0x0?void 0x0:_0x398e9e[_0x2be254(0x20e)])===null||_0x4bcde5===void 0x0?void 0x0:_0x4bcde5[_0x2be254(0x1ff)]);if(!_0x48bb90){this[_0x2be254(0x228)]['log'](_0x2be254(0x244)),await this[_0x2be254(0x228)]['send']();return;}this[_0x2be254(0x1fc)]=_0x16bd45,await this[_0x2be254(0x24f)]();}};CommitComponentsJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a146_0xa75fab(0x21d),[auth_settings_service_1[a146_0xa75fab(0x215)]])],CommitComponentsJob),exports[a146_0xa75fab(0x24b)]=CommitComponentsJob;