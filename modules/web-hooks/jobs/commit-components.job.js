const a144_0x2d6f=['prepareMdapi','remote','writeFlosumComponents','startTime','sfdxUtils','74eHBeSp','length','commitAndPush','apply','Service','values','getOwnPropertyDescriptor','commitData','writeComponents','splice','send','run','259852CHYWfG','design:paramtypes','[INFO]\x20Commit\x20job\x20done.\x20Time\x20spent\x20-\x20','name','\x20components','[INFO]\x20Start\x20converting\x20to\x20SFDX','catch','50234zUIxeK','gitUrl','removeComponents','components','removeDir','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../parsers/mdapi/child-types','mdapiUtils','force','componentsToDelete','AuthSettingsService','events','[INFO]\x20Nothing\x20to\x20commit.\x20Skip.','groupComponentsByFileName','[INFO]\x20Start\x20clonning\x20repository','clearDir','function','CommitComponentsJob','23FdROgO','COMPONENTS_PER_TICK','componentsToWrite','object','__esModule','3062gVgDfX','test','5zMyVzb','[INFO]\x20Prepare\x20mdapi\x20files','[INFO]\x20Preparing\x20to\x20write\x20components','now','__metadata','exec','reduce','93489ErNUok','deleted','clone','../utils/git.utils','gitUtils','cleanUp','type','467203yhPakm','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','push','email','default','8674nNGDST','3kfbcVd','log','writed','authSettings','../utils/mdapi.utils','[INFO]\x20Writed\x20','[ERROR]\x20','copyProjectTo','dir','logger','decorate','://','[INFO]\x20Preparing\x20to\x20delete\x20components','__decorate','constructor','../utils/sfdx.utils','defineProperty','fileType','includes','../../shared/utils','copyMdapiTo','createProjectFrom','53353wwLYNQ','replace'];const a144_0x448e35=a144_0x33ea;(function(_0x16a7a2,_0x14541f){const _0x534c69=a144_0x33ea;while(!![]){try{const _0x1ccd17=parseInt(_0x534c69(0xb0))*-parseInt(_0x534c69(0x6d))+parseInt(_0x534c69(0x84))*parseInt(_0x534c69(0xb7))+parseInt(_0x534c69(0x97))+-parseInt(_0x534c69(0xbe))+-parseInt(_0x534c69(0x9e))*-parseInt(_0x534c69(0x6e))+-parseInt(_0x534c69(0xb5))*-parseInt(_0x534c69(0x8b))+-parseInt(_0x534c69(0xc5));if(_0x1ccd17===_0x14541f)break;else _0x16a7a2['push'](_0x16a7a2['shift']());}catch(_0x1738c3){_0x16a7a2['push'](_0x16a7a2['shift']());}}}(a144_0x2d6f,0x23161));function a144_0x33ea(_0x1085e8,_0x39c9a5){return a144_0x33ea=function(_0x16be49,_0x22f959){_0x16be49=_0x16be49-0x6c;let _0x5ec558=a144_0x2d6f[_0x16be49];return _0x5ec558;},a144_0x33ea(_0x1085e8,_0x39c9a5);}const a144_0x5ec558=function(){let _0x34163c=!![];return function(_0x15961e,_0x988c08){const _0x54f667=_0x34163c?function(){const _0x1d11e1=a144_0x33ea;if(_0x988c08){const _0x16fdc3=_0x988c08[_0x1d11e1(0x8e)](_0x15961e,arguments);return _0x988c08=null,_0x16fdc3;}}:function(){};return _0x34163c=![],_0x54f667;};}(),a144_0x22f959=a144_0x5ec558(this,function(){const _0x44eed4=function(){const _0xff66ad=a144_0x33ea,_0x3319dd=_0x44eed4[_0xff66ad(0x7c)](_0xff66ad(0xa3))()[_0xff66ad(0x7c)](_0xff66ad(0xc6));return!_0x3319dd[_0xff66ad(0xb6)](a144_0x22f959);};return _0x44eed4();});a144_0x22f959();'use strict';var __decorate=this&&this[a144_0x448e35(0x7b)]||function(_0x5d8e84,_0x10db05,_0x2f46a9,_0x282aaa){const _0x4f9866=a144_0x448e35;var _0x40b744=arguments[_0x4f9866(0x8c)],_0x4e4db8=_0x40b744<0x3?_0x10db05:_0x282aaa===null?_0x282aaa=Object[_0x4f9866(0x91)](_0x10db05,_0x2f46a9):_0x282aaa,_0x275b45;if(typeof Reflect===_0x4f9866(0xb3)&&typeof Reflect[_0x4f9866(0x78)]===_0x4f9866(0xae))_0x4e4db8=Reflect[_0x4f9866(0x78)](_0x5d8e84,_0x10db05,_0x2f46a9,_0x282aaa);else{for(var _0x5dd2e5=_0x5d8e84[_0x4f9866(0x8c)]-0x1;_0x5dd2e5>=0x0;_0x5dd2e5--)if(_0x275b45=_0x5d8e84[_0x5dd2e5])_0x4e4db8=(_0x40b744<0x3?_0x275b45(_0x4e4db8):_0x40b744>0x3?_0x275b45(_0x10db05,_0x2f46a9,_0x4e4db8):_0x275b45(_0x10db05,_0x2f46a9))||_0x4e4db8;}return _0x40b744>0x3&&_0x4e4db8&&Object[_0x4f9866(0x7e)](_0x10db05,_0x2f46a9,_0x4e4db8),_0x4e4db8;},__metadata=this&&this[a144_0x448e35(0xbb)]||function(_0x5dda4b,_0x32783c){const _0x463ebe=a144_0x448e35;if(typeof Reflect===_0x463ebe(0xb3)&&typeof Reflect['metadata']===_0x463ebe(0xae))return Reflect['metadata'](_0x5dda4b,_0x32783c);},__importDefault=this&&this['__importDefault']||function(_0x474f25){return _0x474f25&&_0x474f25['__esModule']?_0x474f25:{'default':_0x474f25};};Object[a144_0x448e35(0x7e)](exports,a144_0x448e35(0xb4),{'value':!![]}),exports[a144_0x448e35(0xaf)]=void 0x0;const auth_settings_service_1=require('../../shared/services/auth-settings.service'),events_1=__importDefault(require(a144_0x448e35(0xa9))),git_utils_1=require(a144_0x448e35(0xc1)),mdapi_utils_1=require(a144_0x448e35(0x72)),sfdx_utils_1=require(a144_0x448e35(0x7d)),typedi_1=require('typedi'),child_types_1=__importDefault(require(a144_0x448e35(0xa4))),utils_1=require(a144_0x448e35(0x81));let CommitComponentsJob=class CommitComponentsJob extends events_1['default']{constructor(_0x1eb592){const _0xf985e5=a144_0x448e35;super(),this[_0xf985e5(0x71)]=_0x1eb592,this[_0xf985e5(0xb1)]=0x3e8,this[_0xf985e5(0xb2)]=0x0,this[_0xf985e5(0xa7)]=0x0,this[_0xf985e5(0x89)]=Date[_0xf985e5(0xba)]();}get[a144_0x448e35(0x87)](){const _0x5d94d5=a144_0x448e35,{repo:_0x3881d9}=this[_0x5d94d5(0x92)],{gitCredentials:_0x3070ba}=this[_0x5d94d5(0x71)];return _0x3881d9[_0x5d94d5(0x9f)][_0x5d94d5(0x85)](/http(s)?\:\/\/(.+@)?/,utils_1['getProtocol'](_0x3881d9[_0x5d94d5(0x9f)])+_0x5d94d5(0x79)+_0x3070ba+'@');}[a144_0x448e35(0xab)](_0x17b2e4){const _0x76d331=a144_0x448e35;var _0x2a1370;_0x17b2e4['sort'](_0x254036=>child_types_1[_0x76d331(0x6c)][_0x76d331(0x80)](_0x254036[_0x76d331(0x7f)])?0x1:-0x1);const _0x399048={};for(const _0x4ea7dc of _0x17b2e4){_0x399048[_0x2a1370=_0x4ea7dc['fileName']]||(_0x399048[_0x2a1370]=[]),_0x399048[_0x4ea7dc['fileName']][_0x76d331(0xc7)](_0x4ea7dc);}return Object[_0x76d331(0x90)](_0x399048)[_0x76d331(0xbd)]((_0x80f21a,_0x57114f)=>[..._0x80f21a,..._0x57114f],[]);}async[a144_0x448e35(0x93)](_0x5cee56){const _0x500508=a144_0x448e35;_0x5cee56=this['groupComponentsByFileName'](_0x5cee56);let _0x4752e4=0x0;while(_0x5cee56['length']){const _0x5c7d84=_0x5cee56[_0x500508(0x94)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x500508(0xa5)][_0x500508(0x88)](_0x5c7d84),_0x4752e4+=_0x5c7d84['length'],this[_0x500508(0x77)][_0x500508(0x6f)](_0x500508(0x73)+_0x4752e4+'/'+this[_0x500508(0xb2)]+_0x500508(0x9b)),await this[_0x500508(0x77)][_0x500508(0x95)]();}}async['removeComponents'](_0x2435de){const _0x3db79a=a144_0x448e35;_0x2435de['sort'](_0x278420=>child_types_1['default'][_0x3db79a(0x80)](_0x278420[_0x3db79a(0xc4)])?-0x1:0x1);let _0x53fe71=0x0;while(_0x2435de[_0x3db79a(0x8c)]){const _0x567790=_0x2435de[_0x3db79a(0x94)](0x0,this[_0x3db79a(0xb1)]);await this[_0x3db79a(0xa5)][_0x3db79a(0xa0)](_0x567790),_0x53fe71+=_0x567790[_0x3db79a(0x8c)],this['logger'][_0x3db79a(0x6f)]('[INFO]\x20Deleted\x20'+_0x53fe71+'/'+this['componentsToDelete']+'\x20components'),await this[_0x3db79a(0x77)][_0x3db79a(0x95)]();}}async['cleanUp'](){const _0x36b123=a144_0x448e35;this[_0x36b123(0xc2)]&&await this[_0x36b123(0xc2)]['removeDir']()[_0x36b123(0x9d)](()=>void 0x0),this[_0x36b123(0xa5)]&&await this['mdapiUtils'][_0x36b123(0xa2)]()['catch'](()=>void 0x0),this['sfdxUtils']&&await this[_0x36b123(0x8a)][_0x36b123(0xa2)]()[_0x36b123(0x9d)](()=>void 0x0);}async[a144_0x448e35(0xbc)](){const _0x479e85=a144_0x448e35,{repo:_0x49fbf1,branch:_0x5b3905,components:_0x405eaa,convertToSFDX:_0x4c6597,message:_0x5de7d9,user:_0x3547fe}=this[_0x479e85(0x92)];this[_0x479e85(0xa5)]=new mdapi_utils_1['MDApiUtils'](_0x49fbf1[_0x479e85(0x9a)],_0x5b3905[_0x479e85(0x9a)]),this['gitUtils']=new git_utils_1['GitUtils'](this[_0x479e85(0x87)]),this[_0x479e85(0x8a)]=new sfdx_utils_1['SFDXUtils'](_0x49fbf1[_0x479e85(0x9a)],_0x5b3905[_0x479e85(0x9a)]);try{this[_0x479e85(0x77)][_0x479e85(0x6f)](_0x479e85(0xac)),await this['gitUtils'][_0x479e85(0xc0)](_0x5b3905[_0x479e85(0x9a)],_0x49fbf1[_0x479e85(0x9a)]);!this[_0x479e85(0x92)][_0x479e85(0xa6)]?(this[_0x479e85(0x77)][_0x479e85(0x6f)](_0x479e85(0xb8)),await this[_0x479e85(0xa5)][_0x479e85(0x86)](this['gitUtils'][_0x479e85(0x76)])):this['logger'][_0x479e85(0x6f)]('[INFO]\x20Force\x20sync.\x20Skip\x20preparing\x20mdapi\x20from\x20repository.');_0x405eaa[_0x479e85(0x70)]&&(this[_0x479e85(0x77)][_0x479e85(0x6f)](_0x479e85(0xb9)),this[_0x479e85(0xb2)]=_0x405eaa[_0x479e85(0x70)][_0x479e85(0x8c)],await this['writeComponents'](_0x405eaa[_0x479e85(0x70)]));_0x405eaa[_0x479e85(0xbf)]&&(this[_0x479e85(0x77)][_0x479e85(0x6f)](_0x479e85(0x7a)),this['componentsToDelete']=_0x405eaa[_0x479e85(0xbf)][_0x479e85(0x8c)],await this[_0x479e85(0xa0)](_0x405eaa['deleted']));await this[_0x479e85(0xc2)][_0x479e85(0xad)](),await this[_0x479e85(0x77)][_0x479e85(0x95)]();_0x4c6597?(this[_0x479e85(0x77)][_0x479e85(0x6f)](_0x479e85(0x9c)),await this[_0x479e85(0x8a)][_0x479e85(0x83)](this['mdapiUtils']['dir']),await this[_0x479e85(0x8a)][_0x479e85(0x75)](this['gitUtils']['dir']),await this[_0x479e85(0x8a)]['removeDir'](),await this['logger'][_0x479e85(0x95)]()):(this['logger']['log']('[INFO]\x20Copying\x20mdapi\x20to\x20git\x20folder'),await this['mdapiUtils'][_0x479e85(0x82)](this[_0x479e85(0xc2)][_0x479e85(0x76)]));this[_0x479e85(0x77)][_0x479e85(0x6f)]('[INFO]\x20Commiting\x20and\x20pushing\x20source\x20to\x20git'),await this[_0x479e85(0xc2)][_0x479e85(0x8d)](_0x5de7d9,{'email':_0x3547fe[_0x479e85(0xc8)],'name':_0x3547fe[_0x479e85(0x9a)]},_0x5b3905['name']),await this[_0x479e85(0xc2)]['removeDir'](),await this['mdapiUtils']['removeDir']();const _0x1be123=this[_0x479e85(0xb2)]+this[_0x479e85(0xa7)];this['logger'][_0x479e85(0x6f)](_0x479e85(0x99)+(Date[_0x479e85(0xba)]()-this[_0x479e85(0x89)])+'ms.\x20Commited\x20components\x20-\x20'+_0x1be123),await this[_0x479e85(0x77)][_0x479e85(0x95)]();}catch(_0x51c998){await this[_0x479e85(0xc3)](),this[_0x479e85(0x77)]['log'](_0x479e85(0x74)+_0x51c998),await this['logger'][_0x479e85(0x95)]();throw _0x51c998;}}async[a144_0x448e35(0x96)](_0x15566a){const _0x4b191c=a144_0x448e35;var _0x28cc31,_0x520f1f,_0x3516bb,_0x3abeb3;const _0x2de86b=!!((_0x520f1f=(_0x28cc31=_0x15566a[_0x4b191c(0xa1)])===null||_0x28cc31===void 0x0?void 0x0:_0x28cc31[_0x4b191c(0x70)])===null||_0x520f1f===void 0x0?void 0x0:_0x520f1f[_0x4b191c(0x8c)])||!!((_0x3abeb3=(_0x3516bb=_0x15566a[_0x4b191c(0xa1)])===null||_0x3516bb===void 0x0?void 0x0:_0x3516bb[_0x4b191c(0xbf)])===null||_0x3abeb3===void 0x0?void 0x0:_0x3abeb3[_0x4b191c(0x8c)]);if(!_0x2de86b){this[_0x4b191c(0x77)]['log'](_0x4b191c(0xaa)),await this[_0x4b191c(0x77)][_0x4b191c(0x95)]();return;}this[_0x4b191c(0x92)]=_0x15566a,await this[_0x4b191c(0xbc)]();}};CommitComponentsJob=__decorate([typedi_1[a144_0x448e35(0x8f)]({'transient':!![]}),__metadata(a144_0x448e35(0x98),[auth_settings_service_1[a144_0x448e35(0xa8)]])],CommitComponentsJob),exports[a144_0x448e35(0xaf)]=CommitComponentsJob;