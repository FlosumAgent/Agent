const a137_0x5037=['224dXgYYU','CommitComponentsJob','ERR_INVALID_SYNC_RECORD_ID','parse','../../salesforce/services/salesforce.service','function','16012oVgYcX',']\x20[Branch:\x20','2UmzVkR','getOne','commitJob','attachmentId','fetchRepositoryData','Attachment','SalesforceService','map','[INFO]\x20Start\x20commit\x20job','getRepositoryRecord','message','exec','branch','./commit-components.job','982688DuaZYf','getCommitDto','syncRepositoryId','In\x20Progress','retrieveAttachment','repositoryName','then','branches','constructor','[COMMIT]\x20[Repository:\x20','282312yjrKFj','setStatus','__esModule','stringify','getOwnPropertyDescriptor','salesforceService','updateLastCommit','gitUrl','decorate','objectId','sendLog','commitData','defineProperty','../../shared/utils','1063583IDPXbi','../../../core/errors/bad-request.error','convertToSFDX','getAttachmentIdByParent','sfLogger','1UOQXAQ','../../../constants/errors','110274BDkKvX','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','getRepoService','return\x20/\x22\x20+\x20this\x20+\x20\x22/','1296231oWJFiM','catch','__decorate','../dto/commit-components.dto','salesforceSync','encodeBase64','2287uDaDTJ','repository','test','log','apply','[ERROR]\x20','ERR_UNKNOWN_SYNC_RECORD_ID','length','BadRequestError','[INFO]\x20Update\x20remote\x20state.','user','repoService','lastCommit','CommitComponentsDto','repositoryData','typedi','__metadata','setLoggerId','object','FlosumCommitJob','metadata','syncBranchId','../../salesforce/services/salesforce-sync.service','design:paramtypes','run','name','gitManager'];const a137_0x44f6a4=a137_0x3b03;(function(_0x48110a,_0x4347b5){const _0x64e147=a137_0x3b03;while(!![]){try{const _0x3f6003=parseInt(_0x64e147(0x114))*-parseInt(_0x64e147(0x10e))+parseInt(_0x64e147(0x135))*parseInt(_0x64e147(0x11a))+-parseInt(_0x64e147(0x110))*parseInt(_0x64e147(0x13d))+parseInt(_0x64e147(0x13b))+parseInt(_0x64e147(0x163))+parseInt(_0x64e147(0x14b))+-parseInt(_0x64e147(0x155));if(_0x3f6003===_0x4347b5)break;else _0x48110a['push'](_0x48110a['shift']());}catch(_0x4b7301){_0x48110a['push'](_0x48110a['shift']());}}}(a137_0x5037,0xbd538));function a137_0x3b03(_0xe5f25,_0x4a787d){return a137_0x3b03=function(_0x3d3969,_0x7193ed){_0x3d3969=_0x3d3969-0x10c;let _0xa4075b=a137_0x5037[_0x3d3969];return _0xa4075b;},a137_0x3b03(_0xe5f25,_0x4a787d);}const a137_0xa4075b=function(){let _0x1b5972=!![];return function(_0x2eb7ab,_0x1b8a0c){const _0x1bda2a=_0x1b5972?function(){const _0x5a3a15=a137_0x3b03;if(_0x1b8a0c){const _0x4b85a1=_0x1b8a0c[_0x5a3a15(0x11e)](_0x2eb7ab,arguments);return _0x1b8a0c=null,_0x4b85a1;}}:function(){};return _0x1b5972=![],_0x1bda2a;};}(),a137_0x7193ed=a137_0xa4075b(this,function(){const _0x16a8d4=function(){const _0x48bcbc=a137_0x3b03,_0x254b37=_0x16a8d4[_0x48bcbc(0x153)](_0x48bcbc(0x113))()[_0x48bcbc(0x153)](_0x48bcbc(0x111));return!_0x254b37[_0x48bcbc(0x11c)](a137_0x7193ed);};return _0x16a8d4();});a137_0x7193ed();'use strict';var __decorate=this&&this[a137_0x44f6a4(0x116)]||function(_0x38e947,_0x5d5303,_0x1af0a3,_0x1798b4){const _0x34256a=a137_0x44f6a4;var _0x2f8ca7=arguments['length'],_0xe1d314=_0x2f8ca7<0x3?_0x5d5303:_0x1798b4===null?_0x1798b4=Object[_0x34256a(0x159)](_0x5d5303,_0x1af0a3):_0x1798b4,_0x3335ba;if(typeof Reflect===_0x34256a(0x12c)&&typeof Reflect[_0x34256a(0x15d)]==='function')_0xe1d314=Reflect[_0x34256a(0x15d)](_0x38e947,_0x5d5303,_0x1af0a3,_0x1798b4);else{for(var _0x5cfd69=_0x38e947[_0x34256a(0x121)]-0x1;_0x5cfd69>=0x0;_0x5cfd69--)if(_0x3335ba=_0x38e947[_0x5cfd69])_0xe1d314=(_0x2f8ca7<0x3?_0x3335ba(_0xe1d314):_0x2f8ca7>0x3?_0x3335ba(_0x5d5303,_0x1af0a3,_0xe1d314):_0x3335ba(_0x5d5303,_0x1af0a3))||_0xe1d314;}return _0x2f8ca7>0x3&&_0xe1d314&&Object['defineProperty'](_0x5d5303,_0x1af0a3,_0xe1d314),_0xe1d314;},__metadata=this&&this[a137_0x44f6a4(0x12a)]||function(_0x4dd88a,_0xf320b){const _0x1a07f2=a137_0x44f6a4;if(typeof Reflect===_0x1a07f2(0x12c)&&typeof Reflect[_0x1a07f2(0x12e)]===_0x1a07f2(0x13a))return Reflect[_0x1a07f2(0x12e)](_0x4dd88a,_0xf320b);};Object[a137_0x44f6a4(0x161)](exports,a137_0x44f6a4(0x157),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;const salesforce_service_1=require(a137_0x44f6a4(0x139)),git_provider_manager_1=require('../../shared/git-provider.manager'),typedi_1=require(a137_0x44f6a4(0x129)),errors_1=require(a137_0x44f6a4(0x10f)),bad_request_error_1=require(a137_0x44f6a4(0x164)),salesforce_sync_service_1=require(a137_0x44f6a4(0x130)),utils_1=require(a137_0x44f6a4(0x162)),commit_components_dto_1=require(a137_0x44f6a4(0x117)),commit_components_job_1=require(a137_0x44f6a4(0x14a));let FlosumCommitJob=class FlosumCommitJob{constructor(_0x34394c,_0x1ea6cf,_0x64ad96,_0x1ff483){const _0xd9e0c0=a137_0x44f6a4;this['salesforceService']=_0x34394c,this['commitJob']=_0x1ea6cf,this[_0xd9e0c0(0x118)]=_0x64ad96,this[_0xd9e0c0(0x134)]=_0x1ff483,this[_0xd9e0c0(0x125)]=this['gitManager'][_0xd9e0c0(0x112)](),_0x1ea6cf['on'](_0xd9e0c0(0x11d),_0x55cf8f=>this[_0xd9e0c0(0x10d)](_0x55cf8f));}async[a137_0x44f6a4(0x10d)](_0x3e591c){const _0x92ee5d=a137_0x44f6a4;return this[_0x92ee5d(0x15a)][_0x92ee5d(0x15f)](_0x92ee5d(0x154)+this[_0x92ee5d(0x11b)][_0x92ee5d(0x133)]+_0x92ee5d(0x13c)+this['branch']['name']+']\x20'+_0x3e591c);}async[a137_0x44f6a4(0x141)](){const _0x4f4edb=a137_0x44f6a4;try{if(this[_0x4f4edb(0x160)][_0x4f4edb(0x14d)])this['repositoryData']=await this[_0x4f4edb(0x118)][_0x4f4edb(0x146)](this[_0x4f4edb(0x160)][_0x4f4edb(0x14d)]);else this[_0x4f4edb(0x160)][_0x4f4edb(0x12f)]&&(this[_0x4f4edb(0x128)]=await this[_0x4f4edb(0x118)]['getBranchRecord'](this[_0x4f4edb(0x160)][_0x4f4edb(0x12f)]));}catch(_0x454ed1){throw new bad_request_error_1[(_0x4f4edb(0x122))](errors_1[_0x4f4edb(0x137)]);}}async[a137_0x44f6a4(0x14c)](){const _0x17e3dd=a137_0x44f6a4,_0x3eec04=new commit_components_dto_1[(_0x17e3dd(0x127))](),_0x3499a6=await this[_0x17e3dd(0x15a)][_0x17e3dd(0x14f)](this[_0x17e3dd(0x160)][_0x17e3dd(0x140)])[_0x17e3dd(0x151)](_0x55366a=>_0x55366a['split']('\x20')[_0x17e3dd(0x144)](_0x41fe73=>_0x41fe73['trim']()));return _0x3eec04[_0x17e3dd(0x147)]=this[_0x17e3dd(0x160)]['message'],_0x3eec04[_0x17e3dd(0x124)]=this[_0x17e3dd(0x160)][_0x17e3dd(0x124)],_0x3eec04['componentsIds']=_0x3499a6,_0x3eec04[_0x17e3dd(0x165)]=this[_0x17e3dd(0x160)][_0x17e3dd(0x165)],_0x3eec04['repo']=this[_0x17e3dd(0x11b)],_0x3eec04['branch']=this[_0x17e3dd(0x149)],_0x3eec04;}async[a137_0x44f6a4(0x15b)](){const _0xe3812a=a137_0x44f6a4;var _0xca8f1e;const _0x363a65=await this['repository'][_0xe3812a(0x152)][_0xe3812a(0x13e)](this[_0xe3812a(0x149)][_0xe3812a(0x133)]);await this[_0xe3812a(0x10d)](_0xe3812a(0x123));const _0x477e16=await this['salesforceSync'][_0xe3812a(0x10c)](this['repositoryData'][_0xe3812a(0x15e)]),_0x41756f=await this[_0xe3812a(0x15a)]['retrieveAttachment'](_0x477e16)[_0xe3812a(0x151)](_0x500f27=>typeof _0x500f27==='object'?_0x500f27:JSON[_0xe3812a(0x138)](_0x500f27||'{}'))[_0xe3812a(0x115)](()=>({}));_0x41756f[_0xca8f1e=this[_0xe3812a(0x11b)][_0xe3812a(0x15c)]]||(_0x41756f[_0xca8f1e]={'lastCommit':''}),_0x41756f[this['repository']['gitUrl']][_0xe3812a(0x126)]=_0x363a65['sha'],await this['salesforceService']['patchObject'](_0xe3812a(0x142),_0x477e16,{'Body':utils_1[_0xe3812a(0x119)](JSON[_0xe3812a(0x158)](_0x41756f))});}async[a137_0x44f6a4(0x148)](){const _0x357c42=a137_0x44f6a4,_0x28f166=await this[_0x357c42(0x14c)]();await this[_0x357c42(0x118)]['setStatus'](this[_0x357c42(0x128)],_0x357c42(0x14e)),await this[_0x357c42(0x13f)][_0x357c42(0x132)](_0x28f166),await this['updateLastCommit'](),await this[_0x357c42(0x118)][_0x357c42(0x156)](this['repositoryData'],'Completed');}async[a137_0x44f6a4(0x132)](_0x1b26aa,_0x5c3339){const _0x5e9eb5=a137_0x44f6a4;try{this[_0x5e9eb5(0x160)]=_0x1b26aa,this[_0x5e9eb5(0x15a)][_0x5e9eb5(0x12b)](_0x5c3339),await this[_0x5e9eb5(0x141)]();if(!this[_0x5e9eb5(0x128)])throw new bad_request_error_1['BadRequestError'](errors_1[_0x5e9eb5(0x120)]);this['repository']=await this[_0x5e9eb5(0x125)][_0x5e9eb5(0x13e)](this[_0x5e9eb5(0x128)][_0x5e9eb5(0x150)]),this[_0x5e9eb5(0x149)]=await this[_0x5e9eb5(0x11b)][_0x5e9eb5(0x152)][_0x5e9eb5(0x13e)](this[_0x5e9eb5(0x128)]['branchName']),await this[_0x5e9eb5(0x10d)](_0x5e9eb5(0x145)),this['exec']()[_0x5e9eb5(0x115)](_0xd1c288=>{const _0x2e0261=_0x5e9eb5;this[_0x2e0261(0x10d)](_0x2e0261(0x11f)+(_0xd1c288[_0x2e0261(0x147)]||_0xd1c288));});}catch(_0x320955){this[_0x5e9eb5(0x160)]=undefined;throw _0x320955;}}};FlosumCommitJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a137_0x44f6a4(0x131),[salesforce_service_1[a137_0x44f6a4(0x143)],commit_components_job_1[a137_0x44f6a4(0x136)],salesforce_sync_service_1['SalesforceSyncService'],git_provider_manager_1['GitProviderManager']])],FlosumCommitJob),exports[a137_0x44f6a4(0x12d)]=FlosumCommitJob;