const a123_0x23e7=['585158agzvFo','Clonning\x20repository','salesforceService','getOne','__importDefault','replace','../../parsers/mdapi/child-types','__metadata','gitCredentials','hasOwnProperty','fileType','writeComponents','./job','commitId','Logger','GitUtils','[ERROR]\x20','[CID:\x20','flosum-commit-job','now','COMPONENTS_PER_TICK','trim','copyMdapiTo','function','getRepoService','authSettings','split','sfLogger','[INFO]\x20commit\x20','decorate','retriever','__createBinding','__importStar','prototype','clearDir','667907LlkywQ','37ZNvIMr','branches','defineProperty','deleteCommit','FlosumCommitJob','BadRequestError','1NgvbwO','sort','Push\x20commit\x20to\x20branch','removeDir','map','exec','name','../utils/mdapi.utils','commitAndPush','call','../../../core/errors/bad-request.error','message','log','credentials','return\x20/\x22\x20+\x20this\x20+\x20\x22/','copyProjectTo','Done\x20','\x20components','../../shared/git-provider.manager','Start\x20retrieve\x20components\x20job','object','length','FlosumRetrieverService','info','13466rTMfhA','ms\x20to\x20proceed\x20','../../shared/utils','SalesforceService','mdapiUtils','24316LiQNUy','get','create','../utils/git.utils','metadata','dir','__esModule','SFDXUtils','gitUtils','\x20took\x20','../../sfdx/services/salesforce.service','sfdxUtils','__setModuleDefault','branch','gitUrl','writeFlosumComponents','1216381nBaARf','includes','../../../constants/errors','typedi','constructor','currentJob','repo','data','../../sfdx/services/flosum-retriever.service','../utils/sfdx.utils','71390XYADKN','Recieved\x20commit\x20to\x20proceed.\x20Branch\x20-\x20','default','://','MDApiUtils','1229036rDwCew'];const a123_0x446461=a123_0x3239;(function(_0x4b25aa,_0x52f2c0){const _0x483e3b=a123_0x3239;while(!![]){try{const _0x4c3102=parseInt(_0x483e3b(0x221))*parseInt(_0x483e3b(0x21a))+-parseInt(_0x483e3b(0x1e7))+parseInt(_0x483e3b(0x1f7))+parseInt(_0x483e3b(0x1f6))+parseInt(_0x483e3b(0x21b))*-parseInt(_0x483e3b(0x1d2))+-parseInt(_0x483e3b(0x1d7))+-parseInt(_0x483e3b(0x1f1));if(_0x4c3102===_0x52f2c0)break;else _0x4b25aa['push'](_0x4b25aa['shift']());}catch(_0x202641){_0x4b25aa['push'](_0x4b25aa['shift']());}}}(a123_0x23e7,0xa401c));const a123_0x406068=function(){let _0x361504=!![];return function(_0xcc094c,_0x3eab77){const _0x57de6a=_0x361504?function(){if(_0x3eab77){const _0x37a6d1=_0x3eab77['apply'](_0xcc094c,arguments);return _0x3eab77=null,_0x37a6d1;}}:function(){};return _0x361504=![],_0x57de6a;};}(),a123_0x1adc07=a123_0x406068(this,function(){const _0x5288e5=function(){const _0x857834=a123_0x3239,_0x3cfd26=_0x5288e5[_0x857834(0x1eb)](_0x857834(0x22f))()[_0x857834(0x1eb)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3cfd26['test'](a123_0x1adc07);};return _0x5288e5();});function a123_0x3239(_0x21d780,_0x3cd6bf){return a123_0x3239=function(_0x2cecb9,_0x1adc07){_0x2cecb9=_0x2cecb9-0x1d0;let _0x406068=a123_0x23e7[_0x2cecb9];return _0x406068;},a123_0x3239(_0x21d780,_0x3cd6bf);}a123_0x1adc07();'use strict';var __createBinding=this&&this[a123_0x446461(0x216)]||(Object['create']?function(_0x2ddcf8,_0x2599d6,_0x2b8c71,_0x3ad02a){const _0x18a346=a123_0x446461;if(_0x3ad02a===undefined)_0x3ad02a=_0x2b8c71;Object[_0x18a346(0x21d)](_0x2ddcf8,_0x3ad02a,{'enumerable':!![],'get':function(){return _0x2599d6[_0x2b8c71];}});}:function(_0xfb2139,_0x2d533a,_0x17adb9,_0x15eeab){if(_0x15eeab===undefined)_0x15eeab=_0x17adb9;_0xfb2139[_0x15eeab]=_0x2d533a[_0x17adb9];}),__setModuleDefault=this&&this[a123_0x446461(0x1e3)]||(Object[a123_0x446461(0x1d9)]?function(_0x3a0e3a,_0xae5149){const _0x1291bc=a123_0x446461;Object[_0x1291bc(0x21d)](_0x3a0e3a,_0x1291bc(0x1f3),{'enumerable':!![],'value':_0xae5149});}:function(_0x4391db,_0x4d0e9a){const _0x28ea35=a123_0x446461;_0x4391db[_0x28ea35(0x1f3)]=_0x4d0e9a;}),__decorate=this&&this['__decorate']||function(_0x37c174,_0x379880,_0x33fccf,_0x1fee49){const _0x573e41=a123_0x446461;var _0x3ef6ab=arguments[_0x573e41(0x236)],_0x442f2d=_0x3ef6ab<0x3?_0x379880:_0x1fee49===null?_0x1fee49=Object['getOwnPropertyDescriptor'](_0x379880,_0x33fccf):_0x1fee49,_0x372979;if(typeof Reflect===_0x573e41(0x235)&&typeof Reflect[_0x573e41(0x214)]==='function')_0x442f2d=Reflect[_0x573e41(0x214)](_0x37c174,_0x379880,_0x33fccf,_0x1fee49);else{for(var _0x47a736=_0x37c174[_0x573e41(0x236)]-0x1;_0x47a736>=0x0;_0x47a736--)if(_0x372979=_0x37c174[_0x47a736])_0x442f2d=(_0x3ef6ab<0x3?_0x372979(_0x442f2d):_0x3ef6ab>0x3?_0x372979(_0x379880,_0x33fccf,_0x442f2d):_0x372979(_0x379880,_0x33fccf))||_0x442f2d;}return _0x3ef6ab>0x3&&_0x442f2d&&Object[_0x573e41(0x21d)](_0x379880,_0x33fccf,_0x442f2d),_0x442f2d;},__importStar=this&&this[a123_0x446461(0x217)]||function(_0x23b55e){const _0xf5a615=a123_0x446461;if(_0x23b55e&&_0x23b55e[_0xf5a615(0x1dd)])return _0x23b55e;var _0x2eb9fd={};if(_0x23b55e!=null){for(var _0x3f9867 in _0x23b55e)if(_0x3f9867!==_0xf5a615(0x1f3)&&Object[_0xf5a615(0x218)][_0xf5a615(0x200)][_0xf5a615(0x22a)](_0x23b55e,_0x3f9867))__createBinding(_0x2eb9fd,_0x23b55e,_0x3f9867);}return __setModuleDefault(_0x2eb9fd,_0x23b55e),_0x2eb9fd;},__metadata=this&&this[a123_0x446461(0x1fe)]||function(_0x53ac7d,_0x187494){const _0x513842=a123_0x446461;if(typeof Reflect==='object'&&typeof Reflect[_0x513842(0x1db)]===_0x513842(0x20e))return Reflect[_0x513842(0x1db)](_0x53ac7d,_0x187494);},__importDefault=this&&this[a123_0x446461(0x1fb)]||function(_0x305a9f){return _0x305a9f&&_0x305a9f['__esModule']?_0x305a9f:{'default':_0x305a9f};};Object[a123_0x446461(0x21d)](exports,a123_0x446461(0x1dd),{'value':!![]}),exports[a123_0x446461(0x21f)]=void 0x0;const errors_1=require(a123_0x446461(0x1e9)),core_1=require('../../../core'),bad_request_error_1=require(a123_0x446461(0x22b)),salesforce_service_1=require(a123_0x446461(0x1e1)),git_provider_manager_1=require(a123_0x446461(0x233)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),typedi_1=__importStar(require(a123_0x446461(0x1ea))),child_types_1=__importDefault(require(a123_0x446461(0x1fd))),flosum_retriever_service_1=require(a123_0x446461(0x1ef)),utils_1=require(a123_0x446461(0x1d4)),git_utils_1=require(a123_0x446461(0x1da)),mdapi_utils_1=require(a123_0x446461(0x228)),sfdx_utils_1=require(a123_0x446461(0x1f0)),job_1=require(a123_0x446461(0x203)),logger=new core_1[(a123_0x446461(0x205))](a123_0x446461(0x209));let FlosumCommitJob=class FlosumCommitJob extends job_1['Job']{constructor(_0x43811e,_0x574cb2,_0x521624){const _0x455126=a123_0x446461;super(),this['authSettings']=_0x43811e,this[_0x455126(0x1f9)]=_0x574cb2,this[_0x455126(0x215)]=_0x521624,this[_0x455126(0x20b)]=0x3e8;}get[a123_0x446461(0x22e)](){const _0x4a71ef=a123_0x446461;return this[_0x4a71ef(0x210)][_0x4a71ef(0x1ff)];}get[a123_0x446461(0x204)](){const _0x325a79=a123_0x446461;var _0x243bbf;return(_0x243bbf=this[_0x325a79(0x1ec)])===null||_0x243bbf===void 0x0?void 0x0:_0x243bbf['id'];}async[a123_0x446461(0x212)](_0x1b69f8){const _0x45ef58=a123_0x446461;return this['salesforceService'][_0x45ef58(0x22d)](_0x45ef58(0x208)+this[_0x45ef58(0x204)]+']\x20'+_0x1b69f8);}async[a123_0x446461(0x202)](_0x48f55e){const _0x4fbb20=a123_0x446461;this['sfLogger'](_0x4fbb20(0x234));const _0x2b1e68=await this['retriever']['run'](_0x48f55e);_0x2b1e68[_0x4fbb20(0x222)](_0xfaa070=>child_types_1['default'][_0x4fbb20(0x1e8)](_0xfaa070[_0x4fbb20(0x201)])?0x1:-0x1);let _0x29553c=0x0;while(_0x2b1e68[_0x4fbb20(0x236)]){const _0x357bf2=_0x2b1e68['splice'](0x0,this[_0x4fbb20(0x20b)]);await this[_0x4fbb20(0x1d6)][_0x4fbb20(0x1e6)](_0x357bf2),_0x29553c+=_0x357bf2[_0x4fbb20(0x236)],logger[_0x4fbb20(0x22d)]('Done\x20'+_0x29553c+'/'+_0x48f55e[_0x4fbb20(0x236)]+_0x4fbb20(0x232)),this['sfLogger'](_0x4fbb20(0x231)+_0x29553c+'/'+_0x48f55e[_0x4fbb20(0x236)]+_0x4fbb20(0x232));}}async['exec'](_0x33aac9){const _0x47a569=a123_0x446461,_0x398ac9=_0x33aac9[_0x47a569(0x1e5)][_0x47a569(0x1fc)](/http(s)?\:\/\/(.+@)?/,utils_1['getProtocol'](_0x33aac9[_0x47a569(0x1e5)])+_0x47a569(0x1f4)+this[_0x47a569(0x22e)]+'@');this['mdapiUtils']=new mdapi_utils_1['MDApiUtils'](_0x33aac9[_0x47a569(0x227)]),this[_0x47a569(0x1df)]=new git_utils_1[(_0x47a569(0x206))](_0x398ac9),this[_0x47a569(0x1e2)]=new sfdx_utils_1[(_0x47a569(0x1de))](_0x33aac9[_0x47a569(0x227)]);const _0x5ae8f7=Date[_0x47a569(0x20a)](),{repo:_0x21710b,commitId:_0xaacc47,branch:_0x2df8e2,attachmentId:_0x388007,message:_0x8a3f85,convertToSFDX:_0x2c1e13,user:_0x228413}=this['currentJob']['data'];await this[_0x47a569(0x1f9)]['connect'](),this[_0x47a569(0x212)](_0x47a569(0x1f2)+_0x2df8e2);let _0x31869c=[];try{const _0xeeb779=await this[_0x47a569(0x1f9)]['retrieveAttachment'](_0x388007);_0x31869c=_0xeeb779[_0x47a569(0x211)]('\x20')[_0x47a569(0x225)](_0x2f1d5a=>_0x2f1d5a[_0x47a569(0x20c)]()),this[_0x47a569(0x212)](_0x47a569(0x1f8)),await this[_0x47a569(0x1df)]['clone'](_0x2df8e2,_0x33aac9[_0x47a569(0x227)]);const _0x57bafc=new mdapi_utils_1[(_0x47a569(0x1f5))](_0x21710b);await _0x57bafc['prepareMdapi'](this['gitUtils'][_0x47a569(0x1dc)]),await this[_0x47a569(0x202)](_0x31869c),await this[_0x47a569(0x1df)][_0x47a569(0x219)](),_0x2c1e13?(await this[_0x47a569(0x1e2)]['createProjectFrom'](this['mdapiUtils'][_0x47a569(0x1dc)]),await this[_0x47a569(0x1e2)][_0x47a569(0x230)](this[_0x47a569(0x1df)][_0x47a569(0x1dc)]),await this[_0x47a569(0x1e2)][_0x47a569(0x224)]()):await this[_0x47a569(0x1d6)][_0x47a569(0x20d)](this[_0x47a569(0x1df)]['dir']),this[_0x47a569(0x212)](_0x47a569(0x223)),await this[_0x47a569(0x1df)][_0x47a569(0x229)](_0x8a3f85,_0x228413,_0x2df8e2),await this['salesforceService'][_0x47a569(0x21e)](_0xaacc47),await this[_0x47a569(0x1df)][_0x47a569(0x224)](),await this[_0x47a569(0x1d6)][_0x47a569(0x224)](),logger[_0x47a569(0x1d1)]('commit\x20%s\x20took\x20%dms\x20to\x20proceed\x20%d\x20components',_0xaacc47,Date[_0x47a569(0x20a)]()-_0x5ae8f7,_0x31869c['length']),this['sfLogger'](_0x47a569(0x213)+_0xaacc47+_0x47a569(0x1e0)+(Date[_0x47a569(0x20a)]()-_0x5ae8f7)+_0x47a569(0x1d3)+_0x31869c[_0x47a569(0x236)]+_0x47a569(0x232));}catch(_0x2e78fb){this['sfLogger'](_0x47a569(0x207)+(_0x2e78fb[_0x47a569(0x22c)]||_0x2e78fb)),console[_0x47a569(0x22d)]({'error':_0x2e78fb});}finally{this[_0x47a569(0x1ec)]=undefined;}}async['run'](_0x582412){const _0x1c3113=a123_0x446461;if(this['currentJob'])throw new bad_request_error_1[(_0x1c3113(0x220))](errors_1['ERR_JOB_IS_NOT_DONE']);try{this['currentJob']=_0x582412;const _0x23285a=typedi_1[_0x1c3113(0x1f3)][_0x1c3113(0x1d8)](git_provider_manager_1['GitProviderManager'])[_0x1c3113(0x20f)](),_0x19342e=await _0x23285a[_0x1c3113(0x1fa)](_0x582412[_0x1c3113(0x1ee)][_0x1c3113(0x1ed)]);await _0x19342e[_0x1c3113(0x21c)]['getOne'](_0x582412[_0x1c3113(0x1ee)][_0x1c3113(0x1e4)]),this[_0x1c3113(0x226)](_0x19342e);}catch(_0x3fa239){this[_0x1c3113(0x1ec)]=undefined;throw _0x3fa239;}}};FlosumCommitJob=__decorate([typedi_1['Service'](),__metadata('design:paramtypes',[auth_settings_service_1['AuthSettingsService'],salesforce_service_1[a123_0x446461(0x1d5)],flosum_retriever_service_1[a123_0x446461(0x1d0)]])],FlosumCommitJob),exports[a123_0x446461(0x21f)]=FlosumCommitJob;