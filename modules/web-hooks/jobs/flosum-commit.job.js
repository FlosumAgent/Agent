const a123_0x2495=['data','Service','../utils/git.utils','mdapiUtils','getRepoService','FlosumCommitJob','getOne','gitUrl','clearDir','__importDefault','apply','commitId','length','1SwSUtT','./job','message','MDApiUtils','defineProperty','://','1ujMAwi','1wspLLk','writeFlosumComponents','SFDXUtils','design:paramtypes','writeComponents','map','727554MCraVf','removeDir','salesforceService','metadata','info','../../shared/git-provider.manager','branches','create','[ERROR]\x20','Done\x20','replace','object','sort','481331bgYqqu','GitUtils','[INFO]\x20commit\x20','commitAndPush','sfLogger','credentials','../../../core','AuthSettingsService','gitCredentials','exec','\x20took\x20','Push\x20commit\x20to\x20branch','../../sfdx/services/flosum-retriever.service','734506xqfpjq','test','constructor','fileType','function','retrieveAttachment','run','Clonning\x20repository','repo','../../sfdx/services/salesforce.service','Logger','130147yvAbJO','__createBinding','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Recieved\x20commit\x20to\x20proceed.\x20Branch\x20-\x20','434273OBEvwJ','default','__metadata','call','log','848217DvjQeo','dir','retriever','authSettings','split','ERR_JOB_IS_NOT_DONE','copyProjectTo','decorate','../utils/sfdx.utils','currentJob','gitUtils','name','prepareMdapi','417273uAmzPT','getProtocol','clone','deleteCommit','now','prototype','__setModuleDefault','flosum-commit-job','__esModule','hasOwnProperty','BadRequestError','../../../constants/errors','4lveplX','splice','\x20components','sfdxUtils','1nMhqMG'];const a123_0x3b548b=a123_0x3910;function a123_0x3910(_0x10e450,_0x324e96){return a123_0x3910=function(_0xc44902,_0x3906f3){_0xc44902=_0xc44902-0x92;let _0x39d7d8=a123_0x2495[_0xc44902];return _0x39d7d8;},a123_0x3910(_0x10e450,_0x324e96);}(function(_0x22b23a,_0x41e72e){const _0x2e91b1=a123_0x3910;while(!![]){try{const _0x2f049f=parseInt(_0x2e91b1(0xd1))*-parseInt(_0x2e91b1(0xf6))+parseInt(_0x2e91b1(0xb0))+-parseInt(_0x2e91b1(0xa3))*-parseInt(_0x2e91b1(0xef))+-parseInt(_0x2e91b1(0xe1))*-parseInt(_0x2e91b1(0x96))+parseInt(_0x2e91b1(0xc4))+parseInt(_0x2e91b1(0xf5))*-parseInt(_0x2e91b1(0xbb))+-parseInt(_0x2e91b1(0xbf))*parseInt(_0x2e91b1(0xdd));if(_0x2f049f===_0x41e72e)break;else _0x22b23a['push'](_0x22b23a['shift']());}catch(_0x237043){_0x22b23a['push'](_0x22b23a['shift']());}}}(a123_0x2495,0x7bcd8));const a123_0x39d7d8=function(){let _0x37c38d=!![];return function(_0x2d52d3,_0x4b2da4){const _0x2eeab0=_0x37c38d?function(){const _0x4a361e=a123_0x3910;if(_0x4b2da4){const _0x1af7ab=_0x4b2da4[_0x4a361e(0xec)](_0x2d52d3,arguments);return _0x4b2da4=null,_0x1af7ab;}}:function(){};return _0x37c38d=![],_0x2eeab0;};}(),a123_0x3906f3=a123_0x39d7d8(this,function(){const _0x49ec7d=function(){const _0x5b1100=a123_0x3910,_0x3a84c9=_0x49ec7d['constructor'](_0x5b1100(0xbd))()[_0x5b1100(0xb2)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3a84c9[_0x5b1100(0xb1)](a123_0x3906f3);};return _0x49ec7d();});a123_0x3906f3();'use strict';var __createBinding=this&&this[a123_0x3b548b(0xbc)]||(Object[a123_0x3b548b(0x9d)]?function(_0x46a2aa,_0x421e19,_0x10aff6,_0x535eb5){const _0x42802b=a123_0x3b548b;if(_0x535eb5===undefined)_0x535eb5=_0x10aff6;Object[_0x42802b(0xf3)](_0x46a2aa,_0x535eb5,{'enumerable':!![],'get':function(){return _0x421e19[_0x10aff6];}});}:function(_0x2ae896,_0x240144,_0x2f5394,_0x45772e){if(_0x45772e===undefined)_0x45772e=_0x2f5394;_0x2ae896[_0x45772e]=_0x240144[_0x2f5394];}),__setModuleDefault=this&&this[a123_0x3b548b(0xd7)]||(Object['create']?function(_0x1863b2,_0x23e9c3){const _0x17e1e8=a123_0x3b548b;Object[_0x17e1e8(0xf3)](_0x1863b2,'default',{'enumerable':!![],'value':_0x23e9c3});}:function(_0x1532c5,_0x48e7e1){const _0x510a53=a123_0x3b548b;_0x1532c5[_0x510a53(0xc0)]=_0x48e7e1;}),__decorate=this&&this['__decorate']||function(_0x33b96d,_0x1857a8,_0x33e81c,_0x11e2b4){const _0x57b38e=a123_0x3b548b;var _0x55011e=arguments['length'],_0x55c212=_0x55011e<0x3?_0x1857a8:_0x11e2b4===null?_0x11e2b4=Object['getOwnPropertyDescriptor'](_0x1857a8,_0x33e81c):_0x11e2b4,_0x2d86c0;if(typeof Reflect===_0x57b38e(0xa1)&&typeof Reflect[_0x57b38e(0xcb)]===_0x57b38e(0xb4))_0x55c212=Reflect['decorate'](_0x33b96d,_0x1857a8,_0x33e81c,_0x11e2b4);else{for(var _0xdc0510=_0x33b96d[_0x57b38e(0xee)]-0x1;_0xdc0510>=0x0;_0xdc0510--)if(_0x2d86c0=_0x33b96d[_0xdc0510])_0x55c212=(_0x55011e<0x3?_0x2d86c0(_0x55c212):_0x55011e>0x3?_0x2d86c0(_0x1857a8,_0x33e81c,_0x55c212):_0x2d86c0(_0x1857a8,_0x33e81c))||_0x55c212;}return _0x55011e>0x3&&_0x55c212&&Object[_0x57b38e(0xf3)](_0x1857a8,_0x33e81c,_0x55c212),_0x55c212;},__importStar=this&&this['__importStar']||function(_0x75b7a5){const _0x4e4878=a123_0x3b548b;if(_0x75b7a5&&_0x75b7a5[_0x4e4878(0xd9)])return _0x75b7a5;var _0x1a9a53={};if(_0x75b7a5!=null){for(var _0x4b9f71 in _0x75b7a5)if(_0x4b9f71!==_0x4e4878(0xc0)&&Object[_0x4e4878(0xd6)][_0x4e4878(0xda)][_0x4e4878(0xc2)](_0x75b7a5,_0x4b9f71))__createBinding(_0x1a9a53,_0x75b7a5,_0x4b9f71);}return __setModuleDefault(_0x1a9a53,_0x75b7a5),_0x1a9a53;},__metadata=this&&this[a123_0x3b548b(0xc1)]||function(_0x31dcd7,_0x18ee6f){const _0xd58857=a123_0x3b548b;if(typeof Reflect===_0xd58857(0xa1)&&typeof Reflect[_0xd58857(0x99)]===_0xd58857(0xb4))return Reflect['metadata'](_0x31dcd7,_0x18ee6f);},__importDefault=this&&this[a123_0x3b548b(0xeb)]||function(_0x484814){return _0x484814&&_0x484814['__esModule']?_0x484814:{'default':_0x484814};};Object[a123_0x3b548b(0xf3)](exports,a123_0x3b548b(0xd9),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;const errors_1=require(a123_0x3b548b(0xdc)),core_1=require(a123_0x3b548b(0xa9)),bad_request_error_1=require('../../../core/errors/bad-request.error'),salesforce_service_1=require(a123_0x3b548b(0xb9)),git_provider_manager_1=require(a123_0x3b548b(0x9b)),auth_settings_service_1=require('../../shared/services/auth-settings.service'),typedi_1=__importStar(require('typedi')),child_types_1=__importDefault(require('../../parsers/mdapi/child-types')),flosum_retriever_service_1=require(a123_0x3b548b(0xaf)),utils_1=require('../../shared/utils'),git_utils_1=require(a123_0x3b548b(0xe4)),mdapi_utils_1=require('../utils/mdapi.utils'),sfdx_utils_1=require(a123_0x3b548b(0xcc)),job_1=require(a123_0x3b548b(0xf0)),logger=new core_1[(a123_0x3b548b(0xba))](a123_0x3b548b(0xd8));let FlosumCommitJob=class FlosumCommitJob extends job_1['Job']{constructor(_0x541d17,_0x2343f8,_0x13be89){const _0x774510=a123_0x3b548b;super(),this[_0x774510(0xc7)]=_0x541d17,this[_0x774510(0x98)]=_0x2343f8,this[_0x774510(0xc6)]=_0x13be89,this['COMPONENTS_PER_TICK']=0x3e8;}get['credentials'](){const _0xf35d4b=a123_0x3b548b;return this[_0xf35d4b(0xc7)][_0xf35d4b(0xab)];}get[a123_0x3b548b(0xed)](){const _0x539f10=a123_0x3b548b;var _0x5973e0;return(_0x5973e0=this[_0x539f10(0xcd)])===null||_0x5973e0===void 0x0?void 0x0:_0x5973e0['id'];}async['sfLogger'](_0x3c0fa1){const _0x3000b0=a123_0x3b548b;return this['salesforceService'][_0x3000b0(0xc3)]('[CID:\x20'+this[_0x3000b0(0xed)]+']\x20'+_0x3c0fa1);}async['writeComponents'](_0xc7a7dc){const _0x303e72=a123_0x3b548b;this[_0x303e72(0xa7)]('Start\x20retrieve\x20components\x20job');const _0x1acc76=await this['retriever']['run'](_0xc7a7dc);_0x1acc76[_0x303e72(0xa2)](_0x49ab11=>child_types_1[_0x303e72(0xc0)]['includes'](_0x49ab11[_0x303e72(0xb3)])?0x1:-0x1);let _0x357ef7=0x0;while(_0x1acc76['length']){const _0x5ad9b6=_0x1acc76[_0x303e72(0xde)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x303e72(0xe5)][_0x303e72(0xf7)](_0x5ad9b6),_0x357ef7+=_0x5ad9b6[_0x303e72(0xee)],logger[_0x303e72(0xc3)](_0x303e72(0x9f)+_0x357ef7+'/'+_0xc7a7dc['length']+_0x303e72(0xdf)),this[_0x303e72(0xa7)](_0x303e72(0x9f)+_0x357ef7+'/'+_0xc7a7dc[_0x303e72(0xee)]+_0x303e72(0xdf));}}async[a123_0x3b548b(0xac)](_0xd686a7){const _0x230ffc=a123_0x3b548b,_0x3ae5a0=_0xd686a7[_0x230ffc(0xe9)][_0x230ffc(0xa0)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x230ffc(0xd2)](_0xd686a7[_0x230ffc(0xe9)])+_0x230ffc(0xf4)+this[_0x230ffc(0xa8)]+'@');this['mdapiUtils']=new mdapi_utils_1['MDApiUtils'](_0xd686a7['name']),this['gitUtils']=new git_utils_1[(_0x230ffc(0xa4))](_0x3ae5a0),this[_0x230ffc(0xe0)]=new sfdx_utils_1[(_0x230ffc(0x92))](_0xd686a7[_0x230ffc(0xcf)]);const _0x53bc45=Date['now'](),{repo:_0x2bc37b,commitId:_0x1f8699,branch:_0xc81319,attachmentId:_0x167c95,message:_0x2bbedf,convertToSFDX:_0xc63b5e,user:_0x220efa}=this[_0x230ffc(0xcd)][_0x230ffc(0xe2)];await this[_0x230ffc(0x98)]['connect'](),this[_0x230ffc(0xa7)](_0x230ffc(0xbe)+_0xc81319);let _0xd3a52=[];try{const _0x4a6096=await this[_0x230ffc(0x98)][_0x230ffc(0xb5)](_0x167c95);_0xd3a52=_0x4a6096[_0x230ffc(0xc8)]('\x20')[_0x230ffc(0x95)](_0x3efad2=>_0x3efad2['trim']()),this['sfLogger'](_0x230ffc(0xb7)),await this[_0x230ffc(0xce)][_0x230ffc(0xd3)](_0xc81319,_0xd686a7['name']);const _0xb9ed5d=new mdapi_utils_1[(_0x230ffc(0xf2))](_0x2bc37b);await _0xb9ed5d[_0x230ffc(0xd0)](this['gitUtils']['dir']),await this[_0x230ffc(0x94)](_0xd3a52),await this[_0x230ffc(0xce)][_0x230ffc(0xea)](),_0xc63b5e?(await this[_0x230ffc(0xe0)]['createProjectFrom'](this[_0x230ffc(0xe5)]['dir']),await this[_0x230ffc(0xe0)][_0x230ffc(0xca)](this['gitUtils']['dir']),await this[_0x230ffc(0xe0)][_0x230ffc(0x97)]()):await this[_0x230ffc(0xe5)]['copyMdapiTo'](this[_0x230ffc(0xce)][_0x230ffc(0xc5)]),this['sfLogger'](_0x230ffc(0xae)),await this[_0x230ffc(0xce)][_0x230ffc(0xa6)](_0x2bbedf,_0x220efa,_0xc81319),await this[_0x230ffc(0x98)][_0x230ffc(0xd4)](_0x1f8699),await this[_0x230ffc(0xce)]['removeDir'](),await this['mdapiUtils']['removeDir'](),logger[_0x230ffc(0x9a)]('commit\x20%s\x20took\x20%dms\x20to\x20proceed\x20%d\x20components',_0x1f8699,Date[_0x230ffc(0xd5)]()-_0x53bc45,_0xd3a52[_0x230ffc(0xee)]),this[_0x230ffc(0xa7)](_0x230ffc(0xa5)+_0x1f8699+_0x230ffc(0xad)+(Date[_0x230ffc(0xd5)]()-_0x53bc45)+'ms\x20to\x20proceed\x20'+_0xd3a52[_0x230ffc(0xee)]+_0x230ffc(0xdf));}catch(_0x2c1853){this[_0x230ffc(0xa7)](_0x230ffc(0x9e)+(_0x2c1853[_0x230ffc(0xf1)]||_0x2c1853)),console['log']({'error':_0x2c1853});}finally{this['currentJob']=undefined;}}async[a123_0x3b548b(0xb6)](_0x4ec438){const _0x25f50e=a123_0x3b548b;if(this[_0x25f50e(0xcd)])throw new bad_request_error_1[(_0x25f50e(0xdb))](errors_1[_0x25f50e(0xc9)]);try{this[_0x25f50e(0xcd)]=_0x4ec438;const _0x545cf4=typedi_1['default']['get'](git_provider_manager_1['GitProviderManager'])[_0x25f50e(0xe6)](),_0x155fff=await _0x545cf4[_0x25f50e(0xe8)](_0x4ec438[_0x25f50e(0xe2)][_0x25f50e(0xb8)]);await _0x155fff[_0x25f50e(0x9c)][_0x25f50e(0xe8)](_0x4ec438[_0x25f50e(0xe2)]['branch']),this['exec'](_0x155fff);}catch(_0x2ba528){this['currentJob']=undefined;throw _0x2ba528;}}};FlosumCommitJob=__decorate([typedi_1[a123_0x3b548b(0xe3)](),__metadata(a123_0x3b548b(0x93),[auth_settings_service_1[a123_0x3b548b(0xaa)],salesforce_service_1['SalesforceService'],flosum_retriever_service_1['FlosumRetrieverService']])],FlosumCommitJob),exports[a123_0x3b548b(0xe7)]=FlosumCommitJob;