function a180_0x269c(_0x964adc,_0x22cacd){const _0x2749b7=a180_0x228f();return a180_0x269c=function(_0x578b4a,_0x120e72){_0x578b4a=_0x578b4a-0x177;let _0x228f4b=_0x2749b7[_0x578b4a];return _0x228f4b;},a180_0x269c(_0x964adc,_0x22cacd);}const a180_0x3003d9=a180_0x269c;(function(_0x28670c,_0x207951){const _0xbb474=a180_0x269c,_0x31c8f9=_0x28670c();while(!![]){try{const _0x52d282=-parseInt(_0xbb474(0x183))/0x1+parseInt(_0xbb474(0x1c1))/0x2*(-parseInt(_0xbb474(0x18c))/0x3)+parseInt(_0xbb474(0x197))/0x4*(-parseInt(_0xbb474(0x1a8))/0x5)+-parseInt(_0xbb474(0x1b9))/0x6*(-parseInt(_0xbb474(0x1d0))/0x7)+parseInt(_0xbb474(0x1c8))/0x8*(-parseInt(_0xbb474(0x1ac))/0x9)+parseInt(_0xbb474(0x1de))/0xa+-parseInt(_0xbb474(0x1a0))/0xb*(-parseInt(_0xbb474(0x1b5))/0xc);if(_0x52d282===_0x207951)break;else _0x31c8f9['push'](_0x31c8f9['shift']());}catch(_0x50d65e){_0x31c8f9['push'](_0x31c8f9['shift']());}}}(a180_0x228f,0x2d45c));const a180_0x120e72=function(){let _0x2d7422=!![];return function(_0x4e9ea6,_0x5b0f3f){const _0x45a6b8=_0x2d7422?function(){const _0x29bd75=a180_0x269c;if(_0x5b0f3f){const _0x33e1cb=_0x5b0f3f[_0x29bd75(0x1ae)](_0x4e9ea6,arguments);return _0x5b0f3f=null,_0x33e1cb;}}:function(){};return _0x2d7422=![],_0x45a6b8;};}(),a180_0x578b4a=a180_0x120e72(this,function(){const _0x5907b4=a180_0x269c;return a180_0x578b4a[_0x5907b4(0x1a3)]()[_0x5907b4(0x18d)](_0x5907b4(0x1ce))[_0x5907b4(0x1a3)]()[_0x5907b4(0x1d5)](a180_0x578b4a)[_0x5907b4(0x18d)](_0x5907b4(0x1ce));});a180_0x578b4a();'use strict';var __decorate=this&&this[a180_0x3003d9(0x192)]||function(_0x37be32,_0x5fd822,_0x1a69c7,_0x4d1e0f){const _0xe1fb9f=a180_0x3003d9;var _0x43ca09=arguments[_0xe1fb9f(0x18a)],_0x1428e8=_0x43ca09<0x3?_0x5fd822:_0x4d1e0f===null?_0x4d1e0f=Object[_0xe1fb9f(0x1df)](_0x5fd822,_0x1a69c7):_0x4d1e0f,_0x35f810;if(typeof Reflect===_0xe1fb9f(0x1bc)&&typeof Reflect[_0xe1fb9f(0x1ba)]===_0xe1fb9f(0x17f))_0x1428e8=Reflect[_0xe1fb9f(0x1ba)](_0x37be32,_0x5fd822,_0x1a69c7,_0x4d1e0f);else{for(var _0x2ee427=_0x37be32[_0xe1fb9f(0x18a)]-0x1;_0x2ee427>=0x0;_0x2ee427--)if(_0x35f810=_0x37be32[_0x2ee427])_0x1428e8=(_0x43ca09<0x3?_0x35f810(_0x1428e8):_0x43ca09>0x3?_0x35f810(_0x5fd822,_0x1a69c7,_0x1428e8):_0x35f810(_0x5fd822,_0x1a69c7))||_0x1428e8;}return _0x43ca09>0x3&&_0x1428e8&&Object[_0xe1fb9f(0x198)](_0x5fd822,_0x1a69c7,_0x1428e8),_0x1428e8;},__metadata=this&&this[a180_0x3003d9(0x194)]||function(_0x17f97a,_0x25bb47){const _0x3e36a7=a180_0x3003d9;if(typeof Reflect===_0x3e36a7(0x1bc)&&typeof Reflect[_0x3e36a7(0x178)]===_0x3e36a7(0x17f))return Reflect[_0x3e36a7(0x178)](_0x17f97a,_0x25bb47);},FlosumCommitJob_1;Object[a180_0x3003d9(0x198)](exports,a180_0x3003d9(0x17c),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;const core_1=require(a180_0x3003d9(0x18e)),salesforce_logger_v2_service_1=require(a180_0x3003d9(0x1a6)),salesforce_service_1=require(a180_0x3003d9(0x1b1)),git_provider_manager_1=require(a180_0x3003d9(0x182)),typedi_1=require(a180_0x3003d9(0x1d6)),errors_1=require(a180_0x3003d9(0x191)),bad_request_error_1=require('../../../core/errors/bad-request.error'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a180_0x3003d9(0x1d8)),commit_components_dto_1=require(a180_0x3003d9(0x195)),commit_components_job_1=require(a180_0x3003d9(0x196));function a180_0x228f(){const _0x5ea58d=['trim','send','84pPkLQz','branchName','salesforceService','getComponentsToDelete','6UbMLLf','decorate','salesforceSync','object','repositoryName','convertToSFDX','design:paramtypes','sfLogger','8HngSPE','Completed','[INFO]\x20Start\x20commit\x20job','updateRemoteState','components','Logger','getBranchRecord','136uYaZGd','commitData','GitProviderManager','map','gitManager','getPrefix','(((.+)+)+)+$','[FLOSUM\x20->\x20GIT]\x20[','1171576vrzqHG','repository','setStatus','deleteAttachment','FlosumCommitJob','constructor','typedi','log','../../salesforce/services/salesforce-sync.service','provider','updateLastCommit','In\x20Progress',']\x20[Repository:\x20','run','2409360gHNQLP','getOwnPropertyDescriptor','SalesforceService','repoService',']\x20[Branch:\x20','branch','metadata','then','user','CommitComponentsDto','__esModule','message','retrieveAttachment','function','exec','syncBranchId','../../shared/git-provider.manager','203253DEPIqj','deleteAttachmentId','name','SalesforceSyncService','ERR_INVALID_SYNC_RECORD_ID','catch','gitUrl','length','branches','189357DZSWIf','search','../../../core','commitAttachmentId','repositoryData','../../../constants/errors','__decorate','getRepositoryRecord','__metadata','../dto/commit-components.dto','./commit-components.job','4tsyAMy','defineProperty','fetchRepositoryData','BadRequestError','error','getComponentsToWrite','logger','SalesforceLogger2','all','1172050PTNGpn','getOne','Error','toString','repo','syncRepositoryId','../../salesforce/services/salesforce-logger-v2.service','getRepoService','1799690dGpmNz','getCommitDto','[INFO]\x20Update\x20remote\x20state.','commitJob','81027qgGSeX','sha','apply','handleCommitJobError','toUpperCase','../../salesforce/services/salesforce.service','split'];a180_0x228f=function(){return _0x5ea58d;};return a180_0x228f();}let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x3165c8,_0x1c833a,_0x51e99d,_0x3a7723){const _0x47f2d1=a180_0x3003d9;this['salesforceService']=_0x3165c8,this['commitJob']=_0x1c833a,this[_0x47f2d1(0x1bb)]=_0x51e99d,this[_0x47f2d1(0x1cc)]=_0x3a7723,this[_0x47f2d1(0x1e1)]=this[_0x47f2d1(0x1cc)][_0x47f2d1(0x1a7)](),this[_0x47f2d1(0x19d)]=new core_1[(_0x47f2d1(0x1c6))](FlosumCommitJob_1[_0x47f2d1(0x185)]);}async[a180_0x3003d9(0x199)](){const _0x561a1a=a180_0x3003d9;try{if(this[_0x561a1a(0x1c9)][_0x561a1a(0x1a5)])this[_0x561a1a(0x190)]=await this[_0x561a1a(0x1bb)][_0x561a1a(0x193)](this[_0x561a1a(0x1c9)][_0x561a1a(0x1a5)]);else this[_0x561a1a(0x1c9)][_0x561a1a(0x181)]&&(this[_0x561a1a(0x190)]=await this[_0x561a1a(0x1bb)][_0x561a1a(0x1c7)](this['commitData'][_0x561a1a(0x181)]));}catch(_0x554290){throw new bad_request_error_1['BadRequestError'](errors_1[_0x561a1a(0x187)]);}}async[a180_0x3003d9(0x19c)](){const _0x4ad366=a180_0x3003d9;if(!this[_0x4ad366(0x1c9)][_0x4ad366(0x18f)])return[];const _0x2cdcc4=await this[_0x4ad366(0x1b7)][_0x4ad366(0x17e)](this[_0x4ad366(0x1c9)][_0x4ad366(0x18f)])[_0x4ad366(0x179)](_0x12201a=>_0x12201a[_0x4ad366(0x1b2)]('\x20')[_0x4ad366(0x1cb)](_0x5dd466=>_0x5dd466[_0x4ad366(0x1b3)]())),_0x50bcce=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x4ad366(0x1b7)]),_0x5914b7=await _0x50bcce[_0x4ad366(0x1dd)](_0x2cdcc4);return _0x5914b7;}async[a180_0x3003d9(0x1b8)](){const _0x2684a3=a180_0x3003d9;if(!this[_0x2684a3(0x1c9)]['deleteAttachmentId'])return[];const _0x2e4b56=await this[_0x2684a3(0x1b7)][_0x2684a3(0x17e)](this[_0x2684a3(0x1c9)][_0x2684a3(0x184)]);return _0x2e4b56;}async[a180_0x3003d9(0x1a9)](){const _0x5a7ad2=a180_0x3003d9,_0xa32ba1=new commit_components_dto_1[(_0x5a7ad2(0x17b))](),[_0x358163,_0x5a8624]=await Promise[_0x5a7ad2(0x19f)]([this['getComponentsToWrite'](),this[_0x5a7ad2(0x1b8)]()]);return _0xa32ba1['message']=this[_0x5a7ad2(0x1c9)][_0x5a7ad2(0x17d)],_0xa32ba1[_0x5a7ad2(0x17a)]=this[_0x5a7ad2(0x1c9)][_0x5a7ad2(0x17a)],_0xa32ba1[_0x5a7ad2(0x1c5)]={'writed':_0x358163,'deleted':_0x5a8624},_0xa32ba1[_0x5a7ad2(0x1be)]=this[_0x5a7ad2(0x1c9)][_0x5a7ad2(0x1be)],_0xa32ba1[_0x5a7ad2(0x1a4)]=this[_0x5a7ad2(0x1d1)],_0xa32ba1[_0x5a7ad2(0x177)]=this[_0x5a7ad2(0x177)],_0xa32ba1[_0x5a7ad2(0x1d9)]=this['provider'],_0xa32ba1;}async['updateLastCommit'](_0x1d8b96=![]){const _0x1fec46=a180_0x3003d9;if(_0x1d8b96)await this[_0x1fec46(0x1bb)]['updateRemoteState'](this[_0x1fec46(0x190)],{});else{const _0x49a140=await this[_0x1fec46(0x1d1)][_0x1fec46(0x18b)]['getOne'](this[_0x1fec46(0x177)]['name']);this[_0x1fec46(0x1c0)][_0x1fec46(0x1d7)](_0x1fec46(0x1aa));const _0x32cc8d={[this['repository'][_0x1fec46(0x189)]]:{'lastCommit':_0x49a140[_0x1fec46(0x1ad)]}};await this[_0x1fec46(0x1bb)][_0x1fec46(0x1c4)](this['repositoryData'],_0x32cc8d);}}async['exec'](){const _0x126f0e=a180_0x3003d9,_0x5d9e3f=await this[_0x126f0e(0x1a9)]();await this['salesforceSync']['setStatus'](this[_0x126f0e(0x190)],_0x126f0e(0x1db)),await this[_0x126f0e(0x1ab)][_0x126f0e(0x1dd)](_0x5d9e3f,this[_0x126f0e(0x1c0)]),await this[_0x126f0e(0x1da)](),this[_0x126f0e(0x1c9)]['commitAttachmentId']&&await this['salesforceService']['deleteAttachment'](this[_0x126f0e(0x1c9)][_0x126f0e(0x18f)]),this['commitData'][_0x126f0e(0x184)]&&await this[_0x126f0e(0x1b7)][_0x126f0e(0x1d3)](this['commitData'][_0x126f0e(0x184)]),await this[_0x126f0e(0x1bb)][_0x126f0e(0x1d2)](this[_0x126f0e(0x190)],_0x126f0e(0x1c2));}async[a180_0x3003d9(0x1af)](_0x419af4){const _0x3cdc88=a180_0x3003d9;try{this[_0x3cdc88(0x1c0)][_0x3cdc88(0x1d7)]('[ERROR]\x20'+_0x419af4),await this[_0x3cdc88(0x1c0)]['send'](),await this[_0x3cdc88(0x1da)](!![]),await this[_0x3cdc88(0x1bb)][_0x3cdc88(0x1d2)](this[_0x3cdc88(0x190)],_0x3cdc88(0x1a2));}catch(_0x3c60bf){this['logger']['error'](_0x3c60bf);}}async[a180_0x3003d9(0x1dd)](_0x3dd0df,_0x40cdb6,_0x3171d2){const _0xdcb577=a180_0x3003d9;try{this[_0xdcb577(0x1c9)]=_0x3dd0df,this[_0xdcb577(0x1d9)]=_0x3171d2,await this['fetchRepositoryData'](),this['repository']=await this[_0xdcb577(0x1e1)][_0xdcb577(0x1a1)](this[_0xdcb577(0x190)][_0xdcb577(0x1bd)]),this[_0xdcb577(0x177)]=await this[_0xdcb577(0x1d1)]['branches'][_0xdcb577(0x1a1)](this[_0xdcb577(0x190)][_0xdcb577(0x1b6)]),this['sfLogger']=new salesforce_logger_v2_service_1[(_0xdcb577(0x19e))](_0x40cdb6['getLoggerId'](),(_0x40cdb6[_0xdcb577(0x1cd)]()||_0xdcb577(0x1cf)+_0x3171d2[_0xdcb577(0x1b0)]()+_0xdcb577(0x1dc)+this[_0xdcb577(0x190)][_0xdcb577(0x1bd)]+_0xdcb577(0x1e2)+this[_0xdcb577(0x190)][_0xdcb577(0x1b6)]+']')+'\x20['+FlosumCommitJob_1[_0xdcb577(0x185)]+']');if(!this[_0xdcb577(0x190)])throw new bad_request_error_1[(_0xdcb577(0x19a))](errors_1['ERR_UNKNOWN_SYNC_RECORD_ID']);await this['sfLogger'][_0xdcb577(0x1d7)](_0xdcb577(0x1c3))[_0xdcb577(0x1b4)](),this[_0xdcb577(0x180)]()[_0xdcb577(0x188)](_0x8b16d4=>this[_0xdcb577(0x1af)](_0x8b16d4));}catch(_0x4ded33){this[_0xdcb577(0x1c9)]=undefined,this[_0xdcb577(0x19d)][_0xdcb577(0x19b)](_0x4ded33);throw _0x4ded33;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a180_0x3003d9(0x1bf),[salesforce_service_1[a180_0x3003d9(0x1e0)],commit_components_job_1['CommitComponentsJob'],salesforce_sync_service_1[a180_0x3003d9(0x186)],git_provider_manager_1[a180_0x3003d9(0x1ca)]])],FlosumCommitJob),exports[a180_0x3003d9(0x1d4)]=FlosumCommitJob;