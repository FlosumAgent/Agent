const a106_0x4b7a=['test','3DZjIIP','../../sfdx/utils/sfdx-file-converter','constructor','splice','__setModuleDefault','__esModule','./job','files','writeFile','retrieveComponents','isFinished','Job','__metadata','SalesforceService','commit','COMPONENTS_PER_REQUEST','SFDXFileConverter','2978017tSNbzn','../../sfdx/services/salesforce.service','user','../../internal/fs.internal','AuthSettingsService','function','__createBinding','127683MNxcKw','getOwnPropertyDescriptor','exec','commitId','object','ids','repo','__decorate','git://','currentJob','add','2FMHxrq','data','BadRequestError','credentials','create','components','../../internal/git.internal','connect','length','join','get','519NyPNir','224348OPdQXm','ERR_JOB_IS_NOT_DONE','decorate','call','715705SbIABm','../../../core/errors/bad-request.error','215MJeeaY','all','map','__importStar','apply','setCredentials','run','default','FlosumCommitJob','salesforceService','design:paramtypes','retrieve','defineProperty','Service','parse','writeFilesFromConverters','path','Git','push','87205JRXswT','baseDir','forEach','metadata','999624lxLTQp'];const a106_0x5f44d2=a106_0x3a60;function a106_0x3a60(_0x5608e0,_0x57d78b){return a106_0x3a60=function(_0x489ccd,_0xbaa438){_0x489ccd=_0x489ccd-0x1ba;let _0x1450f5=a106_0x4b7a[_0x489ccd];return _0x1450f5;},a106_0x3a60(_0x5608e0,_0x57d78b);}(function(_0x90517,_0x279863){const _0x38b65b=a106_0x3a60;while(!![]){try{const _0x535f1f=-parseInt(_0x38b65b(0x1e3))+parseInt(_0x38b65b(0x1df))+-parseInt(_0x38b65b(0x1cc))*-parseInt(_0x38b65b(0x1c5))+-parseInt(_0x38b65b(0x1c6))*parseInt(_0x38b65b(0x1ba))+-parseInt(_0x38b65b(0x1fd))*parseInt(_0x38b65b(0x1e5))+-parseInt(_0x38b65b(0x1ca))+parseInt(_0x38b65b(0x1f6));if(_0x535f1f===_0x279863)break;else _0x90517['push'](_0x90517['shift']());}catch(_0x203467){_0x90517['push'](_0x90517['shift']());}}}(a106_0x4b7a,0x99be5));const a106_0x1450f5=function(){let _0x324ca5=!![];return function(_0x2993da,_0x15cc96){const _0x549163=_0x324ca5?function(){const _0x2512a4=a106_0x3a60;if(_0x15cc96){const _0x4c59ac=_0x15cc96[_0x2512a4(0x1d0)](_0x2993da,arguments);return _0x15cc96=null,_0x4c59ac;}}:function(){};return _0x324ca5=![],_0x549163;};}(),a106_0xbaa438=a106_0x1450f5(this,function(){const _0x3b510f=function(){const _0x524f4c=a106_0x3a60,_0x4710d8=_0x3b510f[_0x524f4c(0x1e7)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x4710d8[_0x524f4c(0x1e4)](a106_0xbaa438);};return _0x3b510f();});a106_0xbaa438();'use strict';var __createBinding=this&&this[a106_0x5f44d2(0x1fc)]||(Object[a106_0x5f44d2(0x1be)]?function(_0x209b89,_0x26714c,_0x346612,_0x3006fc){if(_0x3006fc===undefined)_0x3006fc=_0x346612;Object['defineProperty'](_0x209b89,_0x3006fc,{'enumerable':!![],'get':function(){return _0x26714c[_0x346612];}});}:function(_0x3c8d05,_0x4ba66a,_0x5958a4,_0x5cd634){if(_0x5cd634===undefined)_0x5cd634=_0x5958a4;_0x3c8d05[_0x5cd634]=_0x4ba66a[_0x5958a4];}),__setModuleDefault=this&&this[a106_0x5f44d2(0x1e9)]||(Object['create']?function(_0x39e23c,_0x298d50){const _0xe48904=a106_0x5f44d2;Object['defineProperty'](_0x39e23c,_0xe48904(0x1d3),{'enumerable':!![],'value':_0x298d50});}:function(_0x477e4d,_0x11c50c){const _0x146897=a106_0x5f44d2;_0x477e4d[_0x146897(0x1d3)]=_0x11c50c;}),__decorate=this&&this[a106_0x5f44d2(0x204)]||function(_0xe38667,_0x9a7f08,_0x39725a,_0x3f2a7b){const _0x215dd2=a106_0x5f44d2;var _0x1d09c0=arguments[_0x215dd2(0x1c2)],_0x12a744=_0x1d09c0<0x3?_0x9a7f08:_0x3f2a7b===null?_0x3f2a7b=Object[_0x215dd2(0x1fe)](_0x9a7f08,_0x39725a):_0x3f2a7b,_0x42fa60;if(typeof Reflect===_0x215dd2(0x201)&&typeof Reflect[_0x215dd2(0x1c8)]===_0x215dd2(0x1fb))_0x12a744=Reflect['decorate'](_0xe38667,_0x9a7f08,_0x39725a,_0x3f2a7b);else{for(var _0x13b0f4=_0xe38667[_0x215dd2(0x1c2)]-0x1;_0x13b0f4>=0x0;_0x13b0f4--)if(_0x42fa60=_0xe38667[_0x13b0f4])_0x12a744=(_0x1d09c0<0x3?_0x42fa60(_0x12a744):_0x1d09c0>0x3?_0x42fa60(_0x9a7f08,_0x39725a,_0x12a744):_0x42fa60(_0x9a7f08,_0x39725a))||_0x12a744;}return _0x1d09c0>0x3&&_0x12a744&&Object[_0x215dd2(0x1d8)](_0x9a7f08,_0x39725a,_0x12a744),_0x12a744;},__importStar=this&&this[a106_0x5f44d2(0x1cf)]||function(_0x28fce4){const _0x551dfc=a106_0x5f44d2;if(_0x28fce4&&_0x28fce4[_0x551dfc(0x1ea)])return _0x28fce4;var _0x267029={};if(_0x28fce4!=null){for(var _0x1a275f in _0x28fce4)if(_0x1a275f!=='default'&&Object['prototype']['hasOwnProperty'][_0x551dfc(0x1c9)](_0x28fce4,_0x1a275f))__createBinding(_0x267029,_0x28fce4,_0x1a275f);}return __setModuleDefault(_0x267029,_0x28fce4),_0x267029;},__metadata=this&&this[a106_0x5f44d2(0x1f1)]||function(_0x15cda5,_0x536cd2){const _0x412c93=a106_0x5f44d2;if(typeof Reflect===_0x412c93(0x201)&&typeof Reflect[_0x412c93(0x1e2)]===_0x412c93(0x1fb))return Reflect[_0x412c93(0x1e2)](_0x15cda5,_0x536cd2);};Object[a106_0x5f44d2(0x1d8)](exports,a106_0x5f44d2(0x1ea),{'value':!![]}),exports[a106_0x5f44d2(0x1d4)]=void 0x0;const errors_1=require('../../../constants/errors'),bad_request_error_1=require(a106_0x5f44d2(0x1cb)),fs_internal_1=require(a106_0x5f44d2(0x1f9)),git_internal_1=require(a106_0x5f44d2(0x1c0)),salesforce_service_1=require(a106_0x5f44d2(0x1f7)),sfdx_file_converter_1=require(a106_0x5f44d2(0x1e6)),git_provider_manager_1=require('../../shared/git-provider.manager'),auth_settings_service_1=require('../../shared/services/auth-settings.service'),path_1=require(a106_0x5f44d2(0x1dc)),typedi_1=__importStar(require('typedi')),job_1=require(a106_0x5f44d2(0x1eb));let FlosumCommitJob=class FlosumCommitJob extends job_1[a106_0x5f44d2(0x1f0)]{constructor(_0x10284e,_0x1234b3){const _0x32a2fc=a106_0x5f44d2;super(),this['authSettings']=_0x10284e,this[_0x32a2fc(0x1d5)]=_0x1234b3,this[_0x32a2fc(0x1f4)]=0x64,this['FILES_PER_TICK']=0xa;}get[a106_0x5f44d2(0x1bd)](){const {username:_0x4fa679,token:_0x436772}=this['authSettings']['authData'];return _0x4fa679+':'+_0x436772+'@';}get[a106_0x5f44d2(0x200)](){const _0x5a3848=a106_0x5f44d2;var _0x231d5b;return(_0x231d5b=this[_0x5a3848(0x206)])===null||_0x231d5b===void 0x0?void 0x0:_0x231d5b['id'];}async[a106_0x5f44d2(0x1db)](_0x3f123e,_0x4f99ef){const _0x48e355=a106_0x5f44d2,_0xb3021c=[];_0x4f99ef[_0x48e355(0x1e1)](_0x4fe44e=>{const _0x20a3c3=_0x48e355;_0x4fe44e[_0x20a3c3(0x1ec)][_0x20a3c3(0x1e1)](({path:_0x33b2ef,data:_0x2c39a7})=>{const _0x5878ed=_0x20a3c3;_0xb3021c[_0x5878ed(0x1de)](fs_internal_1['FS'][_0x5878ed(0x1ed)](path_1[_0x5878ed(0x1c3)](_0x3f123e,_0x33b2ef),_0x2c39a7));});}),await Promise[_0x48e355(0x1cd)](_0xb3021c);}async[a106_0x5f44d2(0x1ee)](_0x5176c0,_0x541c9d){const _0x4c4546=a106_0x5f44d2,_0x6b52b1=[..._0x541c9d];do{const _0x575209=await this[_0x4c4546(0x1d5)][_0x4c4546(0x1d7)](_0x6b52b1['splice'](0x0,this[_0x4c4546(0x1f4)]));_0x575209['ids']&&_0x6b52b1[_0x4c4546(0x1de)](..._0x575209[_0x4c4546(0x202)]);while(_0x575209[_0x4c4546(0x1bf)]['length']>0x0){const _0x4dcac2=_0x575209[_0x4c4546(0x1bf)][_0x4c4546(0x1e8)](0x0,this['FILES_PER_TICK']),_0x5b2fb0=_0x4dcac2[_0x4c4546(0x1ce)](_0x1629fb=>new sfdx_file_converter_1[(_0x4c4546(0x1f5))](_0x1629fb));await Promise['all'](_0x5b2fb0[_0x4c4546(0x1ce)](_0x43a68a=>_0x43a68a[_0x4c4546(0x1da)]())),await this[_0x4c4546(0x1db)](_0x5176c0,_0x5b2fb0);}if(_0x575209[_0x4c4546(0x1ef)])break;}while(_0x6b52b1[_0x4c4546(0x1c2)]>0x0);}async[a106_0x5f44d2(0x1ff)](_0x2a0775){const _0x14d88c=a106_0x5f44d2,{commitId:_0x436a9a,branch:_0x9f9a61,componentIds:_0xd33874,message:_0x384919}=this['currentJob'][_0x14d88c(0x1bb)],{gitUrl:_0x17f1cc}=_0x2a0775,_0x190cb4=_0x17f1cc['replace'](_0x14d88c(0x205),'https://'+this[_0x14d88c(0x1bd)]),_0x545460=await git_internal_1[_0x14d88c(0x1dd)]['clone'](_0x190cb4,_0x436a9a,_0x9f9a61),{name:_0x55809b,email:_0x4cf5df}=this[_0x14d88c(0x206)][_0x14d88c(0x1bb)][_0x14d88c(0x1f8)];await _0x545460[_0x14d88c(0x1d1)](_0x55809b,_0x4cf5df),await this[_0x14d88c(0x1d5)][_0x14d88c(0x1c1)](),await this[_0x14d88c(0x1ee)](_0x545460[_0x14d88c(0x1e0)],_0xd33874),await _0x545460[_0x14d88c(0x207)]('.'),await _0x545460[_0x14d88c(0x1f3)](_0x384919),await _0x545460[_0x14d88c(0x1de)](_0x9f9a61),this['currentJob']=undefined;}async[a106_0x5f44d2(0x1d2)](_0x31dea9){const _0x1b810d=a106_0x5f44d2;if(this[_0x1b810d(0x206)])throw new bad_request_error_1[(_0x1b810d(0x1bc))](errors_1[_0x1b810d(0x1c7)]);const _0x33638c=typedi_1[_0x1b810d(0x1d3)][_0x1b810d(0x1c4)](git_provider_manager_1['GitProviderManager'])['getRepoService'](),_0xcd7719=await _0x33638c['getOne'](_0x31dea9[_0x1b810d(0x1bb)][_0x1b810d(0x203)]);this[_0x1b810d(0x206)]=_0x31dea9,this['exec'](_0xcd7719);}};FlosumCommitJob=__decorate([typedi_1[a106_0x5f44d2(0x1d9)](),__metadata(a106_0x5f44d2(0x1d6),[auth_settings_service_1[a106_0x5f44d2(0x1fa)],salesforce_service_1[a106_0x5f44d2(0x1f2)]])],FlosumCommitJob),exports['FlosumCommitJob']=FlosumCommitJob;