function a180_0x34c4(_0x4bc7b4,_0x8e3f66){const _0x228c20=a180_0x4287();return a180_0x34c4=function(_0x234e4c,_0x4a6b40){_0x234e4c=_0x234e4c-0xdc;let _0x42871d=_0x228c20[_0x234e4c];return _0x42871d;},a180_0x34c4(_0x4bc7b4,_0x8e3f66);}const a180_0x306853=a180_0x34c4;function a180_0x4287(){const _0x12c4ac=['run','BadRequestError','catch','log','map','getComponentsToWrite','name','deleteAttachment','commitAttachmentId','metadata',']\x20[Repository:\x20','all','branch','../dto/commit-components.dto','updateLastCommit','(((.+)+)+)+$','Service','then','user','FlosumCommitJob','length','../../salesforce/services/salesforce-logger-v2.service','repositoryName','retrieveAttachment','search','gitManager','constructor','repository','../../salesforce/services/salesforce-sync.service','[FLOSUM\x20->\x20GIT]\x20[','../../salesforce/services/salesforce.service','__decorate','GitProviderManager','provider','handleCommitJobError','CommitComponentsDto','SalesforceRetrieverService','trim','SalesforceSyncService','branchName','fetchRepositoryData','design:paramtypes','components','decorate','902007NPDkPa','getRepositoryRecord','SalesforceLogger2','syncRepositoryId','toUpperCase','1873298PssWrG','convertToSFDX','Logger','defineProperty','split','2042844ILkLvX','branches','653882WHHwvD','error','logger','apply','object','getOne','sha','typedi','repo','salesforceService','../../../constants/errors','message','1DXQXGF','sfLogger','getBranchRecord','2505048aifqbD','exec','In\x20Progress','salesforceSync','getLoggerId','190oalagP','__esModule',']\x20[Branch:\x20','commitData','getOwnPropertyDescriptor','Completed','deleteAttachmentId','getCommitDto','setStatus','SalesforceService','getComponentsToDelete','1834705XURvjj','commitJob','../../shared/git-provider.manager','toString','getPrefix','[INFO]\x20Start\x20commit\x20job','4nKGfMT','syncBranchId','ERR_INVALID_SYNC_RECORD_ID','getRepoService','../../salesforce/services/salesforce-retriever.service','updateRemoteState','repositoryData','566937SMZWHf'];a180_0x4287=function(){return _0x12c4ac;};return a180_0x4287();}(function(_0x575951,_0x2dae81){const _0x5a6053=a180_0x34c4,_0xe1e56f=_0x575951();while(!![]){try{const _0x3b99fa=-parseInt(_0x5a6053(0xe7))/0x1*(-parseInt(_0x5a6053(0x140))/0x2)+parseInt(_0x5a6053(0x134))/0x3+parseInt(_0x5a6053(0x100))/0x4*(parseInt(_0x5a6053(0xfa))/0x5)+parseInt(_0x5a6053(0x13e))/0x6+-parseInt(_0x5a6053(0x139))/0x7+parseInt(_0x5a6053(0xea))/0x8+-parseInt(_0x5a6053(0x107))/0x9*(parseInt(_0x5a6053(0xef))/0xa);if(_0x3b99fa===_0x2dae81)break;else _0xe1e56f['push'](_0xe1e56f['shift']());}catch(_0x220fad){_0xe1e56f['push'](_0xe1e56f['shift']());}}}(a180_0x4287,0x2cd7b));const a180_0x4a6b40=function(){let _0x5bd81f=!![];return function(_0x148cb4,_0x225311){const _0x52ff88=_0x5bd81f?function(){const _0x120429=a180_0x34c4;if(_0x225311){const _0x101da3=_0x225311[_0x120429(0xde)](_0x148cb4,arguments);return _0x225311=null,_0x101da3;}}:function(){};return _0x5bd81f=![],_0x52ff88;};}(),a180_0x234e4c=a180_0x4a6b40(this,function(){const _0x2da3e4=a180_0x34c4;return a180_0x234e4c[_0x2da3e4(0xfd)]()[_0x2da3e4(0x120)](_0x2da3e4(0x117))[_0x2da3e4(0xfd)]()[_0x2da3e4(0x122)](a180_0x234e4c)['search'](_0x2da3e4(0x117));});a180_0x234e4c();'use strict';var __decorate=this&&this[a180_0x306853(0x127)]||function(_0x52bc8c,_0x2cc84c,_0xbd851b,_0x4ffcda){const _0x2b9b3c=a180_0x306853;var _0x67abb2=arguments[_0x2b9b3c(0x11c)],_0x31f086=_0x67abb2<0x3?_0x2cc84c:_0x4ffcda===null?_0x4ffcda=Object[_0x2b9b3c(0xf3)](_0x2cc84c,_0xbd851b):_0x4ffcda,_0x16d386;if(typeof Reflect===_0x2b9b3c(0xdf)&&typeof Reflect[_0x2b9b3c(0x133)]==='function')_0x31f086=Reflect['decorate'](_0x52bc8c,_0x2cc84c,_0xbd851b,_0x4ffcda);else{for(var _0x7658f7=_0x52bc8c[_0x2b9b3c(0x11c)]-0x1;_0x7658f7>=0x0;_0x7658f7--)if(_0x16d386=_0x52bc8c[_0x7658f7])_0x31f086=(_0x67abb2<0x3?_0x16d386(_0x31f086):_0x67abb2>0x3?_0x16d386(_0x2cc84c,_0xbd851b,_0x31f086):_0x16d386(_0x2cc84c,_0xbd851b))||_0x31f086;}return _0x67abb2>0x3&&_0x31f086&&Object[_0x2b9b3c(0x13c)](_0x2cc84c,_0xbd851b,_0x31f086),_0x31f086;},__metadata=this&&this['__metadata']||function(_0x5a690c,_0x25f179){const _0x168839=a180_0x306853;if(typeof Reflect===_0x168839(0xdf)&&typeof Reflect[_0x168839(0x111)]==='function')return Reflect['metadata'](_0x5a690c,_0x25f179);},FlosumCommitJob_1;Object[a180_0x306853(0x13c)](exports,a180_0x306853(0xf0),{'value':!![]}),exports['FlosumCommitJob']=void 0x0;const core_1=require('../../../core'),salesforce_logger_v2_service_1=require(a180_0x306853(0x11d)),salesforce_service_1=require(a180_0x306853(0x126)),git_provider_manager_1=require(a180_0x306853(0xfc)),typedi_1=require(a180_0x306853(0xe2)),errors_1=require(a180_0x306853(0xe5)),bad_request_error_1=require('../../../core/errors/bad-request.error'),salesforce_retriever_service_1=require(a180_0x306853(0x104)),salesforce_sync_service_1=require(a180_0x306853(0x124)),commit_components_dto_1=require(a180_0x306853(0x115)),commit_components_job_1=require('./commit-components.job');let FlosumCommitJob=FlosumCommitJob_1=class FlosumCommitJob{constructor(_0x4ceaac,_0x8189dc,_0x21a7d7,_0x14880f){const _0x46d1cc=a180_0x306853;this['salesforceService']=_0x4ceaac,this['commitJob']=_0x8189dc,this[_0x46d1cc(0xed)]=_0x21a7d7,this['gitManager']=_0x14880f,this['repoService']=this[_0x46d1cc(0x121)][_0x46d1cc(0x103)](),this[_0x46d1cc(0xdd)]=new core_1[(_0x46d1cc(0x13b))](FlosumCommitJob_1['name']);}async[a180_0x306853(0x130)](){const _0x19c4b8=a180_0x306853;try{if(this['commitData'][_0x19c4b8(0x137)])this[_0x19c4b8(0x106)]=await this[_0x19c4b8(0xed)][_0x19c4b8(0x135)](this['commitData'][_0x19c4b8(0x137)]);else this['commitData']['syncBranchId']&&(this[_0x19c4b8(0x106)]=await this[_0x19c4b8(0xed)][_0x19c4b8(0xe9)](this[_0x19c4b8(0xf2)][_0x19c4b8(0x101)]));}catch(_0x2f61a6){throw new bad_request_error_1['BadRequestError'](errors_1[_0x19c4b8(0x102)]);}}async[a180_0x306853(0x10d)](){const _0x4564b3=a180_0x306853;if(!this[_0x4564b3(0xf2)]['commitAttachmentId'])return[];const _0x145959=await this[_0x4564b3(0xe4)][_0x4564b3(0x11f)](this[_0x4564b3(0xf2)]['commitAttachmentId'])[_0x4564b3(0x119)](_0x58173b=>_0x58173b[_0x4564b3(0x13d)]('\x20')[_0x4564b3(0x10c)](_0x2e5606=>_0x2e5606[_0x4564b3(0x12d)]())),_0x3ad52c=new salesforce_retriever_service_1[(_0x4564b3(0x12c))](this[_0x4564b3(0xe4)]),_0x10fd47=await _0x3ad52c[_0x4564b3(0x108)](_0x145959);return _0x10fd47;}async['getComponentsToDelete'](){const _0xeee893=a180_0x306853;if(!this[_0xeee893(0xf2)][_0xeee893(0xf5)])return[];const _0x1adc16=await this[_0xeee893(0xe4)][_0xeee893(0x11f)](this['commitData']['deleteAttachmentId']);return _0x1adc16;}async['getCommitDto'](){const _0x5743f6=a180_0x306853,_0x41aa61=new commit_components_dto_1[(_0x5743f6(0x12b))](),[_0x3aae48,_0x26f868]=await Promise[_0x5743f6(0x113)]([this['getComponentsToWrite'](),this[_0x5743f6(0xf9)]()]);return _0x41aa61[_0x5743f6(0xe6)]=this[_0x5743f6(0xf2)][_0x5743f6(0xe6)],_0x41aa61[_0x5743f6(0x11a)]=this[_0x5743f6(0xf2)][_0x5743f6(0x11a)],_0x41aa61[_0x5743f6(0x132)]={'writed':_0x3aae48,'deleted':_0x26f868},_0x41aa61[_0x5743f6(0x13a)]=this[_0x5743f6(0xf2)][_0x5743f6(0x13a)],_0x41aa61[_0x5743f6(0xe3)]=this[_0x5743f6(0x123)],_0x41aa61[_0x5743f6(0x114)]=this[_0x5743f6(0x114)],_0x41aa61['provider']=this[_0x5743f6(0x129)],_0x41aa61;}async['updateLastCommit'](_0x1c2281=![]){const _0xf92e48=a180_0x306853;if(_0x1c2281)await this[_0xf92e48(0xed)]['updateRemoteState'](this[_0xf92e48(0x106)],{});else{const _0x56e723=await this[_0xf92e48(0x123)][_0xf92e48(0x13f)]['getOne'](this[_0xf92e48(0x114)][_0xf92e48(0x10e)]);this[_0xf92e48(0xe8)][_0xf92e48(0x10b)]('[INFO]\x20Update\x20remote\x20state.');const _0x45eab1={[this[_0xf92e48(0x123)]['gitUrl']]:{'lastCommit':_0x56e723[_0xf92e48(0xe1)]}};await this[_0xf92e48(0xed)][_0xf92e48(0x105)](this[_0xf92e48(0x106)],_0x45eab1);}}async['exec'](){const _0x29d838=a180_0x306853,_0x3dbd66=await this[_0x29d838(0xf6)]();await this[_0x29d838(0xed)][_0x29d838(0xf7)](this[_0x29d838(0x106)],_0x29d838(0xec)),await this[_0x29d838(0xfb)][_0x29d838(0x108)](_0x3dbd66,this['sfLogger']),await this[_0x29d838(0x116)](),this[_0x29d838(0xf2)][_0x29d838(0x110)]&&await this[_0x29d838(0xe4)][_0x29d838(0x10f)](this[_0x29d838(0xf2)]['commitAttachmentId']),this['commitData'][_0x29d838(0xf5)]&&await this[_0x29d838(0xe4)]['deleteAttachment'](this[_0x29d838(0xf2)][_0x29d838(0xf5)]),await this[_0x29d838(0xed)][_0x29d838(0xf7)](this['repositoryData'],_0x29d838(0xf4));}async['handleCommitJobError'](_0x3c1e31){const _0x4413fb=a180_0x306853;try{this[_0x4413fb(0xe8)][_0x4413fb(0x10b)]('[ERROR]\x20'+_0x3c1e31),await this['sfLogger']['send'](),await this[_0x4413fb(0x116)](!![]),await this[_0x4413fb(0xed)][_0x4413fb(0xf7)](this[_0x4413fb(0x106)],'Error');}catch(_0x9f40ce){this['logger'][_0x4413fb(0xdc)](_0x9f40ce);}}async['run'](_0x1ca2ee,_0x3bd016,_0x2a602c){const _0x1ed5e2=a180_0x306853;try{this[_0x1ed5e2(0xf2)]=_0x1ca2ee,this[_0x1ed5e2(0x129)]=_0x2a602c,await this[_0x1ed5e2(0x130)](),this[_0x1ed5e2(0x123)]=await this['repoService'][_0x1ed5e2(0xe0)](this[_0x1ed5e2(0x106)]['repositoryName']),this[_0x1ed5e2(0x114)]=await this[_0x1ed5e2(0x123)][_0x1ed5e2(0x13f)][_0x1ed5e2(0xe0)](this[_0x1ed5e2(0x106)][_0x1ed5e2(0x12f)]),this['sfLogger']=new salesforce_logger_v2_service_1[(_0x1ed5e2(0x136))](_0x3bd016[_0x1ed5e2(0xee)](),(_0x3bd016[_0x1ed5e2(0xfe)]()||_0x1ed5e2(0x125)+_0x2a602c[_0x1ed5e2(0x138)]()+_0x1ed5e2(0x112)+this[_0x1ed5e2(0x106)][_0x1ed5e2(0x11e)]+_0x1ed5e2(0xf1)+this[_0x1ed5e2(0x106)]['branchName']+']')+'\x20['+FlosumCommitJob_1[_0x1ed5e2(0x10e)]+']');if(!this['repositoryData'])throw new bad_request_error_1[(_0x1ed5e2(0x109))](errors_1['ERR_UNKNOWN_SYNC_RECORD_ID']);await this['sfLogger'][_0x1ed5e2(0x10b)](_0x1ed5e2(0xff))['send'](),this[_0x1ed5e2(0xeb)]()[_0x1ed5e2(0x10a)](_0xd957cf=>this[_0x1ed5e2(0x12a)](_0xd957cf));}catch(_0x1fe093){this[_0x1ed5e2(0xf2)]=undefined,this[_0x1ed5e2(0xdd)][_0x1ed5e2(0xdc)](_0x1fe093);throw _0x1fe093;}}};FlosumCommitJob=FlosumCommitJob_1=__decorate([typedi_1[a180_0x306853(0x118)]({'transient':!![]}),__metadata(a180_0x306853(0x131),[salesforce_service_1[a180_0x306853(0xf8)],commit_components_job_1['CommitComponentsJob'],salesforce_sync_service_1[a180_0x306853(0x12e)],git_provider_manager_1[a180_0x306853(0x128)]])],FlosumCommitJob),exports[a180_0x306853(0x11b)]=FlosumCommitJob;