const a140_0x1c2319=a140_0x3694;(function(_0xe6dab8,_0xe09066){const _0xd6c163=a140_0x3694,_0x4206c8=_0xe6dab8();while(!![]){try{const _0x40e9f0=parseInt(_0xd6c163(0x22d))/0x1*(parseInt(_0xd6c163(0x20c))/0x2)+parseInt(_0xd6c163(0x1e7))/0x3*(parseInt(_0xd6c163(0x1f7))/0x4)+-parseInt(_0xd6c163(0x1fd))/0x5*(parseInt(_0xd6c163(0x1fa))/0x6)+parseInt(_0xd6c163(0x223))/0x7*(parseInt(_0xd6c163(0x1ff))/0x8)+-parseInt(_0xd6c163(0x1e4))/0x9+parseInt(_0xd6c163(0x233))/0xa+parseInt(_0xd6c163(0x1ec))/0xb;if(_0x40e9f0===_0xe09066)break;else _0x4206c8['push'](_0x4206c8['shift']());}catch(_0x398134){_0x4206c8['push'](_0x4206c8['shift']());}}}(a140_0x34cd,0xe2704));const a140_0x50ccd8=function(){let _0x2542f4=!![];return function(_0x13b687,_0x2e032a){const _0x5ca0de=_0x2542f4?function(){const _0x2ada2e=a140_0x3694;if(_0x2e032a){const _0x49023a=_0x2e032a[_0x2ada2e(0x210)](_0x13b687,arguments);return _0x2e032a=null,_0x49023a;}}:function(){};return _0x2542f4=![],_0x5ca0de;};}(),a140_0x57b673=a140_0x50ccd8(this,function(){const _0x113bc1=a140_0x3694;return a140_0x57b673['toString']()['search'](_0x113bc1(0x213))[_0x113bc1(0x1f2)]()[_0x113bc1(0x238)](a140_0x57b673)[_0x113bc1(0x1f8)](_0x113bc1(0x213));});a140_0x57b673();'use strict';var __decorate=this&&this[a140_0x1c2319(0x1fc)]||function(_0x2dc50b,_0x1b5eb4,_0x9bd829,_0x5316ea){const _0x3d5b6c=a140_0x1c2319;var _0x3fe77a=arguments[_0x3d5b6c(0x22e)],_0x3a3c71=_0x3fe77a<0x3?_0x1b5eb4:_0x5316ea===null?_0x5316ea=Object[_0x3d5b6c(0x201)](_0x1b5eb4,_0x9bd829):_0x5316ea,_0x4f93eb;if(typeof Reflect===_0x3d5b6c(0x1dc)&&typeof Reflect[_0x3d5b6c(0x200)]===_0x3d5b6c(0x229))_0x3a3c71=Reflect[_0x3d5b6c(0x200)](_0x2dc50b,_0x1b5eb4,_0x9bd829,_0x5316ea);else{for(var _0xa459e7=_0x2dc50b[_0x3d5b6c(0x22e)]-0x1;_0xa459e7>=0x0;_0xa459e7--)if(_0x4f93eb=_0x2dc50b[_0xa459e7])_0x3a3c71=(_0x3fe77a<0x3?_0x4f93eb(_0x3a3c71):_0x3fe77a>0x3?_0x4f93eb(_0x1b5eb4,_0x9bd829,_0x3a3c71):_0x4f93eb(_0x1b5eb4,_0x9bd829))||_0x3a3c71;}return _0x3fe77a>0x3&&_0x3a3c71&&Object[_0x3d5b6c(0x1e8)](_0x1b5eb4,_0x9bd829,_0x3a3c71),_0x3a3c71;},__metadata=this&&this[a140_0x1c2319(0x1f5)]||function(_0x55c8e5,_0x277003){const _0x3b729=a140_0x1c2319;if(typeof Reflect===_0x3b729(0x1dc)&&typeof Reflect['metadata']===_0x3b729(0x229))return Reflect[_0x3b729(0x1d8)](_0x55c8e5,_0x277003);};function a140_0x34cd(){const _0xd551a5=['253043lMQSkD','SalesforceSyncService','../../salesforce/services/salesforce.service','repository','ERR_INVALID_SYNC_RECORD_ID','typedi','function','syncBranchId','updateLastCommit','syncRepositoryId','469749cOLoii','length','ERR_UNKNOWN_SYNC_RECORD_ID','attachmentId','exec','Completed','1203270yCjLAc','getAttachmentIdByParent','log',']\x20[Repository:\x20',']\x20[Branch:\x20','constructor','gitUrl','metadata','repositoryName','SalesforceRetrieverService','then','object','FlosumCommitJob','catch','BadRequestError','branchName','message','map','getRepositoryRecord','5875047bvFgHE','../../../core/errors/bad-request.error','getLogger','9qaQJXy','defineProperty','logger','trim','user','22016005wxolHE','CommitComponentsDto','getBranchRecord','repositoryData','branch','salesforceService','toString','../../../constants/errors','objectId','__metadata','setStatus','464268itvBGn','search','salesforceSync','11688SCyKaz','In\x20Progress','__decorate','4510NNSpFA','../../shared/git-provider.manager','88fFcuaJ','decorate','getOwnPropertyDescriptor','name','convertToSFDX','retrieveAttachment','setLoggerId','[INFO]\x20Start\x20commit\x20job','commitData','run','__esModule','[ERROR]\x20','repo','2YqFMMV','../../salesforce/services/salesforce-retriever.service','getCommitDto','split','apply','gitManager','provider','(((.+)+)+)+$','GitProviderManager','retriever','SalesforceService','getRepoService','fetchRepositoryData','toUpperCase','getOne','patchObject','branches','send','repoService','Service','commitJob','../../shared/utils','CommitComponentsJob'];a140_0x34cd=function(){return _0xd551a5;};return a140_0x34cd();}Object[a140_0x1c2319(0x1e8)](exports,a140_0x1c2319(0x209),{'value':!![]}),exports[a140_0x1c2319(0x1dd)]=void 0x0;const salesforce_service_1=require(a140_0x1c2319(0x225)),git_provider_manager_1=require(a140_0x1c2319(0x1fe)),typedi_1=require(a140_0x1c2319(0x228)),errors_1=require(a140_0x1c2319(0x1f3)),bad_request_error_1=require(a140_0x1c2319(0x1e5)),salesforce_retriever_service_1=require(a140_0x1c2319(0x20d)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),utils_1=require(a140_0x1c2319(0x221)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let FlosumCommitJob=class FlosumCommitJob{constructor(_0x64c33e,_0x104add,_0x1fd8f1,_0x4ff7e1){const _0x211b7d=a140_0x1c2319;this[_0x211b7d(0x1f1)]=_0x64c33e,this['commitJob']=_0x104add,this['salesforceSync']=_0x1fd8f1,this[_0x211b7d(0x211)]=_0x4ff7e1,this['repoService']=this['gitManager'][_0x211b7d(0x217)](),_0x104add[_0x211b7d(0x215)]=new salesforce_retriever_service_1[(_0x211b7d(0x1da))](this[_0x211b7d(0x1f1)]);}['log'](_0x1bbcd6){const _0x41923a=a140_0x1c2319;return this[_0x41923a(0x1e9)][_0x41923a(0x235)]('[COMMIT]\x20['+this[_0x41923a(0x211)][_0x41923a(0x212)][_0x41923a(0x219)]()+_0x41923a(0x236)+this[_0x41923a(0x226)][_0x41923a(0x202)]+_0x41923a(0x237)+this['branch']['name']+']\x20'+_0x1bbcd6);}async[a140_0x1c2319(0x218)](){const _0x92b5f7=a140_0x1c2319;try{if(this['commitData']['syncRepositoryId'])this['repositoryData']=await this[_0x92b5f7(0x1f9)][_0x92b5f7(0x1e3)](this['commitData'][_0x92b5f7(0x22c)]);else this[_0x92b5f7(0x207)][_0x92b5f7(0x22a)]&&(this[_0x92b5f7(0x1ef)]=await this[_0x92b5f7(0x1f9)][_0x92b5f7(0x1ee)](this[_0x92b5f7(0x207)][_0x92b5f7(0x22a)]));}catch(_0x3df8df){throw new bad_request_error_1[(_0x92b5f7(0x1df))](errors_1[_0x92b5f7(0x227)]);}}async[a140_0x1c2319(0x20e)](){const _0x537149=a140_0x1c2319,_0x287f03=new commit_components_dto_1[(_0x537149(0x1ed))](),_0x52bde1=await this['salesforceService'][_0x537149(0x204)](this[_0x537149(0x207)]['attachmentId'])[_0x537149(0x1db)](_0x57ca1f=>_0x57ca1f[_0x537149(0x20f)]('\x20')[_0x537149(0x1e2)](_0x3a4e19=>_0x3a4e19[_0x537149(0x1ea)]()));return _0x287f03['message']=this[_0x537149(0x207)][_0x537149(0x1e1)],_0x287f03['user']=this[_0x537149(0x207)][_0x537149(0x1eb)],_0x287f03['componentsIds']=_0x52bde1,_0x287f03[_0x537149(0x203)]=this[_0x537149(0x207)][_0x537149(0x203)],_0x287f03[_0x537149(0x20b)]=this[_0x537149(0x226)],_0x287f03['branch']=this[_0x537149(0x1f0)],_0x287f03;}async[a140_0x1c2319(0x22b)](){const _0x41ad79=a140_0x1c2319,_0x1288ed=await this[_0x41ad79(0x226)][_0x41ad79(0x21c)]['getOne'](this[_0x41ad79(0x1f0)][_0x41ad79(0x202)]);this[_0x41ad79(0x235)]('[INFO]\x20Update\x20remote\x20state.');const _0x51c2a1=await this[_0x41ad79(0x1f9)][_0x41ad79(0x234)](this[_0x41ad79(0x1ef)][_0x41ad79(0x1f4)]),_0x4c14c8={[this[_0x41ad79(0x226)][_0x41ad79(0x239)]]:{'lastCommit':_0x1288ed['sha']}};await this[_0x41ad79(0x1f1)][_0x41ad79(0x21b)]('Attachment',_0x51c2a1,{'Body':utils_1['encodeBase64'](JSON['stringify'](_0x4c14c8))});}async[a140_0x1c2319(0x231)](){const _0x7e7a82=a140_0x1c2319,_0x4a3bfd=await this[_0x7e7a82(0x20e)]();this[_0x7e7a82(0x220)]['logger']=this[_0x7e7a82(0x1e9)],await this[_0x7e7a82(0x1f9)][_0x7e7a82(0x1f6)](this[_0x7e7a82(0x1ef)],_0x7e7a82(0x1fb)),await this['commitJob'][_0x7e7a82(0x208)](_0x4a3bfd),await this[_0x7e7a82(0x22b)](),await this[_0x7e7a82(0x1f1)]['deleteAttachment'](this[_0x7e7a82(0x207)][_0x7e7a82(0x230)]),await this[_0x7e7a82(0x1f9)][_0x7e7a82(0x1f6)](this[_0x7e7a82(0x1ef)],_0x7e7a82(0x232));}async[a140_0x1c2319(0x208)](_0x3ac595,_0x8b8d0b){const _0x1b0e0b=a140_0x1c2319;try{this[_0x1b0e0b(0x207)]=_0x3ac595,this[_0x1b0e0b(0x1f1)][_0x1b0e0b(0x205)](_0x8b8d0b),this['logger']=this[_0x1b0e0b(0x1f1)][_0x1b0e0b(0x1e6)](),await this[_0x1b0e0b(0x218)]();if(!this[_0x1b0e0b(0x1ef)])throw new bad_request_error_1[(_0x1b0e0b(0x1df))](errors_1[_0x1b0e0b(0x22f)]);this['repository']=await this[_0x1b0e0b(0x21e)][_0x1b0e0b(0x21a)](this[_0x1b0e0b(0x1ef)][_0x1b0e0b(0x1d9)]),this[_0x1b0e0b(0x1f0)]=await this[_0x1b0e0b(0x226)]['branches'][_0x1b0e0b(0x21a)](this[_0x1b0e0b(0x1ef)][_0x1b0e0b(0x1e0)]),this[_0x1b0e0b(0x235)](_0x1b0e0b(0x206)),this[_0x1b0e0b(0x231)]()[_0x1b0e0b(0x1de)](_0xa1e831=>{const _0xed51cd=_0x1b0e0b;return this[_0xed51cd(0x235)](_0xed51cd(0x20a)+(_0xa1e831[_0xed51cd(0x1e1)]||_0xa1e831)),this['logger'][_0xed51cd(0x21d)]();});}catch(_0x1d2dfc){this[_0x1b0e0b(0x207)]=undefined;throw _0x1d2dfc;}}};function a140_0x3694(_0x161e10,_0x28eddf){const _0x21b80=a140_0x34cd();return a140_0x3694=function(_0x57b673,_0x50ccd8){_0x57b673=_0x57b673-0x1d8;let _0x34cd57=_0x21b80[_0x57b673];return _0x34cd57;},a140_0x3694(_0x161e10,_0x28eddf);}FlosumCommitJob=__decorate([typedi_1[a140_0x1c2319(0x21f)]({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1[a140_0x1c2319(0x216)],commit_components_job_1[a140_0x1c2319(0x222)],salesforce_sync_service_1[a140_0x1c2319(0x224)],git_provider_manager_1[a140_0x1c2319(0x214)]])],FlosumCommitJob),exports[a140_0x1c2319(0x1dd)]=FlosumCommitJob;