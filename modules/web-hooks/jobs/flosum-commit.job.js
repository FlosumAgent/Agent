const a139_0x3ed2=['syncRepositoryId','typedi','8tGwLbZ','trim','SalesforceService','retriever','toUpperCase','provider','gitManager','ERR_INVALID_SYNC_RECORD_ID','catch','setStatus','../../../core/errors/bad-request.error','1MCNcwU','repositoryData','branchName','branches','[ERROR]\x20','122226fcLtQT','syncBranchId','401628vHAiqs','metadata','Service','apply','constructor','commitData','../../salesforce/services/salesforce-retriever.service','attachmentId','getCommitDto','deleteAttachment','1083OHbcGi','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../salesforce/services/salesforce-sync.service','../../shared/utils','patchObject','[INFO]\x20Start\x20commit\x20job','salesforceService','SalesforceRetrieverService','177OWfiwv','sfLogger','updateLastCommit','repositoryName','gitUrl','objectId','203141fSbBjj','design:paramtypes','log','repo','getAttachmentIdByParent','Completed','fetchRepositoryData','function','retrieveAttachment','CommitComponentsDto','user','convertToSFDX','127163eEPrXL','commitJob','../../../constants/errors','setLoggerId','length','getBranchRecord','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','run','name','exec','branch',']\x20[Branch:\x20','encodeBase64','[INFO]\x20Update\x20remote\x20state.','message','salesforceSync','sha','repoService','../dto/commit-components.dto','63692ZvgwPo','1tFxGZz','BadRequestError','decorate','../../salesforce/services/salesforce.service','__metadata','repository','../../shared/git-provider.manager','getOne','[COMMIT]\x20[','GitProviderManager','stringify','getOwnPropertyDescriptor','FlosumCommitJob','object','841bYskdR','4JxJdnI','test','defineProperty','CommitComponentsJob'];function a139_0x1741(_0x3d9a4c,_0x27bd36){return a139_0x1741=function(_0x1778b2,_0x45557f){_0x1778b2=_0x1778b2-0x168;let _0x35836f=a139_0x3ed2[_0x1778b2];return _0x35836f;},a139_0x1741(_0x3d9a4c,_0x27bd36);}const a139_0xaa4d=a139_0x1741;(function(_0x2c7402,_0x47ffed){const _0x35e0cf=a139_0x1741;while(!![]){try{const _0x5f318d=parseInt(_0x35e0cf(0x1be))*-parseInt(_0x35e0cf(0x1c6))+-parseInt(_0x35e0cf(0x1b2))+parseInt(_0x35e0cf(0x179))*parseInt(_0x35e0cf(0x18d))+-parseInt(_0x35e0cf(0x16d))+parseInt(_0x35e0cf(0x1a2))*parseInt(_0x35e0cf(0x19b))+parseInt(_0x35e0cf(0x1ad))*parseInt(_0x35e0cf(0x1b4))+parseInt(_0x35e0cf(0x18c))*parseInt(_0x35e0cf(0x19c));if(_0x5f318d===_0x47ffed)break;else _0x2c7402['push'](_0x2c7402['shift']());}catch(_0x3a1fcc){_0x2c7402['push'](_0x2c7402['shift']());}}}(a139_0x3ed2,0x42b4d));const a139_0x35836f=function(){let _0x3a3a07=!![];return function(_0x5b27bb,_0xcef015){const _0x5d8772=_0x3a3a07?function(){const _0x202cf3=a139_0x1741;if(_0xcef015){const _0xbd073=_0xcef015[_0x202cf3(0x1b7)](_0x5b27bb,arguments);return _0xcef015=null,_0xbd073;}}:function(){};return _0x3a3a07=![],_0x5d8772;};}(),a139_0x45557f=a139_0x35836f(this,function(){const _0x51928c=function(){const _0x117f03=a139_0x1741,_0x1aa9db=_0x51928c[_0x117f03(0x1b8)](_0x117f03(0x1bf))()[_0x117f03(0x1b8)](_0x117f03(0x17f));return!_0x1aa9db[_0x117f03(0x19d)](a139_0x45557f);};return _0x51928c();});a139_0x45557f();'use strict';var __decorate=this&&this['__decorate']||function(_0x1f6244,_0x1b7f0a,_0x2558d5,_0x4a4694){const _0x4eeed8=a139_0x1741;var _0x526ddf=arguments[_0x4eeed8(0x17d)],_0x3c2a69=_0x526ddf<0x3?_0x1b7f0a:_0x4a4694===null?_0x4a4694=Object[_0x4eeed8(0x198)](_0x1b7f0a,_0x2558d5):_0x4a4694,_0x259780;if(typeof Reflect===_0x4eeed8(0x19a)&&typeof Reflect[_0x4eeed8(0x18f)]===_0x4eeed8(0x174))_0x3c2a69=Reflect[_0x4eeed8(0x18f)](_0x1f6244,_0x1b7f0a,_0x2558d5,_0x4a4694);else{for(var _0x594b0f=_0x1f6244[_0x4eeed8(0x17d)]-0x1;_0x594b0f>=0x0;_0x594b0f--)if(_0x259780=_0x1f6244[_0x594b0f])_0x3c2a69=(_0x526ddf<0x3?_0x259780(_0x3c2a69):_0x526ddf>0x3?_0x259780(_0x1b7f0a,_0x2558d5,_0x3c2a69):_0x259780(_0x1b7f0a,_0x2558d5))||_0x3c2a69;}return _0x526ddf>0x3&&_0x3c2a69&&Object[_0x4eeed8(0x19e)](_0x1b7f0a,_0x2558d5,_0x3c2a69),_0x3c2a69;},__metadata=this&&this[a139_0xaa4d(0x191)]||function(_0x326bc9,_0x5d89d9){const _0x5ddac0=a139_0xaa4d;if(typeof Reflect==='object'&&typeof Reflect[_0x5ddac0(0x1b5)]==='function')return Reflect[_0x5ddac0(0x1b5)](_0x326bc9,_0x5d89d9);};Object[a139_0xaa4d(0x19e)](exports,'__esModule',{'value':!![]}),exports[a139_0xaa4d(0x199)]=void 0x0;const salesforce_service_1=require(a139_0xaa4d(0x190)),git_provider_manager_1=require(a139_0xaa4d(0x193)),typedi_1=require(a139_0xaa4d(0x1a1)),errors_1=require(a139_0xaa4d(0x17b)),bad_request_error_1=require(a139_0xaa4d(0x1ac)),salesforce_retriever_service_1=require(a139_0xaa4d(0x1ba)),salesforce_sync_service_1=require(a139_0xaa4d(0x1c0)),utils_1=require(a139_0xaa4d(0x1c1)),commit_components_dto_1=require(a139_0xaa4d(0x18b)),commit_components_job_1=require('./commit-components.job');let FlosumCommitJob=class FlosumCommitJob{constructor(_0x36f9b6,_0x214957,_0x3f032f,_0x383ac5){const _0x31a194=a139_0xaa4d;this[_0x31a194(0x1c4)]=_0x36f9b6,this['commitJob']=_0x214957,this[_0x31a194(0x188)]=_0x3f032f,this[_0x31a194(0x1a8)]=_0x383ac5,this[_0x31a194(0x18a)]=this[_0x31a194(0x1a8)]['getRepoService'](),_0x214957[_0x31a194(0x1a5)]=new salesforce_retriever_service_1[(_0x31a194(0x1c5))](this[_0x31a194(0x1c4)]),_0x214957['on'](_0x31a194(0x16f),_0xfc839e=>this[_0x31a194(0x168)](_0xfc839e));}async[a139_0xaa4d(0x168)](_0x2142e0){const _0x57a0ee=a139_0xaa4d;return this[_0x57a0ee(0x1c4)]['sendLog'](_0x57a0ee(0x195)+this[_0x57a0ee(0x1a8)][_0x57a0ee(0x1a7)][_0x57a0ee(0x1a6)]()+']\x20[Repository:\x20'+this[_0x57a0ee(0x192)][_0x57a0ee(0x181)]+_0x57a0ee(0x184)+this[_0x57a0ee(0x183)][_0x57a0ee(0x181)]+']\x20'+_0x2142e0);}async['fetchRepositoryData'](){const _0x258361=a139_0xaa4d;try{if(this['commitData'][_0x258361(0x1a0)])this[_0x258361(0x1ae)]=await this[_0x258361(0x188)]['getRepositoryRecord'](this[_0x258361(0x1b9)]['syncRepositoryId']);else this['commitData'][_0x258361(0x1b3)]&&(this[_0x258361(0x1ae)]=await this['salesforceSync'][_0x258361(0x17e)](this['commitData'][_0x258361(0x1b3)]));}catch(_0x23b918){throw new bad_request_error_1[(_0x258361(0x18e))](errors_1[_0x258361(0x1a9)]);}}async['getCommitDto'](){const _0x536cb6=a139_0xaa4d,_0x24eecc=new commit_components_dto_1[(_0x536cb6(0x176))](),_0x14821d=await this['salesforceService'][_0x536cb6(0x175)](this['commitData'][_0x536cb6(0x1bb)])['then'](_0x2c0d46=>_0x2c0d46['split']('\x20')['map'](_0x5e43c0=>_0x5e43c0[_0x536cb6(0x1a3)]()));return _0x24eecc[_0x536cb6(0x187)]=this['commitData'][_0x536cb6(0x187)],_0x24eecc[_0x536cb6(0x177)]=this['commitData'][_0x536cb6(0x177)],_0x24eecc['componentsIds']=_0x14821d,_0x24eecc[_0x536cb6(0x178)]=this['commitData'][_0x536cb6(0x178)],_0x24eecc[_0x536cb6(0x170)]=this['repository'],_0x24eecc[_0x536cb6(0x183)]=this['branch'],_0x24eecc;}async[a139_0xaa4d(0x169)](){const _0x87448=a139_0xaa4d,_0x4f6e2a=await this[_0x87448(0x192)][_0x87448(0x1b0)]['getOne'](this['branch'][_0x87448(0x181)]);await this[_0x87448(0x168)](_0x87448(0x186));const _0x39d7cd=await this[_0x87448(0x188)][_0x87448(0x171)](this['repositoryData'][_0x87448(0x16c)]),_0x114eac={[this[_0x87448(0x192)][_0x87448(0x16b)]]:{'lastCommit':_0x4f6e2a[_0x87448(0x189)]}};await this[_0x87448(0x1c4)][_0x87448(0x1c2)]('Attachment',_0x39d7cd,{'Body':utils_1[_0x87448(0x185)](JSON[_0x87448(0x197)](_0x114eac))});}async[a139_0xaa4d(0x182)](){const _0x492276=a139_0xaa4d,_0x4c35a0=await this[_0x492276(0x1bc)]();await this[_0x492276(0x188)]['setStatus'](this[_0x492276(0x1ae)],'In\x20Progress'),await this[_0x492276(0x17a)][_0x492276(0x180)](_0x4c35a0),await this[_0x492276(0x169)](),await this[_0x492276(0x1c4)][_0x492276(0x1bd)](this[_0x492276(0x1b9)][_0x492276(0x1bb)]),await this[_0x492276(0x188)][_0x492276(0x1ab)](this['repositoryData'],_0x492276(0x172));}async[a139_0xaa4d(0x180)](_0x30b3b7,_0x4c5ebf){const _0x36135b=a139_0xaa4d;try{this[_0x36135b(0x1b9)]=_0x30b3b7,this['salesforceService'][_0x36135b(0x17c)](_0x4c5ebf),await this[_0x36135b(0x173)]();if(!this['repositoryData'])throw new bad_request_error_1[(_0x36135b(0x18e))](errors_1['ERR_UNKNOWN_SYNC_RECORD_ID']);this['repository']=await this[_0x36135b(0x18a)][_0x36135b(0x194)](this[_0x36135b(0x1ae)][_0x36135b(0x16a)]),this['branch']=await this[_0x36135b(0x192)][_0x36135b(0x1b0)][_0x36135b(0x194)](this[_0x36135b(0x1ae)][_0x36135b(0x1af)]),await this[_0x36135b(0x168)](_0x36135b(0x1c3)),this[_0x36135b(0x182)]()[_0x36135b(0x1aa)](_0xf9d3e1=>{const _0x12d087=_0x36135b;this[_0x12d087(0x168)](_0x12d087(0x1b1)+(_0xf9d3e1['message']||_0xf9d3e1));});}catch(_0x3aa8ea){this['commitData']=undefined;throw _0x3aa8ea;}}};FlosumCommitJob=__decorate([typedi_1[a139_0xaa4d(0x1b6)]({'transient':!![]}),__metadata(a139_0xaa4d(0x16e),[salesforce_service_1[a139_0xaa4d(0x1a4)],commit_components_job_1[a139_0xaa4d(0x19f)],salesforce_sync_service_1['SalesforceSyncService'],git_provider_manager_1[a139_0xaa4d(0x196)]])],FlosumCommitJob),exports[a139_0xaa4d(0x199)]=FlosumCommitJob;