const a123_0x3055=['Service','1481FuwXXa','__esModule','getProtocol','commitAndPush','247CYKtgX','metadata','../../sfdx/services/salesforce.service','commit\x20%s\x20took\x20%dms\x20to\x20proceed\x20%d\x20components','writeComponents','gitCredentials','dir','log','../utils/mdapi.utils','authSettings','object','../../sfdx/services/flosum-retriever.service','3334PqMVAH','Logger','512YzJBrd','repo','get','exec','205PgigXz','decorate','\x20took\x20','branch','function','mdapiUtils','Job','../../../constants/errors','splice','sfLogger','gitUtils','commitId','create','message','sfdxUtils','call','ERR_JOB_IS_NOT_DONE','fileType','createProjectFrom','defineProperty','__metadata','getOne','2983kPbNHk','FlosumCommitJob','GitUtils','../../parsers/mdapi/child-types','../../shared/utils','currentJob','__importDefault','Done\x20','646047qBVCJj','test','removeDir','branches','salesforceService','BadRequestError','copyProjectTo','35Hmlixo','length','typedi','5uBlOWP','now','://','map','clone','retriever','../../../core','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','[INFO]\x20commit\x20','9476kHFBne','\x20components','GitProviderManager','constructor','data','Start\x20retrieve\x20components\x20job','credentials','getOwnPropertyDescriptor','trim','AuthSettingsService','deleteCommit','COMPONENTS_PER_TICK','SFDXUtils','includes','return\x20/\x22\x20+\x20this\x20+\x20\x22/','apply','Clonning\x20repository','[ERROR]\x20','./job','replace','FlosumRetrieverService','run','40fcQPIS','__decorate','gitUrl','name','../../shared/services/auth-settings.service','default','MDApiUtils','521091hHKLrE','prototype','../../../core/errors/bad-request.error','__setModuleDefault'];const a123_0x3a1d94=a123_0x3fe8;(function(_0x4dac8a,_0x441807){const _0x41bb71=a123_0x3fe8;while(!![]){try{const _0x38dc19=parseInt(_0x41bb71(0x1ae))+parseInt(_0x41bb71(0x1ee))*-parseInt(_0x41bb71(0x1c3))+parseInt(_0x41bb71(0x1a7))*parseInt(_0x41bb71(0x1b3))+-parseInt(_0x41bb71(0x191))*-parseInt(_0x41bb71(0x188))+-parseInt(_0x41bb71(0x1c5))*-parseInt(_0x41bb71(0x1b7))+-parseInt(_0x41bb71(0x1e7))+parseInt(_0x41bb71(0x1c9))*parseInt(_0x41bb71(0x1df));if(_0x38dc19===_0x441807)break;else _0x4dac8a['push'](_0x4dac8a['shift']());}catch(_0x4498a6){_0x4dac8a['push'](_0x4dac8a['shift']());}}}(a123_0x3055,0x93349));const a123_0x146da0=function(){let _0x176b5b=!![];return function(_0x9f84e3,_0x361e3a){const _0x5471b2=_0x176b5b?function(){const _0x380555=a123_0x3fe8;if(_0x361e3a){const _0x48951f=_0x361e3a[_0x380555(0x1a0)](_0x9f84e3,arguments);return _0x361e3a=null,_0x48951f;}}:function(){};return _0x176b5b=![],_0x5471b2;};}(),a123_0x415eb9=a123_0x146da0(this,function(){const _0x38e2b3=function(){const _0xcf8866=a123_0x3fe8,_0x3ed6fb=_0x38e2b3['constructor'](_0xcf8866(0x19f))()[_0xcf8866(0x194)](_0xcf8866(0x18f));return!_0x3ed6fb[_0xcf8866(0x1e8)](a123_0x415eb9);};return _0x38e2b3();});a123_0x415eb9();'use strict';var __createBinding=this&&this['__createBinding']||(Object[a123_0x3a1d94(0x1d5)]?function(_0x4e4004,_0x3ea466,_0x468527,_0x3beae6){const _0x4a0196=a123_0x3a1d94;if(_0x3beae6===undefined)_0x3beae6=_0x468527;Object[_0x4a0196(0x1dc)](_0x4e4004,_0x3beae6,{'enumerable':!![],'get':function(){return _0x3ea466[_0x468527];}});}:function(_0x3cfb3b,_0x1c1c77,_0x43a908,_0x5056fb){if(_0x5056fb===undefined)_0x5056fb=_0x43a908;_0x3cfb3b[_0x5056fb]=_0x1c1c77[_0x43a908];}),__setModuleDefault=this&&this[a123_0x3a1d94(0x1b1)]||(Object['create']?function(_0x14fec1,_0x335500){const _0xb6149b=a123_0x3a1d94;Object['defineProperty'](_0x14fec1,_0xb6149b(0x1ac),{'enumerable':!![],'value':_0x335500});}:function(_0x58a473,_0x39542e){_0x58a473['default']=_0x39542e;}),__decorate=this&&this[a123_0x3a1d94(0x1a8)]||function(_0x5b6f34,_0x11a3a3,_0x5c2661,_0x3ba940){const _0x481ad5=a123_0x3a1d94;var _0x5b7af1=arguments[_0x481ad5(0x1ef)],_0x29dc9c=_0x5b7af1<0x3?_0x11a3a3:_0x3ba940===null?_0x3ba940=Object[_0x481ad5(0x198)](_0x11a3a3,_0x5c2661):_0x3ba940,_0x997646;if(typeof Reflect===_0x481ad5(0x1c1)&&typeof Reflect[_0x481ad5(0x1ca)]===_0x481ad5(0x1cd))_0x29dc9c=Reflect['decorate'](_0x5b6f34,_0x11a3a3,_0x5c2661,_0x3ba940);else{for(var _0x27060e=_0x5b6f34[_0x481ad5(0x1ef)]-0x1;_0x27060e>=0x0;_0x27060e--)if(_0x997646=_0x5b6f34[_0x27060e])_0x29dc9c=(_0x5b7af1<0x3?_0x997646(_0x29dc9c):_0x5b7af1>0x3?_0x997646(_0x11a3a3,_0x5c2661,_0x29dc9c):_0x997646(_0x11a3a3,_0x5c2661))||_0x29dc9c;}return _0x5b7af1>0x3&&_0x29dc9c&&Object[_0x481ad5(0x1dc)](_0x11a3a3,_0x5c2661,_0x29dc9c),_0x29dc9c;},__importStar=this&&this['__importStar']||function(_0x2ec4bf){const _0x274b70=a123_0x3a1d94;if(_0x2ec4bf&&_0x2ec4bf[_0x274b70(0x1b4)])return _0x2ec4bf;var _0x3da4d8={};if(_0x2ec4bf!=null){for(var _0x27009a in _0x2ec4bf)if(_0x27009a!=='default'&&Object[_0x274b70(0x1af)]['hasOwnProperty'][_0x274b70(0x1d8)](_0x2ec4bf,_0x27009a))__createBinding(_0x3da4d8,_0x2ec4bf,_0x27009a);}return __setModuleDefault(_0x3da4d8,_0x2ec4bf),_0x3da4d8;},__metadata=this&&this[a123_0x3a1d94(0x1dd)]||function(_0x49d1a3,_0x18d02d){const _0x56007d=a123_0x3a1d94;if(typeof Reflect===_0x56007d(0x1c1)&&typeof Reflect[_0x56007d(0x1b8)]===_0x56007d(0x1cd))return Reflect[_0x56007d(0x1b8)](_0x49d1a3,_0x18d02d);},__importDefault=this&&this[a123_0x3a1d94(0x1e5)]||function(_0x43121c){const _0x4c570a=a123_0x3a1d94;return _0x43121c&&_0x43121c[_0x4c570a(0x1b4)]?_0x43121c:{'default':_0x43121c};};Object[a123_0x3a1d94(0x1dc)](exports,'__esModule',{'value':!![]}),exports[a123_0x3a1d94(0x1e0)]=void 0x0;const errors_1=require(a123_0x3a1d94(0x1d0)),core_1=require(a123_0x3a1d94(0x18e)),bad_request_error_1=require(a123_0x3a1d94(0x1b0)),salesforce_service_1=require(a123_0x3a1d94(0x1b9)),git_provider_manager_1=require('../../shared/git-provider.manager'),auth_settings_service_1=require(a123_0x3a1d94(0x1ab)),typedi_1=__importStar(require(a123_0x3a1d94(0x1f0))),child_types_1=__importDefault(require(a123_0x3a1d94(0x1e2))),flosum_retriever_service_1=require(a123_0x3a1d94(0x1c2)),utils_1=require(a123_0x3a1d94(0x1e3)),git_utils_1=require('../utils/git.utils'),mdapi_utils_1=require(a123_0x3a1d94(0x1bf)),sfdx_utils_1=require('../utils/sfdx.utils'),job_1=require(a123_0x3a1d94(0x1a3)),logger=new core_1[(a123_0x3a1d94(0x1c4))]('flosum-commit-job');let FlosumCommitJob=class FlosumCommitJob extends job_1[a123_0x3a1d94(0x1cf)]{constructor(_0x596b14,_0x337a3a,_0x21b8ca){const _0x1763c2=a123_0x3a1d94;super(),this[_0x1763c2(0x1c0)]=_0x596b14,this['salesforceService']=_0x337a3a,this[_0x1763c2(0x18d)]=_0x21b8ca,this[_0x1763c2(0x19c)]=0x3e8;}get[a123_0x3a1d94(0x197)](){const _0x3ed038=a123_0x3a1d94;return this[_0x3ed038(0x1c0)][_0x3ed038(0x1bc)];}get[a123_0x3a1d94(0x1d4)](){const _0x1c03c7=a123_0x3a1d94;var _0x468235;return(_0x468235=this[_0x1c03c7(0x1e4)])===null||_0x468235===void 0x0?void 0x0:_0x468235['id'];}async[a123_0x3a1d94(0x1d2)](_0x1ae802){const _0x545d07=a123_0x3a1d94;return this['salesforceService'][_0x545d07(0x1be)]('[CID:\x20'+this[_0x545d07(0x1d4)]+']\x20'+_0x1ae802);}async['writeComponents'](_0x31885d){const _0x4d4755=a123_0x3a1d94;this['sfLogger'](_0x4d4755(0x196));const _0x39ef33=await this[_0x4d4755(0x18d)][_0x4d4755(0x1a6)](_0x31885d);_0x39ef33['sort'](_0x25b462=>child_types_1['default'][_0x4d4755(0x19e)](_0x25b462[_0x4d4755(0x1da)])?0x1:-0x1);let _0x2b083b=0x0;while(_0x39ef33['length']){const _0x37798e=_0x39ef33[_0x4d4755(0x1d1)](0x0,this['COMPONENTS_PER_TICK']);await this[_0x4d4755(0x1ce)]['writeFlosumComponents'](_0x37798e),_0x2b083b+=_0x37798e['length'],logger['log']('Done\x20'+_0x2b083b+'/'+_0x31885d['length']+'\x20components'),this[_0x4d4755(0x1d2)](_0x4d4755(0x1e6)+_0x2b083b+'/'+_0x31885d[_0x4d4755(0x1ef)]+_0x4d4755(0x192));}}async[a123_0x3a1d94(0x1c8)](_0x1b1939){const _0x382c58=a123_0x3a1d94,_0x54efc4=_0x1b1939[_0x382c58(0x1a9)][_0x382c58(0x1a4)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x382c58(0x1b5)](_0x1b1939['gitUrl'])+_0x382c58(0x18a)+this[_0x382c58(0x197)]+'@');this[_0x382c58(0x1ce)]=new mdapi_utils_1[(_0x382c58(0x1ad))](_0x1b1939[_0x382c58(0x1aa)]),this[_0x382c58(0x1d3)]=new git_utils_1[(_0x382c58(0x1e1))](_0x54efc4),this['sfdxUtils']=new sfdx_utils_1[(_0x382c58(0x19d))](_0x1b1939['name']);const _0x323fce=Date['now'](),{repo:_0x12192b,commitId:_0x458c14,branch:_0x1ad5ee,attachmentId:_0x3d38b8,message:_0x4d6186,convertToSFDX:_0x8e47af,user:_0x38a980}=this['currentJob'][_0x382c58(0x195)];await this['salesforceService']['connect'](),this[_0x382c58(0x1d2)]('Recieved\x20commit\x20to\x20proceed.\x20Branch\x20-\x20'+_0x1ad5ee);let _0x214167=[];try{const _0x1dc8dd=await this['salesforceService']['retrieveAttachment'](_0x3d38b8);_0x214167=_0x1dc8dd['split']('\x20')[_0x382c58(0x18b)](_0x3acc84=>_0x3acc84[_0x382c58(0x199)]()),this[_0x382c58(0x1d2)](_0x382c58(0x1a1)),await this['gitUtils'][_0x382c58(0x18c)](_0x1ad5ee,_0x1b1939['name']);const _0x1f1edf=new mdapi_utils_1[(_0x382c58(0x1ad))](_0x12192b);await _0x1f1edf['prepareMdapi'](this[_0x382c58(0x1d3)][_0x382c58(0x1bd)]),await this[_0x382c58(0x1bb)](_0x214167),await this['gitUtils']['clearDir'](),_0x8e47af?(await this[_0x382c58(0x1d7)][_0x382c58(0x1db)](this['mdapiUtils'][_0x382c58(0x1bd)]),await this['sfdxUtils'][_0x382c58(0x1ed)](this[_0x382c58(0x1d3)][_0x382c58(0x1bd)]),await this[_0x382c58(0x1d7)][_0x382c58(0x1e9)]()):await this[_0x382c58(0x1ce)]['copyMdapiTo'](this[_0x382c58(0x1d3)][_0x382c58(0x1bd)]),this[_0x382c58(0x1d2)]('Push\x20commit\x20to\x20branch'),await this[_0x382c58(0x1d3)][_0x382c58(0x1b6)](_0x4d6186,_0x38a980,_0x1ad5ee),await this[_0x382c58(0x1eb)][_0x382c58(0x19b)](_0x458c14),await this[_0x382c58(0x1d3)]['removeDir'](),await this[_0x382c58(0x1ce)][_0x382c58(0x1e9)](),logger['info'](_0x382c58(0x1ba),_0x458c14,Date[_0x382c58(0x189)]()-_0x323fce,_0x214167[_0x382c58(0x1ef)]),this[_0x382c58(0x1d2)](_0x382c58(0x190)+_0x458c14+_0x382c58(0x1cb)+(Date[_0x382c58(0x189)]()-_0x323fce)+'ms\x20to\x20proceed\x20'+_0x214167[_0x382c58(0x1ef)]+_0x382c58(0x192));}catch(_0x424e6f){this[_0x382c58(0x1d2)](_0x382c58(0x1a2)+(_0x424e6f[_0x382c58(0x1d6)]||_0x424e6f)),console[_0x382c58(0x1be)]({'error':_0x424e6f});}finally{this[_0x382c58(0x1e4)]=undefined;}}async[a123_0x3a1d94(0x1a6)](_0x49380f){const _0x1d4869=a123_0x3a1d94;if(this['currentJob'])throw new bad_request_error_1[(_0x1d4869(0x1ec))](errors_1[_0x1d4869(0x1d9)]);try{this['currentJob']=_0x49380f;const _0x5c2fb0=typedi_1[_0x1d4869(0x1ac)][_0x1d4869(0x1c7)](git_provider_manager_1[_0x1d4869(0x193)])['getRepoService'](),_0x2c6a30=await _0x5c2fb0[_0x1d4869(0x1de)](_0x49380f['data'][_0x1d4869(0x1c6)]);await _0x2c6a30[_0x1d4869(0x1ea)]['getOne'](_0x49380f[_0x1d4869(0x195)][_0x1d4869(0x1cc)]),this[_0x1d4869(0x1c8)](_0x2c6a30);}catch(_0x298d5b){this[_0x1d4869(0x1e4)]=undefined;throw _0x298d5b;}}};function a123_0x3fe8(_0x27f259,_0xf2ea50){return a123_0x3fe8=function(_0x538742,_0x415eb9){_0x538742=_0x538742-0x188;let _0x146da0=a123_0x3055[_0x538742];return _0x146da0;},a123_0x3fe8(_0x27f259,_0xf2ea50);}FlosumCommitJob=__decorate([typedi_1[a123_0x3a1d94(0x1b2)](),__metadata('design:paramtypes',[auth_settings_service_1[a123_0x3a1d94(0x19a)],salesforce_service_1['SalesforceService'],flosum_retriever_service_1[a123_0x3a1d94(0x1a5)]])],FlosumCommitJob),exports[a123_0x3a1d94(0x1e0)]=FlosumCommitJob;