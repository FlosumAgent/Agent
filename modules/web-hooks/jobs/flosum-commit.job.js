const a137_0x3b04=['ERR_INVALID_SYNC_RECORD_ID','../../shared/git-provider.manager','FlosumCommitJob','design:paramtypes','fetchRepositoryData','syncBranchId','58168fwrwcA','trim','exec','158451ojbVsq','gitManager','patchObject','encodeBase64','repo','return\x20/\x22\x20+\x20this\x20+\x20\x22/','repositoryName','salesforceService','19681xDqeNx','then','apply','lastCommit','getOwnPropertyDescriptor','Service','repository','SalesforceSyncService','stringify','gitUrl','setLoggerId','BadRequestError','[INFO]\x20Start\x20commit\x20job','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','getAttachmentIdByParent','retrieveAttachment','In\x20Progress','sendLog','../../salesforce/services/salesforce-sync.service','function','getRepositoryRecord','componentsIds','object','[INFO]\x20Update\x20remote\x20state.','salesforceSync','__esModule','branch','sfLogger','commitJob','objectId','message','SalesforceService','227824yKzyxD','branches','run','name','defineProperty','13BOiNIf','map','__metadata','CommitComponentsDto','getCommitDto','CommitComponentsJob','repositoryData','288388SPErBa','catch','deleteAttachment',']\x20[Branch:\x20','test','Completed','length','../../shared/utils','../../../core/errors/bad-request.error','SalesforceRetrieverService','constructor','decorate','setStatus','updateLastCommit','log','split','user','attachmentId','sha','getOne','convertToSFDX','metadata','parse','branchName','repoService','77892sTzBLB','[ERROR]\x20','276291oXjrUO','GitProviderManager','commitData','getBranchRecord','syncRepositoryId','./commit-components.job','../dto/commit-components.dto','Attachment'];const a137_0x556486=a137_0x33bf;(function(_0x10f19a,_0x57e2a8){const _0x48abf0=a137_0x33bf;while(!![]){try{const _0x2e01f5=parseInt(_0x48abf0(0x183))+-parseInt(_0x48abf0(0x15b))+-parseInt(_0x48abf0(0x18f))+-parseInt(_0x48abf0(0x158))+parseInt(_0x48abf0(0x188))*parseInt(_0x48abf0(0x163))+-parseInt(_0x48abf0(0x1a8))+parseInt(_0x48abf0(0x1aa));if(_0x2e01f5===_0x57e2a8)break;else _0x10f19a['push'](_0x10f19a['shift']());}catch(_0x28e966){_0x10f19a['push'](_0x10f19a['shift']());}}}(a137_0x3b04,0x2b3ad));const a137_0x10a5f7=function(){let _0x437081=!![];return function(_0x2c3b31,_0x237c17){const _0x1e51e9=_0x437081?function(){const _0x4ae859=a137_0x33bf;if(_0x237c17){const _0x426d0d=_0x237c17[_0x4ae859(0x165)](_0x2c3b31,arguments);return _0x237c17=null,_0x426d0d;}}:function(){};return _0x437081=![],_0x1e51e9;};}(),a137_0x122213=a137_0x10a5f7(this,function(){const _0x346d20=function(){const _0x9cfb8f=a137_0x33bf,_0x4d02c7=_0x346d20[_0x9cfb8f(0x199)](_0x9cfb8f(0x160))()[_0x9cfb8f(0x199)](_0x9cfb8f(0x170));return!_0x4d02c7[_0x9cfb8f(0x193)](a137_0x122213);};return _0x346d20();});a137_0x122213();'use strict';var __decorate=this&&this['__decorate']||function(_0x3cd2cf,_0xb44316,_0x2a63fd,_0x23c067){const _0x1cef79=a137_0x33bf;var _0x2c2f59=arguments['length'],_0x46b2f3=_0x2c2f59<0x3?_0xb44316:_0x23c067===null?_0x23c067=Object[_0x1cef79(0x167)](_0xb44316,_0x2a63fd):_0x23c067,_0x565a43;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1cef79(0x176))_0x46b2f3=Reflect[_0x1cef79(0x19a)](_0x3cd2cf,_0xb44316,_0x2a63fd,_0x23c067);else{for(var _0x28fc1e=_0x3cd2cf[_0x1cef79(0x195)]-0x1;_0x28fc1e>=0x0;_0x28fc1e--)if(_0x565a43=_0x3cd2cf[_0x28fc1e])_0x46b2f3=(_0x2c2f59<0x3?_0x565a43(_0x46b2f3):_0x2c2f59>0x3?_0x565a43(_0xb44316,_0x2a63fd,_0x46b2f3):_0x565a43(_0xb44316,_0x2a63fd))||_0x46b2f3;}return _0x2c2f59>0x3&&_0x46b2f3&&Object[_0x1cef79(0x187)](_0xb44316,_0x2a63fd,_0x46b2f3),_0x46b2f3;},__metadata=this&&this[a137_0x556486(0x18a)]||function(_0x50e820,_0x28a9d8){const _0x5ace60=a137_0x556486;if(typeof Reflect==='object'&&typeof Reflect[_0x5ace60(0x1a4)]===_0x5ace60(0x176))return Reflect['metadata'](_0x50e820,_0x28a9d8);};Object['defineProperty'](exports,a137_0x556486(0x17c),{'value':!![]}),exports[a137_0x556486(0x1b4)]=void 0x0;const salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require(a137_0x556486(0x1b3)),typedi_1=require('typedi'),errors_1=require('../../../constants/errors'),bad_request_error_1=require(a137_0x556486(0x197)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a137_0x556486(0x175)),utils_1=require(a137_0x556486(0x196)),commit_components_dto_1=require(a137_0x556486(0x1b0)),commit_components_job_1=require(a137_0x556486(0x1af));let FlosumCommitJob=class FlosumCommitJob{constructor(_0x3c488e,_0x52282f,_0x5ddb16,_0x27a48f){const _0x16991f=a137_0x556486;this[_0x16991f(0x162)]=_0x3c488e,this[_0x16991f(0x17f)]=_0x52282f,this['salesforceSync']=_0x5ddb16,this[_0x16991f(0x15c)]=_0x27a48f,this[_0x16991f(0x1a7)]=this[_0x16991f(0x15c)]['getRepoService'](),_0x52282f['retriever']=new salesforce_retriever_service_1[(_0x16991f(0x198))](this[_0x16991f(0x162)]),_0x52282f['on'](_0x16991f(0x19d),_0x4ef4be=>this[_0x16991f(0x17e)](_0x4ef4be));}async[a137_0x556486(0x17e)](_0x362776){const _0x311c70=a137_0x556486;return this[_0x311c70(0x162)][_0x311c70(0x174)]('[COMMIT]\x20[Repository:\x20'+this[_0x311c70(0x169)][_0x311c70(0x186)]+_0x311c70(0x192)+this[_0x311c70(0x17d)][_0x311c70(0x186)]+']\x20'+_0x362776);}async[a137_0x556486(0x1b6)](){const _0x35b013=a137_0x556486;try{if(this['commitData'][_0x35b013(0x1ae)])this[_0x35b013(0x18e)]=await this['salesforceSync'][_0x35b013(0x177)](this[_0x35b013(0x1ac)]['syncRepositoryId']);else this[_0x35b013(0x1ac)][_0x35b013(0x157)]&&(this[_0x35b013(0x18e)]=await this[_0x35b013(0x17b)][_0x35b013(0x1ad)](this[_0x35b013(0x1ac)][_0x35b013(0x157)]));}catch(_0x29ecaa){throw new bad_request_error_1['BadRequestError'](errors_1[_0x35b013(0x1b2)]);}}async[a137_0x556486(0x18c)](){const _0x26c786=a137_0x556486,_0x1b049e=new commit_components_dto_1[(_0x26c786(0x18b))](),_0xd17e9d=await this[_0x26c786(0x162)][_0x26c786(0x172)](this['commitData'][_0x26c786(0x1a0)])['then'](_0x2b4f71=>_0x2b4f71[_0x26c786(0x19e)]('\x20')[_0x26c786(0x189)](_0x520621=>_0x520621[_0x26c786(0x159)]()));return _0x1b049e['message']=this[_0x26c786(0x1ac)]['message'],_0x1b049e[_0x26c786(0x19f)]=this[_0x26c786(0x1ac)][_0x26c786(0x19f)],_0x1b049e[_0x26c786(0x178)]=_0xd17e9d,_0x1b049e['convertToSFDX']=this[_0x26c786(0x1ac)][_0x26c786(0x1a3)],_0x1b049e[_0x26c786(0x15f)]=this[_0x26c786(0x169)],_0x1b049e[_0x26c786(0x17d)]=this['branch'],_0x1b049e;}async[a137_0x556486(0x19c)](){const _0x32150e=a137_0x556486;var _0x44568b;const _0x3f1ed1=await this[_0x32150e(0x169)][_0x32150e(0x184)]['getOne'](this[_0x32150e(0x17d)][_0x32150e(0x186)]);await this[_0x32150e(0x17e)](_0x32150e(0x17a));const _0x5d736d=await this[_0x32150e(0x17b)][_0x32150e(0x171)](this[_0x32150e(0x18e)][_0x32150e(0x180)]),_0x4b49e5=await this[_0x32150e(0x162)][_0x32150e(0x172)](_0x5d736d)[_0x32150e(0x164)](_0x66d1b9=>typeof _0x66d1b9===_0x32150e(0x179)?_0x66d1b9:JSON[_0x32150e(0x1a5)](_0x66d1b9||'{}'))[_0x32150e(0x190)](()=>({}));_0x4b49e5[_0x44568b=this[_0x32150e(0x169)]['gitUrl']]||(_0x4b49e5[_0x44568b]={'lastCommit':''}),_0x4b49e5[this[_0x32150e(0x169)][_0x32150e(0x16c)]][_0x32150e(0x166)]=_0x3f1ed1[_0x32150e(0x1a1)],await this[_0x32150e(0x162)][_0x32150e(0x15d)](_0x32150e(0x1b1),_0x5d736d,{'Body':utils_1[_0x32150e(0x15e)](JSON[_0x32150e(0x16b)](_0x4b49e5))});}async[a137_0x556486(0x15a)](){const _0x2d00fb=a137_0x556486,_0x46e10f=await this['getCommitDto']();await this[_0x2d00fb(0x17b)][_0x2d00fb(0x19b)](this['repositoryData'],_0x2d00fb(0x173)),await this[_0x2d00fb(0x17f)][_0x2d00fb(0x185)](_0x46e10f),await this[_0x2d00fb(0x19c)](),await this[_0x2d00fb(0x162)][_0x2d00fb(0x191)](this[_0x2d00fb(0x1ac)][_0x2d00fb(0x1a0)]),await this[_0x2d00fb(0x17b)][_0x2d00fb(0x19b)](this[_0x2d00fb(0x18e)],_0x2d00fb(0x194));}async[a137_0x556486(0x185)](_0x35a811,_0x2d05f1){const _0x5a430d=a137_0x556486;try{this[_0x5a430d(0x1ac)]=_0x35a811,this[_0x5a430d(0x162)][_0x5a430d(0x16d)](_0x2d05f1),await this[_0x5a430d(0x1b6)]();if(!this[_0x5a430d(0x18e)])throw new bad_request_error_1[(_0x5a430d(0x16e))](errors_1['ERR_UNKNOWN_SYNC_RECORD_ID']);this[_0x5a430d(0x169)]=await this[_0x5a430d(0x1a7)][_0x5a430d(0x1a2)](this[_0x5a430d(0x18e)][_0x5a430d(0x161)]),this[_0x5a430d(0x17d)]=await this[_0x5a430d(0x169)][_0x5a430d(0x184)]['getOne'](this[_0x5a430d(0x18e)][_0x5a430d(0x1a6)]),await this[_0x5a430d(0x17e)](_0x5a430d(0x16f)),this[_0x5a430d(0x15a)]()['catch'](_0x3e0779=>{const _0x79cc50=_0x5a430d;this[_0x79cc50(0x17e)](_0x79cc50(0x1a9)+(_0x3e0779[_0x79cc50(0x181)]||_0x3e0779));});}catch(_0x5b4076){this[_0x5a430d(0x1ac)]=undefined;throw _0x5b4076;}}};function a137_0x33bf(_0x39cf59,_0x4d0c66){return a137_0x33bf=function(_0x4f33e6,_0x122213){_0x4f33e6=_0x4f33e6-0x157;let _0x10a5f7=a137_0x3b04[_0x4f33e6];return _0x10a5f7;},a137_0x33bf(_0x39cf59,_0x4d0c66);}FlosumCommitJob=__decorate([typedi_1[a137_0x556486(0x168)]({'transient':!![]}),__metadata(a137_0x556486(0x1b5),[salesforce_service_1[a137_0x556486(0x182)],commit_components_job_1[a137_0x556486(0x18d)],salesforce_sync_service_1[a137_0x556486(0x16a)],git_provider_manager_1[a137_0x556486(0x1ab)]])],FlosumCommitJob),exports['FlosumCommitJob']=FlosumCommitJob;