const a176_0x2029f4=a176_0x3af8;(function(_0x388c9a,_0x3d7093){const _0x1e1223=a176_0x3af8,_0x252036=_0x388c9a();while(!![]){try{const _0x144efb=-parseInt(_0x1e1223(0x1c5))/0x1*(parseInt(_0x1e1223(0x1d1))/0x2)+-parseInt(_0x1e1223(0x1dd))/0x3+-parseInt(_0x1e1223(0x1f8))/0x4+-parseInt(_0x1e1223(0x1c9))/0x5*(parseInt(_0x1e1223(0x1f6))/0x6)+-parseInt(_0x1e1223(0x215))/0x7*(-parseInt(_0x1e1223(0x217))/0x8)+parseInt(_0x1e1223(0x1cb))/0x9+parseInt(_0x1e1223(0x1cd))/0xa;if(_0x144efb===_0x3d7093)break;else _0x252036['push'](_0x252036['shift']());}catch(_0x3a72dc){_0x252036['push'](_0x252036['shift']());}}}(a176_0x5b07,0x5136e));const a176_0x4cef2c=function(){let _0x536af2=!![];return function(_0xc26e99,_0x36ab2c){const _0x2f9270=_0x536af2?function(){const _0x3eb3a5=a176_0x3af8;if(_0x36ab2c){const _0x1979f9=_0x36ab2c[_0x3eb3a5(0x1c6)](_0xc26e99,arguments);return _0x36ab2c=null,_0x1979f9;}}:function(){};return _0x536af2=![],_0x2f9270;};}(),a176_0x1822e3=a176_0x4cef2c(this,function(){const _0x5b1bd7=a176_0x3af8;return a176_0x1822e3[_0x5b1bd7(0x20f)]()[_0x5b1bd7(0x1ef)]('(((.+)+)+)+$')[_0x5b1bd7(0x20f)]()[_0x5b1bd7(0x218)](a176_0x1822e3)[_0x5b1bd7(0x1ef)](_0x5b1bd7(0x1b9));});a176_0x1822e3();function a176_0x3af8(_0x1f3979,_0x551aed){const _0x2db180=a176_0x5b07();return a176_0x3af8=function(_0x1822e3,_0x4cef2c){_0x1822e3=_0x1822e3-0x1a0;let _0x5b07d5=_0x2db180[_0x1822e3];return _0x5b07d5;},a176_0x3af8(_0x1f3979,_0x551aed);}'use strict';function a176_0x5b07(){const _0x3ad495=['username','../utils/mdapi.utils','proceedGitCommit','[INFO]\x20Proceeded\x20','changes','__esModule','In\x20Progress','catch','removeLogger','__metadata','148438pqlcZv','apply','removeDir','logger','383315ZJrDOu','fetchComponentsMetadata','2612250GMacls','send','18790980SSqEgj','[INFO]\x20Job\x20done.','lastCommitHash','[ERROR]\x20Error\x20was\x20occured\x20when\x20commit\x20from\x20git\x20to\x20flosum\x20-\x20','2NVprDM','../../../constants','setCommitDto','repository','log','values','[INFO]\x20Fetch\x20salesforce\x20data.','[INFO]\x20Download\x20components\x20metadata\x20from\x20flosum.','gitUtils','force','sfLogger','length','1443042UQUdDs','Error','getRecordTypes','getPrefix','SalesforceLogger2','../../../core','getLoggerId','prepareMdapi','function','proceed\x20git\x20commits\x20to\x20flosum','[INFO]\x20Force\x20commit.\x20Have\x20to\x20parse\x20','relative','author','checkoutTo','files','SalesforceCommitsManager','decorate',']\x20[Branch:\x20','search','../services/git-commit.service','getProtocol','gitCommit','map','describeCommit','remote','48jjYWnZ','getRepositoryId','2635780VEuGrf','../utils/git-commit.utils','AuthSettingsService','../../salesforce/errors/salesforce.error','commits','cleanUp','prepare\x20mdapi\x20to\x20parse','../../../core/errors/api.error','MDApiUtils','../../shared/utils','getCredentialsFor','../errors/flosum-commit.error','../../internal/fs.internal','checkSyncStatus','Logger','authSettings','defineProperty','name','../../salesforce/services/salesforce-commits-manager.service','[INFO]\x20Start\x20proceeding\x20git\x20commits.','message','../../salesforce/services/salesforce-logger-v2.service','Completed','toString','[INFO]\x20Fetch\x20changes\x20files\x20from\x20git\x20commits.','fileNames','flat','[INFO]\x20Clone\x20git\x20repository.','GitCommitJob','7YJqdRg','FlosumCommitError','520056OMhcAD','constructor','\x20before\x20sync.','start\x20force\x20commit\x20job\x20to\x20sync\x20repository','Service','proceedCommits','branch','dir','updateStatus','push','updateRemoteState','shift','../../shared/services/auth-settings.service','git\x20commit\x20job\x20done\x20(´･ω･`)','gitCommitData','repositoryGit','DEFAULT_GIT_USER_NAME','getOwnPropertyDescriptor','provider','__decorate','getBranchId','sync\x20components','fetch\x20components\x20metadata','GitUtils','../utils/git.utils','mdapiUtils','object','metadata','fetchCommits','(((.+)+)+)+$','[GIT\x20->\x20FLOSUM]\x20[Repository:\x20'];a176_0x5b07=function(){return _0x3ad495;};return a176_0x5b07();}var __decorate=this&&this[a176_0x2029f4(0x1af)]||function(_0xf26df9,_0x2bbd76,_0x1ffee2,_0x518326){const _0x2cafe3=a176_0x2029f4;var _0x49cf60=arguments[_0x2cafe3(0x1dc)],_0x4ed15c=_0x49cf60<0x3?_0x2bbd76:_0x518326===null?_0x518326=Object[_0x2cafe3(0x1ad)](_0x2bbd76,_0x1ffee2):_0x518326,_0x28a06f;if(typeof Reflect==='object'&&typeof Reflect[_0x2cafe3(0x1ed)]===_0x2cafe3(0x1e5))_0x4ed15c=Reflect[_0x2cafe3(0x1ed)](_0xf26df9,_0x2bbd76,_0x1ffee2,_0x518326);else{for(var _0x329617=_0xf26df9[_0x2cafe3(0x1dc)]-0x1;_0x329617>=0x0;_0x329617--)if(_0x28a06f=_0xf26df9[_0x329617])_0x4ed15c=(_0x49cf60<0x3?_0x28a06f(_0x4ed15c):_0x49cf60>0x3?_0x28a06f(_0x2bbd76,_0x1ffee2,_0x4ed15c):_0x28a06f(_0x2bbd76,_0x1ffee2))||_0x4ed15c;}return _0x49cf60>0x3&&_0x4ed15c&&Object[_0x2cafe3(0x208)](_0x2bbd76,_0x1ffee2,_0x4ed15c),_0x4ed15c;},__metadata=this&&this[a176_0x2029f4(0x1c4)]||function(_0x563751,_0x36e487){const _0x2ad034=a176_0x2029f4;if(typeof Reflect===_0x2ad034(0x1b6)&&typeof Reflect[_0x2ad034(0x1b7)]===_0x2ad034(0x1e5))return Reflect[_0x2ad034(0x1b7)](_0x563751,_0x36e487);},GitCommitJob_1;Object['defineProperty'](exports,a176_0x2029f4(0x1c0),{'value':!![]}),exports[a176_0x2029f4(0x214)]=void 0x0;const core_1=require(a176_0x2029f4(0x1e2)),fs_internal_1=require(a176_0x2029f4(0x204)),salesforce_logger_v2_service_1=require(a176_0x2029f4(0x20d)),auth_settings_service_1=require(a176_0x2029f4(0x1a8)),utils_1=require(a176_0x2029f4(0x201)),path_1=require('path'),typedi_1=require('typedi'),constants_1=require(a176_0x2029f4(0x1d2)),salesforce_commits_manager_service_1=require(a176_0x2029f4(0x20a)),git_commit_utils_1=require(a176_0x2029f4(0x1f9)),git_utils_1=require(a176_0x2029f4(0x1b4)),mdapi_utils_1=require(a176_0x2029f4(0x1bc)),api_error_1=require(a176_0x2029f4(0x1ff)),salesforce_error_1=require(a176_0x2029f4(0x1fb)),git_commit_service_1=require(a176_0x2029f4(0x1f0)),flosum_commit_error_1=require(a176_0x2029f4(0x203));let GitCommitJob=GitCommitJob_1=class GitCommitJob{constructor(_0xd7568c,_0x414dd0){const _0x2117b3=a176_0x2029f4;this[_0x2117b3(0x207)]=_0xd7568c,this[_0x2117b3(0x1f2)]=_0x414dd0,this[_0x2117b3(0x1c8)]=new core_1[(_0x2117b3(0x206))](GitCommitJob_1[_0x2117b3(0x209)]);}get[a176_0x2029f4(0x1f5)](){const _0x156943=a176_0x2029f4,{repositoryGit:_0x441467}=this[_0x156943(0x1aa)],_0x496fe1=this['authSettings'][_0x156943(0x202)](this[_0x156943(0x1aa)][_0x156943(0x1ae)]);return _0x441467['replace'](/http(s)?\:\/\/(.+@)?/,utils_1[_0x156943(0x1f1)](_0x441467)+'://'+_0x496fe1+'@');}async[a176_0x2029f4(0x1b8)](){const _0x31b375=a176_0x2029f4;if(this[_0x31b375(0x1aa)][_0x31b375(0x1da)])return;const _0x91284b=[];for(const _0xca67b7 of this[_0x31b375(0x1aa)][_0x31b375(0x1fc)]){const _0x9e7a47=await this[_0x31b375(0x1d9)][_0x31b375(0x1f4)](_0xca67b7['id']);_0xca67b7[_0x31b375(0x1bb)]=_0x9e7a47[_0x31b375(0x1e9)],_0xca67b7[_0x31b375(0x20c)]=_0x9e7a47[_0x31b375(0x20c)],_0xca67b7[_0x31b375(0x1eb)]=_0x9e7a47[_0x31b375(0x1bf)];if(_0xca67b7[_0x31b375(0x1bb)]===constants_1['DEFAULT_GIT_USER_NAME'])throw new flosum_commit_error_1['FlosumCommitError']();_0x91284b[_0x31b375(0x1a5)](...Object[_0x31b375(0x1d6)](_0xca67b7[_0x31b375(0x1eb)])[_0x31b375(0x212)]());}this[_0x31b375(0x1aa)][_0x31b375(0x211)]=git_commit_utils_1['prepareGitChangedPaths']([...new Set(_0x91284b)]);}async[a176_0x2029f4(0x1a1)](){const _0x5a1311=a176_0x2029f4,_0x1c4974=[...this[_0x5a1311(0x1aa)][_0x5a1311(0x1fc)]],_0x2d6d25=_0x1c4974[_0x5a1311(0x1dc)],_0x2f29cd=[];while(_0x1c4974['length']){const _0x1c503e=_0x1c4974[_0x5a1311(0x1a7)]();!this[_0x5a1311(0x1aa)][_0x5a1311(0x1da)]&&(this[_0x5a1311(0x1f2)][_0x5a1311(0x1f7)]()?await this[_0x5a1311(0x1d9)][_0x5a1311(0x1ea)](_0x1c503e['id']):await this[_0x5a1311(0x1d9)]['checkoutTo'](this['lastCommitHash'])),_0x2f29cd['push'](await this['gitCommit'][_0x5a1311(0x1bd)](_0x1c503e,this['mdapiUtils'][_0x5a1311(0x1a3)])),await this[_0x5a1311(0x1db)][_0x5a1311(0x1d5)](_0x5a1311(0x1be)+_0x2f29cd['length']+'/'+_0x2d6d25);}const _0x4061d4=new salesforce_commits_manager_service_1[(_0x5a1311(0x1ec))]({'recordTypes':this[_0x5a1311(0x1f2)][_0x5a1311(0x1df)](),'branchId':this[_0x5a1311(0x1f2)][_0x5a1311(0x1b0)](),'repositoryId':this['gitCommit'][_0x5a1311(0x1f7)](),'logger':this[_0x5a1311(0x1db)]});await _0x4061d4[_0x5a1311(0x1a1)](_0x2f29cd);}async[a176_0x2029f4(0x1fd)](){const _0xea4218=a176_0x2029f4;this[_0xea4218(0x1d9)]&&await this[_0xea4218(0x1d9)]['removeDir']()[_0xea4218(0x1c2)](()=>void 0x0),this['mdapiUtils']&&await this[_0xea4218(0x1b5)][_0xea4218(0x1c7)]()[_0xea4218(0x1c2)](()=>void 0x0);}async['run'](_0x2095e1,_0x2bdd2a){const _0x1235d7=a176_0x2029f4;this[_0x1235d7(0x1aa)]=_0x2095e1,this[_0x1235d7(0x1f2)][_0x1235d7(0x1d3)](this[_0x1235d7(0x1aa)]),this[_0x1235d7(0x1db)]=new salesforce_logger_v2_service_1[(_0x1235d7(0x1e1))](_0x2bdd2a[_0x1235d7(0x1e3)](),(_0x2bdd2a[_0x1235d7(0x1e0)]()||_0x1235d7(0x1ba)+_0x2095e1[_0x1235d7(0x1d4)]+_0x1235d7(0x1ee)+_0x2095e1[_0x1235d7(0x1a2)]+']')+'\x20[COMMIT]'),this[_0x1235d7(0x1d9)]=new git_utils_1[(_0x1235d7(0x1b3))](this[_0x1235d7(0x1f5)]),this[_0x1235d7(0x1b5)]=new mdapi_utils_1[(_0x1235d7(0x200))](this[_0x1235d7(0x1aa)]['repository'],this['gitCommitData'][_0x1235d7(0x1a2)]);try{this[_0x1235d7(0x1c8)][_0x1235d7(0x1d5)]('fetch\x20repository/branch\x20data'),this['sfLogger']['log'](_0x1235d7(0x1d7)),await this[_0x1235d7(0x1f2)]['fetchRepositoryOrBranchData'](),this[_0x1235d7(0x1c8)][_0x1235d7(0x1d5)]('clone\x20repository\x20from\x20%s',this[_0x1235d7(0x1aa)][_0x1235d7(0x1ab)]),this[_0x1235d7(0x1db)][_0x1235d7(0x1d5)](_0x1235d7(0x213)),await this[_0x1235d7(0x1d9)]['clone'](this[_0x1235d7(0x1aa)]['branch'],this[_0x1235d7(0x1aa)][_0x1235d7(0x1d4)]),this[_0x1235d7(0x1c8)][_0x1235d7(0x1d5)]('fetching\x20git\x20commits'),await this[_0x1235d7(0x1db)][_0x1235d7(0x1d5)](_0x1235d7(0x210))[_0x1235d7(0x1cc)](),await this[_0x1235d7(0x1b8)](),await this[_0x1235d7(0x1f2)][_0x1235d7(0x1a4)](_0x1235d7(0x1c1)),this['logger'][_0x1235d7(0x1d5)](_0x1235d7(0x1fe)),await this[_0x1235d7(0x1b5)][_0x1235d7(0x1e4)](this[_0x1235d7(0x1d9)][_0x1235d7(0x1a3)]);if(_0x2095e1['force']){this[_0x1235d7(0x1c8)][_0x1235d7(0x1d5)](_0x1235d7(0x21a));const _0x1a3f86=(await fs_internal_1['FS']['readDir'](this[_0x1235d7(0x1b5)]['dir'],!![]))[_0x1235d7(0x1f3)](_0x49e809=>path_1[_0x1235d7(0x1e8)](this['mdapiUtils']['dir'],_0x49e809));this[_0x1235d7(0x1db)]['log'](_0x1235d7(0x1e7)+_0x1a3f86[_0x1235d7(0x1dc)]+_0x1235d7(0x219)),this['gitCommitData'][_0x1235d7(0x211)]=[],this[_0x1235d7(0x1aa)]['commits']=[{'files':{'modified':_0x1a3f86,'added':[],'removed':[]},'id':await this[_0x1235d7(0x1d9)]['getCurrentHash'](),'message':_0x1235d7(0x1b1),'username':constants_1[_0x1235d7(0x1ac)]}];}this[_0x1235d7(0x1cf)]=this[_0x1235d7(0x1aa)][_0x1235d7(0x1fc)][this[_0x1235d7(0x1aa)]['commits'][_0x1235d7(0x1dc)]-0x1]['id'];const _0x5aaea7=await this[_0x1235d7(0x1f2)][_0x1235d7(0x205)](this[_0x1235d7(0x1cf)]);if(_0x5aaea7){await this[_0x1235d7(0x1db)][_0x1235d7(0x1d5)]('[INFO]\x20Branch\x20synchronized.\x20Skip')[_0x1235d7(0x1cc)](),await this['gitCommit'][_0x1235d7(0x1a4)]('Completed');return;}this[_0x1235d7(0x1c8)][_0x1235d7(0x1d5)](_0x1235d7(0x1b2)),await this['sfLogger'][_0x1235d7(0x1d5)](_0x1235d7(0x1d8)),await this['gitCommit'][_0x1235d7(0x1ca)](),this['logger'][_0x1235d7(0x1d5)](_0x1235d7(0x1e6)),this[_0x1235d7(0x1db)][_0x1235d7(0x1d5)](_0x1235d7(0x20b)),await this[_0x1235d7(0x1a1)](),this[_0x1235d7(0x1c8)][_0x1235d7(0x1d5)](_0x1235d7(0x1a9)),await this[_0x1235d7(0x1db)]['log'](_0x1235d7(0x1ce)),await this[_0x1235d7(0x1f2)][_0x1235d7(0x1a4)](_0x1235d7(0x20e)),await this[_0x1235d7(0x1f2)][_0x1235d7(0x1a6)]({[this[_0x1235d7(0x1aa)][_0x1235d7(0x1ab)]]:{'lastCommit':this['lastCommitHash']}});}catch(_0x560ee5){await this[_0x1235d7(0x1fd)](),this[_0x1235d7(0x1c8)]['error'](_0x560ee5);if(_0x560ee5 instanceof flosum_commit_error_1[_0x1235d7(0x216)]){await this[_0x1235d7(0x1db)][_0x1235d7(0x1c3)]();return;}this[_0x1235d7(0x1db)][_0x1235d7(0x1d5)](_0x1235d7(0x1d0)+(_0x560ee5 instanceof api_error_1['ApiError']||_0x560ee5 instanceof salesforce_error_1['SalesforceError']?_0x560ee5[_0x1235d7(0x20f)]():_0x560ee5)),await this[_0x1235d7(0x1f2)]['updateRemoteState']({}),await this[_0x1235d7(0x1f2)][_0x1235d7(0x1a4)](_0x1235d7(0x1de))[_0x1235d7(0x1c2)](()=>void 0x0);throw _0x560ee5;}finally{await this[_0x1235d7(0x1fd)](),this[_0x1235d7(0x1db)][_0x1235d7(0x1cc)]()[_0x1235d7(0x1c2)](()=>void 0x0);}}};GitCommitJob=GitCommitJob_1=__decorate([typedi_1[a176_0x2029f4(0x1a0)]({'transient':!![]}),__metadata('design:paramtypes',[auth_settings_service_1[a176_0x2029f4(0x1fa)],git_commit_service_1['GitCommitService']])],GitCommitJob),exports['GitCommitJob']=GitCommitJob;