const a149_0x4727ff=a149_0x1945;(function(_0x53156a,_0xfcc78){const _0xbcfa7d=a149_0x1945,_0x4ae5de=_0x53156a();while(!![]){try{const _0x48ec81=-parseInt(_0xbcfa7d(0x197))/0x1*(-parseInt(_0xbcfa7d(0x19f))/0x2)+-parseInt(_0xbcfa7d(0x175))/0x3+parseInt(_0xbcfa7d(0x19e))/0x4*(-parseInt(_0xbcfa7d(0x1a3))/0x5)+parseInt(_0xbcfa7d(0x195))/0x6+parseInt(_0xbcfa7d(0x15c))/0x7*(-parseInt(_0xbcfa7d(0x174))/0x8)+-parseInt(_0xbcfa7d(0x181))/0x9+parseInt(_0xbcfa7d(0x153))/0xa;if(_0x48ec81===_0xfcc78)break;else _0x4ae5de['push'](_0x4ae5de['shift']());}catch(_0x2ce33e){_0x4ae5de['push'](_0x4ae5de['shift']());}}}(a149_0x502b,0x74a18));const a149_0x46cbc8=function(){let _0x5aba02=!![];return function(_0x57b749,_0x4c0c91){const _0x2d7b2b=_0x5aba02?function(){if(_0x4c0c91){const _0x55a1a6=_0x4c0c91['apply'](_0x57b749,arguments);return _0x4c0c91=null,_0x55a1a6;}}:function(){};return _0x5aba02=![],_0x2d7b2b;};}(),a149_0x35841b=a149_0x46cbc8(this,function(){const _0x90388c=a149_0x1945;return a149_0x35841b[_0x90388c(0x18b)]()['search']('(((.+)+)+)+$')[_0x90388c(0x18b)]()[_0x90388c(0x157)](a149_0x35841b)[_0x90388c(0x1a0)](_0x90388c(0x152));});a149_0x35841b();function a149_0x1945(_0x107c08,_0x245946){const _0x3219e1=a149_0x502b();return a149_0x1945=function(_0x35841b,_0x46cbc8){_0x35841b=_0x35841b-0x14d;let _0x502be8=_0x3219e1[_0x35841b];return _0x502be8;},a149_0x1945(_0x107c08,_0x245946);}'use strict';var __decorate=this&&this[a149_0x4727ff(0x17a)]||function(_0x1a18be,_0x3b5745,_0xce7f34,_0x526a6d){const _0x334bae=a149_0x4727ff;var _0x5b369c=arguments[_0x334bae(0x15e)],_0x3d67b2=_0x5b369c<0x3?_0x3b5745:_0x526a6d===null?_0x526a6d=Object[_0x334bae(0x169)](_0x3b5745,_0xce7f34):_0x526a6d,_0x1da92a;if(typeof Reflect==='object'&&typeof Reflect[_0x334bae(0x19a)]===_0x334bae(0x158))_0x3d67b2=Reflect[_0x334bae(0x19a)](_0x1a18be,_0x3b5745,_0xce7f34,_0x526a6d);else{for(var _0x41af9c=_0x1a18be[_0x334bae(0x15e)]-0x1;_0x41af9c>=0x0;_0x41af9c--)if(_0x1da92a=_0x1a18be[_0x41af9c])_0x3d67b2=(_0x5b369c<0x3?_0x1da92a(_0x3d67b2):_0x5b369c>0x3?_0x1da92a(_0x3b5745,_0xce7f34,_0x3d67b2):_0x1da92a(_0x3b5745,_0xce7f34))||_0x3d67b2;}return _0x5b369c>0x3&&_0x3d67b2&&Object[_0x334bae(0x16f)](_0x3b5745,_0xce7f34,_0x3d67b2),_0x3d67b2;},__metadata=this&&this[a149_0x4727ff(0x190)]||function(_0x1be510,_0x29ee25){const _0x379dbd=a149_0x4727ff;if(typeof Reflect===_0x379dbd(0x178)&&typeof Reflect[_0x379dbd(0x17c)]==='function')return Reflect['metadata'](_0x1be510,_0x29ee25);};Object[a149_0x4727ff(0x16f)](exports,'__esModule',{'value':!![]}),exports[a149_0x4727ff(0x198)]=void 0x0;const typedi_1=require(a149_0x4727ff(0x179)),constants_1=require(a149_0x4727ff(0x18a)),salesforce_retriever_service_1=require(a149_0x4727ff(0x160)),salesforce_sync_service_1=require(a149_0x4727ff(0x177)),salesforce_service_1=require(a149_0x4727ff(0x16b)),git_provider_manager_1=require('../../shared/git-provider.manager'),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a149_0x4727ff(0x19c));let SyncJob=class SyncJob{constructor(_0x26d5e5,_0x483435,_0x19c1d7,_0x3a2370){const _0x51116d=a149_0x4727ff;this['gitManager']=_0x26d5e5,this[_0x51116d(0x14f)]=_0x483435,this[_0x51116d(0x172)]=_0x19c1d7,this[_0x51116d(0x176)]=_0x3a2370,this[_0x51116d(0x15d)]=this[_0x51116d(0x17e)][_0x51116d(0x150)]();}async[a149_0x4727ff(0x180)](_0x2aca3b){const _0x17f2cc=a149_0x4727ff;return this['logger']['log'](_0x17f2cc(0x196)+this[_0x17f2cc(0x17e)][_0x17f2cc(0x16c)][_0x17f2cc(0x159)]()+_0x17f2cc(0x164)+this[_0x17f2cc(0x18d)]['repositoryName']+_0x17f2cc(0x182)+this['syncData'][_0x17f2cc(0x1a4)]+']\x20'+_0x2aca3b);}async['createRepositoryIfNotExists'](){const _0x43ae9c=a149_0x4727ff;!this[_0x43ae9c(0x192)]&&(this['repository']=await this[_0x43ae9c(0x15d)][_0x43ae9c(0x1a1)]({'name':this[_0x43ae9c(0x18d)]['repositoryName'],'autoInit':!![],'defaultBranch':this['syncData'][_0x43ae9c(0x1a4)],'private':!![]}));}async['createBranchIfNotExists'](){const _0x48469b=a149_0x4727ff;let _0x5cf637=await this['repository'][_0x48469b(0x14e)]['getOne'](this[_0x48469b(0x18d)]['branchName'])[_0x48469b(0x191)](()=>null);!_0x5cf637&&(_0x5cf637=await this[_0x48469b(0x192)][_0x48469b(0x14e)][_0x48469b(0x1a1)]({'name':this[_0x48469b(0x18d)][_0x48469b(0x1a4)]})),this[_0x48469b(0x167)]=_0x5cf637;}async['getComponentIds'](){const _0x21c3bb=a149_0x4727ff;return this[_0x21c3bb(0x18d)][_0x21c3bb(0x16d)]?this['salesforceSync'][_0x21c3bb(0x156)](this[_0x21c3bb(0x18d)][_0x21c3bb(0x16d)]):this[_0x21c3bb(0x14f)][_0x21c3bb(0x15b)](this[_0x21c3bb(0x18d)]['branchId']);}async['getComponents'](){const _0x1967f5=a149_0x4727ff,_0xf7e311=await this[_0x1967f5(0x17d)](),_0x493d89=new salesforce_retriever_service_1[(_0x1967f5(0x154))](this[_0x1967f5(0x172)]),_0x21931f=await _0x493d89[_0x1967f5(0x183)](_0xf7e311);return _0x21931f;}async['getCommitDto'](_0x1a42e3){const _0x197b27=a149_0x4727ff,_0x2b2d2c=new commit_components_dto_1[(_0x197b27(0x161))]();return _0x2b2d2c['message']='Sync\x20repository',_0x2b2d2c['user']={'name':constants_1[_0x197b27(0x1a2)],'email':constants_1[_0x197b27(0x165)]},_0x2b2d2c[_0x197b27(0x162)]={'writed':await this[_0x197b27(0x187)]()},_0x2b2d2c['convertToSFDX']=_0x1a42e3,_0x2b2d2c['repo']=this[_0x197b27(0x192)],_0x2b2d2c[_0x197b27(0x167)]=this[_0x197b27(0x167)],_0x2b2d2c['force']=!![],_0x2b2d2c;}async['checkSyncStatus'](){const _0x4379f8=a149_0x4727ff,_0x3723d9=await this[_0x4379f8(0x14f)]['getRemoteStateAttachmentId'](this['syncData']),_0x3374b6=await this[_0x4379f8(0x172)][_0x4379f8(0x173)](_0x3723d9)[_0x4379f8(0x168)](_0x48f0d4=>typeof _0x48f0d4===_0x4379f8(0x15a)?JSON[_0x4379f8(0x166)](_0x48f0d4):_0x48f0d4)['catch'](()=>({}));if(_0x3374b6[this['repository']['gitUrl']]){if(_0x3374b6[this[_0x4379f8(0x192)][_0x4379f8(0x163)]][_0x4379f8(0x193)]===this[_0x4379f8(0x167)][_0x4379f8(0x185)])return!![];}return![];}async['updateLastCommit'](){const _0x5ae3c2=a149_0x4727ff,_0x383b9b=await this['repository']['branches'][_0x5ae3c2(0x186)](this[_0x5ae3c2(0x167)][_0x5ae3c2(0x18e)]);await this[_0x5ae3c2(0x180)](_0x5ae3c2(0x17b));const _0x44e1a3={[this[_0x5ae3c2(0x192)]['gitUrl']]:{'lastCommit':_0x383b9b['sha']}};await this[_0x5ae3c2(0x14f)][_0x5ae3c2(0x18f)](this['syncData'],_0x44e1a3);}async['run']({syncRecord:_0x372e4a,repository:_0x47ede6,loggerId:_0x51c9da,convertToSFDX:_0x51ede6}){const _0x532762=a149_0x4727ff;this[_0x532762(0x18d)]=_0x372e4a,this[_0x532762(0x192)]=_0x47ede6,this[_0x532762(0x172)]['setLoggerId'](_0x51c9da),this[_0x532762(0x15f)]=this['salesforceService'][_0x532762(0x170)]();try{await this[_0x532762(0x14f)]['setStatus'](this[_0x532762(0x18d)],_0x532762(0x16e)),await this[_0x532762(0x180)](_0x532762(0x184)),await this[_0x532762(0x188)](),await this['createBranchIfNotExists']();const _0x17cba9=await this[_0x532762(0x171)]();if(_0x17cba9){await this[_0x532762(0x14f)]['setStatus'](this['syncData'],_0x532762(0x17f)),await this[_0x532762(0x180)](_0x532762(0x189));return;}const _0x457573=await this[_0x532762(0x18c)](_0x51ede6);this[_0x532762(0x176)][_0x532762(0x15f)]=this[_0x532762(0x15f)],await this[_0x532762(0x176)][_0x532762(0x183)](_0x457573),await this['salesforceSync'][_0x532762(0x19b)](this['syncData'],_0x532762(0x17f)),await this[_0x532762(0x19d)](),await this[_0x532762(0x180)](_0x532762(0x199));}catch(_0x59c04e){throw _0x59c04e;}finally{await this[_0x532762(0x15f)][_0x532762(0x16a)]();}}};SyncJob=__decorate([(0x0,typedi_1[a149_0x4727ff(0x151)])({'transient':!![]}),__metadata(a149_0x4727ff(0x194),[git_provider_manager_1['GitProviderManager'],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a149_0x4727ff(0x155)],commit_components_job_1[a149_0x4727ff(0x14d)]])],SyncJob),exports[a149_0x4727ff(0x198)]=SyncJob;function a149_0x502b(){const _0x553ead=['CommitComponentsDto','components','gitUrl',']\x20[Repository:\x20','DEFAULT_GIT_USER_EMAIL','parse','branch','then','getOwnPropertyDescriptor','send','../../salesforce/services/salesforce.service','provider','repositoryId','In\x20Progress','defineProperty','getLogger','checkSyncStatus','salesforceService','retrieveAttachment','227984hrrCkv','652299NNbrTZ','commitJob','../../salesforce/services/salesforce-sync.service','object','typedi','__decorate','[INFO]\x20Update\x20remote\x20state.','metadata','getComponentIds','gitManager','Completed','log','7571043ypfBsc',']\x20[Branch:\x20','run','[INFO]\x20Start\x20sync\x20job','sha','getOne','getComponents','createRepositoryIfNotExists','[INFO]\x20Branch\x20synchronized.\x20Skip','../../../constants','toString','getCommitDto','syncData','name','updateRemoteState','__metadata','catch','repository','lastCommit','design:paramtypes','3279636KIgRqE','[SYNC]\x20[','1bfNsuj','SyncJob','[INFO]\x20Sync\x20job\x20done.','decorate','setStatus','./commit-components.job','updateLastCommit','8ljOkZW','477656BavIyI','search','create','DEFAULT_GIT_USER_NAME','579670OjCwGx','branchName','CommitComponentsJob','branches','salesforceSync','getRepoService','Service','(((.+)+)+)+$','14387820Sfbxoi','SalesforceRetrieverService','SalesforceService','getComponentsFromRepository','constructor','function','toUpperCase','string','getBranchComponents','112DGgbXh','repoService','length','logger','../../salesforce/services/salesforce-retriever.service'];a149_0x502b=function(){return _0x553ead;};return a149_0x502b();}