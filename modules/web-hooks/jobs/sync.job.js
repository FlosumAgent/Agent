const a145_0x1d58=['apply','1FwVuGZ','getOne','test','metadata','design:paramtypes','[INFO]\x20Sync\x20job\x20done.','7626zcAcxr','convertToSFDX','__metadata','SyncJob','decorate','In\x20Progress','constructor','getBranchComponents','setStatus','parse','4AQCxQI','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','objectId','28505vMsIsh','../dto/commit-components.dto','log','setLoggerId','getComponentsFromRepository','DEFAULT_GIT_USER_NAME','5441UMDNcO',']\x20[Repository:\x20','repoService','typedi','commitJob','getComponents','toUpperCase','flosumSync','GitProviderManager','repositoryName','sha','remoteState','../../salesforce/services/salesforce-retriever.service','retrieveAttachment','syncData','getOwnPropertyDescriptor','salesforceService','length','SalesforceService','[ERROR]\x20','message','patchObject','getCommitDto','getComponentIds','create','CommitComponentsJob','defineProperty','force','SalesforceSyncService','createRepositoryIfNotExists','[INFO]\x20Branch\x20synchronized.\x20Skip','[INFO]\x20Start\x20sync\x20job','../../salesforce/services/salesforce-sync.service','branch','Attachment','250259UDWBRj','remoteStateAttachmentId','CommitComponentsDto','[INFO]\x20Update\x20remote\x20state.','../../shared/git-provider.manager','getAttachmentIdByParent','logger',']\x20[Branch:\x20','./commit-components.job','65245JKqMvg','67VQYMhc','Sync\x20repository','../../salesforce/services/salesforce.service','branches','send','user','object','components','return\x20/\x22\x20+\x20this\x20+\x20\x22/','catch','run','../../shared/utils','getRepoService','[SYNC]\x20[','branchName','repository','gitManager','createBranchIfNotExists','gitUrl','provider','54713tukDTw','checkSyncStatus','repositoryId','updateLastCommit','function','118505XJzeFj','1lVZcTq','encodeBase64'];const a145_0x36f012=a145_0x5982;(function(_0x1151a6,_0x25c4fd){const _0x548718=a145_0x5982;while(!![]){try{const _0x2a1725=-parseInt(_0x548718(0x88))*parseInt(_0x548718(0xc7))+parseInt(_0x548718(0x8b))*-parseInt(_0x548718(0x87))+parseInt(_0x548718(0x82))*parseInt(_0x548718(0x9b))+-parseInt(_0x548718(0x6d))+-parseInt(_0x548718(0x9e))+parseInt(_0x548718(0x91))+parseInt(_0x548718(0x6e))*parseInt(_0x548718(0xa4));if(_0x2a1725===_0x25c4fd)break;else _0x1151a6['push'](_0x1151a6['shift']());}catch(_0x10956d){_0x1151a6['push'](_0x1151a6['shift']());}}}(a145_0x1d58,0x1f5ff));const a145_0x3f4c61=function(){let _0x316784=!![];return function(_0x4d0d61,_0x30024e){const _0x5a5e56=_0x316784?function(){const _0x2778a4=a145_0x5982;if(_0x30024e){const _0x21d252=_0x30024e[_0x2778a4(0x8a)](_0x4d0d61,arguments);return _0x30024e=null,_0x21d252;}}:function(){};return _0x316784=![],_0x5a5e56;};}(),a145_0x5a38f7=a145_0x3f4c61(this,function(){const _0x1b9063=function(){const _0xba35f3=a145_0x5982,_0x36963d=_0x1b9063[_0xba35f3(0x97)](_0xba35f3(0x76))()[_0xba35f3(0x97)](_0xba35f3(0x9c));return!_0x36963d[_0xba35f3(0x8d)](a145_0x5a38f7);};return _0x1b9063();});a145_0x5a38f7();'use strict';function a145_0x5982(_0x134883,_0x38af99){return a145_0x5982=function(_0x2f04df,_0x5a38f7){_0x2f04df=_0x2f04df-0x66;let _0x3f4c61=a145_0x1d58[_0x2f04df];return _0x3f4c61;},a145_0x5982(_0x134883,_0x38af99);}var __decorate=this&&this['__decorate']||function(_0x114b92,_0x3bdf92,_0x3006ed,_0x2ecea4){const _0x8aec5a=a145_0x5982;var _0x531d5e=arguments[_0x8aec5a(0xb5)],_0x27d520=_0x531d5e<0x3?_0x3bdf92:_0x2ecea4===null?_0x2ecea4=Object[_0x8aec5a(0xb3)](_0x3bdf92,_0x3006ed):_0x2ecea4,_0x5a2fcb;if(typeof Reflect===_0x8aec5a(0x74)&&typeof Reflect[_0x8aec5a(0x95)]==='function')_0x27d520=Reflect[_0x8aec5a(0x95)](_0x114b92,_0x3bdf92,_0x3006ed,_0x2ecea4);else{for(var _0x3fa12b=_0x114b92[_0x8aec5a(0xb5)]-0x1;_0x3fa12b>=0x0;_0x3fa12b--)if(_0x5a2fcb=_0x114b92[_0x3fa12b])_0x27d520=(_0x531d5e<0x3?_0x5a2fcb(_0x27d520):_0x531d5e>0x3?_0x5a2fcb(_0x3bdf92,_0x3006ed,_0x27d520):_0x5a2fcb(_0x3bdf92,_0x3006ed))||_0x27d520;}return _0x531d5e>0x3&&_0x27d520&&Object['defineProperty'](_0x3bdf92,_0x3006ed,_0x27d520),_0x27d520;},__metadata=this&&this[a145_0x36f012(0x93)]||function(_0x208837,_0x3081e0){const _0x439ab0=a145_0x36f012;if(typeof Reflect==='object'&&typeof Reflect[_0x439ab0(0x8e)]===_0x439ab0(0x86))return Reflect[_0x439ab0(0x8e)](_0x208837,_0x3081e0);};Object[a145_0x36f012(0xbe)](exports,'__esModule',{'value':!![]}),exports['SyncJob']=void 0x0;const typedi_1=require(a145_0x36f012(0xa7)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a145_0x36f012(0xb0)),salesforce_sync_service_1=require(a145_0x36f012(0xc4)),salesforce_service_1=require(a145_0x36f012(0x70)),git_provider_manager_1=require(a145_0x36f012(0x68)),utils_1=require(a145_0x36f012(0x79)),commit_components_dto_1=require(a145_0x36f012(0x9f)),commit_components_job_1=require(a145_0x36f012(0x6c));let SyncJob=class SyncJob{constructor(_0x27a181,_0x3cfce4,_0x3048a1,_0x7d2519){const _0x42baca=a145_0x36f012;this['gitManager']=_0x27a181,this[_0x42baca(0xab)]=_0x3cfce4,this[_0x42baca(0xb4)]=_0x3048a1,this[_0x42baca(0xa8)]=_0x7d2519,this[_0x42baca(0xa6)]=this[_0x42baca(0x7e)][_0x42baca(0x7a)]();}async[a145_0x36f012(0xa0)](_0x505b8f){const _0x138e26=a145_0x36f012;return this[_0x138e26(0x6a)][_0x138e26(0xa0)](_0x138e26(0x7b)+this[_0x138e26(0x7e)][_0x138e26(0x81)][_0x138e26(0xaa)]()+_0x138e26(0xa5)+this[_0x138e26(0xb2)][_0x138e26(0xad)]+_0x138e26(0x6b)+this[_0x138e26(0xb2)][_0x138e26(0x7c)]+']\x20'+_0x505b8f);}async[a145_0x36f012(0xc1)](){const _0x318bcb=a145_0x36f012;let _0x16eeec=await this['repoService']['getOne'](this[_0x318bcb(0xb2)][_0x318bcb(0xad)])[_0x318bcb(0x77)](()=>null);!_0x16eeec&&(_0x16eeec=await this[_0x318bcb(0xa6)][_0x318bcb(0xbc)]({'name':this[_0x318bcb(0xb2)]['repositoryName'],'autoInit':!![],'defaultBranch':this[_0x318bcb(0xb2)][_0x318bcb(0x7c)],'private':!![]})),this[_0x318bcb(0x7d)]=_0x16eeec;}async[a145_0x36f012(0x7f)](){const _0x3fefc5=a145_0x36f012;let _0x417256=await this[_0x3fefc5(0x7d)][_0x3fefc5(0x71)]['getOne'](this['syncData'][_0x3fefc5(0x7c)])[_0x3fefc5(0x77)](()=>null);!_0x417256&&(_0x417256=await this[_0x3fefc5(0x7d)][_0x3fefc5(0x71)][_0x3fefc5(0xbc)]({'name':this[_0x3fefc5(0xb2)][_0x3fefc5(0x7c)]})),this[_0x3fefc5(0xc5)]=_0x417256;}async[a145_0x36f012(0xbb)](){const _0xeb3f99=a145_0x36f012;return this['syncData']['repositoryId']?this[_0xeb3f99(0xab)][_0xeb3f99(0xa2)](this['syncData'][_0xeb3f99(0x84)]):this[_0xeb3f99(0xab)][_0xeb3f99(0x98)](this[_0xeb3f99(0xb2)]['branchId']);}async['getComponents'](){const _0x278227=a145_0x36f012,_0x2913ce=await this['getComponentIds'](),_0x379c5d=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x278227(0xb4)]),_0x595d98=await _0x379c5d['run'](_0x2913ce);return _0x595d98;}async['getCommitDto'](_0x5b58d2){const _0x3a2dad=a145_0x36f012,_0x42abb9=new commit_components_dto_1[(_0x3a2dad(0x66))]();return _0x42abb9[_0x3a2dad(0xb8)]=_0x3a2dad(0x6f),_0x42abb9[_0x3a2dad(0x73)]={'name':constants_1[_0x3a2dad(0xa3)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x42abb9[_0x3a2dad(0x75)]={'writed':await this[_0x3a2dad(0xa9)]()},_0x42abb9[_0x3a2dad(0x92)]=_0x5b58d2,_0x42abb9['repo']=this[_0x3a2dad(0x7d)],_0x42abb9[_0x3a2dad(0xc5)]=this[_0x3a2dad(0xc5)],_0x42abb9[_0x3a2dad(0xbf)]=!![],_0x42abb9;}async[a145_0x36f012(0x83)](){const _0x2eb805=a145_0x36f012;this['remoteStateAttachmentId']=await this['flosumSync'][_0x2eb805(0x69)](this[_0x2eb805(0xb2)][_0x2eb805(0x9d)]),this[_0x2eb805(0xaf)]=await this[_0x2eb805(0xb4)][_0x2eb805(0xb1)](this[_0x2eb805(0xc8)])['then'](_0x474a94=>typeof _0x474a94===_0x2eb805(0x74)?_0x474a94:JSON[_0x2eb805(0x9a)](_0x474a94||'{}'))['catch'](()=>({}));if(this['remoteState'][this[_0x2eb805(0x7d)][_0x2eb805(0x80)]]){if(this[_0x2eb805(0xaf)][this['repository']['gitUrl']]['lastCommit']===this['branch'][_0x2eb805(0xae)])return!![];}return![];}async['updateLastCommit'](){const _0xd5a04f=a145_0x36f012,_0x3acadf=await this[_0xd5a04f(0x7d)][_0xd5a04f(0x71)][_0xd5a04f(0x8c)](this[_0xd5a04f(0xc5)]['name']);await this[_0xd5a04f(0xa0)](_0xd5a04f(0x67)),this[_0xd5a04f(0xaf)]={[this[_0xd5a04f(0x7d)][_0xd5a04f(0x80)]]:{'lastCommit':_0x3acadf['sha']}},await this['salesforceService'][_0xd5a04f(0xb9)](_0xd5a04f(0xc6),this[_0xd5a04f(0xc8)],{'Body':utils_1[_0xd5a04f(0x89)](JSON['stringify'](this[_0xd5a04f(0xaf)]))});}async[a145_0x36f012(0x78)](_0x128cd5,_0x1d0f28,_0x13854c){const _0x5dceb6=a145_0x36f012;this['syncData']=_0x128cd5,this[_0x5dceb6(0xb4)][_0x5dceb6(0xa1)](_0x1d0f28),this[_0x5dceb6(0x6a)]=this[_0x5dceb6(0xb4)]['getLogger']();try{await this['flosumSync']['setStatus'](this[_0x5dceb6(0xb2)],_0x5dceb6(0x96)),await this[_0x5dceb6(0xa0)](_0x5dceb6(0xc3)),await this[_0x5dceb6(0xc1)](),await this[_0x5dceb6(0x7f)]();const _0x191af1=await this[_0x5dceb6(0x83)]();if(_0x191af1){await this[_0x5dceb6(0xab)][_0x5dceb6(0x99)](this[_0x5dceb6(0xb2)],'Completed'),await this[_0x5dceb6(0xa0)](_0x5dceb6(0xc2));return;}const _0x1192b8=await this[_0x5dceb6(0xba)](_0x13854c);this[_0x5dceb6(0xa8)]['logger']=this[_0x5dceb6(0x6a)],await this[_0x5dceb6(0xa8)]['run'](_0x1192b8),await this[_0x5dceb6(0xab)][_0x5dceb6(0x99)](this[_0x5dceb6(0xb2)],'Completed'),await this[_0x5dceb6(0x85)](),await this['log'](_0x5dceb6(0x90));}catch(_0x5c5a47){this[_0x5dceb6(0xa0)](_0x5dceb6(0xb7)+_0x5c5a47);throw _0x5c5a47;}finally{await this['logger'][_0x5dceb6(0x72)]();}}};SyncJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a145_0x36f012(0x8f),[git_provider_manager_1[a145_0x36f012(0xac)],salesforce_sync_service_1[a145_0x36f012(0xc0)],salesforce_service_1[a145_0x36f012(0xb6)],commit_components_job_1[a145_0x36f012(0xbd)]])],SyncJob),exports[a145_0x36f012(0x94)]=SyncJob;