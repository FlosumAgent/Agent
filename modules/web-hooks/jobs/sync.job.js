const a139_0x3863=['GitProviderManager','731219suMRTj','componentsIds','flosumSync','getCommitDto','getBranchComponents','sfLogger','640171WILJhj','user','4943YmRMIg','branchId','61705uDWSDi','126001Uzsvmw','syncData','Service','apply','createBranchIfNotExists','length','gitUrl','remoteStateAttachmentId','catch','branch','patchObject','865524qaYCaH','[INFO]\x20Branch\x20synchronized.\x20Skip','In\x20Progress','design:paramtypes','remoteState','message','createRepositoryIfNotExists','CommitComponentsDto','932453DPRVOY','SalesforceSyncService','lastCommit','stringify','SalesforceService','19aretsi','SyncJob','gitManager','../dto/commit-components.dto','salesforceService','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','run','repository','../../shared/utils','getOne','sha','getComponentIds','branchName','repositoryId','[INFO]\x20Start\x20sync\x20job','object','function','objectId','getComponentsFromRepository','setLoggerId','./commit-components.job','updateLastCommit','[INFO]\x20Update\x20remote\x20state.','18BMOLvj','Completed','commitJob','getOwnPropertyDescriptor','repositoryName','typedi','11siNeWH','create','getRepoService','CommitComponentsJob','return\x20/\x22\x20+\x20this\x20+\x20\x22/','setStatus','metadata','defineProperty','repoService','constructor','[INFO]\x20Sync\x20job\x20done.','branches','convertToSFDX','then','DEFAULT_GIT_USER_EMAIL','DEFAULT_GIT_USER_NAME','../../salesforce/services/salesforce-sync.service'];const a139_0x4cf951=a139_0x35f7;(function(_0x2fb02a,_0x479cf0){const _0x299362=a139_0x35f7;while(!![]){try{const _0x451292=-parseInt(_0x299362(0x11c))+parseInt(_0x299362(0x122))+parseInt(_0x299362(0x10a))*parseInt(_0x299362(0x124))+parseInt(_0x299362(0x132))+parseInt(_0x299362(0xe8))+-parseInt(_0x299362(0x126))*-parseInt(_0x299362(0xed))+-parseInt(_0x299362(0x104))*parseInt(_0x299362(0x127));if(_0x451292===_0x479cf0)break;else _0x2fb02a['push'](_0x2fb02a['shift']());}catch(_0x5278d4){_0x2fb02a['push'](_0x2fb02a['shift']());}}}(a139_0x3863,0xa284f));const a139_0x3a0f2d=function(){let _0x46cf81=!![];return function(_0x368d8d,_0x29e76a){const _0x4c06d1=_0x46cf81?function(){const _0x5e8ab2=a139_0x35f7;if(_0x29e76a){const _0x17bf65=_0x29e76a[_0x5e8ab2(0x12a)](_0x368d8d,arguments);return _0x29e76a=null,_0x17bf65;}}:function(){};return _0x46cf81=![],_0x4c06d1;};}(),a139_0x450626=a139_0x3a0f2d(this,function(){const _0xd93d5e=function(){const _0x183c9a=a139_0x35f7,_0x26a044=_0xd93d5e[_0x183c9a(0x113)](_0x183c9a(0x10e))()['constructor'](_0x183c9a(0xf2));return!_0x26a044['test'](a139_0x450626);};return _0xd93d5e();});a139_0x450626();'use strict';function a139_0x35f7(_0x32f9f0,_0x3b58bb){return a139_0x35f7=function(_0x2cd555,_0x450626){_0x2cd555=_0x2cd555-0xe6;let _0x3a0f2d=a139_0x3863[_0x2cd555];return _0x3a0f2d;},a139_0x35f7(_0x32f9f0,_0x3b58bb);}var __decorate=this&&this['__decorate']||function(_0x42d970,_0x394141,_0xedbaca,_0x350140){const _0x149a4e=a139_0x35f7;var _0x388bd6=arguments[_0x149a4e(0x12c)],_0xc73d7e=_0x388bd6<0x3?_0x394141:_0x350140===null?_0x350140=Object[_0x149a4e(0x107)](_0x394141,_0xedbaca):_0x350140,_0x54bcf9;if(typeof Reflect===_0x149a4e(0xfc)&&typeof Reflect['decorate']===_0x149a4e(0xfd))_0xc73d7e=Reflect['decorate'](_0x42d970,_0x394141,_0xedbaca,_0x350140);else{for(var _0x36415d=_0x42d970[_0x149a4e(0x12c)]-0x1;_0x36415d>=0x0;_0x36415d--)if(_0x54bcf9=_0x42d970[_0x36415d])_0xc73d7e=(_0x388bd6<0x3?_0x54bcf9(_0xc73d7e):_0x388bd6>0x3?_0x54bcf9(_0x394141,_0xedbaca,_0xc73d7e):_0x54bcf9(_0x394141,_0xedbaca))||_0xc73d7e;}return _0x388bd6>0x3&&_0xc73d7e&&Object[_0x149a4e(0x111)](_0x394141,_0xedbaca,_0xc73d7e),_0xc73d7e;},__metadata=this&&this['__metadata']||function(_0x32b5ed,_0x5abe15){const _0xfe1b5c=a139_0x35f7;if(typeof Reflect===_0xfe1b5c(0xfc)&&typeof Reflect[_0xfe1b5c(0x110)]===_0xfe1b5c(0xfd))return Reflect[_0xfe1b5c(0x110)](_0x32b5ed,_0x5abe15);};Object[a139_0x4cf951(0x111)](exports,'__esModule',{'value':!![]}),exports[a139_0x4cf951(0xee)]=void 0x0;const typedi_1=require(a139_0x4cf951(0x109)),constants_1=require('../../../constants'),salesforce_sync_service_1=require(a139_0x4cf951(0x11a)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require('../../shared/git-provider.manager'),utils_1=require(a139_0x4cf951(0xf5)),commit_components_dto_1=require(a139_0x4cf951(0xf0)),commit_components_job_1=require(a139_0x4cf951(0x101));let SyncJob=class SyncJob{constructor(_0x202e57,_0x3921bb,_0x30ec2f,_0x5e5173){const _0x447e7f=a139_0x4cf951;this[_0x447e7f(0xef)]=_0x202e57,this['flosumSync']=_0x3921bb,this[_0x447e7f(0xf1)]=_0x30ec2f,this['commitJob']=_0x5e5173,this[_0x447e7f(0x112)]=this['gitManager'][_0x447e7f(0x10c)](),_0x5e5173['on']('log',_0x5e23a6=>this[_0x447e7f(0x121)](_0x5e23a6));}async['sfLogger'](_0x1015ab){const _0x17b7db=a139_0x4cf951;return this[_0x17b7db(0xf1)]['sendLog']('[SYNC]\x20[Repository:\x20'+this[_0x17b7db(0x128)][_0x17b7db(0x108)]+']\x20[Branch:\x20'+this[_0x17b7db(0x128)][_0x17b7db(0xf9)]+']\x20'+_0x1015ab);}async[a139_0x4cf951(0xe6)](){const _0x34a269=a139_0x4cf951;let _0x22da54=await this['repoService'][_0x34a269(0xf6)](this['syncData'][_0x34a269(0x108)])[_0x34a269(0x12f)](()=>null);!_0x22da54&&(_0x22da54=await this[_0x34a269(0x112)][_0x34a269(0x10b)]({'name':this[_0x34a269(0x128)][_0x34a269(0x108)],'autoInit':!![],'defaultBranch':this['syncData'][_0x34a269(0xf9)],'private':!![]})),this['repository']=_0x22da54;}async[a139_0x4cf951(0x12b)](){const _0x30586e=a139_0x4cf951;let _0x5aaad0=await this[_0x30586e(0xf4)][_0x30586e(0x115)][_0x30586e(0xf6)](this[_0x30586e(0x128)][_0x30586e(0xf9)])[_0x30586e(0x12f)](()=>null);!_0x5aaad0&&(_0x5aaad0=await this[_0x30586e(0xf4)][_0x30586e(0x115)]['create']({'name':this[_0x30586e(0x128)][_0x30586e(0xf9)]})),this[_0x30586e(0x130)]=_0x5aaad0;}async[a139_0x4cf951(0xf8)](){const _0x370b2b=a139_0x4cf951;return this[_0x370b2b(0x128)][_0x370b2b(0xfa)]?this['flosumSync'][_0x370b2b(0xff)](this[_0x370b2b(0x128)][_0x370b2b(0xfa)]):this['flosumSync'][_0x370b2b(0x120)](this['syncData'][_0x370b2b(0x125)]);}async[a139_0x4cf951(0x11f)](_0xefad2d){const _0x3cb0e7=a139_0x4cf951,_0x323358=new commit_components_dto_1[(_0x3cb0e7(0xe7))]();return _0x323358[_0x3cb0e7(0x137)]='Sync\x20repository',_0x323358[_0x3cb0e7(0x123)]={'name':constants_1[_0x3cb0e7(0x119)],'email':constants_1[_0x3cb0e7(0x118)]},_0x323358[_0x3cb0e7(0x11d)]=await this['getComponentIds'](),_0x323358[_0x3cb0e7(0x116)]=_0xefad2d,_0x323358['repo']=this[_0x3cb0e7(0xf4)],_0x323358[_0x3cb0e7(0x130)]=this[_0x3cb0e7(0x130)],_0x323358;}async['checkSyncStatus'](){const _0xfb16e9=a139_0x4cf951;this[_0xfb16e9(0x12e)]=await this[_0xfb16e9(0x11e)]['getAttachmentIdByParent'](this[_0xfb16e9(0x128)][_0xfb16e9(0xfe)]),this['remoteState']=await this[_0xfb16e9(0xf1)]['retrieveAttachment'](this['remoteStateAttachmentId'])[_0xfb16e9(0x117)](_0xc47bd4=>typeof _0xc47bd4===_0xfb16e9(0xfc)?_0xc47bd4:JSON['parse'](_0xc47bd4||'{}'))[_0xfb16e9(0x12f)](()=>({}));if(this[_0xfb16e9(0x136)][this['repository'][_0xfb16e9(0x12d)]]){if(this[_0xfb16e9(0x136)][this[_0xfb16e9(0xf4)][_0xfb16e9(0x12d)]][_0xfb16e9(0xea)]===this['branch'][_0xfb16e9(0xf7)])return!![];}return![];}async[a139_0x4cf951(0x102)](){const _0x5e9b7c=a139_0x4cf951;var _0x4a72a5,_0x36a811;const _0x1ae971=await this[_0x5e9b7c(0xf4)][_0x5e9b7c(0x115)][_0x5e9b7c(0xf6)](this['branch']['name']);await this[_0x5e9b7c(0x121)](_0x5e9b7c(0x103)),(_0x4a72a5=this[_0x5e9b7c(0x136)])[_0x36a811=this[_0x5e9b7c(0xf4)]['gitUrl']]||(_0x4a72a5[_0x36a811]={'lastCommit':''}),this[_0x5e9b7c(0x136)][this[_0x5e9b7c(0xf4)][_0x5e9b7c(0x12d)]][_0x5e9b7c(0xea)]=_0x1ae971[_0x5e9b7c(0xf7)],await this[_0x5e9b7c(0xf1)][_0x5e9b7c(0x131)]('Attachment',this[_0x5e9b7c(0x12e)],{'Body':utils_1['encodeBase64'](JSON[_0x5e9b7c(0xeb)](this[_0x5e9b7c(0x136)]))});}async[a139_0x4cf951(0xf3)](_0x44bdf7,_0x500c6c,_0x112885){const _0x272ed5=a139_0x4cf951;this[_0x272ed5(0x128)]=_0x44bdf7,this[_0x272ed5(0xf1)][_0x272ed5(0x100)](_0x500c6c),await this[_0x272ed5(0x11e)][_0x272ed5(0x10f)](this[_0x272ed5(0x128)],_0x272ed5(0x134)),await this[_0x272ed5(0x121)](_0x272ed5(0xfb)),await this[_0x272ed5(0xe6)](),await this['createBranchIfNotExists']();const _0xdb2349=await this['checkSyncStatus']();if(_0xdb2349){await this[_0x272ed5(0x11e)][_0x272ed5(0x10f)](this[_0x272ed5(0x128)],_0x272ed5(0x105)),await this[_0x272ed5(0x121)](_0x272ed5(0x133));return;}const _0x235339=await this[_0x272ed5(0x11f)](_0x112885);await this[_0x272ed5(0x106)][_0x272ed5(0xf3)](_0x235339),await this['flosumSync'][_0x272ed5(0x10f)](this['syncData'],'Completed'),await this[_0x272ed5(0x102)](),await this['sfLogger'](_0x272ed5(0x114));}};SyncJob=__decorate([typedi_1[a139_0x4cf951(0x129)]({'transient':!![]}),__metadata(a139_0x4cf951(0x135),[git_provider_manager_1[a139_0x4cf951(0x11b)],salesforce_sync_service_1[a139_0x4cf951(0xe9)],salesforce_service_1[a139_0x4cf951(0xec)],commit_components_job_1[a139_0x4cf951(0x10d)]])],SyncJob),exports[a139_0x4cf951(0xee)]=SyncJob;