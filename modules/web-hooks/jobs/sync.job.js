const a145_0x3f7b=['../../shared/utils','constructor',']\x20[Branch:\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','logger','remoteStateAttachmentId','./commit-components.job','sha','SyncJob','CommitComponentsDto','gitManager','getAttachmentId','repository','updateLastCommit','stringify','__esModule','repositoryId','setLoggerId','../../../constants','getComponentsFromRepository','DEFAULT_GIT_USER_NAME','decorate','getComponentIds','components','object','[SYNC]\x20[','Sync\x20repository','139819mfNqsm','branchId','checkSyncStatus','toUpperCase','Service','encodeBase64','Attachment','setStatus','metadata','function','getRepoService','provider','createRepositoryIfNotExists','force','salesforceService','[INFO]\x20Sync\x20job\x20done.','[INFO]\x20Start\x20sync\x20job','CommitComponentsJob','SalesforceService','repoService','SalesforceSyncService','gitUrl','flosumSync','repositoryName','commitJob','log','then','126182bJIwkt','retrieveAttachment','DEFAULT_GIT_USER_EMAIL','send','getOne','lastCommit','patchObject','defineProperty','repo','syncData','63YULtUW','apply','299641rSvcUI','241gGCgqL','../../salesforce/services/salesforce-retriever.service','user','catch','branchName','In\x20Progress','SalesforceRetrieverService','getCommitDto','120848dkmCGB','88XOipyS','createBranchIfNotExists','message','71382rqhIxR','[INFO]\x20Update\x20remote\x20state.','create','remoteState','run',']\x20[Repository:\x20','GitProviderManager','getOwnPropertyDescriptor','length','getComponents','design:paramtypes','[INFO]\x20Branch\x20synchronized.\x20Skip','name','getBranchComponents','branch','8969EfpOYJ','__metadata','1tDbrPF'];const a145_0x40a9b7=a145_0x47fa;(function(_0x53fe4f,_0x15cdb4){const _0x345702=a145_0x47fa;while(!![]){try{const _0x59b2a2=-parseInt(_0x345702(0x1ad))+-parseInt(_0x345702(0x1a1))+parseInt(_0x345702(0x1b7))*-parseInt(_0x345702(0x1ae))+parseInt(_0x345702(0x1b6))+parseInt(_0x345702(0x1ba))+-parseInt(_0x345702(0x1cb))*parseInt(_0x345702(0x1e7))+-parseInt(_0x345702(0x1ab))*-parseInt(_0x345702(0x1c9));if(_0x59b2a2===_0x15cdb4)break;else _0x53fe4f['push'](_0x53fe4f['shift']());}catch(_0x317010){_0x53fe4f['push'](_0x53fe4f['shift']());}}}(a145_0x3f7b,0x299bb));const a145_0x1a007b=function(){let _0x169a58=!![];return function(_0x456dfe,_0x2f7987){const _0x5c9dee=_0x169a58?function(){const _0x29d66d=a145_0x47fa;if(_0x2f7987){const _0x3bca31=_0x2f7987[_0x29d66d(0x1ac)](_0x456dfe,arguments);return _0x2f7987=null,_0x3bca31;}}:function(){};return _0x169a58=![],_0x5c9dee;};}(),a145_0x276642=a145_0x1a007b(this,function(){const _0x340cdc=function(){const _0xeb5e41=a145_0x47fa,_0x1eb418=_0x340cdc[_0xeb5e41(0x1cd)](_0xeb5e41(0x1cf))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1eb418['test'](a145_0x276642);};return _0x340cdc();});function a145_0x47fa(_0x3faae1,_0x2c92f6){return a145_0x47fa=function(_0x6e2c23,_0x276642){_0x6e2c23=_0x6e2c23-0x187;let _0x1a007b=a145_0x3f7b[_0x6e2c23];return _0x1a007b;},a145_0x47fa(_0x3faae1,_0x2c92f6);}a145_0x276642();'use strict';var __decorate=this&&this['__decorate']||function(_0x508b67,_0x14d020,_0x433fba,_0x208df3){const _0x486471=a145_0x47fa;var _0x87007f=arguments[_0x486471(0x1c2)],_0x29170b=_0x87007f<0x3?_0x14d020:_0x208df3===null?_0x208df3=Object[_0x486471(0x1c1)](_0x14d020,_0x433fba):_0x208df3,_0x434a4e;if(typeof Reflect===_0x486471(0x1e4)&&typeof Reflect['decorate']==='function')_0x29170b=Reflect[_0x486471(0x1e1)](_0x508b67,_0x14d020,_0x433fba,_0x208df3);else{for(var _0xb8983b=_0x508b67[_0x486471(0x1c2)]-0x1;_0xb8983b>=0x0;_0xb8983b--)if(_0x434a4e=_0x508b67[_0xb8983b])_0x29170b=(_0x87007f<0x3?_0x434a4e(_0x29170b):_0x87007f>0x3?_0x434a4e(_0x14d020,_0x433fba,_0x29170b):_0x434a4e(_0x14d020,_0x433fba))||_0x29170b;}return _0x87007f>0x3&&_0x29170b&&Object[_0x486471(0x1a8)](_0x14d020,_0x433fba,_0x29170b),_0x29170b;},__metadata=this&&this[a145_0x40a9b7(0x1ca)]||function(_0x224431,_0x177bbd){const _0x5a3e89=a145_0x40a9b7;if(typeof Reflect==='object'&&typeof Reflect[_0x5a3e89(0x18e)]===_0x5a3e89(0x18f))return Reflect[_0x5a3e89(0x18e)](_0x224431,_0x177bbd);};Object[a145_0x40a9b7(0x1a8)](exports,a145_0x40a9b7(0x1db),{'value':!![]}),exports[a145_0x40a9b7(0x1d4)]=void 0x0;const typedi_1=require('typedi'),constants_1=require(a145_0x40a9b7(0x1de)),salesforce_retriever_service_1=require(a145_0x40a9b7(0x1af)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require('../../shared/git-provider.manager'),utils_1=require(a145_0x40a9b7(0x1cc)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a145_0x40a9b7(0x1d2));let SyncJob=class SyncJob{constructor(_0x367ebe,_0x5405a5,_0x2151bd,_0x50d867){const _0x34aac2=a145_0x40a9b7;this[_0x34aac2(0x1d6)]=_0x367ebe,this[_0x34aac2(0x19c)]=_0x5405a5,this[_0x34aac2(0x194)]=_0x2151bd,this[_0x34aac2(0x19e)]=_0x50d867,this[_0x34aac2(0x199)]=this[_0x34aac2(0x1d6)][_0x34aac2(0x190)]();}async[a145_0x40a9b7(0x19f)](_0x170edb){const _0xe532b4=a145_0x40a9b7;return this[_0xe532b4(0x1d0)]['log'](_0xe532b4(0x1e5)+this['gitManager'][_0xe532b4(0x191)][_0xe532b4(0x189)]()+_0xe532b4(0x1bf)+this[_0xe532b4(0x1aa)][_0xe532b4(0x19d)]+_0xe532b4(0x1ce)+this[_0xe532b4(0x1aa)][_0xe532b4(0x1b2)]+']\x20'+_0x170edb);}async[a145_0x40a9b7(0x192)](){const _0x8b28f0=a145_0x40a9b7;let _0x50e830=await this[_0x8b28f0(0x199)][_0x8b28f0(0x1a5)](this[_0x8b28f0(0x1aa)][_0x8b28f0(0x19d)])[_0x8b28f0(0x1b1)](()=>null);!_0x50e830&&(_0x50e830=await this['repoService'][_0x8b28f0(0x1bc)]({'name':this[_0x8b28f0(0x1aa)][_0x8b28f0(0x19d)],'autoInit':!![],'defaultBranch':this[_0x8b28f0(0x1aa)]['branchName'],'private':!![]})),this[_0x8b28f0(0x1d8)]=_0x50e830;}async[a145_0x40a9b7(0x1b8)](){const _0x92d7e9=a145_0x40a9b7;let _0x33d2b9=await this['repository']['branches'][_0x92d7e9(0x1a5)](this['syncData'][_0x92d7e9(0x1b2)])[_0x92d7e9(0x1b1)](()=>null);!_0x33d2b9&&(_0x33d2b9=await this[_0x92d7e9(0x1d8)]['branches'][_0x92d7e9(0x1bc)]({'name':this[_0x92d7e9(0x1aa)]['branchName']})),this['branch']=_0x33d2b9;}async['getComponentIds'](){const _0x190f83=a145_0x40a9b7;return this['syncData'][_0x190f83(0x1dc)]?this[_0x190f83(0x19c)][_0x190f83(0x1df)](this[_0x190f83(0x1aa)][_0x190f83(0x1dc)]):this[_0x190f83(0x19c)][_0x190f83(0x1c7)](this[_0x190f83(0x1aa)][_0x190f83(0x187)]);}async['getComponents'](){const _0x37c232=a145_0x40a9b7,_0x5dd1ce=await this[_0x37c232(0x1e2)](),_0xdf6123=new salesforce_retriever_service_1[(_0x37c232(0x1b4))](this[_0x37c232(0x194)]),_0x37affa=await _0xdf6123[_0x37c232(0x1be)](_0x5dd1ce);return _0x37affa;}async['getCommitDto'](_0x5ca639){const _0x62da8c=a145_0x40a9b7,_0x4ab9b2=new commit_components_dto_1[(_0x62da8c(0x1d5))]();return _0x4ab9b2[_0x62da8c(0x1b9)]=_0x62da8c(0x1e6),_0x4ab9b2[_0x62da8c(0x1b0)]={'name':constants_1[_0x62da8c(0x1e0)],'email':constants_1[_0x62da8c(0x1a3)]},_0x4ab9b2[_0x62da8c(0x1e3)]={'writed':await this[_0x62da8c(0x1c3)]()},_0x4ab9b2['convertToSFDX']=_0x5ca639,_0x4ab9b2[_0x62da8c(0x1a9)]=this[_0x62da8c(0x1d8)],_0x4ab9b2['branch']=this[_0x62da8c(0x1c8)],_0x4ab9b2[_0x62da8c(0x193)]=!![],_0x4ab9b2;}async[a145_0x40a9b7(0x188)](){const _0x3df2ef=a145_0x40a9b7;this[_0x3df2ef(0x1d1)]=await this[_0x3df2ef(0x19c)][_0x3df2ef(0x1d7)](this[_0x3df2ef(0x1aa)]),this['remoteState']=await this[_0x3df2ef(0x194)][_0x3df2ef(0x1a2)](this[_0x3df2ef(0x1d1)])[_0x3df2ef(0x1a0)](_0x40fb68=>typeof _0x40fb68===_0x3df2ef(0x1e4)?_0x40fb68:JSON['parse'](_0x40fb68||'{}'))[_0x3df2ef(0x1b1)](()=>({}));if(this[_0x3df2ef(0x1bd)][this[_0x3df2ef(0x1d8)][_0x3df2ef(0x19b)]]){if(this[_0x3df2ef(0x1bd)][this['repository']['gitUrl']][_0x3df2ef(0x1a6)]===this[_0x3df2ef(0x1c8)]['sha'])return!![];}return![];}async[a145_0x40a9b7(0x1d9)](){const _0x668391=a145_0x40a9b7,_0x3a33ed=await this[_0x668391(0x1d8)]['branches'][_0x668391(0x1a5)](this[_0x668391(0x1c8)][_0x668391(0x1c6)]);await this[_0x668391(0x19f)](_0x668391(0x1bb)),this[_0x668391(0x1bd)]={[this['repository'][_0x668391(0x19b)]]:{'lastCommit':_0x3a33ed[_0x668391(0x1d3)]}},await this['salesforceService'][_0x668391(0x1a7)](_0x668391(0x18c),this[_0x668391(0x1d1)],{'Body':utils_1[_0x668391(0x18b)](JSON[_0x668391(0x1da)](this[_0x668391(0x1bd)]))});}async[a145_0x40a9b7(0x1be)](_0x187505,_0x4c0762,_0x3970c8){const _0xb332f9=a145_0x40a9b7;this[_0xb332f9(0x1aa)]=_0x187505,this[_0xb332f9(0x194)][_0xb332f9(0x1dd)](_0x4c0762),this[_0xb332f9(0x1d0)]=this[_0xb332f9(0x194)]['getLogger']();try{await this[_0xb332f9(0x19c)][_0xb332f9(0x18d)](this[_0xb332f9(0x1aa)],_0xb332f9(0x1b3)),await this[_0xb332f9(0x19f)](_0xb332f9(0x196)),await this[_0xb332f9(0x192)](),await this[_0xb332f9(0x1b8)]();const _0x5955c5=await this['checkSyncStatus']();if(_0x5955c5){await this['flosumSync']['setStatus'](this[_0xb332f9(0x1aa)],'Completed'),await this[_0xb332f9(0x19f)](_0xb332f9(0x1c5));return;}const _0x3729b7=await this[_0xb332f9(0x1b5)](_0x3970c8);this['commitJob'][_0xb332f9(0x1d0)]=this['logger'],await this[_0xb332f9(0x19e)]['run'](_0x3729b7),await this[_0xb332f9(0x19c)][_0xb332f9(0x18d)](this[_0xb332f9(0x1aa)],'Completed'),await this[_0xb332f9(0x1d9)](),await this[_0xb332f9(0x19f)](_0xb332f9(0x195));}catch(_0x30368a){throw _0x30368a;}finally{await this[_0xb332f9(0x1d0)][_0xb332f9(0x1a4)]();}}};SyncJob=__decorate([typedi_1[a145_0x40a9b7(0x18a)]({'transient':!![]}),__metadata(a145_0x40a9b7(0x1c4),[git_provider_manager_1[a145_0x40a9b7(0x1c0)],salesforce_sync_service_1[a145_0x40a9b7(0x19a)],salesforce_service_1[a145_0x40a9b7(0x198)],commit_components_job_1[a145_0x40a9b7(0x197)]])],SyncJob),exports['SyncJob']=SyncJob;