const a148_0x81fdc8=a148_0x5471;(function(_0x4e4a0b,_0x1f2c6a){const _0x12f499=a148_0x5471,_0x4c2b76=_0x4e4a0b();while(!![]){try{const _0x2e0cea=parseInt(_0x12f499(0xc9))/0x1+-parseInt(_0x12f499(0xc8))/0x2*(parseInt(_0x12f499(0x87))/0x3)+parseInt(_0x12f499(0xb9))/0x4+-parseInt(_0x12f499(0xa5))/0x5*(parseInt(_0x12f499(0x9c))/0x6)+-parseInt(_0x12f499(0xb5))/0x7*(parseInt(_0x12f499(0xae))/0x8)+-parseInt(_0x12f499(0x8c))/0x9+parseInt(_0x12f499(0xc1))/0xa;if(_0x2e0cea===_0x1f2c6a)break;else _0x4c2b76['push'](_0x4c2b76['shift']());}catch(_0x1927b0){_0x4c2b76['push'](_0x4c2b76['shift']());}}}(a148_0x4368,0x2159c));const a148_0x4d63a6=function(){let _0x30d6ab=!![];return function(_0x305c80,_0x5bf2dc){const _0x49c1dd=_0x30d6ab?function(){const _0x329b9a=a148_0x5471;if(_0x5bf2dc){const _0x1c7281=_0x5bf2dc[_0x329b9a(0x82)](_0x305c80,arguments);return _0x5bf2dc=null,_0x1c7281;}}:function(){};return _0x30d6ab=![],_0x49c1dd;};}(),a148_0x3512d6=a148_0x4d63a6(this,function(){const _0x280d20=a148_0x5471;return a148_0x3512d6[_0x280d20(0x92)]()[_0x280d20(0x83)](_0x280d20(0xbb))[_0x280d20(0x92)]()[_0x280d20(0xc3)](a148_0x3512d6)[_0x280d20(0x83)]('(((.+)+)+)+$');});function a148_0x4368(){const _0x2813e4=['lastCommit','function','../../../constants','logger','typedi','getRemoteStateAttachmentId','salesforceService','6GLnBMN','getOne','getComponentsFromRepository','repositoryName','branches','SalesforceRetrieverService',']\x20[Repository:\x20','[INFO]\x20Update\x20remote\x20state.','getComponentIds','916805NNlUky','../../salesforce/services/salesforce-retriever.service','object','getComponents','sha','getOwnPropertyDescriptor','[INFO]\x20Branch\x20synchronized.\x20Skip','catch','gitUrl','5992jGBTCG','toUpperCase','convertToSFDX','log','createBranchIfNotExists','GitProviderManager','decorate','168tDPrIc','updateLastCommit','force','repository','938432afyAXI','design:paramtypes','(((.+)+)+)+$','parse','gitManager','getBranchComponents','Sync\x20repository','checkSyncStatus','1385800krlRYw','defineProperty','constructor','salesforceSync','DEFAULT_GIT_USER_NAME','branch','then','2PvoeJG','165577MDEUMe','repoService','repositoryId','[SYNC]\x20[','metadata','getLogger','getCommitDto','retrieveAttachment','syncData','string','../../salesforce/services/salesforce.service','[INFO]\x20Start\x20sync\x20job','SyncJob','name','SalesforceSyncService','updateRemoteState','getRepoService','commitJob','apply','search','branchId','setStatus','../../shared/git-provider.manager','362037XkPUeK','length','run','__decorate','SalesforceService','721305iFoGtn','user','createRepositoryIfNotExists','setLoggerId','./commit-components.job','branchName','toString','Completed',']\x20[Branch:\x20'];a148_0x4368=function(){return _0x2813e4;};return a148_0x4368();}a148_0x3512d6();'use strict';var __decorate=this&&this[a148_0x81fdc8(0x8a)]||function(_0x30b966,_0x29abda,_0x4bf982,_0x3abc02){const _0x4ae180=a148_0x81fdc8;var _0x523e99=arguments[_0x4ae180(0x88)],_0x31691f=_0x523e99<0x3?_0x29abda:_0x3abc02===null?_0x3abc02=Object[_0x4ae180(0xaa)](_0x29abda,_0x4bf982):_0x3abc02,_0x32f853;if(typeof Reflect===_0x4ae180(0xa7)&&typeof Reflect[_0x4ae180(0xb4)]===_0x4ae180(0x96))_0x31691f=Reflect['decorate'](_0x30b966,_0x29abda,_0x4bf982,_0x3abc02);else{for(var _0x444826=_0x30b966[_0x4ae180(0x88)]-0x1;_0x444826>=0x0;_0x444826--)if(_0x32f853=_0x30b966[_0x444826])_0x31691f=(_0x523e99<0x3?_0x32f853(_0x31691f):_0x523e99>0x3?_0x32f853(_0x29abda,_0x4bf982,_0x31691f):_0x32f853(_0x29abda,_0x4bf982))||_0x31691f;}return _0x523e99>0x3&&_0x31691f&&Object[_0x4ae180(0xc2)](_0x29abda,_0x4bf982,_0x31691f),_0x31691f;},__metadata=this&&this['__metadata']||function(_0x3c5772,_0x16e947){const _0x3d06fb=a148_0x81fdc8;if(typeof Reflect===_0x3d06fb(0xa7)&&typeof Reflect[_0x3d06fb(0xcd)]==='function')return Reflect[_0x3d06fb(0xcd)](_0x3c5772,_0x16e947);};Object[a148_0x81fdc8(0xc2)](exports,'__esModule',{'value':!![]}),exports[a148_0x81fdc8(0x7c)]=void 0x0;const typedi_1=require(a148_0x81fdc8(0x99)),constants_1=require(a148_0x81fdc8(0x97)),salesforce_retriever_service_1=require(a148_0x81fdc8(0xa6)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a148_0x81fdc8(0x7a)),git_provider_manager_1=require(a148_0x81fdc8(0x86)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a148_0x81fdc8(0x90));function a148_0x5471(_0x1eefb4,_0x232870){const _0x19bca1=a148_0x4368();return a148_0x5471=function(_0x3512d6,_0x4d63a6){_0x3512d6=_0x3512d6-0x78;let _0x436815=_0x19bca1[_0x3512d6];return _0x436815;},a148_0x5471(_0x1eefb4,_0x232870);}let SyncJob=class SyncJob{constructor(_0x398da0,_0x5697aa,_0x483698,_0x3a8de4){const _0x11c129=a148_0x81fdc8;this[_0x11c129(0xbd)]=_0x398da0,this[_0x11c129(0xc4)]=_0x5697aa,this['salesforceService']=_0x483698,this[_0x11c129(0x81)]=_0x3a8de4,this[_0x11c129(0xca)]=this['gitManager'][_0x11c129(0x80)]();}async[a148_0x81fdc8(0xb1)](_0x4c2f69){const _0x2b64b9=a148_0x81fdc8;return this[_0x2b64b9(0x98)]['log'](_0x2b64b9(0xcc)+this[_0x2b64b9(0xbd)]['provider'][_0x2b64b9(0xaf)]()+_0x2b64b9(0xa2)+this[_0x2b64b9(0x78)]['repositoryName']+_0x2b64b9(0x94)+this[_0x2b64b9(0x78)][_0x2b64b9(0x91)]+']\x20'+_0x4c2f69);}async[a148_0x81fdc8(0x8e)](){const _0x35eea7=a148_0x81fdc8;!this[_0x35eea7(0xb8)]&&(this[_0x35eea7(0xb8)]=await this[_0x35eea7(0xca)]['create']({'name':this['syncData'][_0x35eea7(0x9f)],'autoInit':!![],'defaultBranch':this['syncData'][_0x35eea7(0x91)],'private':!![]}));}async['createBranchIfNotExists'](){const _0x4df32d=a148_0x81fdc8;let _0x4f3113=await this['repository'][_0x4df32d(0xa0)]['getOne'](this[_0x4df32d(0x78)][_0x4df32d(0x91)])[_0x4df32d(0xac)](()=>null);!_0x4f3113&&(_0x4f3113=await this[_0x4df32d(0xb8)][_0x4df32d(0xa0)]['create']({'name':this['syncData']['branchName']})),this[_0x4df32d(0xc6)]=_0x4f3113;}async[a148_0x81fdc8(0xa4)](){const _0x91337f=a148_0x81fdc8;return this[_0x91337f(0x78)][_0x91337f(0xcb)]?this[_0x91337f(0xc4)][_0x91337f(0x9e)](this[_0x91337f(0x78)][_0x91337f(0xcb)]):this['salesforceSync'][_0x91337f(0xbe)](this[_0x91337f(0x78)][_0x91337f(0x84)]);}async[a148_0x81fdc8(0xa8)](){const _0x3f4456=a148_0x81fdc8,_0x369fb7=await this[_0x3f4456(0xa4)](),_0x1e691f=new salesforce_retriever_service_1[(_0x3f4456(0xa1))](this[_0x3f4456(0x9b)]),_0x3bf9dc=await _0x1e691f[_0x3f4456(0x89)](_0x369fb7);return _0x3bf9dc;}async['getCommitDto'](_0x12f847){const _0x3c8da9=a148_0x81fdc8,_0xdcae98=new commit_components_dto_1['CommitComponentsDto']();return _0xdcae98['message']=_0x3c8da9(0xbf),_0xdcae98[_0x3c8da9(0x8d)]={'name':constants_1[_0x3c8da9(0xc5)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0xdcae98['components']={'writed':await this[_0x3c8da9(0xa8)]()},_0xdcae98[_0x3c8da9(0xb0)]=_0x12f847,_0xdcae98['repo']=this[_0x3c8da9(0xb8)],_0xdcae98[_0x3c8da9(0xc6)]=this['branch'],_0xdcae98[_0x3c8da9(0xb7)]=!![],_0xdcae98;}async[a148_0x81fdc8(0xc0)](){const _0x5acc93=a148_0x81fdc8,_0x58fb05=await this['salesforceSync'][_0x5acc93(0x9a)](this[_0x5acc93(0x78)]),_0x874c10=await this[_0x5acc93(0x9b)][_0x5acc93(0xd0)](_0x58fb05)[_0x5acc93(0xc7)](_0x17dd5a=>typeof _0x17dd5a===_0x5acc93(0x79)?JSON[_0x5acc93(0xbc)](_0x17dd5a):_0x17dd5a)[_0x5acc93(0xac)](()=>({}));if(_0x874c10[this[_0x5acc93(0xb8)][_0x5acc93(0xad)]]){if(_0x874c10[this[_0x5acc93(0xb8)][_0x5acc93(0xad)]][_0x5acc93(0x95)]===this['branch'][_0x5acc93(0xa9)])return!![];}return![];}async['updateLastCommit'](){const _0x1a19f4=a148_0x81fdc8,_0x395285=await this[_0x1a19f4(0xb8)]['branches'][_0x1a19f4(0x9d)](this[_0x1a19f4(0xc6)][_0x1a19f4(0x7d)]);await this['log'](_0x1a19f4(0xa3));const _0x5ced4a={[this[_0x1a19f4(0xb8)]['gitUrl']]:{'lastCommit':_0x395285['sha']}};await this[_0x1a19f4(0xc4)][_0x1a19f4(0x7f)](this[_0x1a19f4(0x78)],_0x5ced4a);}async[a148_0x81fdc8(0x89)]({syncRecord:_0x3cf189,repository:_0x3f234b,loggerId:_0x5e674a,convertToSFDX:_0x10d8ef}){const _0x3727ca=a148_0x81fdc8;this['syncData']=_0x3cf189,this[_0x3727ca(0xb8)]=_0x3f234b,this['salesforceService'][_0x3727ca(0x8f)](_0x5e674a),this['logger']=this[_0x3727ca(0x9b)][_0x3727ca(0xce)]();try{await this[_0x3727ca(0xc4)][_0x3727ca(0x85)](this['syncData'],'In\x20Progress'),await this[_0x3727ca(0xb1)](_0x3727ca(0x7b)),await this['createRepositoryIfNotExists'](),await this[_0x3727ca(0xb2)]();const _0x3d4e62=await this[_0x3727ca(0xc0)]();if(_0x3d4e62){await this[_0x3727ca(0xc4)][_0x3727ca(0x85)](this[_0x3727ca(0x78)],_0x3727ca(0x93)),await this[_0x3727ca(0xb1)](_0x3727ca(0xab));return;}const _0x75ac45=await this[_0x3727ca(0xcf)](_0x10d8ef);this[_0x3727ca(0x81)][_0x3727ca(0x98)]=this[_0x3727ca(0x98)],await this[_0x3727ca(0x81)][_0x3727ca(0x89)](_0x75ac45),await this[_0x3727ca(0xc4)]['setStatus'](this['syncData'],_0x3727ca(0x93)),await this[_0x3727ca(0xb6)](),await this[_0x3727ca(0xb1)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x49f4c1){throw _0x49f4c1;}finally{await this[_0x3727ca(0x98)]['send']();}}};SyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a148_0x81fdc8(0xba),[git_provider_manager_1[a148_0x81fdc8(0xb3)],salesforce_sync_service_1[a148_0x81fdc8(0x7e)],salesforce_service_1[a148_0x81fdc8(0x8b)],commit_components_job_1['CommitComponentsJob']])],SyncJob),exports['SyncJob']=SyncJob;