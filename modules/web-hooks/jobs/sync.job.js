const a149_0x34408d=a149_0x154c;(function(_0x522c7b,_0x5b36c5){const _0xea5bfc=a149_0x154c,_0x36e87a=_0x522c7b();while(!![]){try{const _0x4132ee=-parseInt(_0xea5bfc(0xd9))/0x1*(parseInt(_0xea5bfc(0xbb))/0x2)+-parseInt(_0xea5bfc(0xb0))/0x3*(-parseInt(_0xea5bfc(0xd6))/0x4)+parseInt(_0xea5bfc(0xe0))/0x5*(-parseInt(_0xea5bfc(0xab))/0x6)+-parseInt(_0xea5bfc(0xb2))/0x7*(parseInt(_0xea5bfc(0x8c))/0x8)+parseInt(_0xea5bfc(0x94))/0x9*(parseInt(_0xea5bfc(0xc4))/0xa)+parseInt(_0xea5bfc(0xdc))/0xb*(parseInt(_0xea5bfc(0xbf))/0xc)+parseInt(_0xea5bfc(0xc5))/0xd;if(_0x4132ee===_0x5b36c5)break;else _0x36e87a['push'](_0x36e87a['shift']());}catch(_0x5cb622){_0x36e87a['push'](_0x36e87a['shift']());}}}(a149_0x55eb,0xba681));const a149_0x43f8df=function(){let _0xc42cfc=!![];return function(_0x12cca8,_0x26c21b){const _0x50a80e=_0xc42cfc?function(){if(_0x26c21b){const _0x207d62=_0x26c21b['apply'](_0x12cca8,arguments);return _0x26c21b=null,_0x207d62;}}:function(){};return _0xc42cfc=![],_0x50a80e;};}(),a149_0x4cc830=a149_0x43f8df(this,function(){const _0x4182f4=a149_0x154c;return a149_0x4cc830[_0x4182f4(0xb1)]()[_0x4182f4(0xe3)]('(((.+)+)+)+$')[_0x4182f4(0xb1)]()['constructor'](a149_0x4cc830)[_0x4182f4(0xe3)](_0x4182f4(0x9a));});a149_0x4cc830();'use strict';var __decorate=this&&this[a149_0x34408d(0x9e)]||function(_0x394096,_0x4cfbf4,_0x3aa4ec,_0xeaf1b1){const _0x56f615=a149_0x34408d;var _0x45dd7a=arguments[_0x56f615(0x91)],_0x5d9d82=_0x45dd7a<0x3?_0x4cfbf4:_0xeaf1b1===null?_0xeaf1b1=Object[_0x56f615(0xa4)](_0x4cfbf4,_0x3aa4ec):_0xeaf1b1,_0xedea39;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x56f615(0xae))_0x5d9d82=Reflect[_0x56f615(0xc0)](_0x394096,_0x4cfbf4,_0x3aa4ec,_0xeaf1b1);else{for(var _0x4d9e48=_0x394096[_0x56f615(0x91)]-0x1;_0x4d9e48>=0x0;_0x4d9e48--)if(_0xedea39=_0x394096[_0x4d9e48])_0x5d9d82=(_0x45dd7a<0x3?_0xedea39(_0x5d9d82):_0x45dd7a>0x3?_0xedea39(_0x4cfbf4,_0x3aa4ec,_0x5d9d82):_0xedea39(_0x4cfbf4,_0x3aa4ec))||_0x5d9d82;}return _0x45dd7a>0x3&&_0x5d9d82&&Object[_0x56f615(0xaf)](_0x4cfbf4,_0x3aa4ec,_0x5d9d82),_0x5d9d82;},__metadata=this&&this[a149_0x34408d(0xbe)]||function(_0x387bbf,_0x378536){const _0x2fca3f=a149_0x34408d;if(typeof Reflect===_0x2fca3f(0xa0)&&typeof Reflect['metadata']===_0x2fca3f(0xae))return Reflect[_0x2fca3f(0xa8)](_0x387bbf,_0x378536);};Object[a149_0x34408d(0xaf)](exports,a149_0x34408d(0xdf),{'value':!![]}),exports['SyncJob']=void 0x0;function a149_0x55eb(){const _0x3305ef=['../../salesforce/services/salesforce-retriever.service','object','branchId','updateLastCommit','repoService','getOwnPropertyDescriptor','user','design:paramtypes','commitJob','metadata','sha','gitManager','6168fNZTlp','SyncJob','../dto/commit-components.dto','function','defineProperty','4421310AzctWG','toString','9149707KNeRsj','getComponentIds','catch','Service','SalesforceService','Sync\x20repository','Completed','toUpperCase','CommitComponentsDto','939332VbAMxs','SalesforceRetrieverService','../../salesforce/services/salesforce-sync.service','__metadata','24DSljRx','decorate','setLoggerId','setStatus','lastCommit','580WWgIBs','10747724SRmDab','string','checkSyncStatus','create','logger','[INFO]\x20Update\x20remote\x20state.','run','getComponents','convertToSFDX','DEFAULT_GIT_USER_NAME','branches','gitUrl','send','[INFO]\x20Branch\x20synchronized.\x20Skip','[SYNC]\x20[',']\x20[Branch:\x20','GitProviderManager','4ulFEiF','branch','In\x20Progress','1niTbIG','typedi','salesforceSync','2108733edlIBc','repository','getCommitDto','__esModule','3580aVAhfp','name','getRepoService','search','getBranchComponents','log','8RUwMdK','../../salesforce/services/salesforce.service','getOne','getLogger','updateRemoteState','length','syncData','salesforceService','91926JNDUBk',']\x20[Repository:\x20','branchName','[INFO]\x20Sync\x20job\x20done.','force','repositoryId','(((.+)+)+)+$','repo','SalesforceSyncService','CommitComponentsJob','__decorate'];a149_0x55eb=function(){return _0x3305ef;};return a149_0x55eb();}const typedi_1=require(a149_0x34408d(0xda)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a149_0x34408d(0x9f)),salesforce_sync_service_1=require(a149_0x34408d(0xbd)),salesforce_service_1=require(a149_0x34408d(0x8d)),git_provider_manager_1=require('../../shared/git-provider.manager'),commit_components_dto_1=require(a149_0x34408d(0xad)),commit_components_job_1=require('./commit-components.job');function a149_0x154c(_0x1caa25,_0x1ed02c){const _0x1930e6=a149_0x55eb();return a149_0x154c=function(_0x4cc830,_0x43f8df){_0x4cc830=_0x4cc830-0x8a;let _0x55ebd6=_0x1930e6[_0x4cc830];return _0x55ebd6;},a149_0x154c(_0x1caa25,_0x1ed02c);}let SyncJob=class SyncJob{constructor(_0x454b23,_0x4bb689,_0x5e5f71,_0x380ae7){const _0x4631e0=a149_0x34408d;this[_0x4631e0(0xaa)]=_0x454b23,this['salesforceSync']=_0x4bb689,this[_0x4631e0(0x93)]=_0x5e5f71,this[_0x4631e0(0xa7)]=_0x380ae7,this[_0x4631e0(0xa3)]=this[_0x4631e0(0xaa)][_0x4631e0(0xe2)]();}async[a149_0x34408d(0x8b)](_0x48d040){const _0x55d72d=a149_0x34408d;return this[_0x55d72d(0xc9)]['log'](_0x55d72d(0xd3)+this['gitManager']['provider'][_0x55d72d(0xb9)]()+_0x55d72d(0x95)+this[_0x55d72d(0x92)]['repositoryName']+_0x55d72d(0xd4)+this['syncData'][_0x55d72d(0x96)]+']\x20'+_0x48d040);}async['createBranchIfNotExists'](){const _0x147ca2=a149_0x34408d;let _0x29705c=await this[_0x147ca2(0xdd)][_0x147ca2(0xcf)]['getOne'](this[_0x147ca2(0x92)][_0x147ca2(0x96)])[_0x147ca2(0xb4)](()=>null);!_0x29705c&&(_0x29705c=await this[_0x147ca2(0xdd)][_0x147ca2(0xcf)][_0x147ca2(0xc8)]({'name':this[_0x147ca2(0x92)][_0x147ca2(0x96)]})),this[_0x147ca2(0xd7)]=_0x29705c;}async[a149_0x34408d(0xb3)](){const _0x869f9e=a149_0x34408d;return this[_0x869f9e(0x92)][_0x869f9e(0x99)]?this[_0x869f9e(0xdb)]['getComponentsFromRepository'](this[_0x869f9e(0x92)][_0x869f9e(0x99)]):this[_0x869f9e(0xdb)][_0x869f9e(0x8a)](this['syncData'][_0x869f9e(0xa1)]);}async[a149_0x34408d(0xcc)](){const _0x1c948b=a149_0x34408d,_0x10b421=await this['getComponentIds'](),_0xc14561=new salesforce_retriever_service_1[(_0x1c948b(0xbc))](this[_0x1c948b(0x93)]),_0x11a972=await _0xc14561[_0x1c948b(0xcb)](_0x10b421);return _0x11a972;}async[a149_0x34408d(0xde)](_0x33eb2a){const _0x592877=a149_0x34408d,_0x518244=new commit_components_dto_1[(_0x592877(0xba))]();return _0x518244['message']=_0x592877(0xb7),_0x518244[_0x592877(0xa5)]={'name':constants_1[_0x592877(0xce)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x518244['components']={'writed':await this[_0x592877(0xcc)]()},_0x518244[_0x592877(0xcd)]=_0x33eb2a,_0x518244[_0x592877(0x9b)]=this[_0x592877(0xdd)],_0x518244['branch']=this[_0x592877(0xd7)],_0x518244[_0x592877(0x98)]=!![],_0x518244;}async[a149_0x34408d(0xc7)](){const _0x18f244=a149_0x34408d,_0x4b2ee6=await this['salesforceSync']['getRemoteStateAttachmentId'](this[_0x18f244(0x92)]),_0x1cf37b=await this[_0x18f244(0x93)]['retrieveAttachment'](_0x4b2ee6)['then'](_0xc1afc8=>typeof _0xc1afc8===_0x18f244(0xc6)?JSON['parse'](_0xc1afc8):_0xc1afc8)[_0x18f244(0xb4)](()=>({}));if(_0x1cf37b[this['repository'][_0x18f244(0xd0)]]){if(_0x1cf37b[this[_0x18f244(0xdd)][_0x18f244(0xd0)]][_0x18f244(0xc3)]===this['branch'][_0x18f244(0xa9)])return!![];}return![];}async[a149_0x34408d(0xa2)](){const _0x2b05d0=a149_0x34408d,_0x366d93=await this[_0x2b05d0(0xdd)][_0x2b05d0(0xcf)][_0x2b05d0(0x8e)](this['branch'][_0x2b05d0(0xe1)]);await this[_0x2b05d0(0x8b)](_0x2b05d0(0xca));const _0x8ecaf2={[this[_0x2b05d0(0xdd)]['gitUrl']]:{'lastCommit':_0x366d93[_0x2b05d0(0xa9)]}};await this[_0x2b05d0(0xdb)][_0x2b05d0(0x90)](this['syncData'],_0x8ecaf2);}async['run']({syncRecord:_0x4ea7f5,repository:_0xe7380f,loggerId:_0x4b7722,convertToSFDX:_0x5e4b97}){const _0x55e934=a149_0x34408d;this[_0x55e934(0x92)]=_0x4ea7f5,this['repository']=_0xe7380f,this[_0x55e934(0x93)][_0x55e934(0xc1)](_0x4b7722),this[_0x55e934(0xc9)]=this['salesforceService'][_0x55e934(0x8f)]();try{await this['salesforceSync'][_0x55e934(0xc2)](this[_0x55e934(0x92)],_0x55e934(0xd8)),await this[_0x55e934(0x8b)]('[INFO]\x20Start\x20sync\x20job'),await this['createBranchIfNotExists']();const _0x747983=await this[_0x55e934(0xc7)]();if(_0x747983){await this[_0x55e934(0xdb)][_0x55e934(0xc2)](this[_0x55e934(0x92)],_0x55e934(0xb8)),await this[_0x55e934(0x8b)](_0x55e934(0xd2));return;}const _0xc5cd97=await this['getCommitDto'](_0x5e4b97);this[_0x55e934(0xa7)][_0x55e934(0xc9)]=this[_0x55e934(0xc9)],await this['commitJob'][_0x55e934(0xcb)](_0xc5cd97),await this[_0x55e934(0xdb)][_0x55e934(0xc2)](this[_0x55e934(0x92)],_0x55e934(0xb8)),await this[_0x55e934(0xa2)](),await this[_0x55e934(0x8b)](_0x55e934(0x97));}catch(_0x16952b){throw _0x16952b;}finally{await this[_0x55e934(0xc9)][_0x55e934(0xd1)]();}}};SyncJob=__decorate([(0x0,typedi_1[a149_0x34408d(0xb5)])({'transient':!![]}),__metadata(a149_0x34408d(0xa6),[git_provider_manager_1[a149_0x34408d(0xd5)],salesforce_sync_service_1[a149_0x34408d(0x9c)],salesforce_service_1[a149_0x34408d(0xb6)],commit_components_job_1[a149_0x34408d(0x9d)]])],SyncJob),exports[a149_0x34408d(0xac)]=SyncJob;