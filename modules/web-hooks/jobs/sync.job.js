const a142_0x1b3445=a142_0x4c85;(function(_0x440dd5,_0x551714){const _0x59e4ca=a142_0x4c85,_0x2c518e=_0x440dd5();while(!![]){try{const _0x5f1c16=-parseInt(_0x59e4ca(0x88))/0x1+parseInt(_0x59e4ca(0x85))/0x2*(parseInt(_0x59e4ca(0x8b))/0x3)+-parseInt(_0x59e4ca(0x96))/0x4*(parseInt(_0x59e4ca(0xa6))/0x5)+-parseInt(_0x59e4ca(0xa7))/0x6*(-parseInt(_0x59e4ca(0xd1))/0x7)+parseInt(_0x59e4ca(0xdc))/0x8+-parseInt(_0x59e4ca(0xb0))/0x9+parseInt(_0x59e4ca(0xc8))/0xa*(parseInt(_0x59e4ca(0x7e))/0xb);if(_0x5f1c16===_0x551714)break;else _0x2c518e['push'](_0x2c518e['shift']());}catch(_0x5886ea){_0x2c518e['push'](_0x2c518e['shift']());}}}(a142_0x2295,0x5a259));function a142_0x2295(){const _0x2c3536=['Attachment','branches','[INFO]\x20Branch\x20synchronized.\x20Skip','length','CommitComponentsDto','sha','getRepoService','Completed','catch','getComponentIds','getLogger','../../shared/git-provider.manager','branchName','provider','createRepositoryIfNotExists','In\x20Progress','objectId','name',']\x20[Branch:\x20','create','[INFO]\x20Start\x20sync\x20job','30eLAprX','../../shared/utils','__decorate','(((.+)+)+)+$','Sync\x20repository','DEFAULT_GIT_USER_EMAIL','__esModule','design:paramtypes','repository','21IaPUOy','../../../constants','decorate','repoService','retriever','[ERROR]\x20','log','checkSyncStatus','logger','toString','../dto/commit-components.dto','1071912mJiPtG','getComponentsFromRepository','../../salesforce/services/salesforce-retriever.service','stringify','force',']\x20[Repository:\x20','getOne','object','search','componentsIds','run','getBranchComponents','2619254HvvgPs','branchId','getAttachmentIdByParent','CommitComponentsJob','./commit-components.job','typedi','syncData','4406NsdEix','encodeBase64','SalesforceService','659485sEmIOX','send','function','60WFseel','setStatus','constructor','repositoryName','toUpperCase','../../salesforce/services/salesforce.service','SalesforceSyncService','apply','remoteState','SyncJob','convertToSFDX','8FAVijQ','getCommitDto','updateLastCommit','SalesforceRetrieverService','remoteStateAttachmentId','repositoryId','parse','__metadata','[SYNC]\x20[','flosumSync','user','message','then','Service','repo','[INFO]\x20Update\x20remote\x20state.','911920nFONcG','1004064UWCtFc','gitUrl','defineProperty','createBranchIfNotExists','lastCommit','branch','gitManager','salesforceService','patchObject','8361VWjCVO','commitJob','retrieveAttachment'];a142_0x2295=function(){return _0x2c3536;};return a142_0x2295();}const a142_0x3b3431=function(){let _0x5bc717=!![];return function(_0x5427d3,_0x32306d){const _0xe73e61=_0x5bc717?function(){const _0x32c67c=a142_0x4c85;if(_0x32306d){const _0xa6fd6a=_0x32306d[_0x32c67c(0x92)](_0x5427d3,arguments);return _0x32306d=null,_0xa6fd6a;}}:function(){};return _0x5bc717=![],_0xe73e61;};}(),a142_0x23afa9=a142_0x3b3431(this,function(){const _0x13380f=a142_0x4c85;return a142_0x23afa9['toString']()[_0x13380f(0xe4)](_0x13380f(0xcb))[_0x13380f(0xda)]()[_0x13380f(0x8d)](a142_0x23afa9)[_0x13380f(0xe4)](_0x13380f(0xcb));});a142_0x23afa9();'use strict';var __decorate=this&&this[a142_0x1b3445(0xca)]||function(_0x1db115,_0x3536e3,_0x481a33,_0x24cfcc){const _0x123432=a142_0x1b3445;var _0x1350db=arguments['length'],_0x389a40=_0x1350db<0x3?_0x3536e3:_0x24cfcc===null?_0x24cfcc=Object['getOwnPropertyDescriptor'](_0x3536e3,_0x481a33):_0x24cfcc,_0x376456;if(typeof Reflect===_0x123432(0xe3)&&typeof Reflect[_0x123432(0xd3)]===_0x123432(0x8a))_0x389a40=Reflect[_0x123432(0xd3)](_0x1db115,_0x3536e3,_0x481a33,_0x24cfcc);else{for(var _0x475b3c=_0x1db115[_0x123432(0xb6)]-0x1;_0x475b3c>=0x0;_0x475b3c--)if(_0x376456=_0x1db115[_0x475b3c])_0x389a40=(_0x1350db<0x3?_0x376456(_0x389a40):_0x1350db>0x3?_0x376456(_0x3536e3,_0x481a33,_0x389a40):_0x376456(_0x3536e3,_0x481a33))||_0x389a40;}return _0x1350db>0x3&&_0x389a40&&Object[_0x123432(0xa9)](_0x3536e3,_0x481a33,_0x389a40),_0x389a40;},__metadata=this&&this[a142_0x1b3445(0x9d)]||function(_0x23377d,_0x516c16){const _0x1a97b3=a142_0x1b3445;if(typeof Reflect===_0x1a97b3(0xe3)&&typeof Reflect['metadata']===_0x1a97b3(0x8a))return Reflect['metadata'](_0x23377d,_0x516c16);};Object[a142_0x1b3445(0xa9)](exports,a142_0x1b3445(0xce),{'value':!![]}),exports[a142_0x1b3445(0x94)]=void 0x0;const typedi_1=require(a142_0x1b3445(0x83)),constants_1=require(a142_0x1b3445(0xd2)),salesforce_retriever_service_1=require(a142_0x1b3445(0xde)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a142_0x1b3445(0x90)),git_provider_manager_1=require(a142_0x1b3445(0xbe)),utils_1=require(a142_0x1b3445(0xc9)),commit_components_dto_1=require(a142_0x1b3445(0xdb)),commit_components_job_1=require(a142_0x1b3445(0x82));function a142_0x4c85(_0x457fed,_0x3cf71a){const _0xb4fba0=a142_0x2295();return a142_0x4c85=function(_0x23afa9,_0x3b3431){_0x23afa9=_0x23afa9-0x7c;let _0x22952c=_0xb4fba0[_0x23afa9];return _0x22952c;},a142_0x4c85(_0x457fed,_0x3cf71a);}let SyncJob=class SyncJob{constructor(_0x5af7b6,_0x1e7715,_0x2f3dba,_0x9fb636){const _0x281218=a142_0x1b3445;this[_0x281218(0xad)]=_0x5af7b6,this[_0x281218(0x9f)]=_0x1e7715,this['salesforceService']=_0x2f3dba,this[_0x281218(0xb1)]=_0x9fb636,this[_0x281218(0xd4)]=this['gitManager'][_0x281218(0xb9)](),_0x9fb636[_0x281218(0xd5)]=new salesforce_retriever_service_1[(_0x281218(0x99))](this['salesforceService']);}async['log'](_0x15d94c){const _0x10a797=a142_0x1b3445;return this['logger']['log'](_0x10a797(0x9e)+this[_0x10a797(0xad)][_0x10a797(0xc0)][_0x10a797(0x8f)]()+_0x10a797(0xe1)+this[_0x10a797(0x84)][_0x10a797(0x8e)]+_0x10a797(0xc5)+this[_0x10a797(0x84)][_0x10a797(0xbf)]+']\x20'+_0x15d94c);}async[a142_0x1b3445(0xc1)](){const _0x42d7f9=a142_0x1b3445;let _0x4e2e69=await this['repoService'][_0x42d7f9(0xe2)](this[_0x42d7f9(0x84)][_0x42d7f9(0x8e)])['catch'](()=>null);!_0x4e2e69&&(_0x4e2e69=await this['repoService'][_0x42d7f9(0xc6)]({'name':this[_0x42d7f9(0x84)]['repositoryName'],'autoInit':!![],'defaultBranch':this[_0x42d7f9(0x84)]['branchName'],'private':!![]})),this[_0x42d7f9(0xd0)]=_0x4e2e69;}async[a142_0x1b3445(0xaa)](){const _0xcb72f6=a142_0x1b3445;let _0x430a0f=await this[_0xcb72f6(0xd0)][_0xcb72f6(0xb4)][_0xcb72f6(0xe2)](this['syncData'][_0xcb72f6(0xbf)])[_0xcb72f6(0xbb)](()=>null);!_0x430a0f&&(_0x430a0f=await this[_0xcb72f6(0xd0)][_0xcb72f6(0xb4)][_0xcb72f6(0xc6)]({'name':this[_0xcb72f6(0x84)]['branchName']})),this[_0xcb72f6(0xac)]=_0x430a0f;}async[a142_0x1b3445(0xbc)](){const _0x7d2ffc=a142_0x1b3445;return this[_0x7d2ffc(0x84)][_0x7d2ffc(0x9b)]?this['flosumSync'][_0x7d2ffc(0xdd)](this['syncData'][_0x7d2ffc(0x9b)]):this[_0x7d2ffc(0x9f)][_0x7d2ffc(0x7d)](this[_0x7d2ffc(0x84)][_0x7d2ffc(0x7f)]);}async[a142_0x1b3445(0x97)](_0x57aa78){const _0x1b8eb3=a142_0x1b3445,_0x7ca9cb=new commit_components_dto_1[(_0x1b8eb3(0xb7))]();return _0x7ca9cb[_0x1b8eb3(0xa1)]=_0x1b8eb3(0xcc),_0x7ca9cb[_0x1b8eb3(0xa0)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x1b8eb3(0xcd)]},_0x7ca9cb[_0x1b8eb3(0xe5)]=await this[_0x1b8eb3(0xbc)](),_0x7ca9cb[_0x1b8eb3(0x95)]=_0x57aa78,_0x7ca9cb[_0x1b8eb3(0xa4)]=this[_0x1b8eb3(0xd0)],_0x7ca9cb['branch']=this[_0x1b8eb3(0xac)],_0x7ca9cb[_0x1b8eb3(0xe0)]=!![],_0x7ca9cb;}async['checkSyncStatus'](){const _0x178ac6=a142_0x1b3445;this[_0x178ac6(0x9a)]=await this[_0x178ac6(0x9f)][_0x178ac6(0x80)](this['syncData'][_0x178ac6(0xc3)]),this[_0x178ac6(0x93)]=await this['salesforceService'][_0x178ac6(0xb2)](this[_0x178ac6(0x9a)])[_0x178ac6(0xa2)](_0x1f83b5=>typeof _0x1f83b5===_0x178ac6(0xe3)?_0x1f83b5:JSON[_0x178ac6(0x9c)](_0x1f83b5||'{}'))[_0x178ac6(0xbb)](()=>({}));if(this[_0x178ac6(0x93)][this[_0x178ac6(0xd0)][_0x178ac6(0xa8)]]){if(this['remoteState'][this[_0x178ac6(0xd0)]['gitUrl']][_0x178ac6(0xab)]===this['branch']['sha'])return!![];}return![];}async[a142_0x1b3445(0x98)](){const _0x4e6149=a142_0x1b3445,_0xe81a4e=await this[_0x4e6149(0xd0)]['branches']['getOne'](this[_0x4e6149(0xac)][_0x4e6149(0xc4)]);await this['log'](_0x4e6149(0xa5)),this['remoteState']={[this[_0x4e6149(0xd0)][_0x4e6149(0xa8)]]:{'lastCommit':_0xe81a4e[_0x4e6149(0xb8)]}},await this[_0x4e6149(0xae)][_0x4e6149(0xaf)](_0x4e6149(0xb3),this[_0x4e6149(0x9a)],{'Body':utils_1[_0x4e6149(0x86)](JSON[_0x4e6149(0xdf)](this[_0x4e6149(0x93)]))});}async[a142_0x1b3445(0x7c)](_0x5794fa,_0x606ee4,_0x121e6b){const _0x499e3a=a142_0x1b3445;this[_0x499e3a(0x84)]=_0x5794fa,this[_0x499e3a(0xae)]['setLoggerId'](_0x606ee4),this[_0x499e3a(0xd9)]=this['salesforceService'][_0x499e3a(0xbd)]();try{await this[_0x499e3a(0x9f)][_0x499e3a(0x8c)](this[_0x499e3a(0x84)],_0x499e3a(0xc2)),await this[_0x499e3a(0xd7)](_0x499e3a(0xc7)),await this[_0x499e3a(0xc1)](),await this[_0x499e3a(0xaa)]();const _0x521e89=await this[_0x499e3a(0xd8)]();if(_0x521e89){await this[_0x499e3a(0x9f)][_0x499e3a(0x8c)](this[_0x499e3a(0x84)],_0x499e3a(0xba)),await this['log'](_0x499e3a(0xb5));return;}const _0x151ad5=await this['getCommitDto'](_0x121e6b);this[_0x499e3a(0xb1)][_0x499e3a(0xd9)]=this[_0x499e3a(0xd9)],await this[_0x499e3a(0xb1)][_0x499e3a(0x7c)](_0x151ad5),await this[_0x499e3a(0x9f)][_0x499e3a(0x8c)](this['syncData'],_0x499e3a(0xba)),await this[_0x499e3a(0x98)](),await this['log']('[INFO]\x20Sync\x20job\x20done.');}catch(_0x5a384a){this[_0x499e3a(0xd7)](_0x499e3a(0xd6)+_0x5a384a);throw _0x5a384a;}finally{await this['logger'][_0x499e3a(0x89)]();}}};SyncJob=__decorate([typedi_1[a142_0x1b3445(0xa3)]({'transient':!![]}),__metadata(a142_0x1b3445(0xcf),[git_provider_manager_1['GitProviderManager'],salesforce_sync_service_1[a142_0x1b3445(0x91)],salesforce_service_1[a142_0x1b3445(0x87)],commit_components_job_1[a142_0x1b3445(0x81)]])],SyncJob),exports[a142_0x1b3445(0x94)]=SyncJob;