const a145_0x4835=['263550VMeEHY','Completed','getComponents','commitJob','salesforceService','641549DtguHW','send','defineProperty','components','createRepositoryIfNotExists','../../salesforce/services/salesforce-retriever.service','log','../../salesforce/services/salesforce-sync.service','length','updateLastCommit','CommitComponentsDto','DEFAULT_GIT_USER_NAME','120126MnCbHP','typedi','decorate','design:paramtypes',']\x20[Branch:\x20','getCommitDto','checkSyncStatus','1wsXSIr','getLogger','103673MWWfiO','test','../../shared/utils','patchObject','SalesforceSyncService','409783YtQxgI','[SYNC]\x20[','getComponentIds','[INFO]\x20Branch\x20synchronized.\x20Skip','getOwnPropertyDescriptor','repositoryId','setStatus','__metadata','createBranchIfNotExists','message','getBranchComponents','getOne','branches','parse','branch','SyncJob','object','syncData','flosumSync','create','remoteStateAttachmentId','sha','branchName','526777iDJHQP','provider','SalesforceService','logger','9wkHiYX',']\x20[Repository:\x20','gitUrl','then','getAttachmentId','repository','remoteState','name','constructor','branchId','repo','Sync\x20repository','catch','[INFO]\x20Update\x20remote\x20state.','369980YhjUJh','__decorate','return\x20/\x22\x20+\x20this\x20+\x20\x22/','setLoggerId','function','getRepoService','Attachment','gitManager','encodeBase64','toUpperCase','repositoryName','apply','force','run'];const a145_0x1d28de=a145_0x2294;(function(_0x415f6e,_0x29deae){const _0x11368d=a145_0x2294;while(!![]){try{const _0x476128=parseInt(_0x11368d(0xbb))*-parseInt(_0x11368d(0xd9))+-parseInt(_0x11368d(0xa8))+parseInt(_0x11368d(0x95))+-parseInt(_0x11368d(0xa3))+parseInt(_0x11368d(0xb4))+parseInt(_0x11368d(0xc2))+parseInt(_0x11368d(0x87))*parseInt(_0x11368d(0xbd));if(_0x476128===_0x29deae)break;else _0x415f6e['push'](_0x415f6e['shift']());}catch(_0x472aa4){_0x415f6e['push'](_0x415f6e['shift']());}}}(a145_0x4835,0x61eae));const a145_0x3525e8=function(){let _0x2465cb=!![];return function(_0x1311bd,_0x32e327){const _0x567893=_0x2465cb?function(){const _0x22d55a=a145_0x2294;if(_0x32e327){const _0x270250=_0x32e327[_0x22d55a(0xa0)](_0x1311bd,arguments);return _0x32e327=null,_0x270250;}}:function(){};return _0x2465cb=![],_0x567893;};}(),a145_0x21f800=a145_0x3525e8(this,function(){const _0x41daea=function(){const _0x50464d=a145_0x2294,_0x363f48=_0x41daea[_0x50464d(0x8f)](_0x50464d(0x97))()[_0x50464d(0x8f)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x363f48[_0x50464d(0xbe)](a145_0x21f800);};return _0x41daea();});function a145_0x2294(_0x44ef46,_0x47ecc4){return a145_0x2294=function(_0x182a14,_0x21f800){_0x182a14=_0x182a14-0x86;let _0x3525e8=a145_0x4835[_0x182a14];return _0x3525e8;},a145_0x2294(_0x44ef46,_0x47ecc4);}a145_0x21f800();'use strict';var __decorate=this&&this[a145_0x1d28de(0x96)]||function(_0x132cef,_0x4c9f32,_0x12b398,_0x48d227){const _0x45a9be=a145_0x1d28de;var _0x596308=arguments[_0x45a9be(0xb0)],_0x48f815=_0x596308<0x3?_0x4c9f32:_0x48d227===null?_0x48d227=Object[_0x45a9be(0xc6)](_0x4c9f32,_0x12b398):_0x48d227,_0x57199f;if(typeof Reflect===_0x45a9be(0xd2)&&typeof Reflect[_0x45a9be(0xb6)]===_0x45a9be(0x99))_0x48f815=Reflect[_0x45a9be(0xb6)](_0x132cef,_0x4c9f32,_0x12b398,_0x48d227);else{for(var _0x133205=_0x132cef[_0x45a9be(0xb0)]-0x1;_0x133205>=0x0;_0x133205--)if(_0x57199f=_0x132cef[_0x133205])_0x48f815=(_0x596308<0x3?_0x57199f(_0x48f815):_0x596308>0x3?_0x57199f(_0x4c9f32,_0x12b398,_0x48f815):_0x57199f(_0x4c9f32,_0x12b398))||_0x48f815;}return _0x596308>0x3&&_0x48f815&&Object[_0x45a9be(0xaa)](_0x4c9f32,_0x12b398,_0x48f815),_0x48f815;},__metadata=this&&this[a145_0x1d28de(0xc9)]||function(_0x58128b,_0x4965c9){const _0x523baa=a145_0x1d28de;if(typeof Reflect===_0x523baa(0xd2)&&typeof Reflect['metadata']===_0x523baa(0x99))return Reflect['metadata'](_0x58128b,_0x4965c9);};Object[a145_0x1d28de(0xaa)](exports,'__esModule',{'value':!![]}),exports[a145_0x1d28de(0xd1)]=void 0x0;const typedi_1=require(a145_0x1d28de(0xb5)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a145_0x1d28de(0xad)),salesforce_sync_service_1=require(a145_0x1d28de(0xaf)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require('../../shared/git-provider.manager'),utils_1=require(a145_0x1d28de(0xbf)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let SyncJob=class SyncJob{constructor(_0x3d6160,_0x1b0618,_0x18a527,_0x4587df){const _0x150ec0=a145_0x1d28de;this[_0x150ec0(0x9c)]=_0x3d6160,this[_0x150ec0(0xd4)]=_0x1b0618,this[_0x150ec0(0xa7)]=_0x18a527,this[_0x150ec0(0xa6)]=_0x4587df,this['repoService']=this['gitManager'][_0x150ec0(0x9a)]();}async[a145_0x1d28de(0xae)](_0x222170){const _0x14b345=a145_0x1d28de;return this[_0x14b345(0x86)][_0x14b345(0xae)](_0x14b345(0xc3)+this['gitManager'][_0x14b345(0xda)][_0x14b345(0x9e)]()+_0x14b345(0x88)+this['syncData']['repositoryName']+_0x14b345(0xb8)+this[_0x14b345(0xd3)][_0x14b345(0xd8)]+']\x20'+_0x222170);}async[a145_0x1d28de(0xac)](){const _0x1e3566=a145_0x1d28de;let _0x59510d=await this['repoService']['getOne'](this[_0x1e3566(0xd3)][_0x1e3566(0x9f)])['catch'](()=>null);!_0x59510d&&(_0x59510d=await this['repoService'][_0x1e3566(0xd5)]({'name':this[_0x1e3566(0xd3)][_0x1e3566(0x9f)],'autoInit':!![],'defaultBranch':this['syncData'][_0x1e3566(0xd8)],'private':!![]})),this['repository']=_0x59510d;}async[a145_0x1d28de(0xca)](){const _0x9da3d7=a145_0x1d28de;let _0x1db831=await this[_0x9da3d7(0x8c)]['branches']['getOne'](this['syncData'][_0x9da3d7(0xd8)])['catch'](()=>null);!_0x1db831&&(_0x1db831=await this['repository'][_0x9da3d7(0xce)][_0x9da3d7(0xd5)]({'name':this[_0x9da3d7(0xd3)][_0x9da3d7(0xd8)]})),this[_0x9da3d7(0xd0)]=_0x1db831;}async[a145_0x1d28de(0xc4)](){const _0x54ecfe=a145_0x1d28de;return this[_0x54ecfe(0xd3)][_0x54ecfe(0xc7)]?this[_0x54ecfe(0xd4)]['getComponentsFromRepository'](this[_0x54ecfe(0xd3)]['repositoryId']):this[_0x54ecfe(0xd4)][_0x54ecfe(0xcc)](this['syncData'][_0x54ecfe(0x90)]);}async[a145_0x1d28de(0xa5)](){const _0x4242ca=a145_0x1d28de,_0x346d99=await this[_0x4242ca(0xc4)](),_0x5631c1=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x4242ca(0xa7)]),_0x37cf6a=await _0x5631c1[_0x4242ca(0xa2)](_0x346d99);return _0x37cf6a;}async['getCommitDto'](_0x32f697){const _0x7c4692=a145_0x1d28de,_0x444624=new commit_components_dto_1[(_0x7c4692(0xb2))]();return _0x444624[_0x7c4692(0xcb)]=_0x7c4692(0x92),_0x444624['user']={'name':constants_1[_0x7c4692(0xb3)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x444624[_0x7c4692(0xab)]={'writed':await this['getComponents']()},_0x444624['convertToSFDX']=_0x32f697,_0x444624[_0x7c4692(0x91)]=this['repository'],_0x444624[_0x7c4692(0xd0)]=this[_0x7c4692(0xd0)],_0x444624[_0x7c4692(0xa1)]=!![],_0x444624;}async[a145_0x1d28de(0xba)](){const _0x198cd7=a145_0x1d28de;this[_0x198cd7(0xd6)]=await this['flosumSync'][_0x198cd7(0x8b)](this[_0x198cd7(0xd3)]),this[_0x198cd7(0x8d)]=await this[_0x198cd7(0xa7)]['retrieveAttachment'](this[_0x198cd7(0xd6)])[_0x198cd7(0x8a)](_0x46e968=>typeof _0x46e968===_0x198cd7(0xd2)?_0x46e968:JSON[_0x198cd7(0xcf)](_0x46e968||'{}'))[_0x198cd7(0x93)](()=>({}));if(this[_0x198cd7(0x8d)][this[_0x198cd7(0x8c)][_0x198cd7(0x89)]]){if(this[_0x198cd7(0x8d)][this[_0x198cd7(0x8c)][_0x198cd7(0x89)]]['lastCommit']===this[_0x198cd7(0xd0)][_0x198cd7(0xd7)])return!![];}return![];}async[a145_0x1d28de(0xb1)](){const _0x59eacf=a145_0x1d28de,_0x275305=await this['repository'][_0x59eacf(0xce)][_0x59eacf(0xcd)](this['branch'][_0x59eacf(0x8e)]);await this[_0x59eacf(0xae)](_0x59eacf(0x94)),this['remoteState']={[this['repository'][_0x59eacf(0x89)]]:{'lastCommit':_0x275305[_0x59eacf(0xd7)]}},await this[_0x59eacf(0xa7)][_0x59eacf(0xc0)](_0x59eacf(0x9b),this['remoteStateAttachmentId'],{'Body':utils_1[_0x59eacf(0x9d)](JSON['stringify'](this['remoteState']))});}async['run'](_0x694392,_0x277092,_0x4f9f3d){const _0x5802ed=a145_0x1d28de;this['syncData']=_0x694392,this[_0x5802ed(0xa7)][_0x5802ed(0x98)](_0x277092),this['logger']=this[_0x5802ed(0xa7)][_0x5802ed(0xbc)]();try{await this[_0x5802ed(0xd4)][_0x5802ed(0xc8)](this[_0x5802ed(0xd3)],'In\x20Progress'),await this[_0x5802ed(0xae)]('[INFO]\x20Start\x20sync\x20job'),await this[_0x5802ed(0xac)](),await this[_0x5802ed(0xca)]();const _0x4d1cca=await this[_0x5802ed(0xba)]();if(_0x4d1cca){await this['flosumSync'][_0x5802ed(0xc8)](this[_0x5802ed(0xd3)],_0x5802ed(0xa4)),await this[_0x5802ed(0xae)](_0x5802ed(0xc5));return;}const _0x17dc32=await this[_0x5802ed(0xb9)](_0x4f9f3d);this[_0x5802ed(0xa6)][_0x5802ed(0x86)]=this['logger'],await this[_0x5802ed(0xa6)][_0x5802ed(0xa2)](_0x17dc32),await this['flosumSync']['setStatus'](this[_0x5802ed(0xd3)],_0x5802ed(0xa4)),await this['updateLastCommit'](),await this[_0x5802ed(0xae)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x196bb2){throw _0x196bb2;}finally{await this[_0x5802ed(0x86)][_0x5802ed(0xa9)]();}}};SyncJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a145_0x1d28de(0xb7),[git_provider_manager_1['GitProviderManager'],salesforce_sync_service_1[a145_0x1d28de(0xc1)],salesforce_service_1[a145_0x1d28de(0xdb)],commit_components_job_1['CommitComponentsJob']])],SyncJob),exports[a145_0x1d28de(0xd1)]=SyncJob;