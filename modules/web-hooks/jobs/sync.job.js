const a149_0x5ddfb2=a149_0x5ddc;(function(_0x384052,_0x1a82c8){const _0x21a813=a149_0x5ddc,_0x2a476f=_0x384052();while(!![]){try{const _0x31ee1e=-parseInt(_0x21a813(0x1f0))/0x1+parseInt(_0x21a813(0x1e1))/0x2*(parseInt(_0x21a813(0x1dc))/0x3)+-parseInt(_0x21a813(0x1d8))/0x4+parseInt(_0x21a813(0x1ed))/0x5*(-parseInt(_0x21a813(0x1ef))/0x6)+parseInt(_0x21a813(0x1cc))/0x7*(parseInt(_0x21a813(0x1d3))/0x8)+parseInt(_0x21a813(0x1ce))/0x9+-parseInt(_0x21a813(0x1ba))/0xa;if(_0x31ee1e===_0x1a82c8)break;else _0x2a476f['push'](_0x2a476f['shift']());}catch(_0x863c03){_0x2a476f['push'](_0x2a476f['shift']());}}}(a149_0x5c77,0xb327f));const a149_0x546943=function(){let _0x57bf1c=!![];return function(_0x1e8696,_0x36f154){const _0x5d9e90=_0x57bf1c?function(){const _0x360bbf=a149_0x5ddc;if(_0x36f154){const _0x190993=_0x36f154[_0x360bbf(0x1e3)](_0x1e8696,arguments);return _0x36f154=null,_0x190993;}}:function(){};return _0x57bf1c=![],_0x5d9e90;};}(),a149_0x67bbd4=a149_0x546943(this,function(){const _0x814c23=a149_0x5ddc;return a149_0x67bbd4[_0x814c23(0x20a)]()[_0x814c23(0x1d4)](_0x814c23(0x1f2))['toString']()[_0x814c23(0x1dd)](a149_0x67bbd4)['search'](_0x814c23(0x1f2));});a149_0x67bbd4();'use strict';function a149_0x5ddc(_0x359917,_0x3c1dcb){const _0x4b4593=a149_0x5c77();return a149_0x5ddc=function(_0x67bbd4,_0x546943){_0x67bbd4=_0x67bbd4-0x1af;let _0x5c7798=_0x4b4593[_0x67bbd4];return _0x5c7798;},a149_0x5ddc(_0x359917,_0x3c1dcb);}var __decorate=this&&this[a149_0x5ddfb2(0x1c3)]||function(_0x1e8c3c,_0x355c94,_0x4326b2,_0x4a66ea){const _0xd9e147=a149_0x5ddfb2;var _0x2e3c43=arguments['length'],_0x50c60a=_0x2e3c43<0x3?_0x355c94:_0x4a66ea===null?_0x4a66ea=Object[_0xd9e147(0x208)](_0x355c94,_0x4326b2):_0x4a66ea,_0x54235b;if(typeof Reflect===_0xd9e147(0x1be)&&typeof Reflect[_0xd9e147(0x1fa)]===_0xd9e147(0x1cb))_0x50c60a=Reflect[_0xd9e147(0x1fa)](_0x1e8c3c,_0x355c94,_0x4326b2,_0x4a66ea);else{for(var _0x32bc72=_0x1e8c3c[_0xd9e147(0x1c4)]-0x1;_0x32bc72>=0x0;_0x32bc72--)if(_0x54235b=_0x1e8c3c[_0x32bc72])_0x50c60a=(_0x2e3c43<0x3?_0x54235b(_0x50c60a):_0x2e3c43>0x3?_0x54235b(_0x355c94,_0x4326b2,_0x50c60a):_0x54235b(_0x355c94,_0x4326b2))||_0x50c60a;}return _0x2e3c43>0x3&&_0x50c60a&&Object['defineProperty'](_0x355c94,_0x4326b2,_0x50c60a),_0x50c60a;},__metadata=this&&this['__metadata']||function(_0x2c3b55,_0x45e0d7){const _0x429f90=a149_0x5ddfb2;if(typeof Reflect===_0x429f90(0x1be)&&typeof Reflect[_0x429f90(0x20b)]===_0x429f90(0x1cb))return Reflect[_0x429f90(0x20b)](_0x2c3b55,_0x45e0d7);};Object[a149_0x5ddfb2(0x1c6)](exports,a149_0x5ddfb2(0x1f5),{'value':!![]}),exports[a149_0x5ddfb2(0x1e5)]=void 0x0;function a149_0x5c77(){const _0x599bc5=['getComponentIds','decorate','getBranchComponents','gitUrl','sha','branch','branches','repositoryId','./commit-components.job','updateLastCommit','getRemoteStateAttachmentId','[INFO]\x20Update\x20remote\x20state.','DEFAULT_GIT_USER_NAME','setStatus','repository','getOwnPropertyDescriptor','branchId','toString','metadata','retrieveAttachment','getComponentsFromRepository','repo','salesforceSync','../../../constants','commitJob',']\x20[Repository:\x20','toUpperCase','CommitComponentsDto','syncData','setLoggerId','10038830ZMDDVu','run','components','logger','object','getLogger','catch','typedi','log','__decorate','length','force','defineProperty','SalesforceRetrieverService','createRepositoryIfNotExists','checkSyncStatus','../../salesforce/services/salesforce-sync.service','function','153181tDKibp','[SYNC]\x20[','9445842TmUZwf','getOne','create','../../salesforce/services/salesforce-retriever.service','parse','64gqcdkC','search','getComponents','SalesforceSyncService','CommitComponentsJob','194236duFVJN','branchName','Completed','string','4202421lRMGHA','constructor','DEFAULT_GIT_USER_EMAIL','send','../dto/commit-components.dto','2hJuGIu','createBranchIfNotExists','apply','SalesforceService','SyncJob','gitManager','[INFO]\x20Start\x20sync\x20job','salesforceService','repoService','In\x20Progress','../../salesforce/services/salesforce.service','getRepoService','15cJaXyX','[INFO]\x20Sync\x20job\x20done.','1299222kccEeV','189533GKzICv','design:paramtypes','(((.+)+)+)+$','getCommitDto','Sync\x20repository','__esModule','GitProviderManager','[INFO]\x20Branch\x20synchronized.\x20Skip','repositoryName'];a149_0x5c77=function(){return _0x599bc5;};return a149_0x5c77();}const typedi_1=require(a149_0x5ddfb2(0x1c1)),constants_1=require(a149_0x5ddfb2(0x1b3)),salesforce_retriever_service_1=require(a149_0x5ddfb2(0x1d1)),salesforce_sync_service_1=require(a149_0x5ddfb2(0x1ca)),salesforce_service_1=require(a149_0x5ddfb2(0x1eb)),git_provider_manager_1=require('../../shared/git-provider.manager'),commit_components_dto_1=require(a149_0x5ddfb2(0x1e0)),commit_components_job_1=require(a149_0x5ddfb2(0x201));let SyncJob=class SyncJob{constructor(_0x56ec85,_0x37f472,_0x3d4902,_0xfa87){const _0x3cf631=a149_0x5ddfb2;this[_0x3cf631(0x1e6)]=_0x56ec85,this[_0x3cf631(0x1b2)]=_0x37f472,this[_0x3cf631(0x1e8)]=_0x3d4902,this[_0x3cf631(0x1b4)]=_0xfa87,this['repoService']=this['gitManager'][_0x3cf631(0x1ec)]();}async['log'](_0x486cac){const _0xb1174a=a149_0x5ddfb2;return this[_0xb1174a(0x1bd)][_0xb1174a(0x1c2)](_0xb1174a(0x1cd)+this[_0xb1174a(0x1e6)]['provider'][_0xb1174a(0x1b6)]()+_0xb1174a(0x1b5)+this[_0xb1174a(0x1b8)][_0xb1174a(0x1f8)]+']\x20[Branch:\x20'+this[_0xb1174a(0x1b8)][_0xb1174a(0x1d9)]+']\x20'+_0x486cac);}async[a149_0x5ddfb2(0x1c8)](){const _0x211f94=a149_0x5ddfb2;!this[_0x211f94(0x207)]&&(this[_0x211f94(0x207)]=await this[_0x211f94(0x1e9)][_0x211f94(0x1d0)]({'name':this[_0x211f94(0x1b8)][_0x211f94(0x1f8)],'autoInit':!![],'defaultBranch':this['syncData'][_0x211f94(0x1d9)],'private':!![]}));}async[a149_0x5ddfb2(0x1e2)](){const _0x1e5af8=a149_0x5ddfb2;let _0x30d73f=await this[_0x1e5af8(0x207)]['branches'][_0x1e5af8(0x1cf)](this[_0x1e5af8(0x1b8)]['branchName'])[_0x1e5af8(0x1c0)](()=>null);!_0x30d73f&&(_0x30d73f=await this[_0x1e5af8(0x207)][_0x1e5af8(0x1ff)][_0x1e5af8(0x1d0)]({'name':this['syncData'][_0x1e5af8(0x1d9)]})),this[_0x1e5af8(0x1fe)]=_0x30d73f;}async[a149_0x5ddfb2(0x1f9)](){const _0x133b09=a149_0x5ddfb2;return this[_0x133b09(0x1b8)][_0x133b09(0x200)]?this[_0x133b09(0x1b2)][_0x133b09(0x1b0)](this['syncData'][_0x133b09(0x200)]):this['salesforceSync'][_0x133b09(0x1fb)](this[_0x133b09(0x1b8)][_0x133b09(0x209)]);}async['getComponents'](){const _0x908545=a149_0x5ddfb2,_0x333cd7=await this[_0x908545(0x1f9)](),_0x49907b=new salesforce_retriever_service_1[(_0x908545(0x1c7))](this[_0x908545(0x1e8)]),_0x3baafc=await _0x49907b[_0x908545(0x1bb)](_0x333cd7);return _0x3baafc;}async['getCommitDto'](_0x2a888e){const _0x1c0f7e=a149_0x5ddfb2,_0x1032ee=new commit_components_dto_1[(_0x1c0f7e(0x1b7))]();return _0x1032ee['message']=_0x1c0f7e(0x1f4),_0x1032ee['user']={'name':constants_1[_0x1c0f7e(0x205)],'email':constants_1[_0x1c0f7e(0x1de)]},_0x1032ee[_0x1c0f7e(0x1bc)]={'writed':await this[_0x1c0f7e(0x1d5)]()},_0x1032ee['convertToSFDX']=_0x2a888e,_0x1032ee[_0x1c0f7e(0x1b1)]=this[_0x1c0f7e(0x207)],_0x1032ee['branch']=this['branch'],_0x1032ee[_0x1c0f7e(0x1c5)]=!![],_0x1032ee;}async['checkSyncStatus'](){const _0x11d591=a149_0x5ddfb2,_0x556e47=await this[_0x11d591(0x1b2)][_0x11d591(0x203)](this[_0x11d591(0x1b8)]),_0x358549=await this['salesforceService'][_0x11d591(0x1af)](_0x556e47)['then'](_0x218080=>typeof _0x218080===_0x11d591(0x1db)?JSON[_0x11d591(0x1d2)](_0x218080):_0x218080)[_0x11d591(0x1c0)](()=>({}));if(_0x358549[this[_0x11d591(0x207)][_0x11d591(0x1fc)]]){if(_0x358549[this['repository']['gitUrl']]['lastCommit']===this[_0x11d591(0x1fe)][_0x11d591(0x1fd)])return!![];}return![];}async[a149_0x5ddfb2(0x202)](){const _0x228f32=a149_0x5ddfb2,_0x1e790e=await this[_0x228f32(0x207)]['branches'][_0x228f32(0x1cf)](this['branch']['name']);await this[_0x228f32(0x1c2)](_0x228f32(0x204));const _0x212a86={[this[_0x228f32(0x207)][_0x228f32(0x1fc)]]:{'lastCommit':_0x1e790e[_0x228f32(0x1fd)]}};await this[_0x228f32(0x1b2)]['updateRemoteState'](this['syncData'],_0x212a86);}async[a149_0x5ddfb2(0x1bb)]({syncRecord:_0x52664f,repository:_0xb09285,loggerId:_0x19a3c0,convertToSFDX:_0x53760}){const _0x5b2c25=a149_0x5ddfb2;this[_0x5b2c25(0x1b8)]=_0x52664f,this[_0x5b2c25(0x207)]=_0xb09285,this[_0x5b2c25(0x1e8)][_0x5b2c25(0x1b9)](_0x19a3c0),this[_0x5b2c25(0x1bd)]=this['salesforceService'][_0x5b2c25(0x1bf)]();try{await this['salesforceSync'][_0x5b2c25(0x206)](this[_0x5b2c25(0x1b8)],_0x5b2c25(0x1ea)),await this['log'](_0x5b2c25(0x1e7)),await this[_0x5b2c25(0x1c8)](),await this[_0x5b2c25(0x1e2)]();const _0x57f43a=await this[_0x5b2c25(0x1c9)]();if(_0x57f43a){await this[_0x5b2c25(0x1b2)]['setStatus'](this[_0x5b2c25(0x1b8)],_0x5b2c25(0x1da)),await this[_0x5b2c25(0x1c2)](_0x5b2c25(0x1f7));return;}const _0x1658fd=await this[_0x5b2c25(0x1f3)](_0x53760);this['commitJob'][_0x5b2c25(0x1bd)]=this[_0x5b2c25(0x1bd)],await this[_0x5b2c25(0x1b4)][_0x5b2c25(0x1bb)](_0x1658fd),await this[_0x5b2c25(0x1b2)][_0x5b2c25(0x206)](this['syncData'],'Completed'),await this[_0x5b2c25(0x202)](),await this[_0x5b2c25(0x1c2)](_0x5b2c25(0x1ee));}catch(_0x5e6140){throw _0x5e6140;}finally{await this[_0x5b2c25(0x1bd)][_0x5b2c25(0x1df)]();}}};SyncJob=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a149_0x5ddfb2(0x1f1),[git_provider_manager_1[a149_0x5ddfb2(0x1f6)],salesforce_sync_service_1[a149_0x5ddfb2(0x1d6)],salesforce_service_1[a149_0x5ddfb2(0x1e4)],commit_components_job_1[a149_0x5ddfb2(0x1d7)]])],SyncJob),exports[a149_0x5ddfb2(0x1e5)]=SyncJob;