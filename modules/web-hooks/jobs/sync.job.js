function a149_0x25fc(){const _0x31bef6=['constructor','checkSyncStatus','logger','31751gOgrvG','log','gitUrl','../../salesforce/services/salesforce.service','components','../../shared/git-provider.manager','Completed','string','commitJob','branchId','name','repositoryId','DEFAULT_GIT_USER_NAME','(((.+)+)+)+$','updateRemoteState','4945320NAVSUu','retrieveAttachment','branch','parse','CommitComponentsDto','metadata','convertToSFDX','decorate','setStatus','[INFO]\x20Branch\x20synchronized.\x20Skip','getBranchComponents','../../salesforce/services/salesforce-retriever.service','function','getComponentIds','send','provider','getOne','DEFAULT_GIT_USER_EMAIL','GitProviderManager','[INFO]\x20Update\x20remote\x20state.','branches','5611140eANCfN','repoService','../../salesforce/services/salesforce-sync.service','createRepositoryIfNotExists','getOwnPropertyDescriptor','length',']\x20[Branch:\x20','create','Service','search','getComponents','12536020wBjBrq','gitManager','then','createBranchIfNotExists','salesforceService','repositoryName',']\x20[Repository:\x20','user','defineProperty','[SYNC]\x20[','2269448BZuKSq','SalesforceSyncService','[INFO]\x20Sync\x20job\x20done.','4821000aTcXVM','force','syncData','updateLastCommit','getRemoteStateAttachmentId','toString','setLoggerId','repo','[INFO]\x20Start\x20sync\x20job','SalesforceRetrieverService','salesforceSync','branchName','SyncJob','getRepoService','__decorate','679254BMjAUF','repository','run','getCommitDto','getLogger','lastCommit','../dto/commit-components.dto'];a149_0x25fc=function(){return _0x31bef6;};return a149_0x25fc();}const a149_0x399823=a149_0x1ae7;(function(_0x1eb751,_0x51ab39){const _0x9be888=a149_0x1ae7,_0x520862=_0x1eb751();while(!![]){try{const _0x4a7fe6=-parseInt(_0x9be888(0x155))/0x1+parseInt(_0x9be888(0x18e))/0x2+parseInt(_0x9be888(0x14b))/0x3+parseInt(_0x9be888(0x164))/0x4+-parseInt(_0x9be888(0x191))/0x5+parseInt(_0x9be888(0x179))/0x6+-parseInt(_0x9be888(0x184))/0x7;if(_0x4a7fe6===_0x51ab39)break;else _0x520862['push'](_0x520862['shift']());}catch(_0x44368d){_0x520862['push'](_0x520862['shift']());}}}(a149_0x25fc,0xb617b));function a149_0x1ae7(_0x98fc05,_0x505987){const _0x3c7caa=a149_0x25fc();return a149_0x1ae7=function(_0x340a9a,_0x1dd09d){_0x340a9a=_0x340a9a-0x147;let _0x25fc0e=_0x3c7caa[_0x340a9a];return _0x25fc0e;},a149_0x1ae7(_0x98fc05,_0x505987);}const a149_0x1dd09d=function(){let _0x1484cd=!![];return function(_0x24b27d,_0xe09703){const _0x415adf=_0x1484cd?function(){if(_0xe09703){const _0x445504=_0xe09703['apply'](_0x24b27d,arguments);return _0xe09703=null,_0x445504;}}:function(){};return _0x1484cd=![],_0x415adf;};}(),a149_0x340a9a=a149_0x1dd09d(this,function(){const _0xf55667=a149_0x1ae7;return a149_0x340a9a[_0xf55667(0x196)]()[_0xf55667(0x182)]('(((.+)+)+)+$')[_0xf55667(0x196)]()[_0xf55667(0x152)](a149_0x340a9a)[_0xf55667(0x182)](_0xf55667(0x162));});a149_0x340a9a();'use strict';var __decorate=this&&this[a149_0x399823(0x14a)]||function(_0x3d5b12,_0x4760c7,_0x1e0be2,_0x45b9b8){const _0x315ad6=a149_0x399823;var _0x7df6a2=arguments[_0x315ad6(0x17e)],_0x12af5a=_0x7df6a2<0x3?_0x4760c7:_0x45b9b8===null?_0x45b9b8=Object[_0x315ad6(0x17d)](_0x4760c7,_0x1e0be2):_0x45b9b8,_0x1b47f3;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x315ad6(0x170))_0x12af5a=Reflect[_0x315ad6(0x16b)](_0x3d5b12,_0x4760c7,_0x1e0be2,_0x45b9b8);else{for(var _0x54db9d=_0x3d5b12[_0x315ad6(0x17e)]-0x1;_0x54db9d>=0x0;_0x54db9d--)if(_0x1b47f3=_0x3d5b12[_0x54db9d])_0x12af5a=(_0x7df6a2<0x3?_0x1b47f3(_0x12af5a):_0x7df6a2>0x3?_0x1b47f3(_0x4760c7,_0x1e0be2,_0x12af5a):_0x1b47f3(_0x4760c7,_0x1e0be2))||_0x12af5a;}return _0x7df6a2>0x3&&_0x12af5a&&Object[_0x315ad6(0x18c)](_0x4760c7,_0x1e0be2,_0x12af5a),_0x12af5a;},__metadata=this&&this['__metadata']||function(_0x444919,_0x21c636){const _0x28f306=a149_0x399823;if(typeof Reflect==='object'&&typeof Reflect[_0x28f306(0x169)]==='function')return Reflect[_0x28f306(0x169)](_0x444919,_0x21c636);};Object[a149_0x399823(0x18c)](exports,'__esModule',{'value':!![]}),exports[a149_0x399823(0x148)]=void 0x0;const typedi_1=require('typedi'),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a149_0x399823(0x16f)),salesforce_sync_service_1=require(a149_0x399823(0x17b)),salesforce_service_1=require(a149_0x399823(0x158)),git_provider_manager_1=require(a149_0x399823(0x15a)),commit_components_dto_1=require(a149_0x399823(0x151)),commit_components_job_1=require('./commit-components.job');let SyncJob=class SyncJob{constructor(_0x40c770,_0x46455e,_0x1d3f8c,_0x2c0285){const _0xe76723=a149_0x399823;this[_0xe76723(0x185)]=_0x40c770,this[_0xe76723(0x19b)]=_0x46455e,this['salesforceService']=_0x1d3f8c,this[_0xe76723(0x15d)]=_0x2c0285,this[_0xe76723(0x17a)]=this[_0xe76723(0x185)][_0xe76723(0x149)]();}async[a149_0x399823(0x156)](_0x594a23){const _0xdcdf46=a149_0x399823;return this[_0xdcdf46(0x154)][_0xdcdf46(0x156)](_0xdcdf46(0x18d)+this[_0xdcdf46(0x185)][_0xdcdf46(0x173)]['toUpperCase']()+_0xdcdf46(0x18a)+this['syncData'][_0xdcdf46(0x189)]+_0xdcdf46(0x17f)+this[_0xdcdf46(0x193)][_0xdcdf46(0x147)]+']\x20'+_0x594a23);}async['createRepositoryIfNotExists'](){const _0x54bd1e=a149_0x399823;!this['repository']&&(this[_0x54bd1e(0x14c)]=await this['repoService'][_0x54bd1e(0x180)]({'name':this[_0x54bd1e(0x193)][_0x54bd1e(0x189)],'autoInit':!![],'defaultBranch':this[_0x54bd1e(0x193)]['branchName'],'private':!![]}));}async[a149_0x399823(0x187)](){const _0x50dd30=a149_0x399823;let _0x3a9c2d=await this[_0x50dd30(0x14c)][_0x50dd30(0x178)][_0x50dd30(0x174)](this[_0x50dd30(0x193)][_0x50dd30(0x147)])['catch'](()=>null);!_0x3a9c2d&&(_0x3a9c2d=await this[_0x50dd30(0x14c)][_0x50dd30(0x178)][_0x50dd30(0x180)]({'name':this['syncData']['branchName']})),this[_0x50dd30(0x166)]=_0x3a9c2d;}async['getComponentIds'](){const _0x383940=a149_0x399823;return this[_0x383940(0x193)][_0x383940(0x160)]?this['salesforceSync']['getComponentsFromRepository'](this[_0x383940(0x193)]['repositoryId']):this[_0x383940(0x19b)][_0x383940(0x16e)](this['syncData'][_0x383940(0x15e)]);}async[a149_0x399823(0x183)](){const _0x3ff7e6=a149_0x399823,_0x30c861=await this[_0x3ff7e6(0x171)](),_0x2120f0=new salesforce_retriever_service_1[(_0x3ff7e6(0x19a))](this[_0x3ff7e6(0x188)]),_0x273625=await _0x2120f0[_0x3ff7e6(0x14d)](_0x30c861);return _0x273625;}async[a149_0x399823(0x14e)](_0x3c7b41){const _0x9e86ee=a149_0x399823,_0x4a024e=new commit_components_dto_1[(_0x9e86ee(0x168))]();return _0x4a024e['message']='Sync\x20repository',_0x4a024e[_0x9e86ee(0x18b)]={'name':constants_1[_0x9e86ee(0x161)],'email':constants_1[_0x9e86ee(0x175)]},_0x4a024e[_0x9e86ee(0x159)]={'writed':await this[_0x9e86ee(0x183)]()},_0x4a024e[_0x9e86ee(0x16a)]=_0x3c7b41,_0x4a024e[_0x9e86ee(0x198)]=this[_0x9e86ee(0x14c)],_0x4a024e[_0x9e86ee(0x166)]=this['branch'],_0x4a024e[_0x9e86ee(0x192)]=!![],_0x4a024e;}async['checkSyncStatus'](){const _0x2a5308=a149_0x399823,_0x49e0ce=await this['salesforceSync'][_0x2a5308(0x195)](this[_0x2a5308(0x193)]),_0x5cc1f1=await this['salesforceService'][_0x2a5308(0x165)](_0x49e0ce)[_0x2a5308(0x186)](_0x593b06=>typeof _0x593b06===_0x2a5308(0x15c)?JSON[_0x2a5308(0x167)](_0x593b06):_0x593b06)['catch'](()=>({}));if(_0x5cc1f1[this[_0x2a5308(0x14c)][_0x2a5308(0x157)]]){if(_0x5cc1f1[this[_0x2a5308(0x14c)][_0x2a5308(0x157)]][_0x2a5308(0x150)]===this[_0x2a5308(0x166)]['sha'])return!![];}return![];}async[a149_0x399823(0x194)](){const _0x4b047b=a149_0x399823,_0x378b45=await this[_0x4b047b(0x14c)][_0x4b047b(0x178)]['getOne'](this[_0x4b047b(0x166)][_0x4b047b(0x15f)]);await this[_0x4b047b(0x156)](_0x4b047b(0x177));const _0x25d128={[this['repository'][_0x4b047b(0x157)]]:{'lastCommit':_0x378b45['sha']}};await this['salesforceSync'][_0x4b047b(0x163)](this['syncData'],_0x25d128);}async[a149_0x399823(0x14d)]({syncRecord:_0x39b5b7,repository:_0x3f871c,loggerId:_0x3a0040,convertToSFDX:_0xed2b74}){const _0x745703=a149_0x399823;this[_0x745703(0x193)]=_0x39b5b7,this[_0x745703(0x14c)]=_0x3f871c,this[_0x745703(0x188)][_0x745703(0x197)](_0x3a0040),this['logger']=this[_0x745703(0x188)][_0x745703(0x14f)]();try{await this[_0x745703(0x19b)]['setStatus'](this['syncData'],'In\x20Progress'),await this[_0x745703(0x156)](_0x745703(0x199)),await this[_0x745703(0x17c)](),await this[_0x745703(0x187)]();const _0x4b6dd4=await this[_0x745703(0x153)]();if(_0x4b6dd4){await this[_0x745703(0x19b)]['setStatus'](this['syncData'],_0x745703(0x15b)),await this[_0x745703(0x156)](_0x745703(0x16d));return;}const _0x3d88fe=await this[_0x745703(0x14e)](_0xed2b74);this[_0x745703(0x15d)][_0x745703(0x154)]=this[_0x745703(0x154)],await this[_0x745703(0x15d)][_0x745703(0x14d)](_0x3d88fe),await this[_0x745703(0x19b)][_0x745703(0x16c)](this[_0x745703(0x193)],_0x745703(0x15b)),await this[_0x745703(0x194)](),await this[_0x745703(0x156)](_0x745703(0x190));}catch(_0x1315ba){throw _0x1315ba;}finally{await this['logger'][_0x745703(0x172)]();}}};SyncJob=__decorate([(0x0,typedi_1[a149_0x399823(0x181)])({'transient':!![]}),__metadata('design:paramtypes',[git_provider_manager_1[a149_0x399823(0x176)],salesforce_sync_service_1[a149_0x399823(0x18f)],salesforce_service_1['SalesforceService'],commit_components_job_1['CommitComponentsJob']])],SyncJob),exports[a149_0x399823(0x148)]=SyncJob;