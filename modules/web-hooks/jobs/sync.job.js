const a144_0x404a=['__metadata','SalesforceService','getComponentIds','../../salesforce/services/salesforce-sync.service','setLoggerId','repoService','DEFAULT_GIT_USER_EMAIL','[SYNC]\x20[','function','Attachment','../../shared/utils','CommitComponentsDto','[INFO]\x20Update\x20remote\x20state.','constructor','repository','create','force','remoteStateAttachmentId','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','3QgwsOv','901375gjalCc','message','../../salesforce/services/salesforce-retriever.service','SyncJob','getComponentsFromRepository','branchName','run','repositoryName','getComponents','158PblBLT','CommitComponentsJob','apply','remoteState','getOne','getOwnPropertyDescriptor','6635bUzrJz','createBranchIfNotExists','[INFO]\x20Sync\x20job\x20done.','stringify','468341KsaztF','Sync\x20repository','772711gLiVoy','convertToSFDX','DEFAULT_GIT_USER_NAME','sha','return\x20/\x22\x20+\x20this\x20+\x20\x22/','lastCommit','../../../constants','repo','getCommitDto','SalesforceRetrieverService','log','branch','decorate','catch','flosumSync','../../salesforce/services/salesforce.service','GitProviderManager','Completed','createRepositoryIfNotExists','[ERROR]\x20',']\x20[Repository:\x20','branchId','Service','[INFO]\x20Start\x20sync\x20job','toUpperCase','checkSyncStatus','length','syncData','172ZiarxX','gitUrl','components','logger','metadata','updateLastCommit','patchObject','Logger','provider','sync-job','42NBaYcf','../../../core','../../shared/git-provider.manager','object','__decorate','encodeBase64','branches','user','error','gitManager','./commit-components.job','retrieveAttachment','defineProperty','32070KIvBvX','__esModule','5089izBDGb','In\x20Progress','typedi','salesforceService','setStatus','objectId','190071FBTmOO','SalesforceSyncService','getBranchComponents','parse','getRepoService','design:paramtypes','commitJob'];const a144_0x4f3e7f=a144_0x2c61;(function(_0x342178,_0x160f87){const _0x5d51d6=a144_0x2c61;while(!![]){try{const _0x279fbd=-parseInt(_0x5d51d6(0x10a))*parseInt(_0x5d51d6(0xc1))+-parseInt(_0x5d51d6(0xe0))*parseInt(_0x5d51d6(0xfa))+parseInt(_0x5d51d6(0x10e))+-parseInt(_0x5d51d6(0xda))*-parseInt(_0x5d51d6(0x104))+parseInt(_0x5d51d6(0xcb))*parseInt(_0x5d51d6(0xd8))+parseInt(_0x5d51d6(0x110))+-parseInt(_0x5d51d6(0xfb));if(_0x279fbd===_0x160f87)break;else _0x342178['push'](_0x342178['shift']());}catch(_0x5c3784){_0x342178['push'](_0x342178['shift']());}}}(a144_0x404a,0xbe3ee));const a144_0x4bdc95=function(){let _0x31b68c=!![];return function(_0x18b907,_0x50809c){const _0xdd83c9=_0x31b68c?function(){const _0xe328fd=a144_0x2c61;if(_0x50809c){const _0x42a440=_0x50809c[_0xe328fd(0x106)](_0x18b907,arguments);return _0x50809c=null,_0x42a440;}}:function(){};return _0x31b68c=![],_0xdd83c9;};}(),a144_0x21278d=a144_0x4bdc95(this,function(){const _0x25f6f7=function(){const _0x2a7347=a144_0x2c61,_0x3076d0=_0x25f6f7['constructor'](_0x2a7347(0x114))()[_0x2a7347(0xf4)](_0x2a7347(0xf9));return!_0x3076d0['test'](a144_0x21278d);};return _0x25f6f7();});a144_0x21278d();'use strict';var __decorate=this&&this[a144_0x4f3e7f(0xcf)]||function(_0x42939c,_0x211462,_0x50f6eb,_0x45d814){const _0x29db58=a144_0x4f3e7f;var _0x69420f=arguments[_0x29db58(0xbf)],_0x28e53d=_0x69420f<0x3?_0x211462:_0x45d814===null?_0x45d814=Object[_0x29db58(0x109)](_0x211462,_0x50f6eb):_0x45d814,_0x10720f;if(typeof Reflect===_0x29db58(0xce)&&typeof Reflect[_0x29db58(0x11c)]==='function')_0x28e53d=Reflect[_0x29db58(0x11c)](_0x42939c,_0x211462,_0x50f6eb,_0x45d814);else{for(var _0x1aa6ea=_0x42939c[_0x29db58(0xbf)]-0x1;_0x1aa6ea>=0x0;_0x1aa6ea--)if(_0x10720f=_0x42939c[_0x1aa6ea])_0x28e53d=(_0x69420f<0x3?_0x10720f(_0x28e53d):_0x69420f>0x3?_0x10720f(_0x211462,_0x50f6eb,_0x28e53d):_0x10720f(_0x211462,_0x50f6eb))||_0x28e53d;}return _0x69420f>0x3&&_0x28e53d&&Object['defineProperty'](_0x211462,_0x50f6eb,_0x28e53d),_0x28e53d;},__metadata=this&&this[a144_0x4f3e7f(0xe7)]||function(_0x124b63,_0x4aa44c){const _0x53aa93=a144_0x4f3e7f;if(typeof Reflect===_0x53aa93(0xce)&&typeof Reflect[_0x53aa93(0xc5)]===_0x53aa93(0xef))return Reflect[_0x53aa93(0xc5)](_0x124b63,_0x4aa44c);};Object[a144_0x4f3e7f(0xd7)](exports,a144_0x4f3e7f(0xd9),{'value':!![]}),exports[a144_0x4f3e7f(0xfe)]=void 0x0;function a144_0x2c61(_0x3a06fb,_0x263081){return a144_0x2c61=function(_0x4fece4,_0x21278d){_0x4fece4=_0x4fece4-0xb2;let _0x4bdc95=a144_0x404a[_0x4fece4];return _0x4bdc95;},a144_0x2c61(_0x3a06fb,_0x263081);}const core_1=require(a144_0x4f3e7f(0xcc)),typedi_1=require(a144_0x4f3e7f(0xdc)),constants_1=require(a144_0x4f3e7f(0x116)),salesforce_retriever_service_1=require(a144_0x4f3e7f(0xfd)),salesforce_sync_service_1=require(a144_0x4f3e7f(0xea)),salesforce_service_1=require(a144_0x4f3e7f(0xb4)),git_provider_manager_1=require(a144_0x4f3e7f(0xcd)),utils_1=require(a144_0x4f3e7f(0xf1)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a144_0x4f3e7f(0xd5)),logger=new core_1[(a144_0x4f3e7f(0xc8))](a144_0x4f3e7f(0xca));let SyncJob=class SyncJob{constructor(_0x35c602,_0x8ff9cc,_0x343410,_0x3645e5){const _0x15ae5d=a144_0x4f3e7f;this[_0x15ae5d(0xd4)]=_0x35c602,this[_0x15ae5d(0xb3)]=_0x8ff9cc,this['salesforceService']=_0x343410,this[_0x15ae5d(0xe6)]=_0x3645e5,this[_0x15ae5d(0xec)]=this[_0x15ae5d(0xd4)][_0x15ae5d(0xe4)]();}async[a144_0x4f3e7f(0x11a)](_0x50bac7){const _0x2b132c=a144_0x4f3e7f;return this[_0x2b132c(0xc4)]['log'](_0x2b132c(0xee)+this[_0x2b132c(0xd4)][_0x2b132c(0xc9)][_0x2b132c(0xbd)]()+_0x2b132c(0xb9)+this[_0x2b132c(0xc0)]['repositoryName']+']\x20[Branch:\x20'+this[_0x2b132c(0xc0)][_0x2b132c(0x100)]+']\x20'+_0x50bac7);}async[a144_0x4f3e7f(0xb7)](){const _0x36bf46=a144_0x4f3e7f;let _0x39d8b4=await this[_0x36bf46(0xec)][_0x36bf46(0x108)](this['syncData'][_0x36bf46(0x102)])['catch'](()=>null);!_0x39d8b4&&(_0x39d8b4=await this[_0x36bf46(0xec)][_0x36bf46(0xf6)]({'name':this[_0x36bf46(0xc0)][_0x36bf46(0x102)],'autoInit':!![],'defaultBranch':this[_0x36bf46(0xc0)]['branchName'],'private':!![]})),this[_0x36bf46(0xf5)]=_0x39d8b4;}async[a144_0x4f3e7f(0x10b)](){const _0x1c3e49=a144_0x4f3e7f;let _0x2f6cd1=await this[_0x1c3e49(0xf5)][_0x1c3e49(0xd1)][_0x1c3e49(0x108)](this[_0x1c3e49(0xc0)][_0x1c3e49(0x100)])[_0x1c3e49(0xb2)](()=>null);!_0x2f6cd1&&(_0x2f6cd1=await this[_0x1c3e49(0xf5)][_0x1c3e49(0xd1)][_0x1c3e49(0xf6)]({'name':this[_0x1c3e49(0xc0)][_0x1c3e49(0x100)]})),this[_0x1c3e49(0x11b)]=_0x2f6cd1;}async[a144_0x4f3e7f(0xe9)](){const _0x4c1a55=a144_0x4f3e7f;return this[_0x4c1a55(0xc0)]['repositoryId']?this['flosumSync'][_0x4c1a55(0xff)](this['syncData']['repositoryId']):this[_0x4c1a55(0xb3)][_0x4c1a55(0xe2)](this[_0x4c1a55(0xc0)][_0x4c1a55(0xba)]);}async[a144_0x4f3e7f(0x103)](){const _0x1f36dd=a144_0x4f3e7f,_0x162d23=await this[_0x1f36dd(0xe9)](),_0xaf9e95=new salesforce_retriever_service_1[(_0x1f36dd(0x119))](this['salesforceService']),_0x2dba55=await _0xaf9e95[_0x1f36dd(0x101)](_0x162d23);return _0x2dba55;}async[a144_0x4f3e7f(0x118)](_0x1defdd){const _0x4c26ca=a144_0x4f3e7f,_0x4b28f7=new commit_components_dto_1[(_0x4c26ca(0xf2))]();return _0x4b28f7[_0x4c26ca(0xfc)]=_0x4c26ca(0x10f),_0x4b28f7[_0x4c26ca(0xd2)]={'name':constants_1[_0x4c26ca(0x112)],'email':constants_1[_0x4c26ca(0xed)]},_0x4b28f7[_0x4c26ca(0xc3)]={'writed':await this[_0x4c26ca(0x103)]()},_0x4b28f7[_0x4c26ca(0x111)]=_0x1defdd,_0x4b28f7[_0x4c26ca(0x117)]=this[_0x4c26ca(0xf5)],_0x4b28f7[_0x4c26ca(0x11b)]=this['branch'],_0x4b28f7[_0x4c26ca(0xf7)]=!![],_0x4b28f7;}async[a144_0x4f3e7f(0xbe)](){const _0x2246c0=a144_0x4f3e7f;this['remoteStateAttachmentId']=await this['flosumSync']['getAttachmentIdByParent'](this[_0x2246c0(0xc0)][_0x2246c0(0xdf)]),this[_0x2246c0(0x107)]=await this[_0x2246c0(0xdd)][_0x2246c0(0xd6)](this[_0x2246c0(0xf8)])['then'](_0x53b29d=>typeof _0x53b29d===_0x2246c0(0xce)?_0x53b29d:JSON[_0x2246c0(0xe3)](_0x53b29d||'{}'))['catch'](()=>({}));if(this['remoteState'][this['repository'][_0x2246c0(0xc2)]]){if(this[_0x2246c0(0x107)][this[_0x2246c0(0xf5)]['gitUrl']][_0x2246c0(0x115)]===this['branch'][_0x2246c0(0x113)])return!![];}return![];}async[a144_0x4f3e7f(0xc6)](){const _0x1f2983=a144_0x4f3e7f,_0x114f67=await this[_0x1f2983(0xf5)][_0x1f2983(0xd1)][_0x1f2983(0x108)](this['branch']['name']);await this['log'](_0x1f2983(0xf3)),this[_0x1f2983(0x107)]={[this[_0x1f2983(0xf5)]['gitUrl']]:{'lastCommit':_0x114f67[_0x1f2983(0x113)]}},await this[_0x1f2983(0xdd)][_0x1f2983(0xc7)](_0x1f2983(0xf0),this['remoteStateAttachmentId'],{'Body':utils_1[_0x1f2983(0xd0)](JSON[_0x1f2983(0x10d)](this[_0x1f2983(0x107)]))});}async[a144_0x4f3e7f(0x101)](_0x35ff3c,_0x1ac6fa,_0x26b47f){const _0xe38dfb=a144_0x4f3e7f;this[_0xe38dfb(0xc0)]=_0x35ff3c,this[_0xe38dfb(0xdd)][_0xe38dfb(0xeb)](_0x1ac6fa),this[_0xe38dfb(0xc4)]=this[_0xe38dfb(0xdd)]['getLogger']();try{await this[_0xe38dfb(0xb3)][_0xe38dfb(0xde)](this[_0xe38dfb(0xc0)],_0xe38dfb(0xdb)),await this[_0xe38dfb(0x11a)](_0xe38dfb(0xbc)),await this[_0xe38dfb(0xb7)](),await this['createBranchIfNotExists']();const _0x595e4b=await this[_0xe38dfb(0xbe)]();if(_0x595e4b){await this[_0xe38dfb(0xb3)][_0xe38dfb(0xde)](this[_0xe38dfb(0xc0)],_0xe38dfb(0xb6)),await this[_0xe38dfb(0x11a)]('[INFO]\x20Branch\x20synchronized.\x20Skip');return;}const _0x30fbe3=await this[_0xe38dfb(0x118)](_0x26b47f);this[_0xe38dfb(0xe6)]['logger']=this[_0xe38dfb(0xc4)],await this['commitJob'][_0xe38dfb(0x101)](_0x30fbe3),await this[_0xe38dfb(0xb3)][_0xe38dfb(0xde)](this['syncData'],_0xe38dfb(0xb6)),await this['updateLastCommit'](),await this[_0xe38dfb(0x11a)](_0xe38dfb(0x10c));}catch(_0x11e2ae){logger[_0xe38dfb(0xd3)](_0x11e2ae),this[_0xe38dfb(0x11a)](_0xe38dfb(0xb8)+_0x11e2ae);throw _0x11e2ae;}finally{await this['logger']['send']();}}};SyncJob=__decorate([typedi_1[a144_0x4f3e7f(0xbb)]({'transient':!![]}),__metadata(a144_0x4f3e7f(0xe5),[git_provider_manager_1[a144_0x4f3e7f(0xb5)],salesforce_sync_service_1[a144_0x4f3e7f(0xe1)],salesforce_service_1[a144_0x4f3e7f(0xe8)],commit_components_job_1[a144_0x4f3e7f(0x105)]])],SyncJob),exports['SyncJob']=SyncJob;