const a149_0x247fde=a149_0x5b34;function a149_0x5b34(_0x558b6b,_0x360fe7){const _0x978bb8=a149_0x39aa();return a149_0x5b34=function(_0x3a00b5,_0x4e2bb3){_0x3a00b5=_0x3a00b5-0x1ae;let _0x39aa0b=_0x978bb8[_0x3a00b5];return _0x39aa0b;},a149_0x5b34(_0x558b6b,_0x360fe7);}(function(_0x5a1883,_0x4f5564){const _0x34aee3=a149_0x5b34,_0x308505=_0x5a1883();while(!![]){try{const _0x503e21=-parseInt(_0x34aee3(0x1db))/0x1*(parseInt(_0x34aee3(0x1e9))/0x2)+parseInt(_0x34aee3(0x1c0))/0x3*(-parseInt(_0x34aee3(0x1b0))/0x4)+parseInt(_0x34aee3(0x203))/0x5+-parseInt(_0x34aee3(0x208))/0x6*(parseInt(_0x34aee3(0x1f7))/0x7)+-parseInt(_0x34aee3(0x1f2))/0x8*(parseInt(_0x34aee3(0x1d9))/0x9)+parseInt(_0x34aee3(0x1d3))/0xa*(-parseInt(_0x34aee3(0x1c9))/0xb)+parseInt(_0x34aee3(0x202))/0xc;if(_0x503e21===_0x4f5564)break;else _0x308505['push'](_0x308505['shift']());}catch(_0x240d06){_0x308505['push'](_0x308505['shift']());}}}(a149_0x39aa,0x5e908));function a149_0x39aa(){const _0x4cb5e3=['[INFO]\x20Branch\x20synchronized.\x20Skip','[INFO]\x20Update\x20remote\x20state.','DEFAULT_GIT_USER_NAME','branch','getRemoteStateAttachmentId','force','log','getComponentIds','checkSyncStatus','repositoryId','createBranchIfNotExists','getCommitDto','Service','message','3jRDGsf','updateLastCommit','constructor','components','search','getLogger','updateRemoteState','convertToSFDX','repo','11GHkffY','getOwnPropertyDescriptor','setLoggerId','__decorate',']\x20[Branch:\x20','SyncJob','./commit-components.job','run','SalesforceSyncService','../../shared/git-provider.manager','3027320jBAlRu','../../../constants','GitProviderManager','catch','gitUrl','parse','9NPSWSr','object','411773cOniOa','commitJob','lastCommit','send','repoService','getBranchComponents','repositoryName','logger','getOne','CommitComponentsDto','getRepoService','Completed','decorate','salesforceSync','2eifACF','design:paramtypes','salesforceService','getComponents','metadata','branchName','CommitComponentsJob','__metadata','branches','6160936wgIOVj','../../salesforce/services/salesforce-retriever.service','length','setStatus','SalesforceService','147DWCCcw','provider','toString','In\x20Progress','defineProperty','repository','../dto/commit-components.dto','gitManager','[SYNC]\x20[','__esModule','typedi','28998792pTzOaB','710170pTESbY','syncData','(((.+)+)+)+$','branchId','createRepositoryIfNotExists','90846hBLQQp','function','[INFO]\x20Start\x20sync\x20job','1474724eGQbcU','retrieveAttachment'];a149_0x39aa=function(){return _0x4cb5e3;};return a149_0x39aa();}const a149_0x4e2bb3=function(){let _0x3b2c21=!![];return function(_0x3fcc0a,_0x45771a){const _0x4533a2=_0x3b2c21?function(){if(_0x45771a){const _0x546ace=_0x45771a['apply'](_0x3fcc0a,arguments);return _0x45771a=null,_0x546ace;}}:function(){};return _0x3b2c21=![],_0x4533a2;};}(),a149_0x3a00b5=a149_0x4e2bb3(this,function(){const _0x35ce1b=a149_0x5b34;return a149_0x3a00b5[_0x35ce1b(0x1f9)]()[_0x35ce1b(0x1c4)](_0x35ce1b(0x205))['toString']()[_0x35ce1b(0x1c2)](a149_0x3a00b5)[_0x35ce1b(0x1c4)](_0x35ce1b(0x205));});a149_0x3a00b5();'use strict';var __decorate=this&&this[a149_0x247fde(0x1cc)]||function(_0x48116c,_0x597e31,_0x4e11e1,_0x438262){const _0xe3875a=a149_0x247fde;var _0x1b2729=arguments[_0xe3875a(0x1f4)],_0x1ef083=_0x1b2729<0x3?_0x597e31:_0x438262===null?_0x438262=Object[_0xe3875a(0x1ca)](_0x597e31,_0x4e11e1):_0x438262,_0x524ab6;if(typeof Reflect==='object'&&typeof Reflect[_0xe3875a(0x1e7)]===_0xe3875a(0x1ae))_0x1ef083=Reflect[_0xe3875a(0x1e7)](_0x48116c,_0x597e31,_0x4e11e1,_0x438262);else{for(var _0x15ec7f=_0x48116c[_0xe3875a(0x1f4)]-0x1;_0x15ec7f>=0x0;_0x15ec7f--)if(_0x524ab6=_0x48116c[_0x15ec7f])_0x1ef083=(_0x1b2729<0x3?_0x524ab6(_0x1ef083):_0x1b2729>0x3?_0x524ab6(_0x597e31,_0x4e11e1,_0x1ef083):_0x524ab6(_0x597e31,_0x4e11e1))||_0x1ef083;}return _0x1b2729>0x3&&_0x1ef083&&Object[_0xe3875a(0x1fb)](_0x597e31,_0x4e11e1,_0x1ef083),_0x1ef083;},__metadata=this&&this[a149_0x247fde(0x1f0)]||function(_0x2667d4,_0x497452){const _0x5736f9=a149_0x247fde;if(typeof Reflect===_0x5736f9(0x1da)&&typeof Reflect[_0x5736f9(0x1ed)]==='function')return Reflect[_0x5736f9(0x1ed)](_0x2667d4,_0x497452);};Object[a149_0x247fde(0x1fb)](exports,a149_0x247fde(0x200),{'value':!![]}),exports[a149_0x247fde(0x1ce)]=void 0x0;const typedi_1=require(a149_0x247fde(0x201)),constants_1=require(a149_0x247fde(0x1d4)),salesforce_retriever_service_1=require(a149_0x247fde(0x1f3)),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require(a149_0x247fde(0x1d2)),commit_components_dto_1=require(a149_0x247fde(0x1fd)),commit_components_job_1=require(a149_0x247fde(0x1cf));let SyncJob=class SyncJob{constructor(_0x2b9bb3,_0x4d5409,_0x5b8129,_0x346944){const _0xa79edf=a149_0x247fde;this[_0xa79edf(0x1fe)]=_0x2b9bb3,this[_0xa79edf(0x1e8)]=_0x4d5409,this['salesforceService']=_0x5b8129,this[_0xa79edf(0x1dc)]=_0x346944,this['repoService']=this[_0xa79edf(0x1fe)][_0xa79edf(0x1e5)]();}async[a149_0x247fde(0x1b8)](_0x5198d8){const _0x516d4f=a149_0x247fde;return this[_0x516d4f(0x1e2)][_0x516d4f(0x1b8)](_0x516d4f(0x1ff)+this[_0x516d4f(0x1fe)][_0x516d4f(0x1f8)]['toUpperCase']()+']\x20[Repository:\x20'+this[_0x516d4f(0x204)][_0x516d4f(0x1e1)]+_0x516d4f(0x1cd)+this['syncData'][_0x516d4f(0x1ee)]+']\x20'+_0x5198d8);}async[a149_0x247fde(0x207)](){const _0x32ef08=a149_0x247fde;!this[_0x32ef08(0x1fc)]&&(this[_0x32ef08(0x1fc)]=await this[_0x32ef08(0x1df)]['create']({'name':this[_0x32ef08(0x204)][_0x32ef08(0x1e1)],'autoInit':!![],'defaultBranch':this[_0x32ef08(0x204)]['branchName'],'private':!![]}));}async[a149_0x247fde(0x1bc)](){const _0x1f78d3=a149_0x247fde;let _0x3de621=await this[_0x1f78d3(0x1fc)]['branches'][_0x1f78d3(0x1e3)](this['syncData'][_0x1f78d3(0x1ee)])[_0x1f78d3(0x1d6)](()=>null);!_0x3de621&&(_0x3de621=await this[_0x1f78d3(0x1fc)][_0x1f78d3(0x1f1)]['create']({'name':this[_0x1f78d3(0x204)][_0x1f78d3(0x1ee)]})),this[_0x1f78d3(0x1b5)]=_0x3de621;}async[a149_0x247fde(0x1b9)](){const _0xd08c59=a149_0x247fde;return this['syncData'][_0xd08c59(0x1bb)]?this[_0xd08c59(0x1e8)]['getComponentsFromRepository'](this['syncData']['repositoryId']):this[_0xd08c59(0x1e8)][_0xd08c59(0x1e0)](this[_0xd08c59(0x204)][_0xd08c59(0x206)]);}async[a149_0x247fde(0x1ec)](){const _0x522144=a149_0x247fde,_0x4e5bb9=await this[_0x522144(0x1b9)](),_0x1104a6=new salesforce_retriever_service_1['SalesforceRetrieverService'](this[_0x522144(0x1eb)]),_0x2dddb1=await _0x1104a6[_0x522144(0x1d0)](_0x4e5bb9);return _0x2dddb1;}async[a149_0x247fde(0x1bd)](_0x2779b5){const _0x519411=a149_0x247fde,_0x309d12=new commit_components_dto_1[(_0x519411(0x1e4))]();return _0x309d12[_0x519411(0x1bf)]='Sync\x20repository',_0x309d12['user']={'name':constants_1[_0x519411(0x1b4)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x309d12[_0x519411(0x1c3)]={'writed':await this[_0x519411(0x1ec)]()},_0x309d12[_0x519411(0x1c7)]=_0x2779b5,_0x309d12[_0x519411(0x1c8)]=this[_0x519411(0x1fc)],_0x309d12[_0x519411(0x1b5)]=this[_0x519411(0x1b5)],_0x309d12[_0x519411(0x1b7)]=!![],_0x309d12;}async[a149_0x247fde(0x1ba)](){const _0x29c518=a149_0x247fde,_0x1e04c4=await this['salesforceSync'][_0x29c518(0x1b6)](this[_0x29c518(0x204)]),_0x311799=await this[_0x29c518(0x1eb)][_0x29c518(0x1b1)](_0x1e04c4)['then'](_0x241c12=>typeof _0x241c12==='string'?JSON[_0x29c518(0x1d8)](_0x241c12):_0x241c12)['catch'](()=>({}));if(_0x311799[this['repository']['gitUrl']]){if(_0x311799[this[_0x29c518(0x1fc)][_0x29c518(0x1d7)]][_0x29c518(0x1dd)]===this[_0x29c518(0x1b5)]['sha'])return!![];}return![];}async[a149_0x247fde(0x1c1)](){const _0x42a7ef=a149_0x247fde,_0xb59c46=await this['repository'][_0x42a7ef(0x1f1)]['getOne'](this[_0x42a7ef(0x1b5)]['name']);await this['log'](_0x42a7ef(0x1b3));const _0x3aeafc={[this[_0x42a7ef(0x1fc)][_0x42a7ef(0x1d7)]]:{'lastCommit':_0xb59c46['sha']}};await this[_0x42a7ef(0x1e8)][_0x42a7ef(0x1c6)](this['syncData'],_0x3aeafc);}async[a149_0x247fde(0x1d0)]({syncRecord:_0x3b25bf,repository:_0x98f5ff,loggerId:_0x16ae19,convertToSFDX:_0x387746}){const _0x1d1cbd=a149_0x247fde;this['syncData']=_0x3b25bf,this[_0x1d1cbd(0x1fc)]=_0x98f5ff,this['salesforceService'][_0x1d1cbd(0x1cb)](_0x16ae19),this['logger']=this['salesforceService'][_0x1d1cbd(0x1c5)]();try{await this['salesforceSync'][_0x1d1cbd(0x1f5)](this[_0x1d1cbd(0x204)],_0x1d1cbd(0x1fa)),await this['log'](_0x1d1cbd(0x1af)),await this[_0x1d1cbd(0x207)](),await this['createBranchIfNotExists']();const _0x198952=await this[_0x1d1cbd(0x1ba)]();if(_0x198952){await this[_0x1d1cbd(0x1e8)][_0x1d1cbd(0x1f5)](this[_0x1d1cbd(0x204)],'Completed'),await this[_0x1d1cbd(0x1b8)](_0x1d1cbd(0x1b2));return;}const _0x3e1766=await this[_0x1d1cbd(0x1bd)](_0x387746);this[_0x1d1cbd(0x1dc)]['logger']=this['logger'],await this[_0x1d1cbd(0x1dc)]['run'](_0x3e1766),await this[_0x1d1cbd(0x1e8)][_0x1d1cbd(0x1f5)](this[_0x1d1cbd(0x204)],_0x1d1cbd(0x1e6)),await this[_0x1d1cbd(0x1c1)](),await this['log']('[INFO]\x20Sync\x20job\x20done.');}catch(_0x1debd5){throw _0x1debd5;}finally{await this['logger'][_0x1d1cbd(0x1de)]();}}};SyncJob=__decorate([(0x0,typedi_1[a149_0x247fde(0x1be)])({'transient':!![]}),__metadata(a149_0x247fde(0x1ea),[git_provider_manager_1[a149_0x247fde(0x1d5)],salesforce_sync_service_1[a149_0x247fde(0x1d1)],salesforce_service_1[a149_0x247fde(0x1f6)],commit_components_job_1[a149_0x247fde(0x1ef)]])],SyncJob),exports['SyncJob']=SyncJob;