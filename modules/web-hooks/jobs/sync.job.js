const a148_0x430990=a148_0x562e;(function(_0x131b18,_0x32c769){const _0x31e667=a148_0x562e,_0x1ec3bb=_0x131b18();while(!![]){try{const _0x17b2d6=-parseInt(_0x31e667(0x190))/0x1*(-parseInt(_0x31e667(0x19a))/0x2)+parseInt(_0x31e667(0x1c3))/0x3+parseInt(_0x31e667(0x194))/0x4+parseInt(_0x31e667(0x186))/0x5*(parseInt(_0x31e667(0x1a9))/0x6)+parseInt(_0x31e667(0x180))/0x7+parseInt(_0x31e667(0x1bb))/0x8*(-parseInt(_0x31e667(0x1a1))/0x9)+-parseInt(_0x31e667(0x1c2))/0xa;if(_0x17b2d6===_0x32c769)break;else _0x1ec3bb['push'](_0x1ec3bb['shift']());}catch(_0x3910d5){_0x1ec3bb['push'](_0x1ec3bb['shift']());}}}(a148_0x2b2a,0x75621));const a148_0x53c2a4=function(){let _0x21258b=!![];return function(_0x3adcd5,_0x32b666){const _0x8e5295=_0x21258b?function(){const _0x575206=a148_0x562e;if(_0x32b666){const _0x56e1e5=_0x32b666[_0x575206(0x193)](_0x3adcd5,arguments);return _0x32b666=null,_0x56e1e5;}}:function(){};return _0x21258b=![],_0x8e5295;};}(),a148_0xd19891=a148_0x53c2a4(this,function(){const _0x542705=a148_0x562e;return a148_0xd19891[_0x542705(0x1be)]()['search']('(((.+)+)+)+$')[_0x542705(0x1be)]()[_0x542705(0x184)](a148_0xd19891)[_0x542705(0x18f)](_0x542705(0x171));});a148_0xd19891();'use strict';var __decorate=this&&this[a148_0x430990(0x1b6)]||function(_0x134947,_0x41fd3c,_0x2ec4d4,_0x5c1dd4){const _0x529da8=a148_0x430990;var _0xb4c01b=arguments['length'],_0x98063f=_0xb4c01b<0x3?_0x41fd3c:_0x5c1dd4===null?_0x5c1dd4=Object[_0x529da8(0x19c)](_0x41fd3c,_0x2ec4d4):_0x5c1dd4,_0x27bf9d;if(typeof Reflect===_0x529da8(0x187)&&typeof Reflect[_0x529da8(0x17e)]===_0x529da8(0x179))_0x98063f=Reflect[_0x529da8(0x17e)](_0x134947,_0x41fd3c,_0x2ec4d4,_0x5c1dd4);else{for(var _0x3bdeb2=_0x134947[_0x529da8(0x181)]-0x1;_0x3bdeb2>=0x0;_0x3bdeb2--)if(_0x27bf9d=_0x134947[_0x3bdeb2])_0x98063f=(_0xb4c01b<0x3?_0x27bf9d(_0x98063f):_0xb4c01b>0x3?_0x27bf9d(_0x41fd3c,_0x2ec4d4,_0x98063f):_0x27bf9d(_0x41fd3c,_0x2ec4d4))||_0x98063f;}return _0xb4c01b>0x3&&_0x98063f&&Object[_0x529da8(0x1c4)](_0x41fd3c,_0x2ec4d4,_0x98063f),_0x98063f;},__metadata=this&&this[a148_0x430990(0x1bc)]||function(_0x7558da,_0x4c672d){const _0x3f03ac=a148_0x430990;if(typeof Reflect==='object'&&typeof Reflect[_0x3f03ac(0x1b1)]===_0x3f03ac(0x179))return Reflect['metadata'](_0x7558da,_0x4c672d);};Object[a148_0x430990(0x1c4)](exports,'__esModule',{'value':!![]}),exports[a148_0x430990(0x185)]=void 0x0;const typedi_1=require('typedi'),constants_1=require(a148_0x430990(0x189)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a148_0x430990(0x18b)),git_provider_manager_1=require(a148_0x430990(0x188)),commit_components_dto_1=require(a148_0x430990(0x177)),commit_components_job_1=require('./commit-components.job');function a148_0x2b2a(){const _0x174451=['parse','logger','Completed','477DoTqJK','setLoggerId','name','repositoryName','SalesforceRetrieverService','updateLastCommit','setStatus','branchId','22740GuAjDz','salesforceSync','repository','lastCommit','getCommitDto','user','DEFAULT_GIT_USER_NAME',']\x20[Repository:\x20','metadata','message','checkSyncStatus','[INFO]\x20Start\x20sync\x20job','repoService','__decorate','createRepositoryIfNotExists','retrieveAttachment','toUpperCase','Sync\x20repository','99680HhrdBD','__metadata','syncData','toString','Service','SalesforceSyncService','getBranchComponents','3599400YpDQmV','139725jRjbHW','defineProperty','force','branch','DEFAULT_GIT_USER_EMAIL','getComponentsFromRepository','run','(((.+)+)+)+$','create','[INFO]\x20Update\x20remote\x20state.','In\x20Progress','repositoryId','updateRemoteState','../dto/commit-components.dto','gitManager','function','catch','getComponentIds','repo','getRepoService','decorate','string','3828951NFOPpE','length','sha','getOne','constructor','SyncJob','50DllBOg','object','../../shared/git-provider.manager','../../../constants','log','../../salesforce/services/salesforce.service','GitProviderManager','salesforceService','getComponents','search','1SjeCKR','branchName','branches','apply','1970208xpZNOb','getRemoteStateAttachmentId',']\x20[Branch:\x20','gitUrl','SalesforceService','commitJob','754202OEDluk','provider','getOwnPropertyDescriptor','createBranchIfNotExists'];a148_0x2b2a=function(){return _0x174451;};return a148_0x2b2a();}let SyncJob=class SyncJob{constructor(_0x1bc2b0,_0x6fec92,_0x5f04a6,_0x5c2240){const _0x2c3252=a148_0x430990;this[_0x2c3252(0x178)]=_0x1bc2b0,this[_0x2c3252(0x1aa)]=_0x6fec92,this['salesforceService']=_0x5f04a6,this[_0x2c3252(0x199)]=_0x5c2240,this['repoService']=this[_0x2c3252(0x178)][_0x2c3252(0x17d)]();}async[a148_0x430990(0x18a)](_0x4a64b8){const _0x2e416a=a148_0x430990;return this[_0x2e416a(0x19f)][_0x2e416a(0x18a)]('[SYNC]\x20['+this[_0x2e416a(0x178)][_0x2e416a(0x19b)][_0x2e416a(0x1b9)]()+_0x2e416a(0x1b0)+this[_0x2e416a(0x1bd)][_0x2e416a(0x1a4)]+_0x2e416a(0x196)+this[_0x2e416a(0x1bd)][_0x2e416a(0x191)]+']\x20'+_0x4a64b8);}async['createRepositoryIfNotExists'](){const _0x31178e=a148_0x430990;!this[_0x31178e(0x1ab)]&&(this['repository']=await this[_0x31178e(0x1b5)][_0x31178e(0x172)]({'name':this[_0x31178e(0x1bd)][_0x31178e(0x1a4)],'autoInit':!![],'defaultBranch':this[_0x31178e(0x1bd)][_0x31178e(0x191)],'private':!![]}));}async[a148_0x430990(0x19d)](){const _0x1c6b6a=a148_0x430990;let _0x1e2e27=await this[_0x1c6b6a(0x1ab)][_0x1c6b6a(0x192)][_0x1c6b6a(0x183)](this[_0x1c6b6a(0x1bd)][_0x1c6b6a(0x191)])['catch'](()=>null);!_0x1e2e27&&(_0x1e2e27=await this['repository'][_0x1c6b6a(0x192)][_0x1c6b6a(0x172)]({'name':this[_0x1c6b6a(0x1bd)][_0x1c6b6a(0x191)]})),this[_0x1c6b6a(0x1c6)]=_0x1e2e27;}async[a148_0x430990(0x17b)](){const _0x5a3462=a148_0x430990;return this[_0x5a3462(0x1bd)][_0x5a3462(0x175)]?this['salesforceSync'][_0x5a3462(0x1c8)](this[_0x5a3462(0x1bd)][_0x5a3462(0x175)]):this[_0x5a3462(0x1aa)][_0x5a3462(0x1c1)](this[_0x5a3462(0x1bd)][_0x5a3462(0x1a8)]);}async['getComponents'](){const _0xcf07f7=a148_0x430990,_0x55e4d3=await this['getComponentIds'](),_0x4e30a6=new salesforce_retriever_service_1[(_0xcf07f7(0x1a5))](this[_0xcf07f7(0x18d)]),_0x458c9a=await _0x4e30a6['run'](_0x55e4d3);return _0x458c9a;}async[a148_0x430990(0x1ad)](_0x982974){const _0x5b723f=a148_0x430990,_0x140ac0=new commit_components_dto_1['CommitComponentsDto']();return _0x140ac0[_0x5b723f(0x1b2)]=_0x5b723f(0x1ba),_0x140ac0[_0x5b723f(0x1ae)]={'name':constants_1[_0x5b723f(0x1af)],'email':constants_1[_0x5b723f(0x1c7)]},_0x140ac0['components']={'writed':await this[_0x5b723f(0x18e)]()},_0x140ac0['convertToSFDX']=_0x982974,_0x140ac0[_0x5b723f(0x17c)]=this[_0x5b723f(0x1ab)],_0x140ac0[_0x5b723f(0x1c6)]=this[_0x5b723f(0x1c6)],_0x140ac0[_0x5b723f(0x1c5)]=!![],_0x140ac0;}async[a148_0x430990(0x1b3)](){const _0x2df50b=a148_0x430990,_0x486e07=await this[_0x2df50b(0x1aa)][_0x2df50b(0x195)](this[_0x2df50b(0x1bd)]),_0x19a8b0=await this['salesforceService'][_0x2df50b(0x1b8)](_0x486e07)['then'](_0x426c25=>typeof _0x426c25===_0x2df50b(0x17f)?JSON[_0x2df50b(0x19e)](_0x426c25):_0x426c25)[_0x2df50b(0x17a)](()=>({}));if(_0x19a8b0[this['repository'][_0x2df50b(0x197)]]){if(_0x19a8b0[this[_0x2df50b(0x1ab)][_0x2df50b(0x197)]][_0x2df50b(0x1ac)]===this[_0x2df50b(0x1c6)][_0x2df50b(0x182)])return!![];}return![];}async[a148_0x430990(0x1a6)](){const _0x2b25a8=a148_0x430990,_0x35deb7=await this[_0x2b25a8(0x1ab)][_0x2b25a8(0x192)]['getOne'](this[_0x2b25a8(0x1c6)][_0x2b25a8(0x1a3)]);await this[_0x2b25a8(0x18a)](_0x2b25a8(0x173));const _0x16f72={[this[_0x2b25a8(0x1ab)][_0x2b25a8(0x197)]]:{'lastCommit':_0x35deb7[_0x2b25a8(0x182)]}};await this['salesforceSync'][_0x2b25a8(0x176)](this[_0x2b25a8(0x1bd)],_0x16f72);}async[a148_0x430990(0x1c9)]({syncRecord:_0x3fd516,repository:_0x15e91f,loggerId:_0x37d2f1,convertToSFDX:_0x1fdd90}){const _0x56601f=a148_0x430990;this[_0x56601f(0x1bd)]=_0x3fd516,this[_0x56601f(0x1ab)]=_0x15e91f,this[_0x56601f(0x18d)][_0x56601f(0x1a2)](_0x37d2f1),this[_0x56601f(0x19f)]=this[_0x56601f(0x18d)]['getLogger']();try{await this['salesforceSync'][_0x56601f(0x1a7)](this[_0x56601f(0x1bd)],_0x56601f(0x174)),await this[_0x56601f(0x18a)](_0x56601f(0x1b4)),await this[_0x56601f(0x1b7)](),await this['createBranchIfNotExists']();const _0x23a173=await this['checkSyncStatus']();if(_0x23a173){await this['salesforceSync'][_0x56601f(0x1a7)](this[_0x56601f(0x1bd)],_0x56601f(0x1a0)),await this[_0x56601f(0x18a)]('[INFO]\x20Branch\x20synchronized.\x20Skip');return;}const _0x29110c=await this[_0x56601f(0x1ad)](_0x1fdd90);this[_0x56601f(0x199)][_0x56601f(0x19f)]=this[_0x56601f(0x19f)],await this[_0x56601f(0x199)][_0x56601f(0x1c9)](_0x29110c),await this[_0x56601f(0x1aa)][_0x56601f(0x1a7)](this[_0x56601f(0x1bd)],_0x56601f(0x1a0)),await this['updateLastCommit'](),await this[_0x56601f(0x18a)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x16bc07){throw _0x16bc07;}finally{await this['logger']['send']();}}};function a148_0x562e(_0x378bac,_0x3a3d85){const _0x2a2f6f=a148_0x2b2a();return a148_0x562e=function(_0xd19891,_0x53c2a4){_0xd19891=_0xd19891-0x171;let _0x2b2ae8=_0x2a2f6f[_0xd19891];return _0x2b2ae8;},a148_0x562e(_0x378bac,_0x3a3d85);}SyncJob=__decorate([(0x0,typedi_1[a148_0x430990(0x1bf)])({'transient':!![]}),__metadata('design:paramtypes',[git_provider_manager_1[a148_0x430990(0x18c)],salesforce_sync_service_1[a148_0x430990(0x1c0)],salesforce_service_1[a148_0x430990(0x198)],commit_components_job_1['CommitComponentsJob']])],SyncJob),exports[a148_0x430990(0x185)]=SyncJob;