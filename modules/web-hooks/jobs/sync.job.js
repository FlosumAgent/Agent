const a141_0x3c99=['objectId','retrieveAttachment','getComponentsFromRepository','getComponentIds','stringify','__esModule','getAttachmentIdByParent','function','4WfweCn','64627OcpfCF','[INFO]\x20Update\x20remote\x20state.','encodeBase64','convertToSFDX','branches','[SYNC]\x20[','getOwnPropertyDescriptor','constructor','137396IldqjS','createRepositoryIfNotExists','setStatus','getOne','decorate','getCommitDto','typedi','syncData','[INFO]\x20Start\x20sync\x20job','commitJob','branch','repositoryName','salesforceService','updateLastCommit','createBranchIfNotExists','gitManager','sfLogger','GitProviderManager','SalesforceRetrieverService','231762atNIhw','repositoryId','204632WejIIo','defineProperty','gitUrl','getBranchComponents','run','create','patchObject','flosumSync','branchName','remoteState','SalesforceSyncService','force','Sync\x20repository','length','object','catch','../dto/commit-components.dto','CommitComponentsJob','DEFAULT_GIT_USER_NAME','../../shared/utils','157786NkCEmm','metadata','../../../constants','Completed','2xSBdeA','remoteStateAttachmentId','repoService','[INFO]\x20Sync\x20job\x20done.','SyncJob','118908ZqsliU','./commit-components.job','sendLog','componentsIds','../../salesforce/services/salesforce.service','provider','toUpperCase','repository','35179ZIPJRP','../../shared/git-provider.manager','setLoggerId','sha','message','apply','log','repo',']\x20[Repository:\x20','Attachment','CommitComponentsDto','then','1SlUwZM',']\x20[Branch:\x20','../../salesforce/services/salesforce-sync.service','parse','checkSyncStatus'];const a141_0x588922=a141_0x510c;(function(_0x1ef055,_0x3af425){const _0x4173b3=a141_0x510c;while(!![]){try{const _0x1a7bba=-parseInt(_0x4173b3(0x1f9))+parseInt(_0x4173b3(0x1e4))*parseInt(_0x4173b3(0x1ce))+-parseInt(_0x4173b3(0x1f7))+parseInt(_0x4173b3(0x216))+parseInt(_0x4173b3(0x20d))+-parseInt(_0x4173b3(0x1dc))*-parseInt(_0x4173b3(0x1db))+parseInt(_0x4173b3(0x211))*-parseInt(_0x4173b3(0x21e));if(_0x1a7bba===_0x3af425)break;else _0x1ef055['push'](_0x1ef055['shift']());}catch(_0x531c37){_0x1ef055['push'](_0x1ef055['shift']());}}}(a141_0x3c99,0x287d6));const a141_0x5dac8b=function(){let _0x1132f4=!![];return function(_0xfc9818,_0x17031c){const _0x1fb534=_0x1132f4?function(){const _0x24490e=a141_0x510c;if(_0x17031c){const _0xbd91d2=_0x17031c[_0x24490e(0x223)](_0xfc9818,arguments);return _0x17031c=null,_0xbd91d2;}}:function(){};return _0x1132f4=![],_0x1fb534;};}(),a141_0x4c33e4=a141_0x5dac8b(this,function(){const _0x2b639d=function(){const _0x151804=a141_0x510c,_0x3bdc10=_0x2b639d[_0x151804(0x1e3)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3bdc10['test'](a141_0x4c33e4);};return _0x2b639d();});a141_0x4c33e4();'use strict';var __decorate=this&&this['__decorate']||function(_0x411bbf,_0x5821da,_0x3eff19,_0x5830da){const _0x3c57c3=a141_0x510c;var _0x378f70=arguments[_0x3c57c3(0x206)],_0x2b5350=_0x378f70<0x3?_0x5821da:_0x5830da===null?_0x5830da=Object[_0x3c57c3(0x1e2)](_0x5821da,_0x3eff19):_0x5830da,_0x13d232;if(typeof Reflect==='object'&&typeof Reflect[_0x3c57c3(0x1e8)]===_0x3c57c3(0x1da))_0x2b5350=Reflect[_0x3c57c3(0x1e8)](_0x411bbf,_0x5821da,_0x3eff19,_0x5830da);else{for(var _0x479af0=_0x411bbf[_0x3c57c3(0x206)]-0x1;_0x479af0>=0x0;_0x479af0--)if(_0x13d232=_0x411bbf[_0x479af0])_0x2b5350=(_0x378f70<0x3?_0x13d232(_0x2b5350):_0x378f70>0x3?_0x13d232(_0x5821da,_0x3eff19,_0x2b5350):_0x13d232(_0x5821da,_0x3eff19))||_0x2b5350;}return _0x378f70>0x3&&_0x2b5350&&Object[_0x3c57c3(0x1fa)](_0x5821da,_0x3eff19,_0x2b5350),_0x2b5350;},__metadata=this&&this['__metadata']||function(_0x550695,_0x2558a8){const _0x4cf458=a141_0x510c;if(typeof Reflect===_0x4cf458(0x207)&&typeof Reflect[_0x4cf458(0x20e)]===_0x4cf458(0x1da))return Reflect[_0x4cf458(0x20e)](_0x550695,_0x2558a8);};Object[a141_0x588922(0x1fa)](exports,a141_0x588922(0x1d8),{'value':!![]}),exports[a141_0x588922(0x215)]=void 0x0;const typedi_1=require(a141_0x588922(0x1ea)),constants_1=require(a141_0x588922(0x20f)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a141_0x588922(0x1d0)),salesforce_service_1=require(a141_0x588922(0x21a)),git_provider_manager_1=require(a141_0x588922(0x21f)),utils_1=require(a141_0x588922(0x20c)),commit_components_dto_1=require(a141_0x588922(0x209)),commit_components_job_1=require(a141_0x588922(0x217));function a141_0x510c(_0x24fbe6,_0x4d5c00){return a141_0x510c=function(_0x55bb28,_0x4c33e4){_0x55bb28=_0x55bb28-0x1ca;let _0x5dac8b=a141_0x3c99[_0x55bb28];return _0x5dac8b;},a141_0x510c(_0x24fbe6,_0x4d5c00);}let SyncJob=class SyncJob{constructor(_0x54de66,_0x21d648,_0x17cf58,_0x4ffb01){const _0x551631=a141_0x588922;this[_0x551631(0x1f3)]=_0x54de66,this[_0x551631(0x200)]=_0x21d648,this['salesforceService']=_0x17cf58,this[_0x551631(0x1ed)]=_0x4ffb01,this[_0x551631(0x213)]=this[_0x551631(0x1f3)]['getRepoService'](),_0x4ffb01['retriever']=new salesforce_retriever_service_1[(_0x551631(0x1f6))](this[_0x551631(0x1f0)]),_0x4ffb01['on'](_0x551631(0x224),_0x5177f1=>this['sfLogger'](_0x5177f1));}async[a141_0x588922(0x1f4)](_0x581d10){const _0x5c387c=a141_0x588922;return this[_0x5c387c(0x1f0)][_0x5c387c(0x218)](_0x5c387c(0x1e1)+this[_0x5c387c(0x1f3)][_0x5c387c(0x21b)][_0x5c387c(0x21c)]()+_0x5c387c(0x1ca)+this['syncData'][_0x5c387c(0x1ef)]+_0x5c387c(0x1cf)+this[_0x5c387c(0x1eb)][_0x5c387c(0x201)]+']\x20'+_0x581d10);}async[a141_0x588922(0x1e5)](){const _0x2341c1=a141_0x588922;let _0xa299dc=await this[_0x2341c1(0x213)]['getOne'](this[_0x2341c1(0x1eb)][_0x2341c1(0x1ef)])[_0x2341c1(0x208)](()=>null);!_0xa299dc&&(_0xa299dc=await this['repoService'][_0x2341c1(0x1fe)]({'name':this[_0x2341c1(0x1eb)][_0x2341c1(0x1ef)],'autoInit':!![],'defaultBranch':this[_0x2341c1(0x1eb)][_0x2341c1(0x201)],'private':!![]})),this[_0x2341c1(0x21d)]=_0xa299dc;}async[a141_0x588922(0x1f2)](){const _0x401510=a141_0x588922;let _0x4f3397=await this['repository'][_0x401510(0x1e0)][_0x401510(0x1e7)](this[_0x401510(0x1eb)]['branchName'])[_0x401510(0x208)](()=>null);!_0x4f3397&&(_0x4f3397=await this['repository'][_0x401510(0x1e0)]['create']({'name':this[_0x401510(0x1eb)]['branchName']})),this['branch']=_0x4f3397;}async[a141_0x588922(0x1d6)](){const _0x3c38b5=a141_0x588922;return this['syncData'][_0x3c38b5(0x1f8)]?this[_0x3c38b5(0x200)][_0x3c38b5(0x1d5)](this['syncData'][_0x3c38b5(0x1f8)]):this[_0x3c38b5(0x200)][_0x3c38b5(0x1fc)](this[_0x3c38b5(0x1eb)]['branchId']);}async[a141_0x588922(0x1e9)](_0x3e4bfd){const _0x2ed79e=a141_0x588922,_0xa21b03=new commit_components_dto_1[(_0x2ed79e(0x1cc))]();return _0xa21b03[_0x2ed79e(0x222)]=_0x2ed79e(0x205),_0xa21b03['user']={'name':constants_1[_0x2ed79e(0x20b)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0xa21b03[_0x2ed79e(0x219)]=await this[_0x2ed79e(0x1d6)](),_0xa21b03[_0x2ed79e(0x1df)]=_0x3e4bfd,_0xa21b03[_0x2ed79e(0x225)]=this[_0x2ed79e(0x21d)],_0xa21b03[_0x2ed79e(0x1ee)]=this[_0x2ed79e(0x1ee)],_0xa21b03[_0x2ed79e(0x204)]=!![],_0xa21b03;}async[a141_0x588922(0x1d2)](){const _0x460600=a141_0x588922;this['remoteStateAttachmentId']=await this[_0x460600(0x200)][_0x460600(0x1d9)](this[_0x460600(0x1eb)][_0x460600(0x1d3)]),this['remoteState']=await this['salesforceService'][_0x460600(0x1d4)](this[_0x460600(0x212)])[_0x460600(0x1cd)](_0x215cdb=>typeof _0x215cdb===_0x460600(0x207)?_0x215cdb:JSON[_0x460600(0x1d1)](_0x215cdb||'{}'))[_0x460600(0x208)](()=>({}));if(this[_0x460600(0x202)][this[_0x460600(0x21d)][_0x460600(0x1fb)]]){if(this[_0x460600(0x202)][this['repository'][_0x460600(0x1fb)]]['lastCommit']===this[_0x460600(0x1ee)]['sha'])return!![];}return![];}async[a141_0x588922(0x1f1)](){const _0x24fcaf=a141_0x588922,_0x1f90d5=await this[_0x24fcaf(0x21d)]['branches'][_0x24fcaf(0x1e7)](this[_0x24fcaf(0x1ee)]['name']);await this[_0x24fcaf(0x1f4)](_0x24fcaf(0x1dd)),this[_0x24fcaf(0x202)]={[this[_0x24fcaf(0x21d)][_0x24fcaf(0x1fb)]]:{'lastCommit':_0x1f90d5[_0x24fcaf(0x221)]}},await this[_0x24fcaf(0x1f0)][_0x24fcaf(0x1ff)](_0x24fcaf(0x1cb),this[_0x24fcaf(0x212)],{'Body':utils_1[_0x24fcaf(0x1de)](JSON[_0x24fcaf(0x1d7)](this['remoteState']))});}async[a141_0x588922(0x1fd)](_0x1160f3,_0x224f09,_0x3947b9){const _0x4d89e2=a141_0x588922;this[_0x4d89e2(0x1eb)]=_0x1160f3,this[_0x4d89e2(0x1f0)][_0x4d89e2(0x220)](_0x224f09),await this[_0x4d89e2(0x200)][_0x4d89e2(0x1e6)](this[_0x4d89e2(0x1eb)],'In\x20Progress'),await this[_0x4d89e2(0x1f4)](_0x4d89e2(0x1ec)),await this['createRepositoryIfNotExists'](),await this[_0x4d89e2(0x1f2)]();const _0x45d3db=await this[_0x4d89e2(0x1d2)]();if(_0x45d3db){await this[_0x4d89e2(0x200)][_0x4d89e2(0x1e6)](this[_0x4d89e2(0x1eb)],_0x4d89e2(0x210)),await this['sfLogger']('[INFO]\x20Branch\x20synchronized.\x20Skip');return;}const _0x42ca23=await this[_0x4d89e2(0x1e9)](_0x3947b9);await this['commitJob'][_0x4d89e2(0x1fd)](_0x42ca23),await this[_0x4d89e2(0x200)][_0x4d89e2(0x1e6)](this[_0x4d89e2(0x1eb)],'Completed'),await this['updateLastCommit'](),await this[_0x4d89e2(0x1f4)](_0x4d89e2(0x214));}};SyncJob=__decorate([typedi_1['Service']({'transient':!![]}),__metadata('design:paramtypes',[git_provider_manager_1[a141_0x588922(0x1f5)],salesforce_sync_service_1[a141_0x588922(0x203)],salesforce_service_1['SalesforceService'],commit_components_job_1[a141_0x588922(0x20a)]])],SyncJob),exports[a141_0x588922(0x215)]=SyncJob;