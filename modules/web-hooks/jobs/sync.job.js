const a149_0x50a191=a149_0x4cc6;(function(_0x9d384b,_0x42e22b){const _0x33ba38=a149_0x4cc6,_0x261bdd=_0x9d384b();while(!![]){try{const _0x5f0823=-parseInt(_0x33ba38(0xef))/0x1+parseInt(_0x33ba38(0x114))/0x2*(-parseInt(_0x33ba38(0xdf))/0x3)+-parseInt(_0x33ba38(0x108))/0x4+parseInt(_0x33ba38(0xf4))/0x5*(parseInt(_0x33ba38(0xd3))/0x6)+-parseInt(_0x33ba38(0x118))/0x7+-parseInt(_0x33ba38(0xda))/0x8*(parseInt(_0x33ba38(0x10f))/0x9)+parseInt(_0x33ba38(0xe2))/0xa;if(_0x5f0823===_0x42e22b)break;else _0x261bdd['push'](_0x261bdd['shift']());}catch(_0x3f8b9b){_0x261bdd['push'](_0x261bdd['shift']());}}}(a149_0x4d46,0x610c7));const a149_0x3a000f=function(){let _0x1c206a=!![];return function(_0x49fa31,_0x2150e7){const _0x5b119a=_0x1c206a?function(){const _0x670078=a149_0x4cc6;if(_0x2150e7){const _0x4ba899=_0x2150e7[_0x670078(0x104)](_0x49fa31,arguments);return _0x2150e7=null,_0x4ba899;}}:function(){};return _0x1c206a=![],_0x5b119a;};}(),a149_0xddc50d=a149_0x3a000f(this,function(){const _0x40111b=a149_0x4cc6;return a149_0xddc50d['toString']()[_0x40111b(0x107)](_0x40111b(0xfd))[_0x40111b(0xfb)]()[_0x40111b(0x10a)](a149_0xddc50d)['search']('(((.+)+)+)+$');});function a149_0x4d46(){const _0x4b3a52=['SyncJob','./commit-components.job','then','branchId','[INFO]\x20Update\x20remote\x20state.','commitJob','6aXjraj','Service','function','user','lastCommit','design:paramtypes','syncData','2512FzKYel','send','gitManager','branchName','repo','616269nOytmn','[INFO]\x20Start\x20sync\x20job','run','16055660wyQFDa','DEFAULT_GIT_USER_NAME','catch','DEFAULT_GIT_USER_EMAIL','repositoryName','getComponentIds','../dto/commit-components.dto','../../salesforce/services/salesforce-sync.service','length','updateLastCommit','parse','metadata','repositoryId','470759Qdypnj','../../shared/git-provider.manager','getOne','[SYNC]\x20[','convertToSFDX','2799005XpVSUc','log','SalesforceService','getRepoService','getOwnPropertyDescriptor','typedi','[INFO]\x20Sync\x20job\x20done.','toString','create','(((.+)+)+)+$','branch','updateRemoteState','CommitComponentsDto','repoService','getComponentsFromRepository','object','apply','name','branches','search','1993916YsEmLf','[INFO]\x20Branch\x20synchronized.\x20Skip','constructor','GitProviderManager','__metadata','SalesforceSyncService','checkSyncStatus','14391OQFums','salesforceService','salesforceSync','SalesforceRetrieverService','getComponents','2WstOHY','createRepositoryIfNotExists','setStatus','Completed','637763rlNNox','setLoggerId','repository','sha','__esModule','logger','In\x20Progress','getCommitDto',']\x20[Repository:\x20','decorate','gitUrl','getLogger','defineProperty'];a149_0x4d46=function(){return _0x4b3a52;};return a149_0x4d46();}a149_0xddc50d();'use strict';var __decorate=this&&this['__decorate']||function(_0x1deb64,_0x449ac1,_0x3489bc,_0x3f4d4c){const _0x4e75b6=a149_0x4cc6;var _0x5bfbf2=arguments[_0x4e75b6(0xea)],_0x259858=_0x5bfbf2<0x3?_0x449ac1:_0x3f4d4c===null?_0x3f4d4c=Object[_0x4e75b6(0xf8)](_0x449ac1,_0x3489bc):_0x3f4d4c,_0x3bd617;if(typeof Reflect==='object'&&typeof Reflect[_0x4e75b6(0x121)]===_0x4e75b6(0xd5))_0x259858=Reflect[_0x4e75b6(0x121)](_0x1deb64,_0x449ac1,_0x3489bc,_0x3f4d4c);else{for(var _0xc77dcf=_0x1deb64[_0x4e75b6(0xea)]-0x1;_0xc77dcf>=0x0;_0xc77dcf--)if(_0x3bd617=_0x1deb64[_0xc77dcf])_0x259858=(_0x5bfbf2<0x3?_0x3bd617(_0x259858):_0x5bfbf2>0x3?_0x3bd617(_0x449ac1,_0x3489bc,_0x259858):_0x3bd617(_0x449ac1,_0x3489bc))||_0x259858;}return _0x5bfbf2>0x3&&_0x259858&&Object['defineProperty'](_0x449ac1,_0x3489bc,_0x259858),_0x259858;},__metadata=this&&this[a149_0x50a191(0x10c)]||function(_0x268991,_0x29e270){const _0x354f04=a149_0x50a191;if(typeof Reflect===_0x354f04(0x103)&&typeof Reflect[_0x354f04(0xed)]===_0x354f04(0xd5))return Reflect[_0x354f04(0xed)](_0x268991,_0x29e270);};Object[a149_0x50a191(0x124)](exports,a149_0x50a191(0x11c),{'value':!![]}),exports[a149_0x50a191(0x125)]=void 0x0;const typedi_1=require(a149_0x50a191(0xf9)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a149_0x50a191(0xe9)),salesforce_service_1=require('../../salesforce/services/salesforce.service'),git_provider_manager_1=require(a149_0x50a191(0xf0)),commit_components_dto_1=require(a149_0x50a191(0xe8)),commit_components_job_1=require(a149_0x50a191(0x126));function a149_0x4cc6(_0x71bd08,_0x25a792){const _0x3c2132=a149_0x4d46();return a149_0x4cc6=function(_0xddc50d,_0x3a000f){_0xddc50d=_0xddc50d-0xd1;let _0x4d46e1=_0x3c2132[_0xddc50d];return _0x4d46e1;},a149_0x4cc6(_0x71bd08,_0x25a792);}let SyncJob=class SyncJob{constructor(_0x1cccb5,_0x500ac9,_0x3a7e02,_0x4296fa){const _0x4c3130=a149_0x50a191;this[_0x4c3130(0xdc)]=_0x1cccb5,this[_0x4c3130(0x111)]=_0x500ac9,this[_0x4c3130(0x110)]=_0x3a7e02,this[_0x4c3130(0xd2)]=_0x4296fa,this['repoService']=this['gitManager'][_0x4c3130(0xf7)]();}async[a149_0x50a191(0xf5)](_0x309ea1){const _0x46ea73=a149_0x50a191;return this[_0x46ea73(0x11d)]['log'](_0x46ea73(0xf2)+this['gitManager']['provider']['toUpperCase']()+_0x46ea73(0x120)+this[_0x46ea73(0xd9)][_0x46ea73(0xe6)]+']\x20[Branch:\x20'+this[_0x46ea73(0xd9)][_0x46ea73(0xdd)]+']\x20'+_0x309ea1);}async[a149_0x50a191(0x115)](){const _0x30d336=a149_0x50a191;!this[_0x30d336(0x11a)]&&(this[_0x30d336(0x11a)]=await this[_0x30d336(0x101)][_0x30d336(0xfc)]({'name':this[_0x30d336(0xd9)][_0x30d336(0xe6)],'autoInit':!![],'defaultBranch':this[_0x30d336(0xd9)][_0x30d336(0xdd)],'private':!![]}));}async['createBranchIfNotExists'](){const _0x4a3e0e=a149_0x50a191;let _0xde97a3=await this[_0x4a3e0e(0x11a)][_0x4a3e0e(0x106)][_0x4a3e0e(0xf1)](this[_0x4a3e0e(0xd9)]['branchName'])[_0x4a3e0e(0xe4)](()=>null);!_0xde97a3&&(_0xde97a3=await this[_0x4a3e0e(0x11a)][_0x4a3e0e(0x106)][_0x4a3e0e(0xfc)]({'name':this[_0x4a3e0e(0xd9)][_0x4a3e0e(0xdd)]})),this[_0x4a3e0e(0xfe)]=_0xde97a3;}async[a149_0x50a191(0xe7)](){const _0x1b7b81=a149_0x50a191;return this[_0x1b7b81(0xd9)][_0x1b7b81(0xee)]?this[_0x1b7b81(0x111)][_0x1b7b81(0x102)](this[_0x1b7b81(0xd9)][_0x1b7b81(0xee)]):this[_0x1b7b81(0x111)]['getBranchComponents'](this[_0x1b7b81(0xd9)][_0x1b7b81(0x128)]);}async['getComponents'](){const _0x242fef=a149_0x50a191,_0x344103=await this[_0x242fef(0xe7)](),_0x4c318d=new salesforce_retriever_service_1[(_0x242fef(0x112))](this[_0x242fef(0x110)]),_0x4af743=await _0x4c318d['run'](_0x344103);return _0x4af743;}async[a149_0x50a191(0x11f)](_0x4d4935){const _0x2992c7=a149_0x50a191,_0x37dde4=new commit_components_dto_1[(_0x2992c7(0x100))]();return _0x37dde4['message']='Sync\x20repository',_0x37dde4[_0x2992c7(0xd6)]={'name':constants_1[_0x2992c7(0xe3)],'email':constants_1[_0x2992c7(0xe5)]},_0x37dde4['components']={'writed':await this[_0x2992c7(0x113)]()},_0x37dde4[_0x2992c7(0xf3)]=_0x4d4935,_0x37dde4[_0x2992c7(0xde)]=this['repository'],_0x37dde4[_0x2992c7(0xfe)]=this[_0x2992c7(0xfe)],_0x37dde4['force']=!![],_0x37dde4;}async[a149_0x50a191(0x10e)](){const _0x50afcd=a149_0x50a191,_0x38f0fc=await this[_0x50afcd(0x111)]['getRemoteStateAttachmentId'](this['syncData']),_0x224cf5=await this['salesforceService']['retrieveAttachment'](_0x38f0fc)[_0x50afcd(0x127)](_0x51a4ee=>typeof _0x51a4ee==='string'?JSON[_0x50afcd(0xec)](_0x51a4ee):_0x51a4ee)[_0x50afcd(0xe4)](()=>({}));if(_0x224cf5[this[_0x50afcd(0x11a)][_0x50afcd(0x122)]]){if(_0x224cf5[this[_0x50afcd(0x11a)][_0x50afcd(0x122)]][_0x50afcd(0xd7)]===this[_0x50afcd(0xfe)]['sha'])return!![];}return![];}async[a149_0x50a191(0xeb)](){const _0x383c46=a149_0x50a191,_0x27a087=await this['repository']['branches'][_0x383c46(0xf1)](this[_0x383c46(0xfe)][_0x383c46(0x105)]);await this[_0x383c46(0xf5)](_0x383c46(0xd1));const _0x1830e9={[this[_0x383c46(0x11a)][_0x383c46(0x122)]]:{'lastCommit':_0x27a087[_0x383c46(0x11b)]}};await this['salesforceSync'][_0x383c46(0xff)](this['syncData'],_0x1830e9);}async[a149_0x50a191(0xe1)]({syncRecord:_0x21d473,repository:_0x31e4b2,loggerId:_0x2a3f7a,convertToSFDX:_0x16a819}){const _0x493ae2=a149_0x50a191;this[_0x493ae2(0xd9)]=_0x21d473,this[_0x493ae2(0x11a)]=_0x31e4b2,this[_0x493ae2(0x110)][_0x493ae2(0x119)](_0x2a3f7a),this[_0x493ae2(0x11d)]=this[_0x493ae2(0x110)][_0x493ae2(0x123)]();try{await this[_0x493ae2(0x111)][_0x493ae2(0x116)](this[_0x493ae2(0xd9)],_0x493ae2(0x11e)),await this[_0x493ae2(0xf5)](_0x493ae2(0xe0)),await this[_0x493ae2(0x115)](),await this['createBranchIfNotExists']();const _0x1b08bd=await this[_0x493ae2(0x10e)]();if(_0x1b08bd){await this[_0x493ae2(0x111)][_0x493ae2(0x116)](this['syncData'],'Completed'),await this[_0x493ae2(0xf5)](_0x493ae2(0x109));return;}const _0x3b6732=await this[_0x493ae2(0x11f)](_0x16a819);this[_0x493ae2(0xd2)]['logger']=this['logger'],await this[_0x493ae2(0xd2)][_0x493ae2(0xe1)](_0x3b6732),await this[_0x493ae2(0x111)][_0x493ae2(0x116)](this['syncData'],_0x493ae2(0x117)),await this['updateLastCommit'](),await this['log'](_0x493ae2(0xfa));}catch(_0x5b9f88){throw _0x5b9f88;}finally{await this[_0x493ae2(0x11d)][_0x493ae2(0xdb)]();}}};SyncJob=__decorate([(0x0,typedi_1[a149_0x50a191(0xd4)])({'transient':!![]}),__metadata(a149_0x50a191(0xd8),[git_provider_manager_1[a149_0x50a191(0x10b)],salesforce_sync_service_1[a149_0x50a191(0x10d)],salesforce_service_1[a149_0x50a191(0xf6)],commit_components_job_1['CommitComponentsJob']])],SyncJob),exports[a149_0x50a191(0x125)]=SyncJob;