const a147_0x1297=['branchId','commitJob',']\x20[Repository:\x20','message','DEFAULT_GIT_USER_EMAIL','branches','remoteStateAttachmentId','CommitComponentsJob','gitManager','repositoryName','236442bAeofC','Sync\x20repository','retrieveAttachment','DEFAULT_GIT_USER_NAME',']\x20[Branch:\x20','function','[INFO]\x20Branch\x20synchronized.\x20Skip','getCommitDto','getLogger','setStatus','convertToSFDX','syncData','[INFO]\x20Update\x20remote\x20state.','setLoggerId','../../../constants','createRepositoryIfNotExists','repository','run','send','getOne','toUpperCase','getComponentIds','repo','__esModule','__decorate','791355hBZFDW','10fSyYWc','GitProviderManager','SalesforceService','getRepoService','repositoryId','Service','sha','catch','103468jcpwAd','checkSyncStatus','[SYNC]\x20[','typedi','patchObject','metadata','remoteState','parse','../../salesforce/services/salesforce.service','CommitComponentsDto','1159419FBltMY','79412dIIbNf','length','salesforceService','createBranchIfNotExists','provider','In\x20Progress','lastCommit','flosumSync','getComponentsFromRepository','constructor','defineProperty','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../../salesforce/services/salesforce-sync.service','getOwnPropertyDescriptor','stringify','repoService','SalesforceRetrieverService','branch','log','gitUrl','SalesforceSyncService','name','1119lielnA','components','object','updateLastCommit','135777ceAXIo','SyncJob','logger','[INFO]\x20Sync\x20job\x20done.','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../dto/commit-components.dto','getComponents','4wZyZqs','user','366JPPhPQ','branchName','create','decorate'];function a147_0x12f1(_0x52a726,_0x22a1ea){return a147_0x12f1=function(_0x1f0121,_0x5612a9){_0x1f0121=_0x1f0121-0xde;let _0x5892c1=a147_0x1297[_0x1f0121];return _0x5892c1;},a147_0x12f1(_0x52a726,_0x22a1ea);}const a147_0x1fc34a=a147_0x12f1;(function(_0x457cfb,_0x3e86d9){const _0x3e8e0a=a147_0x12f1;while(!![]){try{const _0x4ef0b9=parseInt(_0x3e8e0a(0x101))+-parseInt(_0x3e8e0a(0x138))*-parseInt(_0x3e8e0a(0x12b))+parseInt(_0x3e8e0a(0x114))+-parseInt(_0x3e8e0a(0x115))*parseInt(_0x3e8e0a(0x136))+parseInt(_0x3e8e0a(0xe8))+parseInt(_0x3e8e0a(0x102))*-parseInt(_0x3e8e0a(0x12f))+-parseInt(_0x3e8e0a(0x10a));if(_0x4ef0b9===_0x3e86d9)break;else _0x457cfb['push'](_0x457cfb['shift']());}catch(_0x232788){_0x457cfb['push'](_0x457cfb['shift']());}}}(a147_0x1297,0xc7adc));const a147_0x5892c1=function(){let _0x2efc08=!![];return function(_0x21b860,_0x47e179){const _0x2a5ee9=_0x2efc08?function(){if(_0x47e179){const _0x3afaa2=_0x47e179['apply'](_0x21b860,arguments);return _0x47e179=null,_0x3afaa2;}}:function(){};return _0x2efc08=![],_0x2a5ee9;};}(),a147_0x5612a9=a147_0x5892c1(this,function(){const _0x37caf3=function(){const _0x2911fc=a147_0x12f1,_0x47551b=_0x37caf3[_0x2911fc(0x11e)](_0x2911fc(0x133))()[_0x2911fc(0x11e)](_0x2911fc(0x120));return!_0x47551b['test'](a147_0x5612a9);};return _0x37caf3();});a147_0x5612a9();'use strict';var __decorate=this&&this[a147_0x1fc34a(0x100)]||function(_0x158f2f,_0x51908c,_0xa5c252,_0x4edf61){const _0x2a9dc9=a147_0x1fc34a;var _0x1fb557=arguments[_0x2a9dc9(0x116)],_0x201ce1=_0x1fb557<0x3?_0x51908c:_0x4edf61===null?_0x4edf61=Object[_0x2a9dc9(0x122)](_0x51908c,_0xa5c252):_0x4edf61,_0xcf35c1;if(typeof Reflect===_0x2a9dc9(0x12d)&&typeof Reflect[_0x2a9dc9(0x13b)]===_0x2a9dc9(0xed))_0x201ce1=Reflect[_0x2a9dc9(0x13b)](_0x158f2f,_0x51908c,_0xa5c252,_0x4edf61);else{for(var _0x5ca7ec=_0x158f2f[_0x2a9dc9(0x116)]-0x1;_0x5ca7ec>=0x0;_0x5ca7ec--)if(_0xcf35c1=_0x158f2f[_0x5ca7ec])_0x201ce1=(_0x1fb557<0x3?_0xcf35c1(_0x201ce1):_0x1fb557>0x3?_0xcf35c1(_0x51908c,_0xa5c252,_0x201ce1):_0xcf35c1(_0x51908c,_0xa5c252))||_0x201ce1;}return _0x1fb557>0x3&&_0x201ce1&&Object[_0x2a9dc9(0x11f)](_0x51908c,_0xa5c252,_0x201ce1),_0x201ce1;},__metadata=this&&this['__metadata']||function(_0x356e5c,_0x27c594){const _0x5f3e37=a147_0x1fc34a;if(typeof Reflect===_0x5f3e37(0x12d)&&typeof Reflect[_0x5f3e37(0x10f)]===_0x5f3e37(0xed))return Reflect[_0x5f3e37(0x10f)](_0x356e5c,_0x27c594);};Object[a147_0x1fc34a(0x11f)](exports,a147_0x1fc34a(0xff),{'value':!![]}),exports[a147_0x1fc34a(0x130)]=void 0x0;const typedi_1=require(a147_0x1fc34a(0x10d)),constants_1=require(a147_0x1fc34a(0xf6)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a147_0x1fc34a(0x121)),salesforce_service_1=require(a147_0x1fc34a(0x112)),git_provider_manager_1=require('../../shared/git-provider.manager'),utils_1=require('../../shared/utils'),commit_components_dto_1=require(a147_0x1fc34a(0x134)),commit_components_job_1=require('./commit-components.job');let SyncJob=class SyncJob{constructor(_0x4c3bd5,_0x588774,_0x503da4,_0x292455){const _0x342e86=a147_0x1fc34a;this[_0x342e86(0xe6)]=_0x4c3bd5,this[_0x342e86(0x11c)]=_0x588774,this[_0x342e86(0x117)]=_0x503da4,this['commitJob']=_0x292455,this['repoService']=this['gitManager'][_0x342e86(0x105)]();}async[a147_0x1fc34a(0x127)](_0x4dcdb7){const _0x87619c=a147_0x1fc34a;return this[_0x87619c(0x131)][_0x87619c(0x127)](_0x87619c(0x10c)+this[_0x87619c(0xe6)][_0x87619c(0x119)][_0x87619c(0xfc)]()+_0x87619c(0xe0)+this[_0x87619c(0xf3)][_0x87619c(0xe7)]+_0x87619c(0xec)+this['syncData'][_0x87619c(0x139)]+']\x20'+_0x4dcdb7);}async[a147_0x1fc34a(0xf7)](){const _0x33f2b7=a147_0x1fc34a;let _0x304fbe=await this[_0x33f2b7(0x124)][_0x33f2b7(0xfb)](this['syncData'][_0x33f2b7(0xe7)])['catch'](()=>null);!_0x304fbe&&(_0x304fbe=await this[_0x33f2b7(0x124)][_0x33f2b7(0x13a)]({'name':this[_0x33f2b7(0xf3)][_0x33f2b7(0xe7)],'autoInit':!![],'defaultBranch':this[_0x33f2b7(0xf3)][_0x33f2b7(0x139)],'private':!![]})),this['repository']=_0x304fbe;}async[a147_0x1fc34a(0x118)](){const _0x3cb1ea=a147_0x1fc34a;let _0x43b9d2=await this[_0x3cb1ea(0xf8)]['branches'][_0x3cb1ea(0xfb)](this[_0x3cb1ea(0xf3)][_0x3cb1ea(0x139)])[_0x3cb1ea(0x109)](()=>null);!_0x43b9d2&&(_0x43b9d2=await this[_0x3cb1ea(0xf8)][_0x3cb1ea(0xe3)][_0x3cb1ea(0x13a)]({'name':this[_0x3cb1ea(0xf3)]['branchName']})),this['branch']=_0x43b9d2;}async[a147_0x1fc34a(0xfd)](){const _0x176190=a147_0x1fc34a;return this[_0x176190(0xf3)][_0x176190(0x106)]?this[_0x176190(0x11c)][_0x176190(0x11d)](this[_0x176190(0xf3)][_0x176190(0x106)]):this['flosumSync']['getBranchComponents'](this[_0x176190(0xf3)][_0x176190(0xde)]);}async[a147_0x1fc34a(0x135)](){const _0x22fad9=a147_0x1fc34a,_0x166f75=await this[_0x22fad9(0xfd)](),_0x397ab6=new salesforce_retriever_service_1[(_0x22fad9(0x125))](this['salesforceService']),_0x177953=await _0x397ab6['run'](_0x166f75);return _0x177953;}async[a147_0x1fc34a(0xef)](_0x1eafdd){const _0x51b70b=a147_0x1fc34a,_0x51b8da=new commit_components_dto_1[(_0x51b70b(0x113))]();return _0x51b8da[_0x51b70b(0xe1)]=_0x51b70b(0xe9),_0x51b8da[_0x51b70b(0x137)]={'name':constants_1[_0x51b70b(0xeb)],'email':constants_1[_0x51b70b(0xe2)]},_0x51b8da[_0x51b70b(0x12c)]={'writed':await this[_0x51b70b(0x135)]()},_0x51b8da[_0x51b70b(0xf2)]=_0x1eafdd,_0x51b8da[_0x51b70b(0xfe)]=this[_0x51b70b(0xf8)],_0x51b8da[_0x51b70b(0x126)]=this[_0x51b70b(0x126)],_0x51b8da['force']=!![],_0x51b8da;}async[a147_0x1fc34a(0x10b)](){const _0x2564df=a147_0x1fc34a;this[_0x2564df(0xe4)]=await this['flosumSync']['getAttachmentId'](this['syncData']),this[_0x2564df(0x110)]=await this['salesforceService'][_0x2564df(0xea)](this['remoteStateAttachmentId'])['then'](_0xc527be=>typeof _0xc527be==='object'?_0xc527be:JSON[_0x2564df(0x111)](_0xc527be||'{}'))['catch'](()=>({}));if(this[_0x2564df(0x110)][this[_0x2564df(0xf8)]['gitUrl']]){if(this[_0x2564df(0x110)][this[_0x2564df(0xf8)][_0x2564df(0x128)]][_0x2564df(0x11b)]===this[_0x2564df(0x126)]['sha'])return!![];}return![];}async[a147_0x1fc34a(0x12e)](){const _0xb18b30=a147_0x1fc34a,_0x37b6d5=await this['repository']['branches'][_0xb18b30(0xfb)](this[_0xb18b30(0x126)][_0xb18b30(0x12a)]);await this[_0xb18b30(0x127)](_0xb18b30(0xf4)),this[_0xb18b30(0x110)]={[this[_0xb18b30(0xf8)][_0xb18b30(0x128)]]:{'lastCommit':_0x37b6d5[_0xb18b30(0x108)]}},await this[_0xb18b30(0x117)][_0xb18b30(0x10e)]('Attachment',this[_0xb18b30(0xe4)],{'Body':utils_1['encodeBase64'](JSON[_0xb18b30(0x123)](this[_0xb18b30(0x110)]))});}async[a147_0x1fc34a(0xf9)](_0x39e253,_0x3c4ab8,_0x398644){const _0x5c6820=a147_0x1fc34a;this['syncData']=_0x39e253,this['salesforceService'][_0x5c6820(0xf5)](_0x3c4ab8),this['logger']=this[_0x5c6820(0x117)][_0x5c6820(0xf0)]();try{await this[_0x5c6820(0x11c)][_0x5c6820(0xf1)](this[_0x5c6820(0xf3)],_0x5c6820(0x11a)),await this['log']('[INFO]\x20Start\x20sync\x20job'),await this[_0x5c6820(0xf7)](),await this[_0x5c6820(0x118)]();const _0x3b4ef2=await this['checkSyncStatus']();if(_0x3b4ef2){await this['flosumSync'][_0x5c6820(0xf1)](this[_0x5c6820(0xf3)],'Completed'),await this[_0x5c6820(0x127)](_0x5c6820(0xee));return;}const _0x49595d=await this[_0x5c6820(0xef)](_0x398644);this[_0x5c6820(0xdf)][_0x5c6820(0x131)]=this[_0x5c6820(0x131)],await this[_0x5c6820(0xdf)][_0x5c6820(0xf9)](_0x49595d),await this[_0x5c6820(0x11c)][_0x5c6820(0xf1)](this[_0x5c6820(0xf3)],'Completed'),await this['updateLastCommit'](),await this['log'](_0x5c6820(0x132));}catch(_0x45a581){throw _0x45a581;}finally{await this[_0x5c6820(0x131)][_0x5c6820(0xfa)]();}}};SyncJob=__decorate([typedi_1[a147_0x1fc34a(0x107)]({'transient':!![]}),__metadata('design:paramtypes',[git_provider_manager_1[a147_0x1fc34a(0x103)],salesforce_sync_service_1[a147_0x1fc34a(0x129)],salesforce_service_1[a147_0x1fc34a(0x104)],commit_components_job_1[a147_0x1fc34a(0xe5)]])],SyncJob),exports['SyncJob']=SyncJob;