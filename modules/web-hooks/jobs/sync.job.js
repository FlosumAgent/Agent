const a147_0x3540=['remoteState','__decorate','patchObject','SalesforceSyncService','stringify','design:paramtypes','branchName','gitUrl','16413VRIMOQ','getBranchComponents','createBranchIfNotExists','Attachment','../../salesforce/services/salesforce-sync.service','object','getCommitDto','defineProperty','getComponentsFromRepository','createRepositoryIfNotExists','updateLastCommit','logger','length','[SYNC]\x20[','getLogger','getComponentIds','then','[INFO]\x20Branch\x20synchronized.\x20Skip','In\x20Progress','provider','repository','getAttachmentId','GitProviderManager','9606jhgFZf','commitJob','convertToSFDX','function','remoteStateAttachmentId','repositoryId','encodeBase64','../../../constants','user','constructor','../../salesforce/services/salesforce-retriever.service','../../salesforce/services/salesforce.service','branch','102099phLsdG','Completed','CommitComponentsJob','setLoggerId','373834zPKDUL','setStatus','300714wyjJpU','salesforceService','syncData','branches','log','lastCommit','27ECCpkh','catch','208493OyGpfw','repo','getOwnPropertyDescriptor','repositoryName','apply','toUpperCase','typedi','send','sha','components','metadata','[INFO]\x20Start\x20sync\x20job','DEFAULT_GIT_USER_EMAIL','repoService',']\x20[Branch:\x20','checkSyncStatus','SalesforceRetrieverService','Service','[INFO]\x20Update\x20remote\x20state.','243808pNMRfn','CommitComponentsDto','flosumSync','getRepoService','1OOHBuy','27eWuYoV','../../shared/git-provider.manager','./commit-components.job','__esModule','getOne','create','message','run','decorate','gitManager','return\x20/\x22\x20+\x20this\x20+\x20\x22/'];const a147_0x24b989=a147_0x24d4;(function(_0x58a4c0,_0x14092e){const _0x5742b3=a147_0x24d4;while(!![]){try{const _0x431937=parseInt(_0x5742b3(0x116))+parseInt(_0x5742b3(0xf5))+parseInt(_0x5742b3(0x11a))*-parseInt(_0x5742b3(0xf9))+-parseInt(_0x5742b3(0x103))+parseInt(_0x5742b3(0xfb))+parseInt(_0x5742b3(0x101))*parseInt(_0x5742b3(0x12e))+parseInt(_0x5742b3(0x11b))*-parseInt(_0x5742b3(0xe8));if(_0x431937===_0x14092e)break;else _0x58a4c0['push'](_0x58a4c0['shift']());}catch(_0x3f3e9c){_0x58a4c0['push'](_0x58a4c0['shift']());}}}(a147_0x3540,0x3c913));const a147_0x297247=function(){let _0x38b9e0=!![];return function(_0x23bb54,_0x24e683){const _0x2cfbfc=_0x38b9e0?function(){const _0xf85bb7=a147_0x24d4;if(_0x24e683){const _0x31b15c=_0x24e683[_0xf85bb7(0x107)](_0x23bb54,arguments);return _0x24e683=null,_0x31b15c;}}:function(){};return _0x38b9e0=![],_0x2cfbfc;};}(),a147_0x4bf211=a147_0x297247(this,function(){const _0x1514b0=function(){const _0x13b0b2=a147_0x24d4,_0x15e653=_0x1514b0[_0x13b0b2(0xf1)](_0x13b0b2(0x125))()[_0x13b0b2(0xf1)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x15e653['test'](a147_0x4bf211);};return _0x1514b0();});a147_0x4bf211();'use strict';var __decorate=this&&this[a147_0x24b989(0x127)]||function(_0x4604ac,_0x14458f,_0x414e68,_0x2fce25){const _0x1925d9=a147_0x24b989;var _0x2159e5=arguments['length'],_0x55ece5=_0x2159e5<0x3?_0x14458f:_0x2fce25===null?_0x2fce25=Object[_0x1925d9(0x105)](_0x14458f,_0x414e68):_0x2fce25,_0x248e9a;if(typeof Reflect===_0x1925d9(0x133)&&typeof Reflect[_0x1925d9(0x123)]===_0x1925d9(0xeb))_0x55ece5=Reflect[_0x1925d9(0x123)](_0x4604ac,_0x14458f,_0x414e68,_0x2fce25);else{for(var _0x170afb=_0x4604ac[_0x1925d9(0x13a)]-0x1;_0x170afb>=0x0;_0x170afb--)if(_0x248e9a=_0x4604ac[_0x170afb])_0x55ece5=(_0x2159e5<0x3?_0x248e9a(_0x55ece5):_0x2159e5>0x3?_0x248e9a(_0x14458f,_0x414e68,_0x55ece5):_0x248e9a(_0x14458f,_0x414e68))||_0x55ece5;}return _0x2159e5>0x3&&_0x55ece5&&Object[_0x1925d9(0x135)](_0x14458f,_0x414e68,_0x55ece5),_0x55ece5;},__metadata=this&&this['__metadata']||function(_0x5320d8,_0x45b762){const _0x20becf=a147_0x24b989;if(typeof Reflect===_0x20becf(0x133)&&typeof Reflect[_0x20becf(0x10d)]==='function')return Reflect[_0x20becf(0x10d)](_0x5320d8,_0x45b762);};function a147_0x24d4(_0x533cde,_0x225486){return a147_0x24d4=function(_0x53b69c,_0x4bf211){_0x53b69c=_0x53b69c-0xe2;let _0x297247=a147_0x3540[_0x53b69c];return _0x297247;},a147_0x24d4(_0x533cde,_0x225486);}Object[a147_0x24b989(0x135)](exports,a147_0x24b989(0x11e),{'value':!![]}),exports['SyncJob']=void 0x0;const typedi_1=require(a147_0x24b989(0x109)),constants_1=require(a147_0x24b989(0xef)),salesforce_retriever_service_1=require(a147_0x24b989(0xf2)),salesforce_sync_service_1=require(a147_0x24b989(0x132)),salesforce_service_1=require(a147_0x24b989(0xf3)),git_provider_manager_1=require(a147_0x24b989(0x11c)),utils_1=require('../../shared/utils'),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a147_0x24b989(0x11d));let SyncJob=class SyncJob{constructor(_0x24b83f,_0x56962d,_0x2ae0d7,_0x4440ef){const _0x5176c5=a147_0x24b989;this[_0x5176c5(0x124)]=_0x24b83f,this[_0x5176c5(0x118)]=_0x56962d,this[_0x5176c5(0xfc)]=_0x2ae0d7,this[_0x5176c5(0xe9)]=_0x4440ef,this[_0x5176c5(0x110)]=this['gitManager'][_0x5176c5(0x119)]();}async[a147_0x24b989(0xff)](_0x460d27){const _0x5df03f=a147_0x24b989;return this[_0x5df03f(0x139)]['log'](_0x5df03f(0x13b)+this['gitManager'][_0x5df03f(0xe4)][_0x5df03f(0x108)]()+']\x20[Repository:\x20'+this[_0x5df03f(0xfd)]['repositoryName']+_0x5df03f(0x111)+this[_0x5df03f(0xfd)]['branchName']+']\x20'+_0x460d27);}async['createRepositoryIfNotExists'](){const _0x259520=a147_0x24b989;let _0x41c525=await this[_0x259520(0x110)][_0x259520(0x11f)](this[_0x259520(0xfd)][_0x259520(0x106)])['catch'](()=>null);!_0x41c525&&(_0x41c525=await this['repoService'][_0x259520(0x120)]({'name':this[_0x259520(0xfd)][_0x259520(0x106)],'autoInit':!![],'defaultBranch':this[_0x259520(0xfd)]['branchName'],'private':!![]})),this[_0x259520(0xe5)]=_0x41c525;}async[a147_0x24b989(0x130)](){const _0x418c48=a147_0x24b989;let _0x180c15=await this[_0x418c48(0xe5)][_0x418c48(0xfe)][_0x418c48(0x11f)](this[_0x418c48(0xfd)][_0x418c48(0x12c)])['catch'](()=>null);!_0x180c15&&(_0x180c15=await this[_0x418c48(0xe5)][_0x418c48(0xfe)][_0x418c48(0x120)]({'name':this['syncData']['branchName']})),this['branch']=_0x180c15;}async[a147_0x24b989(0x13d)](){const _0x54e8a0=a147_0x24b989;return this['syncData'][_0x54e8a0(0xed)]?this[_0x54e8a0(0x118)][_0x54e8a0(0x136)](this[_0x54e8a0(0xfd)][_0x54e8a0(0xed)]):this[_0x54e8a0(0x118)][_0x54e8a0(0x12f)](this[_0x54e8a0(0xfd)]['branchId']);}async['getComponents'](){const _0x16ea02=a147_0x24b989,_0xf0f8a5=await this[_0x16ea02(0x13d)](),_0xd500f7=new salesforce_retriever_service_1[(_0x16ea02(0x113))](this[_0x16ea02(0xfc)]),_0x114891=await _0xd500f7[_0x16ea02(0x122)](_0xf0f8a5);return _0x114891;}async[a147_0x24b989(0x134)](_0x596d05){const _0x85189f=a147_0x24b989,_0x5890eb=new commit_components_dto_1[(_0x85189f(0x117))]();return _0x5890eb[_0x85189f(0x121)]='Sync\x20repository',_0x5890eb[_0x85189f(0xf0)]={'name':constants_1['DEFAULT_GIT_USER_NAME'],'email':constants_1[_0x85189f(0x10f)]},_0x5890eb[_0x85189f(0x10c)]={'writed':await this['getComponents']()},_0x5890eb[_0x85189f(0xea)]=_0x596d05,_0x5890eb[_0x85189f(0x104)]=this[_0x85189f(0xe5)],_0x5890eb[_0x85189f(0xf4)]=this[_0x85189f(0xf4)],_0x5890eb['force']=!![],_0x5890eb;}async[a147_0x24b989(0x112)](){const _0x477ecf=a147_0x24b989;this[_0x477ecf(0xec)]=await this['flosumSync'][_0x477ecf(0xe6)](this[_0x477ecf(0xfd)]),this['remoteState']=await this[_0x477ecf(0xfc)]['retrieveAttachment'](this[_0x477ecf(0xec)])[_0x477ecf(0x13e)](_0x5723b7=>typeof _0x5723b7===_0x477ecf(0x133)?_0x5723b7:JSON['parse'](_0x5723b7||'{}'))[_0x477ecf(0x102)](()=>({}));if(this[_0x477ecf(0x126)][this['repository'][_0x477ecf(0x12d)]]){if(this[_0x477ecf(0x126)][this[_0x477ecf(0xe5)][_0x477ecf(0x12d)]][_0x477ecf(0x100)]===this[_0x477ecf(0xf4)]['sha'])return!![];}return![];}async[a147_0x24b989(0x138)](){const _0x523bb4=a147_0x24b989,_0x543684=await this['repository'][_0x523bb4(0xfe)][_0x523bb4(0x11f)](this[_0x523bb4(0xf4)]['name']);await this['log'](_0x523bb4(0x115)),this[_0x523bb4(0x126)]={[this[_0x523bb4(0xe5)][_0x523bb4(0x12d)]]:{'lastCommit':_0x543684[_0x523bb4(0x10b)]}},await this[_0x523bb4(0xfc)][_0x523bb4(0x128)](_0x523bb4(0x131),this[_0x523bb4(0xec)],{'Body':utils_1[_0x523bb4(0xee)](JSON[_0x523bb4(0x12a)](this[_0x523bb4(0x126)]))});}async[a147_0x24b989(0x122)](_0x3eb6f0,_0x14253c,_0x2b04fc){const _0x105158=a147_0x24b989;this['syncData']=_0x3eb6f0,this[_0x105158(0xfc)][_0x105158(0xf8)](_0x14253c),this[_0x105158(0x139)]=this[_0x105158(0xfc)][_0x105158(0x13c)]();try{await this[_0x105158(0x118)][_0x105158(0xfa)](this['syncData'],_0x105158(0xe3)),await this[_0x105158(0xff)](_0x105158(0x10e)),await this[_0x105158(0x137)](),await this[_0x105158(0x130)]();const _0x1a1b35=await this[_0x105158(0x112)]();if(_0x1a1b35){await this['flosumSync'][_0x105158(0xfa)](this[_0x105158(0xfd)],_0x105158(0xf6)),await this[_0x105158(0xff)](_0x105158(0xe2));return;}const _0x2a9e2b=await this['getCommitDto'](_0x2b04fc);this[_0x105158(0xe9)][_0x105158(0x139)]=this[_0x105158(0x139)],await this[_0x105158(0xe9)][_0x105158(0x122)](_0x2a9e2b),await this['flosumSync'][_0x105158(0xfa)](this[_0x105158(0xfd)],_0x105158(0xf6)),await this[_0x105158(0x138)](),await this[_0x105158(0xff)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x549606){throw _0x549606;}finally{await this[_0x105158(0x139)][_0x105158(0x10a)]();}}};SyncJob=__decorate([typedi_1[a147_0x24b989(0x114)]({'transient':!![]}),__metadata(a147_0x24b989(0x12b),[git_provider_manager_1[a147_0x24b989(0xe7)],salesforce_sync_service_1[a147_0x24b989(0x129)],salesforce_service_1['SalesforceService'],commit_components_job_1[a147_0x24b989(0xf7)]])],SyncJob),exports['SyncJob']=SyncJob;