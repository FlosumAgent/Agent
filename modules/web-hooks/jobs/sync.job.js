const a148_0xa0c060=a148_0x4f77;function a148_0x547b(){const _0x2e4bc2=['design:paramtypes','[INFO]\x20Branch\x20synchronized.\x20Skip','toUpperCase','typedi','[INFO]\x20Update\x20remote\x20state.',']\x20[Branch:\x20','sha','salesforceSync','gitManager','(((.+)+)+)+$','4544232zrlrqh','repositoryName','defineProperty','catch','salesforceService','In\x20Progress','SyncJob','run','SalesforceService','Service','constructor','../../salesforce/services/salesforce.service','6BSDMHg','getComponents','1015WbOHXF','commitJob','search','SalesforceRetrieverService','getOne','GitProviderManager','CommitComponentsDto','getRemoteStateAttachmentId','getCommitDto','SalesforceSyncService','createBranchIfNotExists','../../salesforce/services/salesforce-sync.service','CommitComponentsJob','function','11136DeUore','1621905WLsVhq','branches','name','updateLastCommit','setStatus','object','createRepositoryIfNotExists','DEFAULT_GIT_USER_NAME','retrieveAttachment','setLoggerId','user','repo','repositoryId','Completed','send','getOwnPropertyDescriptor','string','821589xqdCXY','then','15890319NRLyYU','57016HLewzn','metadata','length','branch','[SYNC]\x20[','logger','../../salesforce/services/salesforce-retriever.service','repository','getComponentIds','force','updateRemoteState','2231776GeDFGi','create','Sync\x20repository','decorate','log','getLogger','branchId','getRepoService','components','branchName','convertToSFDX','repoService','[INFO]\x20Sync\x20job\x20done.','toString','gitUrl','checkSyncStatus','syncData',']\x20[Repository:\x20'];a148_0x547b=function(){return _0x2e4bc2;};return a148_0x547b();}(function(_0x4dbbc9,_0x5f1151){const _0x5c5635=a148_0x4f77,_0x1adf3c=_0x4dbbc9();while(!![]){try{const _0x20ca44=parseInt(_0x5c5635(0x179))/0x1+-parseInt(_0x5c5635(0x157))/0x2*(parseInt(_0x5c5635(0x167))/0x3)+-parseInt(_0x5c5635(0x187))/0x4+parseInt(_0x5c5635(0x168))/0x5+-parseInt(_0x5c5635(0x14b))/0x6+-parseInt(_0x5c5635(0x159))/0x7*(parseInt(_0x5c5635(0x17c))/0x8)+parseInt(_0x5c5635(0x17b))/0x9;if(_0x20ca44===_0x5f1151)break;else _0x1adf3c['push'](_0x1adf3c['shift']());}catch(_0x3cb412){_0x1adf3c['push'](_0x1adf3c['shift']());}}}(a148_0x547b,0x86b0e));const a148_0x41c767=function(){let _0x219b50=!![];return function(_0x3b3e78,_0x1b3325){const _0x4884d2=_0x219b50?function(){if(_0x1b3325){const _0xde10d6=_0x1b3325['apply'](_0x3b3e78,arguments);return _0x1b3325=null,_0xde10d6;}}:function(){};return _0x219b50=![],_0x4884d2;};}(),a148_0x35a873=a148_0x41c767(this,function(){const _0x43edf0=a148_0x4f77;return a148_0x35a873[_0x43edf0(0x194)]()[_0x43edf0(0x15b)](_0x43edf0(0x14a))[_0x43edf0(0x194)]()[_0x43edf0(0x155)](a148_0x35a873)[_0x43edf0(0x15b)](_0x43edf0(0x14a));});a148_0x35a873();'use strict';var __decorate=this&&this['__decorate']||function(_0x309d13,_0x3ce94b,_0x2cb589,_0x33b16e){const _0x108320=a148_0x4f77;var _0x5496f7=arguments[_0x108320(0x17e)],_0x16639e=_0x5496f7<0x3?_0x3ce94b:_0x33b16e===null?_0x33b16e=Object[_0x108320(0x177)](_0x3ce94b,_0x2cb589):_0x33b16e,_0x1162a5;if(typeof Reflect===_0x108320(0x16d)&&typeof Reflect[_0x108320(0x18a)]===_0x108320(0x166))_0x16639e=Reflect[_0x108320(0x18a)](_0x309d13,_0x3ce94b,_0x2cb589,_0x33b16e);else{for(var _0x480497=_0x309d13['length']-0x1;_0x480497>=0x0;_0x480497--)if(_0x1162a5=_0x309d13[_0x480497])_0x16639e=(_0x5496f7<0x3?_0x1162a5(_0x16639e):_0x5496f7>0x3?_0x1162a5(_0x3ce94b,_0x2cb589,_0x16639e):_0x1162a5(_0x3ce94b,_0x2cb589))||_0x16639e;}return _0x5496f7>0x3&&_0x16639e&&Object[_0x108320(0x14d)](_0x3ce94b,_0x2cb589,_0x16639e),_0x16639e;},__metadata=this&&this['__metadata']||function(_0x49a5e8,_0x47caa5){const _0x5d565c=a148_0x4f77;if(typeof Reflect==='object'&&typeof Reflect[_0x5d565c(0x17d)]===_0x5d565c(0x166))return Reflect[_0x5d565c(0x17d)](_0x49a5e8,_0x47caa5);};function a148_0x4f77(_0x421ec4,_0x1d9d04){const _0xb70623=a148_0x547b();return a148_0x4f77=function(_0x35a873,_0x41c767){_0x35a873=_0x35a873-0x144;let _0x547b3e=_0xb70623[_0x35a873];return _0x547b3e;},a148_0x4f77(_0x421ec4,_0x1d9d04);}Object[a148_0xa0c060(0x14d)](exports,'__esModule',{'value':!![]}),exports[a148_0xa0c060(0x151)]=void 0x0;const typedi_1=require(a148_0xa0c060(0x144)),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a148_0xa0c060(0x182)),salesforce_sync_service_1=require(a148_0xa0c060(0x164)),salesforce_service_1=require(a148_0xa0c060(0x156)),git_provider_manager_1=require('../../shared/git-provider.manager'),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require('./commit-components.job');let SyncJob=class SyncJob{constructor(_0x418d5f,_0x49ec0d,_0x17feaf,_0x5ca452){const _0x8dab79=a148_0xa0c060;this[_0x8dab79(0x149)]=_0x418d5f,this[_0x8dab79(0x148)]=_0x49ec0d,this[_0x8dab79(0x14f)]=_0x17feaf,this[_0x8dab79(0x15a)]=_0x5ca452,this[_0x8dab79(0x192)]=this[_0x8dab79(0x149)][_0x8dab79(0x18e)]();}async[a148_0xa0c060(0x18b)](_0x426e6b){const _0x5efefd=a148_0xa0c060;return this[_0x5efefd(0x181)]['log'](_0x5efefd(0x180)+this[_0x5efefd(0x149)]['provider'][_0x5efefd(0x19b)]()+_0x5efefd(0x198)+this[_0x5efefd(0x197)][_0x5efefd(0x14c)]+_0x5efefd(0x146)+this[_0x5efefd(0x197)]['branchName']+']\x20'+_0x426e6b);}async['createRepositoryIfNotExists'](){const _0xb9408a=a148_0xa0c060;!this[_0xb9408a(0x183)]&&(this[_0xb9408a(0x183)]=await this[_0xb9408a(0x192)][_0xb9408a(0x188)]({'name':this[_0xb9408a(0x197)][_0xb9408a(0x14c)],'autoInit':!![],'defaultBranch':this[_0xb9408a(0x197)][_0xb9408a(0x190)],'private':!![]}));}async[a148_0xa0c060(0x163)](){const _0x437069=a148_0xa0c060;let _0x91b16=await this[_0x437069(0x183)][_0x437069(0x169)][_0x437069(0x15d)](this[_0x437069(0x197)][_0x437069(0x190)])[_0x437069(0x14e)](()=>null);!_0x91b16&&(_0x91b16=await this[_0x437069(0x183)][_0x437069(0x169)]['create']({'name':this[_0x437069(0x197)][_0x437069(0x190)]})),this['branch']=_0x91b16;}async[a148_0xa0c060(0x184)](){const _0x24b597=a148_0xa0c060;return this[_0x24b597(0x197)][_0x24b597(0x174)]?this[_0x24b597(0x148)]['getComponentsFromRepository'](this['syncData'][_0x24b597(0x174)]):this['salesforceSync']['getBranchComponents'](this[_0x24b597(0x197)][_0x24b597(0x18d)]);}async['getComponents'](){const _0x49ef52=a148_0xa0c060,_0x7bdc07=await this[_0x49ef52(0x184)](),_0x33af2b=new salesforce_retriever_service_1[(_0x49ef52(0x15c))](this[_0x49ef52(0x14f)]),_0x4adaaf=await _0x33af2b[_0x49ef52(0x152)](_0x7bdc07);return _0x4adaaf;}async['getCommitDto'](_0x185956){const _0x30692b=a148_0xa0c060,_0x1661a8=new commit_components_dto_1[(_0x30692b(0x15f))]();return _0x1661a8['message']=_0x30692b(0x189),_0x1661a8[_0x30692b(0x172)]={'name':constants_1[_0x30692b(0x16f)],'email':constants_1['DEFAULT_GIT_USER_EMAIL']},_0x1661a8[_0x30692b(0x18f)]={'writed':await this[_0x30692b(0x158)]()},_0x1661a8[_0x30692b(0x191)]=_0x185956,_0x1661a8[_0x30692b(0x173)]=this[_0x30692b(0x183)],_0x1661a8[_0x30692b(0x17f)]=this[_0x30692b(0x17f)],_0x1661a8[_0x30692b(0x185)]=!![],_0x1661a8;}async[a148_0xa0c060(0x196)](){const _0x313746=a148_0xa0c060,_0x3274a1=await this['salesforceSync'][_0x313746(0x160)](this['syncData']),_0x37a79b=await this[_0x313746(0x14f)][_0x313746(0x170)](_0x3274a1)[_0x313746(0x17a)](_0x3385ef=>typeof _0x3385ef===_0x313746(0x178)?JSON['parse'](_0x3385ef):_0x3385ef)[_0x313746(0x14e)](()=>({}));if(_0x37a79b[this['repository'][_0x313746(0x195)]]){if(_0x37a79b[this[_0x313746(0x183)][_0x313746(0x195)]]['lastCommit']===this['branch']['sha'])return!![];}return![];}async['updateLastCommit'](){const _0x5e6c1e=a148_0xa0c060,_0x21e742=await this['repository'][_0x5e6c1e(0x169)]['getOne'](this[_0x5e6c1e(0x17f)][_0x5e6c1e(0x16a)]);await this[_0x5e6c1e(0x18b)](_0x5e6c1e(0x145));const _0xcf38a4={[this[_0x5e6c1e(0x183)][_0x5e6c1e(0x195)]]:{'lastCommit':_0x21e742[_0x5e6c1e(0x147)]}};await this[_0x5e6c1e(0x148)][_0x5e6c1e(0x186)](this[_0x5e6c1e(0x197)],_0xcf38a4);}async[a148_0xa0c060(0x152)]({syncRecord:_0x852ee6,repository:_0x330e94,loggerId:_0x2930e3,convertToSFDX:_0x20421a}){const _0x28f729=a148_0xa0c060;this[_0x28f729(0x197)]=_0x852ee6,this['repository']=_0x330e94,this[_0x28f729(0x14f)][_0x28f729(0x171)](_0x2930e3),this[_0x28f729(0x181)]=this[_0x28f729(0x14f)][_0x28f729(0x18c)]();try{await this['salesforceSync']['setStatus'](this['syncData'],_0x28f729(0x150)),await this[_0x28f729(0x18b)]('[INFO]\x20Start\x20sync\x20job'),await this[_0x28f729(0x16e)](),await this[_0x28f729(0x163)]();const _0x381f5a=await this[_0x28f729(0x196)]();if(_0x381f5a){await this[_0x28f729(0x148)][_0x28f729(0x16c)](this[_0x28f729(0x197)],_0x28f729(0x175)),await this[_0x28f729(0x18b)](_0x28f729(0x19a));return;}const _0x1c678f=await this[_0x28f729(0x161)](_0x20421a);this[_0x28f729(0x15a)]['logger']=this['logger'],await this[_0x28f729(0x15a)][_0x28f729(0x152)](_0x1c678f),await this[_0x28f729(0x148)][_0x28f729(0x16c)](this[_0x28f729(0x197)],_0x28f729(0x175)),await this[_0x28f729(0x16b)](),await this[_0x28f729(0x18b)](_0x28f729(0x193));}catch(_0x568cde){throw _0x568cde;}finally{await this['logger'][_0x28f729(0x176)]();}}};SyncJob=__decorate([(0x0,typedi_1[a148_0xa0c060(0x154)])({'transient':!![]}),__metadata(a148_0xa0c060(0x199),[git_provider_manager_1[a148_0xa0c060(0x15e)],salesforce_sync_service_1[a148_0xa0c060(0x162)],salesforce_service_1[a148_0xa0c060(0x153)],commit_components_job_1[a148_0xa0c060(0x165)]])],SyncJob),exports[a148_0xa0c060(0x151)]=SyncJob;