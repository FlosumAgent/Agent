const a148_0x300681=a148_0x50b2;(function(_0x477d62,_0x1fb351){const _0x4d98d5=a148_0x50b2,_0x111a48=_0x477d62();while(!![]){try{const _0x50b529=-parseInt(_0x4d98d5(0x1cf))/0x1+-parseInt(_0x4d98d5(0x1a8))/0x2*(parseInt(_0x4d98d5(0x1ca))/0x3)+parseInt(_0x4d98d5(0x1a6))/0x4*(parseInt(_0x4d98d5(0x1e6))/0x5)+-parseInt(_0x4d98d5(0x1c4))/0x6*(parseInt(_0x4d98d5(0x1e5))/0x7)+parseInt(_0x4d98d5(0x1ef))/0x8+parseInt(_0x4d98d5(0x1eb))/0x9+parseInt(_0x4d98d5(0x1bc))/0xa;if(_0x50b529===_0x1fb351)break;else _0x111a48['push'](_0x111a48['shift']());}catch(_0x531a5b){_0x111a48['push'](_0x111a48['shift']());}}}(a148_0x48b5,0xa19bd));function a148_0x48b5(){const _0x216007=['[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','20ObClkj','getRepoService','1048010brrkjd','setStatus','logger','../../shared/utils','send','[ERROR]\x20Stop\x20sync\x20job\x20for\x20\x27','../../salesforce/errors/salesforce.error','../../salesforce/services/salesforce-sync.service','../../shared/git-provider.manager','hasOwnProperty','SalesforceService','\x27\x20[','Logger','run','FlosumSyncJob','setLoggerId','find','../../salesforce/services/salesforce.service','REPOSITORY_NAME_REGEXP','design:paramtypes','14234140kVPzqQ','repoList','\x27\x20-\x20\x27','apply','create','length','SalesforceSyncService','getLogger','912MdvnIP','updateRemoteState','gitManager','handleRecordSyncError','constructor','default','3hCGbzG','BRANCH_NAME_REGEXP','../../../core','sleep','getAll','1249425DGmzkX','Unable\x20to\x20synchronize\x20branch\x20\x27','decorate','[INFO]\x20Start\x20sync\x20job','convertToSFDX','error','function','Waiting','GitProviderManager','repositoryId','catch','salesforceSync','branchName','repositoriesIntersections','disableSync','toLowerCase','(((.+)+)+)+$','branchId','search','TooManyRequests','get','metadata','55573YLIMgk','810615INpmCK','getOrCreateRepo','[INFO]\x20Sync\x20job\x20done.','__setModuleDefault','flosum-sync-job','1194669wWxhvb','salesforceService','__metadata','syncing\x20%s[%s]\x20repository\x20%s[%s]\x20branch','10202696TZPROW','checkValidNaming','__createBinding','isIntersects','getRepositoryRecords','Service','push','Unable\x20to\x20synchronize\x20repository\x20\x27','call','../../../constants','Error','getOwnPropertyDescriptor','../../../core/errors/too-many-requests.error','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','__esModule','log','./sync.job','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','toString','object','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','__decorate','SalesforceError','defineProperty','repositoryName','repoService','test'];a148_0x48b5=function(){return _0x216007;};return a148_0x48b5();}const a148_0x12c4bd=function(){let _0x27f9ca=!![];return function(_0x3c29b3,_0x1d5e92){const _0x2ed94c=_0x27f9ca?function(){const _0x33d7c3=a148_0x50b2;if(_0x1d5e92){const _0x1fa1c1=_0x1d5e92[_0x33d7c3(0x1bf)](_0x3c29b3,arguments);return _0x1d5e92=null,_0x1fa1c1;}}:function(){};return _0x27f9ca=![],_0x2ed94c;};}(),a148_0xca6a5d=a148_0x12c4bd(this,function(){const _0x51d11f=a148_0x50b2;return a148_0xca6a5d[_0x51d11f(0x19c)]()[_0x51d11f(0x1e1)](_0x51d11f(0x1df))[_0x51d11f(0x19c)]()[_0x51d11f(0x1c8)](a148_0xca6a5d)[_0x51d11f(0x1e1)](_0x51d11f(0x1df));});a148_0xca6a5d();'use strict';var __createBinding=this&&this[a148_0x300681(0x1f1)]||(Object[a148_0x300681(0x1c0)]?function(_0x470c77,_0x20fa33,_0x30d327,_0x3cca7b){const _0x2d512d=a148_0x300681;if(_0x3cca7b===undefined)_0x3cca7b=_0x30d327;Object[_0x2d512d(0x1a1)](_0x470c77,_0x3cca7b,{'enumerable':!![],'get':function(){return _0x20fa33[_0x30d327];}});}:function(_0xb8a0c7,_0x859d35,_0x593f13,_0x2ae6e8){if(_0x2ae6e8===undefined)_0x2ae6e8=_0x593f13;_0xb8a0c7[_0x2ae6e8]=_0x859d35[_0x593f13];}),__setModuleDefault=this&&this[a148_0x300681(0x1e9)]||(Object[a148_0x300681(0x1c0)]?function(_0xd5010c,_0x468cf2){const _0x3bd1c8=a148_0x300681;Object['defineProperty'](_0xd5010c,_0x3bd1c8(0x1c9),{'enumerable':!![],'value':_0x468cf2});}:function(_0x5d1229,_0xbe406e){const _0x2c5d48=a148_0x300681;_0x5d1229[_0x2c5d48(0x1c9)]=_0xbe406e;}),__decorate=this&&this[a148_0x300681(0x19f)]||function(_0x369f24,_0x414e79,_0x35ff9f,_0x17bdcc){const _0x8a120d=a148_0x300681;var _0x4eb46a=arguments[_0x8a120d(0x1c1)],_0x559075=_0x4eb46a<0x3?_0x414e79:_0x17bdcc===null?_0x17bdcc=Object[_0x8a120d(0x1fa)](_0x414e79,_0x35ff9f):_0x17bdcc,_0x37f58a;if(typeof Reflect===_0x8a120d(0x19d)&&typeof Reflect[_0x8a120d(0x1d1)]===_0x8a120d(0x1d5))_0x559075=Reflect[_0x8a120d(0x1d1)](_0x369f24,_0x414e79,_0x35ff9f,_0x17bdcc);else{for(var _0x3176f0=_0x369f24[_0x8a120d(0x1c1)]-0x1;_0x3176f0>=0x0;_0x3176f0--)if(_0x37f58a=_0x369f24[_0x3176f0])_0x559075=(_0x4eb46a<0x3?_0x37f58a(_0x559075):_0x4eb46a>0x3?_0x37f58a(_0x414e79,_0x35ff9f,_0x559075):_0x37f58a(_0x414e79,_0x35ff9f))||_0x559075;}return _0x4eb46a>0x3&&_0x559075&&Object[_0x8a120d(0x1a1)](_0x414e79,_0x35ff9f,_0x559075),_0x559075;},__importStar=this&&this['__importStar']||function(_0x49b031){const _0x51cad7=a148_0x300681;if(_0x49b031&&_0x49b031['__esModule'])return _0x49b031;var _0x4548c3={};if(_0x49b031!=null){for(var _0x552e0d in _0x49b031)if(_0x552e0d!==_0x51cad7(0x1c9)&&Object['prototype'][_0x51cad7(0x1b1)][_0x51cad7(0x1f7)](_0x49b031,_0x552e0d))__createBinding(_0x4548c3,_0x49b031,_0x552e0d);}return __setModuleDefault(_0x4548c3,_0x49b031),_0x4548c3;},__metadata=this&&this[a148_0x300681(0x1ed)]||function(_0x2f2693,_0x3dd520){const _0x4258f7=a148_0x300681;if(typeof Reflect===_0x4258f7(0x19d)&&typeof Reflect[_0x4258f7(0x1e4)]===_0x4258f7(0x1d5))return Reflect['metadata'](_0x2f2693,_0x3dd520);},FlosumSyncJob_1;Object[a148_0x300681(0x1a1)](exports,a148_0x300681(0x198),{'value':!![]}),exports[a148_0x300681(0x1b6)]=void 0x0;function a148_0x50b2(_0xcb6ab0,_0x2d4052){const _0x55ba08=a148_0x48b5();return a148_0x50b2=function(_0xca6a5d,_0x12c4bd){_0xca6a5d=_0xca6a5d-0x197;let _0x48b5d5=_0x55ba08[_0xca6a5d];return _0x48b5d5;},a148_0x50b2(_0xcb6ab0,_0x2d4052);}const constants_1=require(a148_0x300681(0x1f8)),typedi_1=__importStar(require('typedi')),core_1=require(a148_0x300681(0x1cc)),too_many_requests_error_1=require(a148_0x300681(0x1fb)),salesforce_error_1=require(a148_0x300681(0x1ae)),salesforce_sync_service_1=require(a148_0x300681(0x1af)),salesforce_service_1=require(a148_0x300681(0x1b9)),git_provider_manager_1=require(a148_0x300681(0x1b0)),utils_1=require(a148_0x300681(0x1ab)),sync_job_1=require(a148_0x300681(0x19a)),logger=new core_1[(a148_0x300681(0x1b4))](a148_0x300681(0x1ea));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x573e97,_0x4f9ebc,_0x3a70ef){const _0x25ea6b=a148_0x300681;this[_0x25ea6b(0x1ec)]=_0x573e97,this['salesforceSync']=_0x4f9ebc,this[_0x25ea6b(0x1c6)]=_0x3a70ef,this[_0x25ea6b(0x1a3)]=this[_0x25ea6b(0x1c6)][_0x25ea6b(0x1a7)](),this['repositoriesIntersections']={},this['repoList']=[];}async[a148_0x300681(0x1c7)](_0x230f74,_0x5b01f4){const _0x3e8f91=a148_0x300681;if(_0x5b01f4 instanceof too_many_requests_error_1[_0x3e8f91(0x1e2)]){await this[_0x3e8f91(0x1da)][_0x3e8f91(0x1a9)](_0x230f74,_0x3e8f91(0x1d6));throw _0x5b01f4;}try{this[_0x3e8f91(0x1aa)][_0x3e8f91(0x199)](_0x3e8f91(0x1ad)+_0x230f74[_0x3e8f91(0x1a2)]+_0x3e8f91(0x1b3)+_0x230f74['branchName']+']\x20due\x20error\x20-\x20'+_0x5b01f4),await this[_0x3e8f91(0x1aa)][_0x3e8f91(0x1ac)](),await this[_0x3e8f91(0x1da)][_0x3e8f91(0x1c5)](_0x230f74,{}),await this['salesforceSync']['setStatus'](_0x230f74,_0x3e8f91(0x1f9));}catch(_0x1d1b68){if(_0x1d1b68 instanceof salesforce_error_1[_0x3e8f91(0x1a0)])throw _0x1d1b68;}}async[a148_0x300681(0x1f2)](_0x410a12){const _0x257b0f=a148_0x300681;if(_0x410a12[_0x257b0f(0x1d8)]){const _0x3ab93b=_0x410a12[_0x257b0f(0x1a2)][_0x257b0f(0x1de)](),_0x53247e=this['repositoriesIntersections'][_0x3ab93b];if(!_0x53247e)this[_0x257b0f(0x1dc)][_0x3ab93b]=_0x410a12[_0x257b0f(0x1a2)];else{if(_0x53247e&&_0x53247e!==_0x410a12[_0x257b0f(0x1a2)])return await this[_0x257b0f(0x1c7)](_0x410a12,new Error(_0x257b0f(0x1f6)+_0x410a12['repositoryName']+'\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27'+_0x3ab93b+_0x257b0f(0x1be)+_0x53247e+'\x27')),!![];}}return![];}async[a148_0x300681(0x1f0)](_0x392d95){const _0x33c259=a148_0x300681;if(!constants_1[_0x33c259(0x1ba)]['test'](_0x392d95[_0x33c259(0x1a2)]))return await this[_0x33c259(0x1c7)](_0x392d95,new Error(_0x33c259(0x1f6)+_0x392d95[_0x33c259(0x1a2)]+_0x33c259(0x19e))),![];if(!constants_1[_0x33c259(0x1cb)][_0x33c259(0x1a4)](_0x392d95['branchName']))return await this[_0x33c259(0x1c7)](_0x392d95,new Error(_0x33c259(0x1d0)+_0x392d95[_0x33c259(0x1db)]+'\x27\x20in\x20repository\x20\x27'+_0x392d95[_0x33c259(0x1a2)]+_0x33c259(0x197))),![];return!![];}async['getOrCreateRepo'](_0x45d869){const _0x296bac=a148_0x300681,_0x42096b=this[_0x296bac(0x1bd)][_0x296bac(0x1b8)](_0x4e3df3=>_0x45d869[_0x296bac(0x1a2)]===_0x4e3df3['name']);if(_0x42096b)return _0x42096b;const _0xdf279d=await this[_0x296bac(0x1a3)][_0x296bac(0x1c0)]({'name':_0x45d869[_0x296bac(0x1a2)],'autoInit':!![],'defaultBranch':_0x45d869[_0x296bac(0x1db)],'private':!![]});return this[_0x296bac(0x1bd)][_0x296bac(0x1f5)](_0xdf279d),_0xdf279d;}async[a148_0x300681(0x1b5)](_0x23ef2d,_0x350072){const _0x3da9d8=a148_0x300681;this[_0x3da9d8(0x1ec)][_0x3da9d8(0x1b7)](_0x350072),this[_0x3da9d8(0x1aa)]=this[_0x3da9d8(0x1ec)][_0x3da9d8(0x1c3)]();try{this[_0x3da9d8(0x1aa)]['log'](_0x3da9d8(0x1d2)),await this['logger'][_0x3da9d8(0x1ac)]();const [_0x5b4384,_0x56ad0d]=await Promise['all']([this[_0x3da9d8(0x1da)]['getBranchRecords'](),this['salesforceSync'][_0x3da9d8(0x1f3)]()]);this[_0x3da9d8(0x1bd)]=await this['repoService'][_0x3da9d8(0x1ce)]();const _0xc75b64=[..._0x56ad0d,..._0x5b4384];logger['log']('have\x20to\x20synchronize\x20%d\x20branches',_0xc75b64[_0x3da9d8(0x1c1)]);for(const _0x5f5855 of _0xc75b64){const _0x266a41=typedi_1[_0x3da9d8(0x1c9)]['get'](sync_job_1['SyncJob']);logger[_0x3da9d8(0x199)](_0x3da9d8(0x1ee),_0x5f5855[_0x3da9d8(0x1a2)],_0x5f5855[_0x3da9d8(0x1d8)],_0x5f5855[_0x3da9d8(0x1db)],_0x5f5855[_0x3da9d8(0x1e0)]);const _0x187d0b=await this[_0x3da9d8(0x1f0)](_0x5f5855);if(!_0x187d0b)continue;const _0x4f0dd6=await this[_0x3da9d8(0x1f2)](_0x5f5855);if(_0x4f0dd6)continue;let _0x15c338;try{_0x15c338=await this[_0x3da9d8(0x1e7)](_0x5f5855);}catch(_0x3c3e3d){await this[_0x3da9d8(0x1c7)](_0x5f5855,_0x3c3e3d instanceof too_many_requests_error_1[_0x3da9d8(0x1e2)]?_0x3c3e3d:new Error(_0x3da9d8(0x19b)+_0x3c3e3d));continue;}await _0x266a41[_0x3da9d8(0x1b5)]({'repository':_0x15c338,'convertToSFDX':_0x23ef2d[_0x3da9d8(0x1d3)],'loggerId':_0x350072,'syncRecord':_0x5f5855})[_0x3da9d8(0x1d9)](_0x458455=>this[_0x3da9d8(0x1c7)](_0x5f5855,_0x458455));}}catch(_0x4a63a6){logger[_0x3da9d8(0x1d4)](_0x4a63a6);if(_0x4a63a6 instanceof too_many_requests_error_1['TooManyRequests']){this['logger'][_0x3da9d8(0x199)]('[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.'),await this[_0x3da9d8(0x1aa)][_0x3da9d8(0x1ac)]()[_0x3da9d8(0x1d9)](()=>void 0x0),await(0x0,utils_1[_0x3da9d8(0x1cd)])(0x3c*0x3c*0x3e8);const _0xb97eff=typedi_1['default'][_0x3da9d8(0x1e3)](FlosumSyncJob_1);_0xb97eff[_0x3da9d8(0x1b5)](_0x23ef2d,_0x350072);}else this['logger'][_0x3da9d8(0x199)](_0x3da9d8(0x1a5)+_0x4a63a6),await this['logger'][_0x3da9d8(0x1ac)]()[_0x3da9d8(0x1d9)](()=>void 0x0);return;}this['logger'][_0x3da9d8(0x199)](_0x3da9d8(0x1e8)),await this['logger'][_0x3da9d8(0x1ac)](),await this[_0x3da9d8(0x1da)][_0x3da9d8(0x1dd)](_0x23ef2d['syncID'])[_0x3da9d8(0x1d9)](()=>null);}};FlosumSyncJob=FlosumSyncJob_1=__decorate([(0x0,typedi_1[a148_0x300681(0x1f4)])({'transient':!![]}),__metadata(a148_0x300681(0x1bb),[salesforce_service_1[a148_0x300681(0x1b2)],salesforce_sync_service_1[a148_0x300681(0x1c2)],git_provider_manager_1[a148_0x300681(0x1d7)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;