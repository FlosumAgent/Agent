const a148_0x3fd96e=a148_0x31ec;(function(_0x26356d,_0x3c7731){const _0x5259be=a148_0x31ec,_0x1d49f0=_0x26356d();while(!![]){try{const _0x39f754=parseInt(_0x5259be(0x198))/0x1*(parseInt(_0x5259be(0x1a1))/0x2)+parseInt(_0x5259be(0x159))/0x3+parseInt(_0x5259be(0x183))/0x4*(-parseInt(_0x5259be(0x180))/0x5)+-parseInt(_0x5259be(0x16f))/0x6*(parseInt(_0x5259be(0x18c))/0x7)+parseInt(_0x5259be(0x16d))/0x8*(-parseInt(_0x5259be(0x196))/0x9)+parseInt(_0x5259be(0x187))/0xa*(parseInt(_0x5259be(0x174))/0xb)+parseInt(_0x5259be(0x1b0))/0xc;if(_0x39f754===_0x3c7731)break;else _0x1d49f0['push'](_0x1d49f0['shift']());}catch(_0x36d062){_0x1d49f0['push'](_0x1d49f0['shift']());}}}(a148_0x19d7,0x89ed3));const a148_0x24126b=function(){let _0x2a692e=!![];return function(_0x379565,_0x4af63a){const _0x1b1710=_0x2a692e?function(){const _0x3f2b5d=a148_0x31ec;if(_0x4af63a){const _0x54bb7c=_0x4af63a[_0x3f2b5d(0x1a0)](_0x379565,arguments);return _0x4af63a=null,_0x54bb7c;}}:function(){};return _0x2a692e=![],_0x1b1710;};}(),a148_0x5d5cec=a148_0x24126b(this,function(){const _0xf99f4c=a148_0x31ec;return a148_0x5d5cec[_0xf99f4c(0x160)]()['search'](_0xf99f4c(0x177))[_0xf99f4c(0x160)]()[_0xf99f4c(0x17e)](a148_0x5d5cec)['search']('(((.+)+)+)+$');});a148_0x5d5cec();'use strict';var __createBinding=this&&this[a148_0x3fd96e(0x18f)]||(Object[a148_0x3fd96e(0x186)]?function(_0x270348,_0x3a3b7c,_0x73b9e3,_0x4c8ec4){const _0x5e7934=a148_0x3fd96e;if(_0x4c8ec4===undefined)_0x4c8ec4=_0x73b9e3;Object[_0x5e7934(0x158)](_0x270348,_0x4c8ec4,{'enumerable':!![],'get':function(){return _0x3a3b7c[_0x73b9e3];}});}:function(_0x268529,_0x3a9a6e,_0x2c0bfe,_0x5fad35){if(_0x5fad35===undefined)_0x5fad35=_0x2c0bfe;_0x268529[_0x5fad35]=_0x3a9a6e[_0x2c0bfe];}),__setModuleDefault=this&&this[a148_0x3fd96e(0x1a4)]||(Object[a148_0x3fd96e(0x186)]?function(_0x1ef8a2,_0x3e90ce){const _0x52aa1a=a148_0x3fd96e;Object[_0x52aa1a(0x158)](_0x1ef8a2,'default',{'enumerable':!![],'value':_0x3e90ce});}:function(_0x208fa3,_0x2092da){_0x208fa3['default']=_0x2092da;}),__decorate=this&&this[a148_0x3fd96e(0x1b4)]||function(_0x43c1f4,_0x2beacf,_0x356bc2,_0x325011){const _0x55f651=a148_0x3fd96e;var _0x2e279a=arguments['length'],_0x386af5=_0x2e279a<0x3?_0x2beacf:_0x325011===null?_0x325011=Object['getOwnPropertyDescriptor'](_0x2beacf,_0x356bc2):_0x325011,_0x4e04e8;if(typeof Reflect===_0x55f651(0x199)&&typeof Reflect['decorate']===_0x55f651(0x19a))_0x386af5=Reflect[_0x55f651(0x166)](_0x43c1f4,_0x2beacf,_0x356bc2,_0x325011);else{for(var _0x4d2924=_0x43c1f4[_0x55f651(0x19b)]-0x1;_0x4d2924>=0x0;_0x4d2924--)if(_0x4e04e8=_0x43c1f4[_0x4d2924])_0x386af5=(_0x2e279a<0x3?_0x4e04e8(_0x386af5):_0x2e279a>0x3?_0x4e04e8(_0x2beacf,_0x356bc2,_0x386af5):_0x4e04e8(_0x2beacf,_0x356bc2))||_0x386af5;}return _0x2e279a>0x3&&_0x386af5&&Object[_0x55f651(0x158)](_0x2beacf,_0x356bc2,_0x386af5),_0x386af5;},__importStar=this&&this[a148_0x3fd96e(0x16a)]||function(_0x3679d2){const _0x2a1ee7=a148_0x3fd96e;if(_0x3679d2&&_0x3679d2[_0x2a1ee7(0x188)])return _0x3679d2;var _0x2372c1={};if(_0x3679d2!=null){for(var _0x468b01 in _0x3679d2)if(_0x468b01!==_0x2a1ee7(0x176)&&Object['prototype'][_0x2a1ee7(0x1b2)][_0x2a1ee7(0x18a)](_0x3679d2,_0x468b01))__createBinding(_0x2372c1,_0x3679d2,_0x468b01);}return __setModuleDefault(_0x2372c1,_0x3679d2),_0x2372c1;},__metadata=this&&this['__metadata']||function(_0x1ea718,_0x439299){const _0x1a75b0=a148_0x3fd96e;if(typeof Reflect===_0x1a75b0(0x199)&&typeof Reflect[_0x1a75b0(0x17c)]===_0x1a75b0(0x19a))return Reflect[_0x1a75b0(0x17c)](_0x1ea718,_0x439299);},FlosumSyncJob_1;Object[a148_0x3fd96e(0x158)](exports,'__esModule',{'value':!![]}),exports[a148_0x3fd96e(0x189)]=void 0x0;function a148_0x31ec(_0x1387bc,_0x4f1c03){const _0x52d6ef=a148_0x19d7();return a148_0x31ec=function(_0x5d5cec,_0x24126b){_0x5d5cec=_0x5d5cec-0x153;let _0x19d792=_0x52d6ef[_0x5d5cec];return _0x19d792;},a148_0x31ec(_0x1387bc,_0x4f1c03);}const constants_1=require(a148_0x3fd96e(0x162)),typedi_1=__importStar(require('typedi')),core_1=require('../../../core'),too_many_requests_error_1=require(a148_0x3fd96e(0x1aa)),salesforce_error_1=require(a148_0x3fd96e(0x15e)),salesforce_sync_service_1=require(a148_0x3fd96e(0x192)),salesforce_service_1=require(a148_0x3fd96e(0x1b3)),git_provider_manager_1=require(a148_0x3fd96e(0x163)),utils_1=require(a148_0x3fd96e(0x1a3)),sync_job_1=require('./sync.job'),logger=new core_1[(a148_0x3fd96e(0x15c))](a148_0x3fd96e(0x1a5));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x37cf20,_0x960fbb,_0x4bf9df){const _0x2c5d96=a148_0x3fd96e;this[_0x2c5d96(0x154)]=_0x37cf20,this[_0x2c5d96(0x194)]=_0x960fbb,this[_0x2c5d96(0x156)]=_0x4bf9df,this[_0x2c5d96(0x193)]=this[_0x2c5d96(0x156)][_0x2c5d96(0x195)](),this[_0x2c5d96(0x190)]={},this[_0x2c5d96(0x1b1)]=[];}async[a148_0x3fd96e(0x179)](_0x30a467,_0x45b3e7){const _0x40cb85=a148_0x3fd96e;if(_0x45b3e7 instanceof too_many_requests_error_1['TooManyRequests']){await this[_0x40cb85(0x194)][_0x40cb85(0x171)](_0x30a467,_0x40cb85(0x191));throw _0x45b3e7;}try{this['logger']['log']('[ERROR]\x20Stop\x20sync\x20job\x20for\x20\x27'+_0x30a467[_0x40cb85(0x18d)]+_0x40cb85(0x1ad)+_0x30a467['branchName']+']\x20due\x20error\x20-\x20'+_0x45b3e7),await this[_0x40cb85(0x1a8)][_0x40cb85(0x161)](),await this[_0x40cb85(0x194)][_0x40cb85(0x19f)](_0x30a467,{}),await this[_0x40cb85(0x194)]['setStatus'](_0x30a467,_0x40cb85(0x153));}catch(_0x4e796c){if(_0x4e796c instanceof salesforce_error_1['SalesforceError'])throw _0x4e796c;}}async[a148_0x3fd96e(0x157)](_0x159dcd){const _0xd20f7f=a148_0x3fd96e;if(_0x159dcd[_0xd20f7f(0x1ae)]){const _0x4eed88=_0x159dcd[_0xd20f7f(0x18d)]['toLowerCase'](),_0x535399=this[_0xd20f7f(0x190)][_0x4eed88];if(!_0x535399)this['repositoriesIntersections'][_0x4eed88]=_0x159dcd[_0xd20f7f(0x18d)];else{if(_0x535399&&_0x535399!==_0x159dcd[_0xd20f7f(0x18d)])return await this[_0xd20f7f(0x179)](_0x159dcd,new Error('Unable\x20to\x20synchronize\x20repository\x20\x27'+_0x159dcd[_0xd20f7f(0x18d)]+_0xd20f7f(0x19c)+_0x4eed88+_0xd20f7f(0x1ab)+_0x535399+'\x27')),!![];}}return![];}async['checkValidNaming'](_0x454da9){const _0x258626=a148_0x3fd96e;if(!constants_1['REPOSITORY_NAME_REGEXP'][_0x258626(0x164)](_0x454da9[_0x258626(0x18d)]))return await this[_0x258626(0x179)](_0x454da9,new Error(_0x258626(0x173)+_0x454da9[_0x258626(0x18d)]+_0x258626(0x18e))),![];if(!constants_1[_0x258626(0x17a)][_0x258626(0x164)](_0x454da9['branchName']))return await this['handleRecordSyncError'](_0x454da9,new Error(_0x258626(0x165)+_0x454da9['branchName']+'\x27\x20in\x20repository\x20\x27'+_0x454da9[_0x258626(0x18d)]+_0x258626(0x167))),![];return!![];}async[a148_0x3fd96e(0x16e)](_0x275ab3){const _0x5a4785=a148_0x3fd96e,_0x12e557=this['repoList'][_0x5a4785(0x184)](_0xfceebc=>_0x275ab3[_0x5a4785(0x18d)]===_0xfceebc[_0x5a4785(0x1a6)]);if(_0x12e557)return _0x12e557;const _0x1e5dc1=await this[_0x5a4785(0x193)][_0x5a4785(0x186)]({'name':_0x275ab3[_0x5a4785(0x18d)],'autoInit':!![],'defaultBranch':_0x275ab3[_0x5a4785(0x15b)],'private':!![]});return this[_0x5a4785(0x1b1)][_0x5a4785(0x185)](_0x1e5dc1),_0x1e5dc1;}async[a148_0x3fd96e(0x175)](_0x38fdda,_0xd82bba){const _0x1ec4e0=a148_0x3fd96e;this[_0x1ec4e0(0x154)][_0x1ec4e0(0x17f)](_0xd82bba),this['logger']=this[_0x1ec4e0(0x154)][_0x1ec4e0(0x16c)]();try{this[_0x1ec4e0(0x1a8)][_0x1ec4e0(0x1a2)](_0x1ec4e0(0x178)),await this[_0x1ec4e0(0x1a8)][_0x1ec4e0(0x161)]();const [_0x4355c3,_0x25f76e]=await Promise[_0x1ec4e0(0x182)]([this[_0x1ec4e0(0x194)][_0x1ec4e0(0x16b)](),this[_0x1ec4e0(0x194)][_0x1ec4e0(0x19e)]()]);this[_0x1ec4e0(0x1b1)]=await this[_0x1ec4e0(0x193)][_0x1ec4e0(0x1a9)]();const _0x1d768c=[..._0x25f76e,..._0x4355c3];logger[_0x1ec4e0(0x1a2)](_0x1ec4e0(0x197),_0x1d768c[_0x1ec4e0(0x19b)]);for(const _0x19ac32 of _0x1d768c){const _0x5c3878=typedi_1[_0x1ec4e0(0x176)]['get'](sync_job_1[_0x1ec4e0(0x17b)]);logger['log'](_0x1ec4e0(0x17d),_0x19ac32[_0x1ec4e0(0x18d)],_0x19ac32['repositoryId'],_0x19ac32[_0x1ec4e0(0x15b)],_0x19ac32[_0x1ec4e0(0x169)]);const _0x42fcc1=await this[_0x1ec4e0(0x19d)](_0x19ac32);if(!_0x42fcc1)continue;const _0x241844=await this[_0x1ec4e0(0x157)](_0x19ac32);if(_0x241844)continue;let _0x415bdf;try{_0x415bdf=await this['getOrCreateRepo'](_0x19ac32);}catch(_0x360fa7){await this[_0x1ec4e0(0x179)](_0x19ac32,_0x360fa7 instanceof too_many_requests_error_1[_0x1ec4e0(0x1af)]?_0x360fa7:new Error(_0x1ec4e0(0x1ac)+_0x360fa7));continue;}await _0x5c3878['run']({'repository':_0x415bdf,'convertToSFDX':_0x38fdda[_0x1ec4e0(0x1b5)],'loggerId':_0xd82bba,'syncRecord':_0x19ac32})['catch'](_0x3e39eb=>this[_0x1ec4e0(0x179)](_0x19ac32,_0x3e39eb));}}catch(_0x2d0b09){logger[_0x1ec4e0(0x172)](_0x2d0b09);if(_0x2d0b09 instanceof too_many_requests_error_1[_0x1ec4e0(0x1af)]){this[_0x1ec4e0(0x1a8)][_0x1ec4e0(0x1a2)]('[PAUSE]\x20Pause\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Paused\x20for\x201h\x20to\x20refill\x20limit\x20quota\x20continue.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20This\x20kind\x20of\x20error\x20is\x20not\x20critical\x20just\x20need\x20to\x20wait\x20until\x20we\x20can\x20continue\x20work\x20with\x20git\x20service.'),await this['logger']['send']()[_0x1ec4e0(0x181)](()=>void 0x0),await(0x0,utils_1[_0x1ec4e0(0x18b)])(0x3c*0x3c*0x3e8);const _0x18527c=typedi_1[_0x1ec4e0(0x176)][_0x1ec4e0(0x168)](FlosumSyncJob_1);_0x18527c[_0x1ec4e0(0x175)](_0x38fdda,_0xd82bba);}else this[_0x1ec4e0(0x1a8)]['log'](_0x1ec4e0(0x155)+_0x2d0b09),await this[_0x1ec4e0(0x1a8)][_0x1ec4e0(0x161)]()[_0x1ec4e0(0x181)](()=>void 0x0);return;}this[_0x1ec4e0(0x1a8)][_0x1ec4e0(0x1a2)]('[INFO]\x20Sync\x20job\x20done.'),await this[_0x1ec4e0(0x1a8)]['send'](),await this[_0x1ec4e0(0x194)][_0x1ec4e0(0x15a)](_0x38fdda[_0x1ec4e0(0x15d)])[_0x1ec4e0(0x181)](()=>null);}};function a148_0x19d7(){const _0xe0a0e6=['find','push','create','593870HfVzpD','__esModule','FlosumSyncJob','call','sleep','2620219ZVSQKo','repositoryName','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','__createBinding','repositoriesIntersections','Waiting','../../salesforce/services/salesforce-sync.service','repoService','salesforceSync','getRepoService','27KZJeCk','have\x20to\x20synchronize\x20%d\x20branches','9JDIIul','object','function','length','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','checkValidNaming','getRepositoryRecords','updateRemoteState','apply','123328trefkO','log','../../shared/utils','__setModuleDefault','flosum-sync-job','name','SalesforceService','logger','getAll','../../../core/errors/too-many-requests.error','\x27\x20-\x20\x27','[ERROR]\x20Could\x20not\x20find/create\x20repository.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Possible\x20error\x20reasons:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Git\x20service\x20is\x20unavailable\x20for\x20the\x20moment.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Repository\x20with\x20this\x20name\x20already\x20created\x20in\x20git,\x20but\x20with\x20another\x20lettercase\x20(repository\x20names\x20are\x20case-sensitive\x20and\x20should\x20be\x20identical).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20The\x20agent\x20could\x20not\x20recieve\x20all\x20repositories\x20from\x20git\x20service\x20due\x20permissions\x20that\x20you\x20provided.\x20(See\x20guide\x20how\x20to\x20setup\x20environment\x20variables\x20for\x20this\x20service).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Original\x20error:\x20','\x27\x20[','repositoryId','TooManyRequests','9570024OKelFy','repoList','hasOwnProperty','../../salesforce/services/salesforce.service','__decorate','convertToSFDX','Error','salesforceService','[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','gitManager','isIntersects','defineProperty','407859bLIzrF','disableSync','branchName','Logger','syncID','../../salesforce/errors/salesforce.error','design:paramtypes','toString','send','../../../constants','../../shared/git-provider.manager','test','Unable\x20to\x20synchronize\x20branch\x20\x27','decorate','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','get','branchId','__importStar','getBranchRecords','getLogger','2421704ZPzpWL','getOrCreateRepo','6bFovmG','GitProviderManager','setStatus','error','Unable\x20to\x20synchronize\x20repository\x20\x27','121MSWOgq','run','default','(((.+)+)+)+$','[INFO]\x20Start\x20sync\x20job','handleRecordSyncError','BRANCH_NAME_REGEXP','SyncJob','metadata','syncing\x20%s[%s]\x20repository\x20%s[%s]\x20branch','constructor','setLoggerId','25djvtxL','catch','all','235428zJLFxb'];a148_0x19d7=function(){return _0xe0a0e6;};return a148_0x19d7();}FlosumSyncJob=FlosumSyncJob_1=__decorate([(0x0,typedi_1['Service'])({'transient':!![]}),__metadata(a148_0x3fd96e(0x15f),[salesforce_service_1[a148_0x3fd96e(0x1a7)],salesforce_sync_service_1['SalesforceSyncService'],git_provider_manager_1[a148_0x3fd96e(0x170)]])],FlosumSyncJob),exports[a148_0x3fd96e(0x189)]=FlosumSyncJob;