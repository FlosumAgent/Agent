function a181_0x558c(){const _0x4233f8=['repositoryName','salesforceService','SalesforceService','repository','getBranchComponents','105ZBSLfp','__esModule','getCommitDto','(((.+)+)+)+$','branchId','30wKTeRD','repositoryId','sha','../../salesforce/services/salesforce.service','getOwnPropertyDescriptor','branch','toString','DEFAULT_GIT_USER_EMAIL','3389757MLqmLC','getComponentIds','../../../constants','checkSyncStatus','createBranchIfNotExists','length','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','commitJob','message','branchName',']\x20[Branch:\x20','branches','apply','60582XFzYAA','parse','function','In\x20Progress','SalesforceLogger2','4881360avBsKB','1765QKYlBX','getComponents','__metadata','catch','gitUrl','create','SalesforceRetrieverService','user','CommitComponentsDto','search','293778eTHFJT','getOne','run','metadata','object','syncData','string','decorate','61396LXiOyz','./commit-components.job','updateLastCommit','Completed','774ZhrCfh','Service','7621636CdYwEQ','../../../core','design:paramtypes','sfLogger','defineProperty','lastCommit','../../salesforce/services/salesforce-sync.service','setStatus','DEFAULT_GIT_USER_NAME','[INFO]\x20Branch\x20synchronized.\x20Skip','[INFO]\x20Sync\x20job\x20done.','35zjKMuI','name','constructor','__decorate','salesforceSync','convertToSFDX','getRemoteStateAttachmentId','../../salesforce/services/salesforce-logger-v2.service','send','getPrefix','repo','components','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','provider','Logger','log'];a181_0x558c=function(){return _0x4233f8;};return a181_0x558c();}const a181_0x2d5a63=a181_0x24e8;(function(_0x488841,_0x1cc8ce){const _0x386ce7=a181_0x24e8,_0x2e5ede=_0x488841();while(!![]){try{const _0x28e41b=parseInt(_0x386ce7(0x16d))/0x1*(-parseInt(_0x386ce7(0x183))/0x2)+parseInt(_0x386ce7(0x1a5))/0x3*(parseInt(_0x386ce7(0x17f))/0x4)+parseInt(_0x386ce7(0x190))/0x5*(parseInt(_0x386ce7(0x167))/0x6)+parseInt(_0x386ce7(0x1b2))/0x7+parseInt(_0x386ce7(0x16c))/0x8+-parseInt(_0x386ce7(0x177))/0x9*(-parseInt(_0x386ce7(0x1aa))/0xa)+-parseInt(_0x386ce7(0x185))/0xb;if(_0x28e41b===_0x1cc8ce)break;else _0x2e5ede['push'](_0x2e5ede['shift']());}catch(_0x591480){_0x2e5ede['push'](_0x2e5ede['shift']());}}}(a181_0x558c,0x67976));function a181_0x24e8(_0x16abbd,_0x20a6f8){const _0x13cf58=a181_0x558c();return a181_0x24e8=function(_0x286ed1,_0x1195f6){_0x286ed1=_0x286ed1-0x164;let _0x558c80=_0x13cf58[_0x286ed1];return _0x558c80;},a181_0x24e8(_0x16abbd,_0x20a6f8);}const a181_0x1195f6=function(){let _0x12ffa7=!![];return function(_0x51f9d0,_0x43183f){const _0x24659f=_0x12ffa7?function(){const _0xb257ff=a181_0x24e8;if(_0x43183f){const _0x181ec3=_0x43183f[_0xb257ff(0x166)](_0x51f9d0,arguments);return _0x43183f=null,_0x181ec3;}}:function(){};return _0x12ffa7=![],_0x24659f;};}(),a181_0x286ed1=a181_0x1195f6(this,function(){const _0x59f8aa=a181_0x24e8;return a181_0x286ed1[_0x59f8aa(0x1b0)]()[_0x59f8aa(0x176)](_0x59f8aa(0x1a8))['toString']()[_0x59f8aa(0x192)](a181_0x286ed1)[_0x59f8aa(0x176)](_0x59f8aa(0x1a8));});a181_0x286ed1();'use strict';var __decorate=this&&this[a181_0x2d5a63(0x193)]||function(_0xbebdc0,_0x1a3899,_0x3646fd,_0x32b12c){const _0x2c259b=a181_0x2d5a63;var _0x48b693=arguments[_0x2c259b(0x1b7)],_0x2a1292=_0x48b693<0x3?_0x1a3899:_0x32b12c===null?_0x32b12c=Object[_0x2c259b(0x1ae)](_0x1a3899,_0x3646fd):_0x32b12c,_0x11d6fc;if(typeof Reflect==='object'&&typeof Reflect[_0x2c259b(0x17e)]===_0x2c259b(0x169))_0x2a1292=Reflect['decorate'](_0xbebdc0,_0x1a3899,_0x3646fd,_0x32b12c);else{for(var _0x12bfea=_0xbebdc0[_0x2c259b(0x1b7)]-0x1;_0x12bfea>=0x0;_0x12bfea--)if(_0x11d6fc=_0xbebdc0[_0x12bfea])_0x2a1292=(_0x48b693<0x3?_0x11d6fc(_0x2a1292):_0x48b693>0x3?_0x11d6fc(_0x1a3899,_0x3646fd,_0x2a1292):_0x11d6fc(_0x1a3899,_0x3646fd))||_0x2a1292;}return _0x48b693>0x3&&_0x2a1292&&Object[_0x2c259b(0x189)](_0x1a3899,_0x3646fd,_0x2a1292),_0x2a1292;},__metadata=this&&this[a181_0x2d5a63(0x16f)]||function(_0x1d5f18,_0x503c9e){const _0x410bfa=a181_0x2d5a63;if(typeof Reflect===_0x410bfa(0x17b)&&typeof Reflect[_0x410bfa(0x17a)]==='function')return Reflect['metadata'](_0x1d5f18,_0x503c9e);},FlosumSyncJob_1;Object[a181_0x2d5a63(0x189)](exports,a181_0x2d5a63(0x1a6),{'value':!![]}),exports['FlosumSyncJob']=void 0x0;const core_1=require(a181_0x2d5a63(0x186)),salesforce_logger_v2_service_1=require(a181_0x2d5a63(0x197)),typedi_1=require('typedi'),constants_1=require(a181_0x2d5a63(0x1b4)),salesforce_retriever_service_1=require('../../salesforce/services/salesforce-retriever.service'),salesforce_sync_service_1=require(a181_0x2d5a63(0x18b)),salesforce_service_1=require(a181_0x2d5a63(0x1ad)),commit_components_dto_1=require('../dto/commit-components.dto'),commit_components_job_1=require(a181_0x2d5a63(0x180));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x197792,_0x395a20,_0x1efa21){const _0x226e1b=a181_0x2d5a63;this[_0x226e1b(0x194)]=_0x197792,this[_0x226e1b(0x1a1)]=_0x395a20,this['commitJob']=_0x1efa21,this['logger']=new core_1[(_0x226e1b(0x19e))](FlosumSyncJob_1[_0x226e1b(0x191)]);}['log'](_0x523424){const _0x5b5b09=a181_0x2d5a63;return this[_0x5b5b09(0x188)][_0x5b5b09(0x19f)](_0x5b5b09(0x19c)+this['syncData'][_0x5b5b09(0x1a0)]+_0x5b5b09(0x164)+this['syncData'][_0x5b5b09(0x1bb)]+']\x20'+_0x523424);}async['createBranchIfNotExists'](){const _0x9a72ee=a181_0x2d5a63;let _0xaa0d34=await this[_0x9a72ee(0x1a3)][_0x9a72ee(0x165)][_0x9a72ee(0x178)](this[_0x9a72ee(0x17c)][_0x9a72ee(0x1bb)])[_0x9a72ee(0x170)](()=>null);!_0xaa0d34&&(_0xaa0d34=await this[_0x9a72ee(0x1a3)][_0x9a72ee(0x165)][_0x9a72ee(0x172)]({'name':this[_0x9a72ee(0x17c)]['branchName']})),this[_0x9a72ee(0x1af)]=_0xaa0d34;}async[a181_0x2d5a63(0x1b3)](){const _0x108673=a181_0x2d5a63;return this['syncData']['repositoryId']?this['salesforceSync']['getComponentsFromRepository'](this[_0x108673(0x17c)][_0x108673(0x1ab)]):this[_0x108673(0x194)][_0x108673(0x1a4)](this[_0x108673(0x17c)][_0x108673(0x1a9)]);}async['getComponents'](){const _0x2b5194=a181_0x2d5a63,_0x4fbacf=await this[_0x2b5194(0x1b3)](),_0x2e837e=new salesforce_retriever_service_1[(_0x2b5194(0x173))](this[_0x2b5194(0x1a1)]),_0x456834=await _0x2e837e[_0x2b5194(0x179)](_0x4fbacf);return _0x456834;}async[a181_0x2d5a63(0x1a7)](_0x4c3f35){const _0x364666=a181_0x2d5a63,_0x572086=new commit_components_dto_1[(_0x364666(0x175))]();return _0x572086[_0x364666(0x1ba)]='Sync\x20repository',_0x572086[_0x364666(0x174)]={'name':constants_1[_0x364666(0x18d)],'email':constants_1[_0x364666(0x1b1)]},_0x572086[_0x364666(0x19b)]={'writed':await this[_0x364666(0x16e)]()},_0x572086[_0x364666(0x195)]=_0x4c3f35,_0x572086[_0x364666(0x19a)]=this['repository'],_0x572086['branch']=this[_0x364666(0x1af)],_0x572086['force']=!![],_0x572086['provider']=this['provider'],_0x572086;}async['checkSyncStatus'](){const _0x417d6a=a181_0x2d5a63,_0x38663d=await this['salesforceSync'][_0x417d6a(0x196)](this['syncData']),_0x2707bc=await this[_0x417d6a(0x1a1)]['retrieveAttachment'](_0x38663d)['then'](_0x23f2ee=>typeof _0x23f2ee===_0x417d6a(0x17d)?JSON[_0x417d6a(0x168)](_0x23f2ee):_0x23f2ee)[_0x417d6a(0x170)](()=>({}));if(_0x2707bc[this[_0x417d6a(0x1a3)][_0x417d6a(0x171)]]){if(_0x2707bc[this[_0x417d6a(0x1a3)][_0x417d6a(0x171)]][_0x417d6a(0x18a)]===this[_0x417d6a(0x1af)]['sha'])return!![];}return![];}async['updateLastCommit'](){const _0x47688b=a181_0x2d5a63,_0x510529=await this['repository']['branches'][_0x47688b(0x178)](this[_0x47688b(0x1af)][_0x47688b(0x191)]);await this[_0x47688b(0x19f)]('[INFO]\x20Update\x20remote\x20state.');const _0x3522e3={[this[_0x47688b(0x1a3)][_0x47688b(0x171)]]:{'lastCommit':_0x510529[_0x47688b(0x1ac)]}};await this[_0x47688b(0x194)]['updateRemoteState'](this['syncData'],_0x3522e3);}async[a181_0x2d5a63(0x179)]({syncRecord:_0x53ec89,repository:_0x13af84,logger:_0x8b9402,convertToSFDX:_0x3b3456,provider:_0x205e8c}){const _0x5c39d0=a181_0x2d5a63;this[_0x5c39d0(0x17c)]=_0x53ec89,this[_0x5c39d0(0x19d)]=_0x205e8c,this[_0x5c39d0(0x1a3)]=_0x13af84,this[_0x5c39d0(0x188)]=new salesforce_logger_v2_service_1[(_0x5c39d0(0x16b))](_0x8b9402['getLoggerId'](),_0x8b9402[_0x5c39d0(0x199)]()+_0x5c39d0(0x1b8)+this[_0x5c39d0(0x17c)]['repositoryName']+']\x20[Branch:\x20'+this[_0x5c39d0(0x17c)][_0x5c39d0(0x1bb)]+']');try{await this[_0x5c39d0(0x194)][_0x5c39d0(0x18c)](this[_0x5c39d0(0x17c)],_0x5c39d0(0x16a)),this[_0x5c39d0(0x19f)]('[INFO]\x20Start\x20sync\x20job'),await this[_0x5c39d0(0x1b6)]();const _0x5a94bb=await this[_0x5c39d0(0x1b5)]();if(_0x5a94bb){await this[_0x5c39d0(0x194)]['setStatus'](this[_0x5c39d0(0x17c)],'Completed'),await this[_0x5c39d0(0x19f)](_0x5c39d0(0x18e))['send']();return;}const _0x5821d8=await this[_0x5c39d0(0x1a7)](_0x3b3456);await this[_0x5c39d0(0x1b9)][_0x5c39d0(0x179)](_0x5821d8,this[_0x5c39d0(0x188)]),await this['salesforceSync'][_0x5c39d0(0x18c)](this[_0x5c39d0(0x17c)],_0x5c39d0(0x182)),await this[_0x5c39d0(0x181)](),this['log'](_0x5c39d0(0x18f));}catch(_0x44ee5e){throw _0x44ee5e;}finally{await this[_0x5c39d0(0x188)][_0x5c39d0(0x198)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a181_0x2d5a63(0x184)]({'transient':!![]}),__metadata(a181_0x2d5a63(0x187),[salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a181_0x2d5a63(0x1a2)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;