const a175_0x4b6511=a175_0x37cf;(function(_0x5b919d,_0x3f1b62){const _0x31fdae=a175_0x37cf,_0x2264e1=_0x5b919d();while(!![]){try{const _0x4af652=-parseInt(_0x31fdae(0x1dd))/0x1+-parseInt(_0x31fdae(0x192))/0x2*(-parseInt(_0x31fdae(0x1bf))/0x3)+parseInt(_0x31fdae(0x1cc))/0x4*(parseInt(_0x31fdae(0x190))/0x5)+-parseInt(_0x31fdae(0x1d5))/0x6*(parseInt(_0x31fdae(0x1a1))/0x7)+-parseInt(_0x31fdae(0x1be))/0x8+-parseInt(_0x31fdae(0x1ac))/0x9*(-parseInt(_0x31fdae(0x1b0))/0xa)+parseInt(_0x31fdae(0x19e))/0xb*(parseInt(_0x31fdae(0x1d2))/0xc);if(_0x4af652===_0x3f1b62)break;else _0x2264e1['push'](_0x2264e1['shift']());}catch(_0x1a8163){_0x2264e1['push'](_0x2264e1['shift']());}}}(a175_0x346e,0xcec60));const a175_0x936965=function(){let _0x708103=!![];return function(_0x165551,_0x498b85){const _0x33d29b=_0x708103?function(){if(_0x498b85){const _0x18e0ee=_0x498b85['apply'](_0x165551,arguments);return _0x498b85=null,_0x18e0ee;}}:function(){};return _0x708103=![],_0x33d29b;};}(),a175_0x5d45c6=a175_0x936965(this,function(){const _0x42ae7d=a175_0x37cf;return a175_0x5d45c6[_0x42ae7d(0x18c)]()[_0x42ae7d(0x1c9)](_0x42ae7d(0x1b3))[_0x42ae7d(0x18c)]()[_0x42ae7d(0x1da)](a175_0x5d45c6)[_0x42ae7d(0x1c9)]('(((.+)+)+)+$');});a175_0x5d45c6();'use strict';var __decorate=this&&this[a175_0x4b6511(0x1c3)]||function(_0x2d2a37,_0x31a811,_0x3b8096,_0x23e88b){const _0x13159f=a175_0x4b6511;var _0xb41b2b=arguments[_0x13159f(0x1cd)],_0x29c389=_0xb41b2b<0x3?_0x31a811:_0x23e88b===null?_0x23e88b=Object[_0x13159f(0x1d1)](_0x31a811,_0x3b8096):_0x23e88b,_0x164e86;if(typeof Reflect===_0x13159f(0x19a)&&typeof Reflect[_0x13159f(0x1b7)]===_0x13159f(0x1bb))_0x29c389=Reflect[_0x13159f(0x1b7)](_0x2d2a37,_0x31a811,_0x3b8096,_0x23e88b);else{for(var _0x4e9d8c=_0x2d2a37[_0x13159f(0x1cd)]-0x1;_0x4e9d8c>=0x0;_0x4e9d8c--)if(_0x164e86=_0x2d2a37[_0x4e9d8c])_0x29c389=(_0xb41b2b<0x3?_0x164e86(_0x29c389):_0xb41b2b>0x3?_0x164e86(_0x31a811,_0x3b8096,_0x29c389):_0x164e86(_0x31a811,_0x3b8096))||_0x29c389;}return _0xb41b2b>0x3&&_0x29c389&&Object[_0x13159f(0x1ca)](_0x31a811,_0x3b8096,_0x29c389),_0x29c389;},__metadata=this&&this[a175_0x4b6511(0x1a6)]||function(_0x311c06,_0x1cfc98){const _0x529b56=a175_0x4b6511;if(typeof Reflect==='object'&&typeof Reflect[_0x529b56(0x19c)]===_0x529b56(0x1bb))return Reflect['metadata'](_0x311c06,_0x1cfc98);},FlosumSyncJob_1;function a175_0x346e(){const _0x2c3394=['create','name','FlosumSyncJob','object','string','metadata','repository','8719590mkCoqC','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','repositoryName','2765edpqto','parse','SalesforceService','getLoggerId','[INFO]\x20Update\x20remote\x20state.','__metadata','sfLogger','setStatus','getRemoteStateAttachmentId','getCommitDto','repositoryId','1695609ljnoeZ','convertToSFDX','Completed','getOne','10qXjPxs','updateLastCommit','SalesforceRetrieverService','(((.+)+)+)+$','salesforceSync','branch','../../salesforce/services/salesforce-retriever.service','decorate','sha','branchId','../../../core','function','checkSyncStatus','lastCommit','6444688ohVcsM','68805jVuQhm','DEFAULT_GIT_USER_EMAIL','provider','SalesforceSyncService','__decorate','updateRemoteState','repo','branchName','../../salesforce/services/salesforce.service','./commit-components.job','search','defineProperty','getComponentIds','16DqLUIo','length','commitJob','[INFO]\x20Branch\x20synchronized.\x20Skip','salesforceService','getOwnPropertyDescriptor','12EGOpcu','../dto/commit-components.dto','SalesforceLogger2','4854pHEGaa','getPrefix','syncData','force','Service','constructor','send','CommitComponentsJob','896501xvKbik','log','run','Sync\x20repository','design:paramtypes','../../salesforce/services/salesforce-sync.service','catch','toString','user','In\x20Progress','__esModule','1069275fkJWcO','branches','90HBwkIZ','getComponents','gitUrl',']\x20[Branch:\x20','DEFAULT_GIT_USER_NAME'];a175_0x346e=function(){return _0x2c3394;};return a175_0x346e();}Object[a175_0x4b6511(0x1ca)](exports,a175_0x4b6511(0x18f),{'value':!![]}),exports[a175_0x4b6511(0x199)]=void 0x0;const core_1=require(a175_0x4b6511(0x1ba)),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),typedi_1=require('typedi'),constants_1=require('../../../constants'),salesforce_retriever_service_1=require(a175_0x4b6511(0x1b6)),salesforce_sync_service_1=require(a175_0x4b6511(0x18a)),salesforce_service_1=require(a175_0x4b6511(0x1c7)),commit_components_dto_1=require(a175_0x4b6511(0x1d3)),commit_components_job_1=require(a175_0x4b6511(0x1c8));function a175_0x37cf(_0x5d7233,_0x471c54){const _0x136f98=a175_0x346e();return a175_0x37cf=function(_0x5d45c6,_0x936965){_0x5d45c6=_0x5d45c6-0x188;let _0x346e0c=_0x136f98[_0x5d45c6];return _0x346e0c;},a175_0x37cf(_0x5d7233,_0x471c54);}let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x613fc1,_0xe2e175,_0xc2b270){const _0x3a20b5=a175_0x4b6511;this[_0x3a20b5(0x1b4)]=_0x613fc1,this[_0x3a20b5(0x1d0)]=_0xe2e175,this[_0x3a20b5(0x1ce)]=_0xc2b270,this['logger']=new core_1['Logger'](FlosumSyncJob_1[_0x3a20b5(0x198)]);}['log'](_0x294ae5){const _0x478aeb=a175_0x4b6511;return this[_0x478aeb(0x1a7)]['log'](_0x478aeb(0x19f)+this['syncData'][_0x478aeb(0x1a0)]+']\x20[Branch:\x20'+this[_0x478aeb(0x1d7)][_0x478aeb(0x1c6)]+']\x20'+_0x294ae5);}async['createBranchIfNotExists'](){const _0x16ef1c=a175_0x4b6511;let _0x5234f4=await this[_0x16ef1c(0x19d)]['branches'][_0x16ef1c(0x1af)](this[_0x16ef1c(0x1d7)][_0x16ef1c(0x1c6)])[_0x16ef1c(0x18b)](()=>null);!_0x5234f4&&(_0x5234f4=await this[_0x16ef1c(0x19d)][_0x16ef1c(0x191)][_0x16ef1c(0x197)]({'name':this[_0x16ef1c(0x1d7)][_0x16ef1c(0x1c6)]})),this[_0x16ef1c(0x1b5)]=_0x5234f4;}async[a175_0x4b6511(0x1cb)](){const _0x165cae=a175_0x4b6511;return this[_0x165cae(0x1d7)]['repositoryId']?this[_0x165cae(0x1b4)]['getComponentsFromRepository'](this['syncData'][_0x165cae(0x1ab)]):this[_0x165cae(0x1b4)]['getBranchComponents'](this['syncData'][_0x165cae(0x1b9)]);}async[a175_0x4b6511(0x193)](){const _0x320d17=a175_0x4b6511,_0x3b2edd=await this[_0x320d17(0x1cb)](),_0x42ef16=new salesforce_retriever_service_1[(_0x320d17(0x1b2))](this['salesforceService']),_0x565817=await _0x42ef16['run'](_0x3b2edd);return _0x565817;}async[a175_0x4b6511(0x1aa)](_0x41f1d3){const _0x53860b=a175_0x4b6511,_0x5ae3bb=new commit_components_dto_1['CommitComponentsDto']();return _0x5ae3bb['message']=_0x53860b(0x188),_0x5ae3bb[_0x53860b(0x18d)]={'name':constants_1[_0x53860b(0x196)],'email':constants_1[_0x53860b(0x1c0)]},_0x5ae3bb['components']={'writed':await this['getComponents']()},_0x5ae3bb[_0x53860b(0x1ad)]=_0x41f1d3,_0x5ae3bb[_0x53860b(0x1c5)]=this[_0x53860b(0x19d)],_0x5ae3bb[_0x53860b(0x1b5)]=this[_0x53860b(0x1b5)],_0x5ae3bb[_0x53860b(0x1d8)]=!![],_0x5ae3bb[_0x53860b(0x1c1)]=this[_0x53860b(0x1c1)],_0x5ae3bb;}async[a175_0x4b6511(0x1bc)](){const _0x5584bb=a175_0x4b6511,_0x19141e=await this[_0x5584bb(0x1b4)][_0x5584bb(0x1a9)](this['syncData']),_0x48f73b=await this['salesforceService']['retrieveAttachment'](_0x19141e)['then'](_0x184e83=>typeof _0x184e83===_0x5584bb(0x19b)?JSON[_0x5584bb(0x1a2)](_0x184e83):_0x184e83)['catch'](()=>({}));if(_0x48f73b[this['repository'][_0x5584bb(0x194)]]){if(_0x48f73b[this['repository'][_0x5584bb(0x194)]][_0x5584bb(0x1bd)]===this[_0x5584bb(0x1b5)][_0x5584bb(0x1b8)])return!![];}return![];}async[a175_0x4b6511(0x1b1)](){const _0x4dbf65=a175_0x4b6511,_0x174f97=await this[_0x4dbf65(0x19d)][_0x4dbf65(0x191)][_0x4dbf65(0x1af)](this[_0x4dbf65(0x1b5)][_0x4dbf65(0x198)]);await this[_0x4dbf65(0x1de)](_0x4dbf65(0x1a5));const _0x113e0e={[this[_0x4dbf65(0x19d)][_0x4dbf65(0x194)]]:{'lastCommit':_0x174f97['sha']}};await this['salesforceSync'][_0x4dbf65(0x1c4)](this[_0x4dbf65(0x1d7)],_0x113e0e);}async[a175_0x4b6511(0x1df)]({syncRecord:_0x280255,repository:_0x4b5a3e,logger:_0x3d74e1,convertToSFDX:_0xa20450,provider:_0x162d60}){const _0x138317=a175_0x4b6511;this[_0x138317(0x1d7)]=_0x280255,this[_0x138317(0x1c1)]=_0x162d60,this[_0x138317(0x19d)]=_0x4b5a3e,this['sfLogger']=new salesforce_logger_v2_service_1[(_0x138317(0x1d4))](_0x3d74e1[_0x138317(0x1a4)](),_0x3d74e1[_0x138317(0x1d6)]()+'\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20'+this[_0x138317(0x1d7)][_0x138317(0x1a0)]+_0x138317(0x195)+this[_0x138317(0x1d7)][_0x138317(0x1c6)]+']');try{await this['salesforceSync'][_0x138317(0x1a8)](this[_0x138317(0x1d7)],_0x138317(0x18e)),await this[_0x138317(0x1de)]('[INFO]\x20Start\x20sync\x20job'),await this['createBranchIfNotExists']();const _0x1d36ce=await this[_0x138317(0x1bc)]();if(_0x1d36ce){await this[_0x138317(0x1b4)][_0x138317(0x1a8)](this['syncData'],_0x138317(0x1ae)),await this['log'](_0x138317(0x1cf))['send']();return;}const _0x2cc043=await this['getCommitDto'](_0xa20450);await this[_0x138317(0x1ce)][_0x138317(0x1df)](_0x2cc043,this['sfLogger']),await this['salesforceSync']['setStatus'](this[_0x138317(0x1d7)],_0x138317(0x1ae)),await this[_0x138317(0x1b1)](),await this[_0x138317(0x1de)]('[INFO]\x20Sync\x20job\x20done.');}catch(_0x43b3dd){throw _0x43b3dd;}finally{await this[_0x138317(0x1a7)][_0x138317(0x1db)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a175_0x4b6511(0x1d9)]({'transient':!![]}),__metadata(a175_0x4b6511(0x189),[salesforce_sync_service_1[a175_0x4b6511(0x1c2)],salesforce_service_1[a175_0x4b6511(0x1a3)],commit_components_job_1[a175_0x4b6511(0x1dc)]])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;