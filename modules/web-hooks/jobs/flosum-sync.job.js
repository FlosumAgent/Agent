const a146_0x16eeec=a146_0x37e3;(function(_0x3cc617,_0x4ff3e2){const _0x4dba69=a146_0x37e3,_0x4f67a4=_0x3cc617();while(!![]){try{const _0x462188=-parseInt(_0x4dba69(0x213))/0x1*(parseInt(_0x4dba69(0x1f6))/0x2)+-parseInt(_0x4dba69(0x228))/0x3+parseInt(_0x4dba69(0x243))/0x4*(-parseInt(_0x4dba69(0x24a))/0x5)+-parseInt(_0x4dba69(0x20d))/0x6*(-parseInt(_0x4dba69(0x20e))/0x7)+-parseInt(_0x4dba69(0x203))/0x8*(-parseInt(_0x4dba69(0x202))/0x9)+parseInt(_0x4dba69(0x239))/0xa+parseInt(_0x4dba69(0x218))/0xb*(parseInt(_0x4dba69(0x209))/0xc);if(_0x462188===_0x4ff3e2)break;else _0x4f67a4['push'](_0x4f67a4['shift']());}catch(_0xcf07d8){_0x4f67a4['push'](_0x4f67a4['shift']());}}}(a146_0x4f86,0xbc53f));const a146_0x727e77=function(){let _0x59c561=!![];return function(_0x2a2aae,_0x45a11a){const _0xca66f=_0x59c561?function(){const _0x4d44d5=a146_0x37e3;if(_0x45a11a){const _0x462182=_0x45a11a[_0x4d44d5(0x241)](_0x2a2aae,arguments);return _0x45a11a=null,_0x462182;}}:function(){};return _0x59c561=![],_0xca66f;};}(),a146_0x57b247=a146_0x727e77(this,function(){const _0x3e2960=a146_0x37e3;return a146_0x57b247[_0x3e2960(0x237)]()[_0x3e2960(0x231)]('(((.+)+)+)+$')[_0x3e2960(0x237)]()[_0x3e2960(0x23f)](a146_0x57b247)[_0x3e2960(0x231)]('(((.+)+)+)+$');});function a146_0x37e3(_0xc132c9,_0x595bd9){const _0x2590ef=a146_0x4f86();return a146_0x37e3=function(_0x57b247,_0x727e77){_0x57b247=_0x57b247-0x1f3;let _0x4f869b=_0x2590ef[_0x57b247];return _0x4f869b;},a146_0x37e3(_0xc132c9,_0x595bd9);}a146_0x57b247();'use strict';var __createBinding=this&&this[a146_0x16eeec(0x20b)]||(Object[a146_0x16eeec(0x214)]?function(_0x3eab9b,_0x5092f0,_0x42a875,_0x2aca7e){const _0x520bd7=a146_0x16eeec;if(_0x2aca7e===undefined)_0x2aca7e=_0x42a875;Object[_0x520bd7(0x212)](_0x3eab9b,_0x2aca7e,{'enumerable':!![],'get':function(){return _0x5092f0[_0x42a875];}});}:function(_0x7e1b50,_0x39b683,_0x1e68e5,_0x262b51){if(_0x262b51===undefined)_0x262b51=_0x1e68e5;_0x7e1b50[_0x262b51]=_0x39b683[_0x1e68e5];}),__setModuleDefault=this&&this[a146_0x16eeec(0x22e)]||(Object[a146_0x16eeec(0x214)]?function(_0x3f385f,_0x3136ea){const _0xaf425d=a146_0x16eeec;Object[_0xaf425d(0x212)](_0x3f385f,_0xaf425d(0x248),{'enumerable':!![],'value':_0x3136ea});}:function(_0x23e631,_0xc528fc){const _0x4a6318=a146_0x16eeec;_0x23e631[_0x4a6318(0x248)]=_0xc528fc;}),__decorate=this&&this[a146_0x16eeec(0x1f5)]||function(_0x4c5591,_0x2ff585,_0x3679bb,_0x20f188){const _0x213f90=a146_0x16eeec;var _0x16e0f7=arguments[_0x213f90(0x201)],_0x15775f=_0x16e0f7<0x3?_0x2ff585:_0x20f188===null?_0x20f188=Object['getOwnPropertyDescriptor'](_0x2ff585,_0x3679bb):_0x20f188,_0x195443;if(typeof Reflect===_0x213f90(0x21b)&&typeof Reflect[_0x213f90(0x235)]===_0x213f90(0x247))_0x15775f=Reflect[_0x213f90(0x235)](_0x4c5591,_0x2ff585,_0x3679bb,_0x20f188);else{for(var _0x27072f=_0x4c5591[_0x213f90(0x201)]-0x1;_0x27072f>=0x0;_0x27072f--)if(_0x195443=_0x4c5591[_0x27072f])_0x15775f=(_0x16e0f7<0x3?_0x195443(_0x15775f):_0x16e0f7>0x3?_0x195443(_0x2ff585,_0x3679bb,_0x15775f):_0x195443(_0x2ff585,_0x3679bb))||_0x15775f;}return _0x16e0f7>0x3&&_0x15775f&&Object[_0x213f90(0x212)](_0x2ff585,_0x3679bb,_0x15775f),_0x15775f;},__importStar=this&&this[a146_0x16eeec(0x227)]||function(_0x1b3df7){const _0x56351f=a146_0x16eeec;if(_0x1b3df7&&_0x1b3df7['__esModule'])return _0x1b3df7;var _0x424a12={};if(_0x1b3df7!=null){for(var _0x9416c6 in _0x1b3df7)if(_0x9416c6!==_0x56351f(0x248)&&Object[_0x56351f(0x1fe)][_0x56351f(0x23e)]['call'](_0x1b3df7,_0x9416c6))__createBinding(_0x424a12,_0x1b3df7,_0x9416c6);}return __setModuleDefault(_0x424a12,_0x1b3df7),_0x424a12;},__metadata=this&&this[a146_0x16eeec(0x1fd)]||function(_0x33b072,_0x595bc9){const _0x4a2800=a146_0x16eeec;if(typeof Reflect==='object'&&typeof Reflect[_0x4a2800(0x223)]===_0x4a2800(0x247))return Reflect['metadata'](_0x33b072,_0x595bc9);};function a146_0x4f86(){const _0x42fb81=['object','run','logger','flosum-sync-job','\x27\x20in\x20repository\x20\x27','checkValidNaming','SalesforceError','disableSync','metadata','isIntersects','../../salesforce/services/salesforce-sync.service','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','__importStar','2890554sSiiNq','patchObject','branchName','have\x20to\x20synchronize\x20%d\x20branches','syncID','setLoggerId','__setModuleDefault','\x27\x20[','encodeBase64','search','salesforceSync','typedi','SalesforceService','decorate','Service','toString','../../salesforce/services/salesforce.service','5236130rRqAKn','error','all','SyncJob','../../../constants','hasOwnProperty','constructor','FlosumSyncJob','apply','catch','88684xEwLph','SalesforceSyncService','send','../../shared/utils','function','default','convertToSFDX','155oZcZNs','syncing\x20%s[%s]\x20repository\x20%s[%s]\x20branch','toLowerCase','[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','repositoryId','__decorate','42LCbfvs','log','branchId','Unable\x20to\x20synchronize\x20branch\x20\x27','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','REPOSITORY_NAME_REGEXP','Attachment','__metadata','prototype','[INFO]\x20Start\x20sync\x20job','setStatus','length','4326939vljfUb','24PMymgx','__esModule','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','handleRecordSyncError','getBranchRecords','[ERROR]\x20Stop\x20sync\x20job\x20for\x20\x27','106356iARGiF','\x27\x20-\x20\x27','__createBinding','salesforceService','78456kVWWWT','56aYbXXY','stringify','test','[INFO]\x20Sync\x20job\x20done.','defineProperty','67241bmkCZS','create',']\x20due\x20error\x20-\x20','BRANCH_NAME_REGEXP','getAttachmentId','2189CYniRa','repositoryName','getRepositoryRecords'];a146_0x4f86=function(){return _0x42fb81;};return a146_0x4f86();}Object[a146_0x16eeec(0x212)](exports,a146_0x16eeec(0x204),{'value':!![]}),exports[a146_0x16eeec(0x240)]=void 0x0;const constants_1=require(a146_0x16eeec(0x23d)),typedi_1=__importStar(require(a146_0x16eeec(0x233))),core_1=require('../../../core'),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),salesforce_sync_service_1=require(a146_0x16eeec(0x225)),salesforce_service_1=require(a146_0x16eeec(0x238)),utils_1=require(a146_0x16eeec(0x246)),sync_job_1=require('./sync.job'),logger=new core_1['Logger'](a146_0x16eeec(0x21e));let FlosumSyncJob=class FlosumSyncJob{constructor(_0x36b399,_0x4dd154){const _0x3ea902=a146_0x16eeec;this[_0x3ea902(0x20c)]=_0x36b399,this[_0x3ea902(0x232)]=_0x4dd154,this['repositoriesIntersections']={};}async[a146_0x16eeec(0x206)](_0x16bd56,_0x26184e){const _0x381ac5=a146_0x16eeec;try{const _0x4479bd=await this[_0x381ac5(0x232)][_0x381ac5(0x217)](_0x16bd56);this[_0x381ac5(0x21d)]['log'](_0x381ac5(0x208)+_0x16bd56['repositoryName']+_0x381ac5(0x22f)+_0x16bd56[_0x381ac5(0x22a)]+_0x381ac5(0x215)+_0x26184e),await this[_0x381ac5(0x21d)][_0x381ac5(0x245)](),await this[_0x381ac5(0x20c)][_0x381ac5(0x229)](_0x381ac5(0x1fc),_0x4479bd,{'Body':(0x0,utils_1[_0x381ac5(0x230)])(JSON[_0x381ac5(0x20f)]({}))}),await this['salesforceSync'][_0x381ac5(0x200)](_0x16bd56,'Error');}catch(_0x42e979){logger[_0x381ac5(0x23a)](_0x42e979);if(_0x42e979 instanceof salesforce_error_1[_0x381ac5(0x221)])throw _0x42e979;}}async['isIntersects'](_0x1f60c2){const _0x2fdc9e=a146_0x16eeec;if(_0x1f60c2['repositoryId']){const _0x21a81b=_0x1f60c2['repositoryName'][_0x2fdc9e(0x24c)](),_0x3c439b=this['repositoriesIntersections'][_0x21a81b];if(!_0x3c439b)this['repositoriesIntersections'][_0x21a81b]=_0x1f60c2['repositoryName'];else{if(_0x3c439b&&_0x3c439b!==_0x1f60c2[_0x2fdc9e(0x219)])return await this[_0x2fdc9e(0x206)](_0x1f60c2,new Error('Unable\x20to\x20synchronize\x20repository\x20\x27'+_0x1f60c2[_0x2fdc9e(0x219)]+_0x2fdc9e(0x205)+_0x21a81b+_0x2fdc9e(0x20a)+_0x3c439b+'\x27')),!![];}}return![];}async[a146_0x16eeec(0x220)](_0x320f9e){const _0x115aed=a146_0x16eeec;if(!constants_1[_0x115aed(0x1fb)]['test'](_0x320f9e['repositoryName']))return await this[_0x115aed(0x206)](_0x320f9e,new Error('Unable\x20to\x20synchronize\x20repository\x20\x27'+_0x320f9e[_0x115aed(0x219)]+_0x115aed(0x1fa))),![];if(!constants_1[_0x115aed(0x216)][_0x115aed(0x210)](_0x320f9e[_0x115aed(0x22a)]))return await this[_0x115aed(0x206)](_0x320f9e,new Error(_0x115aed(0x1f9)+_0x320f9e[_0x115aed(0x22a)]+_0x115aed(0x21f)+_0x320f9e['repositoryName']+_0x115aed(0x226))),![];return!![];}async[a146_0x16eeec(0x21c)](_0x149ec0,_0x42c505){const _0x2ee704=a146_0x16eeec;this[_0x2ee704(0x20c)][_0x2ee704(0x22d)](_0x42c505),this[_0x2ee704(0x21d)]=this[_0x2ee704(0x20c)]['getLogger']();try{this[_0x2ee704(0x21d)]['log'](_0x2ee704(0x1ff)),await this[_0x2ee704(0x21d)][_0x2ee704(0x245)]();const [_0x16800a,_0x2514cc]=await Promise[_0x2ee704(0x23b)]([this['salesforceSync'][_0x2ee704(0x207)](),this[_0x2ee704(0x232)][_0x2ee704(0x21a)]()]),_0x1f1f85=[..._0x2514cc,..._0x16800a];logger['log'](_0x2ee704(0x22b),_0x1f1f85[_0x2ee704(0x201)]);for(const _0x540c3b of _0x1f1f85){const _0x5014ff=typedi_1[_0x2ee704(0x248)]['get'](sync_job_1[_0x2ee704(0x23c)]);logger[_0x2ee704(0x1f7)](_0x2ee704(0x24b),_0x540c3b[_0x2ee704(0x219)],_0x540c3b[_0x2ee704(0x1f4)],_0x540c3b[_0x2ee704(0x22a)],_0x540c3b[_0x2ee704(0x1f8)]);const _0xccfc54=await this['checkValidNaming'](_0x540c3b);if(!_0xccfc54)continue;const _0xe3a78b=await this[_0x2ee704(0x224)](_0x540c3b);if(_0xe3a78b)continue;await _0x5014ff['run'](_0x540c3b,_0x42c505,_0x149ec0[_0x2ee704(0x249)])['catch'](_0x292034=>this['handleRecordSyncError'](_0x540c3b,_0x292034));}}catch(_0x323cd3){logger[_0x2ee704(0x23a)](_0x323cd3),this['logger'][_0x2ee704(0x1f7)](_0x2ee704(0x1f3)+_0x323cd3),await this[_0x2ee704(0x21d)][_0x2ee704(0x245)]()[_0x2ee704(0x242)](()=>void 0x0);return;}this[_0x2ee704(0x21d)][_0x2ee704(0x1f7)](_0x2ee704(0x211)),await this[_0x2ee704(0x21d)][_0x2ee704(0x245)](),await this['salesforceSync'][_0x2ee704(0x222)](_0x149ec0[_0x2ee704(0x22c)]);}};FlosumSyncJob=__decorate([(0x0,typedi_1[a146_0x16eeec(0x236)])({'transient':!![]}),__metadata('design:paramtypes',[salesforce_service_1[a146_0x16eeec(0x234)],salesforce_sync_service_1[a146_0x16eeec(0x244)]])],FlosumSyncJob),exports[a146_0x16eeec(0x240)]=FlosumSyncJob;