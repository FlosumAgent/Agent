function a148_0xb056(){const _0x1daf7d=['repoService','Unable\x20to\x20synchronize\x20branch\x20\x27','SyncJob','../../shared/git-provider.manager','4468074oiQxdh','call','7DVucGj','__decorate','hasOwnProperty','SalesforceError','Service','3341097YmrOAI','../../../core','SalesforceSyncService','../../../constants','error','FlosumSyncJob','\x27\x20due\x20it\x20intersects\x20with\x20another\x20repository\x20by\x20repository\x20key\x20\x27','\x27\x20[','Waiting','disableSync','run','2646288PravXG','Unable\x20to\x20synchronize\x20repository\x20\x27','handleRecordSyncError','name','length','605444fccomb','setLoggerId','get','branchName','repositoryName','getLogger','decorate','search','546118KoQvqH','\x27\x20due\x20branch\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','send','BRANCH_NAME_REGEXP','sleep','toString','metadata','REPOSITORY_NAME_REGEXP','__esModule','SalesforceService','\x27\x20in\x20repository\x20\x27','repositoriesIntersections','3FyEnGI','design:paramtypes','\x27\x20due\x20repository\x20name\x20does\x20not\x20meet\x20the\x20naming\x20requirements.','[INFO]\x20Sync\x20job\x20done.','\x27\x20-\x20\x27','getRepoService','test','default','TooManyRequests','checkValidNaming','create','constructor','logger','syncing\x20%s[%s]\x20repository\x20%s[%s]\x20branch','salesforceService','getBranchRecords','catch','salesforceSync','1841395UTetWs','[ERROR]\x20Stop\x20sync\x20job\x20for\x20\x27','branchId','repositoryId','defineProperty','__metadata','setStatus',']\x20due\x20error\x20-\x20','[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20','getOwnPropertyDescriptor','have\x20to\x20synchronize\x20%d\x20branches','log','136748lCofLj','gitManager','convertToSFDX','function','all','toLowerCase','../../salesforce/services/salesforce.service','isIntersects','getRepositoryRecords','(((.+)+)+)+$','apply','getAll','./sync.job','object','Logger','[INFO]\x20Start\x20sync\x20job','flosum-sync-job'];a148_0xb056=function(){return _0x1daf7d;};return a148_0xb056();}function a148_0x27a6(_0x49b3be,_0x267bd9){const _0x2e24a8=a148_0xb056();return a148_0x27a6=function(_0x1a8999,_0x44f520){_0x1a8999=_0x1a8999-0x96;let _0xb056db=_0x2e24a8[_0x1a8999];return _0xb056db;},a148_0x27a6(_0x49b3be,_0x267bd9);}const a148_0x23cd7a=a148_0x27a6;(function(_0x21f7cb,_0x4e6c39){const _0x544453=a148_0x27a6,_0x3c4db9=_0x21f7cb();while(!![]){try{const _0x2c8cda=-parseInt(_0x544453(0xc9))/0x1+-parseInt(_0x544453(0xf3))/0x2*(-parseInt(_0x544453(0xd5))/0x3)+-parseInt(_0x544453(0xc1))/0x4+parseInt(_0x544453(0xe7))/0x5+parseInt(_0x544453(0xaa))/0x6*(parseInt(_0x544453(0xac))/0x7)+-parseInt(_0x544453(0xbc))/0x8+parseInt(_0x544453(0xb1))/0x9;if(_0x2c8cda===_0x4e6c39)break;else _0x3c4db9['push'](_0x3c4db9['shift']());}catch(_0x184544){_0x3c4db9['push'](_0x3c4db9['shift']());}}}(a148_0xb056,0x8000c));const a148_0x44f520=function(){let _0xbe9c82=!![];return function(_0x5cf0d3,_0x23a6e5){const _0x11f7f6=_0xbe9c82?function(){const _0x1dbd79=a148_0x27a6;if(_0x23a6e5){const _0x321644=_0x23a6e5[_0x1dbd79(0x9f)](_0x5cf0d3,arguments);return _0x23a6e5=null,_0x321644;}}:function(){};return _0xbe9c82=![],_0x11f7f6;};}(),a148_0x1a8999=a148_0x44f520(this,function(){const _0x58eb1d=a148_0x27a6;return a148_0x1a8999[_0x58eb1d(0xce)]()[_0x58eb1d(0xc8)](_0x58eb1d(0x9e))[_0x58eb1d(0xce)]()[_0x58eb1d(0xe0)](a148_0x1a8999)[_0x58eb1d(0xc8)](_0x58eb1d(0x9e));});a148_0x1a8999();'use strict';var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0x4ab334,_0x149ff6,_0x3b6c0b,_0x37d44a){const _0x32cf8a=a148_0x27a6;if(_0x37d44a===undefined)_0x37d44a=_0x3b6c0b;Object[_0x32cf8a(0xeb)](_0x4ab334,_0x37d44a,{'enumerable':!![],'get':function(){return _0x149ff6[_0x3b6c0b];}});}:function(_0x5e4452,_0x53c5aa,_0x33e23f,_0x2ca2d1){if(_0x2ca2d1===undefined)_0x2ca2d1=_0x33e23f;_0x5e4452[_0x2ca2d1]=_0x53c5aa[_0x33e23f];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a148_0x23cd7a(0xdf)]?function(_0x2f0f74,_0x36ce6c){const _0x333712=a148_0x23cd7a;Object[_0x333712(0xeb)](_0x2f0f74,_0x333712(0xdc),{'enumerable':!![],'value':_0x36ce6c});}:function(_0x260257,_0x2807a5){const _0xf27a2f=a148_0x23cd7a;_0x260257[_0xf27a2f(0xdc)]=_0x2807a5;}),__decorate=this&&this[a148_0x23cd7a(0xad)]||function(_0xc92fe4,_0x5149a4,_0x50a8b7,_0x20053b){const _0x19eb4e=a148_0x23cd7a;var _0x1bdf6b=arguments[_0x19eb4e(0xc0)],_0x42659c=_0x1bdf6b<0x3?_0x5149a4:_0x20053b===null?_0x20053b=Object[_0x19eb4e(0xf0)](_0x5149a4,_0x50a8b7):_0x20053b,_0x149967;if(typeof Reflect===_0x19eb4e(0xa2)&&typeof Reflect[_0x19eb4e(0xc7)]===_0x19eb4e(0x98))_0x42659c=Reflect['decorate'](_0xc92fe4,_0x5149a4,_0x50a8b7,_0x20053b);else{for(var _0x49354e=_0xc92fe4[_0x19eb4e(0xc0)]-0x1;_0x49354e>=0x0;_0x49354e--)if(_0x149967=_0xc92fe4[_0x49354e])_0x42659c=(_0x1bdf6b<0x3?_0x149967(_0x42659c):_0x1bdf6b>0x3?_0x149967(_0x5149a4,_0x50a8b7,_0x42659c):_0x149967(_0x5149a4,_0x50a8b7))||_0x42659c;}return _0x1bdf6b>0x3&&_0x42659c&&Object[_0x19eb4e(0xeb)](_0x5149a4,_0x50a8b7,_0x42659c),_0x42659c;},__importStar=this&&this['__importStar']||function(_0x3ec539){const _0x1eafd7=a148_0x23cd7a;if(_0x3ec539&&_0x3ec539[_0x1eafd7(0xd1)])return _0x3ec539;var _0x2e138d={};if(_0x3ec539!=null){for(var _0x5efcdd in _0x3ec539)if(_0x5efcdd!==_0x1eafd7(0xdc)&&Object['prototype'][_0x1eafd7(0xae)][_0x1eafd7(0xab)](_0x3ec539,_0x5efcdd))__createBinding(_0x2e138d,_0x3ec539,_0x5efcdd);}return __setModuleDefault(_0x2e138d,_0x3ec539),_0x2e138d;},__metadata=this&&this[a148_0x23cd7a(0xec)]||function(_0x48e245,_0x5b1e47){const _0x4c13ac=a148_0x23cd7a;if(typeof Reflect===_0x4c13ac(0xa2)&&typeof Reflect[_0x4c13ac(0xcf)]===_0x4c13ac(0x98))return Reflect[_0x4c13ac(0xcf)](_0x48e245,_0x5b1e47);},FlosumSyncJob_1;Object[a148_0x23cd7a(0xeb)](exports,a148_0x23cd7a(0xd1),{'value':!![]}),exports[a148_0x23cd7a(0xb6)]=void 0x0;const constants_1=require(a148_0x23cd7a(0xb4)),typedi_1=__importStar(require('typedi')),core_1=require(a148_0x23cd7a(0xb2)),too_many_requests_error_1=require('../../../core/errors/too-many-requests.error'),salesforce_error_1=require('../../salesforce/errors/salesforce.error'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a148_0x23cd7a(0x9b)),git_provider_manager_1=require(a148_0x23cd7a(0xa9)),utils_1=require('../../shared/utils'),sync_job_1=require(a148_0x23cd7a(0xa1)),logger=new core_1[(a148_0x23cd7a(0xa3))](a148_0x23cd7a(0xa5));let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x1036ae,_0x39bd76,_0x452169){const _0x4000b2=a148_0x23cd7a;this[_0x4000b2(0xe3)]=_0x1036ae,this[_0x4000b2(0xe6)]=_0x39bd76,this[_0x4000b2(0x96)]=_0x452169,this['repoService']=this[_0x4000b2(0x96)][_0x4000b2(0xda)](),this[_0x4000b2(0xd4)]={};}async[a148_0x23cd7a(0xbe)](_0x3fe046,_0x2d1a72){const _0x12c023=a148_0x23cd7a;if(_0x2d1a72 instanceof too_many_requests_error_1[_0x12c023(0xdd)]){await this[_0x12c023(0xe6)][_0x12c023(0xed)](_0x3fe046,_0x12c023(0xb9));throw _0x2d1a72;}try{this[_0x12c023(0xe1)][_0x12c023(0xf2)](_0x12c023(0xe8)+_0x3fe046[_0x12c023(0xc5)]+_0x12c023(0xb8)+_0x3fe046['branchName']+_0x12c023(0xee)+_0x2d1a72),await this[_0x12c023(0xe1)][_0x12c023(0xcb)](),await this['salesforceSync']['updateRemoteState'](_0x3fe046,{}),await this['salesforceSync'][_0x12c023(0xed)](_0x3fe046,'Error');}catch(_0x1d87aa){if(_0x1d87aa instanceof salesforce_error_1[_0x12c023(0xaf)])throw _0x1d87aa;}}async[a148_0x23cd7a(0x9c)](_0x4b8cf5){const _0xd5e884=a148_0x23cd7a;if(_0x4b8cf5['repositoryId']){const _0x2f90ab=_0x4b8cf5['repositoryName'][_0xd5e884(0x9a)](),_0x1917b4=this['repositoriesIntersections'][_0x2f90ab];if(!_0x1917b4)this[_0xd5e884(0xd4)][_0x2f90ab]=_0x4b8cf5['repositoryName'];else{if(_0x1917b4&&_0x1917b4!==_0x4b8cf5[_0xd5e884(0xc5)])return await this[_0xd5e884(0xbe)](_0x4b8cf5,new Error(_0xd5e884(0xbd)+_0x4b8cf5[_0xd5e884(0xc5)]+_0xd5e884(0xb7)+_0x2f90ab+_0xd5e884(0xd9)+_0x1917b4+'\x27')),!![];}}return![];}async['checkValidNaming'](_0x34a6bf){const _0x21fa6e=a148_0x23cd7a;if(!constants_1[_0x21fa6e(0xd0)][_0x21fa6e(0xdb)](_0x34a6bf[_0x21fa6e(0xc5)]))return await this[_0x21fa6e(0xbe)](_0x34a6bf,new Error(_0x21fa6e(0xbd)+_0x34a6bf[_0x21fa6e(0xc5)]+_0x21fa6e(0xd7))),![];if(!constants_1[_0x21fa6e(0xcc)]['test'](_0x34a6bf['branchName']))return await this['handleRecordSyncError'](_0x34a6bf,new Error(_0x21fa6e(0xa7)+_0x34a6bf[_0x21fa6e(0xc4)]+_0x21fa6e(0xd3)+_0x34a6bf[_0x21fa6e(0xc5)]+_0x21fa6e(0xca))),![];return!![];}async[a148_0x23cd7a(0xbb)](_0x42a6b3,_0x601695){const _0x171a63=a148_0x23cd7a;this[_0x171a63(0xe3)][_0x171a63(0xc2)](_0x601695),this[_0x171a63(0xe1)]=this[_0x171a63(0xe3)][_0x171a63(0xc6)]();try{this['logger']['log'](_0x171a63(0xa4)),await this[_0x171a63(0xe1)]['send']();const [_0x34daf5,_0x2e06c7]=await Promise[_0x171a63(0x99)]([this[_0x171a63(0xe6)][_0x171a63(0xe4)](),this[_0x171a63(0xe6)][_0x171a63(0x9d)]()]),_0x3bbd12=await this[_0x171a63(0xa6)][_0x171a63(0xa0)](),_0x121e78=[..._0x2e06c7,..._0x34daf5];logger['log'](_0x171a63(0xf1),_0x121e78[_0x171a63(0xc0)]);for(const _0x40a7c1 of _0x121e78){const _0x1cb7d0=typedi_1[_0x171a63(0xdc)][_0x171a63(0xc3)](sync_job_1[_0x171a63(0xa8)]);logger[_0x171a63(0xf2)](_0x171a63(0xe2),_0x40a7c1[_0x171a63(0xc5)],_0x40a7c1[_0x171a63(0xea)],_0x40a7c1[_0x171a63(0xc4)],_0x40a7c1[_0x171a63(0xe9)]);const _0x1b679a=await this[_0x171a63(0xde)](_0x40a7c1);if(!_0x1b679a)continue;const _0x5ba49e=await this['isIntersects'](_0x40a7c1);if(_0x5ba49e)continue;const _0x1103cb=_0x3bbd12['find'](_0x2e76aa=>_0x2e76aa[_0x171a63(0xbf)]===_0x40a7c1[_0x171a63(0xc5)]);await _0x1cb7d0[_0x171a63(0xbb)]({'repository':_0x1103cb,'convertToSFDX':_0x42a6b3[_0x171a63(0x97)],'loggerId':_0x601695,'syncRecord':_0x40a7c1})[_0x171a63(0xe5)](_0x3290fc=>this[_0x171a63(0xbe)](_0x40a7c1,_0x3290fc));}}catch(_0x116783){logger[_0x171a63(0xb5)](_0x116783);if(_0x116783 instanceof too_many_requests_error_1['TooManyRequests']){this['logger'][_0x171a63(0xf2)]('[ERROR]\x20Stop\x20sync\x20job\x20due\x20error\x20-\x20Rate\x20limit\x20quota\x20for\x20git\x20service\x20exceeded.\x20Wait\x20for\x201h\x20to\x20continue;'),await this[_0x171a63(0xe1)]['send']()[_0x171a63(0xe5)](()=>void 0x0),await(0x0,utils_1[_0x171a63(0xcd)])(0x3c*0x3c*0x3e8);const _0x1e57e9=typedi_1['default'][_0x171a63(0xc3)](FlosumSyncJob_1);_0x1e57e9[_0x171a63(0xbb)](_0x42a6b3,_0x601695);}else this[_0x171a63(0xe1)]['log'](_0x171a63(0xef)+_0x116783),await this[_0x171a63(0xe1)][_0x171a63(0xcb)]()[_0x171a63(0xe5)](()=>void 0x0);return;}this[_0x171a63(0xe1)][_0x171a63(0xf2)](_0x171a63(0xd8)),await this['logger'][_0x171a63(0xcb)](),await this['salesforceSync'][_0x171a63(0xba)](_0x42a6b3['syncID'])[_0x171a63(0xe5)](()=>null);}};FlosumSyncJob=FlosumSyncJob_1=__decorate([(0x0,typedi_1[a148_0x23cd7a(0xb0)])({'transient':!![]}),__metadata(a148_0x23cd7a(0xd6),[salesforce_service_1[a148_0x23cd7a(0xd2)],salesforce_sync_service_1[a148_0x23cd7a(0xb3)],git_provider_manager_1['GitProviderManager']])],FlosumSyncJob),exports[a148_0x23cd7a(0xb6)]=FlosumSyncJob;