const a181_0x54fb6c=a181_0x1470;(function(_0x1f1bc0,_0x1ded1c){const _0x51c0a4=a181_0x1470,_0x39fe2d=_0x1f1bc0();while(!![]){try{const _0x15aec8=-parseInt(_0x51c0a4(0xc4))/0x1+parseInt(_0x51c0a4(0xd5))/0x2+-parseInt(_0x51c0a4(0xcb))/0x3*(-parseInt(_0x51c0a4(0x9f))/0x4)+parseInt(_0x51c0a4(0xbe))/0x5+-parseInt(_0x51c0a4(0x86))/0x6*(-parseInt(_0x51c0a4(0xa6))/0x7)+parseInt(_0x51c0a4(0x83))/0x8*(parseInt(_0x51c0a4(0xa7))/0x9)+parseInt(_0x51c0a4(0x90))/0xa*(-parseInt(_0x51c0a4(0x9b))/0xb);if(_0x15aec8===_0x1ded1c)break;else _0x39fe2d['push'](_0x39fe2d['shift']());}catch(_0x18188f){_0x39fe2d['push'](_0x39fe2d['shift']());}}}(a181_0x4dd7,0xa17d0));const a181_0x2ac46f=function(){let _0x594dd0=!![];return function(_0xcdb857,_0x2b706b){const _0x261fbd=_0x594dd0?function(){const _0x3843b6=a181_0x1470;if(_0x2b706b){const _0x24f5ba=_0x2b706b[_0x3843b6(0x88)](_0xcdb857,arguments);return _0x2b706b=null,_0x24f5ba;}}:function(){};return _0x594dd0=![],_0x261fbd;};}(),a181_0x58aaa5=a181_0x2ac46f(this,function(){const _0x4434f2=a181_0x1470;return a181_0x58aaa5[_0x4434f2(0x80)]()[_0x4434f2(0x93)](_0x4434f2(0x8b))[_0x4434f2(0x80)]()['constructor'](a181_0x58aaa5)['search'](_0x4434f2(0x8b));});a181_0x58aaa5();function a181_0x1470(_0x3ccf30,_0x44db3d){const _0x3c35e7=a181_0x4dd7();return a181_0x1470=function(_0x58aaa5,_0x2ac46f){_0x58aaa5=_0x58aaa5-0x80;let _0x4dd7ea=_0x3c35e7[_0x58aaa5];return _0x4dd7ea;},a181_0x1470(_0x3ccf30,_0x44db3d);}'use strict';function a181_0x4dd7(){const _0x536a70=['SalesforceSyncService','42lHduiD','\x20[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','apply','defineProperty','[INFO]\x20Start\x20sync\x20job','(((.+)+)+)+$','getRemoteStateAttachmentId','../../salesforce/services/salesforce-retriever.service','sfLogger','catch','13339470iIbPVl','createBranchIfNotExists','__decorate','search','syncData','branchName','getComponents','log','send','branch','updateRemoteState','22NLCUns','message','../../../constants','../dto/commit-components.dto','463264QTGBlY','getBranchComponents','salesforceSync','getComponentsFromRepository','[INFO]\x20Sync\x20job\x20done.','FlosumSyncJob','checkSyncStatus','757134khwcEs','303426HQrZEx','name','metadata','repository','Logger','getComponentIds','string','gitUrl','sha','getCommitDto','[INFO]\x20Update\x20remote\x20state.','typedi','setStatus',']\x20[Branch:\x20','DEFAULT_GIT_USER_NAME','DEFAULT_GIT_USER_EMAIL','Completed','convertToSFDX','repo','branches','lastCommit','retrieveAttachment','design:paramtypes','5654810tIQQCJ','Sync\x20repository','../../salesforce/services/salesforce.service','salesforceService','object','In\x20Progress','614505wcpFNF','repositoryId','SalesforceService','getPrefix','[FLOSUM\x20->\x20GIT]\x20[Repository:\x20','__esModule','length','6vRJIRV','Service','getOne','components','updateLastCommit','CommitComponentsDto','function','SalesforceRetrieverService','run','../../salesforce/services/salesforce-sync.service','1288274tDQjfb','decorate','repositoryName','parse','getOwnPropertyDescriptor','[INFO]\x20Branch\x20synchronized.\x20Skip','toString','create','provider','280MViHlz','commitJob'];a181_0x4dd7=function(){return _0x536a70;};return a181_0x4dd7();}var __decorate=this&&this[a181_0x54fb6c(0x92)]||function(_0x2d91a7,_0x28ab6a,_0xa3ccdb,_0x19362a){const _0x30e16f=a181_0x54fb6c;var _0x16b2ac=arguments[_0x30e16f(0xca)],_0x5ba886=_0x16b2ac<0x3?_0x28ab6a:_0x19362a===null?_0x19362a=Object[_0x30e16f(0xd9)](_0x28ab6a,_0xa3ccdb):_0x19362a,_0x452aff;if(typeof Reflect===_0x30e16f(0xc2)&&typeof Reflect[_0x30e16f(0xd6)]==='function')_0x5ba886=Reflect[_0x30e16f(0xd6)](_0x2d91a7,_0x28ab6a,_0xa3ccdb,_0x19362a);else{for(var _0x100aa4=_0x2d91a7[_0x30e16f(0xca)]-0x1;_0x100aa4>=0x0;_0x100aa4--)if(_0x452aff=_0x2d91a7[_0x100aa4])_0x5ba886=(_0x16b2ac<0x3?_0x452aff(_0x5ba886):_0x16b2ac>0x3?_0x452aff(_0x28ab6a,_0xa3ccdb,_0x5ba886):_0x452aff(_0x28ab6a,_0xa3ccdb))||_0x5ba886;}return _0x16b2ac>0x3&&_0x5ba886&&Object['defineProperty'](_0x28ab6a,_0xa3ccdb,_0x5ba886),_0x5ba886;},__metadata=this&&this['__metadata']||function(_0x3d898b,_0x43ca2d){const _0x4b9a63=a181_0x54fb6c;if(typeof Reflect===_0x4b9a63(0xc2)&&typeof Reflect[_0x4b9a63(0xa9)]===_0x4b9a63(0xd1))return Reflect['metadata'](_0x3d898b,_0x43ca2d);},FlosumSyncJob_1;Object[a181_0x54fb6c(0x89)](exports,a181_0x54fb6c(0xc9),{'value':!![]}),exports[a181_0x54fb6c(0xa4)]=void 0x0;const core_1=require('../../../core'),salesforce_logger_v2_service_1=require('../../salesforce/services/salesforce-logger-v2.service'),typedi_1=require(a181_0x54fb6c(0xb2)),constants_1=require(a181_0x54fb6c(0x9d)),salesforce_retriever_service_1=require(a181_0x54fb6c(0x8d)),salesforce_sync_service_1=require(a181_0x54fb6c(0xd4)),salesforce_service_1=require(a181_0x54fb6c(0xc0)),commit_components_dto_1=require(a181_0x54fb6c(0x9e)),commit_components_job_1=require('./commit-components.job');let FlosumSyncJob=FlosumSyncJob_1=class FlosumSyncJob{constructor(_0x24789b,_0x1f6f0c,_0x559abd){const _0x335a3c=a181_0x54fb6c;this['salesforceSync']=_0x24789b,this[_0x335a3c(0xc1)]=_0x1f6f0c,this[_0x335a3c(0x84)]=_0x559abd,this['logger']=new core_1[(_0x335a3c(0xab))](FlosumSyncJob_1['name']);}['log'](_0x5a226d){const _0x30f9eb=a181_0x54fb6c;return this['sfLogger'][_0x30f9eb(0x97)](_0x30f9eb(0xc8)+this[_0x30f9eb(0x94)][_0x30f9eb(0xd7)]+']\x20[Branch:\x20'+this['syncData'][_0x30f9eb(0x95)]+']\x20'+_0x5a226d);}async[a181_0x54fb6c(0x91)](){const _0xbb5fa0=a181_0x54fb6c;let _0x455c94=await this[_0xbb5fa0(0xaa)][_0xbb5fa0(0xba)][_0xbb5fa0(0xcd)](this[_0xbb5fa0(0x94)]['branchName'])[_0xbb5fa0(0x8f)](()=>null);!_0x455c94&&(_0x455c94=await this[_0xbb5fa0(0xaa)]['branches'][_0xbb5fa0(0x81)]({'name':this[_0xbb5fa0(0x94)][_0xbb5fa0(0x95)]})),this['branch']=_0x455c94;}async[a181_0x54fb6c(0xac)](){const _0x552e02=a181_0x54fb6c;return this[_0x552e02(0x94)][_0x552e02(0xc5)]?this['salesforceSync'][_0x552e02(0xa2)](this[_0x552e02(0x94)][_0x552e02(0xc5)]):this[_0x552e02(0xa1)][_0x552e02(0xa0)](this['syncData']['branchId']);}async[a181_0x54fb6c(0x96)](){const _0x28ce9f=a181_0x54fb6c,_0x21dc53=await this['getComponentIds'](),_0x260cec=new salesforce_retriever_service_1[(_0x28ce9f(0xd2))](this[_0x28ce9f(0xc1)]),_0xaaac87=await _0x260cec['run'](_0x21dc53);return _0xaaac87;}async[a181_0x54fb6c(0xb0)](_0x1c7acb){const _0x53cf5c=a181_0x54fb6c,_0x5ef382=new commit_components_dto_1[(_0x53cf5c(0xd0))]();return _0x5ef382[_0x53cf5c(0x9c)]=_0x53cf5c(0xbf),_0x5ef382['user']={'name':constants_1[_0x53cf5c(0xb5)],'email':constants_1[_0x53cf5c(0xb6)]},_0x5ef382[_0x53cf5c(0xce)]={'writed':await this[_0x53cf5c(0x96)]()},_0x5ef382[_0x53cf5c(0xb8)]=_0x1c7acb,_0x5ef382[_0x53cf5c(0xb9)]=this[_0x53cf5c(0xaa)],_0x5ef382[_0x53cf5c(0x99)]=this[_0x53cf5c(0x99)],_0x5ef382['force']=!![],_0x5ef382[_0x53cf5c(0x82)]=this[_0x53cf5c(0x82)],_0x5ef382;}async[a181_0x54fb6c(0xa5)](){const _0x17d108=a181_0x54fb6c,_0xfc7cef=await this[_0x17d108(0xa1)][_0x17d108(0x8c)](this[_0x17d108(0x94)]),_0x48f675=await this['salesforceService'][_0x17d108(0xbc)](_0xfc7cef)['then'](_0x1103f6=>typeof _0x1103f6===_0x17d108(0xad)?JSON[_0x17d108(0xd8)](_0x1103f6):_0x1103f6)[_0x17d108(0x8f)](()=>({}));if(_0x48f675[this[_0x17d108(0xaa)]['gitUrl']]){if(_0x48f675[this[_0x17d108(0xaa)]['gitUrl']][_0x17d108(0xbb)]===this['branch'][_0x17d108(0xaf)])return!![];}return![];}async['updateLastCommit'](){const _0x2d9737=a181_0x54fb6c,_0x582acf=await this[_0x2d9737(0xaa)][_0x2d9737(0xba)][_0x2d9737(0xcd)](this[_0x2d9737(0x99)][_0x2d9737(0xa8)]);await this[_0x2d9737(0x97)](_0x2d9737(0xb1));const _0x1adef1={[this['repository'][_0x2d9737(0xae)]]:{'lastCommit':_0x582acf['sha']}};await this[_0x2d9737(0xa1)][_0x2d9737(0x9a)](this[_0x2d9737(0x94)],_0x1adef1);}async[a181_0x54fb6c(0xd3)]({syncRecord:_0x1503dd,repository:_0x1ba2aa,logger:_0x140cd7,convertToSFDX:_0x2815bc,provider:_0x714e52}){const _0x50a99a=a181_0x54fb6c;this[_0x50a99a(0x94)]=_0x1503dd,this['provider']=_0x714e52,this[_0x50a99a(0xaa)]=_0x1ba2aa,this[_0x50a99a(0x8e)]=new salesforce_logger_v2_service_1['SalesforceLogger2'](_0x140cd7['getLoggerId'](),_0x140cd7[_0x50a99a(0xc7)]()+_0x50a99a(0x87)+this[_0x50a99a(0x94)][_0x50a99a(0xd7)]+_0x50a99a(0xb4)+this['syncData']['branchName']+']');try{await this[_0x50a99a(0xa1)]['setStatus'](this[_0x50a99a(0x94)],_0x50a99a(0xc3)),this[_0x50a99a(0x97)](_0x50a99a(0x8a)),await this[_0x50a99a(0x91)]();const _0x407542=await this[_0x50a99a(0xa5)]();if(_0x407542){await this[_0x50a99a(0xa1)][_0x50a99a(0xb3)](this[_0x50a99a(0x94)],_0x50a99a(0xb7)),await this[_0x50a99a(0x97)](_0x50a99a(0xda))[_0x50a99a(0x98)]();return;}const _0x269f95=await this[_0x50a99a(0xb0)](_0x2815bc);await this[_0x50a99a(0x84)][_0x50a99a(0xd3)](_0x269f95,this[_0x50a99a(0x8e)]),await this[_0x50a99a(0xa1)][_0x50a99a(0xb3)](this[_0x50a99a(0x94)],'Completed'),await this[_0x50a99a(0xcf)](),this[_0x50a99a(0x97)](_0x50a99a(0xa3));}catch(_0x430fd9){throw _0x430fd9;}finally{await this[_0x50a99a(0x8e)][_0x50a99a(0x98)]();}}};FlosumSyncJob=FlosumSyncJob_1=__decorate([typedi_1[a181_0x54fb6c(0xcc)]({'transient':!![]}),__metadata(a181_0x54fb6c(0xbd),[salesforce_sync_service_1[a181_0x54fb6c(0x85)],salesforce_service_1[a181_0x54fb6c(0xc6)],commit_components_job_1['CommitComponentsJob']])],FlosumSyncJob),exports['FlosumSyncJob']=FlosumSyncJob;