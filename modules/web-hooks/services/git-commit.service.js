const a185_0x24a0a6=a185_0x4370;(function(_0x30641b,_0x373952){const _0x7685b2=a185_0x4370,_0x54a9ba=_0x30641b();while(!![]){try{const _0x3b4435=parseInt(_0x7685b2(0x10b))/0x1*(-parseInt(_0x7685b2(0x13d))/0x2)+-parseInt(_0x7685b2(0x151))/0x3*(-parseInt(_0x7685b2(0x102))/0x4)+-parseInt(_0x7685b2(0x10a))/0x5*(parseInt(_0x7685b2(0x14f))/0x6)+-parseInt(_0x7685b2(0x105))/0x7+parseInt(_0x7685b2(0x12d))/0x8+parseInt(_0x7685b2(0x140))/0x9*(parseInt(_0x7685b2(0x13a))/0xa)+-parseInt(_0x7685b2(0x104))/0xb*(-parseInt(_0x7685b2(0x101))/0xc);if(_0x3b4435===_0x373952)break;else _0x54a9ba['push'](_0x54a9ba['shift']());}catch(_0x4416a3){_0x54a9ba['push'](_0x54a9ba['shift']());}}}(a185_0x3b2c,0x3b9e8));const a185_0x46bdd2=function(){let _0x36aba4=!![];return function(_0x5d68ee,_0x246f9e){const _0x2d3f74=_0x36aba4?function(){const _0x326489=a185_0x4370;if(_0x246f9e){const _0x51a870=_0x246f9e[_0x326489(0x138)](_0x5d68ee,arguments);return _0x246f9e=null,_0x51a870;}}:function(){};return _0x36aba4=![],_0x2d3f74;};}(),a185_0x516276=a185_0x46bdd2(this,function(){const _0x19b36c=a185_0x4370;return a185_0x516276[_0x19b36c(0x108)]()[_0x19b36c(0x11d)](_0x19b36c(0xf9))['toString']()[_0x19b36c(0x117)](a185_0x516276)[_0x19b36c(0x11d)]('(((.+)+)+)+$');});a185_0x516276();function a185_0x4370(_0x49bf4b,_0x4cd56d){const _0x210551=a185_0x3b2c();return a185_0x4370=function(_0x516276,_0x46bdd2){_0x516276=_0x516276-0xed;let _0x3b2c1a=_0x210551[_0x516276];return _0x3b2c1a;},a185_0x4370(_0x49bf4b,_0x4cd56d);}'use strict';var __decorate=this&&this[a185_0x24a0a6(0x13c)]||function(_0x1201fb,_0x274dd7,_0x5d0935,_0x3c5e99){const _0x546f95=a185_0x24a0a6;var _0x3c53e5=arguments[_0x546f95(0xfa)],_0x169425=_0x3c53e5<0x3?_0x274dd7:_0x3c5e99===null?_0x3c5e99=Object[_0x546f95(0xfb)](_0x274dd7,_0x5d0935):_0x3c5e99,_0x686a02;if(typeof Reflect==='object'&&typeof Reflect[_0x546f95(0x12a)]===_0x546f95(0xf0))_0x169425=Reflect[_0x546f95(0x12a)](_0x1201fb,_0x274dd7,_0x5d0935,_0x3c5e99);else{for(var _0x4d6aca=_0x1201fb['length']-0x1;_0x4d6aca>=0x0;_0x4d6aca--)if(_0x686a02=_0x1201fb[_0x4d6aca])_0x169425=(_0x3c53e5<0x3?_0x686a02(_0x169425):_0x3c53e5>0x3?_0x686a02(_0x274dd7,_0x5d0935,_0x169425):_0x686a02(_0x274dd7,_0x5d0935))||_0x169425;}return _0x3c53e5>0x3&&_0x169425&&Object[_0x546f95(0x144)](_0x274dd7,_0x5d0935,_0x169425),_0x169425;},__metadata=this&&this[a185_0x24a0a6(0x13b)]||function(_0x5b05fd,_0x4256c0){const _0x3d0505=a185_0x24a0a6;if(typeof Reflect===_0x3d0505(0x111)&&typeof Reflect[_0x3d0505(0xfe)]==='function')return Reflect['metadata'](_0x5b05fd,_0x4256c0);},GitCommitService_1;function a185_0x3b2c(){const _0x3d2b71=['lastCommit','proceeding\x20commit\x20%s','join','Logger','apply','fetchBranchComponents','1070vFkHXp','__metadata','__decorate','26986UXapMu','fileName','updateStatus','3429qqEeiK','crc32','salesforceRest','string','defineProperty','syncRecord','fetchComponentsMetadata','setCommitDto','../utils/git-commit.utils','username','branch','design:paramtypes','push','getRecordTypes','salesforceSync','105918vSCnmg','fetchRepositoryComponentsByFilenames','3MmlYQK','salesforce','../../../core','message','recordTypes','function','filter','catch','name','components\x20that\x20will\x20be\x20deleted\x20%s','Synchronization_Status__c','component','getBranchId','__esModule','(((.+)+)+)+$','length','getOwnPropertyDescriptor','SalesforceRestService','GitCommitService','metadata','patch','../../../constants','237156AJcwDT','278836EpPBiy','log','319FziZxm','1370593JIQGMt','FLOSUM_BRANCH','files','toString','getComponentRecordTypes','45OyLgwK','23LGhSRk','repositoryId','updateRemoteState','SalesforceGitSyncService','componentsMetadata','MDApiParser','object','FLOSUM_REPOSITORY','force','SalesforceService','files\x20will\x20be\x20proceeded:\x20%s','salesforceGitSync','constructor','splice','repositoryGit','repository','components\x20that\x20will\x20be\x20created\x20%s','../../salesforce/services/salesforce-git-sync.service','search','logger','parse','find','getBranchRecordByName','../../salesforce/services/salesforce.service','TASKS_PER_TICK','../../salesforce/services/salesforce-rest.service','FLOSUM_GIT_NAMESPACE','prepareGitChangedPaths','gitCommit','branchId','../../parsers/mdapi/parser','decorate','type','then','1804896jPaZjA','getRepositoryId','getRepositoryRecordByName','fileNames','map','fetchRepositoryComponents','crc'];a185_0x3b2c=function(){return _0x3d2b71;};return a185_0x3b2c();}Object[a185_0x24a0a6(0x144)](exports,a185_0x24a0a6(0xf8),{'value':!![]}),exports[a185_0x24a0a6(0xfd)]=void 0x0;const constants_1=require(a185_0x24a0a6(0x100)),core_1=require(a185_0x24a0a6(0xed)),parser_1=require(a185_0x24a0a6(0x129)),salesforce_git_sync_service_1=require(a185_0x24a0a6(0x11c)),salesforce_rest_service_1=require(a185_0x24a0a6(0x124)),typedi_1=require('typedi'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),salesforce_service_1=require(a185_0x24a0a6(0x122)),git_commit_utils_1=require(a185_0x24a0a6(0x148));let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x458ef7,_0x4695c2,_0x455139,_0xf531aa){const _0x31be3a=a185_0x24a0a6;this[_0x31be3a(0x116)]=_0x458ef7,this[_0x31be3a(0x142)]=_0x4695c2,this[_0x31be3a(0x14e)]=_0x455139,this['salesforce']=_0xf531aa,this[_0x31be3a(0x123)]=0xc8,this[_0x31be3a(0x11e)]=new core_1[(_0x31be3a(0x137))](GitCommitService_1[_0x31be3a(0xf3)]);}get['repositoryId'](){const _0x2cd404=a185_0x24a0a6;var _0x42dcb0;return((_0x42dcb0=this['syncRecord'])===null||_0x42dcb0===void 0x0?void 0x0:_0x42dcb0[_0x2cd404(0x10c)])||'';}get[a185_0x24a0a6(0x128)](){const _0x6168b8=a185_0x24a0a6;var _0x1ab266;return((_0x1ab266=this['syncRecord'])===null||_0x1ab266===void 0x0?void 0x0:_0x1ab266[_0x6168b8(0x128)])||'';}async['checkSyncStatus'](_0x1055db){const _0x3b0ca0=a185_0x24a0a6;if(this[_0x3b0ca0(0x145)]){const _0x3a22f4=await this['salesforceSync']['getRemoteStateAttachmentId'](this['syncRecord']),_0x1df149=await this[_0x3b0ca0(0x152)]['retrieveAttachment'](_0x3a22f4)[_0x3b0ca0(0x12c)](_0x411b84=>typeof _0x411b84===_0x3b0ca0(0x143)?JSON[_0x3b0ca0(0x11f)](_0x411b84):_0x411b84)[_0x3b0ca0(0xf2)](()=>({}));if(_0x1df149[this['gitCommit'][_0x3b0ca0(0x119)]]){if(_0x1df149[this['gitCommit'][_0x3b0ca0(0x119)]][_0x3b0ca0(0x134)]===_0x1055db)return!![];}return![];}return![];}async[a185_0x24a0a6(0x10d)](_0x14e9e8){const _0x3653fe=a185_0x24a0a6;this[_0x3653fe(0x145)]&&await this[_0x3653fe(0x14e)]['updateRemoteState'](this[_0x3653fe(0x145)],_0x14e9e8);}async['proceedGitCommit'](_0x13f9c4,_0x3050ef){const _0x1ee9b7=a185_0x24a0a6;this[_0x1ee9b7(0x11e)][_0x1ee9b7(0x103)](_0x1ee9b7(0x135),_0x13f9c4['id']);const {added:_0x2541db,modified:_0x3d4a8e,removed:_0xec47b0}=_0x13f9c4[_0x1ee9b7(0x107)],_0xd85e2f=git_commit_utils_1[_0x1ee9b7(0x126)]([..._0x2541db,..._0x3d4a8e]),_0xb46251=[..._0xd85e2f,..._0xec47b0];this['logger'][_0x1ee9b7(0x103)](_0x1ee9b7(0x115),_0xb46251[_0x1ee9b7(0x136)](',\x20'));const _0x42a90b=[],_0x13a7ce=[],_0x4987f1=this['componentsMetadata'][_0x1ee9b7(0xf1)](_0x503dd3=>!!_0xb46251['find'](_0x1324ad=>git_commit_utils_1['isPathsEquals'](_0x503dd3[_0x1ee9b7(0x13e)],_0x1324ad))),_0x423e85=[];while(_0xd85e2f[_0x1ee9b7(0xfa)]){const _0x4dde42=_0xd85e2f[_0x1ee9b7(0x118)](0x0,this[_0x1ee9b7(0x123)]),_0x41f6dd=new parser_1[(_0x1ee9b7(0x110))](_0x3050ef,_0x4dde42),_0x583f5a=await _0x41f6dd[_0x1ee9b7(0x11f)](),_0x1309b2=_0x583f5a[_0x1ee9b7(0x131)](_0x40c0ef=>{const _0x353a1e=_0x1ee9b7,_0x16cdc6=_0x4987f1[_0x353a1e(0x120)](_0x42fbf3=>_0x42fbf3[_0x353a1e(0xf3)]===_0x40c0ef[_0x353a1e(0xf3)]&&_0x42fbf3[_0x353a1e(0x12b)]===_0x40c0ef[_0x353a1e(0x12b)]);if(!_0x16cdc6){const _0x4ae1a6={'crc32':_0x40c0ef[_0x353a1e(0x133)],'fileName':_0x40c0ef['filePath'],'id':null,'version':0x1,'name':_0x40c0ef[_0x353a1e(0xf3)],'type':_0x40c0ef['type']};return this['componentsMetadata'][_0x353a1e(0x14c)](_0x4ae1a6),_0x4987f1[_0x353a1e(0x14c)](_0x4ae1a6),_0x423e85[_0x353a1e(0x14c)](_0x4ae1a6),_0x13a7ce[_0x353a1e(0x14c)](_0x40c0ef),null;}_0x423e85[_0x353a1e(0x14c)](_0x16cdc6);if(_0x40c0ef['crc']===_0x16cdc6[_0x353a1e(0x141)])return null;return{'component':_0x40c0ef,'meta':_0x16cdc6};})[_0x1ee9b7(0xf1)](_0x29fb9c=>!!_0x29fb9c);_0x42a90b[_0x1ee9b7(0x14c)](..._0x1309b2);}const _0x120164=_0x4987f1[_0x1ee9b7(0xf1)](_0x510117=>!_0x423e85['includes'](_0x510117));return this[_0x1ee9b7(0x10f)]=this[_0x1ee9b7(0x10f)][_0x1ee9b7(0xf1)](_0x280ee2=>!_0x120164['includes'](_0x280ee2)),this[_0x1ee9b7(0x127)]['force']&&_0x120164[_0x1ee9b7(0x14c)](...this[_0x1ee9b7(0x10f)]),this[_0x1ee9b7(0x11e)]['log'](_0x1ee9b7(0x11b),_0x13a7ce[_0x1ee9b7(0x131)](_0x48a2f1=>'\x27'+_0x48a2f1[_0x1ee9b7(0xf3)]+'\x27')[_0x1ee9b7(0x136)](',\x20')),this[_0x1ee9b7(0x11e)][_0x1ee9b7(0x103)]('components\x20that\x20will\x20be\x20updated\x20%s',_0x42a90b[_0x1ee9b7(0x131)](_0x172cde=>'\x27'+_0x172cde[_0x1ee9b7(0xf6)][_0x1ee9b7(0xf3)]+'\x27')[_0x1ee9b7(0x136)](',\x20')),this['logger'][_0x1ee9b7(0x103)](_0x1ee9b7(0xf4),_0x120164[_0x1ee9b7(0x131)](_0x2d1ca2=>'\x27'+_0x2d1ca2[_0x1ee9b7(0xf3)]+'\x27')[_0x1ee9b7(0x136)](',\x20')),{'author':_0x13f9c4[_0x1ee9b7(0x149)],'message':_0x13f9c4[_0x1ee9b7(0xee)],'inserted':_0x13a7ce,'modified':_0x42a90b,'removed':_0x120164[_0x1ee9b7(0x131)](_0x1e1ed1=>({'componentType':_0x1e1ed1[_0x1ee9b7(0x12b)],'componentName':_0x1e1ed1[_0x1ee9b7(0xf3)],'componentId':_0x1e1ed1['id']}))};}async['fetchRepositoryOrBranchData'](){const _0x1e9b0e=a185_0x24a0a6;this['syncRecord']=this[_0x1e9b0e(0x127)][_0x1e9b0e(0x14a)]==='master'?await this[_0x1e9b0e(0x14e)][_0x1e9b0e(0x12f)](this[_0x1e9b0e(0x127)][_0x1e9b0e(0x11a)]):await this[_0x1e9b0e(0x14e)][_0x1e9b0e(0x121)](this[_0x1e9b0e(0x127)][_0x1e9b0e(0x14a)]),this[_0x1e9b0e(0xef)]=await this['salesforceGitSync'][_0x1e9b0e(0x109)]();}async[a185_0x24a0a6(0x146)](_0x34b4cf){const _0x362a50=a185_0x24a0a6,_0x133e17=[...this['gitCommit'][_0x362a50(0x130)]];if(this[_0x362a50(0x127)][_0x362a50(0x113)]||_0x34b4cf){this[_0x362a50(0x10f)]=this[_0x362a50(0x128)]?await this[_0x362a50(0x116)][_0x362a50(0x139)](this[_0x362a50(0x128)]):await this[_0x362a50(0x116)][_0x362a50(0x132)](this['repositoryId']);return;}this[_0x362a50(0x10f)]=[];while(_0x133e17[_0x362a50(0xfa)]){const _0x55f766=_0x133e17['splice'](0x0,this[_0x362a50(0x123)]),_0x13e0c7=this[_0x362a50(0x128)]?await this[_0x362a50(0x116)]['fetchBranchComponentsByFilenames'](_0x55f766,this['branchId']):await this['salesforceGitSync'][_0x362a50(0x150)](_0x55f766,this[_0x362a50(0x10c)]);this[_0x362a50(0x10f)][_0x362a50(0x14c)](..._0x13e0c7);}}async[a185_0x24a0a6(0x13f)](_0x4c827b){const _0xca5e8f=a185_0x24a0a6;this[_0xca5e8f(0x128)]?await this[_0xca5e8f(0x142)]['patch'](constants_1[_0xca5e8f(0x106)],this['branchId'],{[constants_1[_0xca5e8f(0x125)]+_0xca5e8f(0xf5)]:_0x4c827b}):await this[_0xca5e8f(0x142)][_0xca5e8f(0xff)](constants_1[_0xca5e8f(0x112)],this[_0xca5e8f(0x10c)],{[constants_1[_0xca5e8f(0x125)]+_0xca5e8f(0xf5)]:_0x4c827b});}[a185_0x24a0a6(0x147)](_0xcb87e8){const _0x2030ee=a185_0x24a0a6;this[_0x2030ee(0x127)]=_0xcb87e8;}[a185_0x24a0a6(0x14d)](){const _0x7d2c91=a185_0x24a0a6;return this[_0x7d2c91(0xef)];}[a185_0x24a0a6(0x12e)](){return this['repositoryId'];}[a185_0x24a0a6(0xf7)](){const _0x210e10=a185_0x24a0a6;return this[_0x210e10(0x128)];}};GitCommitService=GitCommitService_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a185_0x24a0a6(0x14b),[salesforce_git_sync_service_1[a185_0x24a0a6(0x10e)],salesforce_rest_service_1[a185_0x24a0a6(0xfc)],salesforce_sync_service_1['SalesforceSyncService'],salesforce_service_1[a185_0x24a0a6(0x114)]])],GitCommitService),exports[a185_0x24a0a6(0xfd)]=GitCommitService;