const a178_0x523b60=a178_0x5324;(function(_0x38d4f2,_0x3608d2){const _0x48ad60=a178_0x5324,_0x5076bc=_0x38d4f2();while(!![]){try{const _0x12771d=parseInt(_0x48ad60(0x175))/0x1*(-parseInt(_0x48ad60(0x19e))/0x2)+-parseInt(_0x48ad60(0x184))/0x3+-parseInt(_0x48ad60(0x17b))/0x4*(parseInt(_0x48ad60(0x15e))/0x5)+parseInt(_0x48ad60(0x173))/0x6*(parseInt(_0x48ad60(0x19d))/0x7)+-parseInt(_0x48ad60(0x187))/0x8+-parseInt(_0x48ad60(0x17c))/0x9*(parseInt(_0x48ad60(0x1a9))/0xa)+parseInt(_0x48ad60(0x165))/0xb;if(_0x12771d===_0x3608d2)break;else _0x5076bc['push'](_0x5076bc['shift']());}catch(_0x8526f4){_0x5076bc['push'](_0x5076bc['shift']());}}}(a178_0x23c8,0x2155f));const a178_0x4af335=function(){let _0x25f95a=!![];return function(_0x864253,_0x269511){const _0x4cbd28=_0x25f95a?function(){const _0x35e9cd=a178_0x5324;if(_0x269511){const _0x3a85f0=_0x269511[_0x35e9cd(0x192)](_0x864253,arguments);return _0x269511=null,_0x3a85f0;}}:function(){};return _0x25f95a=![],_0x4cbd28;};}(),a178_0x1f3e6e=a178_0x4af335(this,function(){const _0x138f21=a178_0x5324;return a178_0x1f3e6e[_0x138f21(0x167)]()[_0x138f21(0x18a)](_0x138f21(0x16d))[_0x138f21(0x167)]()[_0x138f21(0x180)](a178_0x1f3e6e)[_0x138f21(0x18a)]('(((.+)+)+)+$');});a178_0x1f3e6e();'use strict';function a178_0x23c8(){const _0x2c0661=['60mZBbSI','defineProperty','getRecordTypes','filter','__decorate','component','components\x20that\x20will\x20be\x20deleted\x20%s','9636341FOPBZH','getBranchRecordByName','toString','logger','decorate','components\x20that\x20will\x20be\x20updated\x20%s','fetchBranchComponents','metadata','(((.+)+)+)+$','salesforceRest','length','join','function','getOwnPropertyDescriptor','78RSmvdw','componentsMetadata','171230nraMYs','filePath','salesforceSync','includes','find','crc32','58724NBblGm','1583694csYpLv','updateRemoteState','TASKS_PER_TICK','fetchRepositoryOrBranchData','constructor','parse','crc','MDApiParser','25707LrFUYb','type','fetchRepositoryComponents','1763472YCcszb','name','proceedGitCommit','search','getRepositoryRecordByName','getBranchId','fetchComponentsMetadata','design:paramtypes','splice','getComponentRecordTypes','push','apply','SalesforceGitSyncService','message','../../salesforce/services/salesforce-git-sync.service','username','recordTypes','components\x20that\x20will\x20be\x20created\x20%s','prepareGitChangedPaths','files','fetchBranchComponentsByFilenames','FLOSUM_REPOSITORY','6937yMgTfh','2JvnVuD','branch','branchId','../utils/git-commit.utils','FLOSUM_GIT_NAMESPACE','SalesforceSyncService','salesforceGitSync','proceeding\x20commit\x20%s','../../../constants','object','master','10OlCizW','repository','force','gitCommit','syncRecord','fileNames','map','patch','log','repositoryId','../../../core'];a178_0x23c8=function(){return _0x2c0661;};return a178_0x23c8();}var __decorate=this&&this[a178_0x523b60(0x162)]||function(_0x3f0e38,_0x4f75e9,_0x3d940e,_0x17e303){const _0x1d84c4=a178_0x523b60;var _0x4b843c=arguments[_0x1d84c4(0x16f)],_0x59ba51=_0x4b843c<0x3?_0x4f75e9:_0x17e303===null?_0x17e303=Object[_0x1d84c4(0x172)](_0x4f75e9,_0x3d940e):_0x17e303,_0x3a8cbf;if(typeof Reflect===_0x1d84c4(0x1a7)&&typeof Reflect[_0x1d84c4(0x169)]===_0x1d84c4(0x171))_0x59ba51=Reflect['decorate'](_0x3f0e38,_0x4f75e9,_0x3d940e,_0x17e303);else{for(var _0x140d4f=_0x3f0e38[_0x1d84c4(0x16f)]-0x1;_0x140d4f>=0x0;_0x140d4f--)if(_0x3a8cbf=_0x3f0e38[_0x140d4f])_0x59ba51=(_0x4b843c<0x3?_0x3a8cbf(_0x59ba51):_0x4b843c>0x3?_0x3a8cbf(_0x4f75e9,_0x3d940e,_0x59ba51):_0x3a8cbf(_0x4f75e9,_0x3d940e))||_0x59ba51;}return _0x4b843c>0x3&&_0x59ba51&&Object[_0x1d84c4(0x15f)](_0x4f75e9,_0x3d940e,_0x59ba51),_0x59ba51;},__metadata=this&&this['__metadata']||function(_0x44563c,_0x3c8e14){const _0x3d79a4=a178_0x523b60;if(typeof Reflect==='object'&&typeof Reflect[_0x3d79a4(0x16c)]==='function')return Reflect[_0x3d79a4(0x16c)](_0x44563c,_0x3c8e14);},GitCommitService_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['GitCommitService']=void 0x0;const constants_1=require(a178_0x523b60(0x1a6)),core_1=require(a178_0x523b60(0x15d)),parser_1=require('../../parsers/mdapi/parser'),salesforce_git_sync_service_1=require(a178_0x523b60(0x195)),salesforce_rest_service_1=require('../../salesforce/services/salesforce-rest.service'),typedi_1=require('typedi'),salesforce_sync_service_1=require('../../salesforce/services/salesforce-sync.service'),git_commit_utils_1=require(a178_0x523b60(0x1a1));let GitCommitService=GitCommitService_1=class GitCommitService{constructor(_0x35b62f,_0x1eee39,_0x5d9142){const _0x5c9865=a178_0x523b60;this[_0x5c9865(0x1a4)]=_0x35b62f,this[_0x5c9865(0x16e)]=_0x1eee39,this[_0x5c9865(0x177)]=_0x5d9142,this[_0x5c9865(0x17e)]=0xc8,this[_0x5c9865(0x168)]=new core_1['Logger'](GitCommitService_1[_0x5c9865(0x188)]);}get[a178_0x523b60(0x15c)](){const _0xb13ad8=a178_0x523b60;var _0x508dcf;return((_0x508dcf=this[_0xb13ad8(0x157)])===null||_0x508dcf===void 0x0?void 0x0:_0x508dcf[_0xb13ad8(0x15c)])||'';}get[a178_0x523b60(0x1a0)](){var _0x56da4a;return((_0x56da4a=this['syncRecord'])===null||_0x56da4a===void 0x0?void 0x0:_0x56da4a['branchId'])||'';}async[a178_0x523b60(0x17d)](_0x105893){const _0x4b7e0a=a178_0x523b60;await this[_0x4b7e0a(0x177)]['updateRemoteState'](this[_0x4b7e0a(0x157)],_0x105893);}async[a178_0x523b60(0x189)](_0x13d643,_0x5f3b45){const _0x29d463=a178_0x523b60;this[_0x29d463(0x168)]['log'](_0x29d463(0x1a5),_0x13d643['id']);const {added:_0x2e873d,modified:_0x10d10a,removed:_0x4b7b80}=_0x13d643[_0x29d463(0x19a)],_0xe87116=git_commit_utils_1[_0x29d463(0x199)]([..._0x2e873d,..._0x10d10a]),_0x441dc9=[..._0xe87116,..._0x4b7b80];this['logger'][_0x29d463(0x15b)]('files\x20will\x20be\x20proceeded:\x20%s',_0x441dc9[_0x29d463(0x170)](',\x20'));const _0x3fcef3=[],_0x4d9670=[],_0x556955=this['componentsMetadata'][_0x29d463(0x161)](_0x46ff90=>_0x441dc9[_0x29d463(0x178)](_0x46ff90['fileName'])),_0x13871c=[];while(_0xe87116[_0x29d463(0x16f)]){const _0x2d0a20=_0xe87116['splice'](0x0,this[_0x29d463(0x17e)]),_0x2c5e75=new parser_1[(_0x29d463(0x183))](_0x5f3b45,_0x2d0a20),_0x2b1750=await _0x2c5e75[_0x29d463(0x181)](),_0x5b44ca=_0x2b1750[_0x29d463(0x159)](_0x48403c=>{const _0x855d39=_0x29d463,_0x37b0c2=_0x556955[_0x855d39(0x179)](_0x3f9a62=>_0x3f9a62[_0x855d39(0x188)]===_0x48403c[_0x855d39(0x188)]&&_0x3f9a62[_0x855d39(0x185)]===_0x48403c[_0x855d39(0x185)]);if(!_0x37b0c2){const _0x17075c={'crc32':_0x48403c[_0x855d39(0x182)],'fileName':_0x48403c[_0x855d39(0x176)],'id':null,'version':0x1,'name':_0x48403c[_0x855d39(0x188)],'type':_0x48403c['type']};return this[_0x855d39(0x174)][_0x855d39(0x191)](_0x17075c),_0x556955['push'](_0x17075c),_0x13871c[_0x855d39(0x191)](_0x17075c),_0x4d9670[_0x855d39(0x191)](_0x48403c),null;}_0x13871c['push'](_0x37b0c2);if(_0x48403c[_0x855d39(0x182)]===_0x37b0c2[_0x855d39(0x17a)])return null;return{'component':_0x48403c,'meta':_0x37b0c2};})[_0x29d463(0x161)](_0x350892=>!!_0x350892);_0x3fcef3['push'](..._0x5b44ca);}const _0x153418=_0x556955['filter'](_0x469698=>!_0x13871c[_0x29d463(0x178)](_0x469698));return this['componentsMetadata']=this['componentsMetadata']['filter'](_0x5d9c3a=>!_0x153418[_0x29d463(0x178)](_0x5d9c3a)),this[_0x29d463(0x168)][_0x29d463(0x15b)](_0x29d463(0x198),_0x4d9670['map'](_0x34649c=>'\x27'+_0x34649c[_0x29d463(0x188)]+'\x27')[_0x29d463(0x170)](',\x20')),this['logger']['log'](_0x29d463(0x16a),_0x3fcef3['map'](_0x13af49=>'\x27'+_0x13af49[_0x29d463(0x163)][_0x29d463(0x188)]+'\x27')['join'](',\x20')),this['logger'][_0x29d463(0x15b)](_0x29d463(0x164),_0x153418[_0x29d463(0x159)](_0x501045=>'\x27'+_0x501045['name']+'\x27')[_0x29d463(0x170)](',\x20')),{'author':_0x13d643[_0x29d463(0x196)],'message':_0x13d643[_0x29d463(0x194)],'inserted':_0x4d9670,'modified':_0x3fcef3,'removed':_0x153418['map'](_0x1bfb87=>({'componentType':_0x1bfb87[_0x29d463(0x185)],'componentName':_0x1bfb87[_0x29d463(0x188)],'componentId':_0x1bfb87['id']}))};}async[a178_0x523b60(0x17f)](){const _0x412847=a178_0x523b60;this[_0x412847(0x157)]=this[_0x412847(0x1ac)][_0x412847(0x19f)]===_0x412847(0x1a8)?await this[_0x412847(0x177)][_0x412847(0x18b)](this['gitCommit'][_0x412847(0x1aa)]):await this[_0x412847(0x177)][_0x412847(0x166)](this[_0x412847(0x1ac)]['branch']),this[_0x412847(0x197)]=await this[_0x412847(0x1a4)][_0x412847(0x190)]();}async[a178_0x523b60(0x18d)](){const _0x2ec78e=a178_0x523b60,_0x4ea4d7=[...this['gitCommit'][_0x2ec78e(0x158)]];if(this['gitCommit'][_0x2ec78e(0x1ab)]){this[_0x2ec78e(0x174)]=this[_0x2ec78e(0x1a0)]?await this[_0x2ec78e(0x1a4)][_0x2ec78e(0x16b)](this[_0x2ec78e(0x1a0)]):await this[_0x2ec78e(0x1a4)][_0x2ec78e(0x186)](this[_0x2ec78e(0x15c)]);return;}this[_0x2ec78e(0x174)]=[];while(_0x4ea4d7[_0x2ec78e(0x16f)]){const _0x1f73aa=_0x4ea4d7[_0x2ec78e(0x18f)](0x0,this[_0x2ec78e(0x17e)]),_0x3ea440=this[_0x2ec78e(0x1a0)]?await this[_0x2ec78e(0x1a4)][_0x2ec78e(0x19b)](_0x1f73aa,this[_0x2ec78e(0x1a0)]):await this[_0x2ec78e(0x1a4)]['fetchRepositoryComponentsByFilenames'](_0x1f73aa,this[_0x2ec78e(0x15c)]);this[_0x2ec78e(0x174)]['push'](..._0x3ea440);}}async['updateStatus'](_0x47117a){const _0x548d39=a178_0x523b60;this[_0x548d39(0x1a0)]?await this['salesforceRest']['patch'](constants_1['FLOSUM_BRANCH'],this['branchId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Synchronization_Status__c']:_0x47117a}):await this[_0x548d39(0x16e)][_0x548d39(0x15a)](constants_1[_0x548d39(0x19c)],this[_0x548d39(0x15c)],{[constants_1[_0x548d39(0x1a2)]+'Synchronization_Status__c']:_0x47117a});}['setCommitDto'](_0x3e99e6){this['gitCommit']=_0x3e99e6;}[a178_0x523b60(0x160)](){const _0x254cc7=a178_0x523b60;return this[_0x254cc7(0x197)];}['getRepositoryId'](){return this['repositoryId'];}[a178_0x523b60(0x18c)](){const _0x17fa74=a178_0x523b60;return this[_0x17fa74(0x1a0)];}};function a178_0x5324(_0x27c348,_0x58f48f){const _0x5b5a8c=a178_0x23c8();return a178_0x5324=function(_0x1f3e6e,_0x4af335){_0x1f3e6e=_0x1f3e6e-0x157;let _0x23c8ea=_0x5b5a8c[_0x1f3e6e];return _0x23c8ea;},a178_0x5324(_0x27c348,_0x58f48f);}GitCommitService=GitCommitService_1=__decorate([typedi_1['Service']({'transient':!![]}),__metadata(a178_0x523b60(0x18e),[salesforce_git_sync_service_1[a178_0x523b60(0x193)],salesforce_rest_service_1['SalesforceRestService'],salesforce_sync_service_1[a178_0x523b60(0x1a3)]])],GitCommitService),exports['GitCommitService']=GitCommitService;