const a53_0x31fa=['test','../../core','getApi','now','979661fRAoIb','manager','lastAuthorizationCheck','__decorate','UnauthorizedError','settingsService','1378883YFWaMm','provider','176693EOXyXw','getOwnPropertyDescriptor','isAuthorized','SettingsConfigService','627240tqNJSg','updateStore','isLoggedIn','../shared/services/settings-config.service','object','design:paramtypes','ERR_INVALID_GIT_PROVIDER_TOKEN','constructor','settingsVersion','558162WyhEDo','apply','6RKkOeh','metadata','auth','1048545VXakzd','AUTH_CHECK_INTERVAL','../../core/errors/unauthorized.error','setAuthOptions','length','__metadata','needToCheckAuth','decorate','function','version','111691uRdqYl','../../constants/errors','updateAuthorizationState','saveSettings','../../core/errors/internal-server.error','__esModule','InternalServerError','typedi','checkAuthorization','../../core/errors/api.error','AuthService','error','defineProperty','Service','SettingsService'];const a53_0xfcc990=a53_0x1bb7;(function(_0x54adae,_0x3bc940){const _0x4980b4=a53_0x1bb7;while(!![]){try{const _0x2eb308=-parseInt(_0x4980b4(0x17f))*parseInt(_0x4980b4(0x1a9))+-parseInt(_0x4980b4(0x19e))+parseInt(_0x4980b4(0x19a))+parseInt(_0x4980b4(0x198))+parseInt(_0x4980b4(0x1ac))+parseInt(_0x4980b4(0x1a7))+-parseInt(_0x4980b4(0x192));if(_0x2eb308===_0x3bc940)break;else _0x54adae['push'](_0x54adae['shift']());}catch(_0x3eca5b){_0x54adae['push'](_0x54adae['shift']());}}}(a53_0x31fa,0xd81f4));const a53_0x1aad26=function(){let _0x4ccbd9=!![];return function(_0x27c469,_0x20009e){const _0x34a329=_0x4ccbd9?function(){const _0x1d8b0d=a53_0x1bb7;if(_0x20009e){const _0x1fcfa1=_0x20009e[_0x1d8b0d(0x1a8)](_0x27c469,arguments);return _0x20009e=null,_0x1fcfa1;}}:function(){};return _0x4ccbd9=![],_0x34a329;};}(),a53_0x596c0f=a53_0x1aad26(this,function(){const _0x977fff=function(){const _0x4d7409=a53_0x1bb7,_0xdf2f8d=_0x977fff['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x4d7409(0x1a5)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0xdf2f8d[_0x4d7409(0x18e)](a53_0x596c0f);};return _0x977fff();});a53_0x596c0f();function a53_0x1bb7(_0xcb9dd7,_0x4af76b){return a53_0x1bb7=function(_0x4a0c47,_0x596c0f){_0x4a0c47=_0x4a0c47-0x179;let _0x1aad26=a53_0x31fa[_0x4a0c47];return _0x1aad26;},a53_0x1bb7(_0xcb9dd7,_0x4af76b);}'use strict';var __decorate=this&&this[a53_0xfcc990(0x195)]||function(_0x5079c0,_0x40eab5,_0x3a1d27,_0x13aaf5){const _0x3aa619=a53_0xfcc990;var _0x98f20f=arguments[_0x3aa619(0x179)],_0x2fd6c4=_0x98f20f<0x3?_0x40eab5:_0x13aaf5===null?_0x13aaf5=Object[_0x3aa619(0x19b)](_0x40eab5,_0x3a1d27):_0x13aaf5,_0x337db9;if(typeof Reflect===_0x3aa619(0x1a2)&&typeof Reflect[_0x3aa619(0x17c)]==='function')_0x2fd6c4=Reflect['decorate'](_0x5079c0,_0x40eab5,_0x3a1d27,_0x13aaf5);else{for(var _0x3f6e2f=_0x5079c0[_0x3aa619(0x179)]-0x1;_0x3f6e2f>=0x0;_0x3f6e2f--)if(_0x337db9=_0x5079c0[_0x3f6e2f])_0x2fd6c4=(_0x98f20f<0x3?_0x337db9(_0x2fd6c4):_0x98f20f>0x3?_0x337db9(_0x40eab5,_0x3a1d27,_0x2fd6c4):_0x337db9(_0x40eab5,_0x3a1d27))||_0x2fd6c4;}return _0x98f20f>0x3&&_0x2fd6c4&&Object['defineProperty'](_0x40eab5,_0x3a1d27,_0x2fd6c4),_0x2fd6c4;},__metadata=this&&this[a53_0xfcc990(0x17a)]||function(_0x8ca08c,_0x37d0db){const _0xb38a5d=a53_0xfcc990;if(typeof Reflect===_0xb38a5d(0x1a2)&&typeof Reflect[_0xb38a5d(0x1aa)]===_0xb38a5d(0x17d))return Reflect['metadata'](_0x8ca08c,_0x37d0db);};Object[a53_0xfcc990(0x18b)](exports,a53_0xfcc990(0x184),{'value':!![]}),exports[a53_0xfcc990(0x189)]=void 0x0;const errors_1=require(a53_0xfcc990(0x180)),typedi_1=require(a53_0xfcc990(0x186)),git_provider_manager_1=require('../shared/git-provider.manager'),settings_service_1=require('../shared/services/settings.service'),core_1=require(a53_0xfcc990(0x18f)),unauthorized_error_1=require(a53_0xfcc990(0x1ae)),settings_config_service_1=require(a53_0xfcc990(0x1a1)),api_error_1=require(a53_0xfcc990(0x188)),internal_server_error_1=require(a53_0xfcc990(0x183)),logger=new core_1['Logger']('auth-service');let AuthService=class AuthService{constructor(_0x4f1b98,_0x972dca){const _0xdddf26=a53_0xfcc990;this[_0xdddf26(0x193)]=_0x4f1b98,this[_0xdddf26(0x197)]=_0x972dca,this[_0xdddf26(0x1ad)]=0x5*0x3c*0x3e8,this[_0xdddf26(0x19c)]=![],this[_0xdddf26(0x194)]=-0x1,this[_0xdddf26(0x1a6)]=this['settingsService']['version'];}get[a53_0xfcc990(0x17b)](){const _0x4a667d=a53_0xfcc990;if(this[_0x4a667d(0x1a6)]!==this[_0x4a667d(0x197)][_0x4a667d(0x17e)])return!![];return!(this[_0x4a667d(0x19c)]&&Date[_0x4a667d(0x191)]()-this[_0x4a667d(0x194)]<this[_0x4a667d(0x1ad)]);}get['settings'](){const _0x267c5c=a53_0xfcc990;return this[_0x267c5c(0x197)]['getStore']()[_0x267c5c(0x1ab)];}[a53_0xfcc990(0x181)](){const _0x379af6=a53_0xfcc990;this[_0x379af6(0x1a6)]=this['settingsService'][_0x379af6(0x17e)],this[_0x379af6(0x19c)]=!![],this[_0x379af6(0x194)]=Date[_0x379af6(0x191)]();}async[a53_0xfcc990(0x187)](){const _0x1d6729=a53_0xfcc990;try{if(!this[_0x1d6729(0x17b)])return;if(!this['settings'])throw new unauthorized_error_1['UnauthorizedError'](errors_1['ERR_INVALID_AUTH_OPTIONS']);const _0x405446=this[_0x1d6729(0x193)][_0x1d6729(0x190)](),_0x12971b=await _0x405446[_0x1d6729(0x1a0)]();if(!_0x12971b)throw new unauthorized_error_1[(_0x1d6729(0x196))](errors_1[_0x1d6729(0x1a4)]);this[_0x1d6729(0x181)]();}catch(_0x2d3067){logger[_0x1d6729(0x18a)]('%s',_0x2d3067);throw _0x2d3067;}}async[a53_0xfcc990(0x1af)](_0x249f27){const _0x185dbd=a53_0xfcc990;try{this[_0x185dbd(0x197)][_0x185dbd(0x19f)]({'auth':{'authData':_0x249f27['authData'],'provider':_0x249f27[_0x185dbd(0x199)],'organization':_0x249f27['organization']}});const _0x36a865=this[_0x185dbd(0x193)]['getApi'](),_0x4f4b5a=await _0x36a865[_0x185dbd(0x1a0)]();if(!_0x4f4b5a)throw new unauthorized_error_1[(_0x185dbd(0x196))](errors_1[_0x185dbd(0x1a4)]);this[_0x185dbd(0x181)](),await settings_config_service_1[_0x185dbd(0x19d)][_0x185dbd(0x182)]();}catch(_0x14fb3e){if(_0x14fb3e instanceof api_error_1['ApiError'])throw _0x14fb3e;throw new internal_server_error_1[(_0x185dbd(0x185))](_0x14fb3e);}}};AuthService=__decorate([typedi_1[a53_0xfcc990(0x18c)](),__metadata(a53_0xfcc990(0x1a3),[git_provider_manager_1['GitProviderManager'],settings_service_1[a53_0xfcc990(0x18d)]])],AuthService),exports['AuthService']=AuthService;