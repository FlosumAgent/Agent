const a77_0x344c=['sourceDir','406869yAxhWN','return\x20/\x22\x20+\x20this\x20+\x20\x22/','1310273HdPRwL','path','__importDefault','from','Logger','splice','join','1grGCva','files','utf-8','name','../../internal/fs.internal','2qdlxSL','toString','have\x20to\x20write\x20%d\x20files','sourceComponents','apply','204124qYrGbR','start','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','127869uwHwWS','Xml','makeDir','length','all','writed\x20%d\x20files','exists','child','writeParent','MDApiWriter','constructor','components','parse','1168021iNRryV','parent','default','readFile','__esModule','writeFile','componentType','body','1583380Mlawxw','keys','351346JOmIdK','writeChild','test','container','1BMegFR','3PTTYOY','../utils/xml'];const a77_0x1a87b4=a77_0x39e9;(function(_0x3abe1c,_0x89b893){const _0x817f71=a77_0x39e9;while(!![]){try{const _0xee1976=-parseInt(_0x817f71(0x1c1))*-parseInt(_0x817f71(0x1ab))+-parseInt(_0x817f71(0x194))+parseInt(_0x817f71(0x1a9))+-parseInt(_0x817f71(0x1b3))*parseInt(_0x817f71(0x1af))+parseInt(_0x817f71(0x1bc))*parseInt(_0x817f71(0x1a1))+-parseInt(_0x817f71(0x1b0))*parseInt(_0x817f71(0x191))+-parseInt(_0x817f71(0x1b5));if(_0xee1976===_0x89b893)break;else _0x3abe1c['push'](_0x3abe1c['shift']());}catch(_0x4aae0d){_0x3abe1c['push'](_0x3abe1c['shift']());}}}(a77_0x344c,0xf3566));const a77_0x77b3f1=function(){let _0x4f4724=!![];return function(_0xfcd713,_0x50658d){const _0x37a5fb=_0x4f4724?function(){const _0x2bfa63=a77_0x39e9;if(_0x50658d){const _0x389b7f=_0x50658d[_0x2bfa63(0x190)](_0xfcd713,arguments);return _0x50658d=null,_0x389b7f;}}:function(){};return _0x4f4724=![],_0x37a5fb;};}(),a77_0x14c4d7=a77_0x77b3f1(this,function(){const _0x39711e=function(){const _0x5b2020=a77_0x39e9,_0x1b4f06=_0x39711e[_0x5b2020(0x19e)](_0x5b2020(0x1b4))()[_0x5b2020(0x19e)](_0x5b2020(0x193));return!_0x1b4f06[_0x5b2020(0x1ad)](a77_0x14c4d7);};return _0x39711e();});a77_0x14c4d7();'use strict';var __importDefault=this&&this[a77_0x1a87b4(0x1b7)]||function(_0x512cdd){const _0x2bcf9c=a77_0x1a87b4;return _0x512cdd&&_0x512cdd[_0x2bcf9c(0x1a5)]?_0x512cdd:{'default':_0x512cdd};};Object['defineProperty'](exports,a77_0x1a87b4(0x1a5),{'value':!![]}),exports[a77_0x1a87b4(0x19d)]=void 0x0;const path_1=__importDefault(require(a77_0x1a87b4(0x1b6))),core_1=require('../../../core'),fs_internal_1=require(a77_0x1a87b4(0x1c0)),xml_1=require(a77_0x1a87b4(0x1b1)),logger=new core_1[(a77_0x1a87b4(0x1b9))]('mdapi-writer');class MDApiWriter{constructor(_0x365e73,_0x570b6f){const _0x324c32=a77_0x1a87b4;this[_0x324c32(0x19f)]=_0x365e73,this[_0x324c32(0x1b2)]=_0x570b6f,this['MAX_WRITES_PER_TICK']=0x64,this['sourceComponents']={};}async[a77_0x1a87b4(0x19c)](_0x2126af){const _0x53a90b=a77_0x1a87b4;for(const _0x5a91ef of _0x2126af){this[_0x53a90b(0x18f)][_0x5a91ef[_0x53a90b(0x1bf)]]=_0x5a91ef[_0x53a90b(0x1a8)];}}async[a77_0x1a87b4(0x1ac)](_0x4d5d35){const _0x2fca0b=a77_0x1a87b4;if(!this[_0x2fca0b(0x18f)][_0x4d5d35['name']]){const _0x528644=path_1[_0x2fca0b(0x1a3)]['join'](this[_0x2fca0b(0x1b2)],_0x4d5d35[_0x2fca0b(0x1bf)]);if(await fs_internal_1['FS'][_0x2fca0b(0x19a)](_0x528644)){const _0x5d9ddd=await fs_internal_1['FS'][_0x2fca0b(0x1a4)](_0x528644);this[_0x2fca0b(0x18f)][_0x4d5d35[_0x2fca0b(0x1bf)]]=Buffer[_0x2fca0b(0x1b8)](_0x5d9ddd);}else{this[_0x2fca0b(0x18f)][_0x4d5d35[_0x2fca0b(0x1bf)]]=_0x4d5d35['body'];return;}}const [_0x36ada5,_0xb05dd5]=await Promise['all']([xml_1[_0x2fca0b(0x195)][_0x2fca0b(0x1a0)](this['sourceComponents'][_0x4d5d35[_0x2fca0b(0x1bf)]][_0x2fca0b(0x1c2)](_0x2fca0b(0x1be))),xml_1[_0x2fca0b(0x195)][_0x2fca0b(0x1a0)](_0x4d5d35[_0x2fca0b(0x1a8)][_0x2fca0b(0x1c2)](_0x2fca0b(0x1be)))]);xml_1[_0x2fca0b(0x195)]['replaceOrAppend'](_0x36ada5,_0xb05dd5),this[_0x2fca0b(0x18f)][_0x4d5d35[_0x2fca0b(0x1bf)]]=Buffer[_0x2fca0b(0x1b8)](xml_1[_0x2fca0b(0x195)]['convertToString'](_0x36ada5));}async[a77_0x1a87b4(0x192)](){const _0x3e37fe=a77_0x1a87b4;!await fs_internal_1['FS'][_0x3e37fe(0x19a)](this[_0x3e37fe(0x1b2)])&&await fs_internal_1['FS'][_0x3e37fe(0x196)](this[_0x3e37fe(0x1b2)]);for(const _0x3ceb6e of this[_0x3e37fe(0x19f)]){if(_0x3ceb6e['componentType']===_0x3e37fe(0x1a2)||_0x3ceb6e[_0x3e37fe(0x1a7)]===_0x3e37fe(0x1ae))await this['writeParent'](_0x3ceb6e[_0x3e37fe(0x1bd)]);else _0x3ceb6e[_0x3e37fe(0x1a7)]===_0x3e37fe(0x19b)&&await this[_0x3e37fe(0x1ac)](_0x3ceb6e['files'][0x0]);}const _0x5f49f3=Object[_0x3e37fe(0x1aa)](this['sourceComponents']);logger['log'](_0x3e37fe(0x1c3),_0x5f49f3[_0x3e37fe(0x197)]);while(_0x5f49f3[_0x3e37fe(0x197)]){const _0x55c1b1=_0x5f49f3[_0x3e37fe(0x1ba)](0x0,this['MAX_WRITES_PER_TICK']);await Promise[_0x3e37fe(0x198)](_0x55c1b1['map'](_0x387ac0=>fs_internal_1['FS'][_0x3e37fe(0x1a6)](path_1['default'][_0x3e37fe(0x1bb)](this[_0x3e37fe(0x1b2)],_0x387ac0),this[_0x3e37fe(0x18f)][_0x387ac0]))),logger['log'](_0x3e37fe(0x199),_0x55c1b1[_0x3e37fe(0x197)]);}this[_0x3e37fe(0x18f)]={};}}function a77_0x39e9(_0x1170e8,_0x2309ff){return a77_0x39e9=function(_0x4ab5fb,_0x14c4d7){_0x4ab5fb=_0x4ab5fb-0x18f;let _0x77b3f1=a77_0x344c[_0x4ab5fb];return _0x77b3f1;},a77_0x39e9(_0x1170e8,_0x2309ff);}exports['MDApiWriter']=MDApiWriter;