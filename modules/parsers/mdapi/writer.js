const a97_0x65d2dc=a97_0x40fd;(function(_0x4e6bd9,_0x54d9da){const _0x1c056f=a97_0x40fd,_0x27aee9=_0x4e6bd9();while(!![]){try{const _0x3eb192=parseInt(_0x1c056f(0x150))/0x1+-parseInt(_0x1c056f(0x170))/0x2+parseInt(_0x1c056f(0x180))/0x3+-parseInt(_0x1c056f(0x153))/0x4*(parseInt(_0x1c056f(0x158))/0x5)+parseInt(_0x1c056f(0x15c))/0x6*(parseInt(_0x1c056f(0x18b))/0x7)+-parseInt(_0x1c056f(0x16c))/0x8+parseInt(_0x1c056f(0x160))/0x9;if(_0x3eb192===_0x54d9da)break;else _0x27aee9['push'](_0x27aee9['shift']());}catch(_0x30c977){_0x27aee9['push'](_0x27aee9['shift']());}}}(a97_0x339d,0x45855));function a97_0x339d(){const _0x6b3e9=['InvalidXmlError','fileName','internalLogger','__esModule','catch','includes','exists','default','join','fileType','apply','825885JCfNAX','name','defineProperty','skipChildErrors','readFile','../data/child-types','../../internal/fs.internal','dir','async','../utils/xml','body','343658bAryWK','__importDefault','components','all','writeChild','171587kWCOCZ','makeDir','parentComponents','2244244ntcgCy','MAX_WRITES_PER_TICK','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','convertToString','../utils/zip','5jvGKXP','splice','MDApiWriter','(((.+)+)+)+$','54RoMWyL','../errors/invalid-xml.error','start','replaceOrAppend','8661429FBwoUC','path','writeParent','constructor','writeFile','push','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','log','readZip','].\x20Original\x20error:\x20','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','Logger','4320440ThxxZA','handleXmlParsingError','search','toString','930472sNgbxX','write\x20parent\x20-\x20%s\x20[%s]','Xml','sourceDir','parse'];a97_0x339d=function(){return _0x6b3e9;};return a97_0x339d();}const a97_0x2e35b2=function(){let _0xc3eed4=!![];return function(_0x47219a,_0x5ad240){const _0x3d1d6d=_0xc3eed4?function(){const _0x219159=a97_0x40fd;if(_0x5ad240){const _0x1f48af=_0x5ad240[_0x219159(0x17f)](_0x47219a,arguments);return _0x5ad240=null,_0x1f48af;}}:function(){};return _0xc3eed4=![],_0x3d1d6d;};}(),a97_0x9dd137=a97_0x2e35b2(this,function(){const _0x2bd5a7=a97_0x40fd;return a97_0x9dd137[_0x2bd5a7(0x16f)]()['search'](_0x2bd5a7(0x15b))[_0x2bd5a7(0x16f)]()[_0x2bd5a7(0x163)](a97_0x9dd137)[_0x2bd5a7(0x16e)](_0x2bd5a7(0x15b));});a97_0x9dd137();function a97_0x40fd(_0x365c66,_0x1b125f){const _0x2cc901=a97_0x339d();return a97_0x40fd=function(_0x9dd137,_0x2e35b2){_0x9dd137=_0x9dd137-0x14e;let _0x339d18=_0x2cc901[_0x9dd137];return _0x339d18;},a97_0x40fd(_0x365c66,_0x1b125f);}'use strict';var __importDefault=this&&this[a97_0x65d2dc(0x18c)]||function(_0x1309f4){const _0x16575c=a97_0x65d2dc;return _0x1309f4&&_0x1309f4[_0x16575c(0x178)]?_0x1309f4:{'default':_0x1309f4};};Object[a97_0x65d2dc(0x182)](exports,a97_0x65d2dc(0x178),{'value':!![]}),exports[a97_0x65d2dc(0x15a)]=void 0x0;const path_1=__importDefault(require(a97_0x65d2dc(0x161))),core_1=require('../../../core'),fs_internal_1=require(a97_0x65d2dc(0x186)),invalid_xml_error_1=require(a97_0x65d2dc(0x15d)),xml_1=require(a97_0x65d2dc(0x189)),zip_1=require(a97_0x65d2dc(0x157)),child_types_1=__importDefault(require(a97_0x65d2dc(0x185)));class MDApiWriter{constructor({components:_0x5d1b79,sourceDir:_0x5aa11b,skipChildErrors:_0x96b103}){const _0x5a37bb=a97_0x65d2dc;this[_0x5a37bb(0x154)]=0x64,this['parentComponents']={},this[_0x5a37bb(0x177)]=new core_1[(_0x5a37bb(0x16b))](MDApiWriter[_0x5a37bb(0x181)]),this[_0x5a37bb(0x18d)]=_0x5d1b79,this[_0x5a37bb(0x173)]=_0x5aa11b,this[_0x5a37bb(0x183)]=_0x96b103;}async['readZip'](_0x543ba9){const _0x6eb54=a97_0x65d2dc,_0x10ac56=await zip_1['Zip']['unzip'](_0x543ba9),_0x16d255=[];for(const _0x407ece of Object['keys'](_0x10ac56['files'])){!_0x10ac56['files'][_0x407ece][_0x6eb54(0x187)]&&_0x16d255[_0x6eb54(0x165)]({'filename':_0x407ece,'body':await _0x10ac56['files'][_0x407ece][_0x6eb54(0x188)]('text')});}return _0x16d255;}async[a97_0x65d2dc(0x162)](_0x438887){const _0x594868=a97_0x65d2dc;try{const _0x48759b=await this['readZip'](_0x438887[_0x594868(0x18a)]);await Promise[_0x594868(0x14e)](_0x48759b['map'](({filename:_0x21dbec,body:_0x3da84e})=>fs_internal_1['FS'][_0x594868(0x164)](path_1[_0x594868(0x17c)]['join'](this[_0x594868(0x173)],_0x21dbec),_0x3da84e)));}catch(_0x1a19bf){throw new Error(_0x594868(0x166)+_0x438887[_0x594868(0x176)]+'\x20['+_0x438887[_0x594868(0x17e)]+_0x594868(0x169)+_0x1a19bf);}}[a97_0x65d2dc(0x16d)](_0x1749ff,_0x5e3e59){const _0x58b147=a97_0x65d2dc;throw new invalid_xml_error_1[(_0x58b147(0x175))](_0x58b147(0x155)+_0x5e3e59[_0x58b147(0x176)]+'\x20['+_0x5e3e59[_0x58b147(0x17e)]+'].\x20Original\x20error:\x20'+_0x1749ff);}async[a97_0x65d2dc(0x14f)](_0x265120){const _0x5a9459=a97_0x65d2dc,{filename:_0x3a9e45,body:_0x327231}=(await this[_0x5a9459(0x168)](_0x265120[_0x5a9459(0x18a)]))[0x0];try{if(!this['parentComponents'][_0x3a9e45]){const _0x46e0be=path_1['default']['join'](this[_0x5a9459(0x173)],_0x3a9e45);if(await fs_internal_1['FS'][_0x5a9459(0x17b)](_0x46e0be)){const _0x56ebaa=await fs_internal_1['FS'][_0x5a9459(0x184)](_0x46e0be);this[_0x5a9459(0x152)][_0x3a9e45]=await xml_1['Xml']['parse'](_0x56ebaa)['catch'](_0x7bf3e0=>this[_0x5a9459(0x16d)](_0x7bf3e0,_0x265120));}else{this[_0x5a9459(0x152)][_0x3a9e45]=await xml_1['Xml'][_0x5a9459(0x174)](_0x327231)[_0x5a9459(0x179)](_0xca3156=>this[_0x5a9459(0x16d)](_0xca3156,_0x265120));return;}}const _0x2bd6e8=this[_0x5a9459(0x152)][_0x3a9e45],_0x434eca=await xml_1[_0x5a9459(0x172)]['parse'](_0x327231)[_0x5a9459(0x179)](_0xc55e24=>this[_0x5a9459(0x16d)](_0xc55e24,_0x265120));xml_1[_0x5a9459(0x172)][_0x5a9459(0x15f)](_0x2bd6e8,_0x434eca);}catch(_0x3aaa05){if(_0x3aaa05 instanceof invalid_xml_error_1['InvalidXmlError']){if(this[_0x5a9459(0x183)])return;else throw _0x3aaa05;}throw new Error(_0x5a9459(0x16a)+_0x265120['fileName']+'\x20['+_0x265120[_0x5a9459(0x17e)]+_0x5a9459(0x169)+_0x3aaa05);}}async[a97_0x65d2dc(0x15e)](){const _0x583faf=a97_0x65d2dc;!await fs_internal_1['FS'][_0x583faf(0x17b)](this[_0x583faf(0x173)])&&await fs_internal_1['FS'][_0x583faf(0x151)](this['sourceDir']);for(const _0x57648d of this[_0x583faf(0x18d)]){!child_types_1['default'][_0x583faf(0x17a)](_0x57648d[_0x583faf(0x17e)])?(this[_0x583faf(0x177)]['log'](_0x583faf(0x171),_0x57648d[_0x583faf(0x176)],_0x57648d[_0x583faf(0x17e)]),await this[_0x583faf(0x162)](_0x57648d)):(this['internalLogger'][_0x583faf(0x167)]('write\x20child\x20-\x20%s\x20[%s]',_0x57648d[_0x583faf(0x176)],_0x57648d[_0x583faf(0x17e)]),await this[_0x583faf(0x14f)](_0x57648d));}const _0x315e62=Object['keys'](this[_0x583faf(0x152)]);this[_0x583faf(0x177)][_0x583faf(0x167)]('have\x20to\x20write\x20%d\x20files',this['components']['length']);while(_0x315e62['length']){const _0x2a7428=_0x315e62[_0x583faf(0x159)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x454557 of _0x2a7428){await fs_internal_1['FS'][_0x583faf(0x164)](path_1['default'][_0x583faf(0x17d)](this[_0x583faf(0x173)],_0x454557),xml_1[_0x583faf(0x172)][_0x583faf(0x156)](this[_0x583faf(0x152)][_0x454557]));}}this[_0x583faf(0x152)]={};}}exports[a97_0x65d2dc(0x15a)]=MDApiWriter;