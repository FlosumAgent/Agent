const a92_0x579fef=a92_0x25aa;(function(_0x4fee80,_0x1f9ecf){const _0x4321cb=a92_0x25aa,_0x1e675a=_0x4fee80();while(!![]){try{const _0x251c59=-parseInt(_0x4321cb(0x1d0))/0x1+parseInt(_0x4321cb(0x1f3))/0x2+-parseInt(_0x4321cb(0x202))/0x3*(-parseInt(_0x4321cb(0x1f6))/0x4)+-parseInt(_0x4321cb(0x1d7))/0x5*(parseInt(_0x4321cb(0x1cd))/0x6)+-parseInt(_0x4321cb(0x1f0))/0x7*(-parseInt(_0x4321cb(0x1fb))/0x8)+-parseInt(_0x4321cb(0x1e0))/0x9*(-parseInt(_0x4321cb(0x1d1))/0xa)+-parseInt(_0x4321cb(0x1e6))/0xb;if(_0x251c59===_0x1f9ecf)break;else _0x1e675a['push'](_0x1e675a['shift']());}catch(_0x431037){_0x1e675a['push'](_0x1e675a['shift']());}}}(a92_0x1e12,0x43110));const a92_0x1d69c5=function(){let _0xf52bc1=!![];return function(_0x113101,_0x2a0746){const _0x1c0656=_0xf52bc1?function(){const _0x117a53=a92_0x25aa;if(_0x2a0746){const _0x116c4c=_0x2a0746[_0x117a53(0x1e9)](_0x113101,arguments);return _0x2a0746=null,_0x116c4c;}}:function(){};return _0xf52bc1=![],_0x1c0656;};}(),a92_0x57ffa4=a92_0x1d69c5(this,function(){const _0x5a8112=a92_0x25aa;return a92_0x57ffa4['toString']()['search'](_0x5a8112(0x1ef))['toString']()[_0x5a8112(0x205)](a92_0x57ffa4)[_0x5a8112(0x1e7)]('(((.+)+)+)+$');});a92_0x57ffa4();function a92_0x1e12(){const _0x3bbd4b=['1155555XXALdr','writeChild','__esModule','all','readZip','replaceOrAppend','2426303UvOwGK','search','parentComponents','apply','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','join','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','start','writeParent','(((.+)+)+)+$','14ZVRSlB','write\x20child\x20-\x20%s\x20[%s]','exists','864600qXdnCy','dir','Xml','28648gFSTpO','push','handleXmlParsingError','../utils/xml','skipChildErrors','850296GohIsB','sourceDir','unzip','convertToString','parse','map','makeDir','18PGUaFY','write\x20parent\x20-\x20%s\x20[%s]','keys','constructor','files','InvalidXmlError','internalLogger','length','async','default','catch','log','32826gfpBcU','components','].\x20Original\x20error:\x20','293609wBxsEO','10IeGCLz','__importDefault','../errors/invalid-xml.error','writeFile','body','MAX_WRITES_PER_TICK','25JiGrEJ','fileType','includes','fileName','Logger','MDApiWriter','have\x20to\x20write\x20%d\x20files','readFile','../utils/zip'];a92_0x1e12=function(){return _0x3bbd4b;};return a92_0x1e12();}'use strict';function a92_0x25aa(_0x12f1ad,_0x3b9912){const _0x36a859=a92_0x1e12();return a92_0x25aa=function(_0x57ffa4,_0x1d69c5){_0x57ffa4=_0x57ffa4-0x1cc;let _0x1e12fd=_0x36a859[_0x57ffa4];return _0x1e12fd;},a92_0x25aa(_0x12f1ad,_0x3b9912);}var __importDefault=this&&this[a92_0x579fef(0x1d2)]||function(_0x10bf10){return _0x10bf10&&_0x10bf10['__esModule']?_0x10bf10:{'default':_0x10bf10};};Object['defineProperty'](exports,a92_0x579fef(0x1e2),{'value':!![]}),exports[a92_0x579fef(0x1dc)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require('../../../core'),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require(a92_0x579fef(0x1d3)),xml_1=require(a92_0x579fef(0x1f9)),zip_1=require(a92_0x579fef(0x1df)),child_types_1=__importDefault(require('../data/child-types'));class MDApiWriter{constructor({components:_0x159a11,sourceDir:_0x539f56,skipChildErrors:_0x230545}){const _0x53c697=a92_0x579fef;this['MAX_WRITES_PER_TICK']=0x64,this['parentComponents']={},this[_0x53c697(0x208)]=new core_1[(_0x53c697(0x1db))](MDApiWriter['name']),this[_0x53c697(0x1ce)]=_0x159a11,this[_0x53c697(0x1fc)]=_0x539f56,this[_0x53c697(0x1fa)]=_0x230545;}async[a92_0x579fef(0x1e4)](_0x9050a3){const _0x55ce20=a92_0x579fef,_0x37d8bf=await zip_1['Zip'][_0x55ce20(0x1fd)](_0x9050a3),_0x32b23d=[];for(const _0xb7816e of Object[_0x55ce20(0x204)](_0x37d8bf[_0x55ce20(0x206)])){!_0x37d8bf[_0x55ce20(0x206)][_0xb7816e][_0x55ce20(0x1f4)]&&_0x32b23d[_0x55ce20(0x1f7)]({'filename':_0xb7816e,'body':await _0x37d8bf[_0x55ce20(0x206)][_0xb7816e][_0x55ce20(0x20a)]('text')});}return _0x32b23d;}async[a92_0x579fef(0x1ee)](_0x2504ec){const _0x246be8=a92_0x579fef;try{const _0x2b09af=await this['readZip'](_0x2504ec['body']);await Promise[_0x246be8(0x1e3)](_0x2b09af[_0x246be8(0x200)](({filename:_0x5b7077,body:_0xd1b03b})=>fs_internal_1['FS'][_0x246be8(0x1d4)](path_1[_0x246be8(0x20b)][_0x246be8(0x1eb)](this['sourceDir'],_0x5b7077),_0xd1b03b)));}catch(_0x7ab085){throw new Error(_0x246be8(0x1ec)+_0x2504ec[_0x246be8(0x1da)]+'\x20['+_0x2504ec['fileType']+_0x246be8(0x1cf)+_0x7ab085);}}[a92_0x579fef(0x1f8)](_0x15f19d,_0x129e4b){const _0x3f9d80=a92_0x579fef;throw new invalid_xml_error_1[(_0x3f9d80(0x207))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x129e4b[_0x3f9d80(0x1da)]+'\x20['+_0x129e4b[_0x3f9d80(0x1d8)]+'].\x20Original\x20error:\x20'+_0x15f19d);}async['writeChild'](_0x532b3a){const _0xdfc8d3=a92_0x579fef,{filename:_0xa5cb27,body:_0x26ddf6}=(await this['readZip'](_0x532b3a[_0xdfc8d3(0x1d5)]))[0x0];try{if(!this[_0xdfc8d3(0x1e8)][_0xa5cb27]){const _0x1d6086=path_1[_0xdfc8d3(0x20b)][_0xdfc8d3(0x1eb)](this[_0xdfc8d3(0x1fc)],_0xa5cb27);if(await fs_internal_1['FS'][_0xdfc8d3(0x1f2)](_0x1d6086)){const _0x28e959=await fs_internal_1['FS'][_0xdfc8d3(0x1de)](_0x1d6086);this['parentComponents'][_0xa5cb27]=await xml_1['Xml'][_0xdfc8d3(0x1ff)](_0x28e959)[_0xdfc8d3(0x20c)](_0x99972f=>this[_0xdfc8d3(0x1f8)](_0x99972f,_0x532b3a));}else{this['parentComponents'][_0xa5cb27]=await xml_1[_0xdfc8d3(0x1f5)][_0xdfc8d3(0x1ff)](_0x26ddf6)[_0xdfc8d3(0x20c)](_0x1922ba=>this[_0xdfc8d3(0x1f8)](_0x1922ba,_0x532b3a));return;}}const _0x5e576f=this[_0xdfc8d3(0x1e8)][_0xa5cb27],_0x1504d2=await xml_1[_0xdfc8d3(0x1f5)][_0xdfc8d3(0x1ff)](_0x26ddf6)[_0xdfc8d3(0x20c)](_0x56d528=>this[_0xdfc8d3(0x1f8)](_0x56d528,_0x532b3a));xml_1[_0xdfc8d3(0x1f5)][_0xdfc8d3(0x1e5)](_0x5e576f,_0x1504d2);}catch(_0x5b09c9){if(_0x5b09c9 instanceof invalid_xml_error_1[_0xdfc8d3(0x207)]){if(this[_0xdfc8d3(0x1fa)])return;else throw _0x5b09c9;}throw new Error(_0xdfc8d3(0x1ea)+_0x532b3a[_0xdfc8d3(0x1da)]+'\x20['+_0x532b3a['fileType']+_0xdfc8d3(0x1cf)+_0x5b09c9);}}async[a92_0x579fef(0x1ed)](){const _0x1102e6=a92_0x579fef;!await fs_internal_1['FS'][_0x1102e6(0x1f2)](this[_0x1102e6(0x1fc)])&&await fs_internal_1['FS'][_0x1102e6(0x201)](this[_0x1102e6(0x1fc)]);for(const _0x194736 of this['components']){!child_types_1[_0x1102e6(0x20b)][_0x1102e6(0x1d9)](_0x194736[_0x1102e6(0x1d8)])?(this[_0x1102e6(0x208)][_0x1102e6(0x1cc)](_0x1102e6(0x203),_0x194736[_0x1102e6(0x1da)],_0x194736[_0x1102e6(0x1d8)]),await this[_0x1102e6(0x1ee)](_0x194736)):(this['internalLogger']['log'](_0x1102e6(0x1f1),_0x194736[_0x1102e6(0x1da)],_0x194736[_0x1102e6(0x1d8)]),await this[_0x1102e6(0x1e1)](_0x194736));}const _0x4e689a=Object['keys'](this[_0x1102e6(0x1e8)]);this[_0x1102e6(0x208)][_0x1102e6(0x1cc)](_0x1102e6(0x1dd),this['components'][_0x1102e6(0x209)]);while(_0x4e689a['length']){const _0x2d7262=_0x4e689a['splice'](0x0,this[_0x1102e6(0x1d6)]);for(const _0x2e85eb of _0x2d7262){await fs_internal_1['FS']['writeFile'](path_1['default'][_0x1102e6(0x1eb)](this[_0x1102e6(0x1fc)],_0x2e85eb),xml_1['Xml'][_0x1102e6(0x1fe)](this[_0x1102e6(0x1e8)][_0x2e85eb]));}}this[_0x1102e6(0x1e8)]={};}}exports[a92_0x579fef(0x1dc)]=MDApiWriter;