const a84_0x1fea8c=a84_0x2e7e;(function(_0x217b78,_0x335081){const _0xe2d21f=a84_0x2e7e,_0x5b1af6=_0x217b78();while(!![]){try{const _0x13d6e9=parseInt(_0xe2d21f(0xe4))/0x1*(-parseInt(_0xe2d21f(0xf1))/0x2)+-parseInt(_0xe2d21f(0x105))/0x3*(-parseInt(_0xe2d21f(0x114))/0x4)+parseInt(_0xe2d21f(0x109))/0x5+parseInt(_0xe2d21f(0xd5))/0x6+parseInt(_0xe2d21f(0xfd))/0x7*(parseInt(_0xe2d21f(0xda))/0x8)+-parseInt(_0xe2d21f(0x10d))/0x9*(parseInt(_0xe2d21f(0xe8))/0xa)+parseInt(_0xe2d21f(0xfb))/0xb*(-parseInt(_0xe2d21f(0x102))/0xc);if(_0x13d6e9===_0x335081)break;else _0x5b1af6['push'](_0x5b1af6['shift']());}catch(_0x38427d){_0x5b1af6['push'](_0x5b1af6['shift']());}}}(a84_0x35ff,0x7e56a));const a84_0x33e2ae=function(){let _0xe06746=!![];return function(_0x111060,_0x4ad5d5){const _0x1f7096=_0xe06746?function(){const _0x1b8cbc=a84_0x2e7e;if(_0x4ad5d5){const _0x5d82dc=_0x4ad5d5[_0x1b8cbc(0x10e)](_0x111060,arguments);return _0x4ad5d5=null,_0x5d82dc;}}:function(){};return _0xe06746=![],_0x1f7096;};}(),a84_0x23bb9e=a84_0x33e2ae(this,function(){const _0x53c5c4=a84_0x2e7e;return a84_0x23bb9e[_0x53c5c4(0x103)]()[_0x53c5c4(0x117)](_0x53c5c4(0xdf))[_0x53c5c4(0x103)]()[_0x53c5c4(0xd9)](a84_0x23bb9e)[_0x53c5c4(0x117)]('(((.+)+)+)+$');});a84_0x23bb9e();function a84_0x2e7e(_0x5039c3,_0x229918){const _0x614c5e=a84_0x35ff();return a84_0x2e7e=function(_0x23bb9e,_0x33e2ae){_0x23bb9e=_0x23bb9e-0xcd;let _0x35ff8a=_0x614c5e[_0x23bb9e];return _0x35ff8a;},a84_0x2e7e(_0x5039c3,_0x229918);}'use strict';var __importDefault=this&&this[a84_0x1fea8c(0x10c)]||function(_0x5b6187){const _0x303f7c=a84_0x1fea8c;return _0x5b6187&&_0x5b6187[_0x303f7c(0x107)]?_0x5b6187:{'default':_0x5b6187};};Object[a84_0x1fea8c(0xe0)](exports,a84_0x1fea8c(0x107),{'value':!![]}),exports[a84_0x1fea8c(0xdb)]=void 0x0;function a84_0x35ff(){const _0x2ce673=['910BmhQSX','default','./child-types','files','have\x20to\x20write\x20%d\x20files','6671460xdERcW','toString','../utils/zip','9DdBVAe','keys','__esModule','log','1559240MrzGlW','readFile','length','__importDefault','101979PDuMEu','apply','fileName','fileType','internalLogger','].\x20Original\x20error:\x20','readZip','38196kVzzna','unzip','../errors/invalid-xml.error','search','convertToString','replaceOrAppend','../../internal/fs.internal','start','../../../core','join','push','logger','Xml','5967618ottTdk','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','message','constructor','42584sRNZOR','MDApiWriter','components','text','makeDir','(((.+)+)+)+$','defineProperty','skipChildErrors','catch','splice','2XOrEyD','../utils/xml','Zip','MAX_WRITES_PER_TICK','370hKZCFB','name','writeChild','body','writeParent','parentComponents','all','includes','write\x20child\x20-\x20%s\x20[%s]','534404XpbnGH','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','writeFile','exists','handleXmlParsingError','parse','path','map','dir','InvalidXmlError','11eIYStA','sourceDir'];a84_0x35ff=function(){return _0x2ce673;};return a84_0x35ff();}const path_1=__importDefault(require(a84_0x1fea8c(0xf7))),core_1=require(a84_0x1fea8c(0xd0)),fs_internal_1=require(a84_0x1fea8c(0xce)),invalid_xml_error_1=require(a84_0x1fea8c(0x116)),xml_1=require(a84_0x1fea8c(0xe5)),zip_1=require(a84_0x1fea8c(0x104)),child_types_1=__importDefault(require(a84_0x1fea8c(0xff)));class MDApiWriter{constructor({components:_0x4ab973,sourceDir:_0x5076ce,logger:_0x2671dc,skipChildErrors:_0x221b37}){const _0x3d4485=a84_0x1fea8c;this[_0x3d4485(0xe7)]=0x64,this[_0x3d4485(0xed)]={},this[_0x3d4485(0x111)]=new core_1['Logger'](MDApiWriter[_0x3d4485(0xe9)]),this[_0x3d4485(0xdc)]=_0x4ab973,this[_0x3d4485(0xfc)]=_0x5076ce,this[_0x3d4485(0xe1)]=_0x221b37,this['logger']=_0x2671dc;}async['readZip'](_0x205a12){const _0x231a0c=a84_0x1fea8c,_0x53412e=await zip_1[_0x231a0c(0xe6)][_0x231a0c(0x115)](_0x205a12),_0x46a3d8=[];for(const _0x29db14 of Object[_0x231a0c(0x106)](_0x53412e['files'])){!_0x53412e['files'][_0x29db14][_0x231a0c(0xf9)]&&_0x46a3d8[_0x231a0c(0xd2)]({'filename':_0x29db14,'body':await _0x53412e[_0x231a0c(0x100)][_0x29db14]['async'](_0x231a0c(0xdd))});}return _0x46a3d8;}async['writeParent'](_0x441ee9){const _0x16c652=a84_0x1fea8c;try{const _0x2d634b=await this[_0x16c652(0x113)](_0x441ee9[_0x16c652(0xeb)]);await Promise[_0x16c652(0xee)](_0x2d634b[_0x16c652(0xf8)](({filename:_0x5438f6,body:_0xfe04fd})=>fs_internal_1['FS'][_0x16c652(0xf3)](path_1['default']['join'](this['sourceDir'],_0x5438f6),_0xfe04fd)));}catch(_0x357f0b){throw new Error(_0x16c652(0xf2)+_0x441ee9[_0x16c652(0x10f)]+'\x20['+_0x441ee9[_0x16c652(0x110)]+_0x16c652(0x112)+_0x357f0b);}}[a84_0x1fea8c(0xf5)](_0x929003,_0x1ee4a2){const _0x53e078=a84_0x1fea8c;throw new invalid_xml_error_1[(_0x53e078(0xfa))](_0x53e078(0xd6)+_0x1ee4a2[_0x53e078(0x10f)]+'\x20['+_0x1ee4a2[_0x53e078(0x110)]+_0x53e078(0x112)+_0x929003);}async[a84_0x1fea8c(0xea)](_0x13ddb1){const _0x2b7aa2=a84_0x1fea8c,{filename:_0x11ea9c,body:_0x47c1ce}=(await this[_0x2b7aa2(0x113)](_0x13ddb1['body']))[0x0];try{if(!this[_0x2b7aa2(0xed)][_0x11ea9c]){const _0x424084=path_1['default'][_0x2b7aa2(0xd1)](this[_0x2b7aa2(0xfc)],_0x11ea9c);if(await fs_internal_1['FS'][_0x2b7aa2(0xf4)](_0x424084)){const _0x34c61e=await fs_internal_1['FS'][_0x2b7aa2(0x10a)](_0x424084);this[_0x2b7aa2(0xed)][_0x11ea9c]=await xml_1[_0x2b7aa2(0xd4)]['parse'](_0x34c61e)[_0x2b7aa2(0xe2)](_0x21338c=>this[_0x2b7aa2(0xf5)](_0x21338c,_0x13ddb1));}else{this[_0x2b7aa2(0xed)][_0x11ea9c]=await xml_1['Xml'][_0x2b7aa2(0xf6)](_0x47c1ce)[_0x2b7aa2(0xe2)](_0x248845=>this[_0x2b7aa2(0xf5)](_0x248845,_0x13ddb1));return;}}const _0x4c50d6=this[_0x2b7aa2(0xed)][_0x11ea9c],_0x4379b0=await xml_1[_0x2b7aa2(0xd4)][_0x2b7aa2(0xf6)](_0x47c1ce)[_0x2b7aa2(0xe2)](_0xebae6b=>this[_0x2b7aa2(0xf5)](_0xebae6b,_0x13ddb1));xml_1['Xml'][_0x2b7aa2(0xcd)](_0x4c50d6,_0x4379b0);}catch(_0x1ff74e){if(_0x1ff74e instanceof invalid_xml_error_1[_0x2b7aa2(0xfa)]){this[_0x2b7aa2(0xd3)](_0x1ff74e[_0x2b7aa2(0xd8)]);if(this['skipChildErrors'])return;else throw _0x1ff74e;}throw new Error(_0x2b7aa2(0xd7)+_0x13ddb1[_0x2b7aa2(0x10f)]+'\x20['+_0x13ddb1['fileType']+_0x2b7aa2(0x112)+_0x1ff74e);}}async[a84_0x1fea8c(0xcf)](){const _0x109447=a84_0x1fea8c;!await fs_internal_1['FS']['exists'](this[_0x109447(0xfc)])&&await fs_internal_1['FS'][_0x109447(0xde)](this['sourceDir']);for(const _0x4e45c3 of this[_0x109447(0xdc)]){!child_types_1[_0x109447(0xfe)][_0x109447(0xef)](_0x4e45c3[_0x109447(0x110)])?(this[_0x109447(0x111)][_0x109447(0x108)]('write\x20parent\x20-\x20%s\x20[%s]',_0x4e45c3['fileName'],_0x4e45c3[_0x109447(0x110)]),await this[_0x109447(0xec)](_0x4e45c3)):(this[_0x109447(0x111)][_0x109447(0x108)](_0x109447(0xf0),_0x4e45c3[_0x109447(0x10f)],_0x4e45c3[_0x109447(0x110)]),await this[_0x109447(0xea)](_0x4e45c3));}const _0x34a0ab=Object[_0x109447(0x106)](this[_0x109447(0xed)]);this['internalLogger'][_0x109447(0x108)](_0x109447(0x101),this['components'][_0x109447(0x10b)]);while(_0x34a0ab[_0x109447(0x10b)]){const _0x2012fa=_0x34a0ab[_0x109447(0xe3)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x891c76 of _0x2012fa){await fs_internal_1['FS']['writeFile'](path_1[_0x109447(0xfe)][_0x109447(0xd1)](this[_0x109447(0xfc)],_0x891c76),xml_1[_0x109447(0xd4)][_0x109447(0x118)](this['parentComponents'][_0x891c76]));}}this['parentComponents']={};}}exports[a84_0x1fea8c(0xdb)]=MDApiWriter;