const a97_0x4e3ac5=a97_0x4566;function a97_0x13e1(){const _0x2e6f34=['components','splice','replaceOrAppend','handleXmlParsingError','fileName','1346455NmfJOD','].\x20Original\x20error:\x20','1720835yGxmvu','have\x20to\x20write\x20%d\x20files','includes','skipChildErrors','map','__esModule','makeDir','60YOOPLO','2EbPzSV','Xml','sourceDir','join','toString','default','Logger','9008QzXcOo','log','18LRBoJM','internalLogger','4484960qteJoa','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','parse','keys','6EMsldC','fileType','apply','../utils/zip','readZip','push','unzip','name','24ErFseV','../../../core','writeChild','2484816LbgyUf','all','async','catch','write\x20child\x20-\x20%s\x20[%s]','length','writeParent','writeFile','constructor','parentComponents','exists','Zip','787901mOjItx','3981677hywDKh','convertToString','../../internal/fs.internal','(((.+)+)+)+$','search','InvalidXmlError','write\x20parent\x20-\x20%s\x20[%s]','start','files','MAX_WRITES_PER_TICK','../errors/invalid-xml.error'];a97_0x13e1=function(){return _0x2e6f34;};return a97_0x13e1();}(function(_0xdf915c,_0x1f3cde){const _0x1dfa64=a97_0x4566,_0x190b63=_0xdf915c();while(!![]){try{const _0x45ad40=-parseInt(_0x1dfa64(0x113))/0x1*(-parseInt(_0x1dfa64(0xed))/0x2)+parseInt(_0x1dfa64(0x104))/0x3*(-parseInt(_0x1dfa64(0xf4))/0x4)+-parseInt(_0x1dfa64(0x126))/0x5*(parseInt(_0x1dfa64(0xfc))/0x6)+parseInt(_0x1dfa64(0x114))/0x7+-parseInt(_0x1dfa64(0x107))/0x8*(-parseInt(_0x1dfa64(0xf6))/0x9)+-parseInt(_0x1dfa64(0xf8))/0xa+parseInt(_0x1dfa64(0x124))/0xb*(-parseInt(_0x1dfa64(0xec))/0xc);if(_0x45ad40===_0x1f3cde)break;else _0x190b63['push'](_0x190b63['shift']());}catch(_0xda7fa4){_0x190b63['push'](_0x190b63['shift']());}}}(a97_0x13e1,0x878cc));function a97_0x4566(_0x1b595b,_0x4b26fc){const _0x11c2dd=a97_0x13e1();return a97_0x4566=function(_0x23768a,_0x42f764){_0x23768a=_0x23768a-0xe8;let _0x13e1f6=_0x11c2dd[_0x23768a];return _0x13e1f6;},a97_0x4566(_0x1b595b,_0x4b26fc);}const a97_0x42f764=function(){let _0xab4c8e=!![];return function(_0x35a9a6,_0x322694){const _0x1a7f4c=_0xab4c8e?function(){const _0x477f88=a97_0x4566;if(_0x322694){const _0x16d28f=_0x322694[_0x477f88(0xfe)](_0x35a9a6,arguments);return _0x322694=null,_0x16d28f;}}:function(){};return _0xab4c8e=![],_0x1a7f4c;};}(),a97_0x23768a=a97_0x42f764(this,function(){const _0x2978fa=a97_0x4566;return a97_0x23768a[_0x2978fa(0xf1)]()[_0x2978fa(0x118)](_0x2978fa(0x117))[_0x2978fa(0xf1)]()[_0x2978fa(0x10f)](a97_0x23768a)[_0x2978fa(0x118)](_0x2978fa(0x117));});a97_0x23768a();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x561ff3){const _0x4d2c7d=a97_0x4566;return _0x561ff3&&_0x561ff3[_0x4d2c7d(0xea)]?_0x561ff3:{'default':_0x561ff3};};Object['defineProperty'](exports,a97_0x4e3ac5(0xea),{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a97_0x4e3ac5(0x105)),fs_internal_1=require(a97_0x4e3ac5(0x116)),invalid_xml_error_1=require(a97_0x4e3ac5(0x11e)),xml_1=require('../utils/xml'),zip_1=require(a97_0x4e3ac5(0xff)),child_types_1=__importDefault(require('../data/child-types'));class MDApiWriter{constructor({components:_0x16aac3,sourceDir:_0x1f2c3b,skipChildErrors:_0x3518ed}){const _0x4a2fc4=a97_0x4e3ac5;this[_0x4a2fc4(0x11d)]=0x64,this[_0x4a2fc4(0x110)]={},this[_0x4a2fc4(0xf7)]=new core_1[(_0x4a2fc4(0xf3))](MDApiWriter[_0x4a2fc4(0x103)]),this[_0x4a2fc4(0x11f)]=_0x16aac3,this[_0x4a2fc4(0xef)]=_0x1f2c3b,this[_0x4a2fc4(0xe8)]=_0x3518ed;}async[a97_0x4e3ac5(0x100)](_0x563d30){const _0x74d982=a97_0x4e3ac5,_0x37a619=await zip_1[_0x74d982(0x112)][_0x74d982(0x102)](_0x563d30),_0x23d861=[];for(const _0x889305 of Object[_0x74d982(0xfb)](_0x37a619[_0x74d982(0x11c)])){!_0x37a619['files'][_0x889305]['dir']&&_0x23d861[_0x74d982(0x101)]({'filename':_0x889305,'body':await _0x37a619[_0x74d982(0x11c)][_0x889305][_0x74d982(0x109)]('text')});}return _0x23d861;}async[a97_0x4e3ac5(0x10d)](_0x275e0d){const _0x59bccc=a97_0x4e3ac5;try{const _0x32643f=await this[_0x59bccc(0x100)](_0x275e0d['body']);await Promise[_0x59bccc(0x108)](_0x32643f[_0x59bccc(0xe9)](({filename:_0x38f46b,body:_0x4d9779})=>fs_internal_1['FS'][_0x59bccc(0x10e)](path_1[_0x59bccc(0xf2)][_0x59bccc(0xf0)](this[_0x59bccc(0xef)],_0x38f46b),_0x4d9779)));}catch(_0x1403a1){throw new Error('[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20'+_0x275e0d['fileName']+'\x20['+_0x275e0d[_0x59bccc(0xfd)]+_0x59bccc(0x125)+_0x1403a1);}}[a97_0x4e3ac5(0x122)](_0x1bfb5c,_0x16396e){const _0x287367=a97_0x4e3ac5;throw new invalid_xml_error_1[(_0x287367(0x119))]('[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20'+_0x16396e['fileName']+'\x20['+_0x16396e[_0x287367(0xfd)]+_0x287367(0x125)+_0x1bfb5c);}async[a97_0x4e3ac5(0x106)](_0x138474){const _0x465291=a97_0x4e3ac5,{filename:_0x201f31,body:_0xb92202}=(await this['readZip'](_0x138474['body']))[0x0];try{if(!this['parentComponents'][_0x201f31]){const _0x16c290=path_1['default'][_0x465291(0xf0)](this[_0x465291(0xef)],_0x201f31);if(await fs_internal_1['FS'][_0x465291(0x111)](_0x16c290)){const _0x250371=await fs_internal_1['FS']['readFile'](_0x16c290);this[_0x465291(0x110)][_0x201f31]=await xml_1['Xml'][_0x465291(0xfa)](_0x250371)[_0x465291(0x10a)](_0x569b20=>this[_0x465291(0x122)](_0x569b20,_0x138474));}else{this[_0x465291(0x110)][_0x201f31]=await xml_1['Xml'][_0x465291(0xfa)](_0xb92202)['catch'](_0x30ba52=>this[_0x465291(0x122)](_0x30ba52,_0x138474));return;}}const _0x215388=this[_0x465291(0x110)][_0x201f31],_0x4379c9=await xml_1[_0x465291(0xee)][_0x465291(0xfa)](_0xb92202)[_0x465291(0x10a)](_0x2ff5ea=>this['handleXmlParsingError'](_0x2ff5ea,_0x138474));xml_1[_0x465291(0xee)][_0x465291(0x121)](_0x215388,_0x4379c9);}catch(_0x4aed6a){if(_0x4aed6a instanceof invalid_xml_error_1[_0x465291(0x119)]){if(this[_0x465291(0xe8)])return;else throw _0x4aed6a;}throw new Error(_0x465291(0xf9)+_0x138474[_0x465291(0x123)]+'\x20['+_0x138474[_0x465291(0xfd)]+_0x465291(0x125)+_0x4aed6a);}}async[a97_0x4e3ac5(0x11b)](){const _0x53b9b6=a97_0x4e3ac5;!await fs_internal_1['FS'][_0x53b9b6(0x111)](this[_0x53b9b6(0xef)])&&await fs_internal_1['FS'][_0x53b9b6(0xeb)](this[_0x53b9b6(0xef)]);for(const _0x25c3a0 of this[_0x53b9b6(0x11f)]){!child_types_1[_0x53b9b6(0xf2)][_0x53b9b6(0x128)](_0x25c3a0[_0x53b9b6(0xfd)])?(this[_0x53b9b6(0xf7)][_0x53b9b6(0xf5)](_0x53b9b6(0x11a),_0x25c3a0[_0x53b9b6(0x123)],_0x25c3a0[_0x53b9b6(0xfd)]),await this[_0x53b9b6(0x10d)](_0x25c3a0)):(this[_0x53b9b6(0xf7)]['log'](_0x53b9b6(0x10b),_0x25c3a0[_0x53b9b6(0x123)],_0x25c3a0['fileType']),await this[_0x53b9b6(0x106)](_0x25c3a0));}const _0x819c8=Object['keys'](this[_0x53b9b6(0x110)]);this[_0x53b9b6(0xf7)]['log'](_0x53b9b6(0x127),this['components']['length']);while(_0x819c8[_0x53b9b6(0x10c)]){const _0x43d0b9=_0x819c8[_0x53b9b6(0x120)](0x0,this[_0x53b9b6(0x11d)]);for(const _0x16b149 of _0x43d0b9){await fs_internal_1['FS'][_0x53b9b6(0x10e)](path_1[_0x53b9b6(0xf2)][_0x53b9b6(0xf0)](this[_0x53b9b6(0xef)],_0x16b149),xml_1['Xml'][_0x53b9b6(0x115)](this[_0x53b9b6(0x110)][_0x16b149]));}}this[_0x53b9b6(0x110)]={};}}exports['MDApiWriter']=MDApiWriter;