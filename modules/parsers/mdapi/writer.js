const a84_0x4f719f=a84_0x4641;(function(_0x328e2d,_0x3bbd30){const _0x1a162c=a84_0x4641,_0x347262=_0x328e2d();while(!![]){try{const _0x5206d1=-parseInt(_0x1a162c(0x19b))/0x1*(parseInt(_0x1a162c(0x15f))/0x2)+parseInt(_0x1a162c(0x19e))/0x3+parseInt(_0x1a162c(0x194))/0x4*(-parseInt(_0x1a162c(0x172))/0x5)+-parseInt(_0x1a162c(0x185))/0x6*(-parseInt(_0x1a162c(0x181))/0x7)+-parseInt(_0x1a162c(0x18d))/0x8+parseInt(_0x1a162c(0x17a))/0x9+-parseInt(_0x1a162c(0x169))/0xa*(-parseInt(_0x1a162c(0x163))/0xb);if(_0x5206d1===_0x3bbd30)break;else _0x347262['push'](_0x347262['shift']());}catch(_0x4986fc){_0x347262['push'](_0x347262['shift']());}}}(a84_0x55b4,0x84098));function a84_0x55b4(){const _0xa646dd=['8305864kGKTpT','./child-types','internalLogger','exists','toString','(((.+)+)+)+$','write\x20child\x20-\x20%s\x20[%s]','24RVdedV','../utils/xml','Xml','parse','components','path','default','43zpkyVc','parentComponents','InvalidXmlError','1369053dQgFxn','files','log','sourceDir','convertToString','text','message','32714jbclZG','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','all','makeDir','48884WGzJLJ','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','fileType','constructor','apply','join','3130XGbziG','writeParent','].\x20Original\x20error:\x20','readZip','MAX_WRITES_PER_TICK','splice','dir','push','handleXmlParsingError','483815iRyNoD','logger','body','keys','readFile','writeFile','defineProperty','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','6463908NnONol','fileName','have\x20to\x20write\x20%d\x20files','replaceOrAppend','MDApiWriter','search','includes','189287bvSXwA','writeChild','name','../../../core','66YwpJnP','skipChildErrors','length','catch','__esModule','async','write\x20parent\x20-\x20%s\x20[%s]','unzip'];a84_0x55b4=function(){return _0xa646dd;};return a84_0x55b4();}const a84_0x2c3d4a=function(){let _0x364aae=!![];return function(_0x5b198e,_0x35943e){const _0x52769a=_0x364aae?function(){const _0x244f57=a84_0x4641;if(_0x35943e){const _0x41ce27=_0x35943e[_0x244f57(0x167)](_0x5b198e,arguments);return _0x35943e=null,_0x41ce27;}}:function(){};return _0x364aae=![],_0x52769a;};}(),a84_0x166090=a84_0x2c3d4a(this,function(){const _0x1bfd10=a84_0x4641;return a84_0x166090[_0x1bfd10(0x191)]()['search'](_0x1bfd10(0x192))[_0x1bfd10(0x191)]()[_0x1bfd10(0x166)](a84_0x166090)[_0x1bfd10(0x17f)](_0x1bfd10(0x192));});a84_0x166090();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x119a5b){const _0x34337a=a84_0x4641;return _0x119a5b&&_0x119a5b[_0x34337a(0x189)]?_0x119a5b:{'default':_0x119a5b};};Object[a84_0x4f719f(0x178)](exports,'__esModule',{'value':!![]}),exports['MDApiWriter']=void 0x0;const path_1=__importDefault(require(a84_0x4f719f(0x199))),core_1=require(a84_0x4f719f(0x184)),fs_internal_1=require('../../internal/fs.internal'),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_1=require(a84_0x4f719f(0x195)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a84_0x4f719f(0x18e)));class MDApiWriter{constructor({components:_0x4efcfe,sourceDir:_0x2b45e6,logger:_0x510571,skipChildErrors:_0x5af21e}){const _0x1bc728=a84_0x4f719f;this[_0x1bc728(0x16d)]=0x64,this[_0x1bc728(0x19c)]={},this[_0x1bc728(0x18f)]=new core_1['Logger'](MDApiWriter[_0x1bc728(0x183)]),this[_0x1bc728(0x198)]=_0x4efcfe,this[_0x1bc728(0x15b)]=_0x2b45e6,this[_0x1bc728(0x186)]=_0x5af21e,this[_0x1bc728(0x173)]=_0x510571;}async['readZip'](_0x5584b4){const _0x12b799=a84_0x4f719f,_0x36a5a2=await zip_1['Zip'][_0x12b799(0x18c)](_0x5584b4),_0x260910=[];for(const _0x2daa92 of Object[_0x12b799(0x175)](_0x36a5a2[_0x12b799(0x19f)])){!_0x36a5a2[_0x12b799(0x19f)][_0x2daa92][_0x12b799(0x16f)]&&_0x260910[_0x12b799(0x170)]({'filename':_0x2daa92,'body':await _0x36a5a2[_0x12b799(0x19f)][_0x2daa92][_0x12b799(0x18a)](_0x12b799(0x15d))});}return _0x260910;}async['writeParent'](_0x593f81){const _0xff13a5=a84_0x4f719f;try{const _0x1edd1b=await this[_0xff13a5(0x16c)](_0x593f81[_0xff13a5(0x174)]);await Promise[_0xff13a5(0x161)](_0x1edd1b['map'](({filename:_0x5174c8,body:_0x4cdfd3})=>fs_internal_1['FS'][_0xff13a5(0x177)](path_1['default'][_0xff13a5(0x168)](this[_0xff13a5(0x15b)],_0x5174c8),_0x4cdfd3)));}catch(_0x3a2f88){throw new Error(_0xff13a5(0x179)+_0x593f81['fileName']+'\x20['+_0x593f81[_0xff13a5(0x165)]+'].\x20Original\x20error:\x20'+_0x3a2f88);}}['handleXmlParsingError'](_0x4bb5c9,_0xd6a5ff){const _0x3852a2=a84_0x4f719f;throw new invalid_xml_error_1[(_0x3852a2(0x19d))](_0x3852a2(0x160)+_0xd6a5ff[_0x3852a2(0x17b)]+'\x20['+_0xd6a5ff[_0x3852a2(0x165)]+_0x3852a2(0x16b)+_0x4bb5c9);}async[a84_0x4f719f(0x182)](_0x21ddfd){const _0x226617=a84_0x4f719f,{filename:_0xa949d5,body:_0x4f9681}=(await this['readZip'](_0x21ddfd['body']))[0x0];try{if(!this['parentComponents'][_0xa949d5]){const _0x57df68=path_1[_0x226617(0x19a)][_0x226617(0x168)](this[_0x226617(0x15b)],_0xa949d5);if(await fs_internal_1['FS'][_0x226617(0x190)](_0x57df68)){const _0x36f2ed=await fs_internal_1['FS'][_0x226617(0x176)](_0x57df68);this[_0x226617(0x19c)][_0xa949d5]=await xml_1[_0x226617(0x196)][_0x226617(0x197)](_0x36f2ed)[_0x226617(0x188)](_0x2fe4e6=>this[_0x226617(0x171)](_0x2fe4e6,_0x21ddfd));}else{this[_0x226617(0x19c)][_0xa949d5]=await xml_1[_0x226617(0x196)][_0x226617(0x197)](_0x4f9681)[_0x226617(0x188)](_0x368b2f=>this['handleXmlParsingError'](_0x368b2f,_0x21ddfd));return;}}const _0x4aa79c=this[_0x226617(0x19c)][_0xa949d5],_0x2499e0=await xml_1[_0x226617(0x196)][_0x226617(0x197)](_0x4f9681)['catch'](_0x40a76f=>this[_0x226617(0x171)](_0x40a76f,_0x21ddfd));xml_1[_0x226617(0x196)][_0x226617(0x17d)](_0x4aa79c,_0x2499e0);}catch(_0x2b20ad){if(_0x2b20ad instanceof invalid_xml_error_1[_0x226617(0x19d)]){this[_0x226617(0x173)](_0x2b20ad[_0x226617(0x15e)]);if(this[_0x226617(0x186)])return;else throw _0x2b20ad;}throw new Error(_0x226617(0x164)+_0x21ddfd[_0x226617(0x17b)]+'\x20['+_0x21ddfd[_0x226617(0x165)]+_0x226617(0x16b)+_0x2b20ad);}}async['start'](){const _0x4537a3=a84_0x4f719f;!await fs_internal_1['FS'][_0x4537a3(0x190)](this[_0x4537a3(0x15b)])&&await fs_internal_1['FS'][_0x4537a3(0x162)](this[_0x4537a3(0x15b)]);for(const _0x3a9c77 of this[_0x4537a3(0x198)]){!child_types_1[_0x4537a3(0x19a)][_0x4537a3(0x180)](_0x3a9c77[_0x4537a3(0x165)])?(this[_0x4537a3(0x18f)]['log'](_0x4537a3(0x18b),_0x3a9c77[_0x4537a3(0x17b)],_0x3a9c77['fileType']),await this[_0x4537a3(0x16a)](_0x3a9c77)):(this['internalLogger'][_0x4537a3(0x1a0)](_0x4537a3(0x193),_0x3a9c77[_0x4537a3(0x17b)],_0x3a9c77[_0x4537a3(0x165)]),await this[_0x4537a3(0x182)](_0x3a9c77));}const _0x54a3f6=Object[_0x4537a3(0x175)](this[_0x4537a3(0x19c)]);this[_0x4537a3(0x18f)][_0x4537a3(0x1a0)](_0x4537a3(0x17c),this[_0x4537a3(0x198)][_0x4537a3(0x187)]);while(_0x54a3f6['length']){const _0x2ea3d8=_0x54a3f6[_0x4537a3(0x16e)](0x0,this[_0x4537a3(0x16d)]);for(const _0x145440 of _0x2ea3d8){await fs_internal_1['FS'][_0x4537a3(0x177)](path_1[_0x4537a3(0x19a)][_0x4537a3(0x168)](this[_0x4537a3(0x15b)],_0x145440),xml_1['Xml'][_0x4537a3(0x15c)](this[_0x4537a3(0x19c)][_0x145440]));}}this[_0x4537a3(0x19c)]={};}}function a84_0x4641(_0x14e6ac,_0x561a8c){const _0x1b87ff=a84_0x55b4();return a84_0x4641=function(_0x166090,_0x2c3d4a){_0x166090=_0x166090-0x15b;let _0x55b4dc=_0x1b87ff[_0x166090];return _0x55b4dc;},a84_0x4641(_0x14e6ac,_0x561a8c);}exports[a84_0x4f719f(0x17e)]=MDApiWriter;