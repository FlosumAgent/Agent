const a81_0x2f18=['sourceComponents','Logger','../../internal/fs.internal','__esModule','839680LubwKc','componentType','703273wORqUk','writeChild','mdapi-writer','constructor','91apcAhN','length','return\x20/\x22\x20+\x20this\x20+\x20\x22/','makeDir','MDApiWriter','805173rVkADq','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','11069QJvdtj','log','name','replaceOrAppend','defineProperty','2237eAcXES','path','exists','writeParent','writeFile','toString','have\x20to\x20write\x20%d\x20files','convertToString','341eSldNK','container','files','splice','43lyKiHa','sourceDir','join','parse','../utils/xml','Xml','parsedComponents','365031blvgIw','487rAWGYn','MAX_WRITES_PER_TICK','map','body','default','utf-8'];const a81_0x114b90=a81_0x3bf0;(function(_0x36e935,_0x52eba7){const _0x31de05=a81_0x3bf0;while(!![]){try{const _0x3c680a=parseInt(_0x31de05(0x15f))*-parseInt(_0x31de05(0x140))+parseInt(_0x31de05(0x148))*-parseInt(_0x31de05(0x13c))+parseInt(_0x31de05(0x152))+-parseInt(_0x31de05(0x154))+-parseInt(_0x31de05(0x158))*parseInt(_0x31de05(0x134))+parseInt(_0x31de05(0x147))+parseInt(_0x31de05(0x15d));if(_0x3c680a===_0x52eba7)break;else _0x36e935['push'](_0x36e935['shift']());}catch(_0x269067){_0x36e935['push'](_0x36e935['shift']());}}}(a81_0x2f18,0x708d2));const a81_0x93b28=function(){let _0x45b8df=!![];return function(_0x50c739,_0x45f7d9){const _0x38215a=_0x45b8df?function(){if(_0x45f7d9){const _0x270346=_0x45f7d9['apply'](_0x50c739,arguments);return _0x45f7d9=null,_0x270346;}}:function(){};return _0x45b8df=![],_0x38215a;};}(),a81_0x55a35f=a81_0x93b28(this,function(){const _0x1db6e7=function(){const _0x4eecf7=a81_0x3bf0,_0x586eb5=_0x1db6e7[_0x4eecf7(0x157)](_0x4eecf7(0x15a))()[_0x4eecf7(0x157)](_0x4eecf7(0x15e));return!_0x586eb5['test'](a81_0x55a35f);};return _0x1db6e7();});a81_0x55a35f();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3b740c){return _0x3b740c&&_0x3b740c['__esModule']?_0x3b740c:{'default':_0x3b740c};};function a81_0x3bf0(_0x347416,_0x20e43f){return a81_0x3bf0=function(_0x153f92,_0x55a35f){_0x153f92=_0x153f92-0x134;let _0x93b28=a81_0x2f18[_0x153f92];return _0x93b28;},a81_0x3bf0(_0x347416,_0x20e43f);}Object[a81_0x114b90(0x163)](exports,a81_0x114b90(0x151),{'value':!![]}),exports[a81_0x114b90(0x15c)]=void 0x0;const path_1=__importDefault(require(a81_0x114b90(0x135))),core_1=require('../../../core'),fs_internal_1=require(a81_0x114b90(0x150)),xml_1=require(a81_0x114b90(0x144)),logger=new core_1[(a81_0x114b90(0x14f))](a81_0x114b90(0x156));class MDApiWriter{constructor(_0xdbc574,_0x2ba893){const _0x256244=a81_0x114b90;this['parsedComponents']=_0xdbc574,this[_0x256244(0x141)]=_0x2ba893,this[_0x256244(0x149)]=0x64,this[_0x256244(0x14e)]={};}async[a81_0x114b90(0x137)](_0x25c569){const _0x5e6a49=a81_0x114b90;for(const _0x29c37a of _0x25c569){this[_0x5e6a49(0x14e)][_0x29c37a['name']]=_0x29c37a[_0x5e6a49(0x14b)];}}async['writeChild'](_0x1b98b9){const _0x3c49d7=a81_0x114b90;if(!this[_0x3c49d7(0x14e)][_0x1b98b9[_0x3c49d7(0x161)]]){const _0x524fac=path_1['default'][_0x3c49d7(0x142)](this[_0x3c49d7(0x141)],_0x1b98b9[_0x3c49d7(0x161)]);if(await fs_internal_1['FS'][_0x3c49d7(0x136)](_0x524fac)){const _0x27d412=await fs_internal_1['FS']['readFile'](_0x524fac);this['sourceComponents'][_0x1b98b9[_0x3c49d7(0x161)]]=Buffer['from'](_0x27d412);}else{this[_0x3c49d7(0x14e)][_0x1b98b9[_0x3c49d7(0x161)]]=_0x1b98b9[_0x3c49d7(0x14b)];return;}}const [_0x5caee3,_0x3e995d]=await Promise['all']([xml_1[_0x3c49d7(0x145)][_0x3c49d7(0x143)](this['sourceComponents'][_0x1b98b9['name']][_0x3c49d7(0x139)]('utf-8')),xml_1['Xml'][_0x3c49d7(0x143)](_0x1b98b9[_0x3c49d7(0x14b)][_0x3c49d7(0x139)](_0x3c49d7(0x14d)))]);xml_1[_0x3c49d7(0x145)][_0x3c49d7(0x162)](_0x5caee3,_0x3e995d),this['sourceComponents'][_0x1b98b9['name']]=Buffer['from'](xml_1[_0x3c49d7(0x145)][_0x3c49d7(0x13b)](_0x5caee3));}async['start'](){const _0x3fcce8=a81_0x114b90;!await fs_internal_1['FS']['exists'](this[_0x3fcce8(0x141)])&&await fs_internal_1['FS'][_0x3fcce8(0x15b)](this['sourceDir']);for(const _0x1a1aeb of this[_0x3fcce8(0x146)]){if(_0x1a1aeb[_0x3fcce8(0x153)]==='parent'||_0x1a1aeb[_0x3fcce8(0x153)]===_0x3fcce8(0x13d))await this[_0x3fcce8(0x137)](_0x1a1aeb['files']);else _0x1a1aeb['componentType']==='child'&&await this[_0x3fcce8(0x155)](_0x1a1aeb[_0x3fcce8(0x13e)][0x0]);}const _0x128544=Object['keys'](this[_0x3fcce8(0x14e)]);logger[_0x3fcce8(0x160)](_0x3fcce8(0x13a),_0x128544[_0x3fcce8(0x159)]);while(_0x128544[_0x3fcce8(0x159)]){const _0x57f0ad=_0x128544[_0x3fcce8(0x13f)](0x0,this[_0x3fcce8(0x149)]);await Promise['all'](_0x57f0ad[_0x3fcce8(0x14a)](_0x2bb98c=>fs_internal_1['FS'][_0x3fcce8(0x138)](path_1[_0x3fcce8(0x14c)][_0x3fcce8(0x142)](this[_0x3fcce8(0x141)],_0x2bb98c),this[_0x3fcce8(0x14e)][_0x2bb98c]))),logger[_0x3fcce8(0x160)]('writed\x20%d\x20files',_0x57f0ad[_0x3fcce8(0x159)]);}this[_0x3fcce8(0x14e)]={};}}exports[a81_0x114b90(0x15c)]=MDApiWriter;