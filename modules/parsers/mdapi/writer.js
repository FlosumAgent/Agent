const a84_0x28de00=a84_0x6495;(function(_0x232430,_0x568c16){const _0x434a66=a84_0x6495,_0xeac0d5=_0x232430();while(!![]){try{const _0x3bc5c5=-parseInt(_0x434a66(0x184))/0x1+-parseInt(_0x434a66(0x1b2))/0x2*(-parseInt(_0x434a66(0x1b5))/0x3)+-parseInt(_0x434a66(0x1aa))/0x4*(parseInt(_0x434a66(0x177))/0x5)+parseInt(_0x434a66(0x175))/0x6+parseInt(_0x434a66(0x189))/0x7*(parseInt(_0x434a66(0x1a6))/0x8)+parseInt(_0x434a66(0x17c))/0x9*(-parseInt(_0x434a66(0x18a))/0xa)+parseInt(_0x434a66(0x176))/0xb;if(_0x3bc5c5===_0x568c16)break;else _0xeac0d5['push'](_0xeac0d5['shift']());}catch(_0xa0128e){_0xeac0d5['push'](_0xeac0d5['shift']());}}}(a84_0x2c7e,0xdb641));const a84_0x3c8a82=function(){let _0x36e295=!![];return function(_0x41c93a,_0x537540){const _0x1d484f=_0x36e295?function(){if(_0x537540){const _0x44362d=_0x537540['apply'](_0x41c93a,arguments);return _0x537540=null,_0x44362d;}}:function(){};return _0x36e295=![],_0x1d484f;};}(),a84_0xfc0bae=a84_0x3c8a82(this,function(){const _0x565727=a84_0x6495;return a84_0xfc0bae[_0x565727(0x191)]()['search'](_0x565727(0x183))['toString']()[_0x565727(0x17a)](a84_0xfc0bae)[_0x565727(0x178)](_0x565727(0x183));});a84_0xfc0bae();function a84_0x6495(_0xbb1c8b,_0x416dd7){const _0x571760=a84_0x2c7e();return a84_0x6495=function(_0xfc0bae,_0x3c8a82){_0xfc0bae=_0xfc0bae-0x174;let _0x2c7e4=_0x571760[_0xfc0bae];return _0x2c7e4;},a84_0x6495(_0xbb1c8b,_0x416dd7);}'use strict';var __importDefault=this&&this[a84_0x28de00(0x19e)]||function(_0x11e389){return _0x11e389&&_0x11e389['__esModule']?_0x11e389:{'default':_0x11e389};};Object[a84_0x28de00(0x17e)](exports,a84_0x28de00(0x1a9),{'value':!![]}),exports[a84_0x28de00(0x179)]=void 0x0;const path_1=__importDefault(require(a84_0x28de00(0x17f))),core_1=require(a84_0x28de00(0x1a0)),fs_internal_1=require(a84_0x28de00(0x18e)),invalid_xml_error_1=require('../errors/invalid-xml.error'),xml_1=require(a84_0x28de00(0x1ba)),zip_1=require('../utils/zip'),child_types_1=__importDefault(require(a84_0x28de00(0x1b9)));class MDApiWriter{constructor({components:_0x4b7272,sourceDir:_0x293e7a,logger:_0xe6d83b,skipChildErrors:_0x5ad5d3}){const _0x54a565=a84_0x28de00;this['MAX_WRITES_PER_TICK']=0x64,this[_0x54a565(0x194)]={},this[_0x54a565(0x1ac)]=new core_1[(_0x54a565(0x180))](MDApiWriter[_0x54a565(0x1a2)]),this[_0x54a565(0x1b3)]=_0x4b7272,this[_0x54a565(0x1b7)]=_0x293e7a,this[_0x54a565(0x1a7)]=_0x5ad5d3,this['logger']=_0xe6d83b;}async[a84_0x28de00(0x197)](_0x34f6ef){const _0x4218e9=a84_0x28de00,_0x61794=await zip_1[_0x4218e9(0x1b6)][_0x4218e9(0x198)](_0x34f6ef),_0x4a026a=[];for(const _0x542b92 of Object[_0x4218e9(0x193)](_0x61794[_0x4218e9(0x190)])){!_0x61794[_0x4218e9(0x190)][_0x542b92][_0x4218e9(0x1b4)]&&_0x4a026a['push']({'filename':_0x542b92,'body':await _0x61794[_0x4218e9(0x190)][_0x542b92]['async'](_0x4218e9(0x18b))});}return _0x4a026a;}async[a84_0x28de00(0x1ab)](_0x120ff8){const _0x234695=a84_0x28de00;try{const _0x839309=await this[_0x234695(0x197)](_0x120ff8['body']);await Promise[_0x234695(0x1a1)](_0x839309[_0x234695(0x1ad)](({filename:_0x48f8dd,body:_0x16837c})=>fs_internal_1['FS'][_0x234695(0x1a3)](path_1[_0x234695(0x186)][_0x234695(0x18c)](this[_0x234695(0x1b7)],_0x48f8dd),_0x16837c)));}catch(_0x380534){throw new Error(_0x234695(0x19c)+_0x120ff8[_0x234695(0x196)]+'\x20['+_0x120ff8['fileType']+_0x234695(0x19d)+_0x380534);}}['handleXmlParsingError'](_0xfe2956,_0xb925de){const _0x29a185=a84_0x28de00;throw new invalid_xml_error_1[(_0x29a185(0x1b8))](_0x29a185(0x17b)+_0xb925de[_0x29a185(0x196)]+'\x20['+_0xb925de[_0x29a185(0x187)]+_0x29a185(0x19d)+_0xfe2956);}async[a84_0x28de00(0x185)](_0x44f661){const _0x4a2fb7=a84_0x28de00,{filename:_0x439caf,body:_0x483be9}=(await this[_0x4a2fb7(0x197)](_0x44f661[_0x4a2fb7(0x199)]))[0x0];try{if(!this['parentComponents'][_0x439caf]){const _0x187105=path_1['default'][_0x4a2fb7(0x18c)](this['sourceDir'],_0x439caf);if(await fs_internal_1['FS'][_0x4a2fb7(0x182)](_0x187105)){const _0x2b941a=await fs_internal_1['FS'][_0x4a2fb7(0x195)](_0x187105);this[_0x4a2fb7(0x194)][_0x439caf]=await xml_1[_0x4a2fb7(0x1a8)][_0x4a2fb7(0x1a5)](_0x2b941a)[_0x4a2fb7(0x1af)](_0x300595=>this[_0x4a2fb7(0x181)](_0x300595,_0x44f661));}else{this['parentComponents'][_0x439caf]=await xml_1['Xml'][_0x4a2fb7(0x1a5)](_0x483be9)[_0x4a2fb7(0x1af)](_0x4f8502=>this['handleXmlParsingError'](_0x4f8502,_0x44f661));return;}}const _0x49584f=this[_0x4a2fb7(0x194)][_0x439caf],_0x1cb16b=await xml_1[_0x4a2fb7(0x1a8)][_0x4a2fb7(0x1a5)](_0x483be9)[_0x4a2fb7(0x1af)](_0x1e848b=>this[_0x4a2fb7(0x181)](_0x1e848b,_0x44f661));xml_1[_0x4a2fb7(0x1a8)][_0x4a2fb7(0x18d)](_0x49584f,_0x1cb16b);}catch(_0x3aae0f){if(_0x3aae0f instanceof invalid_xml_error_1[_0x4a2fb7(0x1b8)]){this[_0x4a2fb7(0x1b1)](_0x3aae0f[_0x4a2fb7(0x18f)]);if(this[_0x4a2fb7(0x1a7)])return;else throw _0x3aae0f;}throw new Error(_0x4a2fb7(0x1ae)+_0x44f661['fileName']+'\x20['+_0x44f661['fileType']+_0x4a2fb7(0x19d)+_0x3aae0f);}}async[a84_0x28de00(0x1a4)](){const _0x50c1cf=a84_0x28de00;!await fs_internal_1['FS'][_0x50c1cf(0x182)](this['sourceDir'])&&await fs_internal_1['FS'][_0x50c1cf(0x17d)](this[_0x50c1cf(0x1b7)]);for(const _0x868a40 of this['components']){!child_types_1[_0x50c1cf(0x186)][_0x50c1cf(0x188)](_0x868a40['fileType'])?(this[_0x50c1cf(0x1ac)]['log'](_0x50c1cf(0x19b),_0x868a40[_0x50c1cf(0x196)],_0x868a40[_0x50c1cf(0x187)]),await this[_0x50c1cf(0x1ab)](_0x868a40)):(this[_0x50c1cf(0x1ac)][_0x50c1cf(0x174)]('write\x20child\x20-\x20%s\x20[%s]',_0x868a40[_0x50c1cf(0x196)],_0x868a40['fileType']),await this[_0x50c1cf(0x185)](_0x868a40));}const _0xc47d2c=Object[_0x50c1cf(0x193)](this[_0x50c1cf(0x194)]);this[_0x50c1cf(0x1ac)][_0x50c1cf(0x174)]('have\x20to\x20write\x20%d\x20files',this[_0x50c1cf(0x1b3)][_0x50c1cf(0x19a)]);while(_0xc47d2c[_0x50c1cf(0x19a)]){const _0x5860f4=_0xc47d2c[_0x50c1cf(0x1b0)](0x0,this[_0x50c1cf(0x19f)]);for(const _0x4ce22d of _0x5860f4){await fs_internal_1['FS']['writeFile'](path_1['default'][_0x50c1cf(0x18c)](this['sourceDir'],_0x4ce22d),xml_1[_0x50c1cf(0x1a8)][_0x50c1cf(0x192)](this[_0x50c1cf(0x194)][_0x4ce22d]));}}this[_0x50c1cf(0x194)]={};}}function a84_0x2c7e(){const _0x320578=['length','write\x20parent\x20-\x20%s\x20[%s]','[WriteParent]\x20An\x20error\x20occured\x20while\x20proceeding\x20component\x20','].\x20Original\x20error:\x20','__importDefault','MAX_WRITES_PER_TICK','../../../core','all','name','writeFile','start','parse','5193128UsNSxq','skipChildErrors','Xml','__esModule','104036hJOdJg','writeParent','internalLogger','map','[WriteChild]\x20An\x20error\x20occurred\x20while\x20proceeding\x20component\x20','catch','splice','logger','6154kdCEwA','components','dir','228HcooZk','Zip','sourceDir','InvalidXmlError','./child-types','../utils/xml','log','3231888vzTBCp','24794902zAFCkm','145SygRIp','search','MDApiWriter','constructor','[InvalidXmlError]\x20An\x20error\x20occurred\x20while\x20proceeding\x20XML\x20','869094NoYLvL','makeDir','defineProperty','path','Logger','handleXmlParsingError','exists','(((.+)+)+)+$','1416620uMIMAU','writeChild','default','fileType','includes','14vPsQwT','130RCCnWz','text','join','replaceOrAppend','../../internal/fs.internal','message','files','toString','convertToString','keys','parentComponents','readFile','fileName','readZip','unzip','body'];a84_0x2c7e=function(){return _0x320578;};return a84_0x2c7e();}exports[a84_0x28de00(0x179)]=MDApiWriter;