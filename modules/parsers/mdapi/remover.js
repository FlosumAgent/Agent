const a81_0x4cc6=['227CyZJjn','1CLNugi','writeFile','constructor','-meta.xml','length','Xml','2FWukCQ','removeParent','pop','type','makeDir','1NLIzwd','__esModule','MDApiRemover','MAX_WRITES_PER_TICK','isEmptyXml','components','removeChild','exists','convertToString','removeFile','isDir','../../internal/fs.internal','2kAZoWH','have\x20to\x20update\x20%d\x20files','1420PlPmVE','removeDir','splice','__importDefault','105845slSBHx','removeAt','511337VZuzTm','267319aknIjR','Logger','return\x20/\x22\x20+\x20this\x20+\x20\x22/','parse','./child-types','start','default','388LhWBVT','all','test','log','join','643nezAlt','catch','./child-types-map','path','sourceDir','META_EXTENSION','312030RNNtJU','parentComponents','../../../core','526904lZTXwH'];const a81_0x14eb54=a81_0x55da;(function(_0x4da386,_0x16fc46){const _0x224a5c=a81_0x55da;while(!![]){try{const _0x20a332=-parseInt(_0x224a5c(0x216))*-parseInt(_0x224a5c(0x1ed))+-parseInt(_0x224a5c(0x214))*parseInt(_0x224a5c(0x21a))+parseInt(_0x224a5c(0x1fc))*parseInt(_0x224a5c(0x1f2))+parseInt(_0x224a5c(0x1fb))*-parseInt(_0x224a5c(0x1fd))+parseInt(_0x224a5c(0x203))*parseInt(_0x224a5c(0x21d))+-parseInt(_0x224a5c(0x21c))*parseInt(_0x224a5c(0x208))+parseInt(_0x224a5c(0x1f8));if(_0x20a332===_0x16fc46)break;else _0x4da386['push'](_0x4da386['shift']());}catch(_0x52f9bc){_0x4da386['push'](_0x4da386['shift']());}}}(a81_0x4cc6,0x47b1a));const a81_0x462958=function(){let _0x9b06ab=!![];return function(_0x37ce0f,_0x431130){const _0x2b7c92=_0x9b06ab?function(){if(_0x431130){const _0x56883c=_0x431130['apply'](_0x37ce0f,arguments);return _0x431130=null,_0x56883c;}}:function(){};return _0x9b06ab=![],_0x2b7c92;};}(),a81_0x7f66a8=a81_0x462958(this,function(){const _0x3b358b=function(){const _0x371aa2=a81_0x55da,_0x20c567=_0x3b358b[_0x371aa2(0x1ff)](_0x371aa2(0x1e8))()[_0x371aa2(0x1ff)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x20c567[_0x371aa2(0x1ef)](a81_0x7f66a8);};return _0x3b358b();});a81_0x7f66a8();'use strict';function a81_0x55da(_0x24b234,_0x11b612){return a81_0x55da=function(_0x4a3d82,_0x7f66a8){_0x4a3d82=_0x4a3d82-0x1e7;let _0x462958=a81_0x4cc6[_0x4a3d82];return _0x462958;},a81_0x55da(_0x24b234,_0x11b612);}var __importDefault=this&&this[a81_0x14eb54(0x219)]||function(_0x4a7563){const _0x10fb89=a81_0x14eb54;return _0x4a7563&&_0x4a7563[_0x10fb89(0x209)]?_0x4a7563:{'default':_0x4a7563};};Object['defineProperty'](exports,a81_0x14eb54(0x209),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a81_0x14eb54(0x213)),core_1=require(a81_0x14eb54(0x1fa)),xml_1=require('../utils/xml'),child_types_1=__importDefault(require(a81_0x14eb54(0x1ea))),child_types_map_1=__importDefault(require(a81_0x14eb54(0x1f4))),path_1=__importDefault(require('path')),logger=new core_1[(a81_0x14eb54(0x1e7))]('mdapi-remover');class MDApiRemover{constructor(_0x9e0f65,_0x1a53dd){const _0x9e6907=a81_0x14eb54;this[_0x9e6907(0x20d)]=_0x9e0f65,this[_0x9e6907(0x1f6)]=_0x1a53dd,this[_0x9e6907(0x1f7)]=_0x9e6907(0x200),this[_0x9e6907(0x20b)]=0x64,this[_0x9e6907(0x1f9)]={};}async[a81_0x14eb54(0x204)](_0x3ce310){const _0x44829b=a81_0x14eb54,_0x1b4827=path_1[_0x44829b(0x1ec)][_0x44829b(0x1f1)](this[_0x44829b(0x1f6)],_0x3ce310[_0x44829b(0x1f5)]),_0x19cead=path_1[_0x44829b(0x1ec)]['join'](this[_0x44829b(0x1f6)],''+_0x3ce310[_0x44829b(0x1f5)]+this['META_EXTENSION']);this[_0x44829b(0x1f9)][_0x3ce310[_0x44829b(0x1f5)]]&&delete this[_0x44829b(0x1f9)][_0x3ce310[_0x44829b(0x1f5)]];const _0x1abb0a=await fs_internal_1['FS'][_0x44829b(0x212)](_0x1b4827)[_0x44829b(0x1f3)](()=>![]);if(_0x1abb0a){await fs_internal_1['FS'][_0x44829b(0x217)](_0x1b4827);return;}await Promise[_0x44829b(0x1ee)]([fs_internal_1['FS'][_0x44829b(0x211)](_0x1b4827),fs_internal_1['FS'][_0x44829b(0x211)](_0x19cead)]);}async['removeChild'](_0x238b01){const _0x4a19dc=a81_0x14eb54,{fileName:_0x1f7acd,type:_0x24eed5,path:_0x3452da}=_0x238b01,_0x3321a7=child_types_map_1['default'][_0x24eed5];if(!_0x3321a7)throw new Error('Unknown\x20child\x20type\x20'+_0x24eed5);if(!this[_0x4a19dc(0x1f9)][_0x3452da]){const _0x290533=path_1[_0x4a19dc(0x1ec)][_0x4a19dc(0x1f1)](this['sourceDir'],_0x3452da),_0x7695d8=await fs_internal_1['FS']['exists'](_0x290533);if(!_0x7695d8)return;const _0xf76ab0=await fs_internal_1['FS']['readFile'](_0x290533);this[_0x4a19dc(0x1f9)][_0x3452da]=await xml_1[_0x4a19dc(0x202)][_0x4a19dc(0x1e9)](_0xf76ab0);}const _0x4409d5=this['parentComponents'][_0x3452da],_0x5211b7=_0x1f7acd['split']('.')[_0x4a19dc(0x205)]();xml_1[_0x4a19dc(0x202)][_0x4a19dc(0x21b)](_0x4409d5,_0x3321a7,_0x5211b7||_0x1f7acd),xml_1[_0x4a19dc(0x202)][_0x4a19dc(0x20c)](_0x4409d5)?(await this[_0x4a19dc(0x204)](_0x238b01),delete this['parentComponents'][_0x3452da]):this[_0x4a19dc(0x1f9)][_0x3452da]=_0x4409d5;}async[a81_0x14eb54(0x1eb)](){const _0x31a173=a81_0x14eb54;!await fs_internal_1['FS'][_0x31a173(0x20f)](this[_0x31a173(0x1f6)])&&await fs_internal_1['FS'][_0x31a173(0x207)](this[_0x31a173(0x1f6)]);for(const _0x49cdea of this[_0x31a173(0x20d)]){!child_types_1['default']['includes'](_0x49cdea[_0x31a173(0x206)])?await this[_0x31a173(0x204)](_0x49cdea):await this[_0x31a173(0x20e)](_0x49cdea);}const _0x2e003f=Object['keys'](this['parentComponents']);logger[_0x31a173(0x1f0)](_0x31a173(0x215),this[_0x31a173(0x20d)][_0x31a173(0x201)]);while(_0x2e003f[_0x31a173(0x201)]){const _0x464769=_0x2e003f[_0x31a173(0x218)](0x0,this[_0x31a173(0x20b)]);for(const _0x1d270f of _0x464769){await fs_internal_1['FS'][_0x31a173(0x1fe)](path_1[_0x31a173(0x1ec)][_0x31a173(0x1f1)](this[_0x31a173(0x1f6)],_0x1d270f),xml_1['Xml'][_0x31a173(0x210)](this[_0x31a173(0x1f9)][_0x1d270f]));}}this['parentComponents']={};}}exports[a81_0x14eb54(0x20a)]=MDApiRemover;