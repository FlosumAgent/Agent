const a96_0x338837=a96_0x5793;(function(_0x1b6243,_0x5bc38d){const _0x2c9cdc=a96_0x5793,_0x6ba3f1=_0x1b6243();while(!![]){try{const _0x412f54=-parseInt(_0x2c9cdc(0x16d))/0x1+parseInt(_0x2c9cdc(0x189))/0x2+parseInt(_0x2c9cdc(0x17e))/0x3+parseInt(_0x2c9cdc(0x160))/0x4+parseInt(_0x2c9cdc(0x17c))/0x5*(parseInt(_0x2c9cdc(0x191))/0x6)+parseInt(_0x2c9cdc(0x163))/0x7+-parseInt(_0x2c9cdc(0x175))/0x8;if(_0x412f54===_0x5bc38d)break;else _0x6ba3f1['push'](_0x6ba3f1['shift']());}catch(_0xa39fad){_0x6ba3f1['push'](_0x6ba3f1['shift']());}}}(a96_0x3974,0x7036c));function a96_0x5793(_0x8c3d32,_0x8b9ea7){const _0x3e32da=a96_0x3974();return a96_0x5793=function(_0x2e6962,_0x2cdfcc){_0x2e6962=_0x2e6962-0x154;let _0x397480=_0x3e32da[_0x2e6962];return _0x397480;},a96_0x5793(_0x8c3d32,_0x8b9ea7);}const a96_0x2cdfcc=function(){let _0x20c585=!![];return function(_0x19e914,_0x40b4c6){const _0x260808=_0x20c585?function(){const _0x350956=a96_0x5793;if(_0x40b4c6){const _0x10c18a=_0x40b4c6[_0x350956(0x188)](_0x19e914,arguments);return _0x40b4c6=null,_0x10c18a;}}:function(){};return _0x20c585=![],_0x260808;};}(),a96_0x2e6962=a96_0x2cdfcc(this,function(){const _0x4499dd=a96_0x5793;return a96_0x2e6962['toString']()[_0x4499dd(0x17f)](_0x4499dd(0x182))['toString']()[_0x4499dd(0x18c)](a96_0x2e6962)[_0x4499dd(0x17f)](_0x4499dd(0x182));});a96_0x2e6962();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x3af3ab){const _0x1c8ef6=a96_0x5793;return _0x3af3ab&&_0x3af3ab[_0x1c8ef6(0x16b)]?_0x3af3ab:{'default':_0x3af3ab};};function a96_0x3974(){const _0x5bcea4=['removeFile','logger','includes','fileName','MDApiRemover','parentComponents','Xml','exists','split','removeChild','removeDir','pop','1733272aFBwNe','remove\x20component\x20directory\x20%s\x20[%s]','readFile','1284171nWOrcS','Logger','default','../utils/xml','length','removeParent','isDir','defineProperty','__esModule','../../../core','353269fSsYyT','remove\x20parent\x20component\x20%s\x20[%s]','sourceDir','keys','../../internal/fs.internal','convertToString','join','components','9231424jLKRxy','type','writeFile','site-meta.xml','removeAt','splice','start','5QjebNK','../data/child-types','1024419nweLqK','search','makeDir','catch','(((.+)+)+)+$','name','all','../data/child-types-map','-meta.xml','MAX_WRITES_PER_TICK','apply','1304274JoMuAm','isEmptyXml','remove\x20child\x20component\x20%s\x20[%s]','constructor','have\x20to\x20update\x20%d\x20files','log','path','META_EXPERIENCE_BUNDLE','2138664gODvzS'];a96_0x3974=function(){return _0x5bcea4;};return a96_0x3974();}Object[a96_0x338837(0x16a)](exports,a96_0x338837(0x16b),{'value':!![]}),exports[a96_0x338837(0x158)]=void 0x0;const fs_internal_1=require(a96_0x338837(0x171)),core_1=require(a96_0x338837(0x16c)),xml_1=require(a96_0x338837(0x166)),child_types_1=__importDefault(require(a96_0x338837(0x17d))),child_types_map_1=__importDefault(require(a96_0x338837(0x185))),path_1=__importDefault(require(a96_0x338837(0x18f)));class MDApiRemover{constructor(_0x521e04,_0x35f359){const _0x156456=a96_0x338837;this['components']=_0x521e04,this[_0x156456(0x16f)]=_0x35f359,this['META_EXTENSION']=_0x156456(0x186),this[_0x156456(0x190)]=_0x156456(0x178),this[_0x156456(0x187)]=0x64,this[_0x156456(0x155)]=new core_1[(_0x156456(0x164))](MDApiRemover[_0x156456(0x183)]),this[_0x156456(0x159)]={};}async[a96_0x338837(0x168)](_0x58a7ec){const _0x6b6e9a=a96_0x338837,_0x336c23=path_1[_0x6b6e9a(0x165)][_0x6b6e9a(0x173)](this[_0x6b6e9a(0x16f)],_0x58a7ec[_0x6b6e9a(0x18f)]),_0x26f14b=path_1[_0x6b6e9a(0x165)][_0x6b6e9a(0x173)](this['sourceDir'],''+_0x58a7ec[_0x6b6e9a(0x18f)]+this['META_EXTENSION']);this[_0x6b6e9a(0x159)][_0x58a7ec[_0x6b6e9a(0x18f)]]&&delete this[_0x6b6e9a(0x159)][_0x58a7ec[_0x6b6e9a(0x18f)]];const _0x2067b6=await fs_internal_1['FS'][_0x6b6e9a(0x169)](_0x336c23)['catch'](()=>![]);if(_0x2067b6){this[_0x6b6e9a(0x155)]['log'](_0x6b6e9a(0x161),_0x336c23,_0x58a7ec[_0x6b6e9a(0x176)]),await fs_internal_1['FS'][_0x6b6e9a(0x15e)](_0x336c23);_0x58a7ec['type']==='ExperienceBundle'&&await fs_internal_1['FS']['removeFile'](''+_0x336c23+this[_0x6b6e9a(0x190)])[_0x6b6e9a(0x181)](()=>void 0x0);return;}this[_0x6b6e9a(0x155)]['log']('remove\x20component\x20\x20%s\x20[%s]',_0x336c23,_0x58a7ec['type']),await Promise[_0x6b6e9a(0x184)]([fs_internal_1['FS'][_0x6b6e9a(0x154)](_0x336c23),fs_internal_1['FS'][_0x6b6e9a(0x154)](_0x26f14b)]);}async[a96_0x338837(0x15d)](_0x1704d8){const _0x35a232=a96_0x338837,{fileName:_0x41e9f8,type:_0x5f5242,path:_0xb100ec}=_0x1704d8,_0x4d3808=child_types_map_1[_0x35a232(0x165)][_0x5f5242];if(!_0x4d3808)throw new Error('Unknown\x20child\x20type\x20'+_0x5f5242);if(!this[_0x35a232(0x159)][_0xb100ec]){const _0x4ea941=path_1[_0x35a232(0x165)]['join'](this[_0x35a232(0x16f)],_0xb100ec),_0x2c480a=await fs_internal_1['FS'][_0x35a232(0x15b)](_0x4ea941);if(!_0x2c480a)return;const _0x149b2c=await fs_internal_1['FS'][_0x35a232(0x162)](_0x4ea941);this[_0x35a232(0x159)][_0xb100ec]=await xml_1['Xml']['parse'](_0x149b2c);}const _0x2146d4=this[_0x35a232(0x159)][_0xb100ec],_0x128984=_0x41e9f8[_0x35a232(0x15c)]('.')[_0x35a232(0x15f)]();xml_1[_0x35a232(0x15a)][_0x35a232(0x179)](_0x2146d4,_0x4d3808,_0x128984||_0x41e9f8),xml_1['Xml'][_0x35a232(0x18a)](_0x2146d4)?(this[_0x35a232(0x155)][_0x35a232(0x18e)]('remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]',_0x1704d8[_0x35a232(0x18f)],_0x1704d8['fileName']),await this[_0x35a232(0x168)](_0x1704d8),delete this[_0x35a232(0x159)][_0xb100ec]):this[_0x35a232(0x159)][_0xb100ec]=_0x2146d4;}async[a96_0x338837(0x17b)](){const _0x3cb52a=a96_0x338837;!await fs_internal_1['FS'][_0x3cb52a(0x15b)](this['sourceDir'])&&await fs_internal_1['FS'][_0x3cb52a(0x180)](this[_0x3cb52a(0x16f)]);for(const _0x5e40e7 of this[_0x3cb52a(0x174)]){!child_types_1['default'][_0x3cb52a(0x156)](_0x5e40e7[_0x3cb52a(0x176)])?(this[_0x3cb52a(0x155)][_0x3cb52a(0x18e)](_0x3cb52a(0x16e),_0x5e40e7['fileName'],_0x5e40e7[_0x3cb52a(0x176)]),await this[_0x3cb52a(0x168)](_0x5e40e7)):(this[_0x3cb52a(0x155)][_0x3cb52a(0x18e)](_0x3cb52a(0x18b),_0x5e40e7[_0x3cb52a(0x157)],_0x5e40e7[_0x3cb52a(0x176)]),await this['removeChild'](_0x5e40e7));}const _0x87a2ca=Object[_0x3cb52a(0x170)](this[_0x3cb52a(0x159)]);this[_0x3cb52a(0x155)][_0x3cb52a(0x18e)](_0x3cb52a(0x18d),this[_0x3cb52a(0x174)][_0x3cb52a(0x167)]);while(_0x87a2ca[_0x3cb52a(0x167)]){const _0x1dc239=_0x87a2ca[_0x3cb52a(0x17a)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x264c50 of _0x1dc239){await fs_internal_1['FS'][_0x3cb52a(0x177)](path_1['default'][_0x3cb52a(0x173)](this[_0x3cb52a(0x16f)],_0x264c50),xml_1['Xml'][_0x3cb52a(0x172)](this[_0x3cb52a(0x159)][_0x264c50]));}}this[_0x3cb52a(0x159)]={};}}exports[a96_0x338837(0x158)]=MDApiRemover;