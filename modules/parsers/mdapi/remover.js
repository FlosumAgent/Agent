const a81_0x4ac5=['apply','removeChild','length','keys','writeFile','__importDefault','includes','start','-meta.xml','pop','MDApiRemover','path','parentComponents','../../internal/fs.internal','14VSQNcM','Logger','434494lMSnJp','../utils/xml','removeDir','exists','__esModule','constructor','components','isDir','2aeEeTG','336118nuPWiW','../../../core','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Xml','150983yJzEGU','join','197677sQDTnG','MAX_WRITES_PER_TICK','./child-types','removeAt','Unknown\x20child\x20type\x20','default','readFile','splice','defineProperty','parse','have\x20to\x20update\x20%d\x20files','removeFile','META_EXTENSION','catch','split','5sMJSwQ','42926bETYLp','mdapi-remover','test','sourceDir','334513SxVIHa','type','removeParent','900539YKUWjB','2HQqcui'];const a81_0x5786ca=a81_0x5c3b;(function(_0x2d6d5b,_0x12028f){const _0xab7aa1=a81_0x5c3b;while(!![]){try{const _0xe516e7=-parseInt(_0xab7aa1(0x1ed))+parseInt(_0xab7aa1(0x20b))*parseInt(_0xab7aa1(0x1f1))+parseInt(_0xab7aa1(0x21c))+-parseInt(_0xab7aa1(0x21a))*parseInt(_0xab7aa1(0x203))+parseInt(_0xab7aa1(0x1ec))*parseInt(_0xab7aa1(0x207))+-parseInt(_0xab7aa1(0x1f3))*-parseInt(_0xab7aa1(0x202))+-parseInt(_0xab7aa1(0x20a));if(_0xe516e7===_0x12028f)break;else _0x2d6d5b['push'](_0x2d6d5b['shift']());}catch(_0x24d73a){_0x2d6d5b['push'](_0x2d6d5b['shift']());}}}(a81_0x4ac5,0x87cda));const a81_0x48f7c0=function(){let _0x17be54=!![];return function(_0x589e3d,_0x3e972e){const _0x2d6302=_0x17be54?function(){const _0x5e9184=a81_0x5c3b;if(_0x3e972e){const _0x26bcf3=_0x3e972e[_0x5e9184(0x20c)](_0x589e3d,arguments);return _0x3e972e=null,_0x26bcf3;}}:function(){};return _0x17be54=![],_0x2d6302;};}(),a81_0x1d84ef=a81_0x48f7c0(this,function(){const _0xddc37a=function(){const _0x5946ea=a81_0x5c3b,_0x37f53e=_0xddc37a[_0x5946ea(0x1e9)](_0x5946ea(0x1ef))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x37f53e[_0x5946ea(0x205)](a81_0x1d84ef);};return _0xddc37a();});a81_0x1d84ef();function a81_0x5c3b(_0x5b4435,_0x42e7bf){return a81_0x5c3b=function(_0x36b08e,_0x1d84ef){_0x36b08e=_0x36b08e-0x1e6;let _0x48f7c0=a81_0x4ac5[_0x36b08e];return _0x48f7c0;},a81_0x5c3b(_0x5b4435,_0x42e7bf);}'use strict';var __importDefault=this&&this[a81_0x5786ca(0x211)]||function(_0x566317){return _0x566317&&_0x566317['__esModule']?_0x566317:{'default':_0x566317};};Object[a81_0x5786ca(0x1fb)](exports,a81_0x5786ca(0x1e8),{'value':!![]}),exports['MDApiRemover']=void 0x0;const fs_internal_1=require(a81_0x5786ca(0x219)),core_1=require(a81_0x5786ca(0x1ee)),xml_1=require(a81_0x5786ca(0x21d)),child_types_1=__importDefault(require(a81_0x5786ca(0x1f5))),child_types_map_1=__importDefault(require('./child-types-map')),path_1=__importDefault(require(a81_0x5786ca(0x217))),logger=new core_1[(a81_0x5786ca(0x21b))](a81_0x5786ca(0x204));class MDApiRemover{constructor(_0x300039,_0x580bbd){const _0x54cba0=a81_0x5786ca;this[_0x54cba0(0x1ea)]=_0x300039,this[_0x54cba0(0x206)]=_0x580bbd,this['META_EXTENSION']=_0x54cba0(0x214),this[_0x54cba0(0x1f4)]=0x64,this['parentComponents']={};}async[a81_0x5786ca(0x209)](_0x79282f){const _0x5cdf1c=a81_0x5786ca,_0x57e700=path_1[_0x5cdf1c(0x1f8)][_0x5cdf1c(0x1f2)](this[_0x5cdf1c(0x206)],_0x79282f[_0x5cdf1c(0x217)]),_0x52f682=path_1[_0x5cdf1c(0x1f8)]['join'](this[_0x5cdf1c(0x206)],''+_0x79282f[_0x5cdf1c(0x217)]+this[_0x5cdf1c(0x1ff)]);this['parentComponents'][_0x79282f[_0x5cdf1c(0x217)]]&&delete this[_0x5cdf1c(0x218)][_0x79282f['path']];const _0x1d6cfa=await fs_internal_1['FS'][_0x5cdf1c(0x1eb)](_0x57e700)[_0x5cdf1c(0x200)](()=>![]);if(_0x1d6cfa){await fs_internal_1['FS'][_0x5cdf1c(0x1e6)](_0x57e700);return;}await Promise['all']([fs_internal_1['FS']['removeFile'](_0x57e700),fs_internal_1['FS'][_0x5cdf1c(0x1fe)](_0x52f682)]);}async[a81_0x5786ca(0x20d)](_0x43fdb9){const _0x151053=a81_0x5786ca,{fileName:_0x144de,type:_0x1e73b8,path:_0x188e9b}=_0x43fdb9,_0x20b615=child_types_map_1[_0x151053(0x1f8)][_0x1e73b8];if(!_0x20b615)throw new Error(_0x151053(0x1f7)+_0x1e73b8);if(!this[_0x151053(0x218)][_0x188e9b]){const _0xece410=path_1['default'][_0x151053(0x1f2)](this[_0x151053(0x206)],_0x188e9b),_0x623e16=await fs_internal_1['FS'][_0x151053(0x1e7)](_0xece410);if(!_0x623e16)return;const _0x16eb3c=await fs_internal_1['FS'][_0x151053(0x1f9)](_0xece410);this[_0x151053(0x218)][_0x188e9b]=await xml_1[_0x151053(0x1f0)][_0x151053(0x1fc)](_0x16eb3c);}const _0x22cf71=this[_0x151053(0x218)][_0x188e9b],_0x513767=_0x144de[_0x151053(0x201)]('.')[_0x151053(0x215)]();xml_1['Xml'][_0x151053(0x1f6)](_0x22cf71,_0x20b615,_0x513767||_0x144de),xml_1[_0x151053(0x1f0)]['isEmptyXml'](_0x22cf71)?(await this['removeParent'](_0x43fdb9),delete this['parentComponents'][_0x188e9b]):this[_0x151053(0x218)][_0x188e9b]=_0x22cf71;}async[a81_0x5786ca(0x213)](){const _0x234432=a81_0x5786ca;!await fs_internal_1['FS'][_0x234432(0x1e7)](this[_0x234432(0x206)])&&await fs_internal_1['FS']['makeDir'](this['sourceDir']);for(const _0x4ac2f6 of this[_0x234432(0x1ea)]){!child_types_1[_0x234432(0x1f8)][_0x234432(0x212)](_0x4ac2f6[_0x234432(0x208)])?await this[_0x234432(0x209)](_0x4ac2f6):await this[_0x234432(0x20d)](_0x4ac2f6);}const _0x3cc83c=Object[_0x234432(0x20f)](this[_0x234432(0x218)]);logger['log'](_0x234432(0x1fd),this[_0x234432(0x1ea)][_0x234432(0x20e)]);while(_0x3cc83c[_0x234432(0x20e)]){const _0x4afc96=_0x3cc83c[_0x234432(0x1fa)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x2ca72e of _0x4afc96){await fs_internal_1['FS'][_0x234432(0x210)](path_1[_0x234432(0x1f8)][_0x234432(0x1f2)](this[_0x234432(0x206)],_0x2ca72e),xml_1['Xml']['convertToString'](this[_0x234432(0x218)][_0x2ca72e]));}}this[_0x234432(0x218)]={};}}exports[a81_0x5786ca(0x216)]=MDApiRemover;