const a81_0x1191=['defineProperty','parentComponents','7WPPJPb','removeAt','./child-types','removeParent','Xml','../../../core','makeDir','../../internal/fs.internal','removeFile','isDir','constructor','splice','1479776vhhoBM','components','./child-types-map','1463942MeXssZ','1gChzLE','MAX_WRITES_PER_TICK','MDApiRemover','removeChild','mdapi-remover','convertToString','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exists','split','META_EXTENSION','1018419nisrYS','removeDir','length','keys','pop','sourceDir','start','Logger','161127GsXevr','readFile','have\x20to\x20update\x20%d\x20files','default','1387789XgTgFh','Unknown\x20child\x20type\x20','1667645uoBiOo','path','../utils/xml','1480621nHZGQu','join','all'];const a81_0x15440f=a81_0x16cb;(function(_0x1c9aac,_0x15559f){const _0xd3952b=a81_0x16cb;while(!![]){try{const _0x349be1=parseInt(_0xd3952b(0xaf))*parseInt(_0xd3952b(0xd1))+-parseInt(_0xd3952b(0xbb))+parseInt(_0xd3952b(0xc9))+parseInt(_0xd3952b(0xd7))+parseInt(_0xd3952b(0xd5))*-parseInt(_0xd3952b(0xbf))+-parseInt(_0xd3952b(0xda))+parseInt(_0xd3952b(0xbe));if(_0x349be1===_0x15559f)break;else _0x1c9aac['push'](_0x1c9aac['shift']());}catch(_0x2fff91){_0x1c9aac['push'](_0x1c9aac['shift']());}}}(a81_0x1191,0xe2fad));const a81_0x4d8926=function(){let _0x49059b=!![];return function(_0x3d2cb6,_0x373003){const _0x476d2f=_0x49059b?function(){if(_0x373003){const _0x2306f3=_0x373003['apply'](_0x3d2cb6,arguments);return _0x373003=null,_0x2306f3;}}:function(){};return _0x49059b=![],_0x476d2f;};}(),a81_0x5a5c3a=a81_0x4d8926(this,function(){const _0x47037c=function(){const _0x7e7166=a81_0x16cb,_0x204a72=_0x47037c[_0x7e7166(0xb9)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x7e7166(0xb9)](_0x7e7166(0xc5));return!_0x204a72['test'](a81_0x5a5c3a);};return _0x47037c();});function a81_0x16cb(_0x5746ea,_0x220861){return a81_0x16cb=function(_0x22938,_0x5a5c3a){_0x22938=_0x22938-0xad;let _0x4d8926=a81_0x1191[_0x22938];return _0x4d8926;},a81_0x16cb(_0x5746ea,_0x220861);}a81_0x5a5c3a();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x170328){return _0x170328&&_0x170328['__esModule']?_0x170328:{'default':_0x170328};};Object[a81_0x15440f(0xad)](exports,'__esModule',{'value':!![]}),exports[a81_0x15440f(0xc1)]=void 0x0;const path_1=__importDefault(require(a81_0x15440f(0xd8))),core_1=require(a81_0x15440f(0xb4)),fs_internal_1=require(a81_0x15440f(0xb6)),xml_1=require(a81_0x15440f(0xd9)),child_types_1=__importDefault(require(a81_0x15440f(0xb1))),child_types_map_1=__importDefault(require(a81_0x15440f(0xbd))),logger=new core_1[(a81_0x15440f(0xd0))](a81_0x15440f(0xc3));class MDApiRemover{constructor(_0x1fb607,_0x1f55f9){const _0xc05dea=a81_0x15440f;this[_0xc05dea(0xbc)]=_0x1fb607,this[_0xc05dea(0xce)]=_0x1f55f9,this[_0xc05dea(0xc8)]='-meta.xml',this['MAX_WRITES_PER_TICK']=0x64,this['parentComponents']={};}async[a81_0x15440f(0xb2)](_0x34b524){const _0x5d5c2f=a81_0x15440f,_0x6a4126=path_1[_0x5d5c2f(0xd4)][_0x5d5c2f(0xdb)](this[_0x5d5c2f(0xce)],_0x34b524[_0x5d5c2f(0xd8)]),_0x2aaa46=path_1[_0x5d5c2f(0xd4)][_0x5d5c2f(0xdb)](this[_0x5d5c2f(0xce)],''+_0x34b524['path']+this[_0x5d5c2f(0xc8)]);if(await fs_internal_1['FS'][_0x5d5c2f(0xb8)](_0x6a4126)){await fs_internal_1['FS'][_0x5d5c2f(0xca)](_0x6a4126);return;}await Promise[_0x5d5c2f(0xdc)]([fs_internal_1['FS'][_0x5d5c2f(0xb7)](_0x6a4126),fs_internal_1['FS']['removeFile'](_0x2aaa46)]);}async['removeChild'](_0x2ec6d4){const _0x3aeae2=a81_0x15440f,{fileName:_0x298377,type:_0x1d56b4,path:_0xce9fef}=_0x2ec6d4,_0x3139d3=child_types_map_1[_0x3aeae2(0xd4)][_0x1d56b4];if(!_0x3139d3)throw new Error(_0x3aeae2(0xd6)+_0x1d56b4);if(!this[_0x3aeae2(0xae)][_0xce9fef]){const _0x5dd54f=path_1[_0x3aeae2(0xd4)][_0x3aeae2(0xdb)](this['sourceDir'],_0xce9fef),_0x694ead=await fs_internal_1['FS'][_0x3aeae2(0xc6)](_0x5dd54f);if(!_0x694ead)return;const _0x587b53=await fs_internal_1['FS'][_0x3aeae2(0xd2)](_0x5dd54f);this[_0x3aeae2(0xae)][_0xce9fef]=await xml_1[_0x3aeae2(0xb3)]['parse'](_0x587b53);}const _0x3723bb=this[_0x3aeae2(0xae)][_0xce9fef],_0x40de79=_0x298377[_0x3aeae2(0xc7)]('.')[_0x3aeae2(0xcd)]();xml_1[_0x3aeae2(0xb3)][_0x3aeae2(0xb0)](_0x3723bb,_0x3139d3,_0x40de79||_0x298377),this['parentComponents'][_0xce9fef]=_0x3723bb;}async[a81_0x15440f(0xcf)](){const _0x1b5371=a81_0x15440f;!await fs_internal_1['FS'][_0x1b5371(0xc6)](this['sourceDir'])&&await fs_internal_1['FS'][_0x1b5371(0xb5)](this['sourceDir']);for(const _0x21695c of this[_0x1b5371(0xbc)]){!child_types_1[_0x1b5371(0xd4)]['includes'](_0x21695c['type'])?await this['removeParent'](_0x21695c):await this[_0x1b5371(0xc2)](_0x21695c);}const _0x5a1838=Object[_0x1b5371(0xcc)](this['parentComponents']);logger['log'](_0x1b5371(0xd3),this[_0x1b5371(0xbc)][_0x1b5371(0xcb)]);while(_0x5a1838[_0x1b5371(0xcb)]){const _0x39ac77=_0x5a1838[_0x1b5371(0xba)](0x0,this[_0x1b5371(0xc0)]);for(const _0x45bf25 of _0x39ac77){await fs_internal_1['FS']['writeFile'](path_1[_0x1b5371(0xd4)]['join'](this[_0x1b5371(0xce)],_0x45bf25),xml_1[_0x1b5371(0xb3)][_0x1b5371(0xc4)](this[_0x1b5371(0xae)][_0x45bf25]));}}this[_0x1b5371(0xae)]={};}}exports['MDApiRemover']=MDApiRemover;