const a81_0x5dce=['split','all','apply','parse','mdapi-remover','635AhimzZ','__importDefault','Xml','splice','isDir','pop','531065YKyaXV','137420QrQasA','361GXylVn','./child-types','readFile','start','length','writeFile','removeChild','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','257VjrhNM','convertToString','components','log','exists','1FODDFq','removeFile','META_EXTENSION','removeParent','sourceDir','default','../../internal/fs.internal','245104nRiKLt','Logger','400juvauk','parentComponents','MAX_WRITES_PER_TICK','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','path','removeAt','MDApiRemover','makeDir','../../../core','keys','2RwTrxG','__esModule','1229LXIdHL','129595sZWAiw','type','join','157TjWvyj','constructor'];function a81_0x42d1(_0x77c8a2,_0x2b8811){return a81_0x42d1=function(_0x523f1b,_0x1c8816){_0x523f1b=_0x523f1b-0x16a;let _0x3ee4a9=a81_0x5dce[_0x523f1b];return _0x3ee4a9;},a81_0x42d1(_0x77c8a2,_0x2b8811);}const a81_0x3f1ce2=a81_0x42d1;(function(_0x5d4b34,_0x211301){const _0x468535=a81_0x42d1;while(!![]){try{const _0xd5d30f=parseInt(_0x468535(0x16d))*parseInt(_0x468535(0x194))+parseInt(_0x468535(0x183))*-parseInt(_0x468535(0x19b))+-parseInt(_0x468535(0x18e))*-parseInt(_0x468535(0x16c))+-parseInt(_0x468535(0x181))+parseInt(_0x468535(0x191))*parseInt(_0x468535(0x17a))+parseInt(_0x468535(0x175))*-parseInt(_0x468535(0x190))+parseInt(_0x468535(0x16b));if(_0xd5d30f===_0x211301)break;else _0x5d4b34['push'](_0x5d4b34['shift']());}catch(_0x355515){_0x5d4b34['push'](_0x5d4b34['shift']());}}}(a81_0x5dce,0x2b444));const a81_0x3ee4a9=function(){let _0x587507=!![];return function(_0x46f88a,_0x325f4d){const _0x2b78cd=_0x587507?function(){const _0x25a511=a81_0x42d1;if(_0x325f4d){const _0x45c43e=_0x325f4d[_0x25a511(0x198)](_0x46f88a,arguments);return _0x325f4d=null,_0x45c43e;}}:function(){};return _0x587507=![],_0x2b78cd;};}(),a81_0x1c8816=a81_0x3ee4a9(this,function(){const _0x95fa28=function(){const _0x5eea99=a81_0x42d1,_0x3649b2=_0x95fa28[_0x5eea99(0x195)](_0x5eea99(0x187))()[_0x5eea99(0x195)](_0x5eea99(0x174));return!_0x3649b2[_0x5eea99(0x186)](a81_0x1c8816);};return _0x95fa28();});a81_0x1c8816();'use strict';var __importDefault=this&&this[a81_0x3f1ce2(0x19c)]||function(_0x1bd288){const _0x5b9dd7=a81_0x3f1ce2;return _0x1bd288&&_0x1bd288[_0x5b9dd7(0x18f)]?_0x1bd288:{'default':_0x1bd288};};Object['defineProperty'](exports,a81_0x3f1ce2(0x18f),{'value':!![]}),exports[a81_0x3f1ce2(0x18a)]=void 0x0;const path_1=__importDefault(require('path')),core_1=require(a81_0x3f1ce2(0x18c)),fs_internal_1=require(a81_0x3f1ce2(0x180)),xml_1=require('../utils/xml'),child_types_1=__importDefault(require(a81_0x3f1ce2(0x16e))),child_types_map_1=__importDefault(require('./child-types-map')),logger=new core_1[(a81_0x3f1ce2(0x182))](a81_0x3f1ce2(0x19a));class MDApiRemover{constructor(_0x49d81c,_0x29ce1f){const _0x4137f6=a81_0x3f1ce2;this['components']=_0x49d81c,this[_0x4137f6(0x17e)]=_0x29ce1f,this['META_EXTENSION']='-meta.xml',this[_0x4137f6(0x185)]=0x64,this[_0x4137f6(0x184)]={};}async[a81_0x3f1ce2(0x17d)](_0x49b11b){const _0x323df6=a81_0x3f1ce2,_0x600e5f=path_1[_0x323df6(0x17f)]['join'](this[_0x323df6(0x17e)],_0x49b11b[_0x323df6(0x188)]),_0xdbf75d=path_1[_0x323df6(0x17f)][_0x323df6(0x193)](this[_0x323df6(0x17e)],''+_0x49b11b['path']+this[_0x323df6(0x17c)]);if(await fs_internal_1['FS'][_0x323df6(0x19f)](_0x600e5f)){await fs_internal_1['FS']['removeDir'](_0x600e5f);return;}await Promise[_0x323df6(0x197)]([fs_internal_1['FS'][_0x323df6(0x17b)](_0x600e5f),fs_internal_1['FS'][_0x323df6(0x17b)](_0xdbf75d)]);}async['removeChild'](_0x4b5cce){const _0x437aea=a81_0x3f1ce2,{fileName:_0x16f748,type:_0x5d2697,path:_0x327812}=_0x4b5cce,_0x43a9de=child_types_map_1[_0x437aea(0x17f)][_0x5d2697];if(!_0x43a9de)throw new Error('Unknown\x20child\x20type\x20'+_0x5d2697);if(!this[_0x437aea(0x184)][_0x327812]){const _0x418252=path_1[_0x437aea(0x17f)][_0x437aea(0x193)](this[_0x437aea(0x17e)],_0x327812),_0x21edf4=await fs_internal_1['FS'][_0x437aea(0x179)](_0x418252);if(!_0x21edf4)return;const _0x1f65f7=await fs_internal_1['FS'][_0x437aea(0x16f)](_0x418252);this['parentComponents'][_0x327812]=await xml_1[_0x437aea(0x19d)][_0x437aea(0x199)](_0x1f65f7);}const _0x3d7536=this[_0x437aea(0x184)][_0x327812],_0x2420a8=_0x16f748[_0x437aea(0x196)]('.')[_0x437aea(0x16a)]();xml_1[_0x437aea(0x19d)][_0x437aea(0x189)](_0x3d7536,_0x43a9de,_0x2420a8||_0x16f748),this[_0x437aea(0x184)][_0x327812]=_0x3d7536;}async[a81_0x3f1ce2(0x170)](){const _0x54be07=a81_0x3f1ce2;!await fs_internal_1['FS'][_0x54be07(0x179)](this['sourceDir'])&&await fs_internal_1['FS'][_0x54be07(0x18b)](this[_0x54be07(0x17e)]);for(const _0x2d8d85 of this[_0x54be07(0x177)]){!child_types_1['default']['includes'](_0x2d8d85[_0x54be07(0x192)])?await this[_0x54be07(0x17d)](_0x2d8d85):await this[_0x54be07(0x173)](_0x2d8d85);}const _0x497119=Object[_0x54be07(0x18d)](this[_0x54be07(0x184)]);logger[_0x54be07(0x178)]('have\x20to\x20update\x20%d\x20files',this[_0x54be07(0x177)][_0x54be07(0x171)]);while(_0x497119[_0x54be07(0x171)]){const _0x3c9b3=_0x497119[_0x54be07(0x19e)](0x0,this[_0x54be07(0x185)]);for(const _0x5146b8 of _0x3c9b3){await fs_internal_1['FS'][_0x54be07(0x172)](path_1[_0x54be07(0x17f)][_0x54be07(0x193)](this[_0x54be07(0x17e)],_0x5146b8),xml_1['Xml'][_0x54be07(0x176)](this[_0x54be07(0x184)][_0x5146b8]));}}this[_0x54be07(0x184)]={};}}exports[a81_0x3f1ce2(0x18a)]=MDApiRemover;