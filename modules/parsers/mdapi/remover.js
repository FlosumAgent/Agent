const a81_0x46ae=['splice','Logger','1iHgfpB','../../internal/fs.internal','test','1142379qtlmTp','start','removeFile','log','removeChild','354AskIsw','exists','3359lWFyLQ','Xml','__importDefault','1831dOENIw','973EPvHPw','./child-types-map','length','default','writeFile','223MJltxR','META_EXTENSION','split','1665530WBingB','293KjwALu','mdapi-remover','isDir','parse','removeParent','pop','sourceDir','type','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','join','constructor','MDApiRemover','removeAt','path','catch','184Rlulwf','1fiwjsc','Unknown\x20child\x20type\x20','keys','MAX_WRITES_PER_TICK','parentComponents','-meta.xml','components','apply','1840487rltVMI','includes','return\x20/\x22\x20+\x20this\x20+\x20\x22/','makeDir','isEmptyXml','3951OrQNlc','__esModule'];const a81_0x42bc36=a81_0x588a;(function(_0x352d1d,_0x3a9e67){const _0x359f1b=a81_0x588a;while(!![]){try{const _0x487cea=-parseInt(_0x359f1b(0x1f0))*parseInt(_0x359f1b(0x20c))+parseInt(_0x359f1b(0x1e0))+-parseInt(_0x359f1b(0x1e1))*parseInt(_0x359f1b(0x20f))+-parseInt(_0x359f1b(0x210))*parseInt(_0x359f1b(0x215))+parseInt(_0x359f1b(0x1f1))*-parseInt(_0x359f1b(0x1f9))+parseInt(_0x359f1b(0x1fe))*parseInt(_0x359f1b(0x20a))+parseInt(_0x359f1b(0x205))*parseInt(_0x359f1b(0x202));if(_0x487cea===_0x3a9e67)break;else _0x352d1d['push'](_0x352d1d['shift']());}catch(_0x1fb510){_0x352d1d['push'](_0x352d1d['shift']());}}}(a81_0x46ae,0xf2cfe));const a81_0x173075=function(){let _0x21e23f=!![];return function(_0x3f43f2,_0xe3d0d4){const _0x4a7da5=_0x21e23f?function(){const _0x3db4ce=a81_0x588a;if(_0xe3d0d4){const _0x53037e=_0xe3d0d4[_0x3db4ce(0x1f8)](_0x3f43f2,arguments);return _0xe3d0d4=null,_0x53037e;}}:function(){};return _0x21e23f=![],_0x4a7da5;};}(),a81_0x3d0d63=a81_0x173075(this,function(){const _0x4f4f12=function(){const _0x4df3ba=a81_0x588a,_0x554761=_0x4f4f12['constructor'](_0x4df3ba(0x1fb))()[_0x4df3ba(0x1eb)](_0x4df3ba(0x1e9));return!_0x554761[_0x4df3ba(0x204)](a81_0x3d0d63);};return _0x4f4f12();});a81_0x3d0d63();'use strict';var __importDefault=this&&this[a81_0x42bc36(0x20e)]||function(_0x5bde83){const _0x1263f8=a81_0x42bc36;return _0x5bde83&&_0x5bde83[_0x1263f8(0x1ff)]?_0x5bde83:{'default':_0x5bde83};};function a81_0x588a(_0x593608,_0x477c2){return a81_0x588a=function(_0x57d5e2,_0x3d0d63){_0x57d5e2=_0x57d5e2-0x1df;let _0x173075=a81_0x46ae[_0x57d5e2];return _0x173075;},a81_0x588a(_0x593608,_0x477c2);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a81_0x42bc36(0x1ec)]=void 0x0;const fs_internal_1=require(a81_0x42bc36(0x203)),core_1=require('../../../core'),xml_1=require('../utils/xml'),child_types_1=__importDefault(require('./child-types')),child_types_map_1=__importDefault(require(a81_0x42bc36(0x211))),path_1=__importDefault(require(a81_0x42bc36(0x1ee))),logger=new core_1[(a81_0x42bc36(0x201))](a81_0x42bc36(0x1e2));class MDApiRemover{constructor(_0x39af44,_0x5ea5b0){const _0x51ff79=a81_0x42bc36;this[_0x51ff79(0x1f7)]=_0x39af44,this[_0x51ff79(0x1e7)]=_0x5ea5b0,this[_0x51ff79(0x216)]=_0x51ff79(0x1f6),this[_0x51ff79(0x1f4)]=0x64,this[_0x51ff79(0x1f5)]={};}async[a81_0x42bc36(0x1e5)](_0x4c4171){const _0x38f7e4=a81_0x42bc36,_0x3a956b=path_1[_0x38f7e4(0x213)][_0x38f7e4(0x1ea)](this['sourceDir'],_0x4c4171[_0x38f7e4(0x1ee)]),_0x5651d0=path_1['default'][_0x38f7e4(0x1ea)](this[_0x38f7e4(0x1e7)],''+_0x4c4171['path']+this[_0x38f7e4(0x216)]);this[_0x38f7e4(0x1f5)][_0x4c4171[_0x38f7e4(0x1ee)]]&&delete this['parentComponents'][_0x4c4171[_0x38f7e4(0x1ee)]];const _0x312fbd=await fs_internal_1['FS'][_0x38f7e4(0x1e3)](_0x3a956b)[_0x38f7e4(0x1ef)](()=>![]);if(_0x312fbd){await fs_internal_1['FS']['removeDir'](_0x3a956b);return;}await Promise['all']([fs_internal_1['FS'][_0x38f7e4(0x207)](_0x3a956b),fs_internal_1['FS'][_0x38f7e4(0x207)](_0x5651d0)]);}async[a81_0x42bc36(0x209)](_0x4ad849){const _0x5dd219=a81_0x42bc36,{fileName:_0x187781,type:_0x49b379,path:_0x3bf85c}=_0x4ad849,_0x485f2c=child_types_map_1[_0x5dd219(0x213)][_0x49b379];if(!_0x485f2c)throw new Error(_0x5dd219(0x1f2)+_0x49b379);if(!this[_0x5dd219(0x1f5)][_0x3bf85c]){const _0x2d2c0a=path_1[_0x5dd219(0x213)][_0x5dd219(0x1ea)](this[_0x5dd219(0x1e7)],_0x3bf85c),_0x21cc45=await fs_internal_1['FS'][_0x5dd219(0x20b)](_0x2d2c0a);if(!_0x21cc45)return;const _0x151b83=await fs_internal_1['FS']['readFile'](_0x2d2c0a);this['parentComponents'][_0x3bf85c]=await xml_1[_0x5dd219(0x20d)][_0x5dd219(0x1e4)](_0x151b83);}const _0x1f564c=this[_0x5dd219(0x1f5)][_0x3bf85c],_0x11e07e=_0x187781[_0x5dd219(0x1df)]('.')[_0x5dd219(0x1e6)]();xml_1['Xml'][_0x5dd219(0x1ed)](_0x1f564c,_0x485f2c,_0x11e07e||_0x187781),xml_1['Xml'][_0x5dd219(0x1fd)](_0x1f564c)?(await this[_0x5dd219(0x1e5)](_0x4ad849),delete this['parentComponents'][_0x3bf85c]):this[_0x5dd219(0x1f5)][_0x3bf85c]=_0x1f564c;}async[a81_0x42bc36(0x206)](){const _0x1c9d0c=a81_0x42bc36;!await fs_internal_1['FS'][_0x1c9d0c(0x20b)](this['sourceDir'])&&await fs_internal_1['FS'][_0x1c9d0c(0x1fc)](this['sourceDir']);for(const _0x1a9b0f of this[_0x1c9d0c(0x1f7)]){!child_types_1['default'][_0x1c9d0c(0x1fa)](_0x1a9b0f[_0x1c9d0c(0x1e8)])?await this[_0x1c9d0c(0x1e5)](_0x1a9b0f):await this[_0x1c9d0c(0x209)](_0x1a9b0f);}const _0x317bc2=Object[_0x1c9d0c(0x1f3)](this['parentComponents']);logger[_0x1c9d0c(0x208)]('have\x20to\x20update\x20%d\x20files',this[_0x1c9d0c(0x1f7)][_0x1c9d0c(0x212)]);while(_0x317bc2[_0x1c9d0c(0x212)]){const _0x1c3688=_0x317bc2[_0x1c9d0c(0x200)](0x0,this[_0x1c9d0c(0x1f4)]);for(const _0x51cd8e of _0x1c3688){await fs_internal_1['FS'][_0x1c9d0c(0x214)](path_1[_0x1c9d0c(0x213)][_0x1c9d0c(0x1ea)](this[_0x1c9d0c(0x1e7)],_0x51cd8e),xml_1[_0x1c9d0c(0x20d)]['convertToString'](this[_0x1c9d0c(0x1f5)][_0x51cd8e]));}}this[_0x1c9d0c(0x1f5)]={};}}exports[a81_0x42bc36(0x1ec)]=MDApiRemover;