const a96_0x1f8e8e=a96_0x10ab;function a96_0x10ab(_0x4037a5,_0x4b0914){const _0x37f5a6=a96_0x5ec1();return a96_0x10ab=function(_0x44abdf,_0x28af4b){_0x44abdf=_0x44abdf-0x7c;let _0x5ec1bf=_0x37f5a6[_0x44abdf];return _0x5ec1bf;},a96_0x10ab(_0x4037a5,_0x4b0914);}(function(_0x57e748,_0x2cac1f){const _0x4ce1a6=a96_0x10ab,_0x72003e=_0x57e748();while(!![]){try{const _0x43568a=-parseInt(_0x4ce1a6(0xb1))/0x1+-parseInt(_0x4ce1a6(0x83))/0x2*(parseInt(_0x4ce1a6(0xa6))/0x3)+parseInt(_0x4ce1a6(0x93))/0x4*(-parseInt(_0x4ce1a6(0x7f))/0x5)+-parseInt(_0x4ce1a6(0xa3))/0x6+parseInt(_0x4ce1a6(0xae))/0x7+parseInt(_0x4ce1a6(0xb0))/0x8*(-parseInt(_0x4ce1a6(0xa8))/0x9)+parseInt(_0x4ce1a6(0x92))/0xa;if(_0x43568a===_0x2cac1f)break;else _0x72003e['push'](_0x72003e['shift']());}catch(_0x586896){_0x72003e['push'](_0x72003e['shift']());}}}(a96_0x5ec1,0x83910));const a96_0x28af4b=function(){let _0x591c7c=!![];return function(_0x23d79d,_0x52bc32){const _0x176305=_0x591c7c?function(){const _0x3bbae0=a96_0x10ab;if(_0x52bc32){const _0x26cbe8=_0x52bc32[_0x3bbae0(0x94)](_0x23d79d,arguments);return _0x52bc32=null,_0x26cbe8;}}:function(){};return _0x591c7c=![],_0x176305;};}(),a96_0x44abdf=a96_0x28af4b(this,function(){const _0x23daa9=a96_0x10ab;return a96_0x44abdf[_0x23daa9(0xa9)]()[_0x23daa9(0x86)](_0x23daa9(0x85))[_0x23daa9(0xa9)]()[_0x23daa9(0x99)](a96_0x44abdf)[_0x23daa9(0x86)]('(((.+)+)+)+$');});a96_0x44abdf();'use strict';var __importDefault=this&&this[a96_0x1f8e8e(0x9a)]||function(_0x3a9fb0){const _0x9e6d73=a96_0x1f8e8e;return _0x3a9fb0&&_0x3a9fb0[_0x9e6d73(0xb7)]?_0x3a9fb0:{'default':_0x3a9fb0};};Object[a96_0x1f8e8e(0xa5)](exports,'__esModule',{'value':!![]}),exports[a96_0x1f8e8e(0x8d)]=void 0x0;function a96_0x5ec1(){const _0x9dcc54=['toString','convertToString','remove\x20component\x20\x20%s\x20[%s]','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','parentComponents','2583686cchlHm','type','232VQNDMV','816931pFkCpb','name','removeChild','../data/child-types-map','catch','log','__esModule','exists','../utils/xml','MAX_WRITES_PER_TICK','keys','join','Logger','278925DQMkCI','path','../data/child-types','fileName','4zZHTzf','removeAt','(((.+)+)+)+$','search','length','META_EXTENSION','components','removeFile','parse','logger','MDApiRemover','removeDir','start','splice','pop','34029030AojBqh','24fVxeCj','apply','writeFile','Unknown\x20child\x20type\x20','ExperienceBundle','isDir','constructor','__importDefault','sourceDir','default','all','split','remove\x20component\x20directory\x20%s\x20[%s]','../../internal/fs.internal','Xml','removeParent','4794906VsfXgr','includes','defineProperty','1264923jkrxlY','remove\x20parent\x20component\x20%s\x20[%s]','136251GnbGba'];a96_0x5ec1=function(){return _0x9dcc54;};return a96_0x5ec1();}const fs_internal_1=require(a96_0x1f8e8e(0xa0)),core_1=require('../../../core'),xml_1=require(a96_0x1f8e8e(0xb9)),child_types_1=__importDefault(require(a96_0x1f8e8e(0x81))),child_types_map_1=__importDefault(require(a96_0x1f8e8e(0xb4))),path_1=__importDefault(require(a96_0x1f8e8e(0x80)));class MDApiRemover{constructor(_0x2c869c,_0x486b35){const _0x485528=a96_0x1f8e8e;this['components']=_0x2c869c,this['sourceDir']=_0x486b35,this[_0x485528(0x88)]='-meta.xml',this['META_EXPERIENCE_BUNDLE']='site-meta.xml',this[_0x485528(0xba)]=0x64,this[_0x485528(0x8c)]=new core_1[(_0x485528(0x7e))](MDApiRemover[_0x485528(0xb2)]),this[_0x485528(0xad)]={};}async[a96_0x1f8e8e(0xa2)](_0x420b55){const _0x2456df=a96_0x1f8e8e,_0xb4d94f=path_1[_0x2456df(0x9c)][_0x2456df(0x7d)](this['sourceDir'],_0x420b55['path']),_0x335e8c=path_1[_0x2456df(0x9c)]['join'](this[_0x2456df(0x9b)],''+_0x420b55[_0x2456df(0x80)]+this['META_EXTENSION']);this[_0x2456df(0xad)][_0x420b55[_0x2456df(0x80)]]&&delete this[_0x2456df(0xad)][_0x420b55[_0x2456df(0x80)]];const _0x101bb2=await fs_internal_1['FS'][_0x2456df(0x98)](_0xb4d94f)[_0x2456df(0xb5)](()=>![]);if(_0x101bb2){this[_0x2456df(0x8c)][_0x2456df(0xb6)](_0x2456df(0x9f),_0xb4d94f,_0x420b55[_0x2456df(0xaf)]),await fs_internal_1['FS'][_0x2456df(0x8e)](_0xb4d94f);_0x420b55[_0x2456df(0xaf)]===_0x2456df(0x97)&&await fs_internal_1['FS']['removeFile'](''+_0xb4d94f+this['META_EXPERIENCE_BUNDLE'])[_0x2456df(0xb5)](()=>void 0x0);return;}this['logger'][_0x2456df(0xb6)](_0x2456df(0xab),_0xb4d94f,_0x420b55[_0x2456df(0xaf)]),await Promise[_0x2456df(0x9d)]([fs_internal_1['FS'][_0x2456df(0x8a)](_0xb4d94f),fs_internal_1['FS'][_0x2456df(0x8a)](_0x335e8c)]);}async[a96_0x1f8e8e(0xb3)](_0x3a7683){const _0x23c124=a96_0x1f8e8e,{fileName:_0x4d8aba,type:_0x39dee5,path:_0x1771a7}=_0x3a7683,_0x4f8259=child_types_map_1[_0x23c124(0x9c)][_0x39dee5];if(!_0x4f8259)throw new Error(_0x23c124(0x96)+_0x39dee5);if(!this['parentComponents'][_0x1771a7]){const _0x1bd6ac=path_1[_0x23c124(0x9c)][_0x23c124(0x7d)](this['sourceDir'],_0x1771a7),_0x25feb0=await fs_internal_1['FS'][_0x23c124(0xb8)](_0x1bd6ac);if(!_0x25feb0)return;const _0x5a0762=await fs_internal_1['FS']['readFile'](_0x1bd6ac);this[_0x23c124(0xad)][_0x1771a7]=await xml_1[_0x23c124(0xa1)][_0x23c124(0x8b)](_0x5a0762);}const _0x208c42=this['parentComponents'][_0x1771a7],_0x29cece=_0x4d8aba[_0x23c124(0x9e)]('.')[_0x23c124(0x91)]();xml_1[_0x23c124(0xa1)][_0x23c124(0x84)](_0x208c42,_0x4f8259,_0x29cece||_0x4d8aba),xml_1[_0x23c124(0xa1)]['isEmptyXml'](_0x208c42)?(this[_0x23c124(0x8c)]['log'](_0x23c124(0xac),_0x3a7683[_0x23c124(0x80)],_0x3a7683[_0x23c124(0x82)]),await this['removeParent'](_0x3a7683),delete this[_0x23c124(0xad)][_0x1771a7]):this[_0x23c124(0xad)][_0x1771a7]=_0x208c42;}async[a96_0x1f8e8e(0x8f)](){const _0x48d884=a96_0x1f8e8e;!await fs_internal_1['FS'][_0x48d884(0xb8)](this[_0x48d884(0x9b)])&&await fs_internal_1['FS']['makeDir'](this['sourceDir']);for(const _0xefdfe2 of this[_0x48d884(0x89)]){!child_types_1[_0x48d884(0x9c)][_0x48d884(0xa4)](_0xefdfe2[_0x48d884(0xaf)])?(this[_0x48d884(0x8c)][_0x48d884(0xb6)](_0x48d884(0xa7),_0xefdfe2[_0x48d884(0x82)],_0xefdfe2['type']),await this['removeParent'](_0xefdfe2)):(this[_0x48d884(0x8c)]['log']('remove\x20child\x20component\x20%s\x20[%s]',_0xefdfe2[_0x48d884(0x82)],_0xefdfe2[_0x48d884(0xaf)]),await this[_0x48d884(0xb3)](_0xefdfe2));}const _0x20e9d1=Object[_0x48d884(0x7c)](this[_0x48d884(0xad)]);this['logger'][_0x48d884(0xb6)]('have\x20to\x20update\x20%d\x20files',this[_0x48d884(0x89)][_0x48d884(0x87)]);while(_0x20e9d1[_0x48d884(0x87)]){const _0x55408d=_0x20e9d1[_0x48d884(0x90)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x506850 of _0x55408d){await fs_internal_1['FS'][_0x48d884(0x95)](path_1[_0x48d884(0x9c)]['join'](this[_0x48d884(0x9b)],_0x506850),xml_1[_0x48d884(0xa1)][_0x48d884(0xaa)](this['parentComponents'][_0x506850]));}}this['parentComponents']={};}}exports['MDApiRemover']=MDApiRemover;