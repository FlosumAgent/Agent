const a83_0xd8bda0=a83_0x4471;(function(_0x592f96,_0xab7b85){const _0x1479cc=a83_0x4471,_0x281474=_0x592f96();while(!![]){try{const _0x4361d0=parseInt(_0x1479cc(0x1ab))/0x1+parseInt(_0x1479cc(0x1a3))/0x2+parseInt(_0x1479cc(0x188))/0x3+parseInt(_0x1479cc(0x1a9))/0x4+parseInt(_0x1479cc(0x194))/0x5*(-parseInt(_0x1479cc(0x196))/0x6)+parseInt(_0x1479cc(0x1a1))/0x7+-parseInt(_0x1479cc(0x17f))/0x8*(parseInt(_0x1479cc(0x1aa))/0x9);if(_0x4361d0===_0xab7b85)break;else _0x281474['push'](_0x281474['shift']());}catch(_0x56803e){_0x281474['push'](_0x281474['shift']());}}}(a83_0xe029,0x7ad92));const a83_0x346221=function(){let _0x497ffe=!![];return function(_0x3f9704,_0x302111){const _0xae1e31=_0x497ffe?function(){const _0x487c96=a83_0x4471;if(_0x302111){const _0x467504=_0x302111[_0x487c96(0x1a7)](_0x3f9704,arguments);return _0x302111=null,_0x467504;}}:function(){};return _0x497ffe=![],_0xae1e31;};}(),a83_0x2c6495=a83_0x346221(this,function(){const _0x3b560e=a83_0x4471;return a83_0x2c6495[_0x3b560e(0x19f)]()[_0x3b560e(0x17d)]('(((.+)+)+)+$')['toString']()['constructor'](a83_0x2c6495)[_0x3b560e(0x17d)](_0x3b560e(0x197));});a83_0x2c6495();function a83_0x4471(_0x3053ea,_0x6258f){const _0x9d5894=a83_0xe029();return a83_0x4471=function(_0x2c6495,_0x346221){_0x2c6495=_0x2c6495-0x177;let _0xe0299c=_0x9d5894[_0x2c6495];return _0xe0299c;},a83_0x4471(_0x3053ea,_0x6258f);}'use strict';var __importDefault=this&&this[a83_0xd8bda0(0x19a)]||function(_0x1a68b4){const _0x158755=a83_0xd8bda0;return _0x1a68b4&&_0x1a68b4[_0x158755(0x181)]?_0x1a68b4:{'default':_0x1a68b4};};Object['defineProperty'](exports,a83_0xd8bda0(0x181),{'value':!![]}),exports[a83_0xd8bda0(0x1af)]=void 0x0;function a83_0xe029(){const _0x315aec=['makeDir','length','./child-types','search','components','2336sadBMx','type','__esModule','remote\x20empty\x20parent\x20component\x20file\x20%s\x20[%s]','convertToString','all','Unknown\x20child\x20type\x20','catch','sourceDir','1591275JHkCvE','isEmptyXml','removeDir','removeFile','log','keys','remove\x20component\x20\x20%s\x20[%s]','logger','join','name','META_EXTENSION','path','785lCEcxr','removeAt','6084bZsKCK','(((.+)+)+)+$','default','exists','__importDefault','readFile','fileName','writeFile','parentComponents','toString','-meta.xml','4220440fxYFoF','splice','1559624lyDDhA','../../../core','removeChild','../utils/xml','apply','Xml','259996MlsKnx','57366fPHPXv','545436aktSFn','./child-types-map','removeParent','remove\x20child\x20component\x20%s\x20[%s]','MDApiRemover','parse','have\x20to\x20update\x20%d\x20files','remove\x20parent\x20component\x20%s\x20[%s]'];a83_0xe029=function(){return _0x315aec;};return a83_0xe029();}const fs_internal_1=require('../../internal/fs.internal'),core_1=require(a83_0xd8bda0(0x1a4)),xml_1=require(a83_0xd8bda0(0x1a6)),child_types_1=__importDefault(require(a83_0xd8bda0(0x17c))),child_types_map_1=__importDefault(require(a83_0xd8bda0(0x1ac))),path_1=__importDefault(require(a83_0xd8bda0(0x193)));class MDApiRemover{constructor(_0x505f32,_0x27b30d){const _0x4a351e=a83_0xd8bda0;this[_0x4a351e(0x17e)]=_0x505f32,this['sourceDir']=_0x27b30d,this[_0x4a351e(0x192)]=_0x4a351e(0x1a0),this['MAX_WRITES_PER_TICK']=0x64,this[_0x4a351e(0x18f)]=new core_1['Logger'](MDApiRemover[_0x4a351e(0x191)]),this['parentComponents']={};}async['removeParent'](_0x31538e){const _0x2207f8=a83_0xd8bda0,_0x261fb6=path_1[_0x2207f8(0x198)][_0x2207f8(0x190)](this['sourceDir'],_0x31538e[_0x2207f8(0x193)]),_0x4fe07f=path_1[_0x2207f8(0x198)]['join'](this['sourceDir'],''+_0x31538e[_0x2207f8(0x193)]+this['META_EXTENSION']);this['parentComponents'][_0x31538e['path']]&&delete this[_0x2207f8(0x19e)][_0x31538e[_0x2207f8(0x193)]];const _0x3793a3=await fs_internal_1['FS']['isDir'](_0x261fb6)[_0x2207f8(0x186)](()=>![]);if(_0x3793a3){this[_0x2207f8(0x18f)][_0x2207f8(0x18c)]('remove\x20component\x20directory\x20%s\x20[%s]',_0x261fb6,_0x31538e[_0x2207f8(0x180)]),await fs_internal_1['FS'][_0x2207f8(0x18a)](_0x261fb6);return;}this[_0x2207f8(0x18f)][_0x2207f8(0x18c)](_0x2207f8(0x18e),_0x261fb6,_0x31538e['type']),await Promise[_0x2207f8(0x184)]([fs_internal_1['FS'][_0x2207f8(0x18b)](_0x261fb6),fs_internal_1['FS'][_0x2207f8(0x18b)](_0x4fe07f)]);}async[a83_0xd8bda0(0x1a5)](_0x44acb7){const _0x5a04f4=a83_0xd8bda0,{fileName:_0x352ab3,type:_0x3296c8,path:_0x4a8731}=_0x44acb7,_0x516a7d=child_types_map_1['default'][_0x3296c8];if(!_0x516a7d)throw new Error(_0x5a04f4(0x185)+_0x3296c8);if(!this[_0x5a04f4(0x19e)][_0x4a8731]){const _0x1e3e1c=path_1[_0x5a04f4(0x198)][_0x5a04f4(0x190)](this[_0x5a04f4(0x187)],_0x4a8731),_0x4e7636=await fs_internal_1['FS'][_0x5a04f4(0x199)](_0x1e3e1c);if(!_0x4e7636)return;const _0x16f3f2=await fs_internal_1['FS'][_0x5a04f4(0x19b)](_0x1e3e1c);this['parentComponents'][_0x4a8731]=await xml_1[_0x5a04f4(0x1a8)][_0x5a04f4(0x177)](_0x16f3f2);}const _0x143ab3=this['parentComponents'][_0x4a8731],_0x5c88b3=_0x352ab3['split']('.')['pop']();xml_1[_0x5a04f4(0x1a8)][_0x5a04f4(0x195)](_0x143ab3,_0x516a7d,_0x5c88b3||_0x352ab3),xml_1[_0x5a04f4(0x1a8)][_0x5a04f4(0x189)](_0x143ab3)?(this['logger'][_0x5a04f4(0x18c)](_0x5a04f4(0x182),_0x44acb7[_0x5a04f4(0x193)],_0x44acb7[_0x5a04f4(0x19c)]),await this[_0x5a04f4(0x1ad)](_0x44acb7),delete this['parentComponents'][_0x4a8731]):this[_0x5a04f4(0x19e)][_0x4a8731]=_0x143ab3;}async['start'](){const _0x2bf9b0=a83_0xd8bda0;!await fs_internal_1['FS'][_0x2bf9b0(0x199)](this[_0x2bf9b0(0x187)])&&await fs_internal_1['FS'][_0x2bf9b0(0x17a)](this['sourceDir']);for(const _0x172e25 of this['components']){!child_types_1[_0x2bf9b0(0x198)]['includes'](_0x172e25[_0x2bf9b0(0x180)])?(this['logger'][_0x2bf9b0(0x18c)](_0x2bf9b0(0x179),_0x172e25[_0x2bf9b0(0x19c)],_0x172e25[_0x2bf9b0(0x180)]),await this[_0x2bf9b0(0x1ad)](_0x172e25)):(this[_0x2bf9b0(0x18f)][_0x2bf9b0(0x18c)](_0x2bf9b0(0x1ae),_0x172e25[_0x2bf9b0(0x19c)],_0x172e25[_0x2bf9b0(0x180)]),await this[_0x2bf9b0(0x1a5)](_0x172e25));}const _0x495eeb=Object[_0x2bf9b0(0x18d)](this['parentComponents']);this[_0x2bf9b0(0x18f)]['log'](_0x2bf9b0(0x178),this[_0x2bf9b0(0x17e)][_0x2bf9b0(0x17b)]);while(_0x495eeb[_0x2bf9b0(0x17b)]){const _0x948236=_0x495eeb[_0x2bf9b0(0x1a2)](0x0,this['MAX_WRITES_PER_TICK']);for(const _0x2bd27f of _0x948236){await fs_internal_1['FS'][_0x2bf9b0(0x19d)](path_1[_0x2bf9b0(0x198)][_0x2bf9b0(0x190)](this[_0x2bf9b0(0x187)],_0x2bd27f),xml_1[_0x2bf9b0(0x1a8)][_0x2bf9b0(0x183)](this[_0x2bf9b0(0x19e)][_0x2bd27f]));}}this[_0x2bf9b0(0x19e)]={};}}exports[a83_0xd8bda0(0x1af)]=MDApiRemover;