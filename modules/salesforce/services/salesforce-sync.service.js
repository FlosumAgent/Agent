const a110_0x1111=['getBranchComponents','salseforceService','\x0a\x20\x20\x20\x20\x20\x20','Components__r','map','%parentId%','setStatus','./salesforce.service','getBranchRecords','FLOSUM_GIT_NAMESPACE','30KQgShm','Git_Settings__c','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','replace','6yKEGfy','getAttachmentId','object','147469PlpeRV','__esModule','SalesforceQueryService','getBranchRecord','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','getRepositoryRecords','decorate','../dto/flosum-repository-sync.dto','ERR_INVALID_ATTACHMENT_ID','getComponentsFromRepository','fromBranchRecord','3bfrrEY','records','getComponents','length','fromRepositoryRecord','function','FlosumRepositorySyncDto','GET_WAITING_BRANCHES_QUERY','%id%','objectId','query','patchObject','getRepositoryRecord','__decorate','362759CKyaKL','defineProperty','repositoryId','disableSync','metadata','462983wMVmPN','salesforceQuery','28822ewLcXZ','constructor','%name%','GET_REPOSITORY_QUERY','objectType','test','Sync_In_Progress__c','SYNC_ATTACHMENT_FOR_BRANCH_NAME','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','SalesforceService','push','./salesforce-query.service','571sJfezV','290NubpDQ','__metadata','SalesforceSyncService','return\x20/\x22\x20+\x20this\x20+\x20\x22/','396113tYkXcs','setLastSha','typedi','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','1943395MBrqmt','getOwnPropertyDescriptor','GET_BRANCH_QUERY'];const a110_0x51ff18=a110_0x4af4;(function(_0x3dbfb2,_0x3397d3){const _0x483021=a110_0x4af4;while(!![]){try{const _0x2bc114=parseInt(_0x483021(0xde))*-parseInt(_0x483021(0xd0))+-parseInt(_0x483021(0xf1))*parseInt(_0x483021(0xf2))+parseInt(_0x483021(0xf6))+parseInt(_0x483021(0x10e))+-parseInt(_0x483021(0xe5))*-parseInt(_0x483021(0x107))+-parseInt(_0x483021(0xfa))+parseInt(_0x483021(0x10b))*parseInt(_0x483021(0xe3));if(_0x2bc114===_0x3397d3)break;else _0x3dbfb2['push'](_0x3dbfb2['shift']());}catch(_0x1206d4){_0x3dbfb2['push'](_0x3dbfb2['shift']());}}}(a110_0x1111,0xf16ce));const a110_0x4a603f=function(){let _0x10deb5=!![];return function(_0x1dcd30,_0xd49367){const _0x549377=_0x10deb5?function(){if(_0xd49367){const _0x4588f0=_0xd49367['apply'](_0x1dcd30,arguments);return _0xd49367=null,_0x4588f0;}}:function(){};return _0x10deb5=![],_0x549377;};}(),a110_0xf3d524=a110_0x4a603f(this,function(){const _0x464c65=function(){const _0x2f4387=a110_0x4af4,_0x45b0ea=_0x464c65[_0x2f4387(0xe6)](_0x2f4387(0xf5))()['constructor'](_0x2f4387(0x112));return!_0x45b0ea[_0x2f4387(0xea)](a110_0xf3d524);};return _0x464c65();});a110_0xf3d524();'use strict';var __decorate=this&&this[a110_0x51ff18(0xdd)]||function(_0x33b598,_0x1d1466,_0x3d527e,_0x2efe02){const _0x115668=a110_0x51ff18;var _0x25877d=arguments['length'],_0x1fd2cd=_0x25877d<0x3?_0x1d1466:_0x2efe02===null?_0x2efe02=Object[_0x115668(0xfb)](_0x1d1466,_0x3d527e):_0x2efe02,_0x58c73b;if(typeof Reflect===_0x115668(0x10d)&&typeof Reflect[_0x115668(0xcb)]===_0x115668(0xd5))_0x1fd2cd=Reflect['decorate'](_0x33b598,_0x1d1466,_0x3d527e,_0x2efe02);else{for(var _0xe087f7=_0x33b598[_0x115668(0xd3)]-0x1;_0xe087f7>=0x0;_0xe087f7--)if(_0x58c73b=_0x33b598[_0xe087f7])_0x1fd2cd=(_0x25877d<0x3?_0x58c73b(_0x1fd2cd):_0x25877d>0x3?_0x58c73b(_0x1d1466,_0x3d527e,_0x1fd2cd):_0x58c73b(_0x1d1466,_0x3d527e))||_0x1fd2cd;}return _0x25877d>0x3&&_0x1fd2cd&&Object[_0x115668(0xdf)](_0x1d1466,_0x3d527e,_0x1fd2cd),_0x1fd2cd;},__metadata=this&&this[a110_0x51ff18(0xf3)]||function(_0x23d5f6,_0x211d3e){const _0x26a454=a110_0x51ff18;if(typeof Reflect===_0x26a454(0x10d)&&typeof Reflect[_0x26a454(0xe2)]==='function')return Reflect[_0x26a454(0xe2)](_0x23d5f6,_0x211d3e);};function a110_0x4af4(_0x1a997f,_0x40ca16){return a110_0x4af4=function(_0x2dc8eb,_0xf3d524){_0x2dc8eb=_0x2dc8eb-0xcb;let _0x4a603f=a110_0x1111[_0x2dc8eb];return _0x4a603f;},a110_0x4af4(_0x1a997f,_0x40ca16);}Object['defineProperty'](exports,a110_0x51ff18(0x10f),{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require(a110_0x51ff18(0xf8)),constants_1=require('../../../constants'),errors_1=require('../../../constants/errors'),flosum_repository_sync_dto_1=require(a110_0x51ff18(0xcc)),queries_1=require('../queries'),salesforce_query_service_1=require(a110_0x51ff18(0xf0)),salesforce_service_1=require(a110_0x51ff18(0x104));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x321e67,_0x429399){const _0x64cdc6=a110_0x51ff18;this[_0x64cdc6(0xe4)]=_0x321e67,this[_0x64cdc6(0xfe)]=_0x429399;}async[a110_0x51ff18(0xd2)](_0x131c2f){const _0x2f46cb=a110_0x51ff18,_0x597278=await this[_0x2f46cb(0xe4)][_0x2f46cb(0xda)](_0x131c2f),_0x3aa844=[];for(const _0x8f55a8 of _0x597278){const _0x31f7ea=_0x8f55a8[constants_1['FLOSUM_NAMESPACE']+_0x2f46cb(0x100)][_0x2f46cb(0xd1)][0x0];_0x3aa844[_0x2f46cb(0xef)](_0x31f7ea['Id']);}return _0x3aa844;}async[a110_0x51ff18(0x113)](){const _0x4b0d94=a110_0x51ff18,_0x315526=await this[_0x4b0d94(0xe4)]['query'](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0x315526[_0x4b0d94(0x101)](_0x23b686=>flosum_repository_sync_dto_1[_0x4b0d94(0xd6)]['fromRepositoryRecord'](_0x23b686));}async[a110_0x51ff18(0x105)](){const _0x182048=a110_0x51ff18,_0x5b7673=await this[_0x182048(0xe4)][_0x182048(0xda)](queries_1[_0x182048(0xd7)]);return _0x5b7673[_0x182048(0x101)](_0x28881b=>flosum_repository_sync_dto_1[_0x182048(0xd6)][_0x182048(0xcf)](_0x28881b));}async[a110_0x51ff18(0xdc)](_0x4e38a9){const _0x589fec=a110_0x51ff18,_0x10df31=await this[_0x589fec(0xe4)]['query'](queries_1[_0x589fec(0xe8)][_0x589fec(0x10a)](_0x589fec(0xd8),_0x4e38a9));return flosum_repository_sync_dto_1[_0x589fec(0xd6)][_0x589fec(0xd4)](_0x10df31[0x0]);}async[a110_0x51ff18(0x111)](_0x3782ac){const _0x163b67=a110_0x51ff18,_0x3fbfc0=await this[_0x163b67(0xe4)][_0x163b67(0xda)](queries_1[_0x163b67(0xfc)][_0x163b67(0x10a)]('%id%',_0x3782ac));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x163b67(0xcf)](_0x3fbfc0[0x0]);}async[a110_0x51ff18(0xce)](_0x140090){const _0x2f0807=a110_0x51ff18,_0x1c452b=_0x2f0807(0xff)+queries_1['GET_COMPONENTS_QUERY']+_0x2f0807(0xf9)+_0x140090+'\x27';return this['getComponents'](_0x1c452b);}async[a110_0x51ff18(0xfd)](_0x1bf02a){const _0x470404=a110_0x51ff18,_0x105b67='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+queries_1['GET_COMPONENTS_QUERY']+_0x470404(0xed)+_0x1bf02a+'\x27';return this[_0x470404(0xd2)](_0x105b67);}async[a110_0x51ff18(0x10c)](_0x31093c){const _0x36e9c4=a110_0x51ff18;var _0x33b402;const _0x177eee=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY'][_0x36e9c4(0x10a)](_0x36e9c4(0x102),_0x31093c[_0x36e9c4(0xd9)])[_0x36e9c4(0x10a)](_0x36e9c4(0xe7),_0x31093c[_0x36e9c4(0xe0)]?constants_1[_0x36e9c4(0x109)]:constants_1[_0x36e9c4(0xec)]),_0x284524=await this[_0x36e9c4(0xe4)]['query'](_0x177eee),_0x241b61=(_0x33b402=_0x284524[0x0])===null||_0x33b402===void 0x0?void 0x0:_0x33b402['Id'];if(!_0x241b61)throw new Error(errors_1[_0x36e9c4(0xcd)]);return _0x241b61;}async[a110_0x51ff18(0x103)](_0x339a95,_0x372d85){const _0x27128a=a110_0x51ff18;await this['salseforceService'][_0x27128a(0xdb)](_0x339a95[_0x27128a(0xe9)],_0x339a95[_0x27128a(0xd9)],{[constants_1[_0x27128a(0x106)]+'Status__c']:_0x372d85});}async[a110_0x51ff18(0xf7)](_0x202320,_0x85097f){const _0x213de0=a110_0x51ff18;await this[_0x213de0(0xfe)][_0x213de0(0xdb)](_0x202320[_0x213de0(0xe9)],_0x202320['objectId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Sha__c']:_0x85097f});}async[a110_0x51ff18(0xe1)](_0x54d988){const _0x37e97e=a110_0x51ff18;await this['salseforceService']['patchObject'](constants_1['FLOSUM_GIT_NAMESPACE']+_0x37e97e(0x108),_0x54d988,{[constants_1[_0x37e97e(0x106)]+_0x37e97e(0xeb)]:![]});}};SalesforceSyncService=__decorate([typedi_1['Service'](),__metadata('design:paramtypes',[salesforce_query_service_1[a110_0x51ff18(0x110)],salesforce_service_1[a110_0x51ff18(0xee)]])],SalesforceSyncService),exports[a110_0x51ff18(0xf4)]=SalesforceSyncService;