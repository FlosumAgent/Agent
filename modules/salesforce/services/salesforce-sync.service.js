const a110_0x5b3d=['__metadata','GET_WAITING_REPOSITORIES_QUERY','FlosumRepositorySyncDto','design:paramtypes','getBranchComponents','defineProperty','getAttachmentId','2647KdTAGD','object','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','1103582PzMpxO','salseforceService','patchObject','992108TlhDAW','test','1736ebmycl','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','29AAYyHG','fromRepositoryRecord','GET_COMPONENTS_QUERY','repositoryId','Sync_In_Progress__c','255cIDySI','__esModule','Status__c','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','decorate','getRepositoryRecord','replace','getRepositoryRecords','ERR_INVALID_ATTACHMENT_ID','disableSync','getComponentsFromRepository','SalesforceService','salesforceQuery','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','setLastSha','FLOSUM_NAMESPACE','__decorate','records','map','1161159TIvLKA','GET_BRANCH_QUERY','push','%parentId%','SalesforceSyncService','478693CmWNrp','function','objectType','getBranchRecords','./salesforce.service','22781oUjUZV','SalesforceQueryService','20NjVpFT','../dto/flosum-repository-sync.dto','apply','../queries','./salesforce-query.service','../../../constants/errors','fromBranchRecord','Git_Settings__c','getBranchRecord','\x0a\x20\x20\x20\x20\x20\x20','getComponents','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','FLOSUM_GIT_NAMESPACE','objectId','query','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'];const a110_0x5d8dd3=a110_0x5844;(function(_0x3b3dff,_0xa0a14d){const _0x244caf=a110_0x5844;while(!![]){try{const _0x745281=-parseInt(_0x244caf(0x1a5))*-parseInt(_0x244caf(0x1a7))+parseInt(_0x244caf(0x1a0))+parseInt(_0x244caf(0x1cb))*parseInt(_0x244caf(0x1c9))+parseInt(_0x244caf(0x1ac))*-parseInt(_0x244caf(0x19d))+parseInt(_0x244caf(0x1bf))+-parseInt(_0x244caf(0x1a3))+-parseInt(_0x244caf(0x1c4));if(_0x745281===_0xa0a14d)break;else _0x3b3dff['push'](_0x3b3dff['shift']());}catch(_0x621fcc){_0x3b3dff['push'](_0x3b3dff['shift']());}}}(a110_0x5b3d,0x98917));function a110_0x5844(_0x4a7889,_0x4e37b1){return a110_0x5844=function(_0x3083ca,_0x58b52a){_0x3083ca=_0x3083ca-0x186;let _0x10ecf4=a110_0x5b3d[_0x3083ca];return _0x10ecf4;},a110_0x5844(_0x4a7889,_0x4e37b1);}const a110_0x10ecf4=function(){let _0x1d7ce2=!![];return function(_0x406a2a,_0x41e038){const _0x54a7f1=_0x1d7ce2?function(){const _0x197afd=a110_0x5844;if(_0x41e038){const _0x5d6b98=_0x41e038[_0x197afd(0x187)](_0x406a2a,arguments);return _0x41e038=null,_0x5d6b98;}}:function(){};return _0x1d7ce2=![],_0x54a7f1;};}(),a110_0x58b52a=a110_0x10ecf4(this,function(){const _0x13578f=function(){const _0x10bce0=a110_0x5844,_0x4c8f5c=_0x13578f[_0x10bce0(0x191)](_0x10bce0(0x190))()['constructor'](_0x10bce0(0x1b9));return!_0x4c8f5c[_0x10bce0(0x1a4)](a110_0x58b52a);};return _0x13578f();});a110_0x58b52a();'use strict';var __decorate=this&&this[a110_0x5d8dd3(0x1bc)]||function(_0x26af13,_0x36ac7e,_0x3f2af3,_0x533f61){const _0x5b8f1b=a110_0x5d8dd3;var _0x56ecd5=arguments['length'],_0x349abd=_0x56ecd5<0x3?_0x36ac7e:_0x533f61===null?_0x533f61=Object['getOwnPropertyDescriptor'](_0x36ac7e,_0x3f2af3):_0x533f61,_0x1bd140;if(typeof Reflect===_0x5b8f1b(0x19e)&&typeof Reflect[_0x5b8f1b(0x1b0)]===_0x5b8f1b(0x1c5))_0x349abd=Reflect[_0x5b8f1b(0x1b0)](_0x26af13,_0x36ac7e,_0x3f2af3,_0x533f61);else{for(var _0x5a6077=_0x26af13['length']-0x1;_0x5a6077>=0x0;_0x5a6077--)if(_0x1bd140=_0x26af13[_0x5a6077])_0x349abd=(_0x56ecd5<0x3?_0x1bd140(_0x349abd):_0x56ecd5>0x3?_0x1bd140(_0x36ac7e,_0x3f2af3,_0x349abd):_0x1bd140(_0x36ac7e,_0x3f2af3))||_0x349abd;}return _0x56ecd5>0x3&&_0x349abd&&Object[_0x5b8f1b(0x19b)](_0x36ac7e,_0x3f2af3,_0x349abd),_0x349abd;},__metadata=this&&this[a110_0x5d8dd3(0x196)]||function(_0x60e2ca,_0x3fab5d){const _0x3849f1=a110_0x5d8dd3;if(typeof Reflect===_0x3849f1(0x19e)&&typeof Reflect['metadata']===_0x3849f1(0x1c5))return Reflect['metadata'](_0x60e2ca,_0x3fab5d);};Object[a110_0x5d8dd3(0x19b)](exports,a110_0x5d8dd3(0x1ad),{'value':!![]}),exports[a110_0x5d8dd3(0x1c3)]=void 0x0;const typedi_1=require('typedi'),constants_1=require('../../../constants'),errors_1=require(a110_0x5d8dd3(0x18a)),flosum_repository_sync_dto_1=require(a110_0x5d8dd3(0x186)),queries_1=require(a110_0x5d8dd3(0x188)),salesforce_query_service_1=require(a110_0x5d8dd3(0x189)),salesforce_service_1=require(a110_0x5d8dd3(0x1c8));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x26e7d8,_0xd9ce06){const _0x1ff0d4=a110_0x5d8dd3;this[_0x1ff0d4(0x1b8)]=_0x26e7d8,this[_0x1ff0d4(0x1a1)]=_0xd9ce06;}async[a110_0x5d8dd3(0x18f)](_0x3ad529){const _0x33d109=a110_0x5d8dd3,_0x19ae22=await this[_0x33d109(0x1b8)][_0x33d109(0x194)](_0x3ad529),_0x474e3a=[];for(const _0x4fd299 of _0x19ae22){const _0x4dc6cd=_0x4fd299[constants_1[_0x33d109(0x1bb)]+'Components__r'][_0x33d109(0x1bd)][0x0];_0x474e3a[_0x33d109(0x1c1)](_0x4dc6cd['Id']);}return _0x474e3a;}async[a110_0x5d8dd3(0x1b3)](){const _0x2eb9ad=a110_0x5d8dd3,_0x4e026c=await this['salesforceQuery'][_0x2eb9ad(0x194)](queries_1[_0x2eb9ad(0x197)]);return _0x4e026c[_0x2eb9ad(0x1be)](_0x25794f=>flosum_repository_sync_dto_1[_0x2eb9ad(0x198)]['fromRepositoryRecord'](_0x25794f));}async[a110_0x5d8dd3(0x1c7)](){const _0x1a825b=a110_0x5d8dd3,_0x11c780=await this[_0x1a825b(0x1b8)][_0x1a825b(0x194)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x11c780[_0x1a825b(0x1be)](_0x2981d2=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x1a825b(0x18b)](_0x2981d2));}async[a110_0x5d8dd3(0x1b1)](_0x1d6bea){const _0x4b5de3=a110_0x5d8dd3,_0x30983f=await this['salesforceQuery']['query'](queries_1['GET_REPOSITORY_QUERY']['replace']('%id%',_0x1d6bea));return flosum_repository_sync_dto_1[_0x4b5de3(0x198)][_0x4b5de3(0x1a8)](_0x30983f[0x0]);}async[a110_0x5d8dd3(0x18d)](_0x2bbe11){const _0x223d8e=a110_0x5d8dd3,_0x3db606=await this[_0x223d8e(0x1b8)]['query'](queries_1[_0x223d8e(0x1c0)][_0x223d8e(0x1b2)]('%id%',_0x2bbe11));return flosum_repository_sync_dto_1[_0x223d8e(0x198)][_0x223d8e(0x18b)](_0x3db606[0x0]);}async[a110_0x5d8dd3(0x1b6)](_0x4725c4){const _0x55ff79=a110_0x5d8dd3,_0x3310b9=_0x55ff79(0x18e)+queries_1[_0x55ff79(0x1a9)]+_0x55ff79(0x19f)+_0x4725c4+'\x27';return this[_0x55ff79(0x18f)](_0x3310b9);}async[a110_0x5d8dd3(0x19a)](_0x24b488){const _0x42f24f=a110_0x5d8dd3,_0x227b9c=_0x42f24f(0x1af)+queries_1['GET_COMPONENTS_QUERY']+_0x42f24f(0x195)+_0x24b488+'\x27';return this['getComponents'](_0x227b9c);}async[a110_0x5d8dd3(0x19c)](_0x10c0a0){const _0x1bd76f=a110_0x5d8dd3;var _0x206b65;const _0x15a61f=queries_1[_0x1bd76f(0x1a6)][_0x1bd76f(0x1b2)](_0x1bd76f(0x1c2),_0x10c0a0[_0x1bd76f(0x193)])['replace']('%name%',_0x10c0a0[_0x1bd76f(0x1aa)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']),_0x1dffb7=await this[_0x1bd76f(0x1b8)]['query'](_0x15a61f),_0xe226ce=(_0x206b65=_0x1dffb7[0x0])===null||_0x206b65===void 0x0?void 0x0:_0x206b65['Id'];if(!_0xe226ce)throw new Error(errors_1[_0x1bd76f(0x1b4)]);return _0xe226ce;}async['setStatus'](_0x52c5be,_0x40d27c){const _0x50d884=a110_0x5d8dd3;await this[_0x50d884(0x1a1)][_0x50d884(0x1a2)](_0x52c5be[_0x50d884(0x1c6)],_0x52c5be[_0x50d884(0x193)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x50d884(0x1ae)]:_0x40d27c});}async[a110_0x5d8dd3(0x1ba)](_0x407f76,_0x256844){const _0x472287=a110_0x5d8dd3;await this[_0x472287(0x1a1)][_0x472287(0x1a2)](_0x407f76[_0x472287(0x1c6)],_0x407f76['objectId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Sha__c']:_0x256844});}async[a110_0x5d8dd3(0x1b5)](_0x757882){const _0xbb1853=a110_0x5d8dd3;await this[_0xbb1853(0x1a1)][_0xbb1853(0x1a2)](constants_1[_0xbb1853(0x192)]+_0xbb1853(0x18c),_0x757882,{[constants_1[_0xbb1853(0x192)]+_0xbb1853(0x1ab)]:![]});}};SalesforceSyncService=__decorate([typedi_1['Service'](),__metadata(a110_0x5d8dd3(0x199),[salesforce_query_service_1[a110_0x5d8dd3(0x1ca)],salesforce_service_1[a110_0x5d8dd3(0x1b7)]])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;