const a110_0x16c4=['540066OJjrrt','objectId','salesforceQuery','Components__r','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../../constants/errors','ERR_INVALID_ATTACHMENT_ID','records','getBranchRecord','getRepositoryRecord','replace','getBranchRecords','__metadata','setStatus','Service','1293944JJpVJE','metadata','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','SalesforceService','repositoryId','Sync_In_Progress__c','1111962wYDRhv','1064359URGmDZ','__decorate','setLastSha','getComponents','%id%','../dto/flosum-repository-sync.dto','./salesforce-query.service','disableSync','GET_BRANCH_QUERY','SalesforceSyncService','patchObject','../queries','FlosumRepositorySyncDto','map','constructor','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','GET_WAITING_BRANCHES_QUERY','SYNC_ATTACHMENT_FOR_BRANCH_NAME','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','1KBBrjR','object','Git_Settings__c','./salesforce.service','design:paramtypes','GET_WAITING_REPOSITORIES_QUERY','%name%','fromBranchRecord','getAttachmentId','FLOSUM_NAMESPACE','GET_COMPONENTS_QUERY','apply','193231lekFJZ','1257065PkvCpv','length','fromRepositoryRecord','decorate','function','salseforceService','GET_REPOSITORY_QUERY','474446wylAwv','query','Sha__c','\x0a\x20\x20\x20\x20\x20\x20','%parentId%','../../../constants','getRepositoryRecords','FLOSUM_GIT_NAMESPACE'];const a110_0x308f71=a110_0x6fa4;(function(_0x3d0ade,_0x218176){const _0x4c069c=a110_0x6fa4;while(!![]){try{const _0x443a8d=parseInt(_0x4c069c(0xe3))+parseInt(_0x4c069c(0xc2))+-parseInt(_0x4c069c(0xbc))+-parseInt(_0x4c069c(0xc3))+-parseInt(_0x4c069c(0xe2))+parseInt(_0x4c069c(0xad))+parseInt(_0x4c069c(0xea))*parseInt(_0x4c069c(0xd6));if(_0x443a8d===_0x218176)break;else _0x3d0ade['push'](_0x3d0ade['shift']());}catch(_0x44bc9b){_0x3d0ade['push'](_0x3d0ade['shift']());}}}(a110_0x16c4,0xcb205));const a110_0x4e0240=function(){let _0x29ce21=!![];return function(_0x251fec,_0x9c4874){const _0xd559bb=_0x29ce21?function(){const _0x19df17=a110_0x6fa4;if(_0x9c4874){const _0x3b661a=_0x9c4874[_0x19df17(0xe1)](_0x251fec,arguments);return _0x9c4874=null,_0x3b661a;}}:function(){};return _0x29ce21=![],_0xd559bb;};}(),a110_0x20115e=a110_0x4e0240(this,function(){const _0x59b9b7=function(){const _0x1ba2f4=a110_0x6fa4,_0x376b30=_0x59b9b7[_0x1ba2f4(0xd1)](_0x1ba2f4(0xb1))()[_0x1ba2f4(0xd1)](_0x1ba2f4(0xbe));return!_0x376b30['test'](a110_0x20115e);};return _0x59b9b7();});a110_0x20115e();'use strict';var __decorate=this&&this[a110_0x308f71(0xc4)]||function(_0x5c54e2,_0xcb5c6d,_0x13f56e,_0xfb7d62){const _0xfa438b=a110_0x308f71;var _0x4f9c83=arguments[_0xfa438b(0xe4)],_0x1b781c=_0x4f9c83<0x3?_0xcb5c6d:_0xfb7d62===null?_0xfb7d62=Object['getOwnPropertyDescriptor'](_0xcb5c6d,_0x13f56e):_0xfb7d62,_0x406f7b;if(typeof Reflect===_0xfa438b(0xd7)&&typeof Reflect['decorate']===_0xfa438b(0xe7))_0x1b781c=Reflect[_0xfa438b(0xe6)](_0x5c54e2,_0xcb5c6d,_0x13f56e,_0xfb7d62);else{for(var _0x38215f=_0x5c54e2[_0xfa438b(0xe4)]-0x1;_0x38215f>=0x0;_0x38215f--)if(_0x406f7b=_0x5c54e2[_0x38215f])_0x1b781c=(_0x4f9c83<0x3?_0x406f7b(_0x1b781c):_0x4f9c83>0x3?_0x406f7b(_0xcb5c6d,_0x13f56e,_0x1b781c):_0x406f7b(_0xcb5c6d,_0x13f56e))||_0x1b781c;}return _0x4f9c83>0x3&&_0x1b781c&&Object['defineProperty'](_0xcb5c6d,_0x13f56e,_0x1b781c),_0x1b781c;},__metadata=this&&this[a110_0x308f71(0xb9)]||function(_0x3113c8,_0x4e7073){const _0x39ce94=a110_0x308f71;if(typeof Reflect===_0x39ce94(0xd7)&&typeof Reflect[_0x39ce94(0xbd)]===_0x39ce94(0xe7))return Reflect[_0x39ce94(0xbd)](_0x3113c8,_0x4e7073);};function a110_0x6fa4(_0x44f248,_0x3e6eb2){return a110_0x6fa4=function(_0x4573d6,_0x20115e){_0x4573d6=_0x4573d6-0xac;let _0x4e0240=a110_0x16c4[_0x4573d6];return _0x4e0240;},a110_0x6fa4(_0x44f248,_0x3e6eb2);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a110_0x308f71(0xcc)]=void 0x0;const typedi_1=require('typedi'),constants_1=require(a110_0x308f71(0xef)),errors_1=require(a110_0x308f71(0xb2)),flosum_repository_sync_dto_1=require(a110_0x308f71(0xc8)),queries_1=require(a110_0x308f71(0xce)),salesforce_query_service_1=require(a110_0x308f71(0xc9)),salesforce_service_1=require(a110_0x308f71(0xd9));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x16498a,_0x36295a){const _0x2f88bf=a110_0x308f71;this['salesforceQuery']=_0x16498a,this[_0x2f88bf(0xe8)]=_0x36295a;}async['getComponents'](_0x51089a){const _0x4ecf82=a110_0x308f71,_0x106084=await this[_0x4ecf82(0xaf)][_0x4ecf82(0xeb)](_0x51089a),_0x1da076=[];for(const _0x4f3a64 of _0x106084){const _0x2092e6=_0x4f3a64[constants_1[_0x4ecf82(0xdf)]+_0x4ecf82(0xb0)][_0x4ecf82(0xb4)][0x0];_0x1da076['push'](_0x2092e6['Id']);}return _0x1da076;}async[a110_0x308f71(0xf0)](){const _0x46a11e=a110_0x308f71,_0x4c09b5=await this[_0x46a11e(0xaf)][_0x46a11e(0xeb)](queries_1[_0x46a11e(0xdb)]);return _0x4c09b5[_0x46a11e(0xd0)](_0x1709ee=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x46a11e(0xe5)](_0x1709ee));}async[a110_0x308f71(0xb8)](){const _0x11fe8c=a110_0x308f71,_0x227771=await this[_0x11fe8c(0xaf)]['query'](queries_1[_0x11fe8c(0xd3)]);return _0x227771[_0x11fe8c(0xd0)](_0x1c6289=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromBranchRecord'](_0x1c6289));}async[a110_0x308f71(0xb6)](_0x1517a3){const _0x268156=a110_0x308f71,_0x84fd4c=await this[_0x268156(0xaf)][_0x268156(0xeb)](queries_1[_0x268156(0xe9)][_0x268156(0xb7)]('%id%',_0x1517a3));return flosum_repository_sync_dto_1[_0x268156(0xcf)]['fromRepositoryRecord'](_0x84fd4c[0x0]);}async[a110_0x308f71(0xb5)](_0x59ce20){const _0x39a3fd=a110_0x308f71,_0xe2155d=await this[_0x39a3fd(0xaf)][_0x39a3fd(0xeb)](queries_1[_0x39a3fd(0xcb)][_0x39a3fd(0xb7)](_0x39a3fd(0xc7),_0x59ce20));return flosum_repository_sync_dto_1[_0x39a3fd(0xcf)][_0x39a3fd(0xdd)](_0xe2155d[0x0]);}async['getComponentsFromRepository'](_0x16d633){const _0x44fabd=a110_0x308f71,_0x256719=_0x44fabd(0xed)+queries_1[_0x44fabd(0xe0)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x16d633+'\x27';return this[_0x44fabd(0xc6)](_0x256719);}async['getBranchComponents'](_0x20e099){const _0x207be0=a110_0x308f71,_0x5b3574=_0x207be0(0xd5)+queries_1[_0x207be0(0xe0)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0x20e099+'\x27';return this[_0x207be0(0xc6)](_0x5b3574);}async[a110_0x308f71(0xde)](_0x201b9a){const _0x380a5c=a110_0x308f71;var _0xffa7fc;const _0x21c123=queries_1[_0x380a5c(0xd2)][_0x380a5c(0xb7)](_0x380a5c(0xee),_0x201b9a[_0x380a5c(0xae)])['replace'](_0x380a5c(0xdc),_0x201b9a[_0x380a5c(0xc0)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x380a5c(0xd4)]),_0x2d17e5=await this[_0x380a5c(0xaf)][_0x380a5c(0xeb)](_0x21c123),_0x4ce3c3=(_0xffa7fc=_0x2d17e5[0x0])===null||_0xffa7fc===void 0x0?void 0x0:_0xffa7fc['Id'];if(!_0x4ce3c3)throw new Error(errors_1[_0x380a5c(0xb3)]);return _0x4ce3c3;}async[a110_0x308f71(0xba)](_0x505f37,_0x5dab5c){const _0xc6006=a110_0x308f71;await this[_0xc6006(0xe8)][_0xc6006(0xcd)](_0x505f37['objectType'],_0x505f37['objectId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Status__c']:_0x5dab5c});}async[a110_0x308f71(0xc5)](_0x1b6545,_0x2f04d4){const _0x47b774=a110_0x308f71;await this['salseforceService'][_0x47b774(0xcd)](_0x1b6545['objectType'],_0x1b6545['objectId'],{[constants_1[_0x47b774(0xac)]+_0x47b774(0xec)]:_0x2f04d4});}async[a110_0x308f71(0xca)](_0x46d31e){const _0x2847f0=a110_0x308f71;await this[_0x2847f0(0xe8)][_0x2847f0(0xcd)](constants_1[_0x2847f0(0xac)]+_0x2847f0(0xd8),_0x46d31e,{[constants_1[_0x2847f0(0xac)]+_0x2847f0(0xc1)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a110_0x308f71(0xbb)](),__metadata(a110_0x308f71(0xda),[salesforce_query_service_1['SalesforceQueryService'],salesforce_service_1[a110_0x308f71(0xbf)]])],SalesforceSyncService),exports[a110_0x308f71(0xcc)]=SalesforceSyncService;