const a111_0x679f56=a111_0x213f;(function(_0x69621e,_0x4481fe){const _0x2321f0=a111_0x213f,_0x13a930=_0x69621e();while(!![]){try{const _0x3ae629=parseInt(_0x2321f0(0x203))/0x1+-parseInt(_0x2321f0(0x1c6))/0x2+-parseInt(_0x2321f0(0x1e8))/0x3*(-parseInt(_0x2321f0(0x1cd))/0x4)+parseInt(_0x2321f0(0x1cb))/0x5*(-parseInt(_0x2321f0(0x20e))/0x6)+parseInt(_0x2321f0(0x1d8))/0x7+parseInt(_0x2321f0(0x1c9))/0x8*(parseInt(_0x2321f0(0x1c4))/0x9)+-parseInt(_0x2321f0(0x1d2))/0xa*(parseInt(_0x2321f0(0x1ea))/0xb);if(_0x3ae629===_0x4481fe)break;else _0x13a930['push'](_0x13a930['shift']());}catch(_0x507fbe){_0x13a930['push'](_0x13a930['shift']());}}}(a111_0x4739,0x3a2c6));function a111_0x213f(_0xebcf2b,_0x5812aa){const _0x15c12d=a111_0x4739();return a111_0x213f=function(_0x1cce12,_0x2a9d41){_0x1cce12=_0x1cce12-0x1c1;let _0x4739ce=_0x15c12d[_0x1cce12];return _0x4739ce;},a111_0x213f(_0xebcf2b,_0x5812aa);}const a111_0x2a9d41=function(){let _0x5ee1f8=!![];return function(_0x1b3432,_0x32d56f){const _0x16e00a=_0x5ee1f8?function(){const _0x255f82=a111_0x213f;if(_0x32d56f){const _0x407892=_0x32d56f[_0x255f82(0x1d7)](_0x1b3432,arguments);return _0x32d56f=null,_0x407892;}}:function(){};return _0x5ee1f8=![],_0x16e00a;};}(),a111_0x1cce12=a111_0x2a9d41(this,function(){const _0x1dd546=a111_0x213f;return a111_0x1cce12[_0x1dd546(0x210)]()[_0x1dd546(0x1d1)](_0x1dd546(0x201))[_0x1dd546(0x210)]()[_0x1dd546(0x1e3)](a111_0x1cce12)[_0x1dd546(0x1d1)](_0x1dd546(0x201));});a111_0x1cce12();function a111_0x4739(){const _0x2978b5=['design:paramtypes','\x0a\x20\x20\x20\x20\x20\x20','./salesforce.service','getAttachmentId','(((.+)+)+)+$','getComponents','200169zfOZxf','Service','function','metadata','object','typedi','./salesforce-query.service','GET_REPOSITORY_QUERY','getComponentsFromRepository','SalesforceSyncService','patchObject','12MmUEKo','../dto/flosum-repository-sync.dto','toString','%id%','push','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','454743Drqprb','getRemoteStateAttachmentId','759216cOcJQe','Components__r','updateRemoteState','48mUthgz','fromBranchRecord','198550gVqQHY','Synchronization_Status__c','20zoNnIs','objectId','../../../constants','Sync_In_Progress__c','search','10bWYdUv','text/plain','../queries','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','apply','1368997HJxMkg','__esModule','getBranchRecords','ERR_INVALID_ATTACHMENT_ID','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','salesforceService','SalesforceQueryService','%name%','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','query','getOwnPropertyDescriptor','constructor','defineProperty','GET_BRANCH_QUERY','GET_COMPONENTS_QUERY','%parentId%','109239wachhl','stringify','2020271egvFUz','getRepositoryRecords','records','FlosumRepositorySyncDto','catch','../../shared/utils','encodeBase64','Git_Settings__c','length','objectType','SalesforceService','__decorate','replace','map','decorate','fromRepositoryRecord','FLOSUM_GIT_NAMESPACE','salesforceQuery','repositoryId'];a111_0x4739=function(){return _0x2978b5;};return a111_0x4739();}'use strict';var __decorate=this&&this[a111_0x679f56(0x1f5)]||function(_0x1ead0b,_0xb663ea,_0x25aae6,_0x1726c9){const _0xc02e6f=a111_0x679f56;var _0x2ac991=arguments[_0xc02e6f(0x1f2)],_0xffcf73=_0x2ac991<0x3?_0xb663ea:_0x1726c9===null?_0x1726c9=Object[_0xc02e6f(0x1e2)](_0xb663ea,_0x25aae6):_0x1726c9,_0x4691ce;if(typeof Reflect===_0xc02e6f(0x207)&&typeof Reflect[_0xc02e6f(0x1f8)]===_0xc02e6f(0x205))_0xffcf73=Reflect[_0xc02e6f(0x1f8)](_0x1ead0b,_0xb663ea,_0x25aae6,_0x1726c9);else{for(var _0x4d00c4=_0x1ead0b[_0xc02e6f(0x1f2)]-0x1;_0x4d00c4>=0x0;_0x4d00c4--)if(_0x4691ce=_0x1ead0b[_0x4d00c4])_0xffcf73=(_0x2ac991<0x3?_0x4691ce(_0xffcf73):_0x2ac991>0x3?_0x4691ce(_0xb663ea,_0x25aae6,_0xffcf73):_0x4691ce(_0xb663ea,_0x25aae6))||_0xffcf73;}return _0x2ac991>0x3&&_0xffcf73&&Object[_0xc02e6f(0x1e4)](_0xb663ea,_0x25aae6,_0xffcf73),_0xffcf73;},__metadata=this&&this['__metadata']||function(_0xf59fe7,_0x463fbc){const _0x3062c9=a111_0x679f56;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x3062c9(0x205))return Reflect[_0x3062c9(0x206)](_0xf59fe7,_0x463fbc);};Object[a111_0x679f56(0x1e4)](exports,a111_0x679f56(0x1d9),{'value':!![]}),exports[a111_0x679f56(0x20c)]=void 0x0;const typedi_1=require(a111_0x679f56(0x208)),constants_1=require(a111_0x679f56(0x1cf)),errors_1=require('../../../constants/errors'),utils_1=require(a111_0x679f56(0x1ef)),flosum_repository_sync_dto_1=require(a111_0x679f56(0x20f)),queries_1=require(a111_0x679f56(0x1d4)),salesforce_query_service_1=require(a111_0x679f56(0x209)),salesforce_service_1=require(a111_0x679f56(0x1ff));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x165a0d,_0x4b6bb8){const _0x467ff5=a111_0x679f56;this[_0x467ff5(0x1fb)]=_0x165a0d,this['salesforceService']=_0x4b6bb8;}async[a111_0x679f56(0x202)](_0x2d2c31){const _0x4bf4ee=a111_0x679f56,_0x5cc5e0=await this[_0x4bf4ee(0x1fb)][_0x4bf4ee(0x1e1)](_0x2d2c31),_0x47caca=[];for(const _0xaab9e2 of _0x5cc5e0){const _0x184450=_0xaab9e2[constants_1['FLOSUM_NAMESPACE']+_0x4bf4ee(0x1c7)][_0x4bf4ee(0x1ec)][0x0];_0x47caca[_0x4bf4ee(0x1c2)](_0x184450['Id']);}return _0x47caca;}async[a111_0x679f56(0x1eb)](){const _0x3e8251=a111_0x679f56,_0x21390c=await this['salesforceQuery'][_0x3e8251(0x1e1)](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0x21390c[_0x3e8251(0x1f7)](_0x33b5d4=>flosum_repository_sync_dto_1[_0x3e8251(0x1ed)][_0x3e8251(0x1f9)](_0x33b5d4));}async[a111_0x679f56(0x1da)](){const _0x4dcd7c=a111_0x679f56,_0x496f89=await this[_0x4dcd7c(0x1fb)][_0x4dcd7c(0x1e1)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x496f89[_0x4dcd7c(0x1f7)](_0x2f0cc7=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x4dcd7c(0x1ca)](_0x2f0cc7));}async['getRepositoryRecord'](_0x3a22f2){const _0x5e5bb1=a111_0x679f56,_0x486135=await this[_0x5e5bb1(0x1fb)][_0x5e5bb1(0x1e1)](queries_1[_0x5e5bb1(0x20a)][_0x5e5bb1(0x1f6)]('%id%',_0x3a22f2));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x5e5bb1(0x1f9)](_0x486135[0x0]);}async['getBranchRecord'](_0x1a96a1){const _0x36128b=a111_0x679f56,_0x2f728d=await this[_0x36128b(0x1fb)][_0x36128b(0x1e1)](queries_1[_0x36128b(0x1e5)][_0x36128b(0x1f6)](_0x36128b(0x1c1),_0x1a96a1));return flosum_repository_sync_dto_1[_0x36128b(0x1ed)][_0x36128b(0x1ca)](_0x2f728d[0x0]);}async[a111_0x679f56(0x20b)](_0x3a6500){const _0x27ecad=a111_0x679f56,_0x49998d=_0x27ecad(0x1fe)+queries_1[_0x27ecad(0x1e6)]+_0x27ecad(0x1dc)+_0x3a6500+'\x27';return this[_0x27ecad(0x202)](_0x49998d);}async['getBranchComponents'](_0x1bb044){const _0x41521e=a111_0x679f56,_0x260786=_0x41521e(0x1d6)+queries_1[_0x41521e(0x1e6)]+_0x41521e(0x1e0)+_0x1bb044+'\x27';return this[_0x41521e(0x202)](_0x260786);}async[a111_0x679f56(0x200)](_0x272695){const _0x34b139=a111_0x679f56;var _0x302861;const _0x507c07=queries_1[_0x34b139(0x1d5)]['replace'](_0x34b139(0x1e7),_0x272695['objectId'])[_0x34b139(0x1f6)](_0x34b139(0x1df),_0x272695['repositoryId']?constants_1[_0x34b139(0x1c3)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']),_0xcfeb22=await this[_0x34b139(0x1fb)][_0x34b139(0x1e1)](_0x507c07),_0x42634e=(_0x302861=_0xcfeb22[0x0])===null||_0x302861===void 0x0?void 0x0:_0x302861['Id'];if(!_0x42634e)throw new Error(errors_1[_0x34b139(0x1db)]);return _0x42634e;}async[a111_0x679f56(0x1c5)](_0x17e79d){const _0xdcc5f1=a111_0x679f56;let _0x34da2e=await this['getAttachmentId'](_0x17e79d)[_0xdcc5f1(0x1ee)](()=>null);return!_0x34da2e&&(_0x34da2e=await this[_0xdcc5f1(0x1dd)]['createObject']('Attachment',{'Body':(0x0,utils_1[_0xdcc5f1(0x1f0)])('{}'),'ParentId':_0x17e79d[_0xdcc5f1(0x1ce)],'ContentType':_0xdcc5f1(0x1d3),'Name':_0x17e79d[_0xdcc5f1(0x1fc)]?constants_1[_0xdcc5f1(0x1c3)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']})),_0x34da2e;}async[a111_0x679f56(0x1c8)](_0x4074a6,_0x2e848b){const _0x4d1739=a111_0x679f56,_0x3111bc=await this[_0x4d1739(0x1c5)](_0x4074a6);await this[_0x4d1739(0x1dd)][_0x4d1739(0x20d)]('Attachment',_0x3111bc,{'Body':(0x0,utils_1[_0x4d1739(0x1f0)])(JSON[_0x4d1739(0x1e9)](_0x2e848b))});}async['setStatus'](_0x5b178a,_0x40bd17){const _0x3fb268=a111_0x679f56;await this['salesforceService'][_0x3fb268(0x20d)](_0x5b178a[_0x3fb268(0x1f3)],_0x5b178a['objectId'],{[constants_1[_0x3fb268(0x1fa)]+_0x3fb268(0x1cc)]:_0x40bd17});}async['disableSync'](_0x431d6e){const _0x12d79c=a111_0x679f56;await this[_0x12d79c(0x1dd)]['patchObject'](constants_1[_0x12d79c(0x1fa)]+_0x12d79c(0x1f1),_0x431d6e,{[constants_1[_0x12d79c(0x1fa)]+_0x12d79c(0x1d0)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a111_0x679f56(0x204)])(),__metadata(a111_0x679f56(0x1fd),[salesforce_query_service_1[a111_0x679f56(0x1de)],salesforce_service_1[a111_0x679f56(0x1f4)]])],SalesforceSyncService),exports[a111_0x679f56(0x20c)]=SalesforceSyncService;