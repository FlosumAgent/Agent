const a109_0x1b8d=['salseforceService','design:paramtypes','../../../constants/errors','getAttachmentIdByParent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','175052BcyvnZ','query','Sync_In_Progress__c','setLastSha','patchObject','../queries','GET_COMPONENTS_QUERY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','355081hIyRFI','decorate','SalesforceQueryService','./salesforce.service','setStatus','%id%','1lNoVEH','test','getComponents','getBranchRecords','objectType','../../../constants','GET_WAITING_REPOSITORIES_QUERY','constructor','71517hyKjsx','286822unvoeQ','FlosumRepositorySyncDto','disableSync','SalesforceService','apply','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','4KZPvaD','object','salesforceQuery','return\x20/\x22\x20+\x20this\x20+\x20\x22/','metadata','length','Sha__c','FLOSUM_GIT_NAMESPACE','getBranchComponents','\x0a\x20\x20\x20\x20\x20\x20','ERR_INVALID_ATTACHMENT_ID','1016728KJcAvo','replace','GET_REPOSITORY_QUERY','typedi','3233453cXOibx','Git_Settings__c','fromBranchRecord','GET_ATTACHMENT_BY_PARENT_ID_QUERY','Components__r','getBranchRecord','objectId','%parentId%','fromRepositoryRecord','FLOSUM_NAMESPACE','1120445KypHtB','getRepositoryRecords','3UbKhmQ','2Atjrvq','Status__c','./salesforce-query.service','GET_WAITING_BRANCHES_QUERY','__esModule','defineProperty','map','7FTetYV','SalesforceSyncService','getOwnPropertyDescriptor'];const a109_0x587e5b=a109_0x3e67;(function(_0x5b2b04,_0x1526fb){const _0x52899b=a109_0x3e67;while(!![]){try{const _0x57be1c=parseInt(_0x52899b(0x209))+parseInt(_0x52899b(0x1d9))*parseInt(_0x52899b(0x1f7))+-parseInt(_0x52899b(0x1d2))*parseInt(_0x52899b(0x1f8))+parseInt(_0x52899b(0x1e1))*parseInt(_0x52899b(0x1fe))+parseInt(_0x52899b(0x1d1))*parseInt(_0x52899b(0x1e9))+parseInt(_0x52899b(0x1ef))*parseInt(_0x52899b(0x1cf))+-parseInt(_0x52899b(0x20d));if(_0x57be1c===_0x1526fb)break;else _0x5b2b04['push'](_0x5b2b04['shift']());}catch(_0x317bc3){_0x5b2b04['push'](_0x5b2b04['shift']());}}}(a109_0x1b8d,0x918b2));const a109_0x5fe7d2=function(){let _0x66c50f=!![];return function(_0x4eaceb,_0x48d5a7){const _0x361221=_0x66c50f?function(){const _0x41947a=a109_0x3e67;if(_0x48d5a7){const _0x3b2b9b=_0x48d5a7[_0x41947a(0x1fc)](_0x4eaceb,arguments);return _0x48d5a7=null,_0x3b2b9b;}}:function(){};return _0x66c50f=![],_0x361221;};}(),a109_0x1b480a=a109_0x5fe7d2(this,function(){const _0x4e06a6=function(){const _0x56978c=a109_0x3e67,_0x12cff8=_0x4e06a6[_0x56978c(0x1f6)](_0x56978c(0x201))()['constructor'](_0x56978c(0x1fd));return!_0x12cff8[_0x56978c(0x1f0)](a109_0x1b480a);};return _0x4e06a6();});a109_0x1b480a();function a109_0x3e67(_0x4f56f6,_0x357329){return a109_0x3e67=function(_0x33ef21,_0x1b480a){_0x33ef21=_0x33ef21-0x1c9;let _0x5fe7d2=a109_0x1b8d[_0x33ef21];return _0x5fe7d2;},a109_0x3e67(_0x4f56f6,_0x357329);}'use strict';var __decorate=this&&this['__decorate']||function(_0x30536d,_0x55e9df,_0x545dcd,_0x53f5da){const _0x11824d=a109_0x3e67;var _0x3fefed=arguments[_0x11824d(0x203)],_0x13b31f=_0x3fefed<0x3?_0x55e9df:_0x53f5da===null?_0x53f5da=Object[_0x11824d(0x1db)](_0x55e9df,_0x545dcd):_0x53f5da,_0x2714fb;if(typeof Reflect===_0x11824d(0x1ff)&&typeof Reflect[_0x11824d(0x1ea)]==='function')_0x13b31f=Reflect[_0x11824d(0x1ea)](_0x30536d,_0x55e9df,_0x545dcd,_0x53f5da);else{for(var _0x4a5090=_0x30536d[_0x11824d(0x203)]-0x1;_0x4a5090>=0x0;_0x4a5090--)if(_0x2714fb=_0x30536d[_0x4a5090])_0x13b31f=(_0x3fefed<0x3?_0x2714fb(_0x13b31f):_0x3fefed>0x3?_0x2714fb(_0x55e9df,_0x545dcd,_0x13b31f):_0x2714fb(_0x55e9df,_0x545dcd))||_0x13b31f;}return _0x3fefed>0x3&&_0x13b31f&&Object['defineProperty'](_0x55e9df,_0x545dcd,_0x13b31f),_0x13b31f;},__metadata=this&&this['__metadata']||function(_0x4c4f26,_0x11a3b6){const _0x1ae551=a109_0x3e67;if(typeof Reflect==='object'&&typeof Reflect[_0x1ae551(0x202)]==='function')return Reflect[_0x1ae551(0x202)](_0x4c4f26,_0x11a3b6);};Object[a109_0x587e5b(0x1d7)](exports,a109_0x587e5b(0x1d6),{'value':!![]}),exports[a109_0x587e5b(0x1da)]=void 0x0;const typedi_1=require(a109_0x587e5b(0x20c)),constants_1=require(a109_0x587e5b(0x1f4)),errors_1=require(a109_0x587e5b(0x1de)),flosum_repository_sync_dto_1=require('../dto/flosum-repository-sync.dto'),queries_1=require(a109_0x587e5b(0x1e6)),salesforce_query_service_1=require(a109_0x587e5b(0x1d4)),salesforce_service_1=require(a109_0x587e5b(0x1ec));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x3a59f8,_0x71109f){const _0x236a0e=a109_0x587e5b;this[_0x236a0e(0x200)]=_0x3a59f8,this[_0x236a0e(0x1dc)]=_0x71109f;}async[a109_0x587e5b(0x1f1)](_0x23361a){const _0x59d338=a109_0x587e5b,_0x2877ed=await this[_0x59d338(0x200)]['query'](_0x23361a),_0x658c19=[];for(const _0x4ae9aa of _0x2877ed){const _0x4a0ad3=_0x4ae9aa[constants_1[_0x59d338(0x1ce)]+_0x59d338(0x1c9)]['records'][0x0];_0x658c19['push'](_0x4a0ad3['Id']);}return _0x658c19;}async[a109_0x587e5b(0x1d0)](){const _0x31aa7c=a109_0x587e5b,_0x7ac71e=await this[_0x31aa7c(0x200)][_0x31aa7c(0x1e2)](queries_1[_0x31aa7c(0x1f5)]);return _0x7ac71e['map'](_0x251f58=>flosum_repository_sync_dto_1[_0x31aa7c(0x1f9)][_0x31aa7c(0x1cd)](_0x251f58));}async[a109_0x587e5b(0x1f2)](){const _0x2c6bf8=a109_0x587e5b,_0x4406f7=await this['salesforceQuery'][_0x2c6bf8(0x1e2)](queries_1[_0x2c6bf8(0x1d5)]);return _0x4406f7[_0x2c6bf8(0x1d8)](_0x87da60=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x2c6bf8(0x20f)](_0x87da60));}async['getRepositoryRecord'](_0x32945f){const _0x18c7a3=a109_0x587e5b,_0x6d932=await this['salesforceQuery'][_0x18c7a3(0x1e2)](queries_1[_0x18c7a3(0x20b)][_0x18c7a3(0x20a)](_0x18c7a3(0x1ee),_0x32945f));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromRepositoryRecord'](_0x6d932[0x0]);}async[a109_0x587e5b(0x1ca)](_0x1643d2){const _0x439d17=a109_0x587e5b,_0x34e1ed=await this[_0x439d17(0x200)][_0x439d17(0x1e2)](queries_1['GET_BRANCH_QUERY']['replace']('%id%',_0x1643d2));return flosum_repository_sync_dto_1[_0x439d17(0x1f9)]['fromBranchRecord'](_0x34e1ed[0x0]);}async['getComponentsFromRepository'](_0x578f63){const _0xfe978d=a109_0x587e5b,_0x562f1f=_0xfe978d(0x207)+queries_1[_0xfe978d(0x1e7)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x578f63+'\x27';return this[_0xfe978d(0x1f1)](_0x562f1f);}async[a109_0x587e5b(0x206)](_0x4108bf){const _0xd03c2=a109_0x587e5b,_0x40b590=_0xd03c2(0x1e0)+queries_1['GET_COMPONENTS_QUERY']+_0xd03c2(0x1e8)+_0x4108bf+'\x27';return this[_0xd03c2(0x1f1)](_0x40b590);}async[a109_0x587e5b(0x1df)](_0x5f0e4c){const _0x45095b=a109_0x587e5b;var _0x5219d6;const _0x574d3e=queries_1[_0x45095b(0x210)][_0x45095b(0x20a)](_0x45095b(0x1cc),_0x5f0e4c),_0x3a0945=await this['salesforceQuery'][_0x45095b(0x1e2)](_0x574d3e),_0x49ea7c=(_0x5219d6=_0x3a0945[0x0])===null||_0x5219d6===void 0x0?void 0x0:_0x5219d6['Id'];if(!_0x49ea7c)throw new Error(errors_1[_0x45095b(0x208)]);return _0x49ea7c;}async[a109_0x587e5b(0x1ed)](_0x45b138,_0x50914a){const _0x25f944=a109_0x587e5b;await this['salseforceService']['patchObject'](_0x45b138[_0x25f944(0x1f3)],_0x45b138[_0x25f944(0x1cb)],{[constants_1[_0x25f944(0x205)]+_0x25f944(0x1d3)]:_0x50914a});}async[a109_0x587e5b(0x1e4)](_0x164d72,_0x3f4b79){const _0x10becc=a109_0x587e5b;await this[_0x10becc(0x1dc)][_0x10becc(0x1e5)](_0x164d72['objectType'],_0x164d72[_0x10becc(0x1cb)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x10becc(0x204)]:_0x3f4b79});}async[a109_0x587e5b(0x1fa)](_0xa10f3b){const _0x32ad21=a109_0x587e5b;await this[_0x32ad21(0x1dc)][_0x32ad21(0x1e5)](constants_1['FLOSUM_GIT_NAMESPACE']+_0x32ad21(0x20e),_0xa10f3b,{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x32ad21(0x1e3)]:![]});}};SalesforceSyncService=__decorate([typedi_1['Service'](),__metadata(a109_0x587e5b(0x1dd),[salesforce_query_service_1[a109_0x587e5b(0x1eb)],salesforce_service_1[a109_0x587e5b(0x1fb)]])],SalesforceSyncService),exports[a109_0x587e5b(0x1da)]=SalesforceSyncService;