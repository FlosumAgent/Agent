const a112_0x5acb4c=a112_0xc5d6;function a112_0xc5d6(_0x488252,_0x345d2a){const _0x2e8044=a112_0x2bd0();return a112_0xc5d6=function(_0x1a9594,_0x1d8ab8){_0x1a9594=_0x1a9594-0x16b;let _0x2bd011=_0x2e8044[_0x1a9594];return _0x2bd011;},a112_0xc5d6(_0x488252,_0x345d2a);}function a112_0x2bd0(){const _0x3b35c7=['patchObject','fromBranchRecord','ERR_INVALID_ATTACHMENT_ID','3820700tljBGw','decorate','text/plain','catch','(((.+)+)+)+$','Components__r','FLOSUM_NAMESPACE','%name%','push','./salesforce-query.service','Attachment','../../shared/utils','getBranchRecord','apply','../../../constants','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','9217830AFDpwF','getComponentsFromRepository','536GeVtVx','createObject','Synchronization_Status__c','Service','replace','4838544QQLvJz','../queries','3938320QJQpsk','constructor','../../../constants/errors','3211026aaPdWc','FLOSUM_GIT_NAMESPACE','GET_BRANCH_QUERY','getComponents','SalesforceSyncService','GET_WAITING_BRANCHES_QUERY','__decorate','map','getBranchRecords','14NGkrAX','18ZIfhcs','FlosumRepositorySyncDto','SYNC_ATTACHMENT_FOR_BRANCH_NAME','query','3076RIYZRd','design:paramtypes','repositoryId','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','getRemoteStateAttachmentId','search','getRepositoryRecord','./salesforce.service','toString','disableSync','__metadata','getRepositoryRecords','salesforceService','\x0a\x20\x20\x20\x20\x20\x20','salesforceQuery','GET_COMPONENTS_QUERY','Git_Settings__c','GET_REPOSITORY_QUERY','typedi','getAttachmentId','metadata','SalesforceQueryService','defineProperty','GET_WAITING_REPOSITORIES_QUERY','%id%','__esModule','function','object','objectId','encodeBase64','updateRemoteState','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','length','stringify','../dto/flosum-repository-sync.dto','3478380MheZdy'];a112_0x2bd0=function(){return _0x3b35c7;};return a112_0x2bd0();}(function(_0x15a986,_0x2853c4){const _0x4cb557=a112_0xc5d6,_0x1a590f=_0x15a986();while(!![]){try{const _0x268096=parseInt(_0x4cb557(0x1bc))/0x1*(parseInt(_0x4cb557(0x182))/0x2)+-parseInt(_0x4cb557(0x1a6))/0x3+-parseInt(_0x4cb557(0x171))/0x4+parseInt(_0x4cb557(0x1aa))/0x5+parseInt(_0x4cb557(0x174))/0x6+-parseInt(_0x4cb557(0x17d))/0x7*(parseInt(_0x4cb557(0x16f))/0x8)+parseInt(_0x4cb557(0x17e))/0x9*(parseInt(_0x4cb557(0x1ba))/0xa);if(_0x268096===_0x2853c4)break;else _0x1a590f['push'](_0x1a590f['shift']());}catch(_0x3a5cbe){_0x1a590f['push'](_0x1a590f['shift']());}}}(a112_0x2bd0,0x95cc1));const a112_0x1d8ab8=function(){let _0xe3d321=!![];return function(_0x48ce7b,_0x548360){const _0x2b80bc=_0xe3d321?function(){const _0x1b4472=a112_0xc5d6;if(_0x548360){const _0xef072d=_0x548360[_0x1b4472(0x1b7)](_0x48ce7b,arguments);return _0x548360=null,_0xef072d;}}:function(){};return _0xe3d321=![],_0x2b80bc;};}(),a112_0x1a9594=a112_0x1d8ab8(this,function(){const _0x385913=a112_0xc5d6;return a112_0x1a9594[_0x385913(0x18a)]()[_0x385913(0x187)](_0x385913(0x1ae))['toString']()[_0x385913(0x172)](a112_0x1a9594)['search'](_0x385913(0x1ae));});a112_0x1a9594();'use strict';var __decorate=this&&this[a112_0x5acb4c(0x17a)]||function(_0x161e02,_0x2b597d,_0x8a6d46,_0x13a870){const _0x51c7e7=a112_0x5acb4c;var _0x3d19e4=arguments[_0x51c7e7(0x1a3)],_0x57fe00=_0x3d19e4<0x3?_0x2b597d:_0x13a870===null?_0x13a870=Object['getOwnPropertyDescriptor'](_0x2b597d,_0x8a6d46):_0x13a870,_0x36a9b5;if(typeof Reflect===_0x51c7e7(0x19d)&&typeof Reflect[_0x51c7e7(0x1ab)]===_0x51c7e7(0x19c))_0x57fe00=Reflect['decorate'](_0x161e02,_0x2b597d,_0x8a6d46,_0x13a870);else{for(var _0x3dbde8=_0x161e02[_0x51c7e7(0x1a3)]-0x1;_0x3dbde8>=0x0;_0x3dbde8--)if(_0x36a9b5=_0x161e02[_0x3dbde8])_0x57fe00=(_0x3d19e4<0x3?_0x36a9b5(_0x57fe00):_0x3d19e4>0x3?_0x36a9b5(_0x2b597d,_0x8a6d46,_0x57fe00):_0x36a9b5(_0x2b597d,_0x8a6d46))||_0x57fe00;}return _0x3d19e4>0x3&&_0x57fe00&&Object[_0x51c7e7(0x198)](_0x2b597d,_0x8a6d46,_0x57fe00),_0x57fe00;},__metadata=this&&this[a112_0x5acb4c(0x18c)]||function(_0x29dcfb,_0x16e9c9){const _0xdd8677=a112_0x5acb4c;if(typeof Reflect===_0xdd8677(0x19d)&&typeof Reflect[_0xdd8677(0x196)]===_0xdd8677(0x19c))return Reflect[_0xdd8677(0x196)](_0x29dcfb,_0x16e9c9);};Object['defineProperty'](exports,a112_0x5acb4c(0x19b),{'value':!![]}),exports[a112_0x5acb4c(0x178)]=void 0x0;const typedi_1=require(a112_0x5acb4c(0x194)),constants_1=require(a112_0x5acb4c(0x1b8)),errors_1=require(a112_0x5acb4c(0x173)),utils_1=require(a112_0x5acb4c(0x1b5)),flosum_repository_sync_dto_1=require(a112_0x5acb4c(0x1a5)),queries_1=require(a112_0x5acb4c(0x170)),salesforce_query_service_1=require(a112_0x5acb4c(0x1b3)),salesforce_service_1=require(a112_0x5acb4c(0x189));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x17ae87,_0x3b1624){const _0x155149=a112_0x5acb4c;this[_0x155149(0x190)]=_0x17ae87,this['salesforceService']=_0x3b1624;}async[a112_0x5acb4c(0x177)](_0x48a66d){const _0x203aa2=a112_0x5acb4c,_0x255dbb=await this['salesforceQuery']['query'](_0x48a66d),_0x53a1ad=[];for(const _0x3038e0 of _0x255dbb){const _0xff617e=_0x3038e0[constants_1[_0x203aa2(0x1b0)]+_0x203aa2(0x1af)]['records'][0x0];_0x53a1ad[_0x203aa2(0x1b2)](_0xff617e['Id']);}return _0x53a1ad;}async[a112_0x5acb4c(0x18d)](){const _0x4365fc=a112_0x5acb4c,_0x1b1e79=await this['salesforceQuery'][_0x4365fc(0x181)](queries_1[_0x4365fc(0x199)]);return _0x1b1e79[_0x4365fc(0x17b)](_0x48dc6a=>flosum_repository_sync_dto_1[_0x4365fc(0x17f)]['fromRepositoryRecord'](_0x48dc6a));}async[a112_0x5acb4c(0x17c)](){const _0x4c3577=a112_0x5acb4c,_0x3e3df1=await this[_0x4c3577(0x190)][_0x4c3577(0x181)](queries_1[_0x4c3577(0x179)]);return _0x3e3df1[_0x4c3577(0x17b)](_0x4ecc9e=>flosum_repository_sync_dto_1[_0x4c3577(0x17f)][_0x4c3577(0x1a8)](_0x4ecc9e));}async[a112_0x5acb4c(0x188)](_0x4aff9a){const _0x6d79c5=a112_0x5acb4c,_0x19a388=await this[_0x6d79c5(0x190)][_0x6d79c5(0x181)](queries_1[_0x6d79c5(0x193)][_0x6d79c5(0x16e)](_0x6d79c5(0x19a),_0x4aff9a));return flosum_repository_sync_dto_1[_0x6d79c5(0x17f)]['fromRepositoryRecord'](_0x19a388[0x0]);}async[a112_0x5acb4c(0x1b6)](_0x371cec){const _0x127c3b=a112_0x5acb4c,_0x230ba3=await this[_0x127c3b(0x190)][_0x127c3b(0x181)](queries_1[_0x127c3b(0x176)][_0x127c3b(0x16e)]('%id%',_0x371cec));return flosum_repository_sync_dto_1[_0x127c3b(0x17f)]['fromBranchRecord'](_0x230ba3[0x0]);}async[a112_0x5acb4c(0x1bb)](_0x5b24ac){const _0x169cba=a112_0x5acb4c,_0x31e14a=_0x169cba(0x18f)+queries_1[_0x169cba(0x191)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x5b24ac+'\x27';return this[_0x169cba(0x177)](_0x31e14a);}async['getBranchComponents'](_0x483419){const _0x6d0b87=a112_0x5acb4c,_0x3785fa=_0x6d0b87(0x1a1)+queries_1[_0x6d0b87(0x191)]+_0x6d0b87(0x1a2)+_0x483419+'\x27';return this[_0x6d0b87(0x177)](_0x3785fa);}async[a112_0x5acb4c(0x195)](_0x21dafd){const _0x56aabe=a112_0x5acb4c;var _0x29326e;const _0x2fefd5=queries_1[_0x56aabe(0x1b9)]['replace']('%parentId%',_0x21dafd[_0x56aabe(0x19e)])[_0x56aabe(0x16e)](_0x56aabe(0x1b1),_0x21dafd[_0x56aabe(0x184)]?constants_1[_0x56aabe(0x185)]:constants_1[_0x56aabe(0x180)]),_0x5537b4=await this['salesforceQuery']['query'](_0x2fefd5),_0x42a4e7=(_0x29326e=_0x5537b4[0x0])===null||_0x29326e===void 0x0?void 0x0:_0x29326e['Id'];if(!_0x42a4e7)throw new Error(errors_1[_0x56aabe(0x1a9)]);return _0x42a4e7;}async[a112_0x5acb4c(0x186)](_0xe8b356){const _0x99aba6=a112_0x5acb4c;let _0x4b54e1=await this[_0x99aba6(0x195)](_0xe8b356)[_0x99aba6(0x1ad)](()=>null);return!_0x4b54e1&&(_0x4b54e1=await this[_0x99aba6(0x18e)][_0x99aba6(0x16b)](_0x99aba6(0x1b4),{'Body':(0x0,utils_1[_0x99aba6(0x19f)])('{}'),'ParentId':_0xe8b356[_0x99aba6(0x19e)],'ContentType':_0x99aba6(0x1ac),'Name':_0xe8b356[_0x99aba6(0x184)]?constants_1[_0x99aba6(0x185)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']})),_0x4b54e1;}async[a112_0x5acb4c(0x1a0)](_0x3db898,_0x9dc3){const _0x12167c=a112_0x5acb4c,_0x1abb42=await this[_0x12167c(0x186)](_0x3db898);await this[_0x12167c(0x18e)][_0x12167c(0x1a7)](_0x12167c(0x1b4),_0x1abb42,{'Body':(0x0,utils_1[_0x12167c(0x19f)])(JSON[_0x12167c(0x1a4)](_0x9dc3))});}async['setStatus'](_0x321e4d,_0x2e31ae){const _0xa421d9=a112_0x5acb4c;await this['salesforceService']['patchObject'](_0x321e4d['objectType'],_0x321e4d[_0xa421d9(0x19e)],{[constants_1[_0xa421d9(0x175)]+_0xa421d9(0x16c)]:_0x2e31ae});}async[a112_0x5acb4c(0x18b)](_0x1e9279){const _0x5c83cb=a112_0x5acb4c;await this[_0x5c83cb(0x18e)][_0x5c83cb(0x1a7)](constants_1[_0x5c83cb(0x175)]+_0x5c83cb(0x192),_0x1e9279,{[constants_1[_0x5c83cb(0x175)]+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a112_0x5acb4c(0x16d)])(),__metadata(a112_0x5acb4c(0x183),[salesforce_query_service_1[a112_0x5acb4c(0x197)],salesforce_service_1['SalesforceService']])],SalesforceSyncService),exports[a112_0x5acb4c(0x178)]=SalesforceSyncService;