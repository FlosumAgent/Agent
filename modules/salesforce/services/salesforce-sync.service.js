const a112_0x247f94=a112_0x3393;function a112_0x3393(_0x13ada9,_0x5c44c6){const _0x220379=a112_0x2129();return a112_0x3393=function(_0x46f1cb,_0x2bab6e){_0x46f1cb=_0x46f1cb-0xd5;let _0x21297c=_0x220379[_0x46f1cb];return _0x21297c;},a112_0x3393(_0x13ada9,_0x5c44c6);}(function(_0x565010,_0x4fbf33){const _0x4c78de=a112_0x3393,_0x48d497=_0x565010();while(!![]){try{const _0x4d5c11=parseInt(_0x4c78de(0xd8))/0x1+-parseInt(_0x4c78de(0x104))/0x2+-parseInt(_0x4c78de(0x12a))/0x3*(parseInt(_0x4c78de(0x112))/0x4)+parseInt(_0x4c78de(0xe1))/0x5*(-parseInt(_0x4c78de(0x127))/0x6)+parseInt(_0x4c78de(0xd7))/0x7+-parseInt(_0x4c78de(0xee))/0x8+-parseInt(_0x4c78de(0x103))/0x9*(-parseInt(_0x4c78de(0xf1))/0xa);if(_0x4d5c11===_0x4fbf33)break;else _0x48d497['push'](_0x48d497['shift']());}catch(_0x667554){_0x48d497['push'](_0x48d497['shift']());}}}(a112_0x2129,0x9a44e));const a112_0x2bab6e=function(){let _0x13d250=!![];return function(_0x1361d5,_0x371046){const _0x5061bc=_0x13d250?function(){const _0xe598e=a112_0x3393;if(_0x371046){const _0x11ba9e=_0x371046[_0xe598e(0x114)](_0x1361d5,arguments);return _0x371046=null,_0x11ba9e;}}:function(){};return _0x13d250=![],_0x5061bc;};}(),a112_0x46f1cb=a112_0x2bab6e(this,function(){const _0x937d89=a112_0x3393;return a112_0x46f1cb[_0x937d89(0x109)]()[_0x937d89(0xe7)]('(((.+)+)+)+$')[_0x937d89(0x109)]()[_0x937d89(0xf5)](a112_0x46f1cb)['search'](_0x937d89(0x11f));});a112_0x46f1cb();'use strict';var __decorate=this&&this[a112_0x247f94(0xe9)]||function(_0xff486e,_0x13919a,_0xfd02fb,_0x404a85){const _0x3a3d16=a112_0x247f94;var _0x25f008=arguments[_0x3a3d16(0x123)],_0x2d04e0=_0x25f008<0x3?_0x13919a:_0x404a85===null?_0x404a85=Object[_0x3a3d16(0xdc)](_0x13919a,_0xfd02fb):_0x404a85,_0x22a4d9;if(typeof Reflect===_0x3a3d16(0xde)&&typeof Reflect[_0x3a3d16(0x11b)]===_0x3a3d16(0x119))_0x2d04e0=Reflect['decorate'](_0xff486e,_0x13919a,_0xfd02fb,_0x404a85);else{for(var _0x1427f3=_0xff486e[_0x3a3d16(0x123)]-0x1;_0x1427f3>=0x0;_0x1427f3--)if(_0x22a4d9=_0xff486e[_0x1427f3])_0x2d04e0=(_0x25f008<0x3?_0x22a4d9(_0x2d04e0):_0x25f008>0x3?_0x22a4d9(_0x13919a,_0xfd02fb,_0x2d04e0):_0x22a4d9(_0x13919a,_0xfd02fb))||_0x2d04e0;}return _0x25f008>0x3&&_0x2d04e0&&Object[_0x3a3d16(0x108)](_0x13919a,_0xfd02fb,_0x2d04e0),_0x2d04e0;},__metadata=this&&this[a112_0x247f94(0x10e)]||function(_0x1a0f05,_0x395d0d){const _0x40b847=a112_0x247f94;if(typeof Reflect==='object'&&typeof Reflect[_0x40b847(0x117)]===_0x40b847(0x119))return Reflect[_0x40b847(0x117)](_0x1a0f05,_0x395d0d);};Object[a112_0x247f94(0x108)](exports,'__esModule',{'value':!![]}),exports[a112_0x247f94(0x10b)]=void 0x0;const typedi_1=require(a112_0x247f94(0xf0)),constants_1=require(a112_0x247f94(0x10d)),errors_1=require(a112_0x247f94(0x11c)),utils_1=require(a112_0x247f94(0x10f)),flosum_repository_sync_dto_1=require(a112_0x247f94(0x121)),queries_1=require(a112_0x247f94(0x116)),salesforce_query_service_1=require(a112_0x247f94(0x11e)),salesforce_service_1=require(a112_0x247f94(0xfa));function a112_0x2129(){const _0xe742bd=['objectId','design:paramtypes','defineProperty','toString','SalesforceQueryService','SalesforceSyncService','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','../../../constants','__metadata','../../shared/utils','text/plain','replace','2716DYMANB','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','apply','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','../queries','metadata','GET_WAITING_REPOSITORIES_QUERY','function','%name%','decorate','../../../constants/errors','getBranchRecord','./salesforce-query.service','(((.+)+)+)+$','disableSync','../dto/flosum-repository-sync.dto','Attachment','length','updateRemoteState','\x0a\x20\x20\x20\x20\x20\x20','GET_REPOSITORY_QUERY','318xUrTxk','Sync_In_Progress__c','Git_Settings__c','66bBBkSU','fromBranchRecord','patchObject','3438365YjEtcW','422857WOlHLi','query','ERR_INVALID_ATTACHMENT_ID','GET_COMPONENTS_QUERY','getOwnPropertyDescriptor','getComponentsFromRepository','object','getComponents','%id%','105775KTpnit','stringify','SalesforceService','Service','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','repositoryId','search','GET_WAITING_BRANCHES_QUERY','__decorate','getRemoteStateAttachmentId','FLOSUM_NAMESPACE','salesforceQuery','getRepositoryRecord','6369408bKqypI','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','typedi','244560LbmSXY','salesforceService','GET_BRANCH_QUERY','records','constructor','map','FlosumRepositorySyncDto','SYNC_ATTACHMENT_FOR_BRANCH_NAME','getAttachmentId','./salesforce.service','encodeBase64','Components__r','push','fromRepositoryRecord','Synchronization_Status__c','createObject','FLOSUM_GIT_NAMESPACE','getBranchComponents','1017DNGwYc','2226730NDpllk','%parentId%'];a112_0x2129=function(){return _0xe742bd;};return a112_0x2129();}let SalesforceSyncService=class SalesforceSyncService{constructor(_0x4c7f16,_0x195e20){const _0x58ea50=a112_0x247f94;this['salesforceQuery']=_0x4c7f16,this[_0x58ea50(0xf2)]=_0x195e20;}async['getComponents'](_0x57351a){const _0x2a82ac=a112_0x247f94,_0x4dc3da=await this[_0x2a82ac(0xec)]['query'](_0x57351a),_0x5a7075=[];for(const _0x250696 of _0x4dc3da){const _0x491e6d=_0x250696[constants_1[_0x2a82ac(0xeb)]+_0x2a82ac(0xfc)][_0x2a82ac(0xf4)][0x0];_0x5a7075[_0x2a82ac(0xfd)](_0x491e6d['Id']);}return _0x5a7075;}async['getRepositoryRecords'](){const _0x58c0ec=a112_0x247f94,_0x4f1c9e=await this[_0x58c0ec(0xec)][_0x58c0ec(0xd9)](queries_1[_0x58c0ec(0x118)]);return _0x4f1c9e['map'](_0x4aa1d0=>flosum_repository_sync_dto_1[_0x58c0ec(0xf7)]['fromRepositoryRecord'](_0x4aa1d0));}async['getBranchRecords'](){const _0x43b616=a112_0x247f94,_0x52490a=await this[_0x43b616(0xec)][_0x43b616(0xd9)](queries_1[_0x43b616(0xe8)]);return _0x52490a[_0x43b616(0xf6)](_0x4cf861=>flosum_repository_sync_dto_1[_0x43b616(0xf7)][_0x43b616(0xd5)](_0x4cf861));}async[a112_0x247f94(0xed)](_0x5c70bf){const _0x4ea914=a112_0x247f94,_0x41b99a=await this[_0x4ea914(0xec)][_0x4ea914(0xd9)](queries_1[_0x4ea914(0x126)]['replace']('%id%',_0x5c70bf));return flosum_repository_sync_dto_1[_0x4ea914(0xf7)][_0x4ea914(0xfe)](_0x41b99a[0x0]);}async[a112_0x247f94(0x11d)](_0x1ce440){const _0x48298b=a112_0x247f94,_0x925806=await this[_0x48298b(0xec)]['query'](queries_1[_0x48298b(0xf3)][_0x48298b(0x111)](_0x48298b(0xe0),_0x1ce440));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x48298b(0xd5)](_0x925806[0x0]);}async[a112_0x247f94(0xdd)](_0x464580){const _0x59720e=a112_0x247f94,_0x3c7558=_0x59720e(0x125)+queries_1['GET_COMPONENTS_QUERY']+_0x59720e(0x115)+_0x464580+'\x27';return this['getComponents'](_0x3c7558);}async[a112_0x247f94(0x102)](_0x4ed97e){const _0x3c49ae=a112_0x247f94,_0x54c392=_0x3c49ae(0x113)+queries_1[_0x3c49ae(0xdb)]+_0x3c49ae(0x10c)+_0x4ed97e+'\x27';return this[_0x3c49ae(0xdf)](_0x54c392);}async[a112_0x247f94(0xf9)](_0x1f832d){const _0x48ef8d=a112_0x247f94;var _0x73a4e;const _0xf77040=queries_1[_0x48ef8d(0xe5)]['replace'](_0x48ef8d(0x105),_0x1f832d[_0x48ef8d(0x106)])[_0x48ef8d(0x111)](_0x48ef8d(0x11a),_0x1f832d[_0x48ef8d(0xe6)]?constants_1[_0x48ef8d(0xef)]:constants_1[_0x48ef8d(0xf8)]),_0x3156cb=await this[_0x48ef8d(0xec)][_0x48ef8d(0xd9)](_0xf77040),_0xed012c=(_0x73a4e=_0x3156cb[0x0])===null||_0x73a4e===void 0x0?void 0x0:_0x73a4e['Id'];if(!_0xed012c)throw new Error(errors_1[_0x48ef8d(0xda)]);return _0xed012c;}async[a112_0x247f94(0xea)](_0x4c6a4e){const _0x505479=a112_0x247f94;let _0x1a6d9c=await this[_0x505479(0xf9)](_0x4c6a4e)['catch'](()=>null);return!_0x1a6d9c&&(_0x1a6d9c=await this[_0x505479(0xf2)][_0x505479(0x100)](_0x505479(0x122),{'Body':(0x0,utils_1[_0x505479(0xfb)])('{}'),'ParentId':_0x4c6a4e[_0x505479(0x106)],'ContentType':_0x505479(0x110),'Name':_0x4c6a4e[_0x505479(0xe6)]?constants_1[_0x505479(0xef)]:constants_1[_0x505479(0xf8)]})),_0x1a6d9c;}async[a112_0x247f94(0x124)](_0x16d106,_0x44f1ae){const _0x186aae=a112_0x247f94,_0x75d1d2=await this[_0x186aae(0xea)](_0x16d106);await this[_0x186aae(0xf2)][_0x186aae(0xd6)](_0x186aae(0x122),_0x75d1d2,{'Body':(0x0,utils_1['encodeBase64'])(JSON[_0x186aae(0xe2)](_0x44f1ae))});}async['setStatus'](_0x4e55e7,_0x30c987){const _0x1e48ea=a112_0x247f94;await this['salesforceService'][_0x1e48ea(0xd6)](_0x4e55e7['objectType'],_0x4e55e7[_0x1e48ea(0x106)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x1e48ea(0xff)]:_0x30c987});}async[a112_0x247f94(0x120)](_0x53a3f6){const _0x19356e=a112_0x247f94;await this['salesforceService'][_0x19356e(0xd6)](constants_1[_0x19356e(0x101)]+_0x19356e(0x129),_0x53a3f6,{[constants_1[_0x19356e(0x101)]+_0x19356e(0x128)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a112_0x247f94(0xe4)])(),__metadata(a112_0x247f94(0x107),[salesforce_query_service_1[a112_0x247f94(0x10a)],salesforce_service_1[a112_0x247f94(0xe3)]])],SalesforceSyncService),exports[a112_0x247f94(0x10b)]=SalesforceSyncService;