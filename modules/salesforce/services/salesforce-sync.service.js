const a111_0x406c84=a111_0x119c;(function(_0x32c27b,_0x153d5b){const _0x49f704=a111_0x119c,_0x167110=_0x32c27b();while(!![]){try{const _0x565f7c=parseInt(_0x49f704(0x17c))/0x1*(-parseInt(_0x49f704(0x184))/0x2)+-parseInt(_0x49f704(0x181))/0x3*(-parseInt(_0x49f704(0x16c))/0x4)+-parseInt(_0x49f704(0x14b))/0x5+parseInt(_0x49f704(0x170))/0x6*(-parseInt(_0x49f704(0x162))/0x7)+-parseInt(_0x49f704(0x164))/0x8*(-parseInt(_0x49f704(0x16e))/0x9)+-parseInt(_0x49f704(0x149))/0xa+parseInt(_0x49f704(0x134))/0xb;if(_0x565f7c===_0x153d5b)break;else _0x167110['push'](_0x167110['shift']());}catch(_0xb5f4fa){_0x167110['push'](_0x167110['shift']());}}}(a111_0x4604,0x9506a));const a111_0x30a514=function(){let _0x124538=!![];return function(_0x3e7715,_0x278f6d){const _0x56d81b=_0x124538?function(){const _0xff7576=a111_0x119c;if(_0x278f6d){const _0x5166b2=_0x278f6d[_0xff7576(0x189)](_0x3e7715,arguments);return _0x278f6d=null,_0x5166b2;}}:function(){};return _0x124538=![],_0x56d81b;};}(),a111_0x5ac0db=a111_0x30a514(this,function(){const _0x532cf4=a111_0x119c;return a111_0x5ac0db[_0x532cf4(0x137)]()[_0x532cf4(0x177)](_0x532cf4(0x138))[_0x532cf4(0x137)]()[_0x532cf4(0x13c)](a111_0x5ac0db)['search']('(((.+)+)+)+$');});a111_0x5ac0db();function a111_0x119c(_0x25aacd,_0x413d2a){const _0x33d548=a111_0x4604();return a111_0x119c=function(_0x5ac0db,_0x30a514){_0x5ac0db=_0x5ac0db-0x132;let _0x460443=_0x33d548[_0x5ac0db];return _0x460443;},a111_0x119c(_0x25aacd,_0x413d2a);}'use strict';var __decorate=this&&this[a111_0x406c84(0x15d)]||function(_0xd32cde,_0x5af94e,_0x3e9514,_0x40fe2f){const _0x32437e=a111_0x406c84;var _0x56ca03=arguments['length'],_0x313490=_0x56ca03<0x3?_0x5af94e:_0x40fe2f===null?_0x40fe2f=Object[_0x32437e(0x140)](_0x5af94e,_0x3e9514):_0x40fe2f,_0x544e49;if(typeof Reflect===_0x32437e(0x147)&&typeof Reflect[_0x32437e(0x157)]===_0x32437e(0x152))_0x313490=Reflect[_0x32437e(0x157)](_0xd32cde,_0x5af94e,_0x3e9514,_0x40fe2f);else{for(var _0x33e8f0=_0xd32cde[_0x32437e(0x16a)]-0x1;_0x33e8f0>=0x0;_0x33e8f0--)if(_0x544e49=_0xd32cde[_0x33e8f0])_0x313490=(_0x56ca03<0x3?_0x544e49(_0x313490):_0x56ca03>0x3?_0x544e49(_0x5af94e,_0x3e9514,_0x313490):_0x544e49(_0x5af94e,_0x3e9514))||_0x313490;}return _0x56ca03>0x3&&_0x313490&&Object['defineProperty'](_0x5af94e,_0x3e9514,_0x313490),_0x313490;},__metadata=this&&this[a111_0x406c84(0x15b)]||function(_0x2b6ea7,_0xa3ccb5){const _0x4345d6=a111_0x406c84;if(typeof Reflect==='object'&&typeof Reflect[_0x4345d6(0x156)]===_0x4345d6(0x152))return Reflect['metadata'](_0x2b6ea7,_0xa3ccb5);};Object[a111_0x406c84(0x185)](exports,a111_0x406c84(0x168),{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require(a111_0x406c84(0x180)),constants_1=require('../../../constants'),errors_1=require(a111_0x406c84(0x182)),utils_1=require(a111_0x406c84(0x143)),flosum_repository_sync_dto_1=require(a111_0x406c84(0x150)),queries_1=require(a111_0x406c84(0x13d)),salesforce_query_service_1=require(a111_0x406c84(0x16f)),salesforce_service_1=require(a111_0x406c84(0x169));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x2575a6,_0x350c32){const _0x50be59=a111_0x406c84;this[_0x50be59(0x14e)]=_0x2575a6,this[_0x50be59(0x178)]=_0x350c32;}async[a111_0x406c84(0x173)](_0x1b5065){const _0x3f9af4=a111_0x406c84,_0x5d58aa=await this[_0x3f9af4(0x14e)][_0x3f9af4(0x153)](_0x1b5065),_0x21eff1=[];for(const _0x44a2d8 of _0x5d58aa){const _0x5c9e25=_0x44a2d8[constants_1[_0x3f9af4(0x13b)]+_0x3f9af4(0x16d)][_0x3f9af4(0x136)][0x0];_0x21eff1[_0x3f9af4(0x176)](_0x5c9e25['Id']);}return _0x21eff1;}async[a111_0x406c84(0x154)](){const _0x26ba56=a111_0x406c84,_0x46444f=await this[_0x26ba56(0x14e)]['query'](queries_1[_0x26ba56(0x142)]);return _0x46444f[_0x26ba56(0x148)](_0x43ddb5=>flosum_repository_sync_dto_1[_0x26ba56(0x160)][_0x26ba56(0x188)](_0x43ddb5));}async[a111_0x406c84(0x155)](){const _0x9d29bc=a111_0x406c84,_0x1d1816=await this[_0x9d29bc(0x14e)]['query'](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x1d1816[_0x9d29bc(0x148)](_0x12eea9=>flosum_repository_sync_dto_1[_0x9d29bc(0x160)][_0x9d29bc(0x14a)](_0x12eea9));}async[a111_0x406c84(0x174)](_0x21564b){const _0x4cf48b=a111_0x406c84,_0x5c5bc5=await this['salesforceQuery'][_0x4cf48b(0x153)](queries_1[_0x4cf48b(0x133)]['replace'](_0x4cf48b(0x14d),_0x21564b));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromRepositoryRecord'](_0x5c5bc5[0x0]);}async['getBranchRecord'](_0x12ca63){const _0x5ba492=a111_0x406c84,_0x329a7c=await this[_0x5ba492(0x14e)][_0x5ba492(0x153)](queries_1[_0x5ba492(0x166)][_0x5ba492(0x163)](_0x5ba492(0x14d),_0x12ca63));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x5ba492(0x14a)](_0x329a7c[0x0]);}async[a111_0x406c84(0x186)](_0x491aa7){const _0x513fe7=a111_0x406c84,_0x3904bf=_0x513fe7(0x13f)+queries_1[_0x513fe7(0x17a)]+_0x513fe7(0x141)+_0x491aa7+'\x27';return this[_0x513fe7(0x173)](_0x3904bf);}async[a111_0x406c84(0x15a)](_0x38d5ce){const _0x2da761=a111_0x406c84,_0x36ae0c=_0x2da761(0x16b)+queries_1[_0x2da761(0x17a)]+_0x2da761(0x165)+_0x38d5ce+'\x27';return this['getComponents'](_0x36ae0c);}async[a111_0x406c84(0x187)](_0x4d16e2){const _0x1b0117=a111_0x406c84;var _0x1fbe47;const _0x2481c6=queries_1[_0x1b0117(0x151)][_0x1b0117(0x163)](_0x1b0117(0x145),_0x4d16e2[_0x1b0117(0x183)])[_0x1b0117(0x163)]('%name%',_0x4d16e2[_0x1b0117(0x159)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x1b0117(0x167)]),_0xd3ac1d=await this[_0x1b0117(0x14e)][_0x1b0117(0x153)](_0x2481c6),_0x4af5c8=(_0x1fbe47=_0xd3ac1d[0x0])===null||_0x1fbe47===void 0x0?void 0x0:_0x1fbe47['Id'];if(!_0x4af5c8)throw new Error(errors_1[_0x1b0117(0x17d)]);return _0x4af5c8;}async[a111_0x406c84(0x132)](_0x2e8172){const _0x44ba2a=a111_0x406c84;let _0x4ee0de=await this[_0x44ba2a(0x187)](_0x2e8172)['catch'](()=>null);return!_0x4ee0de&&(_0x4ee0de=await this['salesforceService'][_0x44ba2a(0x13a)](_0x44ba2a(0x15e),{'Body':(0x0,utils_1[_0x44ba2a(0x135)])('{}'),'ParentId':_0x2e8172[_0x44ba2a(0x183)],'ContentType':_0x44ba2a(0x158),'Name':_0x2e8172[_0x44ba2a(0x159)]?constants_1[_0x44ba2a(0x15c)]:constants_1[_0x44ba2a(0x167)]})),_0x4ee0de;}async[a111_0x406c84(0x179)](_0x1769a2,_0x5d8801){const _0x27cc67=a111_0x406c84,_0xe9f9f5=await this[_0x27cc67(0x132)](_0x1769a2);await this[_0x27cc67(0x178)][_0x27cc67(0x14c)](_0x27cc67(0x15e),_0xe9f9f5,{'Body':(0x0,utils_1[_0x27cc67(0x135)])(JSON[_0x27cc67(0x139)](_0x5d8801))});}async[a111_0x406c84(0x171)](_0x59ea46,_0x1af6b3){const _0x1ba5ed=a111_0x406c84;await this['salesforceService']['patchObject'](_0x59ea46[_0x1ba5ed(0x175)],_0x59ea46[_0x1ba5ed(0x183)],{[constants_1[_0x1ba5ed(0x13e)]+_0x1ba5ed(0x15f)]:_0x1af6b3});}async[a111_0x406c84(0x17f)](_0x595bf7){const _0x4274fd=a111_0x406c84;await this[_0x4274fd(0x178)][_0x4274fd(0x14c)](constants_1[_0x4274fd(0x13e)]+_0x4274fd(0x17b),_0x595bf7,{[constants_1[_0x4274fd(0x13e)]+_0x4274fd(0x172)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a111_0x406c84(0x144)])(),__metadata(a111_0x406c84(0x17e),[salesforce_query_service_1[a111_0x406c84(0x146)],salesforce_service_1[a111_0x406c84(0x161)]])],SalesforceSyncService),exports[a111_0x406c84(0x14f)]=SalesforceSyncService;function a111_0x4604(){const _0x490f6b=['getBranchRecords','metadata','decorate','text/plain','repositoryId','getBranchComponents','__metadata','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','__decorate','Attachment','Synchronization_Status__c','FlosumRepositorySyncDto','SalesforceService','497tiRvGn','replace','8EtYZaj','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','GET_BRANCH_QUERY','SYNC_ATTACHMENT_FOR_BRANCH_NAME','__esModule','./salesforce.service','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','2036IGwkxk','Components__r','3633057KsvJcy','./salesforce-query.service','65298TnmgBM','setStatus','Sync_In_Progress__c','getComponents','getRepositoryRecord','objectType','push','search','salesforceService','updateRemoteState','GET_COMPONENTS_QUERY','Git_Settings__c','1077116CJGmIV','ERR_INVALID_ATTACHMENT_ID','design:paramtypes','disableSync','typedi','3522wLWYmT','../../../constants/errors','objectId','2JsGBtG','defineProperty','getComponentsFromRepository','getAttachmentId','fromRepositoryRecord','apply','getRemoteStateAttachmentId','GET_REPOSITORY_QUERY','35113078QKDRal','encodeBase64','records','toString','(((.+)+)+)+$','stringify','createObject','FLOSUM_NAMESPACE','constructor','../queries','FLOSUM_GIT_NAMESPACE','\x0a\x20\x20\x20\x20\x20\x20','getOwnPropertyDescriptor','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','GET_WAITING_REPOSITORIES_QUERY','../../shared/utils','Service','%parentId%','SalesforceQueryService','object','map','10242320lIfIWD','fromBranchRecord','3544430ihwzOb','patchObject','%id%','salesforceQuery','SalesforceSyncService','../dto/flosum-repository-sync.dto','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','function','query','getRepositoryRecords'];a111_0x4604=function(){return _0x490f6b;};return a111_0x4604();}