function a112_0x55d9(_0x2f8515,_0x30f3e6){const _0x141592=a112_0x47fe();return a112_0x55d9=function(_0x4bd526,_0x904e48){_0x4bd526=_0x4bd526-0x91;let _0x47fe9a=_0x141592[_0x4bd526];return _0x47fe9a;},a112_0x55d9(_0x2f8515,_0x30f3e6);}const a112_0x5943ec=a112_0x55d9;(function(_0x33fabd,_0xc6af28){const _0x1cfd40=a112_0x55d9,_0x64de4f=_0x33fabd();while(!![]){try{const _0x212d93=-parseInt(_0x1cfd40(0x96))/0x1+parseInt(_0x1cfd40(0xa4))/0x2+-parseInt(_0x1cfd40(0x9f))/0x3*(parseInt(_0x1cfd40(0xce))/0x4)+-parseInt(_0x1cfd40(0xb8))/0x5+-parseInt(_0x1cfd40(0x9e))/0x6*(-parseInt(_0x1cfd40(0x92))/0x7)+-parseInt(_0x1cfd40(0x99))/0x8+parseInt(_0x1cfd40(0x98))/0x9*(parseInt(_0x1cfd40(0xbb))/0xa);if(_0x212d93===_0xc6af28)break;else _0x64de4f['push'](_0x64de4f['shift']());}catch(_0x5179b5){_0x64de4f['push'](_0x64de4f['shift']());}}}(a112_0x47fe,0x60b9b));const a112_0x904e48=function(){let _0x2c50d8=!![];return function(_0x14170e,_0x1f6f97){const _0x3947d4=_0x2c50d8?function(){if(_0x1f6f97){const _0x4821d0=_0x1f6f97['apply'](_0x14170e,arguments);return _0x1f6f97=null,_0x4821d0;}}:function(){};return _0x2c50d8=![],_0x3947d4;};}(),a112_0x4bd526=a112_0x904e48(this,function(){const _0x37019c=a112_0x55d9;return a112_0x4bd526[_0x37019c(0xb0)]()[_0x37019c(0xd9)](_0x37019c(0xb4))[_0x37019c(0xb0)]()[_0x37019c(0xa7)](a112_0x4bd526)[_0x37019c(0xd9)]('(((.+)+)+)+$');});a112_0x4bd526();'use strict';function a112_0x47fe(){const _0x33eece=['__decorate','getAttachmentId','text/plain','734692eGwyvy','Components__r','./salesforce-query.service','constructor','getComponents','__esModule','createObject','SalesforceService','function','Synchronization_Status__c','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','../../../constants','toString','records','../queries','stringify','(((.+)+)+)+$','FLOSUM_GIT_NAMESPACE','ERR_INVALID_ATTACHMENT_ID','SalesforceQueryService','359550frZZfJ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','typedi','550MGWIWE','GET_BRANCH_QUERY','FLOSUM_NAMESPACE','Service','encodeBase64','replace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','%parentId%','SalesforceSyncService','query','./salesforce.service','getRemoteStateAttachmentId','Sync_In_Progress__c','object','fromBranchRecord','salesforceService','../../shared/utils','\x0a\x20\x20\x20\x20\x20\x20','decorate','636TiUYME','fromRepositoryRecord','%id%','map','../../../constants/errors','FlosumRepositorySyncDto','getRepositoryRecords','repositoryId','updateRemoteState','objectId','salesforceQuery','search','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','../dto/flosum-repository-sync.dto','push','getBranchComponents','Attachment','126XQjsjC','disableSync','patchObject','length','457295EjDHkm','getBranchRecords','159147AZCLtd','5123904elAupg','getComponentsFromRepository','GET_COMPONENTS_QUERY','GET_REPOSITORY_QUERY','metadata','196746oZkjjH','6873roFdWU','catch'];a112_0x47fe=function(){return _0x33eece;};return a112_0x47fe();}var __decorate=this&&this[a112_0x5943ec(0xa1)]||function(_0x1c1dc6,_0x341aa5,_0x1c7684,_0x197558){const _0x2525cd=a112_0x5943ec;var _0x1062e9=arguments[_0x2525cd(0x95)],_0x744386=_0x1062e9<0x3?_0x341aa5:_0x197558===null?_0x197558=Object['getOwnPropertyDescriptor'](_0x341aa5,_0x1c7684):_0x197558,_0x4e8634;if(typeof Reflect==='object'&&typeof Reflect[_0x2525cd(0xcd)]===_0x2525cd(0xac))_0x744386=Reflect['decorate'](_0x1c1dc6,_0x341aa5,_0x1c7684,_0x197558);else{for(var _0x360ae7=_0x1c1dc6[_0x2525cd(0x95)]-0x1;_0x360ae7>=0x0;_0x360ae7--)if(_0x4e8634=_0x1c1dc6[_0x360ae7])_0x744386=(_0x1062e9<0x3?_0x4e8634(_0x744386):_0x1062e9>0x3?_0x4e8634(_0x341aa5,_0x1c7684,_0x744386):_0x4e8634(_0x341aa5,_0x1c7684))||_0x744386;}return _0x1062e9>0x3&&_0x744386&&Object['defineProperty'](_0x341aa5,_0x1c7684,_0x744386),_0x744386;},__metadata=this&&this['__metadata']||function(_0x46b6d7,_0xfab8ba){const _0x4c0dd8=a112_0x5943ec;if(typeof Reflect===_0x4c0dd8(0xc8)&&typeof Reflect[_0x4c0dd8(0x9d)]==='function')return Reflect[_0x4c0dd8(0x9d)](_0x46b6d7,_0xfab8ba);};Object['defineProperty'](exports,a112_0x5943ec(0xa9),{'value':!![]}),exports[a112_0x5943ec(0xc3)]=void 0x0;const typedi_1=require(a112_0x5943ec(0xba)),constants_1=require(a112_0x5943ec(0xaf)),errors_1=require(a112_0x5943ec(0xd2)),utils_1=require(a112_0x5943ec(0xcb)),flosum_repository_sync_dto_1=require(a112_0x5943ec(0xdb)),queries_1=require(a112_0x5943ec(0xb2)),salesforce_query_service_1=require(a112_0x5943ec(0xa6)),salesforce_service_1=require(a112_0x5943ec(0xc5));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x44473e,_0x297472){const _0x2d60b8=a112_0x5943ec;this[_0x2d60b8(0xd8)]=_0x44473e,this['salesforceService']=_0x297472;}async[a112_0x5943ec(0xa8)](_0x19deff){const _0x2d1c9a=a112_0x5943ec,_0x4a1563=await this['salesforceQuery']['query'](_0x19deff),_0x2d3f33=[];for(const _0x494217 of _0x4a1563){const _0x313fba=_0x494217[constants_1[_0x2d1c9a(0xbd)]+_0x2d1c9a(0xa5)][_0x2d1c9a(0xb1)][0x0];_0x2d3f33[_0x2d1c9a(0xdc)](_0x313fba['Id']);}return _0x2d3f33;}async[a112_0x5943ec(0xd4)](){const _0x212156=a112_0x5943ec,_0x271bb2=await this['salesforceQuery'][_0x212156(0xc4)](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0x271bb2[_0x212156(0xd1)](_0x31983c=>flosum_repository_sync_dto_1[_0x212156(0xd3)][_0x212156(0xcf)](_0x31983c));}async[a112_0x5943ec(0x97)](){const _0xae0347=a112_0x5943ec,_0xab4b60=await this['salesforceQuery'][_0xae0347(0xc4)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0xab4b60[_0xae0347(0xd1)](_0x202f0b=>flosum_repository_sync_dto_1[_0xae0347(0xd3)]['fromBranchRecord'](_0x202f0b));}async['getRepositoryRecord'](_0x15d5d1){const _0x49d59a=a112_0x5943ec,_0x27e99b=await this[_0x49d59a(0xd8)][_0x49d59a(0xc4)](queries_1[_0x49d59a(0x9c)][_0x49d59a(0xc0)]('%id%',_0x15d5d1));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x49d59a(0xcf)](_0x27e99b[0x0]);}async['getBranchRecord'](_0x94c430){const _0x11de50=a112_0x5943ec,_0x2e7f7f=await this['salesforceQuery'][_0x11de50(0xc4)](queries_1[_0x11de50(0xbc)][_0x11de50(0xc0)](_0x11de50(0xd0),_0x94c430));return flosum_repository_sync_dto_1[_0x11de50(0xd3)][_0x11de50(0xc9)](_0x2e7f7f[0x0]);}async[a112_0x5943ec(0x9a)](_0x2c5784){const _0x381c7a=a112_0x5943ec,_0x174e7=_0x381c7a(0xcc)+queries_1[_0x381c7a(0x9b)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x2c5784+'\x27';return this[_0x381c7a(0xa8)](_0x174e7);}async[a112_0x5943ec(0xdd)](_0x21c2ee){const _0x52532d=a112_0x5943ec,_0x5562a8=_0x52532d(0xc1)+queries_1['GET_COMPONENTS_QUERY']+_0x52532d(0xb9)+_0x21c2ee+'\x27';return this['getComponents'](_0x5562a8);}async['getAttachmentId'](_0x4459f3){const _0x5855db=a112_0x5943ec;var _0x566e27;const _0x1d40b6=queries_1[_0x5855db(0xda)][_0x5855db(0xc0)](_0x5855db(0xc2),_0x4459f3[_0x5855db(0xd7)])[_0x5855db(0xc0)]('%name%',_0x4459f3[_0x5855db(0xd5)]?constants_1[_0x5855db(0xae)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']),_0x2f9cf4=await this[_0x5855db(0xd8)]['query'](_0x1d40b6),_0xc68658=(_0x566e27=_0x2f9cf4[0x0])===null||_0x566e27===void 0x0?void 0x0:_0x566e27['Id'];if(!_0xc68658)throw new Error(errors_1[_0x5855db(0xb6)]);return _0xc68658;}async[a112_0x5943ec(0xc6)](_0x20b088){const _0xaf4f60=a112_0x5943ec;let _0x4df2b2=await this[_0xaf4f60(0xa2)](_0x20b088)[_0xaf4f60(0xa0)](()=>null);return!_0x4df2b2&&(_0x4df2b2=await this[_0xaf4f60(0xca)][_0xaf4f60(0xaa)](_0xaf4f60(0x91),{'Body':(0x0,utils_1[_0xaf4f60(0xbf)])('{}'),'ParentId':_0x20b088[_0xaf4f60(0xd7)],'ContentType':_0xaf4f60(0xa3),'Name':_0x20b088['repositoryId']?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']})),_0x4df2b2;}async[a112_0x5943ec(0xd6)](_0x4eb1eb,_0xf9f03e){const _0x5273c1=a112_0x5943ec,_0xa55343=await this['getRemoteStateAttachmentId'](_0x4eb1eb);await this[_0x5273c1(0xca)]['patchObject'](_0x5273c1(0x91),_0xa55343,{'Body':(0x0,utils_1['encodeBase64'])(JSON[_0x5273c1(0xb3)](_0xf9f03e))});}async['setStatus'](_0x5e7e53,_0x5e272b){const _0x5399ec=a112_0x5943ec;await this[_0x5399ec(0xca)][_0x5399ec(0x94)](_0x5e7e53['objectType'],_0x5e7e53['objectId'],{[constants_1[_0x5399ec(0xb5)]+_0x5399ec(0xad)]:_0x5e272b});}async[a112_0x5943ec(0x93)](_0x1ab0d4){const _0x37d4f4=a112_0x5943ec;await this[_0x37d4f4(0xca)][_0x37d4f4(0x94)](constants_1[_0x37d4f4(0xb5)]+'Git_Settings__c',_0x1ab0d4,{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x37d4f4(0xc7)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a112_0x5943ec(0xbe)])(),__metadata('design:paramtypes',[salesforce_query_service_1[a112_0x5943ec(0xb7)],salesforce_service_1[a112_0x5943ec(0xab)]])],SalesforceSyncService),exports[a112_0x5943ec(0xc3)]=SalesforceSyncService;