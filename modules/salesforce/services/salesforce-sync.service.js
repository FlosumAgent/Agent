const a111_0x2b86ed=a111_0x23d2;(function(_0x3a68ad,_0x4fc1ef){const _0x19043e=a111_0x23d2,_0x920281=_0x3a68ad();while(!![]){try{const _0x447d46=parseInt(_0x19043e(0x1e9))/0x1+parseInt(_0x19043e(0x1c9))/0x2+-parseInt(_0x19043e(0x1db))/0x3*(parseInt(_0x19043e(0x1d6))/0x4)+-parseInt(_0x19043e(0x1f0))/0x5*(-parseInt(_0x19043e(0x1c2))/0x6)+parseInt(_0x19043e(0x1d3))/0x7+parseInt(_0x19043e(0x1fa))/0x8*(-parseInt(_0x19043e(0x1d2))/0x9)+-parseInt(_0x19043e(0x1f4))/0xa;if(_0x447d46===_0x4fc1ef)break;else _0x920281['push'](_0x920281['shift']());}catch(_0x685ec1){_0x920281['push'](_0x920281['shift']());}}}(a111_0x1a83,0x6168a));const a111_0x1f20a4=function(){let _0x2b6cae=!![];return function(_0x66cb15,_0x11d8e3){const _0x5da38e=_0x2b6cae?function(){const _0x25a3aa=a111_0x23d2;if(_0x11d8e3){const _0x530b85=_0x11d8e3[_0x25a3aa(0x1c3)](_0x66cb15,arguments);return _0x11d8e3=null,_0x530b85;}}:function(){};return _0x2b6cae=![],_0x5da38e;};}(),a111_0x471239=a111_0x1f20a4(this,function(){const _0x1236e6=a111_0x23d2;return a111_0x471239[_0x1236e6(0x1cc)]()[_0x1236e6(0x1e8)](_0x1236e6(0x1da))['toString']()['constructor'](a111_0x471239)[_0x1236e6(0x1e8)](_0x1236e6(0x1da));});function a111_0x23d2(_0x5d1662,_0x50f22e){const _0x3ea621=a111_0x1a83();return a111_0x23d2=function(_0x471239,_0x1f20a4){_0x471239=_0x471239-0x1b9;let _0x1a83d8=_0x3ea621[_0x471239];return _0x1a83d8;},a111_0x23d2(_0x5d1662,_0x50f22e);}a111_0x471239();'use strict';var __decorate=this&&this[a111_0x2b86ed(0x1e2)]||function(_0x5a57cd,_0x64546d,_0x989102,_0x36ea1e){const _0xf8fe69=a111_0x2b86ed;var _0x188984=arguments['length'],_0x208642=_0x188984<0x3?_0x64546d:_0x36ea1e===null?_0x36ea1e=Object['getOwnPropertyDescriptor'](_0x64546d,_0x989102):_0x36ea1e,_0x47b4f5;if(typeof Reflect===_0xf8fe69(0x1dc)&&typeof Reflect[_0xf8fe69(0x1b9)]===_0xf8fe69(0x1ef))_0x208642=Reflect['decorate'](_0x5a57cd,_0x64546d,_0x989102,_0x36ea1e);else{for(var _0x3c9e5d=_0x5a57cd[_0xf8fe69(0x1de)]-0x1;_0x3c9e5d>=0x0;_0x3c9e5d--)if(_0x47b4f5=_0x5a57cd[_0x3c9e5d])_0x208642=(_0x188984<0x3?_0x47b4f5(_0x208642):_0x188984>0x3?_0x47b4f5(_0x64546d,_0x989102,_0x208642):_0x47b4f5(_0x64546d,_0x989102))||_0x208642;}return _0x188984>0x3&&_0x208642&&Object[_0xf8fe69(0x1e6)](_0x64546d,_0x989102,_0x208642),_0x208642;},__metadata=this&&this['__metadata']||function(_0x47981b,_0x2e7899){const _0x439581=a111_0x2b86ed;if(typeof Reflect===_0x439581(0x1dc)&&typeof Reflect[_0x439581(0x1c7)]==='function')return Reflect[_0x439581(0x1c7)](_0x47981b,_0x2e7899);};function a111_0x1a83(){const _0x58c9a9=['SalesforceSyncService','GET_BRANCH_QUERY','getAttachmentId','query','repositoryId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','SalesforceService','6JOwMuP','apply','../../../constants/errors','objectId','../../../constants','metadata','salesforceQuery','104356UryMJu','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','getComponents','toString','Synchronization_Status__c','salseforceService','ERR_INVALID_ATTACHMENT_ID','FlosumRepositorySyncDto','%id%','9OSgtve','2163196etCElf','getBranchRecords','records','20OjSHIi','setStatus','patchObject','fromBranchRecord','(((.+)+)+)+$','152742EMWvJw','object','GET_WAITING_REPOSITORIES_QUERY','length','%parentId%','%name%','FLOSUM_GIT_NAMESPACE','__decorate','../dto/flosum-repository-sync.dto','map','fromRepositoryRecord','defineProperty','\x0a\x20\x20\x20\x20\x20\x20','search','368250ISOVLF','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','GET_WAITING_BRANCHES_QUERY','replace','disableSync','../queries','function','3658805YexKHY','Service','getRepositoryRecords','Components__r','872880SPCRgu','FLOSUM_NAMESPACE','Git_Settings__c','getComponentsFromRepository','GET_COMPONENTS_QUERY','./salesforce-query.service','5762984HoWhwy','decorate','GET_REPOSITORY_QUERY'];a111_0x1a83=function(){return _0x58c9a9;};return a111_0x1a83();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a111_0x2b86ed(0x1bb)]=void 0x0;const typedi_1=require('typedi'),constants_1=require(a111_0x2b86ed(0x1c6)),errors_1=require(a111_0x2b86ed(0x1c4)),flosum_repository_sync_dto_1=require(a111_0x2b86ed(0x1e3)),queries_1=require(a111_0x2b86ed(0x1ee)),salesforce_query_service_1=require(a111_0x2b86ed(0x1f9)),salesforce_service_1=require('./salesforce.service');let SalesforceSyncService=class SalesforceSyncService{constructor(_0x5af748,_0x393ca7){const _0x2a1e9b=a111_0x2b86ed;this[_0x2a1e9b(0x1c8)]=_0x5af748,this['salseforceService']=_0x393ca7;}async[a111_0x2b86ed(0x1cb)](_0x51be4f){const _0x12abca=a111_0x2b86ed,_0x5d4252=await this[_0x12abca(0x1c8)][_0x12abca(0x1be)](_0x51be4f),_0x35f904=[];for(const _0x56b997 of _0x5d4252){const _0x3e5166=_0x56b997[constants_1[_0x12abca(0x1f5)]+_0x12abca(0x1f3)][_0x12abca(0x1d5)][0x0];_0x35f904['push'](_0x3e5166['Id']);}return _0x35f904;}async[a111_0x2b86ed(0x1f2)](){const _0x5fa6af=a111_0x2b86ed,_0x2f9cde=await this['salesforceQuery'][_0x5fa6af(0x1be)](queries_1[_0x5fa6af(0x1dd)]);return _0x2f9cde[_0x5fa6af(0x1e4)](_0x4fe5b0=>flosum_repository_sync_dto_1[_0x5fa6af(0x1d0)][_0x5fa6af(0x1e5)](_0x4fe5b0));}async[a111_0x2b86ed(0x1d4)](){const _0xa7e9d7=a111_0x2b86ed,_0x406f6a=await this['salesforceQuery']['query'](queries_1[_0xa7e9d7(0x1eb)]);return _0x406f6a[_0xa7e9d7(0x1e4)](_0x602176=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0xa7e9d7(0x1d9)](_0x602176));}async['getRepositoryRecord'](_0x292635){const _0x3e68a6=a111_0x2b86ed,_0x42cfba=await this['salesforceQuery'][_0x3e68a6(0x1be)](queries_1[_0x3e68a6(0x1ba)][_0x3e68a6(0x1ec)]('%id%',_0x292635));return flosum_repository_sync_dto_1[_0x3e68a6(0x1d0)][_0x3e68a6(0x1e5)](_0x42cfba[0x0]);}async['getBranchRecord'](_0x4c5917){const _0x451da9=a111_0x2b86ed,_0x12df43=await this['salesforceQuery'][_0x451da9(0x1be)](queries_1[_0x451da9(0x1bc)][_0x451da9(0x1ec)](_0x451da9(0x1d1),_0x4c5917));return flosum_repository_sync_dto_1[_0x451da9(0x1d0)][_0x451da9(0x1d9)](_0x12df43[0x0]);}async[a111_0x2b86ed(0x1f7)](_0x4ec508){const _0x55e0be=a111_0x2b86ed,_0x3b3aac=_0x55e0be(0x1e7)+queries_1[_0x55e0be(0x1f8)]+_0x55e0be(0x1ea)+_0x4ec508+'\x27';return this[_0x55e0be(0x1cb)](_0x3b3aac);}async['getBranchComponents'](_0x31968f){const _0x521cde=a111_0x2b86ed,_0x520125=_0x521cde(0x1c0)+queries_1[_0x521cde(0x1f8)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0x31968f+'\x27';return this[_0x521cde(0x1cb)](_0x520125);}async[a111_0x2b86ed(0x1bd)](_0x44bafb){const _0x1b2e15=a111_0x2b86ed;var _0x548413;const _0x3a405a=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY'][_0x1b2e15(0x1ec)](_0x1b2e15(0x1df),_0x44bafb[_0x1b2e15(0x1c5)])[_0x1b2e15(0x1ec)](_0x1b2e15(0x1e0),_0x44bafb[_0x1b2e15(0x1bf)]?constants_1[_0x1b2e15(0x1ca)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']),_0x3fa6ce=await this['salesforceQuery'][_0x1b2e15(0x1be)](_0x3a405a),_0x2d48c2=(_0x548413=_0x3fa6ce[0x0])===null||_0x548413===void 0x0?void 0x0:_0x548413['Id'];if(!_0x2d48c2)throw new Error(errors_1[_0x1b2e15(0x1cf)]);return _0x2d48c2;}async[a111_0x2b86ed(0x1d7)](_0x40064b,_0x183348){const _0x53a60e=a111_0x2b86ed;await this[_0x53a60e(0x1ce)][_0x53a60e(0x1d8)](_0x40064b['objectType'],_0x40064b[_0x53a60e(0x1c5)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x53a60e(0x1cd)]:_0x183348});}async[a111_0x2b86ed(0x1ed)](_0x17e7e0){const _0x3e4345=a111_0x2b86ed;await this[_0x3e4345(0x1ce)][_0x3e4345(0x1d8)](constants_1[_0x3e4345(0x1e1)]+_0x3e4345(0x1f6),_0x17e7e0,{[constants_1['FLOSUM_GIT_NAMESPACE']+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a111_0x2b86ed(0x1f1)])(),__metadata('design:paramtypes',[salesforce_query_service_1['SalesforceQueryService'],salesforce_service_1[a111_0x2b86ed(0x1c1)]])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;