function a135_0x41bb(){const _0x2b2ce0=['object','apply','fromBranchRecord','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','Synchronization_Status__c','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','search','setStatus','stringify','getComponents','getRepositoryRecordByName','Sync_In_Progress__c','defineProperty','push','Branch\x20','SalesforceQueryService','./salesforce-query.service','__esModule','SYNC_ATTACHMENT_FOR_BRANCH_NAME','376263siQXBo','FlosumRepositorySyncDto','\x20not\x20found\x20on\x20salesforce','disableSync','GET_BRANCH_QUERY','%id%','getBranchRecord','__decorate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','records','map','SalesforceService','../dto/flosum-repository-sync.dto','./salesforce.service','getBranchRecordByName','8336496pmSYvf','decorate','Service','2917060GZVWFx','GET_WAITING_BRANCHES_QUERY','1664172SsjIYo','GET_WAITING_REPOSITORIES_QUERY','%name%','getBranchRecords','../queries','getRepositoryRecords','%parentId%','fromRepositoryRecord','SalesforceNotFoundError','16XGOMcu','getOwnPropertyDescriptor','getBranchComponents','Repository\x20with\x20Id\x20','replace','repositoryId','7651074wElXpP','__metadata','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','3006080Lfhhps','toString','GET_COMPONENTS_QUERY','19013904mSyqkG','5ZyRLhP','objectId','Repository\x20','getRemoteStateAttachmentId','function','GET_REPOSITORY_QUERY','GET_REPOSITORY_BY_NAME_QUERY','getAttachmentId','salesforceService','../errors/not-found.error','getRepositoryRecord','FLOSUM_GIT_NAMESPACE','patchObject','getComponentsFromRepository','metadata','(((.+)+)+)+$','objectType','Attachment','GET_BRANCH_BY_NAME_QUERY','encodeBase64','query','salesforceQuery','length'];a135_0x41bb=function(){return _0x2b2ce0;};return a135_0x41bb();}const a135_0x575213=a135_0x5a14;(function(_0xffa104,_0x2431bf){const _0x16a3a3=a135_0x5a14,_0x185c43=_0xffa104();while(!![]){try{const _0x5940e6=-parseInt(_0x16a3a3(0x230))/0x1+parseInt(_0x16a3a3(0x22e))/0x2+parseInt(_0x16a3a3(0x21c))/0x3*(parseInt(_0x16a3a3(0x239))/0x4)+parseInt(_0x16a3a3(0x1f2))/0x5*(parseInt(_0x16a3a3(0x23f))/0x6)+parseInt(_0x16a3a3(0x1ee))/0x7+parseInt(_0x16a3a3(0x22b))/0x8+-parseInt(_0x16a3a3(0x1f1))/0x9;if(_0x5940e6===_0x2431bf)break;else _0x185c43['push'](_0x185c43['shift']());}catch(_0x2534c1){_0x185c43['push'](_0x185c43['shift']());}}}(a135_0x41bb,0xe3113));function a135_0x5a14(_0x233f26,_0x47de2b){const _0x1bf5e1=a135_0x41bb();return a135_0x5a14=function(_0x21681e,_0x52d911){_0x21681e=_0x21681e-0x1eb;let _0x41bb65=_0x1bf5e1[_0x21681e];return _0x41bb65;},a135_0x5a14(_0x233f26,_0x47de2b);}const a135_0x52d911=function(){let _0x31fd2b=!![];return function(_0xd79d0a,_0x34bd75){const _0x15f238=_0x31fd2b?function(){const _0xdade8e=a135_0x5a14;if(_0x34bd75){const _0x3737a0=_0x34bd75[_0xdade8e(0x20a)](_0xd79d0a,arguments);return _0x34bd75=null,_0x3737a0;}}:function(){};return _0x31fd2b=![],_0x15f238;};}(),a135_0x21681e=a135_0x52d911(this,function(){const _0x5cde0f=a135_0x5a14;return a135_0x21681e[_0x5cde0f(0x1ef)]()[_0x5cde0f(0x20f)](_0x5cde0f(0x201))[_0x5cde0f(0x1ef)]()['constructor'](a135_0x21681e)[_0x5cde0f(0x20f)](_0x5cde0f(0x201));});a135_0x21681e();'use strict';var __decorate=this&&this[a135_0x575213(0x223)]||function(_0x33157b,_0x5d52f0,_0x14f880,_0xb3b384){const _0x292dc2=a135_0x575213;var _0x33b20b=arguments['length'],_0x4ce1fc=_0x33b20b<0x3?_0x5d52f0:_0xb3b384===null?_0xb3b384=Object[_0x292dc2(0x23a)](_0x5d52f0,_0x14f880):_0xb3b384,_0x41847a;if(typeof Reflect===_0x292dc2(0x209)&&typeof Reflect[_0x292dc2(0x22c)]===_0x292dc2(0x1f6))_0x4ce1fc=Reflect['decorate'](_0x33157b,_0x5d52f0,_0x14f880,_0xb3b384);else{for(var _0x544035=_0x33157b[_0x292dc2(0x208)]-0x1;_0x544035>=0x0;_0x544035--)if(_0x41847a=_0x33157b[_0x544035])_0x4ce1fc=(_0x33b20b<0x3?_0x41847a(_0x4ce1fc):_0x33b20b>0x3?_0x41847a(_0x5d52f0,_0x14f880,_0x4ce1fc):_0x41847a(_0x5d52f0,_0x14f880))||_0x4ce1fc;}return _0x33b20b>0x3&&_0x4ce1fc&&Object[_0x292dc2(0x215)](_0x5d52f0,_0x14f880,_0x4ce1fc),_0x4ce1fc;},__metadata=this&&this[a135_0x575213(0x1eb)]||function(_0x4a4421,_0x10ef35){const _0xd3f9a=a135_0x575213;if(typeof Reflect===_0xd3f9a(0x209)&&typeof Reflect['metadata']==='function')return Reflect[_0xd3f9a(0x200)](_0x4a4421,_0x10ef35);};Object[a135_0x575213(0x215)](exports,a135_0x575213(0x21a),{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require('typedi'),constants_1=require('../../../constants'),errors_1=require('../../../constants/errors'),utils_1=require('../../shared/utils'),flosum_repository_sync_dto_1=require(a135_0x575213(0x228)),not_found_error_1=require(a135_0x575213(0x1fb)),queries_1=require(a135_0x575213(0x234)),salesforce_query_service_1=require(a135_0x575213(0x219)),salesforce_service_1=require(a135_0x575213(0x229));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x242a37,_0x1a846f){const _0x39f05a=a135_0x575213;this[_0x39f05a(0x207)]=_0x242a37,this[_0x39f05a(0x1fa)]=_0x1a846f;}async[a135_0x575213(0x212)](_0x2ea26b){const _0x2bf6d3=a135_0x575213;var _0x23c1a5;const _0x220dca=await this[_0x2bf6d3(0x207)]['query'](_0x2ea26b),_0x4b6679=[];for(const _0x2abe2c of _0x220dca){const _0x4894ae=(_0x23c1a5=_0x2abe2c[constants_1['FLOSUM_NAMESPACE']+'Components__r'])===null||_0x23c1a5===void 0x0?void 0x0:_0x23c1a5[_0x2bf6d3(0x225)];_0x4894ae&&_0x4894ae[_0x2bf6d3(0x208)]&&_0x4b6679[_0x2bf6d3(0x216)](_0x4894ae[0x0]['Id']);}return _0x4b6679;}async[a135_0x575213(0x235)](){const _0x2ac112=a135_0x575213,_0x4f84ba=await this['salesforceQuery'][_0x2ac112(0x206)](queries_1[_0x2ac112(0x231)]);return _0x4f84ba[_0x2ac112(0x226)](_0x1199fb=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x2ac112(0x237)](_0x1199fb));}async[a135_0x575213(0x233)](){const _0xeec5f=a135_0x575213,_0x38701f=await this[_0xeec5f(0x207)][_0xeec5f(0x206)](queries_1[_0xeec5f(0x22f)]);return _0x38701f[_0xeec5f(0x226)](_0x430bff=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromBranchRecord'](_0x430bff));}async[a135_0x575213(0x1fc)](_0x1357af){const _0xb706f4=a135_0x575213,_0x450f60=await this[_0xb706f4(0x207)][_0xb706f4(0x206)](queries_1[_0xb706f4(0x1f7)]['replace'](_0xb706f4(0x221),_0x1357af));if(_0x450f60[_0xb706f4(0x208)]===0x0)throw new not_found_error_1['SalesforceNotFoundError'](_0xb706f4(0x23c)+_0x1357af+_0xb706f4(0x21e));return flosum_repository_sync_dto_1[_0xb706f4(0x21d)][_0xb706f4(0x237)](_0x450f60[0x0]);}async[a135_0x575213(0x222)](_0x4c835c){const _0x2a1b7d=a135_0x575213,_0x2788bf=await this[_0x2a1b7d(0x207)][_0x2a1b7d(0x206)](queries_1[_0x2a1b7d(0x220)]['replace']('%id%',_0x4c835c));if(_0x2788bf[_0x2a1b7d(0x208)]===0x0)throw new not_found_error_1[(_0x2a1b7d(0x238))]('Branch\x20with\x20Id\x20'+_0x4c835c+_0x2a1b7d(0x21e));return flosum_repository_sync_dto_1[_0x2a1b7d(0x21d)][_0x2a1b7d(0x20b)](_0x2788bf[0x0]);}async[a135_0x575213(0x22a)](_0x49cbc9){const _0x1caf46=a135_0x575213,_0x4e8a13=await this[_0x1caf46(0x207)][_0x1caf46(0x206)](queries_1[_0x1caf46(0x204)][_0x1caf46(0x23d)](_0x1caf46(0x232),_0x49cbc9));if(_0x4e8a13['length']===0x0)throw new not_found_error_1[(_0x1caf46(0x238))](_0x1caf46(0x217)+_0x49cbc9+_0x1caf46(0x21e));return flosum_repository_sync_dto_1[_0x1caf46(0x21d)]['fromBranchRecord'](_0x4e8a13[0x0]);}async[a135_0x575213(0x213)](_0x4d5688){const _0x8f5965=a135_0x575213,_0x4951ba=await this[_0x8f5965(0x207)][_0x8f5965(0x206)](queries_1[_0x8f5965(0x1f8)][_0x8f5965(0x23d)]('%name%',_0x4d5688));if(_0x4951ba[_0x8f5965(0x208)]===0x0)throw new not_found_error_1[(_0x8f5965(0x238))](_0x8f5965(0x1f4)+_0x4d5688+_0x8f5965(0x21e));return flosum_repository_sync_dto_1[_0x8f5965(0x21d)][_0x8f5965(0x237)](_0x4951ba[0x0]);}async[a135_0x575213(0x1ff)](_0x178c03){const _0x2cb1dd=a135_0x575213,_0x46ffcb='\x0a\x20\x20\x20\x20\x20\x20'+queries_1[_0x2cb1dd(0x1f0)]+_0x2cb1dd(0x20c)+_0x178c03+'\x27';return this[_0x2cb1dd(0x212)](_0x46ffcb);}async[a135_0x575213(0x23b)](_0x19e29e){const _0x1c6e1d=a135_0x575213,_0x2787dc=_0x1c6e1d(0x20e)+queries_1[_0x1c6e1d(0x1f0)]+_0x1c6e1d(0x224)+_0x19e29e+'\x27';return this[_0x1c6e1d(0x212)](_0x2787dc);}async[a135_0x575213(0x1f9)](_0xa1a887){const _0x1d9234=a135_0x575213;var _0x5578c9;const _0x55beba=queries_1[_0x1d9234(0x1ed)][_0x1d9234(0x23d)](_0x1d9234(0x236),_0xa1a887[_0x1d9234(0x1f3)])[_0x1d9234(0x23d)](_0x1d9234(0x232),_0xa1a887[_0x1d9234(0x23e)]?constants_1[_0x1d9234(0x1ec)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']),_0x25508c=await this[_0x1d9234(0x207)]['query'](_0x55beba),_0x4952d0=(_0x5578c9=_0x25508c[0x0])===null||_0x5578c9===void 0x0?void 0x0:_0x5578c9['Id'];if(!_0x4952d0)throw new Error(errors_1['ERR_INVALID_ATTACHMENT_ID']);return _0x4952d0;}async[a135_0x575213(0x1f5)](_0x2acd1a){const _0x4499a5=a135_0x575213;let _0x51c2fd=await this[_0x4499a5(0x1f9)](_0x2acd1a)['catch'](()=>null);return!_0x51c2fd&&(_0x51c2fd=await this[_0x4499a5(0x1fa)]['createObject'](_0x4499a5(0x203),{'Body':utils_1[_0x4499a5(0x205)]('{}'),'ParentId':_0x2acd1a[_0x4499a5(0x1f3)],'ContentType':'text/plain','Name':_0x2acd1a[_0x4499a5(0x23e)]?constants_1[_0x4499a5(0x1ec)]:constants_1[_0x4499a5(0x21b)]})),_0x51c2fd;}async['updateRemoteState'](_0x2851b8,_0x55dcec){const _0x4bf0fa=a135_0x575213,_0x520aa=await this[_0x4bf0fa(0x1f5)](_0x2851b8);await this[_0x4bf0fa(0x1fa)][_0x4bf0fa(0x1fe)](_0x4bf0fa(0x203),_0x520aa,{'Body':utils_1[_0x4bf0fa(0x205)](JSON[_0x4bf0fa(0x211)](_0x55dcec))});}async[a135_0x575213(0x210)](_0x29fb85,_0x3203fa){const _0x382d80=a135_0x575213;await this[_0x382d80(0x1fa)][_0x382d80(0x1fe)](_0x29fb85[_0x382d80(0x202)],_0x29fb85[_0x382d80(0x1f3)],{[constants_1[_0x382d80(0x1fd)]+_0x382d80(0x20d)]:_0x3203fa});}async[a135_0x575213(0x21f)](_0x551037){const _0x1375ec=a135_0x575213;await this[_0x1375ec(0x1fa)][_0x1375ec(0x1fe)](constants_1[_0x1375ec(0x1fd)]+'Git_Settings__c',_0x551037,{[constants_1[_0x1375ec(0x1fd)]+_0x1375ec(0x214)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a135_0x575213(0x22d)](),__metadata('design:paramtypes',[salesforce_query_service_1[a135_0x575213(0x218)],salesforce_service_1[a135_0x575213(0x227)]])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;