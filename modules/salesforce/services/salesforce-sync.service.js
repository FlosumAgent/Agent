const a110_0x3cded5=a110_0x4913;(function(_0xc921b3,_0x2b97da){const _0x3e6da7=a110_0x4913,_0x38da06=_0xc921b3();while(!![]){try{const _0x59d04c=parseInt(_0x3e6da7(0x1af))/0x1+parseInt(_0x3e6da7(0x1c2))/0x2+-parseInt(_0x3e6da7(0x19c))/0x3*(parseInt(_0x3e6da7(0x192))/0x4)+-parseInt(_0x3e6da7(0x195))/0x5+parseInt(_0x3e6da7(0x1ad))/0x6*(-parseInt(_0x3e6da7(0x1c6))/0x7)+-parseInt(_0x3e6da7(0x19f))/0x8+parseInt(_0x3e6da7(0x1c5))/0x9*(parseInt(_0x3e6da7(0x189))/0xa);if(_0x59d04c===_0x2b97da)break;else _0x38da06['push'](_0x38da06['shift']());}catch(_0x340d49){_0x38da06['push'](_0x38da06['shift']());}}}(a110_0x1e4d,0x35c67));const a110_0x22ef01=function(){let _0x32360d=!![];return function(_0x3bc8f4,_0x900321){const _0x4eb33c=_0x32360d?function(){if(_0x900321){const _0x1b403f=_0x900321['apply'](_0x3bc8f4,arguments);return _0x900321=null,_0x1b403f;}}:function(){};return _0x32360d=![],_0x4eb33c;};}(),a110_0x2c6731=a110_0x22ef01(this,function(){const _0x4d143a=a110_0x4913;return a110_0x2c6731[_0x4d143a(0x1a1)]()['search'](_0x4d143a(0x188))[_0x4d143a(0x1a1)]()[_0x4d143a(0x1be)](a110_0x2c6731)[_0x4d143a(0x1c4)]('(((.+)+)+)+$');});function a110_0x1e4d(){const _0x5bbe2c=['query','search','6282666kYvYSm','14KLTflR','Sha__c','objectId','(((.+)+)+)+$','10KWjCuV','getComponents','SalesforceQueryService','salesforceQuery','Git_Settings__c','SalesforceSyncService','setStatus','__decorate','push','68308XJjGSL','GET_WAITING_REPOSITORIES_QUERY','%id%','214710qHCtbT','disableSync','getComponentsFromRepository','ERR_INVALID_ATTACHMENT_ID','FlosumRepositorySyncDto','design:paramtypes','Status__c','39BFjqUC','length','defineProperty','3013824aDNgwE','./salesforce.service','toString','%parentId%','replace','Service','getRepositoryRecords','getBranchRecord','repositoryId','getRepositoryRecord','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','../../../constants/errors','metadata','objectType','483852pyxzDR','patchObject','221231GVuqhg','object','./salesforce-query.service','%name%','fromBranchRecord','FLOSUM_GIT_NAMESPACE','__metadata','Sync_In_Progress__c','\x0a\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','fromRepositoryRecord','../queries','decorate','GET_COMPONENTS_QUERY','../dto/flosum-repository-sync.dto','constructor','salseforceService','map','SalesforceService','207826AcOLxz'];a110_0x1e4d=function(){return _0x5bbe2c;};return a110_0x1e4d();}a110_0x2c6731();function a110_0x4913(_0x55c1e6,_0x19feb2){const _0xb9e4c5=a110_0x1e4d();return a110_0x4913=function(_0x2c6731,_0x22ef01){_0x2c6731=_0x2c6731-0x188;let _0x1e4d4c=_0xb9e4c5[_0x2c6731];return _0x1e4d4c;},a110_0x4913(_0x55c1e6,_0x19feb2);}'use strict';var __decorate=this&&this[a110_0x3cded5(0x190)]||function(_0xbc0421,_0x510e44,_0x37ae9a,_0x15e0e2){const _0x16ffb9=a110_0x3cded5;var _0x8dbeef=arguments[_0x16ffb9(0x19d)],_0x513b75=_0x8dbeef<0x3?_0x510e44:_0x15e0e2===null?_0x15e0e2=Object['getOwnPropertyDescriptor'](_0x510e44,_0x37ae9a):_0x15e0e2,_0x3bd96c;if(typeof Reflect===_0x16ffb9(0x1b0)&&typeof Reflect[_0x16ffb9(0x1bb)]==='function')_0x513b75=Reflect['decorate'](_0xbc0421,_0x510e44,_0x37ae9a,_0x15e0e2);else{for(var _0x214ac1=_0xbc0421[_0x16ffb9(0x19d)]-0x1;_0x214ac1>=0x0;_0x214ac1--)if(_0x3bd96c=_0xbc0421[_0x214ac1])_0x513b75=(_0x8dbeef<0x3?_0x3bd96c(_0x513b75):_0x8dbeef>0x3?_0x3bd96c(_0x510e44,_0x37ae9a,_0x513b75):_0x3bd96c(_0x510e44,_0x37ae9a))||_0x513b75;}return _0x8dbeef>0x3&&_0x513b75&&Object[_0x16ffb9(0x19e)](_0x510e44,_0x37ae9a,_0x513b75),_0x513b75;},__metadata=this&&this[a110_0x3cded5(0x1b5)]||function(_0x25f8c1,_0x5cb853){const _0x4e8bfb=a110_0x3cded5;if(typeof Reflect===_0x4e8bfb(0x1b0)&&typeof Reflect[_0x4e8bfb(0x1ab)]==='function')return Reflect['metadata'](_0x25f8c1,_0x5cb853);};Object[a110_0x3cded5(0x19e)](exports,'__esModule',{'value':!![]}),exports[a110_0x3cded5(0x18e)]=void 0x0;const typedi_1=require('typedi'),constants_1=require('../../../constants'),errors_1=require(a110_0x3cded5(0x1aa)),flosum_repository_sync_dto_1=require(a110_0x3cded5(0x1bd)),queries_1=require(a110_0x3cded5(0x1ba)),salesforce_query_service_1=require(a110_0x3cded5(0x1b1)),salesforce_service_1=require(a110_0x3cded5(0x1a0));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x5727b4,_0xa474f0){const _0x1bcf53=a110_0x3cded5;this['salesforceQuery']=_0x5727b4,this[_0x1bcf53(0x1bf)]=_0xa474f0;}async[a110_0x3cded5(0x18a)](_0x4220ef){const _0x31a655=a110_0x3cded5,_0x32c7e8=await this[_0x31a655(0x18c)][_0x31a655(0x1c3)](_0x4220ef),_0x5de3aa=[];for(const _0x1e541c of _0x32c7e8){const _0x32d930=_0x1e541c[constants_1['FLOSUM_NAMESPACE']+'Components__r']['records'][0x0];_0x5de3aa[_0x31a655(0x191)](_0x32d930['Id']);}return _0x5de3aa;}async[a110_0x3cded5(0x1a5)](){const _0x50528a=a110_0x3cded5,_0x2f8d47=await this['salesforceQuery']['query'](queries_1[_0x50528a(0x193)]);return _0x2f8d47[_0x50528a(0x1c0)](_0x362abc=>flosum_repository_sync_dto_1[_0x50528a(0x199)]['fromRepositoryRecord'](_0x362abc));}async['getBranchRecords'](){const _0x18edc8=a110_0x3cded5,_0x1573c5=await this['salesforceQuery'][_0x18edc8(0x1c3)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x1573c5[_0x18edc8(0x1c0)](_0x42bcff=>flosum_repository_sync_dto_1[_0x18edc8(0x199)][_0x18edc8(0x1b3)](_0x42bcff));}async[a110_0x3cded5(0x1a8)](_0x8f593){const _0x4e43e7=a110_0x3cded5,_0x414914=await this[_0x4e43e7(0x18c)]['query'](queries_1['GET_REPOSITORY_QUERY']['replace'](_0x4e43e7(0x194),_0x8f593));return flosum_repository_sync_dto_1[_0x4e43e7(0x199)][_0x4e43e7(0x1b9)](_0x414914[0x0]);}async[a110_0x3cded5(0x1a6)](_0x5342af){const _0x1415fd=a110_0x3cded5,_0x465648=await this[_0x1415fd(0x18c)][_0x1415fd(0x1c3)](queries_1['GET_BRANCH_QUERY']['replace']('%id%',_0x5342af));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x1415fd(0x1b3)](_0x465648[0x0]);}async[a110_0x3cded5(0x197)](_0x365c8f){const _0x52b10e=a110_0x3cded5,_0x3724db=_0x52b10e(0x1b7)+queries_1[_0x52b10e(0x1bc)]+_0x52b10e(0x1b8)+_0x365c8f+'\x27';return this['getComponents'](_0x3724db);}async['getBranchComponents'](_0x49eb91){const _0x3d67ea=a110_0x3cded5,_0x2e7a6e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+queries_1[_0x3d67ea(0x1bc)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0x49eb91+'\x27';return this[_0x3d67ea(0x18a)](_0x2e7a6e);}async['getAttachmentId'](_0x850d62){const _0x2006f4=a110_0x3cded5;var _0x25eadb;const _0x39b88f=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY']['replace'](_0x2006f4(0x1a2),_0x850d62['objectId'])[_0x2006f4(0x1a3)](_0x2006f4(0x1b2),_0x850d62[_0x2006f4(0x1a7)]?constants_1[_0x2006f4(0x1a9)]:constants_1['SYNC_ATTACHMENT_FOR_BRANCH_NAME']),_0xd2eb7d=await this[_0x2006f4(0x18c)][_0x2006f4(0x1c3)](_0x39b88f),_0x4348b6=(_0x25eadb=_0xd2eb7d[0x0])===null||_0x25eadb===void 0x0?void 0x0:_0x25eadb['Id'];if(!_0x4348b6)throw new Error(errors_1[_0x2006f4(0x198)]);return _0x4348b6;}async[a110_0x3cded5(0x18f)](_0x743839,_0x28bfec){const _0x1d89d4=a110_0x3cded5;await this[_0x1d89d4(0x1bf)][_0x1d89d4(0x1ae)](_0x743839[_0x1d89d4(0x1ac)],_0x743839['objectId'],{[constants_1[_0x1d89d4(0x1b4)]+_0x1d89d4(0x19b)]:_0x28bfec});}async['setLastSha'](_0x3c690d,_0x1ef14b){const _0x43312a=a110_0x3cded5;await this[_0x43312a(0x1bf)][_0x43312a(0x1ae)](_0x3c690d[_0x43312a(0x1ac)],_0x3c690d[_0x43312a(0x1c8)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x43312a(0x1c7)]:_0x1ef14b});}async[a110_0x3cded5(0x196)](_0x1301bc){const _0x1d9df4=a110_0x3cded5;await this[_0x1d9df4(0x1bf)]['patchObject'](constants_1[_0x1d9df4(0x1b4)]+_0x1d9df4(0x18d),_0x1301bc,{[constants_1[_0x1d9df4(0x1b4)]+_0x1d9df4(0x1b6)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1[a110_0x3cded5(0x1a4)])(),__metadata(a110_0x3cded5(0x19a),[salesforce_query_service_1[a110_0x3cded5(0x18b)],salesforce_service_1[a110_0x3cded5(0x1c1)]])],SalesforceSyncService),exports[a110_0x3cded5(0x18e)]=SalesforceSyncService;