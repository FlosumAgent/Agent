const a107_0x5c15dd=a107_0x16bc;(function(_0xf70eec,_0x34c1f9){const _0x244e9b=a107_0x16bc,_0x1d74cc=_0xf70eec();while(!![]){try{const _0x430140=parseInt(_0x244e9b(0x94))/0x1+parseInt(_0x244e9b(0xa1))/0x2+-parseInt(_0x244e9b(0x9a))/0x3*(parseInt(_0x244e9b(0x6f))/0x4)+-parseInt(_0x244e9b(0x81))/0x5+parseInt(_0x244e9b(0x83))/0x6*(parseInt(_0x244e9b(0x6c))/0x7)+parseInt(_0x244e9b(0x93))/0x8+parseInt(_0x244e9b(0x97))/0x9;if(_0x430140===_0x34c1f9)break;else _0x1d74cc['push'](_0x1d74cc['shift']());}catch(_0x372710){_0x1d74cc['push'](_0x1d74cc['shift']());}}}(a107_0x2056,0x674ee));const a107_0x498c4c=function(){let _0x4d2645=!![];return function(_0x233f18,_0x16ea7d){const _0x300e19=_0x4d2645?function(){const _0x2f1d99=a107_0x16bc;if(_0x16ea7d){const _0x4a4f41=_0x16ea7d[_0x2f1d99(0x79)](_0x233f18,arguments);return _0x16ea7d=null,_0x4a4f41;}}:function(){};return _0x4d2645=![],_0x300e19;};}(),a107_0x238c37=a107_0x498c4c(this,function(){const _0x56c669=a107_0x16bc;return a107_0x238c37[_0x56c669(0xa3)]()[_0x56c669(0x75)]('(((.+)+)+)+$')[_0x56c669(0xa3)]()[_0x56c669(0x88)](a107_0x238c37)[_0x56c669(0x75)](_0x56c669(0x72));});a107_0x238c37();function a107_0x2056(){const _0x52af3f=['push','decorate','fromRepositoryRecord','salseforceService','SalesforceQueryService','../queries','getBranchRecord','81448hAYBmX','603176chuWkN','../../../constants/errors','replace','4793832PpECnA','%id%','getRepositoryRecord','47811odzCxI','design:paramtypes','objectId','getComponents','disableSync','./salesforce-query.service','\x0a\x20\x20\x20\x20\x20\x20','422494daleEE','Sync_In_Progress__c','toString','__esModule','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','map','GET_ATTACHMENT_BY_PARENT_ID_QUERY','setLastSha','getOwnPropertyDescriptor','patchObject','GET_COMPONENTS_QUERY','GET_BRANCH_QUERY','323533rTgeJt','SalesforceSyncService','setStatus','176DmuIZe','defineProperty','ERR_INVALID_ATTACHMENT_ID','(((.+)+)+)+$','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','SalesforceService','search','objectType','fromBranchRecord','metadata','apply','length','salesforceQuery','records','FLOSUM_GIT_NAMESPACE','object','__decorate','../../../constants','3937510iUKxMP','query','72TIkCEg','GET_WAITING_REPOSITORIES_QUERY','GET_REPOSITORY_QUERY','FlosumRepositorySyncDto','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','constructor','getAttachmentIdByParent','getRepositoryRecords','FLOSUM_NAMESPACE'];a107_0x2056=function(){return _0x52af3f;};return a107_0x2056();}'use strict';function a107_0x16bc(_0x5150c7,_0x51b8d4){const _0x4702b7=a107_0x2056();return a107_0x16bc=function(_0x238c37,_0x498c4c){_0x238c37=_0x238c37-0x6c;let _0x205636=_0x4702b7[_0x238c37];return _0x205636;},a107_0x16bc(_0x5150c7,_0x51b8d4);}var __decorate=this&&this[a107_0x5c15dd(0x7f)]||function(_0x2d2b14,_0x191107,_0x1d3e32,_0x287f5d){const _0x298ed2=a107_0x5c15dd;var _0x723838=arguments['length'],_0xea4e6f=_0x723838<0x3?_0x191107:_0x287f5d===null?_0x287f5d=Object[_0x298ed2(0xa9)](_0x191107,_0x1d3e32):_0x287f5d,_0xd07ec1;if(typeof Reflect===_0x298ed2(0x7e)&&typeof Reflect['decorate']==='function')_0xea4e6f=Reflect[_0x298ed2(0x8d)](_0x2d2b14,_0x191107,_0x1d3e32,_0x287f5d);else{for(var _0xec782=_0x2d2b14[_0x298ed2(0x7a)]-0x1;_0xec782>=0x0;_0xec782--)if(_0xd07ec1=_0x2d2b14[_0xec782])_0xea4e6f=(_0x723838<0x3?_0xd07ec1(_0xea4e6f):_0x723838>0x3?_0xd07ec1(_0x191107,_0x1d3e32,_0xea4e6f):_0xd07ec1(_0x191107,_0x1d3e32))||_0xea4e6f;}return _0x723838>0x3&&_0xea4e6f&&Object[_0x298ed2(0x70)](_0x191107,_0x1d3e32,_0xea4e6f),_0xea4e6f;},__metadata=this&&this['__metadata']||function(_0x212617,_0x12785b){const _0x41d494=a107_0x5c15dd;if(typeof Reflect===_0x41d494(0x7e)&&typeof Reflect[_0x41d494(0x78)]==='function')return Reflect['metadata'](_0x212617,_0x12785b);};Object[a107_0x5c15dd(0x70)](exports,a107_0x5c15dd(0xa4),{'value':!![]}),exports[a107_0x5c15dd(0x6d)]=void 0x0;const typedi_1=require('typedi'),constants_1=require(a107_0x5c15dd(0x80)),errors_1=require(a107_0x5c15dd(0x95)),flosum_repository_sync_dto_1=require('../dto/flosum-repository-sync.dto'),queries_1=require(a107_0x5c15dd(0x91)),salesforce_query_service_1=require(a107_0x5c15dd(0x9f)),salesforce_service_1=require('./salesforce.service');let SalesforceSyncService=class SalesforceSyncService{constructor(_0x4e7096,_0x1a3b96){const _0x51a9c2=a107_0x5c15dd;this[_0x51a9c2(0x7b)]=_0x4e7096,this[_0x51a9c2(0x8f)]=_0x1a3b96;}async['getComponents'](_0x32f906){const _0x5a37f7=a107_0x5c15dd,_0x643857=await this['salesforceQuery'][_0x5a37f7(0x82)](_0x32f906),_0x4064b5=[];for(const _0x48ec0a of _0x643857){const _0x41b7d4=_0x48ec0a[constants_1[_0x5a37f7(0x8b)]+'Components__r'][_0x5a37f7(0x7c)][0x0];_0x4064b5[_0x5a37f7(0x8c)](_0x41b7d4['Id']);}return _0x4064b5;}async[a107_0x5c15dd(0x8a)](){const _0x4f89de=a107_0x5c15dd,_0x2b50c0=await this[_0x4f89de(0x7b)][_0x4f89de(0x82)](queries_1[_0x4f89de(0x84)]);return _0x2b50c0['map'](_0x329eed=>flosum_repository_sync_dto_1[_0x4f89de(0x86)][_0x4f89de(0x8e)](_0x329eed));}async['getBranchRecords'](){const _0x513e9a=a107_0x5c15dd,_0x1fd517=await this[_0x513e9a(0x7b)][_0x513e9a(0x82)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x1fd517[_0x513e9a(0xa6)](_0x5c1536=>flosum_repository_sync_dto_1[_0x513e9a(0x86)][_0x513e9a(0x77)](_0x5c1536));}async[a107_0x5c15dd(0x99)](_0xf75090){const _0x207481=a107_0x5c15dd,_0x49b456=await this['salesforceQuery'][_0x207481(0x82)](queries_1[_0x207481(0x85)][_0x207481(0x96)](_0x207481(0x98),_0xf75090));return flosum_repository_sync_dto_1[_0x207481(0x86)][_0x207481(0x8e)](_0x49b456[0x0]);}async[a107_0x5c15dd(0x92)](_0x1b5e0c){const _0x31828a=a107_0x5c15dd,_0x456a81=await this[_0x31828a(0x7b)][_0x31828a(0x82)](queries_1[_0x31828a(0xac)]['replace'](_0x31828a(0x98),_0x1b5e0c));return flosum_repository_sync_dto_1[_0x31828a(0x86)][_0x31828a(0x77)](_0x456a81[0x0]);}async['getComponentsFromRepository'](_0x56c500){const _0x3d63a7=a107_0x5c15dd,_0x44723f=_0x3d63a7(0xa0)+queries_1[_0x3d63a7(0xab)]+_0x3d63a7(0xa5)+_0x56c500+'\x27';return this[_0x3d63a7(0x9d)](_0x44723f);}async['getBranchComponents'](_0xea1aa8){const _0x4ecf31=a107_0x5c15dd,_0x3c46fa=_0x4ecf31(0x87)+queries_1[_0x4ecf31(0xab)]+_0x4ecf31(0x73)+_0xea1aa8+'\x27';return this['getComponents'](_0x3c46fa);}async[a107_0x5c15dd(0x89)](_0x3fbe79){const _0x4e3b24=a107_0x5c15dd;var _0x5696a3;const _0x739ad4=queries_1[_0x4e3b24(0xa7)][_0x4e3b24(0x96)]('%parentId%',_0x3fbe79),_0x5549ab=await this[_0x4e3b24(0x7b)][_0x4e3b24(0x82)](_0x739ad4),_0x261f85=(_0x5696a3=_0x5549ab[0x0])===null||_0x5696a3===void 0x0?void 0x0:_0x5696a3['Id'];if(!_0x261f85)throw new Error(errors_1[_0x4e3b24(0x71)]);return _0x261f85;}async[a107_0x5c15dd(0x6e)](_0x408650,_0xecc7f2){const _0x33683f=a107_0x5c15dd;await this[_0x33683f(0x8f)][_0x33683f(0xaa)](_0x408650[_0x33683f(0x76)],_0x408650[_0x33683f(0x9c)],{[constants_1[_0x33683f(0x7d)]+'Status__c']:_0xecc7f2});}async[a107_0x5c15dd(0xa8)](_0x40cdfd,_0x428a56){const _0x191b93=a107_0x5c15dd;await this[_0x191b93(0x8f)][_0x191b93(0xaa)](_0x40cdfd[_0x191b93(0x76)],_0x40cdfd[_0x191b93(0x9c)],{[constants_1[_0x191b93(0x7d)]+'Sha__c']:_0x428a56});}async[a107_0x5c15dd(0x9e)](_0x55102b){const _0x4fb1ad=a107_0x5c15dd;await this[_0x4fb1ad(0x8f)][_0x4fb1ad(0xaa)](constants_1[_0x4fb1ad(0x7d)]+'Git_Settings__c',_0x55102b,{[constants_1[_0x4fb1ad(0x7d)]+_0x4fb1ad(0xa2)]:![]});}};SalesforceSyncService=__decorate([typedi_1['Service'](),__metadata(a107_0x5c15dd(0x9b),[salesforce_query_service_1[a107_0x5c15dd(0x90)],salesforce_service_1[a107_0x5c15dd(0x74)]])],SalesforceSyncService),exports[a107_0x5c15dd(0x6d)]=SalesforceSyncService;