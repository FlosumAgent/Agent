const a109_0x3d4c=['197510qgtlTw','ERR_INVALID_ATTACHMENT_ID','./salesforce-query.service','Git_Settings__c','1223173UiWljI','GET_WAITING_BRANCHES_QUERY','object','%parentId%','map','getRepositoryRecords','449568KrePiz','salesforceQuery','push','GET_REPOSITORY_QUERY','constructor','396673WrAFEB','fromBranchRecord','../dto/flosum-repository-sync.dto','getComponents','FLOSUM_GIT_NAMESPACE','query','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','function','design:paramtypes','__decorate','GET_BRANCH_QUERY','setStatus','apply','GET_COMPONENTS_QUERY','SalesforceSyncService','__esModule','setLastSha','SYNC_ATTACHMENT_FOR_BRANCH_NAME','1vbHhpM','getBranchComponents','../queries','salseforceService','FLOSUM_NAMESPACE','getOwnPropertyDescriptor','replace','%name%','length','Components__r','../../../constants/errors','patchObject','objectId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','\x0a\x20\x20\x20\x20\x20\x20','records','232341YWkoNy','961276JWXuyT','decorate','578506wAwfmk','FlosumRepositorySyncDto','repositoryId','metadata','getAttachmentId','getComponentsFromRepository','typedi','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','defineProperty','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','getBranchRecord','Status__c','disableSync','objectType','fromRepositoryRecord','%id%','SalesforceQueryService','Sha__c'];const a109_0x5e0933=a109_0x4bda;(function(_0x57c8d7,_0x1fd39d){const _0x1dd9fa=a109_0x4bda;while(!![]){try{const _0x358a0e=-parseInt(_0x1dd9fa(0x1d4))+parseInt(_0x1dd9fa(0x1b5))+parseInt(_0x1dd9fa(0x1b8))+parseInt(_0x1dd9fa(0x1d9))+parseInt(_0x1dd9fa(0x1ca))+parseInt(_0x1dd9fa(0x1b6))+parseInt(_0x1dd9fa(0x1ce))*-parseInt(_0x1dd9fa(0x1eb));if(_0x358a0e===_0x1fd39d)break;else _0x57c8d7['push'](_0x57c8d7['shift']());}catch(_0x522d93){_0x57c8d7['push'](_0x57c8d7['shift']());}}}(a109_0x3d4c,0xa953d));const a109_0x35bbfd=function(){let _0x62211b=!![];return function(_0x550b19,_0x4bc120){const _0x374b05=_0x62211b?function(){const _0x57408a=a109_0x4bda;if(_0x4bc120){const _0x42669d=_0x4bc120[_0x57408a(0x1e5)](_0x550b19,arguments);return _0x4bc120=null,_0x42669d;}}:function(){};return _0x62211b=![],_0x374b05;};}(),a109_0x5e22b6=a109_0x35bbfd(this,function(){const _0x4972ce=function(){const _0x1919f2=a109_0x4bda,_0x517012=_0x4972ce['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x1919f2(0x1d8)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x517012['test'](a109_0x5e22b6);};return _0x4972ce();});a109_0x5e22b6();'use strict';function a109_0x4bda(_0x6013c7,_0x2283c6){return a109_0x4bda=function(_0x1d2f47,_0x5e22b6){_0x1d2f47=_0x1d2f47-0x1a6;let _0x35bbfd=a109_0x3d4c[_0x1d2f47];return _0x35bbfd;},a109_0x4bda(_0x6013c7,_0x2283c6);}var __decorate=this&&this[a109_0x5e0933(0x1e2)]||function(_0xb1767e,_0x15f9ae,_0x4e371a,_0x1a3683){const _0x109cdf=a109_0x5e0933;var _0x269f92=arguments[_0x109cdf(0x1ad)],_0x442f62=_0x269f92<0x3?_0x15f9ae:_0x1a3683===null?_0x1a3683=Object[_0x109cdf(0x1aa)](_0x15f9ae,_0x4e371a):_0x1a3683,_0x2937e9;if(typeof Reflect==='object'&&typeof Reflect[_0x109cdf(0x1b7)]===_0x109cdf(0x1e0))_0x442f62=Reflect[_0x109cdf(0x1b7)](_0xb1767e,_0x15f9ae,_0x4e371a,_0x1a3683);else{for(var _0x10d0f7=_0xb1767e[_0x109cdf(0x1ad)]-0x1;_0x10d0f7>=0x0;_0x10d0f7--)if(_0x2937e9=_0xb1767e[_0x10d0f7])_0x442f62=(_0x269f92<0x3?_0x2937e9(_0x442f62):_0x269f92>0x3?_0x2937e9(_0x15f9ae,_0x4e371a,_0x442f62):_0x2937e9(_0x15f9ae,_0x4e371a))||_0x442f62;}return _0x269f92>0x3&&_0x442f62&&Object[_0x109cdf(0x1c0)](_0x15f9ae,_0x4e371a,_0x442f62),_0x442f62;},__metadata=this&&this['__metadata']||function(_0x511646,_0x223ccc){const _0x3d185a=a109_0x5e0933;if(typeof Reflect===_0x3d185a(0x1d0)&&typeof Reflect[_0x3d185a(0x1bb)]===_0x3d185a(0x1e0))return Reflect['metadata'](_0x511646,_0x223ccc);};Object[a109_0x5e0933(0x1c0)](exports,a109_0x5e0933(0x1e8),{'value':!![]}),exports[a109_0x5e0933(0x1e7)]=void 0x0;const typedi_1=require(a109_0x5e0933(0x1be)),constants_1=require('../../../constants'),errors_1=require(a109_0x5e0933(0x1af)),flosum_repository_sync_dto_1=require(a109_0x5e0933(0x1db)),queries_1=require(a109_0x5e0933(0x1a7)),salesforce_query_service_1=require(a109_0x5e0933(0x1cc)),salesforce_service_1=require('./salesforce.service');let SalesforceSyncService=class SalesforceSyncService{constructor(_0x1523d5,_0x2ea54e){const _0x3c967a=a109_0x5e0933;this[_0x3c967a(0x1d5)]=_0x1523d5,this[_0x3c967a(0x1a8)]=_0x2ea54e;}async[a109_0x5e0933(0x1dc)](_0x5a5d72){const _0x31963b=a109_0x5e0933,_0x226152=await this['salesforceQuery']['query'](_0x5a5d72),_0xf75f01=[];for(const _0x23e8aa of _0x226152){const _0x4ec364=_0x23e8aa[constants_1[_0x31963b(0x1a9)]+_0x31963b(0x1ae)][_0x31963b(0x1b4)][0x0];_0xf75f01[_0x31963b(0x1d6)](_0x4ec364['Id']);}return _0xf75f01;}async[a109_0x5e0933(0x1d3)](){const _0xa017f6=a109_0x5e0933,_0x5dc362=await this['salesforceQuery'][_0xa017f6(0x1de)](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0x5dc362[_0xa017f6(0x1d2)](_0x51fea8=>flosum_repository_sync_dto_1[_0xa017f6(0x1b9)][_0xa017f6(0x1c6)](_0x51fea8));}async['getBranchRecords'](){const _0x527826=a109_0x5e0933,_0x1ea7b1=await this[_0x527826(0x1d5)][_0x527826(0x1de)](queries_1[_0x527826(0x1cf)]);return _0x1ea7b1[_0x527826(0x1d2)](_0x792b95=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x527826(0x1da)](_0x792b95));}async['getRepositoryRecord'](_0x14cba7){const _0x5948d=a109_0x5e0933,_0x2545fa=await this['salesforceQuery'][_0x5948d(0x1de)](queries_1[_0x5948d(0x1d7)]['replace'](_0x5948d(0x1c7),_0x14cba7));return flosum_repository_sync_dto_1[_0x5948d(0x1b9)][_0x5948d(0x1c6)](_0x2545fa[0x0]);}async[a109_0x5e0933(0x1c2)](_0x5283f9){const _0x43d8b3=a109_0x5e0933,_0x183408=await this[_0x43d8b3(0x1d5)][_0x43d8b3(0x1de)](queries_1[_0x43d8b3(0x1e3)][_0x43d8b3(0x1ab)]('%id%',_0x5283f9));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x43d8b3(0x1da)](_0x183408[0x0]);}async[a109_0x5e0933(0x1bd)](_0x4f241f){const _0x3057a7=a109_0x5e0933,_0x318f9d=_0x3057a7(0x1b3)+queries_1[_0x3057a7(0x1e6)]+_0x3057a7(0x1bf)+_0x4f241f+'\x27';return this[_0x3057a7(0x1dc)](_0x318f9d);}async[a109_0x5e0933(0x1a6)](_0x72e659){const _0x1dbefa=a109_0x5e0933,_0x1103c7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+queries_1[_0x1dbefa(0x1e6)]+_0x1dbefa(0x1b2)+_0x72e659+'\x27';return this['getComponents'](_0x1103c7);}async[a109_0x5e0933(0x1bc)](_0x12fc1d){const _0x5ec0fa=a109_0x5e0933;var _0x18d981;const _0x5d1d77=queries_1[_0x5ec0fa(0x1c1)][_0x5ec0fa(0x1ab)](_0x5ec0fa(0x1d1),_0x12fc1d[_0x5ec0fa(0x1b1)])[_0x5ec0fa(0x1ab)](_0x5ec0fa(0x1ac),_0x12fc1d[_0x5ec0fa(0x1ba)]?constants_1[_0x5ec0fa(0x1df)]:constants_1[_0x5ec0fa(0x1ea)]),_0x645cd9=await this[_0x5ec0fa(0x1d5)][_0x5ec0fa(0x1de)](_0x5d1d77),_0x3d217f=(_0x18d981=_0x645cd9[0x0])===null||_0x18d981===void 0x0?void 0x0:_0x18d981['Id'];if(!_0x3d217f)throw new Error(errors_1[_0x5ec0fa(0x1cb)]);return _0x3d217f;}async[a109_0x5e0933(0x1e4)](_0xae5745,_0x29fdf4){const _0xc4addc=a109_0x5e0933;await this[_0xc4addc(0x1a8)][_0xc4addc(0x1b0)](_0xae5745[_0xc4addc(0x1c5)],_0xae5745[_0xc4addc(0x1b1)],{[constants_1[_0xc4addc(0x1dd)]+_0xc4addc(0x1c3)]:_0x29fdf4});}async[a109_0x5e0933(0x1e9)](_0x9da83b,_0x264eb9){const _0x4cfcca=a109_0x5e0933;await this[_0x4cfcca(0x1a8)][_0x4cfcca(0x1b0)](_0x9da83b[_0x4cfcca(0x1c5)],_0x9da83b[_0x4cfcca(0x1b1)],{[constants_1[_0x4cfcca(0x1dd)]+_0x4cfcca(0x1c9)]:_0x264eb9});}async[a109_0x5e0933(0x1c4)](_0x404d85){const _0x5e3f21=a109_0x5e0933;await this['salseforceService'][_0x5e3f21(0x1b0)](constants_1[_0x5e3f21(0x1dd)]+_0x5e3f21(0x1cd),_0x404d85,{[constants_1[_0x5e3f21(0x1dd)]+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([typedi_1['Service'](),__metadata(a109_0x5e0933(0x1e1),[salesforce_query_service_1[a109_0x5e0933(0x1c8)],salesforce_service_1['SalesforceService']])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;