const a106_0x44c2=['design:paramtypes','getBranchRecord','apply','GET_COMPONENTS_QUERY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','salesforceQuery','12134QxuWyU','683023CpHQAh','query','1NPSFJV','../queries','SalesforceQueryService','getBranchComponents','./salesforce.service','getAttachmentIdByParent','Sync_In_Progress__c','map','FlosumRepositorySyncDto','getRepositoryRecord','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','patchObject','570095xtnCEi','function','setStatus','Service','getComponents','salseforceService','SalesforceService','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','%id%','fromRepositoryRecord','GET_WAITING_REPOSITORIES_QUERY','__decorate','\x0a\x20\x20\x20\x20\x20\x20','disableSync','Git_Settings__c','fromBranchRecord','replace','SalesforceSyncService','__esModule','typedi','GET_REPOSITORY_QUERY','88367zRQskB','3JuratF','FLOSUM_GIT_NAMESPACE','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getRepositoryRecords','records','ERR_INVALID_ATTACHMENT_ID','216079qdWxMp','defineProperty','object','Components__r','decorate','objectId','%parentId%','getOwnPropertyDescriptor','700904forweI','test','objectType','setLastSha','1koLcNA','constructor','../../../constants/errors','./salesforce-query.service','443073yFUskc','GET_BRANCH_QUERY'];function a106_0x47f4(_0x25bb75,_0x96087b){return a106_0x47f4=function(_0x20150a,_0x4dd942){_0x20150a=_0x20150a-0x121;let _0xaf03cd=a106_0x44c2[_0x20150a];return _0xaf03cd;},a106_0x47f4(_0x25bb75,_0x96087b);}const a106_0x33d22f=a106_0x47f4;(function(_0x14a9d4,_0x19ab55){const _0x365abd=a106_0x47f4;while(!![]){try{const _0x2ddd9d=parseInt(_0x365abd(0x158))+-parseInt(_0x365abd(0x140))*-parseInt(_0x365abd(0x13a))+parseInt(_0x365abd(0x124))*parseInt(_0x365abd(0x15b))+-parseInt(_0x365abd(0x148))+-parseInt(_0x365abd(0x150))*-parseInt(_0x365abd(0x14c))+parseInt(_0x365abd(0x139))+-parseInt(_0x365abd(0x159));if(_0x2ddd9d===_0x19ab55)break;else _0x14a9d4['push'](_0x14a9d4['shift']());}catch(_0x280b26){_0x14a9d4['push'](_0x14a9d4['shift']());}}}(a106_0x44c2,0x5c47b));const a106_0xaf03cd=function(){let _0x22ffb7=!![];return function(_0x4211cf,_0x59816d){const _0x26f5ae=_0x22ffb7?function(){const _0x3bd5d7=a106_0x47f4;if(_0x59816d){const _0x24d6fa=_0x59816d[_0x3bd5d7(0x154)](_0x4211cf,arguments);return _0x59816d=null,_0x24d6fa;}}:function(){};return _0x22ffb7=![],_0x26f5ae;};}(),a106_0x4dd942=a106_0xaf03cd(this,function(){const _0xeceba=function(){const _0x271ec3=a106_0x47f4,_0x34f120=_0xeceba['constructor'](_0x271ec3(0x13c))()[_0x271ec3(0x14d)](_0x271ec3(0x122));return!_0x34f120[_0x271ec3(0x149)](a106_0x4dd942);};return _0xeceba();});a106_0x4dd942();'use strict';var __decorate=this&&this[a106_0x33d22f(0x12f)]||function(_0x5cb9c5,_0x5df9aa,_0x3c5316,_0xcee598){const _0x174ff4=a106_0x33d22f;var _0xdb1f07=arguments['length'],_0x4bbee0=_0xdb1f07<0x3?_0x5df9aa:_0xcee598===null?_0xcee598=Object[_0x174ff4(0x147)](_0x5df9aa,_0x3c5316):_0xcee598,_0x3d72f2;if(typeof Reflect===_0x174ff4(0x142)&&typeof Reflect[_0x174ff4(0x144)]==='function')_0x4bbee0=Reflect[_0x174ff4(0x144)](_0x5cb9c5,_0x5df9aa,_0x3c5316,_0xcee598);else{for(var _0x5417b5=_0x5cb9c5['length']-0x1;_0x5417b5>=0x0;_0x5417b5--)if(_0x3d72f2=_0x5cb9c5[_0x5417b5])_0x4bbee0=(_0xdb1f07<0x3?_0x3d72f2(_0x4bbee0):_0xdb1f07>0x3?_0x3d72f2(_0x5df9aa,_0x3c5316,_0x4bbee0):_0x3d72f2(_0x5df9aa,_0x3c5316))||_0x4bbee0;}return _0xdb1f07>0x3&&_0x4bbee0&&Object[_0x174ff4(0x141)](_0x5df9aa,_0x3c5316,_0x4bbee0),_0x4bbee0;},__metadata=this&&this['__metadata']||function(_0x50f906,_0x101eca){const _0x322b85=a106_0x33d22f;if(typeof Reflect===_0x322b85(0x142)&&typeof Reflect['metadata']===_0x322b85(0x125))return Reflect['metadata'](_0x50f906,_0x101eca);};Object[a106_0x33d22f(0x141)](exports,a106_0x33d22f(0x136),{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require(a106_0x33d22f(0x137)),constants_1=require('../../../constants'),errors_1=require(a106_0x33d22f(0x14e)),flosum_repository_sync_dto_1=require('../dto/flosum-repository-sync.dto'),queries_1=require(a106_0x33d22f(0x15c)),salesforce_query_service_1=require(a106_0x33d22f(0x14f)),salesforce_service_1=require(a106_0x33d22f(0x15f));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x2528f5,_0x261a79){const _0x29ebc6=a106_0x33d22f;this[_0x29ebc6(0x157)]=_0x2528f5,this[_0x29ebc6(0x129)]=_0x261a79;}async[a106_0x33d22f(0x128)](_0x268ae6){const _0x51a816=a106_0x33d22f,_0x4e64c3=await this[_0x51a816(0x157)][_0x51a816(0x15a)](_0x268ae6),_0x5a91f3=[];for(const _0x2e33a9 of _0x4e64c3){const _0x53459e=_0x2e33a9[constants_1['FLOSUM_NAMESPACE']+_0x51a816(0x143)][_0x51a816(0x13e)][0x0];_0x5a91f3['push'](_0x53459e['Id']);}return _0x5a91f3;}async[a106_0x33d22f(0x13d)](){const _0x5c67ab=a106_0x33d22f,_0x1fb0f4=await this[_0x5c67ab(0x157)]['query'](queries_1[_0x5c67ab(0x12e)]);return _0x1fb0f4[_0x5c67ab(0x162)](_0x56ce9d=>flosum_repository_sync_dto_1[_0x5c67ab(0x163)][_0x5c67ab(0x12d)](_0x56ce9d));}async['getBranchRecords'](){const _0x3cf538=a106_0x33d22f,_0x2272c1=await this[_0x3cf538(0x157)]['query'](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x2272c1['map'](_0x4b9e7f=>flosum_repository_sync_dto_1[_0x3cf538(0x163)][_0x3cf538(0x133)](_0x4b9e7f));}async[a106_0x33d22f(0x121)](_0x34563f){const _0x303064=a106_0x33d22f,_0x2ecbcc=await this[_0x303064(0x157)][_0x303064(0x15a)](queries_1[_0x303064(0x138)][_0x303064(0x134)](_0x303064(0x12c),_0x34563f));return flosum_repository_sync_dto_1[_0x303064(0x163)][_0x303064(0x12d)](_0x2ecbcc[0x0]);}async[a106_0x33d22f(0x153)](_0x2753c3){const _0x286089=a106_0x33d22f,_0x30f64a=await this[_0x286089(0x157)][_0x286089(0x15a)](queries_1[_0x286089(0x151)][_0x286089(0x134)](_0x286089(0x12c),_0x2753c3));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromBranchRecord'](_0x30f64a[0x0]);}async['getComponentsFromRepository'](_0xccfe3c){const _0x5e2ae9=a106_0x33d22f,_0x3c36ff=_0x5e2ae9(0x130)+queries_1['GET_COMPONENTS_QUERY']+_0x5e2ae9(0x12b)+_0xccfe3c+'\x27';return this[_0x5e2ae9(0x128)](_0x3c36ff);}async[a106_0x33d22f(0x15e)](_0x187dae){const _0x5d5fc4=a106_0x33d22f,_0x1da687=_0x5d5fc4(0x156)+queries_1[_0x5d5fc4(0x155)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0x187dae+'\x27';return this[_0x5d5fc4(0x128)](_0x1da687);}async[a106_0x33d22f(0x160)](_0x3b5c6d){const _0x3c5863=a106_0x33d22f;var _0x3ce39c;const _0x4bbc23=queries_1['GET_ATTACHMENT_BY_PARENT_ID_QUERY'][_0x3c5863(0x134)](_0x3c5863(0x146),_0x3b5c6d),_0x103d44=await this[_0x3c5863(0x157)][_0x3c5863(0x15a)](_0x4bbc23),_0x31036e=(_0x3ce39c=_0x103d44[0x0])===null||_0x3ce39c===void 0x0?void 0x0:_0x3ce39c['Id'];if(!_0x31036e)throw new Error(errors_1[_0x3c5863(0x13f)]);return _0x31036e;}async[a106_0x33d22f(0x126)](_0x349dfc,_0x25b074){const _0x5d08ab=a106_0x33d22f;await this[_0x5d08ab(0x129)]['patchObject'](_0x349dfc[_0x5d08ab(0x14a)],_0x349dfc[_0x5d08ab(0x145)],{[constants_1[_0x5d08ab(0x13b)]+'Status__c']:_0x25b074});}async[a106_0x33d22f(0x14b)](_0x4441cf,_0x3e33de){const _0x2e8fcc=a106_0x33d22f;await this['salseforceService']['patchObject'](_0x4441cf[_0x2e8fcc(0x14a)],_0x4441cf['objectId'],{[constants_1[_0x2e8fcc(0x13b)]+'Sha__c']:_0x3e33de});}async[a106_0x33d22f(0x131)](_0x1d0bc7){const _0x23741b=a106_0x33d22f;await this['salseforceService'][_0x23741b(0x123)](constants_1[_0x23741b(0x13b)]+_0x23741b(0x132),_0x1d0bc7,{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x23741b(0x161)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a106_0x33d22f(0x127)](),__metadata(a106_0x33d22f(0x152),[salesforce_query_service_1[a106_0x33d22f(0x15d)],salesforce_service_1[a106_0x33d22f(0x12a)]])],SalesforceSyncService),exports[a106_0x33d22f(0x135)]=SalesforceSyncService;