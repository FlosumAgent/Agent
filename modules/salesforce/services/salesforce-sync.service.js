const a110_0x2ea3=['test','disableSync','patchObject','ERR_INVALID_ATTACHMENT_ID','FLOSUM_NAMESPACE','../../../constants/errors','map','112009VVZhVZ','salseforceService','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','records','23181nKJgkt','SalesforceQueryService','FlosumRepositorySyncDto','objectId','getBranchRecords','return\x20/\x22\x20+\x20this\x20+\x20\x22/','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','function','535009stwkWE','2xsWvgK','setLastSha','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','push','length','query','../dto/flosum-repository-sync.dto','replace','metadata','fromRepositoryRecord','__decorate','getOwnPropertyDescriptor','Sha__c','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','401645QlWsls','472254HQFgdx','objectType','./salesforce-query.service','662140NeBCyf','608329wenaZa','GET_COMPONENTS_QUERY','getRepositoryRecords','decorate','repositoryId','../queries','SalesforceSyncService','GET_REPOSITORY_QUERY','Components__r','getBranchComponents','setStatus','salesforceQuery','FLOSUM_GIT_NAMESPACE','__metadata','%id%','getComponentsFromRepository','defineProperty','Git_Settings__c','fromBranchRecord','object','getComponents','apply','SYNC_ATTACHMENT_FOR_BRANCH_NAME','Service'];const a110_0x1bb060=a110_0x8e13;(function(_0x58482,_0x1f5c3f){const _0xfc769=a110_0x8e13;while(!![]){try{const _0x20621b=-parseInt(_0xfc769(0x108))+parseInt(_0xfc769(0x115))*-parseInt(_0xfc769(0x10c))+parseInt(_0xfc769(0x124))+-parseInt(_0xfc769(0x123))+parseInt(_0xfc769(0x114))+-parseInt(_0xfc769(0x127))+parseInt(_0xfc769(0x128));if(_0x20621b===_0x1f5c3f)break;else _0x58482['push'](_0x58482['shift']());}catch(_0x551d4c){_0x58482['push'](_0x58482['shift']());}}}(a110_0x2ea3,0x600dc));const a110_0x2e9ef6=function(){let _0x157520=!![];return function(_0x24405f,_0x190ae0){const _0x37b135=_0x157520?function(){const _0x4c5c13=a110_0x8e13;if(_0x190ae0){const _0x7188a1=_0x190ae0[_0x4c5c13(0xfe)](_0x24405f,arguments);return _0x190ae0=null,_0x7188a1;}}:function(){};return _0x157520=![],_0x37b135;};}(),a110_0x51c9ac=a110_0x2e9ef6(this,function(){const _0x30c93e=function(){const _0x5e8c8b=a110_0x8e13,_0x13be7c=_0x30c93e['constructor'](_0x5e8c8b(0x111))()['constructor'](_0x5e8c8b(0x122));return!_0x13be7c[_0x5e8c8b(0x101)](a110_0x51c9ac);};return _0x30c93e();});a110_0x51c9ac();'use strict';var __decorate=this&&this[a110_0x1bb060(0x11f)]||function(_0x15db5b,_0x65dce5,_0x2d0f4a,_0x486503){const _0x1b2bc8=a110_0x1bb060;var _0x3d1a4b=arguments[_0x1b2bc8(0x119)],_0x525671=_0x3d1a4b<0x3?_0x65dce5:_0x486503===null?_0x486503=Object[_0x1b2bc8(0x120)](_0x65dce5,_0x2d0f4a):_0x486503,_0x5367c4;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x1b2bc8(0x113))_0x525671=Reflect[_0x1b2bc8(0x12b)](_0x15db5b,_0x65dce5,_0x2d0f4a,_0x486503);else{for(var _0x46e44f=_0x15db5b[_0x1b2bc8(0x119)]-0x1;_0x46e44f>=0x0;_0x46e44f--)if(_0x5367c4=_0x15db5b[_0x46e44f])_0x525671=(_0x3d1a4b<0x3?_0x5367c4(_0x525671):_0x3d1a4b>0x3?_0x5367c4(_0x65dce5,_0x2d0f4a,_0x525671):_0x5367c4(_0x65dce5,_0x2d0f4a))||_0x525671;}return _0x3d1a4b>0x3&&_0x525671&&Object[_0x1b2bc8(0xf9)](_0x65dce5,_0x2d0f4a,_0x525671),_0x525671;},__metadata=this&&this[a110_0x1bb060(0xf6)]||function(_0x570a46,_0x282e79){const _0x227b27=a110_0x1bb060;if(typeof Reflect===_0x227b27(0xfc)&&typeof Reflect[_0x227b27(0x11d)]===_0x227b27(0x113))return Reflect[_0x227b27(0x11d)](_0x570a46,_0x282e79);};Object[a110_0x1bb060(0xf9)](exports,'__esModule',{'value':!![]}),exports[a110_0x1bb060(0x12e)]=void 0x0;const typedi_1=require('typedi'),constants_1=require('../../../constants'),errors_1=require(a110_0x1bb060(0x106)),flosum_repository_sync_dto_1=require(a110_0x1bb060(0x11b)),queries_1=require(a110_0x1bb060(0x12d)),salesforce_query_service_1=require(a110_0x1bb060(0x126)),salesforce_service_1=require('./salesforce.service');function a110_0x8e13(_0xfbb211,_0x4852de){return a110_0x8e13=function(_0x592005,_0x51c9ac){_0x592005=_0x592005-0xf4;let _0x2e9ef6=a110_0x2ea3[_0x592005];return _0x2e9ef6;},a110_0x8e13(_0xfbb211,_0x4852de);}let SalesforceSyncService=class SalesforceSyncService{constructor(_0x11114d,_0x3e50cd){this['salesforceQuery']=_0x11114d,this['salseforceService']=_0x3e50cd;}async[a110_0x1bb060(0xfd)](_0x21dfa1){const _0x1866ca=a110_0x1bb060,_0x13e051=await this['salesforceQuery']['query'](_0x21dfa1),_0x2db1a4=[];for(const _0x2e6919 of _0x13e051){const _0x3cbd63=_0x2e6919[constants_1[_0x1866ca(0x105)]+_0x1866ca(0x130)][_0x1866ca(0x10b)][0x0];_0x2db1a4[_0x1866ca(0x118)](_0x3cbd63['Id']);}return _0x2db1a4;}async[a110_0x1bb060(0x12a)](){const _0x4280fa=a110_0x1bb060,_0xd619d1=await this[_0x4280fa(0xf4)][_0x4280fa(0x11a)](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0xd619d1[_0x4280fa(0x107)](_0x45cba1=>flosum_repository_sync_dto_1[_0x4280fa(0x10e)][_0x4280fa(0x11e)](_0x45cba1));}async[a110_0x1bb060(0x110)](){const _0x5da8fc=a110_0x1bb060,_0x11457c=await this['salesforceQuery']['query'](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x11457c[_0x5da8fc(0x107)](_0x427168=>flosum_repository_sync_dto_1[_0x5da8fc(0x10e)][_0x5da8fc(0xfb)](_0x427168));}async['getRepositoryRecord'](_0x497b65){const _0x3ace0c=a110_0x1bb060,_0x3b3a9c=await this[_0x3ace0c(0xf4)][_0x3ace0c(0x11a)](queries_1[_0x3ace0c(0x12f)][_0x3ace0c(0x11c)](_0x3ace0c(0xf7),_0x497b65));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromRepositoryRecord'](_0x3b3a9c[0x0]);}async['getBranchRecord'](_0x557104){const _0x2c3798=a110_0x1bb060,_0x4e152f=await this[_0x2c3798(0xf4)]['query'](queries_1['GET_BRANCH_QUERY']['replace'](_0x2c3798(0xf7),_0x557104));return flosum_repository_sync_dto_1[_0x2c3798(0x10e)][_0x2c3798(0xfb)](_0x4e152f[0x0]);}async[a110_0x1bb060(0xf8)](_0x317dbc){const _0x4159c6=a110_0x1bb060,_0x2a0450='\x0a\x20\x20\x20\x20\x20\x20'+queries_1[_0x4159c6(0x129)]+_0x4159c6(0x117)+_0x317dbc+'\x27';return this[_0x4159c6(0xfd)](_0x2a0450);}async[a110_0x1bb060(0x131)](_0xc08022){const _0xd24e0e=a110_0x1bb060,_0x1f4ca1=_0xd24e0e(0x10a)+queries_1[_0xd24e0e(0x129)]+_0xd24e0e(0x112)+_0xc08022+'\x27';return this[_0xd24e0e(0xfd)](_0x1f4ca1);}async['getAttachmentId'](_0x236e5b){const _0x57d3df=a110_0x1bb060;var _0x4c2d1f;const _0x1bc939=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY'][_0x57d3df(0x11c)]('%parentId%',_0x236e5b['objectId'])[_0x57d3df(0x11c)]('%name%',_0x236e5b[_0x57d3df(0x12c)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x57d3df(0xff)]),_0x5cd4c5=await this[_0x57d3df(0xf4)][_0x57d3df(0x11a)](_0x1bc939),_0x3d3a3d=(_0x4c2d1f=_0x5cd4c5[0x0])===null||_0x4c2d1f===void 0x0?void 0x0:_0x4c2d1f['Id'];if(!_0x3d3a3d)throw new Error(errors_1[_0x57d3df(0x104)]);return _0x3d3a3d;}async[a110_0x1bb060(0x132)](_0x4d1a92,_0x1d9fc9){const _0x5528e7=a110_0x1bb060;await this[_0x5528e7(0x109)][_0x5528e7(0x103)](_0x4d1a92[_0x5528e7(0x125)],_0x4d1a92[_0x5528e7(0x10f)],{[constants_1[_0x5528e7(0xf5)]+'Status__c']:_0x1d9fc9});}async[a110_0x1bb060(0x116)](_0x4c0308,_0x23e963){const _0x5d7aec=a110_0x1bb060;await this[_0x5d7aec(0x109)][_0x5d7aec(0x103)](_0x4c0308['objectType'],_0x4c0308[_0x5d7aec(0x10f)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x5d7aec(0x121)]:_0x23e963});}async[a110_0x1bb060(0x102)](_0x502df2){const _0x23fcea=a110_0x1bb060;await this[_0x23fcea(0x109)][_0x23fcea(0x103)](constants_1['FLOSUM_GIT_NAMESPACE']+_0x23fcea(0xfa),_0x502df2,{[constants_1[_0x23fcea(0xf5)]+'Sync_In_Progress__c']:![]});}};SalesforceSyncService=__decorate([typedi_1[a110_0x1bb060(0x100)](),__metadata('design:paramtypes',[salesforce_query_service_1[a110_0x1bb060(0x10d)],salesforce_service_1['SalesforceService']])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;