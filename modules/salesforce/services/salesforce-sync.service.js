const a112_0x16f129=a112_0x35de;(function(_0x4d69db,_0x545a39){const _0x64b142=a112_0x35de,_0xe97422=_0x4d69db();while(!![]){try{const _0x103ac7=-parseInt(_0x64b142(0xa0))/0x1*(parseInt(_0x64b142(0xaf))/0x2)+parseInt(_0x64b142(0x8f))/0x3+-parseInt(_0x64b142(0xc5))/0x4*(-parseInt(_0x64b142(0x95))/0x5)+-parseInt(_0x64b142(0x9e))/0x6*(parseInt(_0x64b142(0x9a))/0x7)+-parseInt(_0x64b142(0xcb))/0x8+-parseInt(_0x64b142(0xa5))/0x9*(parseInt(_0x64b142(0xcf))/0xa)+-parseInt(_0x64b142(0xb0))/0xb*(-parseInt(_0x64b142(0xb2))/0xc);if(_0x103ac7===_0x545a39)break;else _0xe97422['push'](_0xe97422['shift']());}catch(_0x2e516b){_0xe97422['push'](_0xe97422['shift']());}}}(a112_0x3fa5,0x37407));const a112_0x1b0de4=function(){let _0x177aac=!![];return function(_0x21d047,_0x336e91){const _0x54b6c2=_0x177aac?function(){const _0x45a706=a112_0x35de;if(_0x336e91){const _0x42fd2f=_0x336e91[_0x45a706(0xc9)](_0x21d047,arguments);return _0x336e91=null,_0x42fd2f;}}:function(){};return _0x177aac=![],_0x54b6c2;};}(),a112_0x3303e9=a112_0x1b0de4(this,function(){const _0x303d02=a112_0x35de;return a112_0x3303e9[_0x303d02(0xb9)]()[_0x303d02(0xc6)](_0x303d02(0xc4))[_0x303d02(0xb9)]()[_0x303d02(0xa1)](a112_0x3303e9)[_0x303d02(0xc6)](_0x303d02(0xc4));});function a112_0x35de(_0x2b3aac,_0x20df32){const _0x3a367a=a112_0x3fa5();return a112_0x35de=function(_0x3303e9,_0x1b0de4){_0x3303e9=_0x3303e9-0x88;let _0x3fa547=_0x3a367a[_0x3303e9];return _0x3fa547;},a112_0x35de(_0x2b3aac,_0x20df32);}a112_0x3303e9();'use strict';var __decorate=this&&this['__decorate']||function(_0xa9c156,_0x3f9c8c,_0x1c9463,_0x2f5432){const _0x4038fa=a112_0x35de;var _0x4b35e6=arguments['length'],_0x5966fe=_0x4b35e6<0x3?_0x3f9c8c:_0x2f5432===null?_0x2f5432=Object[_0x4038fa(0xa4)](_0x3f9c8c,_0x1c9463):_0x2f5432,_0x34169f;if(typeof Reflect===_0x4038fa(0xbc)&&typeof Reflect[_0x4038fa(0x96)]===_0x4038fa(0xb3))_0x5966fe=Reflect[_0x4038fa(0x96)](_0xa9c156,_0x3f9c8c,_0x1c9463,_0x2f5432);else{for(var _0x40c5e3=_0xa9c156[_0x4038fa(0xab)]-0x1;_0x40c5e3>=0x0;_0x40c5e3--)if(_0x34169f=_0xa9c156[_0x40c5e3])_0x5966fe=(_0x4b35e6<0x3?_0x34169f(_0x5966fe):_0x4b35e6>0x3?_0x34169f(_0x3f9c8c,_0x1c9463,_0x5966fe):_0x34169f(_0x3f9c8c,_0x1c9463))||_0x5966fe;}return _0x4b35e6>0x3&&_0x5966fe&&Object[_0x4038fa(0xb6)](_0x3f9c8c,_0x1c9463,_0x5966fe),_0x5966fe;},__metadata=this&&this['__metadata']||function(_0x6655fd,_0x39ae9b){const _0x1b2029=a112_0x35de;if(typeof Reflect===_0x1b2029(0xbc)&&typeof Reflect[_0x1b2029(0x92)]==='function')return Reflect[_0x1b2029(0x92)](_0x6655fd,_0x39ae9b);};Object[a112_0x16f129(0xb6)](exports,a112_0x16f129(0xbe),{'value':!![]}),exports[a112_0x16f129(0xa9)]=void 0x0;const typedi_1=require(a112_0x16f129(0x8b)),constants_1=require('../../../constants'),errors_1=require(a112_0x16f129(0x97)),utils_1=require(a112_0x16f129(0xb7)),flosum_repository_sync_dto_1=require(a112_0x16f129(0x90)),queries_1=require('../queries'),salesforce_query_service_1=require(a112_0x16f129(0xd5)),salesforce_service_1=require(a112_0x16f129(0x8d));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x5e99fd,_0x1038a4){const _0x4678be=a112_0x16f129;this['salesforceQuery']=_0x5e99fd,this[_0x4678be(0x98)]=_0x1038a4;}async[a112_0x16f129(0xb5)](_0x47e891){const _0x2e1581=a112_0x16f129,_0x105e12=await this[_0x2e1581(0x9c)]['query'](_0x47e891),_0x1f977e=[];for(const _0x58fd6a of _0x105e12){const _0x183d04=_0x58fd6a[constants_1[_0x2e1581(0xcc)]+_0x2e1581(0xa6)][_0x2e1581(0xac)][0x0];_0x1f977e[_0x2e1581(0x8e)](_0x183d04['Id']);}return _0x1f977e;}async[a112_0x16f129(0xd1)](){const _0x2699f4=a112_0x16f129,_0x17f9af=await this[_0x2699f4(0x9c)][_0x2699f4(0xae)](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0x17f9af[_0x2699f4(0xc2)](_0x59594e=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromRepositoryRecord'](_0x59594e));}async[a112_0x16f129(0xc8)](){const _0x4107e3=a112_0x16f129,_0x542181=await this[_0x4107e3(0x9c)]['query'](queries_1[_0x4107e3(0xd3)]);return _0x542181[_0x4107e3(0xc2)](_0x56ceb8=>flosum_repository_sync_dto_1[_0x4107e3(0x91)][_0x4107e3(0x88)](_0x56ceb8));}async[a112_0x16f129(0xc0)](_0x2e6b31){const _0x3d7e52=a112_0x16f129,_0x22898b=await this[_0x3d7e52(0x9c)]['query'](queries_1[_0x3d7e52(0xbb)]['replace']('%id%',_0x2e6b31));return flosum_repository_sync_dto_1[_0x3d7e52(0x91)]['fromRepositoryRecord'](_0x22898b[0x0]);}async[a112_0x16f129(0x9f)](_0x5ea0ab){const _0x351767=a112_0x16f129,_0x5b14dc=await this[_0x351767(0x9c)]['query'](queries_1[_0x351767(0xbf)][_0x351767(0xca)]('%id%',_0x5ea0ab));return flosum_repository_sync_dto_1[_0x351767(0x91)][_0x351767(0x88)](_0x5b14dc[0x0]);}async[a112_0x16f129(0x94)](_0x3e55b3){const _0x3d1498=a112_0x16f129,_0x57abe=_0x3d1498(0xd4)+queries_1[_0x3d1498(0xaa)]+_0x3d1498(0xb1)+_0x3e55b3+'\x27';return this[_0x3d1498(0xb5)](_0x57abe);}async['getBranchComponents'](_0x56bb4a){const _0x33f6d6=a112_0x16f129,_0x5a9d2f='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+queries_1[_0x33f6d6(0xaa)]+_0x33f6d6(0xcd)+_0x56bb4a+'\x27';return this[_0x33f6d6(0xb5)](_0x5a9d2f);}async[a112_0x16f129(0xba)](_0x44beaa){const _0x12ee21=a112_0x16f129;var _0x4b62e2;const _0x8bcf0a=queries_1['GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY']['replace'](_0x12ee21(0x93),_0x44beaa[_0x12ee21(0x9b)])[_0x12ee21(0xca)]('%name%',_0x44beaa[_0x12ee21(0x8a)]?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x12ee21(0xb4)]),_0x2dc255=await this['salesforceQuery'][_0x12ee21(0xae)](_0x8bcf0a),_0x2b031f=(_0x4b62e2=_0x2dc255[0x0])===null||_0x4b62e2===void 0x0?void 0x0:_0x4b62e2['Id'];if(!_0x2b031f)throw new Error(errors_1[_0x12ee21(0xad)]);return _0x2b031f;}async[a112_0x16f129(0x9d)](_0x5ad5f9){const _0x1d504e=a112_0x16f129;let _0x45238e=await this[_0x1d504e(0xba)](_0x5ad5f9)[_0x1d504e(0xb8)](()=>null);return!_0x45238e&&(_0x45238e=await this['salesforceService'][_0x1d504e(0xa8)](_0x1d504e(0xc1),{'Body':(0x0,utils_1[_0x1d504e(0xbd)])('{}'),'ParentId':_0x5ad5f9[_0x1d504e(0x9b)],'ContentType':'text/plain','Name':_0x5ad5f9['repositoryId']?constants_1['SYNC_ATTACHMENT_FOR_REPOSITORY_NAME']:constants_1[_0x1d504e(0xb4)]})),_0x45238e;}async['updateRemoteState'](_0x37f114,_0x32cb08){const _0x4a2b40=a112_0x16f129,_0x575901=await this[_0x4a2b40(0x9d)](_0x37f114);await this[_0x4a2b40(0x98)][_0x4a2b40(0xa3)](_0x4a2b40(0xc1),_0x575901,{'Body':(0x0,utils_1[_0x4a2b40(0xbd)])(JSON[_0x4a2b40(0xd0)](_0x32cb08))});}async[a112_0x16f129(0xc3)](_0x316b71,_0x5cfc2d){const _0x299460=a112_0x16f129;await this[_0x299460(0x98)][_0x299460(0xa3)](_0x316b71[_0x299460(0x8c)],_0x316b71[_0x299460(0x9b)],{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x299460(0xa2)]:_0x5cfc2d});}async['disableSync'](_0x5ad464){const _0x42ac69=a112_0x16f129;await this[_0x42ac69(0x98)][_0x42ac69(0xa3)](constants_1[_0x42ac69(0x99)]+_0x42ac69(0xc7),_0x5ad464,{[constants_1[_0x42ac69(0x99)]+'Sync_In_Progress__c']:![]});}};function a112_0x3fa5(){const _0x4b6dee=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','Service','2542570kPtaAX','stringify','getRepositoryRecords','SalesforceService','GET_WAITING_BRANCHES_QUERY','\x0a\x20\x20\x20\x20\x20\x20','./salesforce-query.service','fromBranchRecord','SalesforceQueryService','repositoryId','typedi','objectType','./salesforce.service','push','1053993UhhNYF','../dto/flosum-repository-sync.dto','FlosumRepositorySyncDto','metadata','%parentId%','getComponentsFromRepository','5Osplyw','decorate','../../../constants/errors','salesforceService','FLOSUM_GIT_NAMESPACE','21WmmSiZ','objectId','salesforceQuery','getRemoteStateAttachmentId','386466yWHTGA','getBranchRecord','35669hyRRpo','constructor','Synchronization_Status__c','patchObject','getOwnPropertyDescriptor','9dMPaOr','Components__r','design:paramtypes','createObject','SalesforceSyncService','GET_COMPONENTS_QUERY','length','records','ERR_INVALID_ATTACHMENT_ID','query','4HxUTXo','338503LFqgyK','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','132LSfGFz','function','SYNC_ATTACHMENT_FOR_BRANCH_NAME','getComponents','defineProperty','../../shared/utils','catch','toString','getAttachmentId','GET_REPOSITORY_QUERY','object','encodeBase64','__esModule','GET_BRANCH_QUERY','getRepositoryRecord','Attachment','map','setStatus','(((.+)+)+)+$','705252oCplHt','search','Git_Settings__c','getBranchRecords','apply','replace','968064gYJwaH','FLOSUM_NAMESPACE'];a112_0x3fa5=function(){return _0x4b6dee;};return a112_0x3fa5();}SalesforceSyncService=__decorate([(0x0,typedi_1[a112_0x16f129(0xce)])(),__metadata(a112_0x16f129(0xa7),[salesforce_query_service_1[a112_0x16f129(0x89)],salesforce_service_1[a112_0x16f129(0xd2)]])],SalesforceSyncService),exports[a112_0x16f129(0xa9)]=SalesforceSyncService;