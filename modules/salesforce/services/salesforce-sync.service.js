const a111_0xc92043=a111_0x3dc4;(function(_0x4922cc,_0x56b2b1){const _0x5f3aaa=a111_0x3dc4,_0x1b7f67=_0x4922cc();while(!![]){try{const _0x3c68e1=-parseInt(_0x5f3aaa(0x14b))/0x1*(-parseInt(_0x5f3aaa(0x11b))/0x2)+-parseInt(_0x5f3aaa(0x126))/0x3+parseInt(_0x5f3aaa(0x141))/0x4*(parseInt(_0x5f3aaa(0x119))/0x5)+-parseInt(_0x5f3aaa(0x110))/0x6*(-parseInt(_0x5f3aaa(0x145))/0x7)+-parseInt(_0x5f3aaa(0x103))/0x8+-parseInt(_0x5f3aaa(0x13d))/0x9+parseInt(_0x5f3aaa(0x13f))/0xa;if(_0x3c68e1===_0x56b2b1)break;else _0x1b7f67['push'](_0x1b7f67['shift']());}catch(_0x3ed68a){_0x1b7f67['push'](_0x1b7f67['shift']());}}}(a111_0x491b,0x5fb07));const a111_0x130067=function(){let _0x3f5877=!![];return function(_0x41e9da,_0x161462){const _0x1df3d1=_0x3f5877?function(){const _0x467b23=a111_0x3dc4;if(_0x161462){const _0x262729=_0x161462[_0x467b23(0x144)](_0x41e9da,arguments);return _0x161462=null,_0x262729;}}:function(){};return _0x3f5877=![],_0x1df3d1;};}(),a111_0x4d8172=a111_0x130067(this,function(){const _0x7bb264=a111_0x3dc4;return a111_0x4d8172['toString']()[_0x7bb264(0x132)](_0x7bb264(0x14a))[_0x7bb264(0x12f)]()[_0x7bb264(0x108)](a111_0x4d8172)[_0x7bb264(0x132)]('(((.+)+)+)+$');});a111_0x4d8172();'use strict';var __decorate=this&&this[a111_0xc92043(0x139)]||function(_0x1daa6b,_0xf70528,_0x14bbd6,_0x3eec9a){const _0x5cc68b=a111_0xc92043;var _0x565e10=arguments[_0x5cc68b(0x124)],_0xae03dd=_0x565e10<0x3?_0xf70528:_0x3eec9a===null?_0x3eec9a=Object[_0x5cc68b(0x11f)](_0xf70528,_0x14bbd6):_0x3eec9a,_0x5d1a90;if(typeof Reflect===_0x5cc68b(0x128)&&typeof Reflect['decorate']==='function')_0xae03dd=Reflect['decorate'](_0x1daa6b,_0xf70528,_0x14bbd6,_0x3eec9a);else{for(var _0x5b234a=_0x1daa6b[_0x5cc68b(0x124)]-0x1;_0x5b234a>=0x0;_0x5b234a--)if(_0x5d1a90=_0x1daa6b[_0x5b234a])_0xae03dd=(_0x565e10<0x3?_0x5d1a90(_0xae03dd):_0x565e10>0x3?_0x5d1a90(_0xf70528,_0x14bbd6,_0xae03dd):_0x5d1a90(_0xf70528,_0x14bbd6))||_0xae03dd;}return _0x565e10>0x3&&_0xae03dd&&Object[_0x5cc68b(0x118)](_0xf70528,_0x14bbd6,_0xae03dd),_0xae03dd;},__metadata=this&&this[a111_0xc92043(0x136)]||function(_0x302784,_0x31ca54){const _0x268486=a111_0xc92043;if(typeof Reflect===_0x268486(0x128)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x302784,_0x31ca54);};Object[a111_0xc92043(0x118)](exports,'__esModule',{'value':!![]}),exports['SalesforceSyncService']=void 0x0;const typedi_1=require(a111_0xc92043(0x10b)),constants_1=require(a111_0xc92043(0x149)),errors_1=require(a111_0xc92043(0x11e)),utils_1=require(a111_0xc92043(0x123)),flosum_repository_sync_dto_1=require(a111_0xc92043(0x10f)),queries_1=require(a111_0xc92043(0x109)),salesforce_query_service_1=require(a111_0xc92043(0x147)),salesforce_service_1=require(a111_0xc92043(0x113));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x38cc65,_0x2a445a){this['salesforceQuery']=_0x38cc65,this['salesforceService']=_0x2a445a;}async[a111_0xc92043(0x115)](_0x309b97){const _0x141489=a111_0xc92043,_0x268d91=await this[_0x141489(0x11d)]['query'](_0x309b97),_0x182d50=[];for(const _0x391dcb of _0x268d91){const _0x5f0e4a=_0x391dcb[constants_1[_0x141489(0x125)]+_0x141489(0x107)][_0x141489(0x102)][0x0];_0x182d50['push'](_0x5f0e4a['Id']);}return _0x182d50;}async['getRepositoryRecords'](){const _0x2a33f2=a111_0xc92043,_0xcf2384=await this[_0x2a33f2(0x11d)][_0x2a33f2(0x116)](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0xcf2384['map'](_0x112506=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto']['fromRepositoryRecord'](_0x112506));}async[a111_0xc92043(0x13a)](){const _0x10ff1c=a111_0xc92043,_0x775363=await this[_0x10ff1c(0x11d)][_0x10ff1c(0x116)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x775363['map'](_0x469984=>flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x10ff1c(0x122)](_0x469984));}async[a111_0xc92043(0x111)](_0x201047){const _0x5c5fb0=a111_0xc92043,_0x2cfbab=await this[_0x5c5fb0(0x11d)][_0x5c5fb0(0x116)](queries_1[_0x5c5fb0(0x120)][_0x5c5fb0(0x114)](_0x5c5fb0(0x11a),_0x201047));return flosum_repository_sync_dto_1[_0x5c5fb0(0x10a)]['fromRepositoryRecord'](_0x2cfbab[0x0]);}async[a111_0xc92043(0x131)](_0x1e5942){const _0x387843=a111_0xc92043,_0x65ac2d=await this[_0x387843(0x11d)]['query'](queries_1[_0x387843(0x106)][_0x387843(0x114)](_0x387843(0x11a),_0x1e5942));return flosum_repository_sync_dto_1[_0x387843(0x10a)][_0x387843(0x122)](_0x65ac2d[0x0]);}async[a111_0xc92043(0x127)](_0x439c57){const _0x4bab1f=a111_0xc92043,_0x3c8779='\x0a\x20\x20\x20\x20\x20\x20'+queries_1['GET_COMPONENTS_QUERY']+_0x4bab1f(0x148)+_0x439c57+'\x27';return this[_0x4bab1f(0x115)](_0x3c8779);}async['getBranchComponents'](_0x58eedc){const _0x106b90=a111_0xc92043,_0xa1cee1=_0x106b90(0x13e)+queries_1[_0x106b90(0x10c)]+_0x106b90(0x104)+_0x58eedc+'\x27';return this[_0x106b90(0x115)](_0xa1cee1);}async[a111_0xc92043(0x134)](_0x2941f3){const _0x399f87=a111_0xc92043;var _0x370615;const _0x2e5f77=queries_1[_0x399f87(0x10d)][_0x399f87(0x114)](_0x399f87(0x138),_0x2941f3[_0x399f87(0x129)])[_0x399f87(0x114)](_0x399f87(0x140),_0x2941f3[_0x399f87(0x133)]?constants_1[_0x399f87(0x13b)]:constants_1[_0x399f87(0x13c)]),_0x47d754=await this[_0x399f87(0x11d)][_0x399f87(0x116)](_0x2e5f77),_0x38c6cc=(_0x370615=_0x47d754[0x0])===null||_0x370615===void 0x0?void 0x0:_0x370615['Id'];if(!_0x38c6cc)throw new Error(errors_1[_0x399f87(0x143)]);return _0x38c6cc;}async['getRemoteStateAttachmentId'](_0x5ad69a){const _0x1133c6=a111_0xc92043;let _0x2babfc=await this['getAttachmentId'](_0x5ad69a)[_0x1133c6(0x10e)](()=>null);return!_0x2babfc&&(_0x2babfc=await this[_0x1133c6(0x130)][_0x1133c6(0x121)](_0x1133c6(0x146),{'Body':(0x0,utils_1['encodeBase64'])('{}'),'ParentId':_0x5ad69a[_0x1133c6(0x129)],'ContentType':_0x1133c6(0x11c),'Name':_0x5ad69a['repositoryId']?constants_1[_0x1133c6(0x13b)]:constants_1[_0x1133c6(0x13c)]})),_0x2babfc;}async[a111_0xc92043(0x117)](_0x5c226d,_0x3adfdf){const _0x18dadf=a111_0xc92043,_0x3968bb=await this['getRemoteStateAttachmentId'](_0x5c226d);await this[_0x18dadf(0x130)]['patchObject'](_0x18dadf(0x146),_0x3968bb,{'Body':(0x0,utils_1['encodeBase64'])(JSON['stringify'](_0x3adfdf))});}async[a111_0xc92043(0x12a)](_0x2a3f3c,_0x554400){const _0x21af93=a111_0xc92043;await this['salesforceService'][_0x21af93(0x12e)](_0x2a3f3c[_0x21af93(0x12b)],_0x2a3f3c[_0x21af93(0x129)],{[constants_1[_0x21af93(0x137)]+'Synchronization_Status__c']:_0x554400});}async[a111_0xc92043(0x112)](_0x11f160){const _0x2bb151=a111_0xc92043;await this[_0x2bb151(0x130)][_0x2bb151(0x12e)](constants_1['FLOSUM_GIT_NAMESPACE']+_0x2bb151(0x142),_0x11f160,{[constants_1[_0x2bb151(0x137)]+_0x2bb151(0x105)]:![]});}};SalesforceSyncService=__decorate([(0x0,typedi_1['Service'])(),__metadata('design:paramtypes',[salesforce_query_service_1[a111_0xc92043(0x135)],salesforce_service_1[a111_0xc92043(0x12c)]])],SalesforceSyncService),exports[a111_0xc92043(0x12d)]=SalesforceSyncService;function a111_0x3dc4(_0x4e79ce,_0x54444d){const _0x4387ed=a111_0x491b();return a111_0x3dc4=function(_0x4d8172,_0x130067){_0x4d8172=_0x4d8172-0x102;let _0x491b20=_0x4387ed[_0x4d8172];return _0x491b20;},a111_0x3dc4(_0x4e79ce,_0x54444d);}function a111_0x491b(){const _0xe3e2c4=['../queries','FlosumRepositorySyncDto','typedi','GET_COMPONENTS_QUERY','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','catch','../dto/flosum-repository-sync.dto','4332ntMCZg','getRepositoryRecord','disableSync','./salesforce.service','replace','getComponents','query','updateRemoteState','defineProperty','2766550kZmBWw','%id%','847646WnhhfW','text/plain','salesforceQuery','../../../constants/errors','getOwnPropertyDescriptor','GET_REPOSITORY_QUERY','createObject','fromBranchRecord','../../shared/utils','length','FLOSUM_NAMESPACE','1900677INFlGd','getComponentsFromRepository','object','objectId','setStatus','objectType','SalesforceService','SalesforceSyncService','patchObject','toString','salesforceService','getBranchRecord','search','repositoryId','getAttachmentId','SalesforceQueryService','__metadata','FLOSUM_GIT_NAMESPACE','%parentId%','__decorate','getBranchRecords','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','SYNC_ATTACHMENT_FOR_BRANCH_NAME','174348jYCOdq','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','2986100ZgHajg','%name%','4txWtEe','Git_Settings__c','ERR_INVALID_ATTACHMENT_ID','apply','2429umnhdg','Attachment','./salesforce-query.service','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','../../../constants','(((.+)+)+)+$','1QIjWoD','records','3851224QCHXnZ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','Sync_In_Progress__c','GET_BRANCH_QUERY','Components__r','constructor'];a111_0x491b=function(){return _0xe3e2c4;};return a111_0x491b();}