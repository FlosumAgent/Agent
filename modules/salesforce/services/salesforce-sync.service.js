const a110_0x316a=['FLOSUM_GIT_NAMESPACE','%parentId%','2496383lDCjZA','apply','getRepositoryRecords','3TuAapP','function','disableSync','constructor','object','1WgQcPG','SalesforceQueryService','319iASXMc','GET_BRANCH_QUERY','../../../constants/errors','./salesforce.service','SYNC_ATTACHMENT_FOR_BRANCH_NAME','SYNC_ATTACHMENT_FOR_REPOSITORY_NAME','__decorate','GET_REPOSITORY_QUERY','1252113zTmcRP','getAttachmentId','getBranchRecord','Service','SalesforceService','getComponents','Components__r','test','1462416LNCxBQ','design:paramtypes','ERR_INVALID_ATTACHMENT_ID','fromBranchRecord','getRepositoryRecord','map','%id%','salesforceQuery','\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27','%name%','decorate','objectType','./salesforce-query.service','getBranchRecords','1RhxbyX','defineProperty','fromRepositoryRecord','return\x20/\x22\x20+\x20this\x20+\x20\x22/','length','../queries','objectId','SalesforceSyncService','1608400eWZDqQ','salseforceService','220DZHMST','replace','repositoryId','setStatus','FlosumRepositorySyncDto','230077PDlVzQ','records','GET_ATTACHMENT_BY_PARENT_ID_AND_NAME_QUERY','push','1369506XYYENe','getOwnPropertyDescriptor','typedi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getBranchComponents','GET_COMPONENTS_QUERY','Sync_In_Progress__c','query','metadata','patchObject'];const a110_0x4b6a05=a110_0x228a;(function(_0x2fc7d3,_0x513e09){const _0x4633b4=a110_0x228a;while(!![]){try{const _0x352efb=parseInt(_0x4633b4(0x1d9))+-parseInt(_0x4633b4(0x1db))*parseInt(_0x4633b4(0x1b3))+-parseInt(_0x4633b4(0x1c3))+parseInt(_0x4633b4(0x1f3))*parseInt(_0x4633b4(0x1e0))+parseInt(_0x4633b4(0x1e4))+parseInt(_0x4633b4(0x1bb))*parseInt(_0x4633b4(0x1d1))+-parseInt(_0x4633b4(0x1b1))*parseInt(_0x4633b4(0x1f0));if(_0x352efb===_0x513e09)break;else _0x2fc7d3['push'](_0x2fc7d3['shift']());}catch(_0x353d93){_0x2fc7d3['push'](_0x2fc7d3['shift']());}}}(a110_0x316a,0xd9987));const a110_0x3b4008=function(){let _0x52f8ab=!![];return function(_0x300a81,_0x36c150){const _0x47ff98=_0x52f8ab?function(){const _0x512022=a110_0x228a;if(_0x36c150){const _0xf127c2=_0x36c150[_0x512022(0x1f1)](_0x300a81,arguments);return _0x36c150=null,_0xf127c2;}}:function(){};return _0x52f8ab=![],_0x47ff98;};}(),a110_0x11573e=a110_0x3b4008(this,function(){const _0x3795ff=function(){const _0x29b9e4=a110_0x228a,_0x1621cf=_0x3795ff[_0x29b9e4(0x1f6)](_0x29b9e4(0x1d4))()[_0x29b9e4(0x1f6)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1621cf[_0x29b9e4(0x1c2)](a110_0x11573e);};return _0x3795ff();});function a110_0x228a(_0x391318,_0x38cf27){return a110_0x228a=function(_0x5750da,_0x11573e){_0x5750da=_0x5750da-0x1b0;let _0x3b4008=a110_0x316a[_0x5750da];return _0x3b4008;},a110_0x228a(_0x391318,_0x38cf27);}a110_0x11573e();'use strict';var __decorate=this&&this[a110_0x4b6a05(0x1b9)]||function(_0x2bd717,_0x3488f6,_0x2cfae9,_0x1ef5af){const _0x82de67=a110_0x4b6a05;var _0x528b1e=arguments[_0x82de67(0x1d5)],_0x1955ee=_0x528b1e<0x3?_0x3488f6:_0x1ef5af===null?_0x1ef5af=Object[_0x82de67(0x1e5)](_0x3488f6,_0x2cfae9):_0x1ef5af,_0x7a422;if(typeof Reflect===_0x82de67(0x1b0)&&typeof Reflect[_0x82de67(0x1cd)]===_0x82de67(0x1f4))_0x1955ee=Reflect['decorate'](_0x2bd717,_0x3488f6,_0x2cfae9,_0x1ef5af);else{for(var _0x35f7df=_0x2bd717[_0x82de67(0x1d5)]-0x1;_0x35f7df>=0x0;_0x35f7df--)if(_0x7a422=_0x2bd717[_0x35f7df])_0x1955ee=(_0x528b1e<0x3?_0x7a422(_0x1955ee):_0x528b1e>0x3?_0x7a422(_0x3488f6,_0x2cfae9,_0x1955ee):_0x7a422(_0x3488f6,_0x2cfae9))||_0x1955ee;}return _0x528b1e>0x3&&_0x1955ee&&Object['defineProperty'](_0x3488f6,_0x2cfae9,_0x1955ee),_0x1955ee;},__metadata=this&&this['__metadata']||function(_0x467036,_0x2feab8){const _0x21888c=a110_0x4b6a05;if(typeof Reflect==='object'&&typeof Reflect[_0x21888c(0x1ec)]===_0x21888c(0x1f4))return Reflect[_0x21888c(0x1ec)](_0x467036,_0x2feab8);};Object[a110_0x4b6a05(0x1d2)](exports,'__esModule',{'value':!![]}),exports[a110_0x4b6a05(0x1d8)]=void 0x0;const typedi_1=require(a110_0x4b6a05(0x1e6)),constants_1=require('../../../constants'),errors_1=require(a110_0x4b6a05(0x1b5)),flosum_repository_sync_dto_1=require('../dto/flosum-repository-sync.dto'),queries_1=require(a110_0x4b6a05(0x1d6)),salesforce_query_service_1=require(a110_0x4b6a05(0x1cf)),salesforce_service_1=require(a110_0x4b6a05(0x1b6));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x2802f5,_0x2804a2){const _0x25d629=a110_0x4b6a05;this['salesforceQuery']=_0x2802f5,this[_0x25d629(0x1da)]=_0x2804a2;}async[a110_0x4b6a05(0x1c0)](_0x5b559c){const _0x32b058=a110_0x4b6a05,_0x41ee51=await this['salesforceQuery'][_0x32b058(0x1eb)](_0x5b559c),_0x498a18=[];for(const _0x557b53 of _0x41ee51){const _0x48c913=_0x557b53[constants_1['FLOSUM_NAMESPACE']+_0x32b058(0x1c1)][_0x32b058(0x1e1)][0x0];_0x498a18[_0x32b058(0x1e3)](_0x48c913['Id']);}return _0x498a18;}async[a110_0x4b6a05(0x1f2)](){const _0x2c508b=a110_0x4b6a05,_0x2f2705=await this['salesforceQuery'][_0x2c508b(0x1eb)](queries_1['GET_WAITING_REPOSITORIES_QUERY']);return _0x2f2705[_0x2c508b(0x1c8)](_0x22fc36=>flosum_repository_sync_dto_1[_0x2c508b(0x1df)][_0x2c508b(0x1d3)](_0x22fc36));}async[a110_0x4b6a05(0x1d0)](){const _0x38bfd0=a110_0x4b6a05,_0x512d5a=await this[_0x38bfd0(0x1ca)][_0x38bfd0(0x1eb)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x512d5a[_0x38bfd0(0x1c8)](_0x23ba21=>flosum_repository_sync_dto_1[_0x38bfd0(0x1df)]['fromBranchRecord'](_0x23ba21));}async[a110_0x4b6a05(0x1c7)](_0x54ffd1){const _0x46c519=a110_0x4b6a05,_0x42d8c9=await this['salesforceQuery'][_0x46c519(0x1eb)](queries_1[_0x46c519(0x1ba)][_0x46c519(0x1dc)](_0x46c519(0x1c9),_0x54ffd1));return flosum_repository_sync_dto_1['FlosumRepositorySyncDto'][_0x46c519(0x1d3)](_0x42d8c9[0x0]);}async[a110_0x4b6a05(0x1bd)](_0x9d4ef0){const _0x2eb1df=a110_0x4b6a05,_0x4d6b9b=await this['salesforceQuery'][_0x2eb1df(0x1eb)](queries_1[_0x2eb1df(0x1b4)]['replace'](_0x2eb1df(0x1c9),_0x9d4ef0));return flosum_repository_sync_dto_1[_0x2eb1df(0x1df)][_0x2eb1df(0x1c6)](_0x4d6b9b[0x0]);}async['getComponentsFromRepository'](_0x57096c){const _0x4255b7=a110_0x4b6a05,_0x538d11='\x0a\x20\x20\x20\x20\x20\x20'+queries_1[_0x4255b7(0x1e9)]+_0x4255b7(0x1cb)+_0x57096c+'\x27';return this[_0x4255b7(0x1c0)](_0x538d11);}async[a110_0x4b6a05(0x1e8)](_0x4e1db6){const _0x27bada=a110_0x4b6a05,_0x1ab7ed=_0x27bada(0x1e7)+queries_1[_0x27bada(0x1e9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27'+_0x4e1db6+'\x27';return this['getComponents'](_0x1ab7ed);}async[a110_0x4b6a05(0x1bc)](_0x33292b){const _0x463329=a110_0x4b6a05;var _0x21c2c4;const _0x571bd1=queries_1[_0x463329(0x1e2)][_0x463329(0x1dc)](_0x463329(0x1ef),_0x33292b[_0x463329(0x1d7)])[_0x463329(0x1dc)](_0x463329(0x1cc),_0x33292b[_0x463329(0x1dd)]?constants_1[_0x463329(0x1b8)]:constants_1[_0x463329(0x1b7)]),_0xa63223=await this[_0x463329(0x1ca)][_0x463329(0x1eb)](_0x571bd1),_0x39c630=(_0x21c2c4=_0xa63223[0x0])===null||_0x21c2c4===void 0x0?void 0x0:_0x21c2c4['Id'];if(!_0x39c630)throw new Error(errors_1[_0x463329(0x1c5)]);return _0x39c630;}async[a110_0x4b6a05(0x1de)](_0x1a7037,_0x4b77ab){const _0x14057c=a110_0x4b6a05;await this[_0x14057c(0x1da)][_0x14057c(0x1ed)](_0x1a7037[_0x14057c(0x1ce)],_0x1a7037[_0x14057c(0x1d7)],{[constants_1[_0x14057c(0x1ee)]+'Status__c']:_0x4b77ab});}async['setLastSha'](_0x25fdda,_0x1e6b89){const _0xff32f0=a110_0x4b6a05;await this[_0xff32f0(0x1da)][_0xff32f0(0x1ed)](_0x25fdda[_0xff32f0(0x1ce)],_0x25fdda[_0xff32f0(0x1d7)],{[constants_1[_0xff32f0(0x1ee)]+'Sha__c']:_0x1e6b89});}async[a110_0x4b6a05(0x1f5)](_0x398487){const _0x2b661b=a110_0x4b6a05;await this['salseforceService'][_0x2b661b(0x1ed)](constants_1[_0x2b661b(0x1ee)]+'Git_Settings__c',_0x398487,{[constants_1[_0x2b661b(0x1ee)]+_0x2b661b(0x1ea)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a110_0x4b6a05(0x1be)](),__metadata(a110_0x4b6a05(0x1c4),[salesforce_query_service_1[a110_0x4b6a05(0x1b2)],salesforce_service_1[a110_0x4b6a05(0x1bf)]])],SalesforceSyncService),exports['SalesforceSyncService']=SalesforceSyncService;