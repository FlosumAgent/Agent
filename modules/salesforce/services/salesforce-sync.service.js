const a106_0x598e=['salesforceQuery','objectType','FlosumRepositorySyncDto','22IbgBze','Components__r','__decorate','test','ERR_INVALID_ATTACHMENT_ID','Service','2341MlhIBO','patchObject','objectId','35yRtrdI','push','__metadata','./salesforce.service','GET_WAITING_REPOSITORIES_QUERY','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','getRepositoryRecords','SalesforceQueryService','\x0a\x20\x20\x20\x20\x20\x20','function','object','defineProperty','Sync_In_Progress__c','12994ROxOrs','22131uctktY','1Dsdqfy','../dto/flosum-repository-sync.dto','__esModule','typedi','setStatus','getBranchRecords','decorate','fromRepositoryRecord','990511ZOiHuX','getComponentsFromRepository','FLOSUM_GIT_NAMESPACE','706NCNxHy','metadata','getAttachmentIdByParent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Branch__c\x20=\x20\x27','./salesforce-query.service','GET_ATTACHMENT_BY_PARENT_ID_QUERY','66559GoiBff','replace','setLastSha','611HUXhRz','2172jikeob','SalesforceSyncService','../../../constants/errors','../queries','length','query','Status__c','SalesforceService','%id%','650971lGBreA','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getComponents','FLOSUM_NAMESPACE','GET_COMPONENTS_QUERY','Git_Settings__c'];const a106_0x4364db=a106_0x503d;(function(_0x5b56c2,_0x4dba6b){const _0x3ee7d0=a106_0x503d;while(!![]){try{const _0x66ba88=parseInt(_0x3ee7d0(0x10d))+parseInt(_0x3ee7d0(0x104))*parseInt(_0x3ee7d0(0xfa))+-parseInt(_0x3ee7d0(0x103))*parseInt(_0x3ee7d0(0x11c))+-parseInt(_0x3ee7d0(0x100))*-parseInt(_0x3ee7d0(0xef))+parseInt(_0x3ee7d0(0xee))*parseInt(_0x3ee7d0(0x11f))+-parseInt(_0x3ee7d0(0xf7))+parseInt(_0x3ee7d0(0xed))*parseInt(_0x3ee7d0(0x116));if(_0x66ba88===_0x4dba6b)break;else _0x5b56c2['push'](_0x5b56c2['shift']());}catch(_0x3c94e2){_0x5b56c2['push'](_0x5b56c2['shift']());}}}(a106_0x598e,0xd96b9));function a106_0x503d(_0x182d61,_0x352a60){return a106_0x503d=function(_0x18319b,_0x4bcbad){_0x18319b=_0x18319b-0xe7;let _0x2da9bf=a106_0x598e[_0x18319b];return _0x2da9bf;},a106_0x503d(_0x182d61,_0x352a60);}const a106_0x2da9bf=function(){let _0x4bd8b4=!![];return function(_0x2cb9a1,_0x18320d){const _0x493de5=_0x4bd8b4?function(){if(_0x18320d){const _0x2cbc08=_0x18320d['apply'](_0x2cb9a1,arguments);return _0x18320d=null,_0x2cbc08;}}:function(){};return _0x4bd8b4=![],_0x493de5;};}(),a106_0x4bcbad=a106_0x2da9bf(this,function(){const _0x3d1b67=function(){const _0x22ab53=a106_0x503d,_0x52ba89=_0x3d1b67['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x22ab53(0x124));return!_0x52ba89[_0x22ab53(0x119)](a106_0x4bcbad);};return _0x3d1b67();});a106_0x4bcbad();'use strict';var __decorate=this&&this[a106_0x4364db(0x118)]||function(_0x195d40,_0x136f93,_0x59e564,_0x42232d){const _0x672f2=a106_0x4364db;var _0x457dfb=arguments[_0x672f2(0x108)],_0x1c9b0a=_0x457dfb<0x3?_0x136f93:_0x42232d===null?_0x42232d=Object['getOwnPropertyDescriptor'](_0x136f93,_0x59e564):_0x42232d,_0x262f7b;if(typeof Reflect==='object'&&typeof Reflect[_0x672f2(0xf5)]===_0x672f2(0xe9))_0x1c9b0a=Reflect[_0x672f2(0xf5)](_0x195d40,_0x136f93,_0x59e564,_0x42232d);else{for(var _0x42971b=_0x195d40[_0x672f2(0x108)]-0x1;_0x42971b>=0x0;_0x42971b--)if(_0x262f7b=_0x195d40[_0x42971b])_0x1c9b0a=(_0x457dfb<0x3?_0x262f7b(_0x1c9b0a):_0x457dfb>0x3?_0x262f7b(_0x136f93,_0x59e564,_0x1c9b0a):_0x262f7b(_0x136f93,_0x59e564))||_0x1c9b0a;}return _0x457dfb>0x3&&_0x1c9b0a&&Object[_0x672f2(0xeb)](_0x136f93,_0x59e564,_0x1c9b0a),_0x1c9b0a;},__metadata=this&&this[a106_0x4364db(0x121)]||function(_0x442928,_0x18e33e){const _0x43db99=a106_0x4364db;if(typeof Reflect===_0x43db99(0xea)&&typeof Reflect[_0x43db99(0xfb)]==='function')return Reflect[_0x43db99(0xfb)](_0x442928,_0x18e33e);};Object[a106_0x4364db(0xeb)](exports,a106_0x4364db(0xf1),{'value':!![]}),exports[a106_0x4364db(0x105)]=void 0x0;const typedi_1=require(a106_0x4364db(0xf2)),constants_1=require('../../../constants'),errors_1=require(a106_0x4364db(0x106)),flosum_repository_sync_dto_1=require(a106_0x4364db(0xf0)),queries_1=require(a106_0x4364db(0x107)),salesforce_query_service_1=require(a106_0x4364db(0xfe)),salesforce_service_1=require(a106_0x4364db(0x122));let SalesforceSyncService=class SalesforceSyncService{constructor(_0x1a1db7,_0x4af574){const _0x285f59=a106_0x4364db;this[_0x285f59(0x113)]=_0x1a1db7,this['salseforceService']=_0x4af574;}async[a106_0x4364db(0x10f)](_0x1251fe){const _0x2c6bd0=a106_0x4364db,_0x3e2395=await this[_0x2c6bd0(0x113)][_0x2c6bd0(0x109)](_0x1251fe),_0x7f40c6=[];for(const _0x451037 of _0x3e2395){const _0x731718=_0x451037[constants_1[_0x2c6bd0(0x110)]+_0x2c6bd0(0x117)]['records'][0x0];_0x7f40c6[_0x2c6bd0(0x120)](_0x731718['Id']);}return _0x7f40c6;}async[a106_0x4364db(0x125)](){const _0x2cfa24=a106_0x4364db,_0x160845=await this['salesforceQuery'][_0x2cfa24(0x109)](queries_1[_0x2cfa24(0x123)]);return _0x160845['map'](_0x23b55e=>flosum_repository_sync_dto_1[_0x2cfa24(0x115)][_0x2cfa24(0xf6)](_0x23b55e));}async[a106_0x4364db(0xf4)](){const _0x3d5b9d=a106_0x4364db,_0x356dc5=await this[_0x3d5b9d(0x113)][_0x3d5b9d(0x109)](queries_1['GET_WAITING_BRANCHES_QUERY']);return _0x356dc5['map'](_0x39cf2c=>flosum_repository_sync_dto_1[_0x3d5b9d(0x115)]['fromBranchRecord'](_0x39cf2c));}async['getRepositoryRecord'](_0x173194){const _0xfc094e=a106_0x4364db,_0x51fb03=await this['salesforceQuery'][_0xfc094e(0x109)](queries_1['GET_REPOSITORY_QUERY']['replace'](_0xfc094e(0x10c),_0x173194));return flosum_repository_sync_dto_1[_0xfc094e(0x115)][_0xfc094e(0xf6)](_0x51fb03[0x0]);}async['getBranchRecord'](_0x57d9be){const _0x4ad74e=a106_0x4364db,_0x5e58f8=await this['salesforceQuery'][_0x4ad74e(0x109)](queries_1['GET_BRANCH_QUERY'][_0x4ad74e(0x101)]('%id%',_0x57d9be));return flosum_repository_sync_dto_1[_0x4ad74e(0x115)]['fromBranchRecord'](_0x5e58f8[0x0]);}async[a106_0x4364db(0xf8)](_0x334c31){const _0x328b44=a106_0x4364db,_0x1a44bf=_0x328b44(0xe8)+queries_1[_0x328b44(0x111)]+'\x0a\x20\x20\x20\x20\x20\x20WHERE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20%flosum_namespace%Repository__c\x20=\x27'+_0x334c31+'\x27';return this[_0x328b44(0x10f)](_0x1a44bf);}async['getBranchComponents'](_0x239901){const _0x2adcda=a106_0x4364db,_0x182bee=_0x2adcda(0x10e)+queries_1[_0x2adcda(0x111)]+_0x2adcda(0xfd)+_0x239901+'\x27';return this['getComponents'](_0x182bee);}async[a106_0x4364db(0xfc)](_0x1465f8){const _0x58d229=a106_0x4364db;var _0x4bffdc;const _0x1807b=queries_1[_0x58d229(0xff)][_0x58d229(0x101)]('%parentId%',_0x1465f8),_0x5de899=await this[_0x58d229(0x113)][_0x58d229(0x109)](_0x1807b),_0x30694f=(_0x4bffdc=_0x5de899[0x0])===null||_0x4bffdc===void 0x0?void 0x0:_0x4bffdc['Id'];if(!_0x30694f)throw new Error(errors_1[_0x58d229(0x11a)]);return _0x30694f;}async[a106_0x4364db(0xf3)](_0x220770,_0x4af185){const _0x59f23f=a106_0x4364db;await this['salseforceService'][_0x59f23f(0x11d)](_0x220770[_0x59f23f(0x114)],_0x220770[_0x59f23f(0x11e)],{[constants_1[_0x59f23f(0xf9)]+_0x59f23f(0x10a)]:_0x4af185});}async[a106_0x4364db(0x102)](_0xfd09a4,_0x110b74){const _0x4ccddc=a106_0x4364db;await this['salseforceService'][_0x4ccddc(0x11d)](_0xfd09a4[_0x4ccddc(0x114)],_0xfd09a4['objectId'],{[constants_1['FLOSUM_GIT_NAMESPACE']+'Sha__c']:_0x110b74});}async['disableSync'](_0x1ab7ea){const _0x50e52d=a106_0x4364db;await this['salseforceService']['patchObject'](constants_1[_0x50e52d(0xf9)]+_0x50e52d(0x112),_0x1ab7ea,{[constants_1['FLOSUM_GIT_NAMESPACE']+_0x50e52d(0xec)]:![]});}};SalesforceSyncService=__decorate([typedi_1[a106_0x4364db(0x11b)](),__metadata('design:paramtypes',[salesforce_query_service_1[a106_0x4364db(0xe7)],salesforce_service_1[a106_0x4364db(0x10b)]])],SalesforceSyncService),exports[a106_0x4364db(0x105)]=SalesforceSyncService;