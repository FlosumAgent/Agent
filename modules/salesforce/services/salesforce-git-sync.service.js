const a123_0xcf3db0=a123_0x1507;(function(_0x5a52aa,_0x3d4232){const _0x3cd2e8=a123_0x1507,_0x2c33c5=_0x5a52aa();while(!![]){try{const _0x12ad05=parseInt(_0x3cd2e8(0x119))/0x1+parseInt(_0x3cd2e8(0x128))/0x2*(parseInt(_0x3cd2e8(0x125))/0x3)+-parseInt(_0x3cd2e8(0x10e))/0x4*(-parseInt(_0x3cd2e8(0x11e))/0x5)+parseInt(_0x3cd2e8(0x147))/0x6*(parseInt(_0x3cd2e8(0x134))/0x7)+parseInt(_0x3cd2e8(0x123))/0x8*(parseInt(_0x3cd2e8(0x142))/0x9)+-parseInt(_0x3cd2e8(0x146))/0xa+parseInt(_0x3cd2e8(0x13a))/0xb*(-parseInt(_0x3cd2e8(0x135))/0xc);if(_0x12ad05===_0x3d4232)break;else _0x2c33c5['push'](_0x2c33c5['shift']());}catch(_0x2fcc82){_0x2c33c5['push'](_0x2c33c5['shift']());}}}(a123_0xbcd9,0xb853d));const a123_0x53dd70=function(){let _0x2ef46c=!![];return function(_0x420d71,_0x1eee40){const _0x5d905e=_0x2ef46c?function(){const _0x17f6b1=a123_0x1507;if(_0x1eee40){const _0x32d944=_0x1eee40[_0x17f6b1(0x102)](_0x420d71,arguments);return _0x1eee40=null,_0x32d944;}}:function(){};return _0x2ef46c=![],_0x5d905e;};}(),a123_0x45953b=a123_0x53dd70(this,function(){const _0x5ce780=a123_0x1507;return a123_0x45953b[_0x5ce780(0x108)]()['search']('(((.+)+)+)+$')[_0x5ce780(0x108)]()[_0x5ce780(0x10b)](a123_0x45953b)[_0x5ce780(0x101)]('(((.+)+)+)+$');});a123_0x45953b();'use strict';var __decorate=this&&this[a123_0xcf3db0(0x110)]||function(_0x3ada79,_0x14ae85,_0x39d9aa,_0x171f27){const _0x3e7ad5=a123_0xcf3db0;var _0x17f040=arguments['length'],_0x540a06=_0x17f040<0x3?_0x14ae85:_0x171f27===null?_0x171f27=Object[_0x3e7ad5(0x140)](_0x14ae85,_0x39d9aa):_0x171f27,_0x3c12ac;if(typeof Reflect==='object'&&typeof Reflect[_0x3e7ad5(0x10d)]===_0x3e7ad5(0x12e))_0x540a06=Reflect['decorate'](_0x3ada79,_0x14ae85,_0x39d9aa,_0x171f27);else{for(var _0x2a517d=_0x3ada79['length']-0x1;_0x2a517d>=0x0;_0x2a517d--)if(_0x3c12ac=_0x3ada79[_0x2a517d])_0x540a06=(_0x17f040<0x3?_0x3c12ac(_0x540a06):_0x17f040>0x3?_0x3c12ac(_0x14ae85,_0x39d9aa,_0x540a06):_0x3c12ac(_0x14ae85,_0x39d9aa))||_0x540a06;}return _0x17f040>0x3&&_0x540a06&&Object[_0x3e7ad5(0x114)](_0x14ae85,_0x39d9aa,_0x540a06),_0x540a06;},__metadata=this&&this[a123_0xcf3db0(0x121)]||function(_0x480355,_0x20ac91){const _0x6dd66d=a123_0xcf3db0;if(typeof Reflect===_0x6dd66d(0x11c)&&typeof Reflect[_0x6dd66d(0x106)]===_0x6dd66d(0x12e))return Reflect[_0x6dd66d(0x106)](_0x480355,_0x20ac91);};function a123_0xbcd9(){const _0x35b1dd=['getOwnPropertyDescriptor','fetchBranchComponentsByFilenames','1442565VXUtgE','getComponentRecordTypes','FLOSUM_NAMESPACE','./salesforce-query.service','8757730lAVxHu','4314BRSVqC','push','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','fetchRepositoryComponentsByFilenames','GET_REPOSITORY_BY_NAME_QUERY','File_Name__c','Status__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','replace','Component_Name__c','Repository__c','SalesforceGitSyncService','design:paramtypes','%branchId%','search','apply','NotFoundError','%name%','extractComponentMetadataFromRecord','metadata','fetchBranchComponents','toString','../../../constants','createCommit','constructor','typedi','decorate','25152nWnNyn','join','__decorate','Repository\x20\x22','__esModule','SalesforceRestService','defineProperty','splice','Completed','fetchCommitManifestsByComponentIds','query','1187771IwyJHj','fetchRepositoryComponents','CRC32__c','object','Component_Type__c','20KIUYLq','MAX_QUERY_ARRAY_ITEMS','%fileNames%','__metadata','../queries','72yGCGne','GET_BRANCH_BY_NAME_QUERY','24tXpYgl','getBranchIdByName','Branch\x20\x22','163172XrfkSu','SalesforceQueryService','substr','length','extractFieldsFromRecord','\x22\x20not\x20found\x20in\x20flosum.','function','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','../../../core/errors/not-found.error','Service','GET_BRANCH_COMPONENTS_QUERY','Version__c','2513lTtKWe','7742076IyeuVw','restService','getRepositoryIdByName','FLOSUM_GIT_NAMESPACE','Name','33hNmivc','%componentIds%','Commit_Name__c','Is_From_Agent__c','queryService','map'];a123_0xbcd9=function(){return _0x35b1dd;};return a123_0xbcd9();}function a123_0x1507(_0x5ec178,_0x241534){const _0x3e4410=a123_0xbcd9();return a123_0x1507=function(_0x45953b,_0x53dd70){_0x45953b=_0x45953b-0xf9;let _0xbcd9bc=_0x3e4410[_0x45953b];return _0xbcd9bc;},a123_0x1507(_0x5ec178,_0x241534);}Object['defineProperty'](exports,a123_0xcf3db0(0x112),{'value':!![]}),exports[a123_0xcf3db0(0xfe)]=void 0x0;const not_found_error_1=require(a123_0xcf3db0(0x130)),typedi_1=require(a123_0xcf3db0(0x10c)),constants_1=require(a123_0xcf3db0(0x109)),queries_1=require(a123_0xcf3db0(0x122)),flosum_naming_utils_1=require('../utils/flosum-naming.utils'),salesforce_query_service_1=require(a123_0xcf3db0(0x145)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1547ba,_0x42b58f){const _0x2e154e=a123_0xcf3db0;this[_0x2e154e(0x13e)]=_0x1547ba,this[_0x2e154e(0x136)]=_0x42b58f,this['MAX_QUERY_ARRAY_ITEMS']=0xc8;}['extractComponentMetadataFromRecord'](_0x353d1d){const _0x55a049=a123_0xcf3db0,_0x1110c8=flosum_naming_utils_1[_0x55a049(0x12c)](_0x353d1d,[_0x55a049(0xfc),_0x55a049(0x11d),_0x55a049(0x11b),_0x55a049(0x14c),_0x55a049(0x133),'Id']);return{'id':_0x1110c8['Id'],'name':_0x1110c8[_0x55a049(0xfc)],'type':_0x1110c8[_0x55a049(0x11d)],'fileName':_0x1110c8['File_Name__c'],'crc32':_0x1110c8[_0x55a049(0x11b)],'version':+_0x1110c8[_0x55a049(0x133)]};}async[a123_0xcf3db0(0x137)](_0x886b76){const _0x5f120a=a123_0xcf3db0,[_0x14aaae]=await this[_0x5f120a(0x13e)]['query'](queries_1[_0x5f120a(0x14b)]['replace'](_0x5f120a(0x104),_0x886b76));if(!_0x14aaae)throw new not_found_error_1[(_0x5f120a(0x103))](_0x5f120a(0x111)+_0x886b76+_0x5f120a(0x12d));return _0x14aaae['Id'];}async[a123_0xcf3db0(0x126)](_0x4ad0c4){const _0x5d5ba8=a123_0xcf3db0,[_0x2fe253]=await this[_0x5d5ba8(0x13e)][_0x5d5ba8(0x118)](queries_1[_0x5d5ba8(0x124)]['replace'](_0x5d5ba8(0x104),_0x4ad0c4));if(!_0x2fe253)throw new not_found_error_1[(_0x5d5ba8(0x103))](_0x5d5ba8(0x127)+_0x4ad0c4+'\x22\x20not\x20found\x20in\x20flosum.');return _0x2fe253['Id'];}async[a123_0xcf3db0(0x143)](){const _0x225ccf=a123_0xcf3db0,_0x1dc5a8=await this['queryService'][_0x225ccf(0x118)](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x1dc5a8[_0x225ccf(0x13f)](_0x109c3d=>flosum_naming_utils_1[_0x225ccf(0x12c)](_0x109c3d,['Id',_0x225ccf(0x139)]))[_0x225ccf(0x13f)](_0x3926db=>({'id':_0x3926db['Id'],'name':_0x3926db[_0x225ccf(0x139)]}));}async[a123_0xcf3db0(0x14a)](_0x4ac99f,_0x3162e1){const _0x33cb06=a123_0xcf3db0,_0x4379e9=[];while(_0x4ac99f[_0x33cb06(0x12b)]){const _0x3fcd4e=queries_1[_0x33cb06(0x149)][_0x33cb06(0xfb)](_0x33cb06(0x120),_0x4ac99f[_0x33cb06(0x115)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x33cb06(0x13f)](_0x424dd9=>'\x27'+_0x424dd9+'\x27')[_0x33cb06(0x10f)](','))[_0x33cb06(0xfb)]('%repositoryId%',_0x3162e1),_0x3058f6=await this[_0x33cb06(0x13e)][_0x33cb06(0x118)](_0x3fcd4e);_0x4379e9[_0x33cb06(0x148)](..._0x3058f6);}return _0x4379e9[_0x33cb06(0x13f)](_0x2a4313=>this[_0x33cb06(0x105)](_0x2a4313));}async[a123_0xcf3db0(0x141)](_0x50fb8e,_0x17c4e2){const _0x1c537e=a123_0xcf3db0,_0xcdcfc7=[];while(_0x50fb8e['length']){const _0x433c4a=queries_1[_0x1c537e(0x12f)][_0x1c537e(0xfb)]('%fileNames%',_0x50fb8e['splice'](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x1c537e(0x13f)](_0x1bd201=>'\x27'+_0x1bd201+'\x27')[_0x1c537e(0x10f)](','))[_0x1c537e(0xfb)](_0x1c537e(0x100),_0x17c4e2),_0x2273df=await this[_0x1c537e(0x13e)][_0x1c537e(0x118)](_0x433c4a);_0xcdcfc7[_0x1c537e(0x148)](..._0x2273df);}return _0xcdcfc7['map'](_0x100ef2=>this[_0x1c537e(0x105)](_0x100ef2));}async[a123_0xcf3db0(0x11a)](_0x40333a){const _0x1aa64d=a123_0xcf3db0,_0x19af46=[],_0x3c2887=queries_1['GET_REPOSITORY_COMPONENTS_QUERY'][_0x1aa64d(0xfb)]('%repositoryId%',_0x40333a),_0x30bad9=await this[_0x1aa64d(0x13e)][_0x1aa64d(0x118)](_0x3c2887);return _0x19af46[_0x1aa64d(0x148)](..._0x30bad9),_0x19af46['map'](_0x5a0e06=>this['extractComponentMetadataFromRecord'](_0x5a0e06));}async[a123_0xcf3db0(0x107)](_0x2c4238){const _0x51bfc0=a123_0xcf3db0,_0x18094d=[],_0x14f4fb=queries_1[_0x51bfc0(0x132)]['replace'](_0x51bfc0(0x100),_0x2c4238),_0x5b8cc4=await this[_0x51bfc0(0x13e)][_0x51bfc0(0x118)](_0x14f4fb);return _0x18094d[_0x51bfc0(0x148)](..._0x5b8cc4),_0x18094d[_0x51bfc0(0x13f)](_0x392e1d=>this[_0x51bfc0(0x105)](_0x392e1d));}async[a123_0xcf3db0(0x117)](_0xbcc337){const _0x5c5d4a=a123_0xcf3db0,_0x1f4384=[..._0xbcc337],_0x174727=[];while(_0x1f4384[_0x5c5d4a(0x12b)]){const _0x54377f=queries_1[_0x5c5d4a(0xfa)][_0x5c5d4a(0xfb)](_0x5c5d4a(0x13b),_0x1f4384[_0x5c5d4a(0x115)](0x0,this[_0x5c5d4a(0x11f)])[_0x5c5d4a(0x13f)](_0x4d304c=>'\x27'+_0x4d304c+'\x27')[_0x5c5d4a(0x10f)](',')),_0x10bdcb=await this[_0x5c5d4a(0x13e)][_0x5c5d4a(0x118)](_0x54377f);_0x174727[_0x5c5d4a(0x148)](..._0x10bdcb[_0x5c5d4a(0x13f)](_0x6e8ef9=>_0x6e8ef9['Id']));}return _0x174727;}async[a123_0xcf3db0(0x10a)](_0x2b29d3,_0x455b32){const _0x554523=a123_0xcf3db0;return this['restService']['post'](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x554523(0x144)]+_0x554523(0xfd)]:_0x455b32,[constants_1['FLOSUM_NAMESPACE']+_0x554523(0x13c)]:_0x2b29d3[_0x554523(0x12a)](0x0,0xff),[constants_1[_0x554523(0x144)]+_0x554523(0xf9)]:_0x554523(0x116),[constants_1[_0x554523(0x138)]+_0x554523(0x13d)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a123_0xcf3db0(0x131)](),__metadata(a123_0xcf3db0(0xff),[salesforce_query_service_1[a123_0xcf3db0(0x129)],salesforce_rest_service_1[a123_0xcf3db0(0x113)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;