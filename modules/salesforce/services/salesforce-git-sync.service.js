const a129_0x4b2880=a129_0x2d12;(function(_0x4e891f,_0x34d8ca){const _0x411269=a129_0x2d12,_0x47d1e0=_0x4e891f();while(!![]){try{const _0x137bd9=parseInt(_0x411269(0xd5))/0x1*(parseInt(_0x411269(0xb0))/0x2)+parseInt(_0x411269(0xea))/0x3+parseInt(_0x411269(0xdd))/0x4*(parseInt(_0x411269(0xdc))/0x5)+-parseInt(_0x411269(0xca))/0x6+-parseInt(_0x411269(0xba))/0x7*(-parseInt(_0x411269(0xbc))/0x8)+-parseInt(_0x411269(0xde))/0x9*(parseInt(_0x411269(0xb6))/0xa)+-parseInt(_0x411269(0xc3))/0xb;if(_0x137bd9===_0x34d8ca)break;else _0x47d1e0['push'](_0x47d1e0['shift']());}catch(_0x132d5a){_0x47d1e0['push'](_0x47d1e0['shift']());}}}(a129_0x4eba,0x83262));function a129_0x2d12(_0x3aef61,_0x3ba117){const _0x3d6336=a129_0x4eba();return a129_0x2d12=function(_0x2dbe7e,_0x28f08e){_0x2dbe7e=_0x2dbe7e-0xad;let _0x4ebab2=_0x3d6336[_0x2dbe7e];return _0x4ebab2;},a129_0x2d12(_0x3aef61,_0x3ba117);}const a129_0x28f08e=function(){let _0x4ad6d6=!![];return function(_0x4d21f1,_0x4688f8){const _0xa0d403=_0x4ad6d6?function(){const _0xc37778=a129_0x2d12;if(_0x4688f8){const _0x17d28b=_0x4688f8[_0xc37778(0xe7)](_0x4d21f1,arguments);return _0x4688f8=null,_0x17d28b;}}:function(){};return _0x4ad6d6=![],_0xa0d403;};}(),a129_0x2dbe7e=a129_0x28f08e(this,function(){const _0x18bdd4=a129_0x2d12;return a129_0x2dbe7e[_0x18bdd4(0xd8)]()[_0x18bdd4(0xf9)]('(((.+)+)+)+$')['toString']()[_0x18bdd4(0xbb)](a129_0x2dbe7e)['search'](_0x18bdd4(0xc2));});a129_0x2dbe7e();function a129_0x4eba(){const _0x457623=['581mJElUH','constructor','16QNzqKi','FLOSUM_GIT_NAMESPACE','extractFieldsFromRecord','fetchBranchComponents','Version__c','FLOSUM_COMMIT','(((.+)+)+)+$','2067461uNoApL','MAX_QUERY_ARRAY_ITEMS','push','length','FLOSUM_NAMESPACE','NotFoundError','Component_Name__c','811086YoPVzG','%fileNames%','fetchBranchComponentsByFilenames','%branchId%','substr','fetchCommitManifestsByComponentIds','extractComponentMetadataFromRecord','GET_COMPONENT_RECORD_TYPES_QUERY','map','__metadata','getRepositoryIdByName','1OXFlIg','File_Name__c','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','toString','CRC32__c','GET_REPOSITORY_COMPONENTS_QUERY','metadata','558995SBavWt','36zPBeAh','2097DTquQn','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','%name%','object','Is_From_Agent__c','decorate','fetchRepositoryComponentsByFilenames','Branch\x20\x22','../utils/flosum-naming.utils','apply','query','Commit_Name__c','1789152HvrVgr','Service','replace','SalesforceQueryService','getOwnPropertyDescriptor','__decorate','SalesforceGitSyncService','defineProperty','../../../constants','fetchRepositoryComponents','restService','join','splice','queryService','SalesforceRestService','search','Repository__c','../../../core/errors/not-found.error','%componentIds%','239354wvdmqd','%repositoryId%','Completed','typedi','createCommit','./salesforce-query.service','37000aZGAfh','Component_Type__c','Status__c','post'];a129_0x4eba=function(){return _0x457623;};return a129_0x4eba();}'use strict';var __decorate=this&&this[a129_0x4b2880(0xef)]||function(_0x17b26c,_0x5ebd51,_0x3a14ca,_0x33736c){const _0x140a5a=a129_0x4b2880;var _0x4588dc=arguments[_0x140a5a(0xc6)],_0x55bce9=_0x4588dc<0x3?_0x5ebd51:_0x33736c===null?_0x33736c=Object[_0x140a5a(0xee)](_0x5ebd51,_0x3a14ca):_0x33736c,_0x2fdecf;if(typeof Reflect===_0x140a5a(0xe1)&&typeof Reflect[_0x140a5a(0xe3)]==='function')_0x55bce9=Reflect['decorate'](_0x17b26c,_0x5ebd51,_0x3a14ca,_0x33736c);else{for(var _0x1c7abf=_0x17b26c['length']-0x1;_0x1c7abf>=0x0;_0x1c7abf--)if(_0x2fdecf=_0x17b26c[_0x1c7abf])_0x55bce9=(_0x4588dc<0x3?_0x2fdecf(_0x55bce9):_0x4588dc>0x3?_0x2fdecf(_0x5ebd51,_0x3a14ca,_0x55bce9):_0x2fdecf(_0x5ebd51,_0x3a14ca))||_0x55bce9;}return _0x4588dc>0x3&&_0x55bce9&&Object['defineProperty'](_0x5ebd51,_0x3a14ca,_0x55bce9),_0x55bce9;},__metadata=this&&this[a129_0x4b2880(0xd3)]||function(_0x51327e,_0x2e81d3){const _0x109f2b=a129_0x4b2880;if(typeof Reflect===_0x109f2b(0xe1)&&typeof Reflect[_0x109f2b(0xdb)]==='function')return Reflect[_0x109f2b(0xdb)](_0x51327e,_0x2e81d3);};Object[a129_0x4b2880(0xf1)](exports,'__esModule',{'value':!![]}),exports[a129_0x4b2880(0xf0)]=void 0x0;const not_found_error_1=require(a129_0x4b2880(0xae)),typedi_1=require(a129_0x4b2880(0xb3)),constants_1=require(a129_0x4b2880(0xf2)),queries_1=require('../queries'),flosum_naming_utils_1=require(a129_0x4b2880(0xe6)),salesforce_query_service_1=require(a129_0x4b2880(0xb5)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x47ef7a,_0x5920aa){const _0x2e03f2=a129_0x4b2880;this[_0x2e03f2(0xf7)]=_0x47ef7a,this[_0x2e03f2(0xf4)]=_0x5920aa,this[_0x2e03f2(0xc4)]=0xc8;}['extractComponentMetadataFromRecord'](_0x5500b1){const _0x1aaad4=a129_0x4b2880,_0x123f25=flosum_naming_utils_1[_0x1aaad4(0xbe)](_0x5500b1,[_0x1aaad4(0xc9),_0x1aaad4(0xb7),_0x1aaad4(0xd9),_0x1aaad4(0xd6),_0x1aaad4(0xc0),'Id']);return{'id':_0x123f25['Id'],'name':_0x123f25[_0x1aaad4(0xc9)],'type':_0x123f25[_0x1aaad4(0xb7)],'fileName':_0x123f25[_0x1aaad4(0xd6)],'crc32':_0x123f25['CRC32__c'],'version':+_0x123f25[_0x1aaad4(0xc0)]};}async[a129_0x4b2880(0xd4)](_0x5d9dc1){const _0x2c1c43=a129_0x4b2880,[_0x11aac2]=await this['queryService'][_0x2c1c43(0xe8)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x2c1c43(0xec)]('%name%',_0x5d9dc1));if(!_0x11aac2)throw new not_found_error_1[(_0x2c1c43(0xc8))]('Repository\x20\x22'+_0x5d9dc1+'\x22\x20not\x20found\x20in\x20flosum.');return _0x11aac2['Id'];}async['getBranchIdByName'](_0x18567e){const _0x285f4c=a129_0x4b2880,[_0x47c961]=await this[_0x285f4c(0xf7)][_0x285f4c(0xe8)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x285f4c(0xec)](_0x285f4c(0xe0),_0x18567e));if(!_0x47c961)throw new not_found_error_1['NotFoundError'](_0x285f4c(0xe5)+_0x18567e+'\x22\x20not\x20found\x20in\x20flosum.');return _0x47c961['Id'];}async['getComponentRecordTypes'](){const _0x12b5c7=a129_0x4b2880,_0x3afaa2=await this[_0x12b5c7(0xf7)][_0x12b5c7(0xe8)](queries_1[_0x12b5c7(0xd1)]);return _0x3afaa2[_0x12b5c7(0xd2)](_0x3f5c11=>flosum_naming_utils_1[_0x12b5c7(0xbe)](_0x3f5c11,['Id','Name']))[_0x12b5c7(0xd2)](_0x5087ff=>({'id':_0x5087ff['Id'],'name':_0x5087ff['Name']}));}async[a129_0x4b2880(0xe4)](_0x3142e5,_0x40ceb6){const _0x447934=a129_0x4b2880,_0x34c8ae=[];while(_0x3142e5[_0x447934(0xc6)]){const _0x4e9dc9=queries_1[_0x447934(0xdf)][_0x447934(0xec)]('%fileNames%',_0x3142e5[_0x447934(0xf6)](0x0,this[_0x447934(0xc4)])[_0x447934(0xd2)](_0x468217=>'\x27'+_0x468217+'\x27')[_0x447934(0xf5)](','))['replace'](_0x447934(0xb1),_0x40ceb6),_0xd8ab50=await this['queryService'][_0x447934(0xe8)](_0x4e9dc9);_0x34c8ae[_0x447934(0xc5)](..._0xd8ab50);}return _0x34c8ae[_0x447934(0xd2)](_0x4ea42c=>this[_0x447934(0xd0)](_0x4ea42c));}async[a129_0x4b2880(0xcc)](_0x470719,_0x55b526){const _0x4cce70=a129_0x4b2880,_0x1d6b9d=[];while(_0x470719[_0x4cce70(0xc6)]){const _0x3e2b55=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x4cce70(0xec)](_0x4cce70(0xcb),_0x470719[_0x4cce70(0xf6)](0x0,this[_0x4cce70(0xc4)])['map'](_0x53ef25=>'\x27'+_0x53ef25+'\x27')[_0x4cce70(0xf5)](','))[_0x4cce70(0xec)](_0x4cce70(0xcd),_0x55b526),_0x507a02=await this[_0x4cce70(0xf7)][_0x4cce70(0xe8)](_0x3e2b55);_0x1d6b9d[_0x4cce70(0xc5)](..._0x507a02);}return _0x1d6b9d[_0x4cce70(0xd2)](_0x334bd8=>this['extractComponentMetadataFromRecord'](_0x334bd8));}async[a129_0x4b2880(0xf3)](_0x249e15){const _0x23c09c=a129_0x4b2880,_0x278455=[],_0x5f216b=queries_1[_0x23c09c(0xda)][_0x23c09c(0xec)](_0x23c09c(0xb1),_0x249e15),_0x35987e=await this['queryService']['query'](_0x5f216b);return _0x278455[_0x23c09c(0xc5)](..._0x35987e),_0x278455[_0x23c09c(0xd2)](_0xb1214f=>this[_0x23c09c(0xd0)](_0xb1214f));}async[a129_0x4b2880(0xbf)](_0x4e9ee1){const _0x3dfe57=a129_0x4b2880,_0x1e9899=[],_0x5a9e07=queries_1['GET_BRANCH_COMPONENTS_QUERY'][_0x3dfe57(0xec)](_0x3dfe57(0xcd),_0x4e9ee1),_0xf97dfc=await this[_0x3dfe57(0xf7)][_0x3dfe57(0xe8)](_0x5a9e07);return _0x1e9899['push'](..._0xf97dfc),_0x1e9899[_0x3dfe57(0xd2)](_0x1748b5=>this[_0x3dfe57(0xd0)](_0x1748b5));}async[a129_0x4b2880(0xcf)](_0xe3defe){const _0x539a7e=a129_0x4b2880,_0x34b08a=[..._0xe3defe],_0x41880e=[];while(_0x34b08a['length']){const _0x43eb32=queries_1[_0x539a7e(0xd7)][_0x539a7e(0xec)](_0x539a7e(0xaf),_0x34b08a['splice'](0x0,this[_0x539a7e(0xc4)])['map'](_0x5ad771=>'\x27'+_0x5ad771+'\x27')['join'](',')),_0x4f00bb=await this[_0x539a7e(0xf7)][_0x539a7e(0xe8)](_0x43eb32);_0x41880e[_0x539a7e(0xc5)](..._0x4f00bb[_0x539a7e(0xd2)](_0x3465cb=>_0x3465cb['Id']));}return _0x41880e;}async[a129_0x4b2880(0xb4)](_0x46d794,_0x6ae059){const _0x142d79=a129_0x4b2880;return this[_0x142d79(0xf4)][_0x142d79(0xb9)](constants_1[_0x142d79(0xc1)],{[constants_1[_0x142d79(0xc7)]+_0x142d79(0xad)]:_0x6ae059,[constants_1['FLOSUM_NAMESPACE']+_0x142d79(0xe9)]:_0x46d794[_0x142d79(0xce)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x142d79(0xb8)]:_0x142d79(0xb2),[constants_1[_0x142d79(0xbd)]+_0x142d79(0xe2)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a129_0x4b2880(0xeb)](),__metadata('design:paramtypes',[salesforce_query_service_1[a129_0x4b2880(0xed)],salesforce_rest_service_1[a129_0x4b2880(0xf8)]])],SalesforceGitSyncService),exports[a129_0x4b2880(0xf0)]=SalesforceGitSyncService;