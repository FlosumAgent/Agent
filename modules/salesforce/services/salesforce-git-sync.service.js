const a129_0x12b4eb=a129_0x5a7b;(function(_0x2b492d,_0x2d0cda){const _0x108053=a129_0x5a7b,_0x2d59d2=_0x2b492d();while(!![]){try{const _0x268605=parseInt(_0x108053(0x1e4))/0x1*(-parseInt(_0x108053(0x217))/0x2)+-parseInt(_0x108053(0x1eb))/0x3*(-parseInt(_0x108053(0x1ed))/0x4)+parseInt(_0x108053(0x1f5))/0x5+-parseInt(_0x108053(0x1f1))/0x6*(parseInt(_0x108053(0x1f8))/0x7)+parseInt(_0x108053(0x201))/0x8*(parseInt(_0x108053(0x1f9))/0x9)+parseInt(_0x108053(0x1ea))/0xa*(parseInt(_0x108053(0x209))/0xb)+parseInt(_0x108053(0x1fb))/0xc*(-parseInt(_0x108053(0x205))/0xd);if(_0x268605===_0x2d0cda)break;else _0x2d59d2['push'](_0x2d59d2['shift']());}catch(_0x394ee9){_0x2d59d2['push'](_0x2d59d2['shift']());}}}(a129_0xb880,0x1e1b8));const a129_0x4e617d=function(){let _0x22ccb0=!![];return function(_0x208a62,_0x55a4da){const _0x27c9d7=_0x22ccb0?function(){const _0x1b3e8c=a129_0x5a7b;if(_0x55a4da){const _0x49b6ea=_0x55a4da[_0x1b3e8c(0x1e5)](_0x208a62,arguments);return _0x55a4da=null,_0x49b6ea;}}:function(){};return _0x22ccb0=![],_0x27c9d7;};}(),a129_0x47bd23=a129_0x4e617d(this,function(){const _0x3e9129=a129_0x5a7b;return a129_0x47bd23[_0x3e9129(0x1e7)]()[_0x3e9129(0x221)](_0x3e9129(0x20c))[_0x3e9129(0x1e7)]()[_0x3e9129(0x203)](a129_0x47bd23)[_0x3e9129(0x221)](_0x3e9129(0x20c));});a129_0x47bd23();'use strict';function a129_0x5a7b(_0x4d7b3e,_0x371762){const _0x2c02a1=a129_0xb880();return a129_0x5a7b=function(_0x47bd23,_0x4e617d){_0x47bd23=_0x47bd23-0x1de;let _0xb880e1=_0x2c02a1[_0x47bd23];return _0xb880e1;},a129_0x5a7b(_0x4d7b3e,_0x371762);}var __decorate=this&&this[a129_0x12b4eb(0x22b)]||function(_0x42543c,_0xa9d0dd,_0x280200,_0x243c8e){const _0x5340f7=a129_0x12b4eb;var _0x5624a3=arguments[_0x5340f7(0x1f4)],_0x1d83ba=_0x5624a3<0x3?_0xa9d0dd:_0x243c8e===null?_0x243c8e=Object[_0x5340f7(0x227)](_0xa9d0dd,_0x280200):_0x243c8e,_0x39ece4;if(typeof Reflect==='object'&&typeof Reflect[_0x5340f7(0x218)]===_0x5340f7(0x1e2))_0x1d83ba=Reflect['decorate'](_0x42543c,_0xa9d0dd,_0x280200,_0x243c8e);else{for(var _0x97f735=_0x42543c[_0x5340f7(0x1f4)]-0x1;_0x97f735>=0x0;_0x97f735--)if(_0x39ece4=_0x42543c[_0x97f735])_0x1d83ba=(_0x5624a3<0x3?_0x39ece4(_0x1d83ba):_0x5624a3>0x3?_0x39ece4(_0xa9d0dd,_0x280200,_0x1d83ba):_0x39ece4(_0xa9d0dd,_0x280200))||_0x1d83ba;}return _0x5624a3>0x3&&_0x1d83ba&&Object['defineProperty'](_0xa9d0dd,_0x280200,_0x1d83ba),_0x1d83ba;},__metadata=this&&this[a129_0x12b4eb(0x202)]||function(_0x39c9c2,_0x3dbef0){const _0x29a5e6=a129_0x12b4eb;if(typeof Reflect===_0x29a5e6(0x1de)&&typeof Reflect[_0x29a5e6(0x1e1)]==='function')return Reflect['metadata'](_0x39c9c2,_0x3dbef0);};Object[a129_0x12b4eb(0x1ff)](exports,a129_0x12b4eb(0x215),{'value':!![]}),exports[a129_0x12b4eb(0x1f3)]=void 0x0;const not_found_error_1=require(a129_0x12b4eb(0x229)),typedi_1=require(a129_0x12b4eb(0x222)),constants_1=require('../../../constants'),queries_1=require(a129_0x12b4eb(0x21c)),flosum_naming_utils_1=require(a129_0x12b4eb(0x20e)),salesforce_query_service_1=require(a129_0x12b4eb(0x206)),salesforce_rest_service_1=require('./salesforce-rest.service');let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x1f23da,_0x9ed996){const _0x4abe77=a129_0x12b4eb;this['queryService']=_0x1f23da,this[_0x4abe77(0x219)]=_0x9ed996,this[_0x4abe77(0x210)]=0xc8;}['extractComponentMetadataFromRecord'](_0x3768da){const _0x5c4a95=a129_0x12b4eb,_0x5ae7ad=flosum_naming_utils_1[_0x5c4a95(0x1df)](_0x3768da,[_0x5c4a95(0x213),'Component_Type__c','CRC32__c',_0x5c4a95(0x22d),_0x5c4a95(0x22c),'Id']);return{'id':_0x5ae7ad['Id'],'name':_0x5ae7ad[_0x5c4a95(0x213)],'type':_0x5ae7ad[_0x5c4a95(0x20d)],'fileName':_0x5ae7ad[_0x5c4a95(0x22d)],'crc32':_0x5ae7ad[_0x5c4a95(0x224)],'version':+_0x5ae7ad[_0x5c4a95(0x22c)]};}async[a129_0x12b4eb(0x223)](_0x4b25dc){const _0x51cb2e=a129_0x12b4eb,[_0x2a945d]=await this[_0x51cb2e(0x1f0)][_0x51cb2e(0x216)](queries_1[_0x51cb2e(0x1ec)][_0x51cb2e(0x1ee)](_0x51cb2e(0x21e),_0x4b25dc));if(!_0x2a945d)throw new not_found_error_1[(_0x51cb2e(0x1e3))](_0x51cb2e(0x212)+_0x4b25dc+'\x22\x20not\x20found\x20in\x20flosum.');return _0x2a945d['Id'];}async[a129_0x12b4eb(0x1fd)](_0x326970){const _0xafd8d4=a129_0x12b4eb,[_0x847340]=await this[_0xafd8d4(0x1f0)][_0xafd8d4(0x216)](queries_1[_0xafd8d4(0x214)][_0xafd8d4(0x1ee)](_0xafd8d4(0x21e),_0x326970));if(!_0x847340)throw new not_found_error_1[(_0xafd8d4(0x1e3))](_0xafd8d4(0x20f)+_0x326970+_0xafd8d4(0x211));return _0x847340['Id'];}async['getComponentRecordTypes'](){const _0x23eab4=a129_0x12b4eb,_0x2167e2=await this[_0x23eab4(0x1f0)][_0x23eab4(0x216)](queries_1[_0x23eab4(0x21b)]);return _0x2167e2[_0x23eab4(0x1e0)](_0x2b1a45=>flosum_naming_utils_1[_0x23eab4(0x1df)](_0x2b1a45,['Id',_0x23eab4(0x208)]))[_0x23eab4(0x1e0)](_0x28bf12=>({'id':_0x28bf12['Id'],'name':_0x28bf12[_0x23eab4(0x208)]}));}async['fetchRepositoryComponentsByFilenames'](_0x263b0c,_0x16d135){const _0x459c9f=a129_0x12b4eb,_0x3308cd=[];while(_0x263b0c[_0x459c9f(0x1f4)]){const _0x2498d5=queries_1[_0x459c9f(0x1e9)][_0x459c9f(0x1ee)](_0x459c9f(0x21f),_0x263b0c[_0x459c9f(0x21a)](0x0,this[_0x459c9f(0x210)])[_0x459c9f(0x1e0)](_0x25f8ef=>'\x27'+_0x25f8ef+'\x27')['join'](','))[_0x459c9f(0x1ee)](_0x459c9f(0x1fc),_0x16d135),_0x30aff2=await this[_0x459c9f(0x1f0)][_0x459c9f(0x216)](_0x2498d5);_0x3308cd[_0x459c9f(0x220)](..._0x30aff2);}return _0x3308cd[_0x459c9f(0x1e0)](_0x1e5c48=>this[_0x459c9f(0x1f6)](_0x1e5c48));}async['fetchBranchComponentsByFilenames'](_0x364ea8,_0x5d5956){const _0x4df95e=a129_0x12b4eb,_0x4797b2=[];while(_0x364ea8[_0x4df95e(0x1f4)]){const _0x220564=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x4df95e(0x1ee)]('%fileNames%',_0x364ea8[_0x4df95e(0x21a)](0x0,this[_0x4df95e(0x210)])[_0x4df95e(0x1e0)](_0x2cfa06=>'\x27'+_0x2cfa06+'\x27')['join'](','))[_0x4df95e(0x1ee)](_0x4df95e(0x1e6),_0x5d5956),_0x56a6c9=await this[_0x4df95e(0x1f0)]['query'](_0x220564);_0x4797b2[_0x4df95e(0x220)](..._0x56a6c9);}return _0x4797b2[_0x4df95e(0x1e0)](_0x3124fa=>this[_0x4df95e(0x1f6)](_0x3124fa));}async[a129_0x12b4eb(0x1fe)](_0x509a31){const _0x3aec34=a129_0x12b4eb,_0x2d2a8d=[],_0x12f959=queries_1[_0x3aec34(0x207)][_0x3aec34(0x1ee)](_0x3aec34(0x1fc),_0x509a31),_0x2b6ffa=await this[_0x3aec34(0x1f0)][_0x3aec34(0x216)](_0x12f959);return _0x2d2a8d[_0x3aec34(0x220)](..._0x2b6ffa),_0x2d2a8d[_0x3aec34(0x1e0)](_0x3dd752=>this[_0x3aec34(0x1f6)](_0x3dd752));}async['fetchBranchComponents'](_0x8df4e9){const _0x5460f6=a129_0x12b4eb,_0x3485bf=[],_0x114d21=queries_1[_0x5460f6(0x204)][_0x5460f6(0x1ee)](_0x5460f6(0x1e6),_0x8df4e9),_0x37a706=await this[_0x5460f6(0x1f0)][_0x5460f6(0x216)](_0x114d21);return _0x3485bf[_0x5460f6(0x220)](..._0x37a706),_0x3485bf['map'](_0xb3415b=>this[_0x5460f6(0x1f6)](_0xb3415b));}async['fetchCommitManifestsByComponentIds'](_0x26dcd8){const _0x4d410a=a129_0x12b4eb,_0x5af825=[..._0x26dcd8],_0x33bb96=[];while(_0x5af825[_0x4d410a(0x1f4)]){const _0x38d3e=queries_1[_0x4d410a(0x22a)]['replace'](_0x4d410a(0x225),_0x5af825[_0x4d410a(0x21a)](0x0,this[_0x4d410a(0x210)])[_0x4d410a(0x1e0)](_0x5470b7=>'\x27'+_0x5470b7+'\x27')['join'](',')),_0x36d73a=await this[_0x4d410a(0x1f0)][_0x4d410a(0x216)](_0x38d3e);_0x33bb96[_0x4d410a(0x220)](..._0x36d73a[_0x4d410a(0x1e0)](_0x59b234=>_0x59b234['Id']));}return _0x33bb96;}async[a129_0x12b4eb(0x1fa)](_0x2db406,_0x2df658){const _0x395178=a129_0x12b4eb;return this['restService'][_0x395178(0x226)](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x395178(0x20b)]:_0x2df658,[constants_1['FLOSUM_NAMESPACE']+'Commit_Name__c']:_0x2db406[_0x395178(0x21d)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+_0x395178(0x228)]:_0x395178(0x20a),[constants_1['FLOSUM_GIT_NAMESPACE']+_0x395178(0x1ef)]:!![]});}};SalesforceGitSyncService=__decorate([typedi_1[a129_0x12b4eb(0x1e8)](),__metadata(a129_0x12b4eb(0x200),[salesforce_query_service_1[a129_0x12b4eb(0x1f7)],salesforce_rest_service_1[a129_0x12b4eb(0x1f2)]])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;function a129_0xb880(){const _0x1b40a9=['../../../core/errors/not-found.error','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','__decorate','Version__c','File_Name__c','object','extractFieldsFromRecord','map','metadata','function','NotFoundError','2954ooarpU','apply','%branchId%','toString','Service','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','150FUrrmd','5259flZBJj','GET_REPOSITORY_BY_NAME_QUERY','244xpeCPa','replace','Is_From_Agent__c','queryService','889578iPnVgW','SalesforceRestService','SalesforceGitSyncService','length','287505cNFEWW','extractComponentMetadataFromRecord','SalesforceQueryService','7jHLSSd','117dmHNqa','createCommit','12YQiwrk','%repositoryId%','getBranchIdByName','fetchRepositoryComponents','defineProperty','design:paramtypes','141256kLIcUM','__metadata','constructor','GET_BRANCH_COMPONENTS_QUERY','294125EeOfNF','./salesforce-query.service','GET_REPOSITORY_COMPONENTS_QUERY','Name','19987TqORmO','Completed','Repository__c','(((.+)+)+)+$','Component_Type__c','../utils/flosum-naming.utils','Branch\x20\x22','MAX_QUERY_ARRAY_ITEMS','\x22\x20not\x20found\x20in\x20flosum.','Repository\x20\x22','Component_Name__c','GET_BRANCH_BY_NAME_QUERY','__esModule','query','86clftXr','decorate','restService','splice','GET_COMPONENT_RECORD_TYPES_QUERY','../queries','substr','%name%','%fileNames%','push','search','typedi','getRepositoryIdByName','CRC32__c','%componentIds%','post','getOwnPropertyDescriptor','Status__c'];a129_0xb880=function(){return _0x1b40a9;};return a129_0xb880();}