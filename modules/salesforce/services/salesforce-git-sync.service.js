const a124_0x4d41c0=a124_0x4ba4;(function(_0x2ea922,_0x4fd816){const _0x3d9f3c=a124_0x4ba4,_0x110b3b=_0x2ea922();while(!![]){try{const _0x240886=parseInt(_0x3d9f3c(0x1d2))/0x1+-parseInt(_0x3d9f3c(0x1dd))/0x2+-parseInt(_0x3d9f3c(0x200))/0x3*(-parseInt(_0x3d9f3c(0x1f7))/0x4)+-parseInt(_0x3d9f3c(0x1f0))/0x5+parseInt(_0x3d9f3c(0x1d8))/0x6*(-parseInt(_0x3d9f3c(0x1fb))/0x7)+-parseInt(_0x3d9f3c(0x1ff))/0x8+parseInt(_0x3d9f3c(0x1df))/0x9;if(_0x240886===_0x4fd816)break;else _0x110b3b['push'](_0x110b3b['shift']());}catch(_0x387b3c){_0x110b3b['push'](_0x110b3b['shift']());}}}(a124_0x5dcc,0x675ad));const a124_0x41e419=function(){let _0x64282c=!![];return function(_0x4ee713,_0xa14d60){const _0x47bcd7=_0x64282c?function(){const _0x2ffbc5=a124_0x4ba4;if(_0xa14d60){const _0x4456d7=_0xa14d60[_0x2ffbc5(0x1e3)](_0x4ee713,arguments);return _0xa14d60=null,_0x4456d7;}}:function(){};return _0x64282c=![],_0x47bcd7;};}(),a124_0x3468a5=a124_0x41e419(this,function(){const _0x34a39f=a124_0x4ba4;return a124_0x3468a5['toString']()[_0x34a39f(0x1c9)](_0x34a39f(0x1f6))[_0x34a39f(0x1be)]()[_0x34a39f(0x1e0)](a124_0x3468a5)[_0x34a39f(0x1c9)]('(((.+)+)+)+$');});a124_0x3468a5();'use strict';function a124_0x5dcc(){const _0x4f0e30=['__esModule','%name%','typedi','CRC32__c','GET_COMPONENT_RECORD_TYPES_QUERY','decorate','Completed','FLOSUM_NAMESPACE','getRepositoryIdByName','fetchRepositoryComponents','2500020QSWAOI','substr','Branch\x20\x22','post','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','Component_Name__c','(((.+)+)+)+$','16XjQMtG','extractComponentMetadataFromRecord','function','createCommit','19978ZWymPz','%repositoryId%','./salesforce-query.service','File_Name__c','6178104yaHxhM','155145DndkpS','replace','Service','restService','toString','Name','length','__decorate','queryService','object','fetchRepositoryComponentsByFilenames','design:paramtypes','../../../core/errors/not-found.error','%fileNames%','Commit_Name__c','search','query','fetchBranchComponents','MAX_QUERY_ARRAY_ITEMS','%componentIds%','metadata','../utils/flosum-naming.utils','__metadata','GET_BRANCH_COMPONENTS_QUERY','495709YooaTi','SalesforceGitSyncService','join','GET_REPOSITORY_BY_NAME_QUERY','map','push','1308FeIgMQ','GET_REPOSITORY_COMPONENTS_QUERY','defineProperty','fetchBranchComponentsByFilenames','NotFoundError','763768taVwsF','getBranchIdByName','17973855GekKBE','constructor','splice','Version__c','apply','GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS','Component_Type__c'];a124_0x5dcc=function(){return _0x4f0e30;};return a124_0x5dcc();}var __decorate=this&&this[a124_0x4d41c0(0x1c1)]||function(_0x7d9e04,_0x273d27,_0x3596fa,_0x555273){const _0x3d6b7f=a124_0x4d41c0;var _0x1d9c1c=arguments['length'],_0x216147=_0x1d9c1c<0x3?_0x273d27:_0x555273===null?_0x555273=Object['getOwnPropertyDescriptor'](_0x273d27,_0x3596fa):_0x555273,_0x14d4de;if(typeof Reflect===_0x3d6b7f(0x1c3)&&typeof Reflect[_0x3d6b7f(0x1eb)]==='function')_0x216147=Reflect['decorate'](_0x7d9e04,_0x273d27,_0x3596fa,_0x555273);else{for(var _0x271c09=_0x7d9e04['length']-0x1;_0x271c09>=0x0;_0x271c09--)if(_0x14d4de=_0x7d9e04[_0x271c09])_0x216147=(_0x1d9c1c<0x3?_0x14d4de(_0x216147):_0x1d9c1c>0x3?_0x14d4de(_0x273d27,_0x3596fa,_0x216147):_0x14d4de(_0x273d27,_0x3596fa))||_0x216147;}return _0x1d9c1c>0x3&&_0x216147&&Object[_0x3d6b7f(0x1da)](_0x273d27,_0x3596fa,_0x216147),_0x216147;},__metadata=this&&this[a124_0x4d41c0(0x1d0)]||function(_0x58e432,_0x5e6a89){const _0x1a5359=a124_0x4d41c0;if(typeof Reflect===_0x1a5359(0x1c3)&&typeof Reflect[_0x1a5359(0x1ce)]===_0x1a5359(0x1f9))return Reflect[_0x1a5359(0x1ce)](_0x58e432,_0x5e6a89);};Object['defineProperty'](exports,a124_0x4d41c0(0x1e6),{'value':!![]}),exports[a124_0x4d41c0(0x1d3)]=void 0x0;const not_found_error_1=require(a124_0x4d41c0(0x1c6)),typedi_1=require(a124_0x4d41c0(0x1e8)),constants_1=require('../../../constants'),queries_1=require('../queries'),flosum_naming_utils_1=require(a124_0x4d41c0(0x1cf)),salesforce_query_service_1=require(a124_0x4d41c0(0x1fd)),salesforce_rest_service_1=require('./salesforce-rest.service');function a124_0x4ba4(_0x58cde0,_0x41f3ce){const _0x5050fb=a124_0x5dcc();return a124_0x4ba4=function(_0x3468a5,_0x41e419){_0x3468a5=_0x3468a5-0x1be;let _0x5dcc44=_0x5050fb[_0x3468a5];return _0x5dcc44;},a124_0x4ba4(_0x58cde0,_0x41f3ce);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x139212,_0x28bb79){const _0x2269bf=a124_0x4d41c0;this[_0x2269bf(0x1c2)]=_0x139212,this[_0x2269bf(0x203)]=_0x28bb79,this[_0x2269bf(0x1cc)]=0xc8;}['extractComponentMetadataFromRecord'](_0x1fad53){const _0xb64dc6=a124_0x4d41c0,_0x592ee5=flosum_naming_utils_1['extractFieldsFromRecord'](_0x1fad53,[_0xb64dc6(0x1f5),_0xb64dc6(0x1e5),_0xb64dc6(0x1e9),_0xb64dc6(0x1fe),_0xb64dc6(0x1e2),'Id']);return{'id':_0x592ee5['Id'],'name':_0x592ee5['Component_Name__c'],'type':_0x592ee5[_0xb64dc6(0x1e5)],'fileName':_0x592ee5[_0xb64dc6(0x1fe)],'crc32':_0x592ee5['CRC32__c'],'version':+_0x592ee5[_0xb64dc6(0x1e2)]};}async[a124_0x4d41c0(0x1ee)](_0x115cd4){const _0x1b43bd=a124_0x4d41c0,[_0x4bb5a7]=await this['queryService'][_0x1b43bd(0x1ca)](queries_1[_0x1b43bd(0x1d5)][_0x1b43bd(0x201)](_0x1b43bd(0x1e7),_0x115cd4));if(!_0x4bb5a7)throw new not_found_error_1['NotFoundError']('Repository\x20\x22'+_0x115cd4+'\x22\x20not\x20found\x20in\x20flosum.');return _0x4bb5a7['Id'];}async[a124_0x4d41c0(0x1de)](_0x3b3715){const _0x68a06b=a124_0x4d41c0,[_0x36730b]=await this[_0x68a06b(0x1c2)][_0x68a06b(0x1ca)](queries_1['GET_BRANCH_BY_NAME_QUERY'][_0x68a06b(0x201)](_0x68a06b(0x1e7),_0x3b3715));if(!_0x36730b)throw new not_found_error_1[(_0x68a06b(0x1dc))](_0x68a06b(0x1f2)+_0x3b3715+'\x22\x20not\x20found\x20in\x20flosum.');return _0x36730b['Id'];}async['getComponentRecordTypes'](){const _0x1a2eb8=a124_0x4d41c0,_0x8489a4=await this[_0x1a2eb8(0x1c2)]['query'](queries_1[_0x1a2eb8(0x1ea)]);return _0x8489a4['map'](_0x27b7ab=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x27b7ab,['Id','Name']))['map'](_0x450c7e=>({'id':_0x450c7e['Id'],'name':_0x450c7e[_0x1a2eb8(0x1bf)]}));}async[a124_0x4d41c0(0x1c4)](_0x3826c4,_0x3ee100){const _0x16962c=a124_0x4d41c0,_0x5edde6=[];while(_0x3826c4[_0x16962c(0x1c0)]){const _0x50a948=queries_1[_0x16962c(0x1f4)]['replace'](_0x16962c(0x1c7),_0x3826c4[_0x16962c(0x1e1)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])['map'](_0x5668ff=>'\x27'+_0x5668ff+'\x27')['join'](','))['replace'](_0x16962c(0x1fc),_0x3ee100),_0x5ecfd3=await this['queryService'][_0x16962c(0x1ca)](_0x50a948);_0x5edde6[_0x16962c(0x1d7)](..._0x5ecfd3);}return _0x5edde6[_0x16962c(0x1d6)](_0x1e37ed=>this[_0x16962c(0x1f8)](_0x1e37ed));}async[a124_0x4d41c0(0x1db)](_0x405564,_0xcafdb2){const _0x2614d1=a124_0x4d41c0,_0xc3b078=[];while(_0x405564[_0x2614d1(0x1c0)]){const _0x44a315=queries_1['GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY'][_0x2614d1(0x201)](_0x2614d1(0x1c7),_0x405564[_0x2614d1(0x1e1)](0x0,this[_0x2614d1(0x1cc)])['map'](_0xb2d7f4=>'\x27'+_0xb2d7f4+'\x27')[_0x2614d1(0x1d4)](','))[_0x2614d1(0x201)]('%branchId%',_0xcafdb2),_0x251c6d=await this[_0x2614d1(0x1c2)][_0x2614d1(0x1ca)](_0x44a315);_0xc3b078[_0x2614d1(0x1d7)](..._0x251c6d);}return _0xc3b078[_0x2614d1(0x1d6)](_0x1f25c7=>this[_0x2614d1(0x1f8)](_0x1f25c7));}async[a124_0x4d41c0(0x1ef)](_0x76a36f){const _0x223584=a124_0x4d41c0,_0x1232d8=[],_0x12a471=queries_1[_0x223584(0x1d9)]['replace']('%repositoryId%',_0x76a36f),_0x1cb686=await this[_0x223584(0x1c2)][_0x223584(0x1ca)](_0x12a471);return _0x1232d8[_0x223584(0x1d7)](..._0x1cb686),_0x1232d8[_0x223584(0x1d6)](_0x32b2f0=>this[_0x223584(0x1f8)](_0x32b2f0));}async[a124_0x4d41c0(0x1cb)](_0x26ed76){const _0x5dc16c=a124_0x4d41c0,_0x5963e8=[],_0x2500a4=queries_1[_0x5dc16c(0x1d1)][_0x5dc16c(0x201)]('%branchId%',_0x26ed76),_0x35eb08=await this[_0x5dc16c(0x1c2)][_0x5dc16c(0x1ca)](_0x2500a4);return _0x5963e8['push'](..._0x35eb08),_0x5963e8['map'](_0x5ad3fd=>this[_0x5dc16c(0x1f8)](_0x5ad3fd));}async['fetchCommitManifestsByComponentIds'](_0xe27d08){const _0x57a732=a124_0x4d41c0,_0x3a7e85=[..._0xe27d08],_0x27c7e1=[];while(_0x3a7e85[_0x57a732(0x1c0)]){const _0xed3bf0=queries_1[_0x57a732(0x1e4)][_0x57a732(0x201)](_0x57a732(0x1cd),_0x3a7e85[_0x57a732(0x1e1)](0x0,this[_0x57a732(0x1cc)])[_0x57a732(0x1d6)](_0x52cf75=>'\x27'+_0x52cf75+'\x27')[_0x57a732(0x1d4)](',')),_0x2ebe84=await this[_0x57a732(0x1c2)][_0x57a732(0x1ca)](_0xed3bf0);_0x27c7e1['push'](..._0x2ebe84[_0x57a732(0x1d6)](_0x5dcfaf=>_0x5dcfaf['Id']));}return _0x27c7e1;}async[a124_0x4d41c0(0x1fa)](_0x5902ea,_0x3a2b37){const _0x366295=a124_0x4d41c0;return this[_0x366295(0x203)][_0x366295(0x1f3)](constants_1['FLOSUM_COMMIT'],{[constants_1[_0x366295(0x1ed)]+'Repository__c']:_0x3a2b37,[constants_1['FLOSUM_NAMESPACE']+_0x366295(0x1c8)]:_0x5902ea[_0x366295(0x1f1)](0x0,0xff),[constants_1['FLOSUM_NAMESPACE']+'Status__c']:_0x366295(0x1ec)});}};SalesforceGitSyncService=__decorate([typedi_1[a124_0x4d41c0(0x202)](),__metadata(a124_0x4d41c0(0x1c5),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports[a124_0x4d41c0(0x1d3)]=SalesforceGitSyncService;