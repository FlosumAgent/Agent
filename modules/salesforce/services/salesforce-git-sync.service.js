const a123_0x4602f3=a123_0xe73d;(function(_0x29a6fc,_0xbf7192){const _0x46eacf=a123_0xe73d,_0x4314ec=_0x29a6fc();while(!![]){try{const _0x4be38b=parseInt(_0x46eacf(0x1c7))/0x1+-parseInt(_0x46eacf(0x1f1))/0x2*(-parseInt(_0x46eacf(0x1f9))/0x3)+parseInt(_0x46eacf(0x1d2))/0x4+parseInt(_0x46eacf(0x1dc))/0x5*(parseInt(_0x46eacf(0x1e5))/0x6)+parseInt(_0x46eacf(0x1c6))/0x7+-parseInt(_0x46eacf(0x1fe))/0x8+-parseInt(_0x46eacf(0x205))/0x9*(parseInt(_0x46eacf(0x1c0))/0xa);if(_0x4be38b===_0xbf7192)break;else _0x4314ec['push'](_0x4314ec['shift']());}catch(_0x27eb47){_0x4314ec['push'](_0x4314ec['shift']());}}}(a123_0x276b,0x7b367));const a123_0xa469be=function(){let _0xa6aabf=!![];return function(_0x1f3c6b,_0x35ef4e){const _0x4d3022=_0xa6aabf?function(){const _0x468811=a123_0xe73d;if(_0x35ef4e){const _0x13938a=_0x35ef4e[_0x468811(0x1e6)](_0x1f3c6b,arguments);return _0x35ef4e=null,_0x13938a;}}:function(){};return _0xa6aabf=![],_0x4d3022;};}(),a123_0x111af4=a123_0xa469be(this,function(){const _0x5990b3=a123_0xe73d;return a123_0x111af4[_0x5990b3(0x201)]()[_0x5990b3(0x1f0)]('(((.+)+)+)+$')[_0x5990b3(0x201)]()[_0x5990b3(0x1e1)](a123_0x111af4)[_0x5990b3(0x1f0)](_0x5990b3(0x1fc));});a123_0x111af4();'use strict';var __decorate=this&&this[a123_0x4602f3(0x1f6)]||function(_0x21bdb2,_0x590fa6,_0x25cea6,_0x3d801e){const _0x35aafc=a123_0x4602f3;var _0x11a05f=arguments[_0x35aafc(0x1be)],_0x17f9db=_0x11a05f<0x3?_0x590fa6:_0x3d801e===null?_0x3d801e=Object[_0x35aafc(0x1c3)](_0x590fa6,_0x25cea6):_0x3d801e,_0x53363c;if(typeof Reflect===_0x35aafc(0x1e4)&&typeof Reflect[_0x35aafc(0x1fa)]===_0x35aafc(0x1d6))_0x17f9db=Reflect['decorate'](_0x21bdb2,_0x590fa6,_0x25cea6,_0x3d801e);else{for(var _0x8f34fa=_0x21bdb2[_0x35aafc(0x1be)]-0x1;_0x8f34fa>=0x0;_0x8f34fa--)if(_0x53363c=_0x21bdb2[_0x8f34fa])_0x17f9db=(_0x11a05f<0x3?_0x53363c(_0x17f9db):_0x11a05f>0x3?_0x53363c(_0x590fa6,_0x25cea6,_0x17f9db):_0x53363c(_0x590fa6,_0x25cea6))||_0x17f9db;}return _0x11a05f>0x3&&_0x17f9db&&Object[_0x35aafc(0x1c4)](_0x590fa6,_0x25cea6,_0x17f9db),_0x17f9db;},__metadata=this&&this['__metadata']||function(_0x472a71,_0x3b1fdc){const _0x5545c9=a123_0x4602f3;if(typeof Reflect===_0x5545c9(0x1e4)&&typeof Reflect[_0x5545c9(0x1d0)]===_0x5545c9(0x1d6))return Reflect[_0x5545c9(0x1d0)](_0x472a71,_0x3b1fdc);};function a123_0x276b(){const _0x466717=['5504128XCFOms','529906PgODYu','Status__c','Name','GET_REPOSITORY_COMPONENTS_BY_FILENAMES_QUERY','MAX_QUERY_ARRAY_ITEMS','File_Name__c','Version__c','%repositoryId%','substr','metadata','NotFoundError','2256920isSlFj','fetchBranchComponentsByFilenames','../queries','design:paramtypes','function','replace','GET_BRANCH_COMPONENTS_BY_FILENAMES_QUERY','query','../../../constants','getComponentRecordTypes','5BICVcU','%branchId%','GET_BRANCH_COMPONENTS_QUERY','%componentIds%','../utils/flosum-naming.utils','constructor','getRepositoryIdByName','fetchCommitManifestsByComponentIds','object','3325542AqmSty','apply','CRC32__c','getBranchIdByName','./salesforce-rest.service','FLOSUM_NAMESPACE','Service','../../../core/errors/not-found.error','GET_BRANCH_BY_NAME_QUERY','extractComponentMetadataFromRecord','fetchRepositoryComponents','search','94eDZVhM','\x22\x20not\x20found\x20in\x20flosum.','join','Repository\x20\x22','%fileNames%','__decorate','queryService','extractFieldsFromRecord','3324CcoWuy','decorate','GET_REPOSITORY_COMPONENTS_QUERY','(((.+)+)+)+$','Component_Type__c','6394600ijeubx','fetchRepositoryComponentsByFilenames','map','toString','fetchBranchComponents','Component_Name__c','Repository__c','1197MbfLVj','length','splice','88930HaCVrf','push','SalesforceGitSyncService','getOwnPropertyDescriptor','defineProperty','%name%'];a123_0x276b=function(){return _0x466717;};return a123_0x276b();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a123_0x4602f3(0x1c2)]=void 0x0;const not_found_error_1=require(a123_0x4602f3(0x1ec)),typedi_1=require('typedi'),constants_1=require(a123_0x4602f3(0x1da)),queries_1=require(a123_0x4602f3(0x1d4)),flosum_naming_utils_1=require(a123_0x4602f3(0x1e0)),salesforce_query_service_1=require('./salesforce-query.service'),salesforce_rest_service_1=require(a123_0x4602f3(0x1e9));function a123_0xe73d(_0xb61d1e,_0x2820d2){const _0x3eab14=a123_0x276b();return a123_0xe73d=function(_0x111af4,_0xa469be){_0x111af4=_0x111af4-0x1be;let _0x276bf9=_0x3eab14[_0x111af4];return _0x276bf9;},a123_0xe73d(_0xb61d1e,_0x2820d2);}let SalesforceGitSyncService=class SalesforceGitSyncService{constructor(_0x8cc014,_0x498255){const _0x1e1bbb=a123_0x4602f3;this['queryService']=_0x8cc014,this['restService']=_0x498255,this[_0x1e1bbb(0x1cb)]=0xc8;}[a123_0x4602f3(0x1ee)](_0x477e27){const _0x494c6a=a123_0x4602f3,_0x50655d=flosum_naming_utils_1[_0x494c6a(0x1f8)](_0x477e27,['Component_Name__c',_0x494c6a(0x1fd),_0x494c6a(0x1e7),_0x494c6a(0x1cc),_0x494c6a(0x1cd),'Id']);return{'id':_0x50655d['Id'],'name':_0x50655d[_0x494c6a(0x203)],'type':_0x50655d[_0x494c6a(0x1fd)],'fileName':_0x50655d['File_Name__c'],'crc32':_0x50655d['CRC32__c'],'version':+_0x50655d[_0x494c6a(0x1cd)]};}async[a123_0x4602f3(0x1e2)](_0x230257){const _0x2ceaec=a123_0x4602f3,[_0x2fda9a]=await this['queryService'][_0x2ceaec(0x1d9)](queries_1['GET_REPOSITORY_BY_NAME_QUERY'][_0x2ceaec(0x1d7)](_0x2ceaec(0x1c5),_0x230257));if(!_0x2fda9a)throw new not_found_error_1['NotFoundError'](_0x2ceaec(0x1f4)+_0x230257+_0x2ceaec(0x1f2));return _0x2fda9a['Id'];}async[a123_0x4602f3(0x1e8)](_0x344bcc){const _0x1e6bf8=a123_0x4602f3,[_0x1b2315]=await this[_0x1e6bf8(0x1f7)][_0x1e6bf8(0x1d9)](queries_1[_0x1e6bf8(0x1ed)][_0x1e6bf8(0x1d7)](_0x1e6bf8(0x1c5),_0x344bcc));if(!_0x1b2315)throw new not_found_error_1[(_0x1e6bf8(0x1d1))]('Branch\x20\x22'+_0x344bcc+_0x1e6bf8(0x1f2));return _0x1b2315['Id'];}async[a123_0x4602f3(0x1db)](){const _0x3f7a2d=a123_0x4602f3,_0x2241ac=await this['queryService']['query'](queries_1['GET_COMPONENT_RECORD_TYPES_QUERY']);return _0x2241ac[_0x3f7a2d(0x200)](_0x1259c1=>flosum_naming_utils_1['extractFieldsFromRecord'](_0x1259c1,['Id','Name']))[_0x3f7a2d(0x200)](_0x31fef7=>({'id':_0x31fef7['Id'],'name':_0x31fef7[_0x3f7a2d(0x1c9)]}));}async[a123_0x4602f3(0x1ff)](_0x1ebfd7,_0x4ceb85){const _0x23daec=a123_0x4602f3,_0x24acdf=[];while(_0x1ebfd7[_0x23daec(0x1be)]){const _0x3f25bb=queries_1[_0x23daec(0x1ca)]['replace'](_0x23daec(0x1f5),_0x1ebfd7[_0x23daec(0x1bf)](0x0,this[_0x23daec(0x1cb)])['map'](_0x45259b=>'\x27'+_0x45259b+'\x27')['join'](','))[_0x23daec(0x1d7)](_0x23daec(0x1ce),_0x4ceb85),_0x1fc8b0=await this[_0x23daec(0x1f7)]['query'](_0x3f25bb);_0x24acdf[_0x23daec(0x1c1)](..._0x1fc8b0);}return _0x24acdf[_0x23daec(0x200)](_0x3376bf=>this[_0x23daec(0x1ee)](_0x3376bf));}async[a123_0x4602f3(0x1d3)](_0xfdc7fc,_0x4a92e8){const _0x492a16=a123_0x4602f3,_0x426e0a=[];while(_0xfdc7fc['length']){const _0x1c0296=queries_1[_0x492a16(0x1d8)]['replace']('%fileNames%',_0xfdc7fc[_0x492a16(0x1bf)](0x0,this[_0x492a16(0x1cb)])['map'](_0x7695d3=>'\x27'+_0x7695d3+'\x27')[_0x492a16(0x1f3)](','))['replace']('%branchId%',_0x4a92e8),_0x11863c=await this[_0x492a16(0x1f7)][_0x492a16(0x1d9)](_0x1c0296);_0x426e0a[_0x492a16(0x1c1)](..._0x11863c);}return _0x426e0a[_0x492a16(0x200)](_0x7c3497=>this['extractComponentMetadataFromRecord'](_0x7c3497));}async[a123_0x4602f3(0x1ef)](_0x4d41c8){const _0x24651e=a123_0x4602f3,_0x51688d=[],_0xffb577=queries_1[_0x24651e(0x1fb)]['replace']('%repositoryId%',_0x4d41c8),_0x55241c=await this[_0x24651e(0x1f7)][_0x24651e(0x1d9)](_0xffb577);return _0x51688d[_0x24651e(0x1c1)](..._0x55241c),_0x51688d[_0x24651e(0x200)](_0x28a2ed=>this[_0x24651e(0x1ee)](_0x28a2ed));}async[a123_0x4602f3(0x202)](_0xf6e1db){const _0x18b72d=a123_0x4602f3,_0x191d67=[],_0x1c7219=queries_1[_0x18b72d(0x1de)][_0x18b72d(0x1d7)](_0x18b72d(0x1dd),_0xf6e1db),_0x22ebe1=await this[_0x18b72d(0x1f7)][_0x18b72d(0x1d9)](_0x1c7219);return _0x191d67[_0x18b72d(0x1c1)](..._0x22ebe1),_0x191d67[_0x18b72d(0x200)](_0x4c8c92=>this[_0x18b72d(0x1ee)](_0x4c8c92));}async[a123_0x4602f3(0x1e3)](_0x2a1fc7){const _0x5cac31=a123_0x4602f3,_0x276193=[..._0x2a1fc7],_0x5057ff=[];while(_0x276193[_0x5cac31(0x1be)]){const _0x1a3e26=queries_1['GET_COMMIT_MANIFESTS_BY_COMPONENT_IDS'][_0x5cac31(0x1d7)](_0x5cac31(0x1df),_0x276193[_0x5cac31(0x1bf)](0x0,this['MAX_QUERY_ARRAY_ITEMS'])[_0x5cac31(0x200)](_0x2fd938=>'\x27'+_0x2fd938+'\x27')[_0x5cac31(0x1f3)](',')),_0x2743ce=await this[_0x5cac31(0x1f7)][_0x5cac31(0x1d9)](_0x1a3e26);_0x5057ff['push'](..._0x2743ce[_0x5cac31(0x200)](_0x1a5018=>_0x1a5018['Id']));}return _0x5057ff;}async['createCommit'](_0x4261b7,_0x3f1557){const _0x498d40=a123_0x4602f3;return this['restService']['post'](constants_1['FLOSUM_COMMIT'],{[constants_1['FLOSUM_NAMESPACE']+_0x498d40(0x204)]:_0x3f1557,[constants_1[_0x498d40(0x1ea)]+'Commit_Name__c']:_0x4261b7[_0x498d40(0x1cf)](0x0,0xff),[constants_1[_0x498d40(0x1ea)]+_0x498d40(0x1c8)]:'Completed'});}};SalesforceGitSyncService=__decorate([typedi_1[a123_0x4602f3(0x1eb)](),__metadata(a123_0x4602f3(0x1d5),[salesforce_query_service_1['SalesforceQueryService'],salesforce_rest_service_1['SalesforceRestService']])],SalesforceGitSyncService),exports['SalesforceGitSyncService']=SalesforceGitSyncService;