function a126_0x19ef(){const _0xfda00c=['5373152aWWHWI','inserted','apply','search','./salesforce-composite.service','componentsToDelete','SALESFORCE_MAX_GRAPH_NODES_PER_REQUEST','\x20requests\x20to\x20composite\x20api.','proceededComponentsMeta','map','../../shared/utils','proceedCommitsToRepository','SalesforceError','send','floor','author','4hhqXRg','72BRgolf','componentsToUpdate','./salesforce-git-sync.service','modified','Logger','proceedCommits','gitSync','../utils/composite.utils','SalesforceCommitsManager','update','(((.+)+)+)+$','extractComponentIdsFromGraphsResponse','push','__esModule','711827FNMJUb','getProceededComponentsMeta','../../../core','proceedCommitsToBranch','composite','createCommit','branchId','toString','7GHHtGJ','../../../constants','default','log','5913743jfWtJj','executeGraphs','length','318980YKjcJl','defineProperty','COMPONENTS_PER_CHUNK','proceedRequests','componentId','SalesforceComponentsManager','repositoryId','stringify','removed','options','9rSVTmp','typedi','1172055Qburrx','../errors/salesforce.error','logger','SalesforceGitSyncService','manifests','2709010OnbuCD','get','1003430JMRdDZ','./salesforce-components-manager.service','error','reference','recordTypes','find','toJSON','SalesforceCompositeService'];a126_0x19ef=function(){return _0xfda00c;};return a126_0x19ef();}const a126_0x3c9c5f=a126_0x7bde;function a126_0x7bde(_0x3b901b,_0x8adf91){const _0x1f7cbe=a126_0x19ef();return a126_0x7bde=function(_0x592d74,_0x24c20a){_0x592d74=_0x592d74-0x17e;let _0x19ef06=_0x1f7cbe[_0x592d74];return _0x19ef06;},a126_0x7bde(_0x3b901b,_0x8adf91);}(function(_0x521177,_0x2204d2){const _0x1e3b9d=a126_0x7bde,_0x2160c2=_0x521177();while(!![]){try{const _0x1c8a4b=parseInt(_0x1e3b9d(0x196))/0x1+-parseInt(_0x1e3b9d(0x1b8))/0x2+parseInt(_0x1e3b9d(0x1b1))/0x3*(-parseInt(_0x1e3b9d(0x187))/0x4)+-parseInt(_0x1e3b9d(0x1a5))/0x5*(-parseInt(_0x1e3b9d(0x188))/0x6)+parseInt(_0x1e3b9d(0x19e))/0x7*(parseInt(_0x1e3b9d(0x1c0))/0x8)+-parseInt(_0x1e3b9d(0x1af))/0x9*(parseInt(_0x1e3b9d(0x1b6))/0xa)+-parseInt(_0x1e3b9d(0x1a2))/0xb;if(_0x1c8a4b===_0x2204d2)break;else _0x2160c2['push'](_0x2160c2['shift']());}catch(_0xb0cf9c){_0x2160c2['push'](_0x2160c2['shift']());}}}(a126_0x19ef,0x6d66d));const a126_0x24c20a=function(){let _0x379653=!![];return function(_0x27777a,_0x49cf26){const _0x6fda59=_0x379653?function(){const _0x30875c=a126_0x7bde;if(_0x49cf26){const _0x28f808=_0x49cf26[_0x30875c(0x1c2)](_0x27777a,arguments);return _0x49cf26=null,_0x28f808;}}:function(){};return _0x379653=![],_0x6fda59;};}(),a126_0x592d74=a126_0x24c20a(this,function(){const _0x59b069=a126_0x7bde;return a126_0x592d74[_0x59b069(0x19d)]()['search'](_0x59b069(0x192))[_0x59b069(0x19d)]()['constructor'](a126_0x592d74)[_0x59b069(0x1c3)](_0x59b069(0x192));});a126_0x592d74();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x1d9d6e){const _0xdc4f0a=a126_0x7bde;return _0x1d9d6e&&_0x1d9d6e[_0xdc4f0a(0x195)]?_0x1d9d6e:{'default':_0x1d9d6e};};Object[a126_0x3c9c5f(0x1a6)](exports,a126_0x3c9c5f(0x195),{'value':!![]}),exports[a126_0x3c9c5f(0x190)]=void 0x0;const core_1=require(a126_0x3c9c5f(0x198)),typedi_1=__importDefault(require(a126_0x3c9c5f(0x1b0))),constants_1=require(a126_0x3c9c5f(0x19f)),utils_1=require(a126_0x3c9c5f(0x181)),salesforce_error_1=require(a126_0x3c9c5f(0x1b2)),composite_utils_1=require(a126_0x3c9c5f(0x18f)),salesforce_components_manager_service_1=require(a126_0x3c9c5f(0x1b9)),salesforce_composite_service_1=require(a126_0x3c9c5f(0x1c4)),salesforce_git_sync_service_1=require(a126_0x3c9c5f(0x18a));class SalesforceCommitsManager{constructor(_0x4bd78c){const _0x11af1a=a126_0x3c9c5f;this[_0x11af1a(0x1ae)]=_0x4bd78c,this[_0x11af1a(0x1a7)]=0x3,this['logger']=new core_1[(_0x11af1a(0x18c))](SalesforceCommitsManager['name']),this['sfLogger']=this[_0x11af1a(0x1ae)][_0x11af1a(0x1b3)],this[_0x11af1a(0x19a)]=typedi_1['default'][_0x11af1a(0x1b7)](salesforce_composite_service_1[_0x11af1a(0x1bf)]),this[_0x11af1a(0x18e)]=typedi_1[_0x11af1a(0x1a0)][_0x11af1a(0x1b7)](salesforce_git_sync_service_1[_0x11af1a(0x1b4)]),this[_0x11af1a(0x17f)]=[];}async['proceedRequests'](_0x4b989d,_0x5d73c2=![]){const _0xb603ad=a126_0x3c9c5f,_0xfeb895=(this[_0xb603ad(0x1a7)]+ +_0x5d73c2)*0x3,_0xf6f2fb=utils_1['chunkArray'](_0x4b989d,_0xfeb895);try{while(_0xf6f2fb[_0xb603ad(0x1a4)]){const _0x4c76f0=_0xf6f2fb['splice'](0x0,Math[_0xb603ad(0x185)](constants_1[_0xb603ad(0x1c6)]/_0xfeb895));await this['sfLogger'][_0xb603ad(0x1a1)]('[INFO]\x20Sending\x20'+_0x4c76f0[_0xb603ad(0x1a4)]*_0xfeb895+_0xb603ad(0x17e))[_0xb603ad(0x184)]();const _0x4324b2=_0x4c76f0[_0xb603ad(0x180)]((_0x509ae9,_0x1d1362)=>({'graphId':'graph'+_0x1d1362,'compositeRequest':_0x509ae9})),_0x407281=await this[_0xb603ad(0x19a)][_0xb603ad(0x1a3)](_0x4324b2);if(_0x5d73c2){const _0x5f06c7=composite_utils_1[_0xb603ad(0x193)](_0x407281);for(const {id:_0x1e2d35,ref:_0x37ea82}of _0x5f06c7){const _0x298927=this[_0xb603ad(0x17f)][_0xb603ad(0x1bd)](_0x3a558d=>_0x3a558d[_0xb603ad(0x1bb)]===_0x37ea82);_0x298927&&(_0x298927[_0xb603ad(0x1a9)]=_0x1e2d35);}}}}catch(_0x396197){this[_0xb603ad(0x1b3)][_0xb603ad(0x1ba)](_0x396197 instanceof salesforce_error_1[_0xb603ad(0x183)]?JSON[_0xb603ad(0x1ac)](_0x396197[_0xb603ad(0x1be)](),null,0x2):_0x396197),this['sfLogger'][_0xb603ad(0x1a1)](_0x396197 instanceof salesforce_error_1[_0xb603ad(0x183)]?JSON[_0xb603ad(0x1ac)](_0x396197['toJSON'](),null,0x2):_0x396197[_0xb603ad(0x19d)]());throw _0x396197;}}async[a126_0x3c9c5f(0x182)](_0x5cc0f3){const _0x24c307=a126_0x3c9c5f;for(const _0x1a7f23 of _0x5cc0f3){if(!_0x1a7f23[_0x24c307(0x1c1)][_0x24c307(0x1a4)]&&!_0x1a7f23[_0x24c307(0x18b)][_0x24c307(0x1a4)]&&!_0x1a7f23['removed']['length'])continue;let _0x5d327d='';(_0x1a7f23[_0x24c307(0x18b)][_0x24c307(0x1a4)]||_0x1a7f23[_0x24c307(0x1c1)][_0x24c307(0x1a4)])&&(_0x5d327d=await this[_0x24c307(0x18e)][_0x24c307(0x19b)](_0x1a7f23['message'],this[_0x24c307(0x1ae)][_0x24c307(0x1ab)]));const _0x27f110=[],_0x15a417=[],_0x27ba20=new salesforce_components_manager_service_1[(_0x24c307(0x1aa))](this[_0x24c307(0x1ae)][_0x24c307(0x1ab)],this['options'][_0x24c307(0x19c)],_0x1a7f23[_0x24c307(0x186)],this[_0x24c307(0x1ae)][_0x24c307(0x1bc)],this[_0x24c307(0x17f)]);_0x27f110[_0x24c307(0x194)](...await _0x27ba20['insert'](_0x1a7f23[_0x24c307(0x1c1)],_0x5d327d)),_0x27f110[_0x24c307(0x194)](...await _0x27ba20[_0x24c307(0x191)](_0x1a7f23['modified'],_0x5d327d)),_0x15a417[_0x24c307(0x194)](await _0x27ba20['delete'](_0x1a7f23[_0x24c307(0x1ad)],!![])),this[_0x24c307(0x17f)]=_0x27ba20[_0x24c307(0x197)](),await this['proceedRequests'](_0x27f110,!![]);for(const _0x38befc of _0x15a417){_0x38befc[_0x24c307(0x1b5)][_0x24c307(0x1a4)]&&await this[_0x24c307(0x1a8)](_0x38befc[_0x24c307(0x1b5)],!![]),_0x38befc[_0x24c307(0x189)]['length']&&await this['proceedRequests'](_0x38befc['componentsToUpdate'],!![]),_0x38befc[_0x24c307(0x1c5)][_0x24c307(0x1a4)]&&await this['proceedRequests'](_0x38befc[_0x24c307(0x1c5)],!![]);}this[_0x24c307(0x1b3)][_0x24c307(0x1a1)]('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(repository)',_0x27f110[_0x24c307(0x1a4)]);}}async[a126_0x3c9c5f(0x199)](_0x22647a){const _0x50606a=a126_0x3c9c5f,_0x1fd459=[],_0x59b097=[];for(const _0xde47c9 of _0x22647a){if(!_0xde47c9[_0x50606a(0x1c1)][_0x50606a(0x1a4)]&&!_0xde47c9[_0x50606a(0x18b)][_0x50606a(0x1a4)]&&!_0xde47c9['removed'][_0x50606a(0x1a4)])continue;const _0x2589db=new salesforce_components_manager_service_1[(_0x50606a(0x1aa))](this[_0x50606a(0x1ae)][_0x50606a(0x1ab)],this[_0x50606a(0x1ae)]['branchId'],_0xde47c9[_0x50606a(0x186)],this[_0x50606a(0x1ae)][_0x50606a(0x1bc)],[]);_0x1fd459[_0x50606a(0x194)](...await _0x2589db['insert'](_0xde47c9['inserted'])),_0x1fd459[_0x50606a(0x194)](...await _0x2589db[_0x50606a(0x191)](_0xde47c9['modified'])),_0x59b097[_0x50606a(0x194)](await _0x2589db['delete'](_0xde47c9[_0x50606a(0x1ad)]));}this[_0x50606a(0x1b3)][_0x50606a(0x1a1)]('have\x20to\x20proceed\x20%d\x20composite\x20requests\x20(branch)',_0x1fd459[_0x50606a(0x1a4)]),await this[_0x50606a(0x1a8)](_0x1fd459);const _0x530679=_0x59b097['reduce']((_0x578dcf,_0x5d37f0)=>({'manifests':[..._0x578dcf[_0x50606a(0x1b5)],..._0x5d37f0[_0x50606a(0x1b5)]],'componentsToDelete':[..._0x578dcf['componentsToDelete'],..._0x5d37f0[_0x50606a(0x1c5)]],'componentsToUpdate':[..._0x578dcf['componentsToUpdate'],..._0x5d37f0[_0x50606a(0x189)]]}),{'manifests':[],'componentsToDelete':[],'componentsToUpdate':[]});_0x530679['manifests'][_0x50606a(0x1a4)]&&await this[_0x50606a(0x1a8)](_0x530679[_0x50606a(0x1b5)],!![]),_0x530679[_0x50606a(0x189)][_0x50606a(0x1a4)]&&await this['proceedRequests'](_0x530679[_0x50606a(0x189)],!![]),_0x530679[_0x50606a(0x1c5)]['length']&&await this[_0x50606a(0x1a8)](_0x530679[_0x50606a(0x1c5)],!![]);}async[a126_0x3c9c5f(0x18d)](_0x5d0bab){const _0x5b475e=a126_0x3c9c5f;this[_0x5b475e(0x1ae)][_0x5b475e(0x19c)]?await this[_0x5b475e(0x199)](_0x5d0bab):await this[_0x5b475e(0x182)](_0x5d0bab);}}exports[a126_0x3c9c5f(0x190)]=SalesforceCommitsManager;