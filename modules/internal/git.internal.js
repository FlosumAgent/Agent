const a76_0x4a0310=a76_0x58c7;(function(_0x488f5b,_0x4b78eb){const _0x39d001=a76_0x58c7,_0x445262=_0x488f5b();while(!![]){try{const _0x542f51=parseInt(_0x39d001(0x1ba))/0x1*(-parseInt(_0x39d001(0x194))/0x2)+parseInt(_0x39d001(0x1ca))/0x3*(-parseInt(_0x39d001(0x1b8))/0x4)+-parseInt(_0x39d001(0x1bb))/0x5+parseInt(_0x39d001(0x1dc))/0x6+parseInt(_0x39d001(0x1c0))/0x7*(-parseInt(_0x39d001(0x1ce))/0x8)+-parseInt(_0x39d001(0x1ab))/0x9+parseInt(_0x39d001(0x1a9))/0xa;if(_0x542f51===_0x4b78eb)break;else _0x445262['push'](_0x445262['shift']());}catch(_0x570374){_0x445262['push'](_0x445262['shift']());}}}(a76_0x5d79,0xaeae3));const a76_0x43ee1e=function(){let _0x4b4d93=!![];return function(_0x3ff367,_0x306bbf){const _0x43048b=_0x4b4d93?function(){const _0x2e7c0f=a76_0x58c7;if(_0x306bbf){const _0x17cb3f=_0x306bbf[_0x2e7c0f(0x1cc)](_0x3ff367,arguments);return _0x306bbf=null,_0x17cb3f;}}:function(){};return _0x4b4d93=![],_0x43048b;};}(),a76_0x35a475=a76_0x43ee1e(this,function(){const _0x556b4f=a76_0x58c7;return a76_0x35a475['toString']()['search'](_0x556b4f(0x19e))[_0x556b4f(0x1d0)]()[_0x556b4f(0x1c7)](a76_0x35a475)[_0x556b4f(0x1d5)](_0x556b4f(0x19e));});a76_0x35a475();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x55a7ae){return _0x55a7ae&&_0x55a7ae['__esModule']?_0x55a7ae:{'default':_0x55a7ae};};Object[a76_0x4a0310(0x1c6)](exports,'__esModule',{'value':!![]}),exports['Git']=void 0x0;function a76_0x5d79(){const _0x1344ac=['DEFAULT_CLONE_PATH','makeDir','exec','_repoPath','baseDir','removeDir','Logger','get','120940YCEPIt','flosum-agent','3WOQBqs','6439110olgaBU','typedi','\x20&&\x20git\x20remote\x20add\x20origin\x20','Shell','getRepositoryBranches','9053779eCNrau','parseGitError','.temp','match','push','add','defineProperty','constructor','set\x20credentials\x20%s\x20(%s)','cd\x20','87kmLfPz','://','apply','info','8hIbHgq','\x20--single-branch\x20','toString','AuthSettingsService','gitUrl','\x20&&\x20git\x20push\x20origin\x20','\x20--quiet','search','setCredentials','\x20&&\x20git\x20status','../../core','sha','./shell.internal','commit\x20message\x20\x22%s\x22','344094NDKEQf','git\x20ls-remote\x20','status','getProtocol','749296sjJSWL','\x20&&\x20git\x20checkout\x20--orphan\x20','createEmptyBranch','BranchDto','test','\x20&&\x20git\x20commit\x20-m\x20\x22','logger','catch','init\x20repository','name','(((.+)+)+)+$','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s','replace','../branches/dto/branch.dto','\x20&&\x20git\x20add\x20','default','git','refs/heads/','agent@flosum.com','../shared/utils','./fs.internal','66194480sreTkW','split','12413952GpFKFa','join','filter','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','push\x20changes\x20to\x20%s'];a76_0x5d79=function(){return _0x1344ac;};return a76_0x5d79();}function a76_0x58c7(_0x4a60d4,_0x1c94ab){const _0x436d5a=a76_0x5d79();return a76_0x58c7=function(_0x35a475,_0x43ee1e){_0x35a475=_0x35a475-0x192;let _0x5d7938=_0x436d5a[_0x35a475];return _0x5d7938;},a76_0x58c7(_0x4a60d4,_0x1c94ab);}const core_1=require(a76_0x4a0310(0x1d8)),path_1=__importDefault(require('path')),typedi_1=__importDefault(require(a76_0x4a0310(0x1bc))),branch_dto_1=require(a76_0x4a0310(0x1a1)),auth_settings_service_1=require('../shared/services/auth-settings.service'),utils_1=require(a76_0x4a0310(0x1a7)),fs_internal_1=require(a76_0x4a0310(0x1a8)),internal_utils_1=require('./internal.utils'),shell_internal_1=require(a76_0x4a0310(0x1da));class Git{constructor(_0x16d568){const _0x40f3bb=a76_0x4a0310;this[_0x40f3bb(0x1b3)]=_0x16d568;}get['baseDir'](){const _0x481853=a76_0x4a0310;return this[_0x481853(0x1b3)];}async[a76_0x4a0310(0x1d6)](_0x2cac60,_0x1f1819){const _0xe095f6=a76_0x4a0310;Git['logger'][_0xe095f6(0x1cd)](_0xe095f6(0x1c8),_0x2cac60,_0x1f1819),await shell_internal_1[_0xe095f6(0x1be)][_0xe095f6(0x1b2)](_0xe095f6(0x1c9)+this[_0xe095f6(0x1b3)]+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x2cac60+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x1f1819+'\x22')[_0xe095f6(0x19b)](internal_utils_1[_0xe095f6(0x1c1)]);}async[a76_0x4a0310(0x1c5)](..._0x42e57c){const _0x2ce29c=a76_0x4a0310;await shell_internal_1['Shell'][_0x2ce29c(0x1b2)](_0x2ce29c(0x1c9)+this[_0x2ce29c(0x1b3)]+_0x2ce29c(0x1a2)+_0x42e57c[_0x2ce29c(0x1ac)]('\x20'))['catch'](internal_utils_1[_0x2ce29c(0x1c1)]);}async[a76_0x4a0310(0x192)](){const _0x182c76=a76_0x4a0310;return shell_internal_1[_0x182c76(0x1be)][_0x182c76(0x1b2)]('cd\x20'+this[_0x182c76(0x1b3)]+_0x182c76(0x1d7))['catch'](internal_utils_1[_0x182c76(0x1c1)]);}async['commit'](_0x4229af){const _0x531188=a76_0x4a0310;Git['logger']['info'](_0x531188(0x1db),_0x4229af),await shell_internal_1['Shell'][_0x531188(0x1b2)](_0x531188(0x1c9)+this[_0x531188(0x1b3)]+_0x531188(0x199)+_0x4229af+'\x22')['catch'](internal_utils_1['parseGitError']);}async[a76_0x4a0310(0x1c4)](_0x2d208a){const _0x402d01=a76_0x4a0310;Git[_0x402d01(0x19a)][_0x402d01(0x1cd)](_0x402d01(0x1af),_0x2d208a),await shell_internal_1['Shell'][_0x402d01(0x1b2)](_0x402d01(0x1c9)+this['_repoPath']+_0x402d01(0x1d3)+_0x2d208a+_0x402d01(0x1d4))[_0x402d01(0x19b)](internal_utils_1[_0x402d01(0x1c1)]);}static async['clone'](_0x8b2cce,_0x1c6604,_0x2643b1){const _0x1bd97e=a76_0x4a0310,_0x429f7e=path_1[_0x1bd97e(0x1a3)][_0x1bd97e(0x1ac)](this['DEFAULT_CLONE_PATH'],_0x1c6604),_0x18149b=new Git(_0x429f7e);return Git[_0x1bd97e(0x19a)][_0x1bd97e(0x1cd)]('clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s',_0x2643b1,_0x8b2cce,_0x429f7e),await fs_internal_1['FS'][_0x1bd97e(0x1b5)](_0x429f7e),await shell_internal_1[_0x1bd97e(0x1be)][_0x1bd97e(0x1b2)]('git\x20clone\x20-b\x20'+_0x2643b1+_0x1bd97e(0x1cf)+_0x8b2cce+'\x20'+_0x429f7e)[_0x1bd97e(0x19b)](()=>void 0x0),_0x18149b;}static async[a76_0x4a0310(0x1bf)](_0x3e8143){const _0x4592b6=a76_0x4a0310,_0xb4810a=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x295ef9}=typedi_1[_0x4592b6(0x1a3)][_0x4592b6(0x1b7)](auth_settings_service_1['AuthSettingsService']),_0x226d01=_0x3e8143[_0x4592b6(0x1d2)][_0x4592b6(0x1a0)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x4592b6(0x193)])(_0x3e8143[_0x4592b6(0x1d2)])+_0x4592b6(0x1cb)+_0x295ef9+'@'),_0x23ea2b=await shell_internal_1[_0x4592b6(0x1be)]['exec'](_0x4592b6(0x1dd)+_0x226d01),_0xc1141c=_0x23ea2b[_0x4592b6(0x1aa)]('\x0a')[_0x4592b6(0x1ad)](_0x1e1c83=>_0xb4810a[_0x4592b6(0x198)](_0x1e1c83))['map'](_0x56380b=>{const _0x1f71be=_0x4592b6,[,_0x4542fd,_0xcf1dab]=_0x56380b[_0x1f71be(0x1c3)](_0xb4810a),_0x1bd744=new branch_dto_1[(_0x1f71be(0x197))]();return _0x1bd744[_0x1f71be(0x1d9)]=_0x4542fd,_0x1bd744[_0x1f71be(0x19d)]=_0xcf1dab[_0x1f71be(0x1a0)](_0x1f71be(0x1a5),''),_0x1bd744;});return _0xc1141c;}static async[a76_0x4a0310(0x196)](_0x13e97c,_0x4738c7,_0x1a4c3c=a76_0x4a0310(0x19c)){const _0x5e8d1c=a76_0x4a0310,{gitCredentials:_0x2133e2}=typedi_1[_0x5e8d1c(0x1a3)][_0x5e8d1c(0x1b7)](auth_settings_service_1[_0x5e8d1c(0x1d1)]),_0x1b0be0=_0x13e97c[_0x5e8d1c(0x1d2)]['replace'](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1['getProtocol'])(_0x13e97c[_0x5e8d1c(0x1d2)])+_0x5e8d1c(0x1cb)+_0x2133e2+'@'),_0x4c8b1a=path_1['default'][_0x5e8d1c(0x1ac)](this[_0x5e8d1c(0x1b0)],_0x13e97c['name']);Git[_0x5e8d1c(0x19a)][_0x5e8d1c(0x1cd)](_0x5e8d1c(0x19f),_0x13e97c['name'],_0x4738c7,_0x4c8b1a,_0x1b0be0),await fs_internal_1['FS'][_0x5e8d1c(0x1b5)](_0x4c8b1a),await fs_internal_1['FS'][_0x5e8d1c(0x1b1)](_0x4c8b1a);const _0x1e0037=new Git(_0x4c8b1a);await shell_internal_1[_0x5e8d1c(0x1be)][_0x5e8d1c(0x1b2)](_0x5e8d1c(0x1c9)+_0x1e0037[_0x5e8d1c(0x1b4)]+'\x20&&\x20git\x20init')[_0x5e8d1c(0x19b)](internal_utils_1[_0x5e8d1c(0x1c1)]),await shell_internal_1[_0x5e8d1c(0x1be)][_0x5e8d1c(0x1b2)](_0x5e8d1c(0x1c9)+_0x1e0037[_0x5e8d1c(0x1b4)]+_0x5e8d1c(0x1bd)+_0x1b0be0)[_0x5e8d1c(0x19b)](internal_utils_1[_0x5e8d1c(0x1c1)]),await _0x1e0037[_0x5e8d1c(0x1d6)](_0x5e8d1c(0x1b9),_0x5e8d1c(0x1a6)),await shell_internal_1[_0x5e8d1c(0x1be)]['exec']('cd\x20'+_0x1e0037[_0x5e8d1c(0x1b4)]+_0x5e8d1c(0x195)+_0x4738c7)[_0x5e8d1c(0x19b)](internal_utils_1[_0x5e8d1c(0x1c1)]),await shell_internal_1[_0x5e8d1c(0x1be)]['exec'](_0x5e8d1c(0x1c9)+_0x1e0037[_0x5e8d1c(0x1b4)]+_0x5e8d1c(0x199)+_0x1a4c3c+'\x22\x20--allow-empty')[_0x5e8d1c(0x19b)](internal_utils_1[_0x5e8d1c(0x1c1)]),await _0x1e0037['push'](_0x4738c7),Git[_0x5e8d1c(0x19a)][_0x5e8d1c(0x1cd)](_0x5e8d1c(0x1ae)),await fs_internal_1['FS'][_0x5e8d1c(0x1b5)](_0x1e0037[_0x5e8d1c(0x1b4)]);}}exports['Git']=Git,Git['DEFAULT_CLONE_PATH']=path_1[a76_0x4a0310(0x1a3)][a76_0x4a0310(0x1ac)](process['cwd'](),a76_0x4a0310(0x1c2),a76_0x4a0310(0x1a4)),Git[a76_0x4a0310(0x19a)]=new core_1[(a76_0x4a0310(0x1b6))](Git[a76_0x4a0310(0x19d)]);