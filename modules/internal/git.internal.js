const a76_0x52cd56=a76_0x530d;(function(_0x1025f8,_0x3f3979){const _0x536a12=a76_0x530d,_0x28afc2=_0x1025f8();while(!![]){try{const _0x547391=-parseInt(_0x536a12(0x95))/0x1+parseInt(_0x536a12(0xc0))/0x2*(parseInt(_0x536a12(0xd4))/0x3)+-parseInt(_0x536a12(0xa7))/0x4+parseInt(_0x536a12(0x8e))/0x5+parseInt(_0x536a12(0x94))/0x6*(parseInt(_0x536a12(0x93))/0x7)+parseInt(_0x536a12(0xd5))/0x8*(-parseInt(_0x536a12(0xa3))/0x9)+parseInt(_0x536a12(0xa8))/0xa;if(_0x547391===_0x3f3979)break;else _0x28afc2['push'](_0x28afc2['shift']());}catch(_0x20c517){_0x28afc2['push'](_0x28afc2['shift']());}}}(a76_0xcb31,0x3946f));const a76_0x11c8d7=function(){let _0x12554e=!![];return function(_0x51051,_0x3bd0ae){const _0x17ed5b=_0x12554e?function(){if(_0x3bd0ae){const _0x19e717=_0x3bd0ae['apply'](_0x51051,arguments);return _0x3bd0ae=null,_0x19e717;}}:function(){};return _0x12554e=![],_0x17ed5b;};}(),a76_0x15f4b8=a76_0x11c8d7(this,function(){const _0x334e6f=a76_0x530d;return a76_0x15f4b8['toString']()[_0x334e6f(0xa2)]('(((.+)+)+)+$')[_0x334e6f(0xc3)]()[_0x334e6f(0x8d)](a76_0x15f4b8)[_0x334e6f(0xa2)](_0x334e6f(0x9a));});a76_0x15f4b8();function a76_0xcb31(){const _0x4d02e7=['AuthSettingsService','clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s','\x20&&\x20git\x20checkout\x20--orphan\x20','(((.+)+)+)+$','get','commit\x20message\x20\x22%s\x22','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s','./internal.utils','test','getProtocol','gitUrl','search','9LdBtAn','.temp','refs/heads/','split','741488oEWwuR','7685420RVXHVu','makeDir','set\x20credentials\x20%s\x20(%s)','add','init\x20repository','sha','replace','\x20&&\x20git\x20commit\x20-m\x20\x22','push\x20changes\x20to\x20%s','BranchDto','\x20&&\x20git\x20add\x20','__importDefault','cwd','status','logger','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','parseGitError','path','git','_repoPath','Git','catch','defineProperty','setCredentials','200404nSQuwv','baseDir','default','toString','info','map','join','name','clone','git\x20ls-remote\x20','\x20&&\x20git\x20init','agent@flosum.com','Logger','typedi','exec','getRepositoryBranches','\x20--single-branch\x20','__esModule','://','../shared/services/auth-settings.service','9JOgDQk','2814184ckSykR','removeDir','Shell','cd\x20','git\x20clone\x20-b\x20','constructor','174100gAqasx','\x20--quiet','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','filter','\x20&&\x20git\x20status','182987SvFjaE','30LMrJdX','462921Aooukh','DEFAULT_CLONE_PATH'];a76_0xcb31=function(){return _0x4d02e7;};return a76_0xcb31();}function a76_0x530d(_0x414b1b,_0x18595e){const _0x371d23=a76_0xcb31();return a76_0x530d=function(_0x15f4b8,_0x11c8d7){_0x15f4b8=_0x15f4b8-0x8a;let _0xcb3159=_0x371d23[_0x15f4b8];return _0xcb3159;},a76_0x530d(_0x414b1b,_0x18595e);}'use strict';var __importDefault=this&&this[a76_0x52cd56(0xb3)]||function(_0x1621fd){const _0x2bfde3=a76_0x52cd56;return _0x1621fd&&_0x1621fd[_0x2bfde3(0xd1)]?_0x1621fd:{'default':_0x1621fd};};Object[a76_0x52cd56(0xbe)](exports,a76_0x52cd56(0xd1),{'value':!![]}),exports[a76_0x52cd56(0xbc)]=void 0x0;const core_1=require('../../core'),path_1=__importDefault(require(a76_0x52cd56(0xb9))),typedi_1=__importDefault(require(a76_0x52cd56(0xcd))),branch_dto_1=require('../branches/dto/branch.dto'),auth_settings_service_1=require(a76_0x52cd56(0xd3)),utils_1=require('../shared/utils'),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a76_0x52cd56(0x9e)),shell_internal_1=require('./shell.internal');class Git{constructor(_0x18c805){this['_repoPath']=_0x18c805;}get[a76_0x52cd56(0xc1)](){const _0x248469=a76_0x52cd56;return this[_0x248469(0xbb)];}async['setCredentials'](_0xf6566a,_0x36f49f){const _0x2793a9=a76_0x52cd56;Git[_0x2793a9(0xb6)]['info'](_0x2793a9(0xaa),_0xf6566a,_0x36f49f),await shell_internal_1[_0x2793a9(0x8a)][_0x2793a9(0xce)]('cd\x20'+this[_0x2793a9(0xbb)]+_0x2793a9(0x90)+_0xf6566a+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x36f49f+'\x22')[_0x2793a9(0xbd)](internal_utils_1[_0x2793a9(0xb8)]);}async[a76_0x52cd56(0xab)](..._0x151dcc){const _0x1f3bd3=a76_0x52cd56;await shell_internal_1[_0x1f3bd3(0x8a)]['exec'](_0x1f3bd3(0x8b)+this[_0x1f3bd3(0xbb)]+_0x1f3bd3(0xb2)+_0x151dcc['join']('\x20'))[_0x1f3bd3(0xbd)](internal_utils_1['parseGitError']);}async[a76_0x52cd56(0xb5)](){const _0x4eac8d=a76_0x52cd56;return shell_internal_1[_0x4eac8d(0x8a)]['exec'](_0x4eac8d(0x8b)+this[_0x4eac8d(0xbb)]+_0x4eac8d(0x92))[_0x4eac8d(0xbd)](internal_utils_1[_0x4eac8d(0xb8)]);}async['commit'](_0x146e69){const _0x375692=a76_0x52cd56;Git['logger'][_0x375692(0xc4)](_0x375692(0x9c),_0x146e69),await shell_internal_1[_0x375692(0x8a)][_0x375692(0xce)]('cd\x20'+this['_repoPath']+_0x375692(0xaf)+_0x146e69+'\x22')['catch'](internal_utils_1[_0x375692(0xb8)]);}async['push'](_0x5d30d5){const _0x438390=a76_0x52cd56;Git['logger'][_0x438390(0xc4)](_0x438390(0xb0),_0x5d30d5),await shell_internal_1[_0x438390(0x8a)][_0x438390(0xce)](_0x438390(0x8b)+this['_repoPath']+'\x20&&\x20git\x20push\x20origin\x20'+_0x5d30d5+_0x438390(0x8f))[_0x438390(0xbd)](internal_utils_1[_0x438390(0xb8)]);}static async[a76_0x52cd56(0xc8)](_0x47d842,_0x26bf23,_0x17c662){const _0xf2315a=a76_0x52cd56,_0x5bfe60=path_1[_0xf2315a(0xc2)][_0xf2315a(0xc6)](this[_0xf2315a(0x96)],_0x26bf23),_0x5c0df8=new Git(_0x5bfe60);return Git[_0xf2315a(0xb6)][_0xf2315a(0xc4)](_0xf2315a(0x98),_0x17c662,_0x47d842,_0x5bfe60),await fs_internal_1['FS'][_0xf2315a(0xd6)](_0x5bfe60),await shell_internal_1[_0xf2315a(0x8a)][_0xf2315a(0xce)](_0xf2315a(0x8c)+_0x17c662+_0xf2315a(0xd0)+_0x47d842+'\x20'+_0x5bfe60)[_0xf2315a(0xbd)](()=>void 0x0),_0x5c0df8;}static async[a76_0x52cd56(0xcf)](_0x3432ea){const _0x15f74b=a76_0x52cd56,_0xd1ee00=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x4eca1e}=typedi_1[_0x15f74b(0xc2)][_0x15f74b(0x9b)](auth_settings_service_1[_0x15f74b(0x97)]),_0x402a7e=_0x3432ea['gitUrl'][_0x15f74b(0xae)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x15f74b(0xa0)])(_0x3432ea[_0x15f74b(0xa1)])+_0x15f74b(0xd2)+_0x4eca1e+'@'),_0x38a6da=await shell_internal_1[_0x15f74b(0x8a)]['exec'](_0x15f74b(0xc9)+_0x402a7e),_0x42736f=_0x38a6da[_0x15f74b(0xa6)]('\x0a')[_0x15f74b(0x91)](_0x392789=>_0xd1ee00[_0x15f74b(0x9f)](_0x392789))[_0x15f74b(0xc5)](_0x4985e8=>{const _0x43c6ad=_0x15f74b,[,_0x47b544,_0x3f44f7]=_0x4985e8['match'](_0xd1ee00),_0x470613=new branch_dto_1[(_0x43c6ad(0xb1))]();return _0x470613[_0x43c6ad(0xad)]=_0x47b544,_0x470613['name']=_0x3f44f7[_0x43c6ad(0xae)](_0x43c6ad(0xa5),''),_0x470613;});return _0x42736f;}static async['createEmptyBranch'](_0x47bc20,_0x5a0f61,_0x32270b=a76_0x52cd56(0xac)){const _0x509d7f=a76_0x52cd56,{gitCredentials:_0x53003f}=typedi_1[_0x509d7f(0xc2)][_0x509d7f(0x9b)](auth_settings_service_1[_0x509d7f(0x97)]),_0x5304ad=_0x47bc20[_0x509d7f(0xa1)]['replace'](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x509d7f(0xa0)])(_0x47bc20[_0x509d7f(0xa1)])+_0x509d7f(0xd2)+_0x53003f+'@'),_0x500dc3=path_1[_0x509d7f(0xc2)]['join'](this['DEFAULT_CLONE_PATH'],_0x47bc20['name']);Git['logger'][_0x509d7f(0xc4)](_0x509d7f(0x9d),_0x47bc20[_0x509d7f(0xc7)],_0x5a0f61,_0x500dc3,_0x5304ad),await fs_internal_1['FS'][_0x509d7f(0xd6)](_0x500dc3),await fs_internal_1['FS'][_0x509d7f(0xa9)](_0x500dc3);const _0x179287=new Git(_0x500dc3);await shell_internal_1[_0x509d7f(0x8a)][_0x509d7f(0xce)](_0x509d7f(0x8b)+_0x179287[_0x509d7f(0xc1)]+_0x509d7f(0xca))[_0x509d7f(0xbd)](internal_utils_1[_0x509d7f(0xb8)]),await shell_internal_1[_0x509d7f(0x8a)]['exec'](_0x509d7f(0x8b)+_0x179287[_0x509d7f(0xc1)]+'\x20&&\x20git\x20remote\x20add\x20origin\x20'+_0x5304ad)[_0x509d7f(0xbd)](internal_utils_1[_0x509d7f(0xb8)]),await _0x179287[_0x509d7f(0xbf)]('flosum-agent',_0x509d7f(0xcb)),await shell_internal_1[_0x509d7f(0x8a)][_0x509d7f(0xce)](_0x509d7f(0x8b)+_0x179287[_0x509d7f(0xc1)]+_0x509d7f(0x99)+_0x5a0f61)[_0x509d7f(0xbd)](internal_utils_1[_0x509d7f(0xb8)]),await shell_internal_1[_0x509d7f(0x8a)]['exec'](_0x509d7f(0x8b)+_0x179287[_0x509d7f(0xc1)]+_0x509d7f(0xaf)+_0x32270b+'\x22\x20--allow-empty')['catch'](internal_utils_1['parseGitError']),await _0x179287['push'](_0x5a0f61),Git[_0x509d7f(0xb6)][_0x509d7f(0xc4)](_0x509d7f(0xb7)),await fs_internal_1['FS'][_0x509d7f(0xd6)](_0x179287['baseDir']);}}exports[a76_0x52cd56(0xbc)]=Git,Git[a76_0x52cd56(0x96)]=path_1[a76_0x52cd56(0xc2)]['join'](process[a76_0x52cd56(0xb4)](),a76_0x52cd56(0xa4),a76_0x52cd56(0xba)),Git[a76_0x52cd56(0xb6)]=new core_1[(a76_0x52cd56(0xcc))](Git['name']);