const a76_0x5ddd13=a76_0x3f8c;(function(_0x2ccd3c,_0x1fd7b8){const _0x106a9e=a76_0x3f8c,_0x5e3725=_0x2ccd3c();while(!![]){try{const _0x367222=parseInt(_0x106a9e(0xee))/0x1+-parseInt(_0x106a9e(0xd8))/0x2*(-parseInt(_0x106a9e(0xa2))/0x3)+parseInt(_0x106a9e(0xdf))/0x4+-parseInt(_0x106a9e(0xb1))/0x5+parseInt(_0x106a9e(0xab))/0x6+-parseInt(_0x106a9e(0xbd))/0x7+-parseInt(_0x106a9e(0xb8))/0x8;if(_0x367222===_0x1fd7b8)break;else _0x5e3725['push'](_0x5e3725['shift']());}catch(_0x5103d8){_0x5e3725['push'](_0x5e3725['shift']());}}}(a76_0x2eb2,0xb2dd0));const a76_0x3bab75=function(){let _0x5a4cb7=!![];return function(_0x508e00,_0x2f9f7a){const _0x5e344a=_0x5a4cb7?function(){const _0x2326e8=a76_0x3f8c;if(_0x2f9f7a){const _0x31e1be=_0x2f9f7a[_0x2326e8(0xd3)](_0x508e00,arguments);return _0x2f9f7a=null,_0x31e1be;}}:function(){};return _0x5a4cb7=![],_0x5e344a;};}(),a76_0x2f8879=a76_0x3bab75(this,function(){const _0x2474ec=a76_0x3f8c;return a76_0x2f8879[_0x2474ec(0xb7)]()[_0x2474ec(0xb4)]('(((.+)+)+)+$')[_0x2474ec(0xb7)]()[_0x2474ec(0xaf)](a76_0x2f8879)[_0x2474ec(0xb4)](_0x2474ec(0xe0));});function a76_0x2eb2(){const _0x5dbe20=['default','__importDefault','./shell.internal','name','://','gitUrl','./fs.internal','AuthSettingsService','Logger','cd\x20','git\x20ls-remote\x20','apply','createEmptyBranch','typedi','getRepositoryBranches','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s','7534ABguGN','join','getProtocol','status','Git','__esModule','catch','5047456fXoSrD','(((.+)+)+)+$','\x20&&\x20git\x20checkout\x20--orphan\x20','init\x20repository','removeDir','map','commit\x20message\x20\x22%s\x22','DEFAULT_CLONE_PATH','push\x20changes\x20to\x20%s','clone','../../core','filter','./internal.utils','path','exec','451377nDxMnK','logger','726xUvphp','info','_repoPath','BranchDto','defineProperty','setCredentials','\x20&&\x20git\x20remote\x20add\x20origin\x20','set\x20credentials\x20%s\x20(%s)','replace','4224204GMGBHx','baseDir','get','push','constructor','add','1857745njLLKK','cwd','../shared/utils','search','sha','makeDir','toString','8635656uvhCJM','flosum-agent','\x22\x20--allow-empty','parseGitError','\x20&&\x20git\x20push\x20origin\x20','8016813LAIhXf','match','\x20&&\x20git\x20commit\x20-m\x20\x22','agent@flosum.com','\x20--quiet','refs/heads/','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','.temp','Shell','../shared/services/auth-settings.service','clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s'];a76_0x2eb2=function(){return _0x5dbe20;};return a76_0x2eb2();}a76_0x2f8879();'use strict';var __importDefault=this&&this[a76_0x5ddd13(0xc9)]||function(_0x1e9c51){const _0x5b08f1=a76_0x5ddd13;return _0x1e9c51&&_0x1e9c51[_0x5b08f1(0xdd)]?_0x1e9c51:{'default':_0x1e9c51};};Object[a76_0x5ddd13(0xa6)](exports,a76_0x5ddd13(0xdd),{'value':!![]}),exports[a76_0x5ddd13(0xdc)]=void 0x0;function a76_0x3f8c(_0x3ae901,_0x31fde7){const _0x54ead6=a76_0x2eb2();return a76_0x3f8c=function(_0x2f8879,_0x3bab75){_0x2f8879=_0x2f8879-0xa1;let _0x2eb2c3=_0x54ead6[_0x2f8879];return _0x2eb2c3;},a76_0x3f8c(_0x3ae901,_0x31fde7);}const core_1=require(a76_0x5ddd13(0xe9)),path_1=__importDefault(require(a76_0x5ddd13(0xec))),typedi_1=__importDefault(require(a76_0x5ddd13(0xd5))),branch_dto_1=require('../branches/dto/branch.dto'),auth_settings_service_1=require(a76_0x5ddd13(0xc6)),utils_1=require(a76_0x5ddd13(0xb3)),fs_internal_1=require(a76_0x5ddd13(0xce)),internal_utils_1=require(a76_0x5ddd13(0xeb)),shell_internal_1=require(a76_0x5ddd13(0xca));class Git{constructor(_0xa356d9){const _0x30f744=a76_0x5ddd13;this[_0x30f744(0xa4)]=_0xa356d9;}get['baseDir'](){return this['_repoPath'];}async[a76_0x5ddd13(0xa7)](_0x31e4cf,_0x4cbff8){const _0x5ce597=a76_0x5ddd13;Git['logger'][_0x5ce597(0xa3)](_0x5ce597(0xa9),_0x31e4cf,_0x4cbff8),await shell_internal_1[_0x5ce597(0xc5)][_0x5ce597(0xed)](_0x5ce597(0xd1)+this['_repoPath']+'\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22'+_0x31e4cf+_0x5ce597(0xc3)+_0x4cbff8+'\x22')[_0x5ce597(0xde)](internal_utils_1[_0x5ce597(0xbb)]);}async[a76_0x5ddd13(0xb0)](..._0x273167){const _0x147617=a76_0x5ddd13;await shell_internal_1[_0x147617(0xc5)][_0x147617(0xed)]('cd\x20'+this['_repoPath']+'\x20&&\x20git\x20add\x20'+_0x273167[_0x147617(0xd9)]('\x20'))[_0x147617(0xde)](internal_utils_1[_0x147617(0xbb)]);}async[a76_0x5ddd13(0xdb)](){const _0x51b0f7=a76_0x5ddd13;return shell_internal_1[_0x51b0f7(0xc5)]['exec'](_0x51b0f7(0xd1)+this[_0x51b0f7(0xa4)]+'\x20&&\x20git\x20status')[_0x51b0f7(0xde)](internal_utils_1[_0x51b0f7(0xbb)]);}async['commit'](_0x22aa9c){const _0x51df9e=a76_0x5ddd13;Git[_0x51df9e(0xa1)]['info'](_0x51df9e(0xe5),_0x22aa9c),await shell_internal_1[_0x51df9e(0xc5)]['exec']('cd\x20'+this[_0x51df9e(0xa4)]+_0x51df9e(0xbf)+_0x22aa9c+'\x22')['catch'](internal_utils_1[_0x51df9e(0xbb)]);}async['push'](_0x49d4fd){const _0xee545b=a76_0x5ddd13;Git[_0xee545b(0xa1)][_0xee545b(0xa3)](_0xee545b(0xe7),_0x49d4fd),await shell_internal_1[_0xee545b(0xc5)][_0xee545b(0xed)](_0xee545b(0xd1)+this[_0xee545b(0xa4)]+_0xee545b(0xbc)+_0x49d4fd+_0xee545b(0xc1))[_0xee545b(0xde)](internal_utils_1[_0xee545b(0xbb)]);}static async[a76_0x5ddd13(0xe8)](_0x42cc9b,_0xfd3c7e,_0xf4c774){const _0x50daea=a76_0x5ddd13,_0x247c4f=path_1[_0x50daea(0xc8)][_0x50daea(0xd9)](this[_0x50daea(0xe6)],_0xfd3c7e),_0x315eba=new Git(_0x247c4f);return Git['logger'][_0x50daea(0xa3)](_0x50daea(0xc7),_0xf4c774,_0x42cc9b,_0x247c4f),await fs_internal_1['FS'][_0x50daea(0xe3)](_0x247c4f),await shell_internal_1[_0x50daea(0xc5)][_0x50daea(0xed)]('git\x20clone\x20-b\x20'+_0xf4c774+'\x20--single-branch\x20'+_0x42cc9b+'\x20'+_0x247c4f)['catch'](()=>void 0x0),_0x315eba;}static async[a76_0x5ddd13(0xd6)](_0x8f9ae8){const _0x391dcc=a76_0x5ddd13,_0x1b8e91=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x205ff0}=typedi_1[_0x391dcc(0xc8)][_0x391dcc(0xad)](auth_settings_service_1['AuthSettingsService']),_0x5561a3=_0x8f9ae8[_0x391dcc(0xcd)][_0x391dcc(0xaa)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x391dcc(0xda)])(_0x8f9ae8[_0x391dcc(0xcd)])+_0x391dcc(0xcc)+_0x205ff0+'@'),_0x558a2d=await shell_internal_1[_0x391dcc(0xc5)]['exec'](_0x391dcc(0xd2)+_0x5561a3),_0x27f173=_0x558a2d['split']('\x0a')[_0x391dcc(0xea)](_0xd45ef4=>_0x1b8e91['test'](_0xd45ef4))[_0x391dcc(0xe4)](_0x2ee61f=>{const _0xd6a3d7=_0x391dcc,[,_0x2c2f4f,_0x3e42ab]=_0x2ee61f[_0xd6a3d7(0xbe)](_0x1b8e91),_0x2bbcf5=new branch_dto_1[(_0xd6a3d7(0xa5))]();return _0x2bbcf5[_0xd6a3d7(0xb5)]=_0x2c2f4f,_0x2bbcf5['name']=_0x3e42ab[_0xd6a3d7(0xaa)](_0xd6a3d7(0xc2),''),_0x2bbcf5;});return _0x27f173;}static async[a76_0x5ddd13(0xd4)](_0x11a16e,_0x29f7d1,_0x3a6cab=a76_0x5ddd13(0xe2)){const _0x276d5f=a76_0x5ddd13,{gitCredentials:_0x1f4d34}=typedi_1[_0x276d5f(0xc8)][_0x276d5f(0xad)](auth_settings_service_1[_0x276d5f(0xcf)]),_0x5aa4c7=_0x11a16e[_0x276d5f(0xcd)][_0x276d5f(0xaa)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x276d5f(0xda)])(_0x11a16e[_0x276d5f(0xcd)])+_0x276d5f(0xcc)+_0x1f4d34+'@'),_0x30033b=path_1[_0x276d5f(0xc8)][_0x276d5f(0xd9)](this[_0x276d5f(0xe6)],_0x11a16e[_0x276d5f(0xcb)]);Git['logger'][_0x276d5f(0xa3)](_0x276d5f(0xd7),_0x11a16e[_0x276d5f(0xcb)],_0x29f7d1,_0x30033b,_0x5aa4c7),await fs_internal_1['FS'][_0x276d5f(0xe3)](_0x30033b),await fs_internal_1['FS'][_0x276d5f(0xb6)](_0x30033b);const _0x5d3224=new Git(_0x30033b);await shell_internal_1[_0x276d5f(0xc5)][_0x276d5f(0xed)]('cd\x20'+_0x5d3224[_0x276d5f(0xac)]+'\x20&&\x20git\x20init')[_0x276d5f(0xde)](internal_utils_1[_0x276d5f(0xbb)]),await shell_internal_1[_0x276d5f(0xc5)]['exec'](_0x276d5f(0xd1)+_0x5d3224[_0x276d5f(0xac)]+_0x276d5f(0xa8)+_0x5aa4c7)[_0x276d5f(0xde)](internal_utils_1[_0x276d5f(0xbb)]),await _0x5d3224[_0x276d5f(0xa7)](_0x276d5f(0xb9),_0x276d5f(0xc0)),await shell_internal_1[_0x276d5f(0xc5)]['exec'](_0x276d5f(0xd1)+_0x5d3224[_0x276d5f(0xac)]+_0x276d5f(0xe1)+_0x29f7d1)['catch'](internal_utils_1[_0x276d5f(0xbb)]),await shell_internal_1[_0x276d5f(0xc5)]['exec'](_0x276d5f(0xd1)+_0x5d3224[_0x276d5f(0xac)]+_0x276d5f(0xbf)+_0x3a6cab+_0x276d5f(0xba))[_0x276d5f(0xde)](internal_utils_1[_0x276d5f(0xbb)]),await _0x5d3224[_0x276d5f(0xae)](_0x29f7d1),Git['logger'][_0x276d5f(0xa3)]('clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0x276d5f(0xe3)](_0x5d3224[_0x276d5f(0xac)]);}}exports['Git']=Git,Git[a76_0x5ddd13(0xe6)]=path_1['default'][a76_0x5ddd13(0xd9)](process[a76_0x5ddd13(0xb2)](),a76_0x5ddd13(0xc4),'git'),Git[a76_0x5ddd13(0xa1)]=new core_1[(a76_0x5ddd13(0xd0))](Git[a76_0x5ddd13(0xcb)]);