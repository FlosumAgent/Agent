const a84_0x1b8440=a84_0x2ddd;(function(_0x260814,_0x42716d){const _0x5e8ed3=a84_0x2ddd,_0x1d160b=_0x260814();while(!![]){try{const _0x3c405c=parseInt(_0x5e8ed3(0x82))/0x1+parseInt(_0x5e8ed3(0xbf))/0x2+parseInt(_0x5e8ed3(0xc3))/0x3*(-parseInt(_0x5e8ed3(0x91))/0x4)+-parseInt(_0x5e8ed3(0x93))/0x5*(-parseInt(_0x5e8ed3(0x99))/0x6)+-parseInt(_0x5e8ed3(0x96))/0x7*(parseInt(_0x5e8ed3(0xa9))/0x8)+-parseInt(_0x5e8ed3(0x8e))/0x9+parseInt(_0x5e8ed3(0xb1))/0xa;if(_0x3c405c===_0x42716d)break;else _0x1d160b['push'](_0x1d160b['shift']());}catch(_0x3a1720){_0x1d160b['push'](_0x1d160b['shift']());}}}(a84_0x5f4c,0x4052e));const a84_0xb52818=function(){let _0x1103cb=!![];return function(_0x43dd76,_0x54f144){const _0xd2a0ee=_0x1103cb?function(){const _0x133848=a84_0x2ddd;if(_0x54f144){const _0x4ad6f9=_0x54f144[_0x133848(0xcc)](_0x43dd76,arguments);return _0x54f144=null,_0x4ad6f9;}}:function(){};return _0x1103cb=![],_0xd2a0ee;};}(),a84_0x2d4a86=a84_0xb52818(this,function(){const _0x4e7a1c=a84_0x2ddd;return a84_0x2d4a86[_0x4e7a1c(0x81)]()[_0x4e7a1c(0x9e)]('(((.+)+)+)+$')['toString']()[_0x4e7a1c(0xbd)](a84_0x2d4a86)[_0x4e7a1c(0x9e)]('(((.+)+)+)+$');});a84_0x2d4a86();'use strict';var __importDefault=this&&this[a84_0x1b8440(0xcb)]||function(_0x4ee7d6){const _0x1d6de4=a84_0x1b8440;return _0x4ee7d6&&_0x4ee7d6[_0x1d6de4(0x89)]?_0x4ee7d6:{'default':_0x4ee7d6};};Object[a84_0x1b8440(0xae)](exports,a84_0x1b8440(0x89),{'value':!![]}),exports[a84_0x1b8440(0x97)]=void 0x0;function a84_0x5f4c(){const _0x4c192c=['create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s','53694dSPjtO','\x20--single-branch\x20','replace','\x20&&\x20git\x20add\x20','88368uPqZsK','path','DEFAULT_CLONE_PATH','../branches/dto/branch.dto','get','createEmptyBranch','cd\x20','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','__importDefault','apply','BranchDto','status','baseDir','removeDir','join','push','\x20&&\x20git\x20checkout\x20--orphan\x20','\x20&&\x20git\x20checkout\x20','default','name','toString','239639XGWqNr','_repoPath','extractEmailFromCommitDescribe','refs/heads/','Shell','sha','./internal.utils','__esModule','commit\x20message\x20\x22%s\x22','push\x20changes\x20to\x20%s','DEFAULT_GIT_USER_EMAIL','git\x20ls-remote\x20','1658736Mnvsjd','\x20&&\x20git\x20status','git\x20clone\x20-b\x20','32jaShIH','test','2185590UKjRQt','checkout\x20to\x20%s','checkout','49HytSqL','Git','commit','6YIUqJW','../shared/services/auth-settings.service','.temp','setCredentials','\x20&&\x20git\x20init','search','makeDir','logger','\x20--quiet','\x20&&\x20git\x20remote\x20add\x20origin\x20','getRepositoryBranches','DEFAULT_GIT_USER_NAME','getCurrentHash','describe\x20commit\x20%s','cwd','../shared/utils','509232cqIHnR','\x20&&\x20git\x20rev-parse\x20HEAD','git','\x20&&\x20git\x20show\x20--pretty=format:\x22Author:\x20%an%Email:\x20%ae%nMessage:\x20%s\x22\x20--name-status\x20','catch','defineProperty','getProtocol','typedi','4253960lGhsDO','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','log','exec','gitUrl','://','../../constants','\x20&&\x20git\x20commit\x20-m\x20\x22','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','map','extractChangesFromCommitDescribe','add','constructor'];a84_0x5f4c=function(){return _0x4c192c;};return a84_0x5f4c();}const constants_1=require(a84_0x1b8440(0xb7)),core_1=require('../../core'),path_1=__importDefault(require(a84_0x1b8440(0xc4))),typedi_1=__importDefault(require(a84_0x1b8440(0xb0))),branch_dto_1=require(a84_0x1b8440(0xc6)),auth_settings_service_1=require(a84_0x1b8440(0x9a)),utils_1=require(a84_0x1b8440(0xa8)),fs_internal_1=require('./fs.internal'),internal_utils_1=require(a84_0x1b8440(0x88)),shell_internal_1=require('./shell.internal');class Git{constructor(_0x2e5e0e){const _0x257b63=a84_0x1b8440;this[_0x257b63(0x83)]=_0x2e5e0e;}get[a84_0x1b8440(0x79)](){const _0x31acae=a84_0x1b8440;return this[_0x31acae(0x83)];}async['setCredentials'](_0x3ec9fa,_0x2a109b){const _0x5ecf8a=a84_0x1b8440;Git['logger'][_0x5ecf8a(0xb3)]('set\x20credentials\x20%s\x20(%s)',_0x3ec9fa,_0x2a109b),await shell_internal_1[_0x5ecf8a(0x86)]['exec'](_0x5ecf8a(0xc9)+this[_0x5ecf8a(0x83)]+_0x5ecf8a(0xb2)+_0x3ec9fa+_0x5ecf8a(0xca)+_0x2a109b+'\x22');}async[a84_0x1b8440(0xbc)](..._0x191906){const _0x32db31=a84_0x1b8440;await shell_internal_1['Shell']['exec'](_0x32db31(0xc9)+this['_repoPath']+_0x32db31(0xc2)+_0x191906['join']('\x20'));}async[a84_0x1b8440(0x78)](){const _0x2340d0=a84_0x1b8440;return shell_internal_1['Shell']['exec']('cd\x20'+this['_repoPath']+_0x2340d0(0x8f));}async[a84_0x1b8440(0x98)](_0x4d0c89){const _0x21f999=a84_0x1b8440;Git['logger'][_0x21f999(0xb3)](_0x21f999(0x8a),_0x4d0c89),await shell_internal_1[_0x21f999(0x86)][_0x21f999(0xb4)]('cd\x20'+this['_repoPath']+_0x21f999(0xb8)+_0x4d0c89+'\x22');}async[a84_0x1b8440(0x7c)](_0xbe378a){const _0xad0b95=a84_0x1b8440;Git['logger']['log'](_0xad0b95(0x8b),_0xbe378a),await shell_internal_1['Shell'][_0xad0b95(0xb4)](_0xad0b95(0xc9)+this[_0xad0b95(0x83)]+'\x20&&\x20git\x20push\x20origin\x20'+_0xbe378a+_0xad0b95(0xa1));}async[a84_0x1b8440(0x95)](_0x39891f){const _0x573331=a84_0x1b8440;Git[_0x573331(0xa0)][_0x573331(0xb3)](_0x573331(0x94),_0x39891f),await shell_internal_1[_0x573331(0x86)]['exec'](_0x573331(0xc9)+this[_0x573331(0x83)]+_0x573331(0x7e)+_0x39891f);}async[a84_0x1b8440(0xa5)](){const _0x287a64=a84_0x1b8440,_0x24b3e5=await shell_internal_1['Shell']['exec'](_0x287a64(0xc9)+this[_0x287a64(0x83)]+_0x287a64(0xaa));return _0x24b3e5['replace']('\x0a','');}async['describeCommit'](_0x303085){const _0x34cdde=a84_0x1b8440;Git['logger'][_0x34cdde(0xb3)](_0x34cdde(0xa6),_0x303085);const _0xc2954c=await shell_internal_1['Shell']['exec'](_0x34cdde(0xc9)+this[_0x34cdde(0x83)]+_0x34cdde(0xac)+_0x303085);return{'author':internal_utils_1['extractAuthorFromCommitDescribe'](_0xc2954c),'email':internal_utils_1[_0x34cdde(0x84)](_0xc2954c),'message':internal_utils_1['extractMessageFromCommitDescribe'](_0xc2954c),'changes':internal_utils_1[_0x34cdde(0xbb)](_0xc2954c)};}static async['clone'](_0x3d8c44,_0x14dbf3,_0xdbab4){const _0x22a439=a84_0x1b8440,_0x3e39f6=path_1[_0x22a439(0x7f)][_0x22a439(0x7b)](this['DEFAULT_CLONE_PATH'],_0x14dbf3),_0x5369b9=new Git(_0x3e39f6);return Git[_0x22a439(0xa0)][_0x22a439(0xb3)]('clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s',_0xdbab4,_0x3d8c44,_0x3e39f6),await fs_internal_1['FS'][_0x22a439(0x7a)](_0x3e39f6),await shell_internal_1[_0x22a439(0x86)]['exec'](_0x22a439(0x90)+_0xdbab4+_0x22a439(0xc0)+_0x3d8c44+'\x20'+_0x3e39f6)[_0x22a439(0xad)](()=>void 0x0),_0x5369b9;}static async[a84_0x1b8440(0xa3)](_0x3b5585){const _0x3ee6db=a84_0x1b8440,_0x2b1f9d=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x4a2a2a}=typedi_1[_0x3ee6db(0x7f)][_0x3ee6db(0xc7)](auth_settings_service_1['AuthSettingsService']),_0x1196d2=_0x3b5585[_0x3ee6db(0xb5)]['replace'](/http(s)?\:\/\/(.+@)?/,utils_1[_0x3ee6db(0xaf)](_0x3b5585[_0x3ee6db(0xb5)])+_0x3ee6db(0xb6)+_0x4a2a2a+'@'),_0x43a913=await shell_internal_1[_0x3ee6db(0x86)]['exec'](_0x3ee6db(0x8d)+_0x1196d2),_0xfbc355=_0x43a913['split']('\x0a')['filter'](_0x4d1331=>_0x2b1f9d[_0x3ee6db(0x92)](_0x4d1331))[_0x3ee6db(0xba)](_0x46a2de=>{const _0x5e8c8a=_0x3ee6db,[,_0x350528,_0x4ded3e]=_0x46a2de['match'](_0x2b1f9d),_0x21e14d=new branch_dto_1[(_0x5e8c8a(0xcd))]();return _0x21e14d[_0x5e8c8a(0x87)]=_0x350528,_0x21e14d[_0x5e8c8a(0x80)]=_0x4ded3e['replace'](_0x5e8c8a(0x85),''),_0x21e14d;});return _0xfbc355;}static async[a84_0x1b8440(0xc8)](_0x380330,_0x5fcc36,_0x4a666e='init\x20repository'){const _0x42c218=a84_0x1b8440,{gitCredentials:_0x485c06}=typedi_1[_0x42c218(0x7f)]['get'](auth_settings_service_1['AuthSettingsService']),_0xc3c5df=_0x380330[_0x42c218(0xb5)][_0x42c218(0xc1)](/http(s)?\:\/\/(.+@)?/,utils_1[_0x42c218(0xaf)](_0x380330[_0x42c218(0xb5)])+_0x42c218(0xb6)+_0x485c06+'@'),_0x1e77c8=path_1[_0x42c218(0x7f)][_0x42c218(0x7b)](this[_0x42c218(0xc5)],_0x380330['name']);Git['logger'][_0x42c218(0xb3)](_0x42c218(0xbe),_0x380330[_0x42c218(0x80)],_0x5fcc36,_0x1e77c8,_0xc3c5df),await fs_internal_1['FS'][_0x42c218(0x7a)](_0x1e77c8),await fs_internal_1['FS'][_0x42c218(0x9f)](_0x1e77c8);const _0x332ed3=new Git(_0x1e77c8);await shell_internal_1[_0x42c218(0x86)][_0x42c218(0xb4)](_0x42c218(0xc9)+_0x332ed3[_0x42c218(0x79)]+_0x42c218(0x9d)),await shell_internal_1['Shell'][_0x42c218(0xb4)](_0x42c218(0xc9)+_0x332ed3[_0x42c218(0x79)]+_0x42c218(0xa2)+_0xc3c5df),await _0x332ed3[_0x42c218(0x9c)](constants_1[_0x42c218(0xa4)],constants_1[_0x42c218(0x8c)]),await shell_internal_1[_0x42c218(0x86)][_0x42c218(0xb4)](_0x42c218(0xc9)+_0x332ed3[_0x42c218(0x79)]+_0x42c218(0x7d)+_0x5fcc36),await shell_internal_1[_0x42c218(0x86)][_0x42c218(0xb4)]('cd\x20'+_0x332ed3[_0x42c218(0x79)]+_0x42c218(0xb8)+_0x4a666e+'\x22\x20--allow-empty'),await _0x332ed3[_0x42c218(0x7c)](_0x5fcc36),Git[_0x42c218(0xa0)][_0x42c218(0xb3)](_0x42c218(0xb9)),await fs_internal_1['FS'][_0x42c218(0x7a)](_0x332ed3['baseDir']);}}function a84_0x2ddd(_0x1cc022,_0x480fdd){const _0x10cda8=a84_0x5f4c();return a84_0x2ddd=function(_0x2d4a86,_0xb52818){_0x2d4a86=_0x2d4a86-0x78;let _0x5f4cd4=_0x10cda8[_0x2d4a86];return _0x5f4cd4;},a84_0x2ddd(_0x1cc022,_0x480fdd);}exports[a84_0x1b8440(0x97)]=Git,Git[a84_0x1b8440(0xc5)]=path_1[a84_0x1b8440(0x7f)]['join'](process[a84_0x1b8440(0xa7)](),a84_0x1b8440(0x9b),a84_0x1b8440(0xab)),Git[a84_0x1b8440(0xa0)]=new core_1['Logger'](Git[a84_0x1b8440(0x80)]);