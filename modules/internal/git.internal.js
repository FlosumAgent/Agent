const a76_0xb3497d=a76_0x1c73;(function(_0x350910,_0x1b0036){const _0x22e60c=a76_0x1c73,_0x4dce7a=_0x350910();while(!![]){try{const _0x2701be=parseInt(_0x22e60c(0x203))/0x1*(-parseInt(_0x22e60c(0x201))/0x2)+-parseInt(_0x22e60c(0x218))/0x3+-parseInt(_0x22e60c(0x1f3))/0x4*(-parseInt(_0x22e60c(0x1dc))/0x5)+parseInt(_0x22e60c(0x1fd))/0x6*(-parseInt(_0x22e60c(0x1d6))/0x7)+parseInt(_0x22e60c(0x20c))/0x8*(-parseInt(_0x22e60c(0x1ef))/0x9)+parseInt(_0x22e60c(0x1ed))/0xa*(parseInt(_0x22e60c(0x1d4))/0xb)+parseInt(_0x22e60c(0x1e0))/0xc;if(_0x2701be===_0x1b0036)break;else _0x4dce7a['push'](_0x4dce7a['shift']());}catch(_0x42e56a){_0x4dce7a['push'](_0x4dce7a['shift']());}}}(a76_0x23a3,0xa1b85));const a76_0x53ab50=function(){let _0x1919cd=!![];return function(_0x2620a,_0xf5a4b8){const _0x114606=_0x1919cd?function(){const _0x212f1d=a76_0x1c73;if(_0xf5a4b8){const _0x2778b4=_0xf5a4b8[_0x212f1d(0x20f)](_0x2620a,arguments);return _0xf5a4b8=null,_0x2778b4;}}:function(){};return _0x1919cd=![],_0x114606;};}(),a76_0x508b12=a76_0x53ab50(this,function(){const _0x568ab5=a76_0x1c73;return a76_0x508b12[_0x568ab5(0x1f7)]()[_0x568ab5(0x217)](_0x568ab5(0x202))[_0x568ab5(0x1f7)]()[_0x568ab5(0x215)](a76_0x508b12)['search'](_0x568ab5(0x202));});function a76_0x1c73(_0x30641c,_0xd8f480){const _0x39a294=a76_0x23a3();return a76_0x1c73=function(_0x508b12,_0x53ab50){_0x508b12=_0x508b12-0x1cf;let _0x23a38c=_0x39a294[_0x508b12];return _0x23a38c;},a76_0x1c73(_0x30641c,_0xd8f480);}function a76_0x23a3(){const _0x22ae91=['git\x20ls-remote\x20','join','getRepositoryBranches','22lMmJBa','commit\x20message\x20\x22%s\x22','7LwRzoY','../../core','logger','\x20--quiet','__importDefault','clone','30zeUVek','agent@flosum.com','commit','createEmptyBranch','10267416yOVVBB','name','get','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','.temp','baseDir','gitUrl','\x20--single-branch\x20','__esModule','./shell.internal','Logger','exec','\x20&&\x20git\x20checkout\x20--orphan\x20','5953360vBexTW','cwd','8487qZNvqV','info','default','\x20&&\x20git\x20push\x20origin\x20','748556GuZikF','\x20&&\x20git\x20commit\x20-m\x20\x22','push','cd\x20','toString','catch','clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s','add','\x20&&\x20git\x20init','_repoPath','5734458ePPMsf','makeDir','replace','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s','16HYBUCe','(((.+)+)+)+$','111038fgHnuZ','\x20&&\x20git\x20add\x20','\x20&&\x20git\x20remote\x20add\x20origin\x20','Shell','sha','://','git','BranchDto','push\x20changes\x20to\x20%s','5144oqfqMW','getProtocol','./fs.internal','apply','DEFAULT_CLONE_PATH','status','defineProperty','init\x20repository','setCredentials','constructor','AuthSettingsService','search','168969rBLImN','parseGitError','git\x20clone\x20-b\x20','split','\x22\x20--allow-empty','Git','../shared/utils','removeDir','../shared/services/auth-settings.service'];a76_0x23a3=function(){return _0x22ae91;};return a76_0x23a3();}a76_0x508b12();'use strict';var __importDefault=this&&this[a76_0xb3497d(0x1da)]||function(_0x281298){return _0x281298&&_0x281298['__esModule']?_0x281298:{'default':_0x281298};};Object[a76_0xb3497d(0x212)](exports,a76_0xb3497d(0x1e8),{'value':!![]}),exports[a76_0xb3497d(0x21d)]=void 0x0;const core_1=require(a76_0xb3497d(0x1d7)),path_1=__importDefault(require('path')),typedi_1=__importDefault(require('typedi')),branch_dto_1=require('../branches/dto/branch.dto'),auth_settings_service_1=require(a76_0xb3497d(0x1d0)),utils_1=require(a76_0xb3497d(0x21e)),fs_internal_1=require(a76_0xb3497d(0x20e)),internal_utils_1=require('./internal.utils'),shell_internal_1=require(a76_0xb3497d(0x1e9));class Git{constructor(_0x271f23){const _0x509d32=a76_0xb3497d;this[_0x509d32(0x1fc)]=_0x271f23;}get[a76_0xb3497d(0x1e5)](){const _0x301fc8=a76_0xb3497d;return this[_0x301fc8(0x1fc)];}async[a76_0xb3497d(0x214)](_0x5ce392,_0x4bdd54){const _0x31616f=a76_0xb3497d;Git['logger'][_0x31616f(0x1f0)]('set\x20credentials\x20%s\x20(%s)',_0x5ce392,_0x4bdd54),await shell_internal_1[_0x31616f(0x206)][_0x31616f(0x1eb)](_0x31616f(0x1f6)+this[_0x31616f(0x1fc)]+_0x31616f(0x1e3)+_0x5ce392+'\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22'+_0x4bdd54+'\x22')[_0x31616f(0x1f8)](internal_utils_1[_0x31616f(0x219)]);}async[a76_0xb3497d(0x1fa)](..._0x509e7f){const _0x478b05=a76_0xb3497d;await shell_internal_1[_0x478b05(0x206)][_0x478b05(0x1eb)]('cd\x20'+this[_0x478b05(0x1fc)]+_0x478b05(0x204)+_0x509e7f['join']('\x20'))[_0x478b05(0x1f8)](internal_utils_1[_0x478b05(0x219)]);}async[a76_0xb3497d(0x211)](){const _0x59e773=a76_0xb3497d;return shell_internal_1['Shell'][_0x59e773(0x1eb)]('cd\x20'+this[_0x59e773(0x1fc)]+'\x20&&\x20git\x20status')[_0x59e773(0x1f8)](internal_utils_1[_0x59e773(0x219)]);}async[a76_0xb3497d(0x1de)](_0x147387){const _0x4a91e=a76_0xb3497d;Git[_0x4a91e(0x1d8)][_0x4a91e(0x1f0)](_0x4a91e(0x1d5),_0x147387),await shell_internal_1['Shell'][_0x4a91e(0x1eb)]('cd\x20'+this[_0x4a91e(0x1fc)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x147387+'\x22')['catch'](internal_utils_1['parseGitError']);}async['push'](_0x318603){const _0xb5ac9e=a76_0xb3497d;Git[_0xb5ac9e(0x1d8)][_0xb5ac9e(0x1f0)](_0xb5ac9e(0x20b),_0x318603),await shell_internal_1['Shell']['exec'](_0xb5ac9e(0x1f6)+this[_0xb5ac9e(0x1fc)]+_0xb5ac9e(0x1f2)+_0x318603+_0xb5ac9e(0x1d9))['catch'](internal_utils_1[_0xb5ac9e(0x219)]);}static async[a76_0xb3497d(0x1db)](_0x6f0e57,_0x2cf57a,_0x93e202){const _0x56180c=a76_0xb3497d,_0x2b55a1=path_1[_0x56180c(0x1f1)][_0x56180c(0x1d2)](this[_0x56180c(0x210)],_0x2cf57a),_0x386215=new Git(_0x2b55a1);return Git['logger']['info'](_0x56180c(0x1f9),_0x93e202,_0x6f0e57,_0x2b55a1),await fs_internal_1['FS'][_0x56180c(0x1cf)](_0x2b55a1),await shell_internal_1[_0x56180c(0x206)][_0x56180c(0x1eb)](_0x56180c(0x21a)+_0x93e202+_0x56180c(0x1e7)+_0x6f0e57+'\x20'+_0x2b55a1)[_0x56180c(0x1f8)](()=>void 0x0),_0x386215;}static async[a76_0xb3497d(0x1d3)](_0x2e5b49){const _0x392031=a76_0xb3497d,_0x39b411=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x1d83db}=typedi_1[_0x392031(0x1f1)][_0x392031(0x1e2)](auth_settings_service_1[_0x392031(0x216)]),_0x1b2dca=_0x2e5b49[_0x392031(0x1e6)]['replace'](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x392031(0x20d)])(_0x2e5b49['gitUrl'])+_0x392031(0x208)+_0x1d83db+'@'),_0x272a06=await shell_internal_1[_0x392031(0x206)]['exec'](_0x392031(0x1d1)+_0x1b2dca),_0x46eb03=_0x272a06[_0x392031(0x21b)]('\x0a')['filter'](_0x2c5ccb=>_0x39b411['test'](_0x2c5ccb))['map'](_0x3ee2d9=>{const _0x669eaa=_0x392031,[,_0x2046fb,_0x541744]=_0x3ee2d9['match'](_0x39b411),_0x554a77=new branch_dto_1[(_0x669eaa(0x20a))]();return _0x554a77[_0x669eaa(0x207)]=_0x2046fb,_0x554a77[_0x669eaa(0x1e1)]=_0x541744[_0x669eaa(0x1ff)]('refs/heads/',''),_0x554a77;});return _0x46eb03;}static async[a76_0xb3497d(0x1df)](_0x3a6616,_0x2c6d27,_0x1ed883=a76_0xb3497d(0x213)){const _0xd89b81=a76_0xb3497d,{gitCredentials:_0x5723d2}=typedi_1[_0xd89b81(0x1f1)][_0xd89b81(0x1e2)](auth_settings_service_1['AuthSettingsService']),_0x2c31a3=_0x3a6616[_0xd89b81(0x1e6)]['replace'](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0xd89b81(0x20d)])(_0x3a6616[_0xd89b81(0x1e6)])+'://'+_0x5723d2+'@'),_0x3e3638=path_1[_0xd89b81(0x1f1)][_0xd89b81(0x1d2)](this[_0xd89b81(0x210)],_0x3a6616[_0xd89b81(0x1e1)]);Git[_0xd89b81(0x1d8)][_0xd89b81(0x1f0)](_0xd89b81(0x200),_0x3a6616[_0xd89b81(0x1e1)],_0x2c6d27,_0x3e3638,_0x2c31a3),await fs_internal_1['FS'][_0xd89b81(0x1cf)](_0x3e3638),await fs_internal_1['FS'][_0xd89b81(0x1fe)](_0x3e3638);const _0x5e8dd9=new Git(_0x3e3638);await shell_internal_1['Shell'][_0xd89b81(0x1eb)](_0xd89b81(0x1f6)+_0x5e8dd9['baseDir']+_0xd89b81(0x1fb))[_0xd89b81(0x1f8)](internal_utils_1[_0xd89b81(0x219)]),await shell_internal_1[_0xd89b81(0x206)][_0xd89b81(0x1eb)]('cd\x20'+_0x5e8dd9['baseDir']+_0xd89b81(0x205)+_0x2c31a3)['catch'](internal_utils_1[_0xd89b81(0x219)]),await _0x5e8dd9[_0xd89b81(0x214)]('flosum-agent',_0xd89b81(0x1dd)),await shell_internal_1[_0xd89b81(0x206)][_0xd89b81(0x1eb)]('cd\x20'+_0x5e8dd9['baseDir']+_0xd89b81(0x1ec)+_0x2c6d27)['catch'](internal_utils_1[_0xd89b81(0x219)]),await shell_internal_1[_0xd89b81(0x206)][_0xd89b81(0x1eb)](_0xd89b81(0x1f6)+_0x5e8dd9[_0xd89b81(0x1e5)]+_0xd89b81(0x1f4)+_0x1ed883+_0xd89b81(0x21c))[_0xd89b81(0x1f8)](internal_utils_1['parseGitError']),await _0x5e8dd9[_0xd89b81(0x1f5)](_0x2c6d27),Git['logger'][_0xd89b81(0x1f0)]('clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch'),await fs_internal_1['FS'][_0xd89b81(0x1cf)](_0x5e8dd9[_0xd89b81(0x1e5)]);}}exports[a76_0xb3497d(0x21d)]=Git,Git[a76_0xb3497d(0x210)]=path_1[a76_0xb3497d(0x1f1)]['join'](process[a76_0xb3497d(0x1ee)](),a76_0xb3497d(0x1e4),a76_0xb3497d(0x209)),Git[a76_0xb3497d(0x1d8)]=new core_1[(a76_0xb3497d(0x1ea))](Git[a76_0xb3497d(0x1e1)]);