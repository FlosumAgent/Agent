const a76_0x4ad9e7=a76_0x1739;(function(_0x1476de,_0x2536a1){const _0x2ea3b5=a76_0x1739,_0x5b3df7=_0x1476de();while(!![]){try{const _0x1dda93=parseInt(_0x2ea3b5(0x176))/0x1*(-parseInt(_0x2ea3b5(0x17b))/0x2)+parseInt(_0x2ea3b5(0x16c))/0x3*(parseInt(_0x2ea3b5(0x186))/0x4)+parseInt(_0x2ea3b5(0x166))/0x5+parseInt(_0x2ea3b5(0x163))/0x6*(parseInt(_0x2ea3b5(0x1a6))/0x7)+parseInt(_0x2ea3b5(0x184))/0x8+-parseInt(_0x2ea3b5(0x19e))/0x9*(parseInt(_0x2ea3b5(0x198))/0xa)+-parseInt(_0x2ea3b5(0x1a9))/0xb;if(_0x1dda93===_0x2536a1)break;else _0x5b3df7['push'](_0x5b3df7['shift']());}catch(_0x5f4021){_0x5b3df7['push'](_0x5b3df7['shift']());}}}(a76_0x1828,0x90b4c));function a76_0x1739(_0x69c02b,_0x39d35b){const _0x52dceb=a76_0x1828();return a76_0x1739=function(_0x3977cf,_0x55863d){_0x3977cf=_0x3977cf-0x163;let _0x18283f=_0x52dceb[_0x3977cf];return _0x18283f;},a76_0x1739(_0x69c02b,_0x39d35b);}const a76_0x55863d=function(){let _0x135336=!![];return function(_0x164b5a,_0x105c56){const _0xaef744=_0x135336?function(){const _0x791e11=a76_0x1739;if(_0x105c56){const _0x493985=_0x105c56[_0x791e11(0x1aa)](_0x164b5a,arguments);return _0x105c56=null,_0x493985;}}:function(){};return _0x135336=![],_0xaef744;};}(),a76_0x3977cf=a76_0x55863d(this,function(){const _0x305f83=a76_0x1739;return a76_0x3977cf[_0x305f83(0x168)]()['search']('(((.+)+)+)+$')[_0x305f83(0x168)]()[_0x305f83(0x16f)](a76_0x3977cf)[_0x305f83(0x175)](_0x305f83(0x185));});a76_0x3977cf();'use strict';var __importDefault=this&&this[a76_0x4ad9e7(0x194)]||function(_0x28e694){return _0x28e694&&_0x28e694['__esModule']?_0x28e694:{'default':_0x28e694};};Object[a76_0x4ad9e7(0x180)](exports,'__esModule',{'value':!![]}),exports['Git']=void 0x0;const core_1=require('../../core'),path_1=__importDefault(require('path')),typedi_1=__importDefault(require(a76_0x4ad9e7(0x183))),branch_dto_1=require('../branches/dto/branch.dto'),auth_settings_service_1=require('../shared/services/auth-settings.service'),utils_1=require(a76_0x4ad9e7(0x196)),fs_internal_1=require(a76_0x4ad9e7(0x19c)),internal_utils_1=require(a76_0x4ad9e7(0x197)),shell_internal_1=require('./shell.internal');function a76_0x1828(){const _0x32ca17=['5783013RctIGt','\x20&&\x20git\x20checkout\x20--orphan\x20','init\x20repository','\x20&&\x20git\x20remote\x20add\x20origin\x20','getProtocol','baseDir','gitUrl','BranchDto','141715SCwghN','\x20&&\x20git\x20push\x20origin\x20','parseGitError','6431821mMUCru','apply','name','186BFjFRW','\x20&&\x20git\x20commit\x20-m\x20\x22','set\x20credentials\x20%s\x20(%s)','1632390ovDjaJ','map','toString','removeDir','\x22\x20&&\x20git\x20config\x20--local\x20user.email\x20\x22','makeDir','3ZKoahf','flosum-agent','exec','constructor','_repoPath','catch','default','\x20&&\x20git\x20status','Git','search','9HCdSJF','setCredentials','push','status','\x20&&\x20git\x20config\x20--local\x20user.name\x20\x22','85328KpWtWm','getRepositoryBranches','cwd','\x20--quiet','test','defineProperty','createEmptyBranch','Shell','typedi','8914256PYFfdR','(((.+)+)+)+$','542420RKjzoa','filter','git\x20ls-remote\x20','create\x20empty\x20branch\x20at\x20%s\x20name\x20%s\x20[%s]\x20%s','info','\x20&&\x20git\x20init','git','.temp','logger','AuthSettingsService','join','replace','cd\x20','clean\x20up\x20repository\x20directory\x20after\x20creating\x20branch','__importDefault','DEFAULT_CLONE_PATH','../shared/utils','./internal.utils','10GYWtpO','git\x20clone\x20-b\x20','commit\x20message\x20\x22%s\x22','commit','./fs.internal','add'];a76_0x1828=function(){return _0x32ca17;};return a76_0x1828();}class Git{constructor(_0x1a9e9c){const _0x177e42=a76_0x4ad9e7;this[_0x177e42(0x170)]=_0x1a9e9c;}get['baseDir'](){const _0xd256c4=a76_0x4ad9e7;return this[_0xd256c4(0x170)];}async['setCredentials'](_0x4f4d28,_0x4aa2bb){const _0x2352a4=a76_0x4ad9e7;Git[_0x2352a4(0x18e)]['info'](_0x2352a4(0x165),_0x4f4d28,_0x4aa2bb),await shell_internal_1['Shell'][_0x2352a4(0x16e)](_0x2352a4(0x192)+this[_0x2352a4(0x170)]+_0x2352a4(0x17a)+_0x4f4d28+_0x2352a4(0x16a)+_0x4aa2bb+'\x22')['catch'](internal_utils_1[_0x2352a4(0x1a8)]);}async[a76_0x4ad9e7(0x19d)](..._0x34ab8d){const _0x19f878=a76_0x4ad9e7;await shell_internal_1[_0x19f878(0x182)][_0x19f878(0x16e)](_0x19f878(0x192)+this['_repoPath']+'\x20&&\x20git\x20add\x20'+_0x34ab8d['join']('\x20'))['catch'](internal_utils_1[_0x19f878(0x1a8)]);}async[a76_0x4ad9e7(0x179)](){const _0x233cc4=a76_0x4ad9e7;return shell_internal_1[_0x233cc4(0x182)]['exec']('cd\x20'+this['_repoPath']+_0x233cc4(0x173))[_0x233cc4(0x171)](internal_utils_1[_0x233cc4(0x1a8)]);}async[a76_0x4ad9e7(0x19b)](_0x134c86){const _0xc01d08=a76_0x4ad9e7;Git[_0xc01d08(0x18e)][_0xc01d08(0x18a)](_0xc01d08(0x19a),_0x134c86),await shell_internal_1[_0xc01d08(0x182)][_0xc01d08(0x16e)](_0xc01d08(0x192)+this[_0xc01d08(0x170)]+'\x20&&\x20git\x20commit\x20-m\x20\x22'+_0x134c86+'\x22')[_0xc01d08(0x171)](internal_utils_1[_0xc01d08(0x1a8)]);}async[a76_0x4ad9e7(0x178)](_0x152c56){const _0x4c9751=a76_0x4ad9e7;Git[_0x4c9751(0x18e)]['info']('push\x20changes\x20to\x20%s',_0x152c56),await shell_internal_1[_0x4c9751(0x182)]['exec'](_0x4c9751(0x192)+this[_0x4c9751(0x170)]+_0x4c9751(0x1a7)+_0x152c56+_0x4c9751(0x17e))[_0x4c9751(0x171)](internal_utils_1['parseGitError']);}static async['clone'](_0x2943bb,_0x1b067e,_0x504608){const _0xfff001=a76_0x4ad9e7,_0xfb550f=path_1['default'][_0xfff001(0x190)](this['DEFAULT_CLONE_PATH'],_0x1b067e),_0x17efff=new Git(_0xfb550f);return Git[_0xfff001(0x18e)][_0xfff001(0x18a)]('clone\x20repository\x20branch\x20%s\x20from\x20%s\x20to\x20%s',_0x504608,_0x2943bb,_0xfb550f),await fs_internal_1['FS'][_0xfff001(0x169)](_0xfb550f),await shell_internal_1[_0xfff001(0x182)][_0xfff001(0x16e)](_0xfff001(0x199)+_0x504608+'\x20--single-branch\x20'+_0x2943bb+'\x20'+_0xfb550f)[_0xfff001(0x171)](()=>void 0x0),_0x17efff;}static async[a76_0x4ad9e7(0x17c)](_0x3906f4){const _0x5dcca4=a76_0x4ad9e7,_0x21a2dd=/(?:([a-f0-9]+)\s+((?:HEAD|refs\/heads\/).*))/,{gitCredentials:_0x1487d6}=typedi_1[_0x5dcca4(0x172)]['get'](auth_settings_service_1[_0x5dcca4(0x18f)]),_0x31738c=_0x3906f4[_0x5dcca4(0x1a4)][_0x5dcca4(0x191)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x5dcca4(0x1a2)])(_0x3906f4[_0x5dcca4(0x1a4)])+'://'+_0x1487d6+'@'),_0x1a66a5=await shell_internal_1[_0x5dcca4(0x182)][_0x5dcca4(0x16e)](_0x5dcca4(0x188)+_0x31738c),_0x26e577=_0x1a66a5['split']('\x0a')[_0x5dcca4(0x187)](_0x4e75a2=>_0x21a2dd[_0x5dcca4(0x17f)](_0x4e75a2))[_0x5dcca4(0x167)](_0x2a20e5=>{const _0x514584=_0x5dcca4,[,_0x19e4ba,_0x74b9f2]=_0x2a20e5['match'](_0x21a2dd),_0x5c8690=new branch_dto_1[(_0x514584(0x1a5))]();return _0x5c8690['sha']=_0x19e4ba,_0x5c8690['name']=_0x74b9f2[_0x514584(0x191)]('refs/heads/',''),_0x5c8690;});return _0x26e577;}static async[a76_0x4ad9e7(0x181)](_0x15ecc3,_0x59ed04,_0x447b01=a76_0x4ad9e7(0x1a0)){const _0x996b68=a76_0x4ad9e7,{gitCredentials:_0x547cba}=typedi_1[_0x996b68(0x172)]['get'](auth_settings_service_1[_0x996b68(0x18f)]),_0x40835f=_0x15ecc3[_0x996b68(0x1a4)][_0x996b68(0x191)](/http(s)?\:\/\/(.+@)?/,(0x0,utils_1[_0x996b68(0x1a2)])(_0x15ecc3['gitUrl'])+'://'+_0x547cba+'@'),_0x2e5722=path_1[_0x996b68(0x172)][_0x996b68(0x190)](this[_0x996b68(0x195)],_0x15ecc3[_0x996b68(0x1ab)]);Git[_0x996b68(0x18e)]['info'](_0x996b68(0x189),_0x15ecc3[_0x996b68(0x1ab)],_0x59ed04,_0x2e5722,_0x40835f),await fs_internal_1['FS']['removeDir'](_0x2e5722),await fs_internal_1['FS'][_0x996b68(0x16b)](_0x2e5722);const _0x3b8c90=new Git(_0x2e5722);await shell_internal_1['Shell'][_0x996b68(0x16e)](_0x996b68(0x192)+_0x3b8c90[_0x996b68(0x1a3)]+_0x996b68(0x18b))['catch'](internal_utils_1['parseGitError']),await shell_internal_1[_0x996b68(0x182)][_0x996b68(0x16e)](_0x996b68(0x192)+_0x3b8c90[_0x996b68(0x1a3)]+_0x996b68(0x1a1)+_0x40835f)[_0x996b68(0x171)](internal_utils_1['parseGitError']),await _0x3b8c90[_0x996b68(0x177)](_0x996b68(0x16d),'agent@flosum.com'),await shell_internal_1[_0x996b68(0x182)][_0x996b68(0x16e)](_0x996b68(0x192)+_0x3b8c90['baseDir']+_0x996b68(0x19f)+_0x59ed04)['catch'](internal_utils_1[_0x996b68(0x1a8)]),await shell_internal_1['Shell'][_0x996b68(0x16e)](_0x996b68(0x192)+_0x3b8c90[_0x996b68(0x1a3)]+_0x996b68(0x164)+_0x447b01+'\x22\x20--allow-empty')['catch'](internal_utils_1[_0x996b68(0x1a8)]),await _0x3b8c90['push'](_0x59ed04),Git[_0x996b68(0x18e)][_0x996b68(0x18a)](_0x996b68(0x193)),await fs_internal_1['FS'][_0x996b68(0x169)](_0x3b8c90[_0x996b68(0x1a3)]);}}exports[a76_0x4ad9e7(0x174)]=Git,Git[a76_0x4ad9e7(0x195)]=path_1[a76_0x4ad9e7(0x172)][a76_0x4ad9e7(0x190)](process[a76_0x4ad9e7(0x17d)](),a76_0x4ad9e7(0x18d),a76_0x4ad9e7(0x18c)),Git[a76_0x4ad9e7(0x18e)]=new core_1['Logger'](Git[a76_0x4ad9e7(0x1ab)]);