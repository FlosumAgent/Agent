const a92_0x2eac=['trying\x20to\x20establish\x20connection\x20to\x20salesforce','__metadata','salesforseSettings','design:paramtypes','__decorate','appSettings','decorate','SalesforceSettingsService','Connection','Body','1tuXBlJ','salesforce\x20connection\x20established','../../../core','object','../../shared/services/salesforce-settings.service','89zhtzGx','hasAuthorizedCredentials','__importDefault','remove\x20commit\x20%s','retrieveAttachment','SalesforceService','update','delete','retrieve\x20%d\x20components','/attachments/','apply','1WwINkQ','record','UnauthorizedError','/attachments','Attachment','metadata','ERR_MISSING_SALEFORCE_CONFIGURATION','connection','deleteCommit','retrieve\x20attachment\x20%s\x20from\x20salesforce','hasCredentials','__esModule','555992aTUEsf','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','namespace','salesforce-service','refreshToken','372510TqOlXP','data','defineProperty','apex','getOwnPropertyDescriptor','11738ONPNAL','jsforce','log','Logger','test','settings','../../shared/services/app-settings.service','blob','oauth2','default','138004kFYwXr','length','post','1RECdzC','405675rlFsqZ','/flosum_git','production','retrieve','function','AppSettingsService','967512jyoNpG','connect','end','../../../constants/errors','create\x20new\x20oauth\x20connection\x20from\x20given\x20credentials','748067VqMlbU'];const a92_0x293cd8=a92_0x1a73;(function(_0xe3e5a5,_0x2ace45){const _0x24af6a=a92_0x1a73;while(!![]){try{const _0x292236=parseInt(_0x24af6a(0x1f7))*-parseInt(_0x24af6a(0x1dc))+parseInt(_0x24af6a(0x21a))*parseInt(_0x24af6a(0x203))+parseInt(_0x24af6a(0x1d7))+-parseInt(_0x24af6a(0x1e7))*-parseInt(_0x24af6a(0x217))+parseInt(_0x24af6a(0x1ec))*-parseInt(_0x24af6a(0x20d))+parseInt(_0x24af6a(0x1d1))+parseInt(_0x24af6a(0x208));if(_0x292236===_0x2ace45)break;else _0xe3e5a5['push'](_0xe3e5a5['shift']());}catch(_0x32960){_0xe3e5a5['push'](_0xe3e5a5['shift']());}}}(a92_0x2eac,0x9df20));const a92_0x3c74a3=function(){let _0x2b6a68=!![];return function(_0x5935e4,_0x52504a){const _0x2156d2=_0x2b6a68?function(){const _0x3c5659=a92_0x1a73;if(_0x52504a){const _0x32ec80=_0x52504a[_0x3c5659(0x1f6)](_0x5935e4,arguments);return _0x52504a=null,_0x32ec80;}}:function(){};return _0x2b6a68=![],_0x2156d2;};}(),a92_0x4b6f08=a92_0x3c74a3(this,function(){const _0x1ffcdf=function(){const _0x47f534=a92_0x1a73,_0x5b90a3=_0x1ffcdf['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x47f534(0x204));return!_0x5b90a3[_0x47f534(0x211)](a92_0x4b6f08);};return _0x1ffcdf();});a92_0x4b6f08();'use strict';var __decorate=this&&this[a92_0x293cd8(0x1e1)]||function(_0x2fce90,_0x5d7c57,_0x2005a9,_0x2b0cc2){const _0x2a9804=a92_0x293cd8;var _0x9b1707=arguments[_0x2a9804(0x218)],_0x34f709=_0x9b1707<0x3?_0x5d7c57:_0x2b0cc2===null?_0x2b0cc2=Object[_0x2a9804(0x20c)](_0x5d7c57,_0x2005a9):_0x2b0cc2,_0x3743d5;if(typeof Reflect===_0x2a9804(0x1ea)&&typeof Reflect[_0x2a9804(0x1e3)]===_0x2a9804(0x1d5))_0x34f709=Reflect[_0x2a9804(0x1e3)](_0x2fce90,_0x5d7c57,_0x2005a9,_0x2b0cc2);else{for(var _0x132c51=_0x2fce90[_0x2a9804(0x218)]-0x1;_0x132c51>=0x0;_0x132c51--)if(_0x3743d5=_0x2fce90[_0x132c51])_0x34f709=(_0x9b1707<0x3?_0x3743d5(_0x34f709):_0x9b1707>0x3?_0x3743d5(_0x5d7c57,_0x2005a9,_0x34f709):_0x3743d5(_0x5d7c57,_0x2005a9))||_0x34f709;}return _0x9b1707>0x3&&_0x34f709&&Object[_0x2a9804(0x20a)](_0x5d7c57,_0x2005a9,_0x34f709),_0x34f709;},__metadata=this&&this[a92_0x293cd8(0x1de)]||function(_0x3c2af7,_0x38ff50){const _0x2bca7f=a92_0x293cd8;if(typeof Reflect===_0x2bca7f(0x1ea)&&typeof Reflect[_0x2bca7f(0x1fc)]===_0x2bca7f(0x1d5))return Reflect['metadata'](_0x3c2af7,_0x38ff50);},__importDefault=this&&this[a92_0x293cd8(0x1ee)]||function(_0x48bd3e){const _0x4f470f=a92_0x293cd8;return _0x48bd3e&&_0x48bd3e[_0x4f470f(0x202)]?_0x48bd3e:{'default':_0x48bd3e};};Object['defineProperty'](exports,a92_0x293cd8(0x202),{'value':!![]}),exports[a92_0x293cd8(0x1f1)]=void 0x0;function a92_0x1a73(_0x23761c,_0x170fed){return a92_0x1a73=function(_0x101461,_0x4b6f08){_0x101461=_0x101461-0x1d1;let _0x3c74a3=a92_0x2eac[_0x101461];return _0x3c74a3;},a92_0x1a73(_0x23761c,_0x170fed);}const typedi_1=require('typedi'),jsforce_1=__importDefault(require(a92_0x293cd8(0x20e))),unauthorized_error_1=require('../../../core/errors/unauthorized.error'),errors_1=require(a92_0x293cd8(0x1da)),core_1=require(a92_0x293cd8(0x1e9)),salesforce_settings_service_1=require(a92_0x293cd8(0x1eb)),app_settings_service_1=require(a92_0x293cd8(0x213)),logger=new core_1[(a92_0x293cd8(0x210))](a92_0x293cd8(0x206));let SalesforceService=class SalesforceService{constructor(_0x3421ee,_0x9ee5d4){const _0x20d709=a92_0x293cd8;this[_0x20d709(0x1df)]=_0x3421ee,this[_0x20d709(0x1e2)]=_0x9ee5d4,this['namespace']=this[_0x20d709(0x1e2)]['env']===_0x20d709(0x1d3)?_0x20d709(0x1d2):'';}get['settings'](){const _0x887aa9=a92_0x293cd8;return this['salesforseSettings'][_0x887aa9(0x212)];}async[a92_0x293cd8(0x1d8)](){const _0x18e2a3=a92_0x293cd8;logger[_0x18e2a3(0x20f)](_0x18e2a3(0x1dd));if(!this['salesforseSettings'][_0x18e2a3(0x201)])throw new unauthorized_error_1[(_0x18e2a3(0x1f9))](errors_1[_0x18e2a3(0x1fd)]);const {clientId:_0x219e5f,clientSecret:_0x1189d7,refreshToken:_0x1a764f}=this[_0x18e2a3(0x212)],_0x46ca69={'clientId':_0x219e5f,'clientSecret':_0x1189d7,'loginUrl':this['salesforseSettings']['loginUrl']};if(!this['salesforseSettings'][_0x18e2a3(0x1ed)]){logger[_0x18e2a3(0x20f)](_0x18e2a3(0x1db));const _0x22edf6=new jsforce_1[(_0x18e2a3(0x216))][(_0x18e2a3(0x1e5))](_0x46ca69),{access_token:_0x4953b5,instance_url:_0x34568f}=await _0x22edf6[_0x18e2a3(0x215)][_0x18e2a3(0x207)](_0x1a764f);await this[_0x18e2a3(0x1df)][_0x18e2a3(0x1f2)]({'accessToken':_0x4953b5,'instanceUrl':_0x34568f});}const {accessToken:_0x286624,instanceUrl:_0x340a5f}=this['settings'];this[_0x18e2a3(0x1fe)]=new jsforce_1[(_0x18e2a3(0x216))][(_0x18e2a3(0x1e5))]({'oauth2':_0x46ca69,'refreshToken':_0x1a764f,'accessToken':_0x286624,'instanceUrl':_0x340a5f}),logger[_0x18e2a3(0x20f)](_0x18e2a3(0x1e8));}async[a92_0x293cd8(0x1d4)](_0x304a2d){const _0x252fc8=a92_0x293cd8;return logger[_0x252fc8(0x20f)](_0x252fc8(0x1f4),_0x304a2d[_0x252fc8(0x218)]),this['connection'][_0x252fc8(0x20b)][_0x252fc8(0x219)](this['namespace']+_0x252fc8(0x1fa),{'componentIds':_0x304a2d});}async[a92_0x293cd8(0x1ff)](_0x542e0b){const _0x164c4d=a92_0x293cd8;logger[_0x164c4d(0x20f)](_0x164c4d(0x1ef),_0x542e0b),await this[_0x164c4d(0x1fe)][_0x164c4d(0x20b)][_0x164c4d(0x1f3)](this[_0x164c4d(0x205)]+_0x164c4d(0x1f5)+_0x542e0b);}async[a92_0x293cd8(0x1f0)](_0x4a9c4a){const _0x4e5337=a92_0x293cd8;return logger[_0x4e5337(0x20f)](_0x4e5337(0x200),_0x4a9c4a),new Promise((_0x3125fb,_0xaa72ab)=>{const _0x1dd934=_0x4e5337,_0x4f3715=[],_0x2ad74e=this['connection']['sobject'](_0x1dd934(0x1fb))[_0x1dd934(0x1f8)](_0x4a9c4a)[_0x1dd934(0x214)](_0x1dd934(0x1e6));_0x2ad74e['on']('error',_0xaa72ab),_0x2ad74e['on'](_0x1dd934(0x209),_0x5f3315=>_0x4f3715['push'](_0x5f3315)),_0x2ad74e['on'](_0x1dd934(0x1d9),()=>_0x3125fb(_0x4f3715['join']('')));});}async['log'](_0xce0925){const _0x1c1c64=a92_0x293cd8;await this['connection']['apex'][_0x1c1c64(0x219)](this[_0x1c1c64(0x205)]+'/logger',{'message':_0xce0925});}};SalesforceService=__decorate([typedi_1['Service'](),__metadata(a92_0x293cd8(0x1e0),[salesforce_settings_service_1[a92_0x293cd8(0x1e4)],app_settings_service_1[a92_0x293cd8(0x1d6)]])],SalesforceService),exports[a92_0x293cd8(0x1f1)]=SalesforceService;