const a95_0x5dfc=['../../../core','1142179pVtegS','data','apex','Service','/logger','824224XZuTfJ','516289znKyqf','namespace','settings','/attachments/','test','../../shared/services/salesforce-settings.service','__importDefault','SalesforceService','905ELXfZS','end','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','appSettings','function','../../../constants/errors','929521SUwGnv','2wjBfNN','decorate','object','typedi','default','join','sobject','push','getOwnPropertyDescriptor','Logger','1541XxnBWm','/attachments','loginUrl','AppSettingsService','__metadata','retrieveAttachment','log','delete','constructor','retrieve','Attachment','retrieve\x20attachment\x20%s\x20from\x20salesforce','metadata','remove\x20commit\x20%s','post','connect','trying\x20to\x20establish\x20connection\x20to\x20salesforce','hasAuthorizedCredentials','/flosum_git','__esModule','Connection','1223116JHittQ','503774gqlcCK','return\x20/\x22\x20+\x20this\x20+\x20\x22/','create\x20new\x20oauth\x20connection\x20from\x20given\x20credentials','error','connection','length','salesforce-service','salesforce\x20connection\x20established','1INPsDu','salesforseSettings'];const a95_0x522fc6=a95_0x2a54;(function(_0x4dc0bf,_0x4d5804){const _0x53385b=a95_0x2a54;while(!![]){try{const _0x132b58=parseInt(_0x53385b(0x1bc))+-parseInt(_0x53385b(0x1bb))+-parseInt(_0x53385b(0x1cc))+parseInt(_0x53385b(0x1c4))*-parseInt(_0x53385b(0x1c7))+parseInt(_0x53385b(0x1db))+-parseInt(_0x53385b(0x1dc))*-parseInt(_0x53385b(0x1cd))+parseInt(_0x53385b(0x1e6))*parseInt(_0x53385b(0x1d5));if(_0x132b58===_0x4d5804)break;else _0x4dc0bf['push'](_0x4dc0bf['shift']());}catch(_0x1b5ff5){_0x4dc0bf['push'](_0x4dc0bf['shift']());}}}(a95_0x5dfc,0xa3cef));function a95_0x2a54(_0x55d410,_0x45f2fe){return a95_0x2a54=function(_0x20efff,_0x1bab53){_0x20efff=_0x20efff-0x1af;let _0x3bb386=a95_0x5dfc[_0x20efff];return _0x3bb386;},a95_0x2a54(_0x55d410,_0x45f2fe);}const a95_0x3bb386=function(){let _0x2294cf=!![];return function(_0x541194,_0x5a95f9){const _0x4ad5bb=_0x2294cf?function(){if(_0x5a95f9){const _0x19287a=_0x5a95f9['apply'](_0x541194,arguments);return _0x5a95f9=null,_0x19287a;}}:function(){};return _0x2294cf=![],_0x4ad5bb;};}(),a95_0x1bab53=a95_0x3bb386(this,function(){const _0x3a8b28=function(){const _0x5a6b4a=a95_0x2a54,_0x22d5c3=_0x3a8b28[_0x5a6b4a(0x1ee)](_0x5a6b4a(0x1bd))()['constructor'](_0x5a6b4a(0x1d7));return!_0x22d5c3[_0x5a6b4a(0x1d1)](a95_0x1bab53);};return _0x3a8b28();});a95_0x1bab53();'use strict';var __decorate=this&&this['__decorate']||function(_0x58f17f,_0x1ec0cc,_0x525c1a,_0x33d67c){const _0x2cd852=a95_0x2a54;var _0x17d585=arguments[_0x2cd852(0x1c1)],_0x41d811=_0x17d585<0x3?_0x1ec0cc:_0x33d67c===null?_0x33d67c=Object[_0x2cd852(0x1e4)](_0x1ec0cc,_0x525c1a):_0x33d67c,_0x4421a8;if(typeof Reflect===_0x2cd852(0x1de)&&typeof Reflect['decorate']===_0x2cd852(0x1d9))_0x41d811=Reflect[_0x2cd852(0x1dd)](_0x58f17f,_0x1ec0cc,_0x525c1a,_0x33d67c);else{for(var _0x2cff0d=_0x58f17f['length']-0x1;_0x2cff0d>=0x0;_0x2cff0d--)if(_0x4421a8=_0x58f17f[_0x2cff0d])_0x41d811=(_0x17d585<0x3?_0x4421a8(_0x41d811):_0x17d585>0x3?_0x4421a8(_0x1ec0cc,_0x525c1a,_0x41d811):_0x4421a8(_0x1ec0cc,_0x525c1a))||_0x41d811;}return _0x17d585>0x3&&_0x41d811&&Object['defineProperty'](_0x1ec0cc,_0x525c1a,_0x41d811),_0x41d811;},__metadata=this&&this[a95_0x522fc6(0x1ea)]||function(_0x5341e6,_0x58fb74){const _0x15ae62=a95_0x522fc6;if(typeof Reflect===_0x15ae62(0x1de)&&typeof Reflect[_0x15ae62(0x1b2)]===_0x15ae62(0x1d9))return Reflect[_0x15ae62(0x1b2)](_0x5341e6,_0x58fb74);},__importDefault=this&&this[a95_0x522fc6(0x1d3)]||function(_0x3b1a80){const _0x2ec529=a95_0x522fc6;return _0x3b1a80&&_0x3b1a80[_0x2ec529(0x1b9)]?_0x3b1a80:{'default':_0x3b1a80};};Object['defineProperty'](exports,a95_0x522fc6(0x1b9),{'value':!![]}),exports['SalesforceService']=void 0x0;const typedi_1=require(a95_0x522fc6(0x1df)),jsforce_1=__importDefault(require('jsforce')),unauthorized_error_1=require('../../../core/errors/unauthorized.error'),errors_1=require(a95_0x522fc6(0x1da)),core_1=require(a95_0x522fc6(0x1c6)),salesforce_settings_service_1=require(a95_0x522fc6(0x1d2)),app_settings_service_1=require('../../shared/services/app-settings.service'),logger=new core_1[(a95_0x522fc6(0x1e5))](a95_0x522fc6(0x1c2));let SalesforceService=class SalesforceService{constructor(_0x3c794c,_0x408b52){const _0x396a6a=a95_0x522fc6;this[_0x396a6a(0x1c5)]=_0x3c794c,this['appSettings']=_0x408b52,this['namespace']=this[_0x396a6a(0x1d8)]['env']==='production'?_0x396a6a(0x1b8):'';}get['settings'](){const _0x1c7ee2=a95_0x522fc6;return this[_0x1c7ee2(0x1c5)]['settings'];}async[a95_0x522fc6(0x1b5)](){const _0x32878f=a95_0x522fc6;logger['log'](_0x32878f(0x1b6));if(!this[_0x32878f(0x1c5)]['hasCredentials'])throw new unauthorized_error_1['UnauthorizedError'](errors_1['ERR_MISSING_SALEFORCE_CONFIGURATION']);const {clientId:_0x16d20f,clientSecret:_0x27eef4,refreshToken:_0x5df93d}=this['settings'],_0x1579ec={'clientId':_0x16d20f,'clientSecret':_0x27eef4,'loginUrl':this[_0x32878f(0x1c5)][_0x32878f(0x1e8)]};if(!this[_0x32878f(0x1c5)][_0x32878f(0x1b7)]){logger[_0x32878f(0x1ec)](_0x32878f(0x1be));const _0x466409=new jsforce_1[(_0x32878f(0x1e0))][(_0x32878f(0x1ba))](_0x1579ec),{access_token:_0x257c1b,instance_url:_0x2e2415}=await _0x466409['oauth2']['refreshToken'](_0x5df93d);await this['salesforseSettings']['update']({'accessToken':_0x257c1b,'instanceUrl':_0x2e2415});}const {accessToken:_0xa2560b,instanceUrl:_0x5889d7}=this[_0x32878f(0x1cf)];this['connection']=new jsforce_1[(_0x32878f(0x1e0))]['Connection']({'oauth2':_0x1579ec,'refreshToken':_0x5df93d,'accessToken':_0xa2560b,'instanceUrl':_0x5889d7}),logger['log'](_0x32878f(0x1c3));}async[a95_0x522fc6(0x1af)](_0x3bff66){const _0x3fb7e9=a95_0x522fc6;return logger[_0x3fb7e9(0x1ec)]('retrieve\x20%d\x20components',_0x3bff66[_0x3fb7e9(0x1c1)]),this[_0x3fb7e9(0x1c0)][_0x3fb7e9(0x1c9)][_0x3fb7e9(0x1b4)](this[_0x3fb7e9(0x1ce)]+_0x3fb7e9(0x1e7),{'componentIds':_0x3bff66});}async['deleteCommit'](_0x4e32c9){const _0x1a0e9e=a95_0x522fc6;logger[_0x1a0e9e(0x1ec)](_0x1a0e9e(0x1b3),_0x4e32c9),await this[_0x1a0e9e(0x1c0)]['apex'][_0x1a0e9e(0x1ed)](this[_0x1a0e9e(0x1ce)]+_0x1a0e9e(0x1d0)+_0x4e32c9);}async[a95_0x522fc6(0x1eb)](_0x49b7eb){const _0x44be7a=a95_0x522fc6;return logger[_0x44be7a(0x1ec)](_0x44be7a(0x1b1),_0x49b7eb),new Promise((_0x247708,_0xab8cbf)=>{const _0x2abbf7=_0x44be7a,_0x41417b=[],_0x355fc8=this[_0x2abbf7(0x1c0)][_0x2abbf7(0x1e2)](_0x2abbf7(0x1b0))['record'](_0x49b7eb)['blob']('Body');_0x355fc8['on'](_0x2abbf7(0x1bf),_0xab8cbf),_0x355fc8['on'](_0x2abbf7(0x1c8),_0x29ae65=>_0x41417b[_0x2abbf7(0x1e3)](_0x29ae65)),_0x355fc8['on'](_0x2abbf7(0x1d6),()=>_0x247708(_0x41417b[_0x2abbf7(0x1e1)]('')));});}async[a95_0x522fc6(0x1ec)](_0x565efe){const _0x23dbea=a95_0x522fc6;await this[_0x23dbea(0x1c0)][_0x23dbea(0x1c9)][_0x23dbea(0x1b4)](this['namespace']+_0x23dbea(0x1cb),{'message':_0x565efe});}};SalesforceService=__decorate([typedi_1[a95_0x522fc6(0x1ca)](),__metadata('design:paramtypes',[salesforce_settings_service_1['SalesforceSettingsService'],app_settings_service_1[a95_0x522fc6(0x1e9)]])],SalesforceService),exports[a95_0x522fc6(0x1d4)]=SalesforceService;