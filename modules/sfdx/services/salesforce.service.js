const a91_0x50b1=['return\x20/\x22\x20+\x20this\x20+\x20\x22/','log','remove\x20commit\x20%s','settings','update','SalesforceService','14587PYuCFq','288163DzCyTy','loginUrl','Logger','typedi','2wQynwA','salesforce\x20connection\x20established','retrieve\x20%d\x20components','734234ikLrsj','../../../constants/errors','Body','/flosum-git/logger','2Bhefln','default','Attachment','Service','create\x20new\x20oauth\x20connection\x20from\x20given\x20credentials','record','../../shared/services/salesforce-settings.service','1eswcPG','function','14743OWMHds','hasCredentials','connect','23HvRHkB','__importDefault','hasAuthorizedCredentials','test','2vnwCki','retrieve','metadata','salesforseSettings','../../../core/errors/unauthorized.error','493523iNmqJk','blob','end','__esModule','decorate','object','apply','post','data','delete','trying\x20to\x20establish\x20connection\x20to\x20salesforce','UnauthorizedError','length','__decorate','refreshToken','design:paramtypes','SalesforceSettingsService','error','/flosum-git/attachments','sobject','oauth2','591110MCiszk','join','../../../core','salesforce-service','defineProperty','apex','connection','57727sHVOkU','retrieve\x20attachment\x20%s\x20from\x20salesforce','retrieveAttachment','__metadata'];const a91_0x4b76de=a91_0x9052;(function(_0x2795ab,_0xc8854f){const _0xa06d6d=a91_0x9052;while(!![]){try{const _0x2a8e6c=parseInt(_0xa06d6d(0x17a))*-parseInt(_0xa06d6d(0x16b))+parseInt(_0xa06d6d(0x175))*-parseInt(_0xa06d6d(0x181))+-parseInt(_0xa06d6d(0x14f))+parseInt(_0xa06d6d(0x176))*-parseInt(_0xa06d6d(0x188))+parseInt(_0xa06d6d(0x17d))+parseInt(_0xa06d6d(0x164))*parseInt(_0xa06d6d(0x191))+-parseInt(_0xa06d6d(0x18a))*parseInt(_0xa06d6d(0x18d));if(_0x2a8e6c===_0xc8854f)break;else _0x2795ab['push'](_0x2795ab['shift']());}catch(_0x3176be){_0x2795ab['push'](_0x2795ab['shift']());}}}(a91_0x50b1,0x9ef2b));const a91_0x2a96e4=function(){let _0x4de01f=!![];return function(_0x9fd548,_0x440f8d){const _0x4b44b3=_0x4de01f?function(){const _0xdefdee=a91_0x9052;if(_0x440f8d){const _0x49ca56=_0x440f8d[_0xdefdee(0x155)](_0x9fd548,arguments);return _0x440f8d=null,_0x49ca56;}}:function(){};return _0x4de01f=![],_0x4b44b3;};}(),a91_0xeef7cc=a91_0x2a96e4(this,function(){const _0x158db6=function(){const _0x1cc2dd=a91_0x9052,_0x437c91=_0x158db6['constructor'](_0x1cc2dd(0x16f))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x437c91[_0x1cc2dd(0x190)](a91_0xeef7cc);};return _0x158db6();});a91_0xeef7cc();'use strict';var __decorate=this&&this[a91_0x4b76de(0x15c)]||function(_0x3c4a5f,_0x13ec92,_0x36d126,_0x45d097){const _0xe7d06c=a91_0x4b76de;var _0x4a10f7=arguments[_0xe7d06c(0x15b)],_0xb0de14=_0x4a10f7<0x3?_0x13ec92:_0x45d097===null?_0x45d097=Object['getOwnPropertyDescriptor'](_0x13ec92,_0x36d126):_0x45d097,_0x375e3f;if(typeof Reflect===_0xe7d06c(0x154)&&typeof Reflect['decorate']===_0xe7d06c(0x189))_0xb0de14=Reflect[_0xe7d06c(0x153)](_0x3c4a5f,_0x13ec92,_0x36d126,_0x45d097);else{for(var _0x214c87=_0x3c4a5f[_0xe7d06c(0x15b)]-0x1;_0x214c87>=0x0;_0x214c87--)if(_0x375e3f=_0x3c4a5f[_0x214c87])_0xb0de14=(_0x4a10f7<0x3?_0x375e3f(_0xb0de14):_0x4a10f7>0x3?_0x375e3f(_0x13ec92,_0x36d126,_0xb0de14):_0x375e3f(_0x13ec92,_0x36d126))||_0xb0de14;}return _0x4a10f7>0x3&&_0xb0de14&&Object[_0xe7d06c(0x168)](_0x13ec92,_0x36d126,_0xb0de14),_0xb0de14;},__metadata=this&&this[a91_0x4b76de(0x16e)]||function(_0x116f8b,_0x1f4fce){const _0x31583c=a91_0x4b76de;if(typeof Reflect==='object'&&typeof Reflect[_0x31583c(0x193)]===_0x31583c(0x189))return Reflect['metadata'](_0x116f8b,_0x1f4fce);},__importDefault=this&&this[a91_0x4b76de(0x18e)]||function(_0xe46121){return _0xe46121&&_0xe46121['__esModule']?_0xe46121:{'default':_0xe46121};};Object[a91_0x4b76de(0x168)](exports,a91_0x4b76de(0x152),{'value':!![]}),exports[a91_0x4b76de(0x174)]=void 0x0;function a91_0x9052(_0x588cfc,_0x45610a){return a91_0x9052=function(_0x18a9a4,_0xeef7cc){_0x18a9a4=_0x18a9a4-0x14d;let _0x2a96e4=a91_0x50b1[_0x18a9a4];return _0x2a96e4;},a91_0x9052(_0x588cfc,_0x45610a);}const typedi_1=require(a91_0x4b76de(0x179)),jsforce_1=__importDefault(require('jsforce')),unauthorized_error_1=require(a91_0x4b76de(0x14e)),errors_1=require(a91_0x4b76de(0x17e)),core_1=require(a91_0x4b76de(0x166)),salesforce_settings_service_1=require(a91_0x4b76de(0x187)),logger=new core_1[(a91_0x4b76de(0x178))](a91_0x4b76de(0x167));let SalesforceService=class SalesforceService{constructor(_0x397c6c){const _0x226e7c=a91_0x4b76de;this[_0x226e7c(0x14d)]=_0x397c6c;}get[a91_0x4b76de(0x172)](){const _0x417776=a91_0x4b76de;return this['salesforseSettings'][_0x417776(0x172)];}async[a91_0x4b76de(0x18c)](){const _0x52bc9e=a91_0x4b76de;logger[_0x52bc9e(0x170)](_0x52bc9e(0x159));if(!this[_0x52bc9e(0x14d)][_0x52bc9e(0x18b)])throw new unauthorized_error_1[(_0x52bc9e(0x15a))](errors_1['ERR_MISSING_SALEFORCE_CONFIGURATION']);const {clientId:_0x2942db,clientSecret:_0x1ea907,refreshToken:_0x1ae6de}=this[_0x52bc9e(0x172)],_0x478e81={'clientId':_0x2942db,'clientSecret':_0x1ea907,'loginUrl':this[_0x52bc9e(0x14d)][_0x52bc9e(0x177)]};if(!this[_0x52bc9e(0x14d)][_0x52bc9e(0x18f)]){logger['log'](_0x52bc9e(0x185));const _0xb9ed7=new jsforce_1[(_0x52bc9e(0x182))]['Connection'](_0x478e81),{access_token:_0x2f5d73,instance_url:_0x47e358}=await _0xb9ed7[_0x52bc9e(0x163)][_0x52bc9e(0x15d)](_0x1ae6de);await this['salesforseSettings'][_0x52bc9e(0x173)]({'accessToken':_0x2f5d73,'instanceUrl':_0x47e358});}const {accessToken:_0x54e695,instanceUrl:_0x2db3fe}=this[_0x52bc9e(0x172)];this[_0x52bc9e(0x16a)]=new jsforce_1[(_0x52bc9e(0x182))]['Connection']({'oauth2':_0x478e81,'refreshToken':_0x1ae6de,'accessToken':_0x54e695,'instanceUrl':_0x2db3fe}),logger[_0x52bc9e(0x170)](_0x52bc9e(0x17b));}async[a91_0x4b76de(0x192)](_0x327472){const _0x3bb593=a91_0x4b76de;return logger['log'](_0x3bb593(0x17c),_0x327472[_0x3bb593(0x15b)]),this['connection']['apex'][_0x3bb593(0x156)](_0x3bb593(0x161),{'componentIds':_0x327472});}async['deleteCommit'](_0x211cfc){const _0x59f12a=a91_0x4b76de;logger[_0x59f12a(0x170)](_0x59f12a(0x171),_0x211cfc),await this[_0x59f12a(0x16a)][_0x59f12a(0x169)][_0x59f12a(0x158)]('/flosum-git/attachments/'+_0x211cfc);}async[a91_0x4b76de(0x16d)](_0x2578f5){const _0x14c180=a91_0x4b76de;return logger[_0x14c180(0x170)](_0x14c180(0x16c),_0x2578f5),new Promise((_0x4b49ac,_0x3b12eb)=>{const _0x3f36ae=_0x14c180,_0x2260fe=[],_0x4411a0=this[_0x3f36ae(0x16a)][_0x3f36ae(0x162)](_0x3f36ae(0x183))[_0x3f36ae(0x186)](_0x2578f5)[_0x3f36ae(0x150)](_0x3f36ae(0x17f));_0x4411a0['on'](_0x3f36ae(0x160),_0x3b12eb),_0x4411a0['on'](_0x3f36ae(0x157),_0x277860=>_0x2260fe['push'](_0x277860)),_0x4411a0['on'](_0x3f36ae(0x151),()=>_0x4b49ac(_0x2260fe[_0x3f36ae(0x165)]('')));});}async[a91_0x4b76de(0x170)](_0x36032c){const _0x442a6e=a91_0x4b76de;await this[_0x442a6e(0x16a)][_0x442a6e(0x169)][_0x442a6e(0x156)](_0x442a6e(0x180),{'message':_0x36032c});}};SalesforceService=__decorate([typedi_1[a91_0x4b76de(0x184)](),__metadata(a91_0x4b76de(0x15e),[salesforce_settings_service_1[a91_0x4b76de(0x15f)]])],SalesforceService),exports['SalesforceService']=SalesforceService;