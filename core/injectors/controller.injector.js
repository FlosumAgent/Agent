const a22_0x5928=['use','defineProperty','\x20at\x20','injecting\x20','map','META_CONTROLLER_PATH','ControllerInjector','../wrappers/handler.wrapper','injectMiddlewares','log','controller-injector','normalizePaths','injecting\x20nested\x20','750116aghUwy','injectNestedController','router','constructor','__esModule','prefix','test','getOwnPropertyNames','617000CZNBgp','getHandlerMeta','../constants','235768vdygRK','759892wRIWgf','middlewares','META_CONTROLLER','filter','getPrototypeOf','META_CONTROLLER_VERSION','\x20at\x20[','get','toLowerCase','express','getOwnMetadata','../utils','toString','511403YcyTcn','1xjHyQy','__importDefault','Logger','controllerType','root','inject','injectHandlers','96055nACqtn','./middleware.injector','instance','handlers','typedi','nested','method','name','return\x20/\x22\x20+\x20this\x20+\x20\x22/','apply','CONTROLLER_DEFAULT_PREFIX','handlerWrapper','1245137pIRocB','path','nestedPath'];const a22_0xd86d91=a22_0x2b62;(function(_0x406886,_0x10a534){const _0x4adceb=a22_0x2b62;while(!![]){try{const _0x2a1da5=parseInt(_0x4adceb(0xa9))+parseInt(_0x4adceb(0xbf))+-parseInt(_0x4adceb(0xb7))+parseInt(_0x4adceb(0xaa))+parseInt(_0x4adceb(0xb8))*-parseInt(_0x4adceb(0x9e))+-parseInt(_0x4adceb(0xa6))+parseInt(_0x4adceb(0xcb));if(_0x2a1da5===_0x10a534)break;else _0x406886['push'](_0x406886['shift']());}catch(_0x4f9d14){_0x406886['push'](_0x406886['shift']());}}}(a22_0x5928,0x6fe5d));function a22_0x2b62(_0x57c127,_0x22a3ef){return a22_0x2b62=function(_0x4ce3cc,_0xc09077){_0x4ce3cc=_0x4ce3cc-0x91;let _0x39e6d9=a22_0x5928[_0x4ce3cc];return _0x39e6d9;},a22_0x2b62(_0x57c127,_0x22a3ef);}const a22_0x39e6d9=function(){let _0x17e0ca=!![];return function(_0xfecc40,_0x356437){const _0xcd879e=_0x17e0ca?function(){const _0x418a56=a22_0x2b62;if(_0x356437){const _0x32017c=_0x356437[_0x418a56(0xc8)](_0xfecc40,arguments);return _0x356437=null,_0x32017c;}}:function(){};return _0x17e0ca=![],_0xcd879e;};}(),a22_0xc09077=a22_0x39e6d9(this,function(){const _0x4ea34e=function(){const _0x127560=a22_0x2b62,_0x36d27b=_0x4ea34e[_0x127560(0xa1)](_0x127560(0xc7))()[_0x127560(0xa1)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x36d27b[_0x127560(0xa4)](a22_0xc09077);};return _0x4ea34e();});a22_0xc09077();'use strict';var __importDefault=this&&this[a22_0xd86d91(0xb9)]||function(_0x2a5c71){const _0x5b1b4c=a22_0xd86d91;return _0x2a5c71&&_0x2a5c71[_0x5b1b4c(0xa2)]?_0x2a5c71:{'default':_0x2a5c71};};Object[a22_0xd86d91(0x92)](exports,a22_0xd86d91(0xa2),{'value':!![]}),exports[a22_0xd86d91(0x97)]=void 0x0;const express_1=require(a22_0xd86d91(0xb3)),typedi_1=__importDefault(require(a22_0xd86d91(0xc3))),logger_class_1=require('../classes/logger.class'),constants_1=require(a22_0xd86d91(0xa8)),utils_1=require(a22_0xd86d91(0xb5)),handler_wrapper_1=require(a22_0xd86d91(0x98)),middleware_injector_1=require(a22_0xd86d91(0xc0)),logger=new logger_class_1[(a22_0xd86d91(0xba))](a22_0xd86d91(0x9b));class ControllerInjector{constructor(_0x5ca10a,_0x277cb){const _0x305934=a22_0xd86d91;this[_0x305934(0xbb)]=_0x5ca10a,this[_0x305934(0xbc)]=_0x277cb,this[_0x305934(0xa0)]=express_1['Router']({'mergeParams':!![]}),this[_0x305934(0xcd)]='';if(!Reflect[_0x305934(0xb4)](constants_1[_0x305934(0xac)],_0x5ca10a))throw TypeError(_0x5ca10a['name']+'\x20is\x20not\x20a\x20Controller');}get[a22_0xd86d91(0xc2)](){const _0x300072=a22_0xd86d91,_0x2559fe=Object[_0x300072(0xae)](this['instance']);return Object[_0x300072(0xa5)](_0x2559fe)[_0x300072(0x95)](_0x48c65c=>_0x2559fe[_0x48c65c])[_0x300072(0xad)](_0xed0720=>!!Reflect[_0x300072(0xb4)](constants_1['META_HANDLER'],_0xed0720));}get[a22_0xd86d91(0xab)](){const _0x289d57=a22_0xd86d91;return Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_MIDDLEWARES'],this[_0x289d57(0xc1)])||[];}get['prefix'](){const _0x3a2ca3=a22_0xd86d91;var _0x590a14;const _0x907e03=(_0x590a14=Reflect[_0x3a2ca3(0xb4)](constants_1['META_CONTROLLER_PREFIX'],this[_0x3a2ca3(0xbb)]))!==null&&_0x590a14!==void 0x0?_0x590a14:constants_1[_0x3a2ca3(0xc9)],_0x35ec3b=Reflect[_0x3a2ca3(0xb4)](constants_1[_0x3a2ca3(0xaf)],this[_0x3a2ca3(0xbb)])||'';return this[_0x3a2ca3(0xcd)]?'':utils_1[_0x3a2ca3(0x9c)](_0x907e03,_0x35ec3b);}get[a22_0xd86d91(0xcc)](){const _0x10309e=a22_0xd86d91;if(this['nestedPath'])return this['nestedPath'];const _0x4bad61=Reflect[_0x10309e(0xb4)](constants_1[_0x10309e(0x96)],this[_0x10309e(0xbb)])||'';return utils_1[_0x10309e(0x9c)](_0x4bad61);}get[a22_0xd86d91(0xc1)](){const _0x1e6f91=a22_0xd86d91;return typedi_1['default'][_0x1e6f91(0xb1)](this[_0x1e6f91(0xbb)]);}async['injectMiddlewares'](){const _0x3a7f4c=a22_0xd86d91;for(const _0x5600ae of this['middlewares']){const _0x2bcb1c=await middleware_injector_1['middlewareInjector'](_0x5600ae);this[_0x3a7f4c(0xa0)]['use'](_0x2bcb1c);}}async[a22_0xd86d91(0x9f)](_0x2c29db){const _0x23598e=a22_0xd86d91,_0xf71db4=_0x2c29db['nested'];logger['log'](_0x23598e(0x9d)+_0xf71db4[_0x23598e(0xc6)]+_0x23598e(0x93)+this[_0x23598e(0xcc)]+_0x2c29db['path']);const _0x139bf2=new ControllerInjector(_0xf71db4,this);_0x139bf2[_0x23598e(0xcd)]=_0x2c29db[_0x23598e(0xcc)],await _0x139bf2['inject'](this['router']);}async[a22_0xd86d91(0xbe)](){const _0x32a4f7=a22_0xd86d91;var _0x3bddc9;for(const _0x10916c of this[_0x32a4f7(0xc2)]){const _0xa7ce32=utils_1[_0x32a4f7(0xa7)](_0x10916c);if(_0xa7ce32[_0x32a4f7(0xc4)])await this[_0x32a4f7(0x9f)](_0xa7ce32);else{const _0x2695dd=_0xa7ce32[_0x32a4f7(0xc5)][_0x32a4f7(0xb6)]()[_0x32a4f7(0xb2)]();logger[_0x32a4f7(0x9a)](_0x32a4f7(0x94)+this['controllerType'][_0x32a4f7(0xc6)]+'#'+_0x10916c[_0x32a4f7(0xc6)]+_0x32a4f7(0xb0)+_0xa7ce32[_0x32a4f7(0xc5)]+']\x20'+utils_1[_0x32a4f7(0x9c)](((_0x3bddc9=this[_0x32a4f7(0xbc)])===null||_0x3bddc9===void 0x0?void 0x0:_0x3bddc9[_0x32a4f7(0xcc)])||'',this['path'],_0xa7ce32[_0x32a4f7(0xcc)])),this[_0x32a4f7(0xa0)][_0x2695dd](_0xa7ce32[_0x32a4f7(0xcc)],handler_wrapper_1[_0x32a4f7(0xca)](_0x10916c,this[_0x32a4f7(0xc1)]));}}}async[a22_0xd86d91(0xbd)](_0x196ea9){const _0x7a32b2=a22_0xd86d91;!this['nestedPath']&&logger[_0x7a32b2(0x9a)](_0x7a32b2(0x94)+this[_0x7a32b2(0xbb)][_0x7a32b2(0xc6)]+'\x20{'+this['prefix']+'}'),await this[_0x7a32b2(0x99)](),await this[_0x7a32b2(0xbe)](),_0x196ea9[_0x7a32b2(0x91)](''+this[_0x7a32b2(0xa3)]+this['path'],this[_0x7a32b2(0xa0)]);}}exports[a22_0xd86d91(0x97)]=ControllerInjector;