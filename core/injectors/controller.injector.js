const a22_0x4600=['Router','1332592lamRee','instance','1171YCaWZz','../utils','inject','73915DnJvnT','\x20at\x20','839wAIuYg','injecting\x20nested\x20','META_CONTROLLER_PREFIX','Logger','injectMiddlewares','53741VlXxYH','getOwnMetadata','root','__importDefault','handlers','nestedPath','\x20is\x20not\x20a\x20Controller','ControllerInjector','getHandlerMeta','META_CONTROLLER','META_HANDLER','controller-injector','name','toLowerCase','../wrappers/handler.wrapper','834wpOFXH','default','META_CONTROLLER_VERSION','../classes/logger.class','normalizePaths','toString','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','prefix','528763GCZCHK','controllerType','injecting\x20','method','express','typedi','use','log','test','__esModule','filter','router','nested','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','246LpyRVq','CONTROLLER_DEFAULT_PREFIX','middlewares','META_CONTROLLER_PATH','./middleware.injector','515cPKfgS','injectHandlers','path','injectNestedController','8cqlcDL','middlewareInjector'];const a22_0x3713c5=a22_0x34a2;(function(_0x210865,_0x596d37){const _0x52a584=a22_0x34a2;while(!![]){try{const _0x1adc42=parseInt(_0x52a584(0x1d0))+-parseInt(_0x52a584(0x1fd))*-parseInt(_0x52a584(0x1cd))+parseInt(_0x52a584(0x1c4))*-parseInt(_0x52a584(0x1d2))+-parseInt(_0x52a584(0x1ee))+-parseInt(_0x52a584(0x1e6))+parseInt(_0x52a584(0x1c8))*-parseInt(_0x52a584(0x1d7))+parseInt(_0x52a584(0x1cb));if(_0x1adc42===_0x596d37)break;else _0x210865['push'](_0x210865['shift']());}catch(_0x2d5802){_0x210865['push'](_0x210865['shift']());}}}(a22_0x4600,0x49f73));const a22_0xc264c9=function(){let _0x3ea2e3=!![];return function(_0x48d718,_0x1c8c20){const _0x440c72=_0x3ea2e3?function(){if(_0x1c8c20){const _0x459c40=_0x1c8c20['apply'](_0x48d718,arguments);return _0x1c8c20=null,_0x459c40;}}:function(){};return _0x3ea2e3=![],_0x440c72;};}(),a22_0x45e29b=a22_0xc264c9(this,function(){const _0x1619f9=function(){const _0x51d72d=a22_0x34a2,_0x5e27ec=_0x1619f9[_0x51d72d(0x1fc)](_0x51d72d(0x1fb))()[_0x51d72d(0x1fc)](_0x51d72d(0x1ec));return!_0x5e27ec[_0x51d72d(0x1f6)](a22_0x45e29b);};return _0x1619f9();});a22_0x45e29b();function a22_0x34a2(_0x1eafd3,_0xbf548b){return a22_0x34a2=function(_0x58bdfc,_0x45e29b){_0x58bdfc=_0x58bdfc-0x1c3;let _0xc264c9=a22_0x4600[_0x58bdfc];return _0xc264c9;},a22_0x34a2(_0x1eafd3,_0xbf548b);}'use strict';var __importDefault=this&&this[a22_0x3713c5(0x1da)]||function(_0x563dfa){const _0x17171b=a22_0x3713c5;return _0x563dfa&&_0x563dfa[_0x17171b(0x1f7)]?_0x563dfa:{'default':_0x563dfa};};Object['defineProperty'](exports,a22_0x3713c5(0x1f7),{'value':!![]}),exports[a22_0x3713c5(0x1de)]=void 0x0;const express_1=require(a22_0x3713c5(0x1f2)),typedi_1=__importDefault(require(a22_0x3713c5(0x1f3))),logger_class_1=require(a22_0x3713c5(0x1e9)),constants_1=require('../constants'),utils_1=require(a22_0x3713c5(0x1ce)),handler_wrapper_1=require(a22_0x3713c5(0x1e5)),middleware_injector_1=require(a22_0x3713c5(0x1c3)),logger=new logger_class_1[(a22_0x3713c5(0x1d5))](a22_0x3713c5(0x1e2));class ControllerInjector{constructor(_0x58f3db,_0x2c0b30){const _0x419da5=a22_0x3713c5;this[_0x419da5(0x1ef)]=_0x58f3db,this['root']=_0x2c0b30,this[_0x419da5(0x1f9)]=express_1[_0x419da5(0x1ca)]({'mergeParams':!![]}),this[_0x419da5(0x1dc)]='';if(!Reflect[_0x419da5(0x1d8)](constants_1[_0x419da5(0x1e0)],_0x58f3db))throw TypeError(_0x58f3db[_0x419da5(0x1e3)]+_0x419da5(0x1dd));}get[a22_0x3713c5(0x1db)](){const _0x9d3cdd=a22_0x3713c5,_0x5c3612=Object['getPrototypeOf'](this[_0x9d3cdd(0x1cc)]);return Object['getOwnPropertyNames'](_0x5c3612)['map'](_0x5039c1=>_0x5c3612[_0x5039c1])[_0x9d3cdd(0x1f8)](_0x5a6c1a=>!!Reflect[_0x9d3cdd(0x1d8)](constants_1[_0x9d3cdd(0x1e1)],_0x5a6c1a));}get[a22_0x3713c5(0x1ff)](){const _0x5abf89=a22_0x3713c5;return Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_MIDDLEWARES'],this[_0x5abf89(0x1cc)])||[];}get['prefix'](){const _0x5e9676=a22_0x3713c5;var _0x85babc;const _0x29c59c=(_0x85babc=Reflect[_0x5e9676(0x1d8)](constants_1[_0x5e9676(0x1d4)],this[_0x5e9676(0x1ef)]))!==null&&_0x85babc!==void 0x0?_0x85babc:constants_1[_0x5e9676(0x1fe)],_0x7a32a9=Reflect[_0x5e9676(0x1d8)](constants_1[_0x5e9676(0x1e8)],this[_0x5e9676(0x1ef)])||'';return this[_0x5e9676(0x1dc)]?'':utils_1[_0x5e9676(0x1ea)](_0x29c59c,_0x7a32a9);}get[a22_0x3713c5(0x1c6)](){const _0x5e4120=a22_0x3713c5;if(this[_0x5e4120(0x1dc)])return this[_0x5e4120(0x1dc)];const _0x4b2a7f=Reflect['getOwnMetadata'](constants_1[_0x5e4120(0x200)],this['controllerType'])||'';return utils_1[_0x5e4120(0x1ea)](_0x4b2a7f);}get[a22_0x3713c5(0x1cc)](){const _0x49aa5b=a22_0x3713c5;return typedi_1[_0x49aa5b(0x1e7)]['get'](this['controllerType']);}async[a22_0x3713c5(0x1d6)](){const _0x2bc959=a22_0x3713c5;for(const _0x363a0a of this['middlewares']){const _0x38941c=await middleware_injector_1[_0x2bc959(0x1c9)](_0x363a0a);this['router'][_0x2bc959(0x1f4)](_0x38941c);}}async[a22_0x3713c5(0x1c7)](_0xd7bc4b){const _0x1cf037=a22_0x3713c5,_0x35eb34=_0xd7bc4b[_0x1cf037(0x1fa)];logger[_0x1cf037(0x1f5)](_0x1cf037(0x1d3)+_0x35eb34[_0x1cf037(0x1e3)]+_0x1cf037(0x1d1)+this[_0x1cf037(0x1c6)]+_0xd7bc4b[_0x1cf037(0x1c6)]);const _0x8a7fe6=new ControllerInjector(_0x35eb34,this);_0x8a7fe6[_0x1cf037(0x1dc)]=_0xd7bc4b[_0x1cf037(0x1c6)],await _0x8a7fe6[_0x1cf037(0x1cf)](this[_0x1cf037(0x1f9)]);}async[a22_0x3713c5(0x1c5)](){const _0x3e878e=a22_0x3713c5;var _0x4292ec;for(const _0x1e07a2 of this[_0x3e878e(0x1db)]){const _0x16e0e6=utils_1[_0x3e878e(0x1df)](_0x1e07a2);if(_0x16e0e6[_0x3e878e(0x1fa)])await this[_0x3e878e(0x1c7)](_0x16e0e6);else{const _0x1e2b19=_0x16e0e6[_0x3e878e(0x1f1)][_0x3e878e(0x1eb)]()[_0x3e878e(0x1e4)]();logger[_0x3e878e(0x1f5)](_0x3e878e(0x1f0)+this[_0x3e878e(0x1ef)][_0x3e878e(0x1e3)]+'#'+_0x1e07a2[_0x3e878e(0x1e3)]+'\x20at\x20['+_0x16e0e6[_0x3e878e(0x1f1)]+']\x20'+utils_1['normalizePaths'](((_0x4292ec=this[_0x3e878e(0x1d9)])===null||_0x4292ec===void 0x0?void 0x0:_0x4292ec['path'])||'',this[_0x3e878e(0x1c6)],_0x16e0e6[_0x3e878e(0x1c6)])),this[_0x3e878e(0x1f9)][_0x1e2b19](_0x16e0e6[_0x3e878e(0x1c6)],handler_wrapper_1['handlerWrapper'](_0x1e07a2,this[_0x3e878e(0x1cc)]));}}}async[a22_0x3713c5(0x1cf)](_0xfd49bc){const _0x66d0cb=a22_0x3713c5;!this['nestedPath']&&logger[_0x66d0cb(0x1f5)](_0x66d0cb(0x1f0)+this[_0x66d0cb(0x1ef)][_0x66d0cb(0x1e3)]+'\x20{'+this[_0x66d0cb(0x1ed)]+'}'),await this['injectMiddlewares'](),await this[_0x66d0cb(0x1c5)](),_0xfd49bc[_0x66d0cb(0x1f4)](''+this[_0x66d0cb(0x1ed)]+this['path'],this[_0x66d0cb(0x1f9)]);}}exports[a22_0x3713c5(0x1de)]=ControllerInjector;