const a22_0x1470=['typedi','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../classes/logger.class','nested','getOwnMetadata','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','CONTROLLER_DEFAULT_PREFIX','log','middlewares','root','META_HANDLER','4AwICJE','toLowerCase','defineProperty','244618TujoDV','1290521FBUYVG','365362BuGJEK','3XJBafl','injectHandlers','2KzmPAw','../wrappers/handler.wrapper','injecting\x20','middlewareInjector','injecting\x20nested\x20','../constants','ControllerInjector','__importDefault','express','\x20is\x20not\x20a\x20Controller','injectMiddlewares','\x20at\x20','get','META_CONTROLLER_PATH','controller-injector','./middleware.injector','44782UkAHnr','13011szEkbX','controllerType','Router','META_CONTROLLER_MIDDLEWARES','getOwnPropertyNames','constructor','default','getPrototypeOf','\x20at\x20[','toString','getHandlerMeta','normalizePaths','META_CONTROLLER_VERSION','__esModule','router','prefix','instance','575200XayxfW','path','Logger','880461EtFhjg','name','use','nestedPath','injectNestedController','filter','inject','handlerWrapper','handlers'];const a22_0x1c3c4d=a22_0x5754;(function(_0x588d58,_0xbb3a78){const _0x349902=a22_0x5754;while(!![]){try{const _0x3c8882=parseInt(_0x349902(0xf5))+-parseInt(_0x349902(0x10e))+parseInt(_0x349902(0xf2))+parseInt(_0x349902(0x10f))*parseInt(_0x349902(0x112))+parseInt(_0x349902(0x110))*parseInt(_0x349902(0x123))+-parseInt(_0x349902(0x10d))+parseInt(_0x349902(0x122))*parseInt(_0x349902(0x10a));if(_0x3c8882===_0xbb3a78)break;else _0x588d58['push'](_0x588d58['shift']());}catch(_0x580ec5){_0x588d58['push'](_0x588d58['shift']());}}}(a22_0x1470,0xd441f));const a22_0x37543c=function(){let _0x3378d9=!![];return function(_0x22d3e1,_0x314cbc){const _0x38db04=_0x3378d9?function(){if(_0x314cbc){const _0x49206c=_0x314cbc['apply'](_0x22d3e1,arguments);return _0x314cbc=null,_0x49206c;}}:function(){};return _0x3378d9=![],_0x38db04;};}(),a22_0x3043ec=a22_0x37543c(this,function(){const _0x35bbfa=function(){const _0x48e389=a22_0x5754,_0x4cd155=_0x35bbfa[_0x48e389(0x128)](_0x48e389(0x104))()[_0x48e389(0x128)](_0x48e389(0xff));return!_0x4cd155[_0x48e389(0x103)](a22_0x3043ec);};return _0x35bbfa();});a22_0x3043ec();function a22_0x5754(_0xd4beab,_0x17aea9){return a22_0x5754=function(_0x41ff61,_0x3043ec){_0x41ff61=_0x41ff61-0xe8;let _0x37543c=a22_0x1470[_0x41ff61];return _0x37543c;},a22_0x5754(_0xd4beab,_0x17aea9);}'use strict';var __importDefault=this&&this[a22_0x1c3c4d(0x119)]||function(_0x2423cb){const _0x398282=a22_0x1c3c4d;return _0x2423cb&&_0x2423cb[_0x398282(0xee)]?_0x2423cb:{'default':_0x2423cb};};Object[a22_0x1c3c4d(0x10c)](exports,'__esModule',{'value':!![]}),exports[a22_0x1c3c4d(0x118)]=void 0x0;const express_1=require(a22_0x1c3c4d(0x11a)),typedi_1=__importDefault(require(a22_0x1c3c4d(0xfe))),logger_class_1=require(a22_0x1c3c4d(0x100)),constants_1=require(a22_0x1c3c4d(0x117)),utils_1=require('../utils'),handler_wrapper_1=require(a22_0x1c3c4d(0x113)),middleware_injector_1=require(a22_0x1c3c4d(0x121)),logger=new logger_class_1[(a22_0x1c3c4d(0xf4))](a22_0x1c3c4d(0x120));class ControllerInjector{constructor(_0x278cba,_0x7da22f){const _0xa45a34=a22_0x1c3c4d;this[_0xa45a34(0x124)]=_0x278cba,this[_0xa45a34(0x108)]=_0x7da22f,this[_0xa45a34(0xef)]=express_1[_0xa45a34(0x125)]({'mergeParams':!![]}),this[_0xa45a34(0xf8)]='';if(!Reflect[_0xa45a34(0x102)](constants_1['META_CONTROLLER'],_0x278cba))throw TypeError(_0x278cba[_0xa45a34(0xf6)]+_0xa45a34(0x11b));}get[a22_0x1c3c4d(0xfd)](){const _0x174512=a22_0x1c3c4d,_0x4b45dd=Object[_0x174512(0xe8)](this[_0x174512(0xf1)]);return Object[_0x174512(0x127)](_0x4b45dd)['map'](_0x7fb8da=>_0x4b45dd[_0x7fb8da])[_0x174512(0xfa)](_0x5a01f2=>!!Reflect[_0x174512(0x102)](constants_1[_0x174512(0x109)],_0x5a01f2));}get[a22_0x1c3c4d(0x107)](){const _0x4cdac3=a22_0x1c3c4d;return Reflect[_0x4cdac3(0x102)](constants_1[_0x4cdac3(0x126)],this[_0x4cdac3(0xf1)])||[];}get['prefix'](){const _0x166636=a22_0x1c3c4d;var _0x2732c9;const _0x26a8e4=(_0x2732c9=Reflect[_0x166636(0x102)](constants_1['META_CONTROLLER_PREFIX'],this[_0x166636(0x124)]))!==null&&_0x2732c9!==void 0x0?_0x2732c9:constants_1[_0x166636(0x105)],_0x4d6476=Reflect[_0x166636(0x102)](constants_1[_0x166636(0xed)],this[_0x166636(0x124)])||'';return this[_0x166636(0xf8)]?'':utils_1[_0x166636(0xec)](_0x26a8e4,_0x4d6476);}get[a22_0x1c3c4d(0xf3)](){const _0x302de3=a22_0x1c3c4d;if(this[_0x302de3(0xf8)])return this['nestedPath'];const _0x2debc1=Reflect[_0x302de3(0x102)](constants_1[_0x302de3(0x11f)],this[_0x302de3(0x124)])||'';return utils_1[_0x302de3(0xec)](_0x2debc1);}get[a22_0x1c3c4d(0xf1)](){const _0x25ab40=a22_0x1c3c4d;return typedi_1[_0x25ab40(0x129)][_0x25ab40(0x11e)](this[_0x25ab40(0x124)]);}async[a22_0x1c3c4d(0x11c)](){const _0x20dff1=a22_0x1c3c4d;for(const _0x3a52e9 of this[_0x20dff1(0x107)]){const _0x56861a=await middleware_injector_1[_0x20dff1(0x115)](_0x3a52e9);this[_0x20dff1(0xef)][_0x20dff1(0xf7)](_0x56861a);}}async['injectNestedController'](_0x2a3044){const _0xcd2d4c=a22_0x1c3c4d,_0x3007a1=_0x2a3044[_0xcd2d4c(0x101)];logger[_0xcd2d4c(0x106)](_0xcd2d4c(0x116)+_0x3007a1['name']+_0xcd2d4c(0x11d)+this[_0xcd2d4c(0xf3)]+_0x2a3044[_0xcd2d4c(0xf3)]);const _0x33d072=new ControllerInjector(_0x3007a1,this);_0x33d072[_0xcd2d4c(0xf8)]=_0x2a3044[_0xcd2d4c(0xf3)],await _0x33d072[_0xcd2d4c(0xfb)](this['router']);}async[a22_0x1c3c4d(0x111)](){const _0x465c70=a22_0x1c3c4d;var _0x2900e2;for(const _0x2d7c22 of this[_0x465c70(0xfd)]){const _0x2e675f=utils_1[_0x465c70(0xeb)](_0x2d7c22);if(_0x2e675f['nested'])await this[_0x465c70(0xf9)](_0x2e675f);else{const _0x7025e4=_0x2e675f['method'][_0x465c70(0xea)]()[_0x465c70(0x10b)]();logger['log'](_0x465c70(0x114)+this[_0x465c70(0x124)][_0x465c70(0xf6)]+'#'+_0x2d7c22[_0x465c70(0xf6)]+_0x465c70(0xe9)+_0x2e675f['method']+']\x20'+utils_1[_0x465c70(0xec)](((_0x2900e2=this[_0x465c70(0x108)])===null||_0x2900e2===void 0x0?void 0x0:_0x2900e2[_0x465c70(0xf3)])||'',this[_0x465c70(0xf3)],_0x2e675f[_0x465c70(0xf3)])),this['router'][_0x7025e4](_0x2e675f[_0x465c70(0xf3)],handler_wrapper_1[_0x465c70(0xfc)](_0x2d7c22,this[_0x465c70(0xf1)]));}}}async[a22_0x1c3c4d(0xfb)](_0x235a66){const _0x2e4025=a22_0x1c3c4d;!this[_0x2e4025(0xf8)]&&logger[_0x2e4025(0x106)](_0x2e4025(0x114)+this[_0x2e4025(0x124)][_0x2e4025(0xf6)]+'\x20{'+this[_0x2e4025(0xf0)]+'}'),await this['injectMiddlewares'](),await this[_0x2e4025(0x111)](),_0x235a66[_0x2e4025(0xf7)](''+this[_0x2e4025(0xf0)]+this[_0x2e4025(0xf3)],this['router']);}}exports['ControllerInjector']=ControllerInjector;