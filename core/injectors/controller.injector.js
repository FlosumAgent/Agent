const a22_0x4033=['getPrototypeOf','nestedPath','path','name','injectMiddlewares','apply','META_CONTROLLER_VERSION','toLowerCase','injecting\x20nested\x20','handlers','../classes/logger.class','getOwnMetadata','__esModule','method','META_CONTROLLER_PREFIX','../wrappers/handler.wrapper','express','../utils','1rxOCfr','META_CONTROLLER_PATH','controllerType','435894MVvRqt','router','Router','injectHandlers','nested','165735sVfjsE','getOwnPropertyNames','getHandlerMeta','typedi','Logger','normalizePaths','handlerWrapper','prefix','__importDefault','./middleware.injector','test','\x20is\x20not\x20a\x20Controller','460338maLDmR','437803PTkCia','META_CONTROLLER_MIDDLEWARES','15RSzZdf','use','../constants','get','15822frmosS','filter','injecting\x20','\x20at\x20[','260417onJttv','injectNestedController','log','inject','ControllerInjector','instance','2445QrleNb','CONTROLLER_DEFAULT_PREFIX','META_HANDLER','\x20at\x20','META_CONTROLLER','defineProperty','root','constructor','default','middlewares'];const a22_0x2a3531=a22_0x4ffe;(function(_0x209882,_0x4ed7e1){const _0x295b32=a22_0x4ffe;while(!![]){try{const _0x381c91=-parseInt(_0x295b32(0x130))+parseInt(_0x295b32(0x12a))+-parseInt(_0x295b32(0x14f))+parseInt(_0x295b32(0x113))+-parseInt(_0x295b32(0x126))*-parseInt(_0x295b32(0x122))+parseInt(_0x295b32(0x11f))+-parseInt(_0x295b32(0x120))*parseInt(_0x295b32(0x14c));if(_0x381c91===_0x4ed7e1)break;else _0x209882['push'](_0x209882['shift']());}catch(_0x398968){_0x209882['push'](_0x209882['shift']());}}}(a22_0x4033,0x3c77e));const a22_0x974f96=function(){let _0x834e21=!![];return function(_0x5175f4,_0xbee1bb){const _0x1373d7=_0x834e21?function(){const _0x35c691=a22_0x4ffe;if(_0xbee1bb){const _0x21435d=_0xbee1bb[_0x35c691(0x13f)](_0x5175f4,arguments);return _0xbee1bb=null,_0x21435d;}}:function(){};return _0x834e21=![],_0x1373d7;};}(),a22_0x25e495=a22_0x974f96(this,function(){const _0x204c8f=function(){const _0x33466a=a22_0x4ffe,_0x355666=_0x204c8f[_0x33466a(0x137)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x33466a(0x137)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x355666[_0x33466a(0x11d)](a22_0x25e495);};return _0x204c8f();});function a22_0x4ffe(_0x414da3,_0x65e717){return a22_0x4ffe=function(_0x35355c,_0x25e495){_0x35355c=_0x35355c-0x112;let _0x974f96=a22_0x4033[_0x35355c];return _0x974f96;},a22_0x4ffe(_0x414da3,_0x65e717);}a22_0x25e495();'use strict';var __importDefault=this&&this[a22_0x2a3531(0x11b)]||function(_0x196281){const _0x248810=a22_0x2a3531;return _0x196281&&_0x196281[_0x248810(0x146)]?_0x196281:{'default':_0x196281};};Object[a22_0x2a3531(0x135)](exports,a22_0x2a3531(0x146),{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require(a22_0x2a3531(0x14a)),typedi_1=__importDefault(require(a22_0x2a3531(0x116))),logger_class_1=require(a22_0x2a3531(0x144)),constants_1=require(a22_0x2a3531(0x124)),utils_1=require(a22_0x2a3531(0x14b)),handler_wrapper_1=require(a22_0x2a3531(0x149)),middleware_injector_1=require(a22_0x2a3531(0x11c)),logger=new logger_class_1[(a22_0x2a3531(0x117))]('controller-injector');class ControllerInjector{constructor(_0x127ce9,_0xd9e224){const _0x8f0bea=a22_0x2a3531;this[_0x8f0bea(0x14e)]=_0x127ce9,this['root']=_0xd9e224,this[_0x8f0bea(0x150)]=express_1[_0x8f0bea(0x151)]({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect[_0x8f0bea(0x145)](constants_1[_0x8f0bea(0x134)],_0x127ce9))throw TypeError(_0x127ce9['name']+_0x8f0bea(0x11e));}get[a22_0x2a3531(0x143)](){const _0x5661d3=a22_0x2a3531,_0xec2e02=Object[_0x5661d3(0x13a)](this[_0x5661d3(0x12f)]);return Object[_0x5661d3(0x114)](_0xec2e02)['map'](_0xc61de3=>_0xec2e02[_0xc61de3])[_0x5661d3(0x127)](_0x156240=>!!Reflect[_0x5661d3(0x145)](constants_1[_0x5661d3(0x132)],_0x156240));}get[a22_0x2a3531(0x139)](){const _0x443da0=a22_0x2a3531;return Reflect[_0x443da0(0x145)](constants_1[_0x443da0(0x121)],this[_0x443da0(0x12f)])||[];}get[a22_0x2a3531(0x11a)](){const _0x246ff5=a22_0x2a3531;var _0x190665;const _0x5769be=(_0x190665=Reflect['getOwnMetadata'](constants_1[_0x246ff5(0x148)],this[_0x246ff5(0x14e)]))!==null&&_0x190665!==void 0x0?_0x190665:constants_1[_0x246ff5(0x131)],_0x1c8374=Reflect[_0x246ff5(0x145)](constants_1[_0x246ff5(0x140)],this[_0x246ff5(0x14e)])||'';return this['nestedPath']?'':utils_1[_0x246ff5(0x118)](_0x5769be,_0x1c8374);}get['path'](){const _0x45d888=a22_0x2a3531;if(this[_0x45d888(0x13b)])return this[_0x45d888(0x13b)];const _0x764924=Reflect[_0x45d888(0x145)](constants_1[_0x45d888(0x14d)],this[_0x45d888(0x14e)])||'';return utils_1['normalizePaths'](_0x764924);}get[a22_0x2a3531(0x12f)](){const _0x4a2ead=a22_0x2a3531;return typedi_1[_0x4a2ead(0x138)][_0x4a2ead(0x125)](this[_0x4a2ead(0x14e)]);}async['injectMiddlewares'](){const _0x5a601f=a22_0x2a3531;for(const _0x51ebec of this['middlewares']){const _0x1012aa=await middleware_injector_1['middlewareInjector'](_0x51ebec);this['router'][_0x5a601f(0x123)](_0x1012aa);}}async[a22_0x2a3531(0x12b)](_0x1ce104){const _0x52b5f9=a22_0x2a3531,_0x8327c4=_0x1ce104[_0x52b5f9(0x112)];logger[_0x52b5f9(0x12c)](_0x52b5f9(0x142)+_0x8327c4[_0x52b5f9(0x13d)]+_0x52b5f9(0x133)+this[_0x52b5f9(0x13c)]+_0x1ce104[_0x52b5f9(0x13c)]);const _0x33fa36=new ControllerInjector(_0x8327c4,this);_0x33fa36[_0x52b5f9(0x13b)]=_0x1ce104[_0x52b5f9(0x13c)],await _0x33fa36[_0x52b5f9(0x12d)](this[_0x52b5f9(0x150)]);}async[a22_0x2a3531(0x152)](){const _0x42d3dd=a22_0x2a3531;var _0x281657;for(const _0xe9240e of this[_0x42d3dd(0x143)]){const _0x158a5f=utils_1[_0x42d3dd(0x115)](_0xe9240e);if(_0x158a5f[_0x42d3dd(0x112)])await this[_0x42d3dd(0x12b)](_0x158a5f);else{const _0x1c9324=_0x158a5f[_0x42d3dd(0x147)]['toString']()[_0x42d3dd(0x141)]();logger['log']('injecting\x20'+this['controllerType'][_0x42d3dd(0x13d)]+'#'+_0xe9240e[_0x42d3dd(0x13d)]+_0x42d3dd(0x129)+_0x158a5f[_0x42d3dd(0x147)]+']\x20'+utils_1['normalizePaths'](((_0x281657=this[_0x42d3dd(0x136)])===null||_0x281657===void 0x0?void 0x0:_0x281657[_0x42d3dd(0x13c)])||'',this['path'],_0x158a5f[_0x42d3dd(0x13c)])),this[_0x42d3dd(0x150)][_0x1c9324](_0x158a5f[_0x42d3dd(0x13c)],handler_wrapper_1[_0x42d3dd(0x119)](_0xe9240e,this[_0x42d3dd(0x12f)]));}}}async['inject'](_0x34aa8a){const _0x52adc1=a22_0x2a3531;!this[_0x52adc1(0x13b)]&&logger[_0x52adc1(0x12c)](_0x52adc1(0x128)+this[_0x52adc1(0x14e)][_0x52adc1(0x13d)]+'\x20{'+this[_0x52adc1(0x11a)]+'}'),await this[_0x52adc1(0x13e)](),await this[_0x52adc1(0x152)](),_0x34aa8a['use'](''+this[_0x52adc1(0x11a)]+this[_0x52adc1(0x13c)],this['router']);}}exports[a22_0x2a3531(0x12e)]=ControllerInjector;