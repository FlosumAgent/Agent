const a22_0x2698=['filter','log','125969CwhLyB','../wrappers/handler.wrapper','toString','\x20at\x20[','injectNestedController','4599wqcShe','inject','controller-injector','constructor','prefix','346ZowelB','injectMiddlewares','5389OeNrpk','name','toLowerCase','Router','getOwnPropertyNames','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','injectHandlers','middlewareInjector','handlers','META_CONTROLLER_PREFIX','\x20is\x20not\x20a\x20Controller','29gkwZZb','../classes/logger.class','__importDefault','method','instance','handlerWrapper','META_CONTROLLER_MIDDLEWARES','697801jhFHXO','nested','normalizePaths','test','typedi','1QLowlc','express','path','6pvqjZO','152VsLzng','\x20at\x20','router','ControllerInjector','1486QvEqBb','default','nestedPath','./middleware.injector','META_CONTROLLER_PATH','controllerType','311473nIxTFh','META_HANDLER','get','getOwnMetadata','CONTROLLER_DEFAULT_PREFIX','middlewares','root','1QVuqPQ','apply','use','90341diOeeM','injecting\x20'];const a22_0x4d78e7=a22_0x497f;(function(_0x5e1e33,_0x52b757){const _0x49165c=a22_0x497f;while(!![]){try{const _0x5d00dd=parseInt(_0x49165c(0x1f9))*parseInt(_0x49165c(0x1f2))+-parseInt(_0x49165c(0x1df))+parseInt(_0x49165c(0x1cd))*-parseInt(_0x49165c(0x1d8))+-parseInt(_0x49165c(0x1e8))*-parseInt(_0x49165c(0x1ec))+-parseInt(_0x49165c(0x1c1))*parseInt(_0x49165c(0x1e7))+parseInt(_0x49165c(0x1fc))*-parseInt(_0x49165c(0x1e4))+-parseInt(_0x49165c(0x1c6))*-parseInt(_0x49165c(0x1cb));if(_0x5d00dd===_0x52b757)break;else _0x5e1e33['push'](_0x5e1e33['shift']());}catch(_0x3cc004){_0x5e1e33['push'](_0x5e1e33['shift']());}}}(a22_0x2698,0x6894a));const a22_0x4bc116=function(){let _0x3107cb=!![];return function(_0x25966d,_0x5c3f0a){const _0x1b5070=_0x3107cb?function(){const _0x5260be=a22_0x497f;if(_0x5c3f0a){const _0xc44140=_0x5c3f0a[_0x5260be(0x1fa)](_0x25966d,arguments);return _0x5c3f0a=null,_0xc44140;}}:function(){};return _0x3107cb=![],_0x1b5070;};}(),a22_0x52574a=a22_0x4bc116(this,function(){const _0x5c15e9=function(){const _0x1daec1=a22_0x497f,_0x1e75fd=_0x5c15e9['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x1daec1(0x1c9)](_0x1daec1(0x1d2));return!_0x1e75fd[_0x1daec1(0x1e2)](a22_0x52574a);};return _0x5c15e9();});a22_0x52574a();'use strict';var __importDefault=this&&this[a22_0x4d78e7(0x1da)]||function(_0x1e3e79){return _0x1e3e79&&_0x1e3e79['__esModule']?_0x1e3e79:{'default':_0x1e3e79};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a22_0x4d78e7(0x1eb)]=void 0x0;const express_1=require(a22_0x4d78e7(0x1e5)),typedi_1=__importDefault(require(a22_0x4d78e7(0x1e3))),logger_class_1=require(a22_0x4d78e7(0x1d9)),constants_1=require('../constants'),utils_1=require('../utils'),handler_wrapper_1=require(a22_0x4d78e7(0x1c2)),middleware_injector_1=require(a22_0x4d78e7(0x1ef)),logger=new logger_class_1['Logger'](a22_0x4d78e7(0x1c8));class ControllerInjector{constructor(_0x10f930,_0x2e05d7){const _0x49983d=a22_0x4d78e7;this[_0x49983d(0x1f1)]=_0x10f930,this[_0x49983d(0x1f8)]=_0x2e05d7,this[_0x49983d(0x1ea)]=express_1[_0x49983d(0x1d0)]({'mergeParams':!![]}),this[_0x49983d(0x1ee)]='';if(!Reflect[_0x49983d(0x1f5)](constants_1['META_CONTROLLER'],_0x10f930))throw TypeError(_0x10f930[_0x49983d(0x1ce)]+_0x49983d(0x1d7));}get[a22_0x4d78e7(0x1d5)](){const _0x29bbf3=a22_0x4d78e7,_0x37729b=Object['getPrototypeOf'](this[_0x29bbf3(0x1dc)]);return Object[_0x29bbf3(0x1d1)](_0x37729b)['map'](_0x5441f5=>_0x37729b[_0x5441f5])[_0x29bbf3(0x1bf)](_0xaa8d90=>!!Reflect[_0x29bbf3(0x1f5)](constants_1[_0x29bbf3(0x1f3)],_0xaa8d90));}get[a22_0x4d78e7(0x1f7)](){const _0x27b443=a22_0x4d78e7;return Reflect['getOwnMetadata'](constants_1[_0x27b443(0x1de)],this[_0x27b443(0x1dc)])||[];}get[a22_0x4d78e7(0x1ca)](){const _0x5f0e18=a22_0x4d78e7;var _0x5773fa;const _0x7a413c=(_0x5773fa=Reflect[_0x5f0e18(0x1f5)](constants_1[_0x5f0e18(0x1d6)],this[_0x5f0e18(0x1f1)]))!==null&&_0x5773fa!==void 0x0?_0x5773fa:constants_1[_0x5f0e18(0x1f6)],_0x45ba58=Reflect[_0x5f0e18(0x1f5)](constants_1['META_CONTROLLER_VERSION'],this[_0x5f0e18(0x1f1)])||'';return this[_0x5f0e18(0x1ee)]?'':utils_1[_0x5f0e18(0x1e1)](_0x7a413c,_0x45ba58);}get[a22_0x4d78e7(0x1e6)](){const _0x3227f0=a22_0x4d78e7;if(this[_0x3227f0(0x1ee)])return this[_0x3227f0(0x1ee)];const _0x2d7180=Reflect[_0x3227f0(0x1f5)](constants_1[_0x3227f0(0x1f0)],this[_0x3227f0(0x1f1)])||'';return utils_1[_0x3227f0(0x1e1)](_0x2d7180);}get[a22_0x4d78e7(0x1dc)](){const _0x168ff2=a22_0x4d78e7;return typedi_1[_0x168ff2(0x1ed)][_0x168ff2(0x1f4)](this[_0x168ff2(0x1f1)]);}async[a22_0x4d78e7(0x1cc)](){const _0x12b235=a22_0x4d78e7;for(const _0xb3ee5 of this[_0x12b235(0x1f7)]){const _0x33f988=await middleware_injector_1[_0x12b235(0x1d4)](_0xb3ee5);this['router'][_0x12b235(0x1fb)](_0x33f988);}}async[a22_0x4d78e7(0x1c5)](_0x1497da){const _0x5ffbef=a22_0x4d78e7,_0x4a5f2a=_0x1497da[_0x5ffbef(0x1e0)];logger[_0x5ffbef(0x1c0)]('injecting\x20nested\x20'+_0x4a5f2a[_0x5ffbef(0x1ce)]+_0x5ffbef(0x1e9)+this['path']+_0x1497da['path']);const _0x33a35d=new ControllerInjector(_0x4a5f2a,this);_0x33a35d['nestedPath']=_0x1497da[_0x5ffbef(0x1e6)],await _0x33a35d[_0x5ffbef(0x1c7)](this[_0x5ffbef(0x1ea)]);}async[a22_0x4d78e7(0x1d3)](){const _0x141f42=a22_0x4d78e7;var _0x1bc709;for(const _0x192daf of this[_0x141f42(0x1d5)]){const _0x4d818b=utils_1['getHandlerMeta'](_0x192daf);if(_0x4d818b[_0x141f42(0x1e0)])await this['injectNestedController'](_0x4d818b);else{const _0x118812=_0x4d818b['method'][_0x141f42(0x1c3)]()[_0x141f42(0x1cf)]();logger['log'](_0x141f42(0x1fd)+this[_0x141f42(0x1f1)][_0x141f42(0x1ce)]+'#'+_0x192daf['name']+_0x141f42(0x1c4)+_0x4d818b[_0x141f42(0x1db)]+']\x20'+utils_1[_0x141f42(0x1e1)](((_0x1bc709=this['root'])===null||_0x1bc709===void 0x0?void 0x0:_0x1bc709[_0x141f42(0x1e6)])||'',this[_0x141f42(0x1e6)],_0x4d818b[_0x141f42(0x1e6)])),this[_0x141f42(0x1ea)][_0x118812](_0x4d818b[_0x141f42(0x1e6)],handler_wrapper_1[_0x141f42(0x1dd)](_0x192daf,this['instance']));}}}async[a22_0x4d78e7(0x1c7)](_0x550893){const _0x58f63d=a22_0x4d78e7;!this['nestedPath']&&logger[_0x58f63d(0x1c0)](_0x58f63d(0x1fd)+this['controllerType'][_0x58f63d(0x1ce)]+'\x20{'+this['prefix']+'}'),await this['injectMiddlewares'](),await this[_0x58f63d(0x1d3)](),_0x550893[_0x58f63d(0x1fb)](''+this[_0x58f63d(0x1ca)]+this[_0x58f63d(0x1e6)],this[_0x58f63d(0x1ea)]);}}function a22_0x497f(_0xfd6b2,_0x10ac21){return a22_0x497f=function(_0x21567b,_0x52574a){_0x21567b=_0x21567b-0x1bf;let _0x4bc116=a22_0x2698[_0x21567b];return _0x4bc116;},a22_0x497f(_0xfd6b2,_0x10ac21);}exports[a22_0x4d78e7(0x1eb)]=ControllerInjector;