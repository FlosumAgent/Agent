const a22_0xa5c1=['controller-injector','map','inject','1rNkSha','1EacJsJ','default','3wuLrEN','prefix','handlers','getHandlerMeta','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','META_CONTROLLER_PATH','injectHandlers','42863pVOHiy','../utils','injectMiddlewares','META_CONTROLLER_MIDDLEWARES','1139JdcVPA','use','controllerType','handlerWrapper','name','META_CONTROLLER','490869uLYSgv','119065dczZZN','nested','150386bemarj','994917nNsmwC','META_CONTROLLER_PREFIX','../constants','\x20is\x20not\x20a\x20Controller','Logger','injecting\x20nested\x20','normalizePaths','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','getPrototypeOf','../classes/logger.class','middlewareInjector','express','defineProperty','CONTROLLER_DEFAULT_PREFIX','getOwnMetadata','toLowerCase','nestedPath','injectNestedController','./middleware.injector','router','ControllerInjector','test','root','instance','injecting\x20','__esModule','log','254wWwFOJ','toString','\x20at\x20[','method','middlewares','filter','__importDefault','Router','path','typedi','385948rCZApI'];const a22_0x300a73=a22_0x516e;(function(_0x142daf,_0x449e02){const _0xe05564=a22_0x516e;while(!![]){try{const _0x3008e1=parseInt(_0xe05564(0xda))*-parseInt(_0xe05564(0xbe))+parseInt(_0xe05564(0xcd))*-parseInt(_0xe05564(0xe3))+-parseInt(_0xe05564(0xcf))*parseInt(_0xe05564(0xe1))+-parseInt(_0xe05564(0xd6))+parseInt(_0xe05564(0xe0))+-parseInt(_0xe05564(0xc8))+parseInt(_0xe05564(0xcc))*parseInt(_0xe05564(0xe4));if(_0x3008e1===_0x449e02)break;else _0x142daf['push'](_0x142daf['shift']());}catch(_0x308053){_0x142daf['push'](_0x142daf['shift']());}}}(a22_0xa5c1,0x3f7f8));const a22_0x307f23=function(){let _0x25d951=!![];return function(_0x16cbb0,_0x3cacf7){const _0x1af1a1=_0x25d951?function(){if(_0x3cacf7){const _0x3a1f30=_0x3cacf7['apply'](_0x16cbb0,arguments);return _0x3cacf7=null,_0x3a1f30;}}:function(){};return _0x25d951=![],_0x1af1a1;};}(),a22_0x99e1fd=a22_0x307f23(this,function(){const _0x4b6c2f=function(){const _0x5ea07a=a22_0x516e,_0x2b5d2b=_0x4b6c2f[_0x5ea07a(0xec)](_0x5ea07a(0xeb))()[_0x5ea07a(0xec)](_0x5ea07a(0xd3));return!_0x2b5d2b[_0x5ea07a(0xb8)](a22_0x99e1fd);};return _0x4b6c2f();});a22_0x99e1fd();'use strict';function a22_0x516e(_0x314178,_0xa3b74a){return a22_0x516e=function(_0x4fe3f0,_0x99e1fd){_0x4fe3f0=_0x4fe3f0-0xaf;let _0x307f23=a22_0xa5c1[_0x4fe3f0];return _0x307f23;},a22_0x516e(_0x314178,_0xa3b74a);}var __importDefault=this&&this[a22_0x300a73(0xc4)]||function(_0x55d5bd){return _0x55d5bd&&_0x55d5bd['__esModule']?_0x55d5bd:{'default':_0x55d5bd};};Object[a22_0x300a73(0xaf)](exports,a22_0x300a73(0xbc),{'value':!![]}),exports[a22_0x300a73(0xb7)]=void 0x0;const express_1=require(a22_0x300a73(0xf0)),typedi_1=__importDefault(require(a22_0x300a73(0xc7))),logger_class_1=require(a22_0x300a73(0xee)),constants_1=require(a22_0x300a73(0xe6)),utils_1=require(a22_0x300a73(0xd7)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a22_0x300a73(0xb5)),logger=new logger_class_1[(a22_0x300a73(0xe8))](a22_0x300a73(0xc9));class ControllerInjector{constructor(_0x4a0ac9,_0x4e6b5a){const _0x500982=a22_0x300a73;this[_0x500982(0xdc)]=_0x4a0ac9,this[_0x500982(0xb9)]=_0x4e6b5a,this[_0x500982(0xb6)]=express_1[_0x500982(0xc5)]({'mergeParams':!![]}),this[_0x500982(0xb3)]='';if(!Reflect[_0x500982(0xb1)](constants_1[_0x500982(0xdf)],_0x4a0ac9))throw TypeError(_0x4a0ac9[_0x500982(0xde)]+_0x500982(0xe7));}get[a22_0x300a73(0xd1)](){const _0x32d8fc=a22_0x300a73,_0x4be619=Object[_0x32d8fc(0xed)](this[_0x32d8fc(0xba)]);return Object['getOwnPropertyNames'](_0x4be619)[_0x32d8fc(0xca)](_0x4965b2=>_0x4be619[_0x4965b2])[_0x32d8fc(0xc3)](_0x3ad063=>!!Reflect[_0x32d8fc(0xb1)](constants_1['META_HANDLER'],_0x3ad063));}get[a22_0x300a73(0xc2)](){const _0x1f1055=a22_0x300a73;return Reflect['getOwnMetadata'](constants_1[_0x1f1055(0xd9)],this[_0x1f1055(0xba)])||[];}get[a22_0x300a73(0xd0)](){const _0x321fa5=a22_0x300a73;var _0x2b0eee;const _0x42776f=(_0x2b0eee=Reflect[_0x321fa5(0xb1)](constants_1[_0x321fa5(0xe5)],this[_0x321fa5(0xdc)]))!==null&&_0x2b0eee!==void 0x0?_0x2b0eee:constants_1[_0x321fa5(0xb0)],_0x29fefc=Reflect[_0x321fa5(0xb1)](constants_1['META_CONTROLLER_VERSION'],this['controllerType'])||'';return this[_0x321fa5(0xb3)]?'':utils_1[_0x321fa5(0xea)](_0x42776f,_0x29fefc);}get[a22_0x300a73(0xc6)](){const _0xde6f41=a22_0x300a73;if(this[_0xde6f41(0xb3)])return this[_0xde6f41(0xb3)];const _0x315a82=Reflect[_0xde6f41(0xb1)](constants_1[_0xde6f41(0xd4)],this[_0xde6f41(0xdc)])||'';return utils_1[_0xde6f41(0xea)](_0x315a82);}get[a22_0x300a73(0xba)](){const _0x38b102=a22_0x300a73;return typedi_1[_0x38b102(0xce)]['get'](this[_0x38b102(0xdc)]);}async['injectMiddlewares'](){const _0x431888=a22_0x300a73;for(const _0x488f55 of this[_0x431888(0xc2)]){const _0x22f3ba=await middleware_injector_1[_0x431888(0xef)](_0x488f55);this[_0x431888(0xb6)][_0x431888(0xdb)](_0x22f3ba);}}async[a22_0x300a73(0xb4)](_0x43304c){const _0x5283a4=a22_0x300a73,_0xc17de7=_0x43304c[_0x5283a4(0xe2)];logger[_0x5283a4(0xbd)](_0x5283a4(0xe9)+_0xc17de7['name']+'\x20at\x20'+this[_0x5283a4(0xc6)]+_0x43304c[_0x5283a4(0xc6)]);const _0x4ca1c3=new ControllerInjector(_0xc17de7,this);_0x4ca1c3[_0x5283a4(0xb3)]=_0x43304c[_0x5283a4(0xc6)],await _0x4ca1c3[_0x5283a4(0xcb)](this[_0x5283a4(0xb6)]);}async[a22_0x300a73(0xd5)](){const _0x20bb0e=a22_0x300a73;var _0x25fcc7;for(const _0x46aee2 of this[_0x20bb0e(0xd1)]){const _0x89bedd=utils_1[_0x20bb0e(0xd2)](_0x46aee2);if(_0x89bedd['nested'])await this[_0x20bb0e(0xb4)](_0x89bedd);else{const _0x2f202a=_0x89bedd[_0x20bb0e(0xc1)][_0x20bb0e(0xbf)]()[_0x20bb0e(0xb2)]();logger[_0x20bb0e(0xbd)]('injecting\x20'+this[_0x20bb0e(0xdc)][_0x20bb0e(0xde)]+'#'+_0x46aee2[_0x20bb0e(0xde)]+_0x20bb0e(0xc0)+_0x89bedd['method']+']\x20'+utils_1['normalizePaths'](((_0x25fcc7=this['root'])===null||_0x25fcc7===void 0x0?void 0x0:_0x25fcc7[_0x20bb0e(0xc6)])||'',this[_0x20bb0e(0xc6)],_0x89bedd[_0x20bb0e(0xc6)])),this[_0x20bb0e(0xb6)][_0x2f202a](_0x89bedd[_0x20bb0e(0xc6)],handler_wrapper_1[_0x20bb0e(0xdd)](_0x46aee2,this[_0x20bb0e(0xba)]));}}}async['inject'](_0x131e1d){const _0x111656=a22_0x300a73;!this[_0x111656(0xb3)]&&logger[_0x111656(0xbd)](_0x111656(0xbb)+this['controllerType'][_0x111656(0xde)]+'\x20{'+this[_0x111656(0xd0)]+'}'),await this[_0x111656(0xd8)](),await this[_0x111656(0xd5)](),_0x131e1d[_0x111656(0xdb)](''+this['prefix']+this['path'],this['router']);}}exports['ControllerInjector']=ControllerInjector;