const a22_0x1ea8=['use','181mHNLOA','middlewareInjector','../constants','typedi','map','350729JitWvG','express','toLowerCase','../classes/logger.class','112386SNowMp','\x20at\x20[','injectHandlers','injectMiddlewares','constructor','getHandlerMeta','middlewares','controller-injector','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../utils','\x20at\x20','getOwnMetadata','758788GBinyO','handlerWrapper','root','META_CONTROLLER_PATH','return\x20/\x22\x20+\x20this\x20+\x20\x22/','default','router','method','__esModule','defineProperty','META_CONTROLLER_PREFIX','META_HANDLER','nested','path','test','Logger','handlers','injecting\x20','391539oBQGWM','log','get','ControllerInjector','Router','prefix','inject','1WTpFZg','CONTROLLER_DEFAULT_PREFIX','injectNestedController','getPrototypeOf','4391oSbxOc','nestedPath','controllerType','toString','name','normalizePaths','374064jiKAmk','instance','./middleware.injector','META_CONTROLLER_MIDDLEWARES','injecting\x20nested\x20','../wrappers/handler.wrapper','287720cdjpGl','filter'];const a22_0x2896de=a22_0x4a71;(function(_0x4e5026,_0x29110e){const _0x5dfd22=a22_0x4a71;while(!![]){try{const _0x5479ec=parseInt(_0x5dfd22(0x6e))+-parseInt(_0x5dfd22(0x80))*parseInt(_0x5dfd22(0x87))+parseInt(_0x5dfd22(0x91))+parseInt(_0x5dfd22(0x9f))+parseInt(_0x5dfd22(0x9a))*-parseInt(_0x5dfd22(0x8b))+-parseInt(_0x5dfd22(0xa3))+parseInt(_0x5dfd22(0x97));if(_0x5479ec===_0x29110e)break;else _0x4e5026['push'](_0x4e5026['shift']());}catch(_0xf05371){_0x4e5026['push'](_0x4e5026['shift']());}}}(a22_0x1ea8,0x7361d));const a22_0x37ac50=function(){let _0x3172ab=!![];return function(_0x2ca891,_0x2da070){const _0x472e59=_0x3172ab?function(){if(_0x2da070){const _0x221776=_0x2da070['apply'](_0x2ca891,arguments);return _0x2da070=null,_0x221776;}}:function(){};return _0x3172ab=![],_0x472e59;};}(),a22_0x2c8336=a22_0x37ac50(this,function(){const _0x5d8d58=function(){const _0x1fc1cd=a22_0x4a71,_0x33b0d3=_0x5d8d58[_0x1fc1cd(0x66)](_0x1fc1cd(0x72))()[_0x1fc1cd(0x66)](_0x1fc1cd(0x6a));return!_0x33b0d3[_0x1fc1cd(0x7c)](a22_0x2c8336);};return _0x5d8d58();});function a22_0x4a71(_0x4b1a7d,_0x5ce59d){return a22_0x4a71=function(_0x5f007b,_0x2c8336){_0x5f007b=_0x5f007b-0x65;let _0x37ac50=a22_0x1ea8[_0x5f007b];return _0x37ac50;},a22_0x4a71(_0x4b1a7d,_0x5ce59d);}a22_0x2c8336();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x58252e){return _0x58252e&&_0x58252e['__esModule']?_0x58252e:{'default':_0x58252e};};Object[a22_0x2896de(0x77)](exports,a22_0x2896de(0x76),{'value':!![]}),exports[a22_0x2896de(0x83)]=void 0x0;const express_1=require(a22_0x2896de(0xa0)),typedi_1=__importDefault(require(a22_0x2896de(0x9d))),logger_class_1=require(a22_0x2896de(0xa2)),constants_1=require(a22_0x2896de(0x9c)),utils_1=require(a22_0x2896de(0x6b)),handler_wrapper_1=require(a22_0x2896de(0x96)),middleware_injector_1=require(a22_0x2896de(0x93)),logger=new logger_class_1[(a22_0x2896de(0x7d))](a22_0x2896de(0x69));class ControllerInjector{constructor(_0x62fe19,_0x203584){const _0x233e33=a22_0x2896de;this[_0x233e33(0x8d)]=_0x62fe19,this['root']=_0x203584,this[_0x233e33(0x74)]=express_1[_0x233e33(0x84)]({'mergeParams':!![]}),this[_0x233e33(0x8c)]='';if(!Reflect[_0x233e33(0x6d)](constants_1['META_CONTROLLER'],_0x62fe19))throw TypeError(_0x62fe19[_0x233e33(0x8f)]+'\x20is\x20not\x20a\x20Controller');}get[a22_0x2896de(0x7e)](){const _0x167931=a22_0x2896de,_0x223ba8=Object[_0x167931(0x8a)](this[_0x167931(0x92)]);return Object['getOwnPropertyNames'](_0x223ba8)[_0x167931(0x9e)](_0x376bbb=>_0x223ba8[_0x376bbb])[_0x167931(0x98)](_0x3474b6=>!!Reflect['getOwnMetadata'](constants_1[_0x167931(0x79)],_0x3474b6));}get[a22_0x2896de(0x68)](){const _0x2e7864=a22_0x2896de;return Reflect[_0x2e7864(0x6d)](constants_1[_0x2e7864(0x94)],this[_0x2e7864(0x92)])||[];}get['prefix'](){const _0x765dba=a22_0x2896de;var _0x98e484;const _0x20eee1=(_0x98e484=Reflect['getOwnMetadata'](constants_1[_0x765dba(0x78)],this[_0x765dba(0x8d)]))!==null&&_0x98e484!==void 0x0?_0x98e484:constants_1[_0x765dba(0x88)],_0x2baca3=Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_VERSION'],this['controllerType'])||'';return this[_0x765dba(0x8c)]?'':utils_1[_0x765dba(0x90)](_0x20eee1,_0x2baca3);}get['path'](){const _0x11c3fe=a22_0x2896de;if(this['nestedPath'])return this['nestedPath'];const _0x185b14=Reflect[_0x11c3fe(0x6d)](constants_1[_0x11c3fe(0x71)],this[_0x11c3fe(0x8d)])||'';return utils_1['normalizePaths'](_0x185b14);}get[a22_0x2896de(0x92)](){const _0x2ade5c=a22_0x2896de;return typedi_1[_0x2ade5c(0x73)][_0x2ade5c(0x82)](this[_0x2ade5c(0x8d)]);}async['injectMiddlewares'](){const _0xf69cd2=a22_0x2896de;for(const _0x174a62 of this[_0xf69cd2(0x68)]){const _0x3f1642=await middleware_injector_1[_0xf69cd2(0x9b)](_0x174a62);this['router'][_0xf69cd2(0x99)](_0x3f1642);}}async[a22_0x2896de(0x89)](_0x4f6ba4){const _0x4ffaf4=a22_0x2896de,_0x11f4a5=_0x4f6ba4[_0x4ffaf4(0x7a)];logger[_0x4ffaf4(0x81)](_0x4ffaf4(0x95)+_0x11f4a5['name']+_0x4ffaf4(0x6c)+this[_0x4ffaf4(0x7b)]+_0x4f6ba4[_0x4ffaf4(0x7b)]);const _0x58c531=new ControllerInjector(_0x11f4a5,this);_0x58c531[_0x4ffaf4(0x8c)]=_0x4f6ba4[_0x4ffaf4(0x7b)],await _0x58c531[_0x4ffaf4(0x86)](this[_0x4ffaf4(0x74)]);}async[a22_0x2896de(0xa5)](){const _0x1f5038=a22_0x2896de;var _0x2d4dba;for(const _0x393eb0 of this[_0x1f5038(0x7e)]){const _0x26690b=utils_1[_0x1f5038(0x67)](_0x393eb0);if(_0x26690b[_0x1f5038(0x7a)])await this[_0x1f5038(0x89)](_0x26690b);else{const _0x44de53=_0x26690b['method'][_0x1f5038(0x8e)]()[_0x1f5038(0xa1)]();logger['log'](_0x1f5038(0x7f)+this[_0x1f5038(0x8d)][_0x1f5038(0x8f)]+'#'+_0x393eb0[_0x1f5038(0x8f)]+_0x1f5038(0xa4)+_0x26690b[_0x1f5038(0x75)]+']\x20'+utils_1[_0x1f5038(0x90)](((_0x2d4dba=this[_0x1f5038(0x70)])===null||_0x2d4dba===void 0x0?void 0x0:_0x2d4dba[_0x1f5038(0x7b)])||'',this[_0x1f5038(0x7b)],_0x26690b[_0x1f5038(0x7b)])),this['router'][_0x44de53](_0x26690b[_0x1f5038(0x7b)],handler_wrapper_1[_0x1f5038(0x6f)](_0x393eb0,this[_0x1f5038(0x92)]));}}}async['inject'](_0x232a66){const _0x11eb33=a22_0x2896de;!this[_0x11eb33(0x8c)]&&logger['log']('injecting\x20'+this[_0x11eb33(0x8d)][_0x11eb33(0x8f)]+'\x20{'+this[_0x11eb33(0x85)]+'}'),await this[_0x11eb33(0x65)](),await this[_0x11eb33(0xa5)](),_0x232a66[_0x11eb33(0x99)](''+this[_0x11eb33(0x85)]+this[_0x11eb33(0x7b)],this[_0x11eb33(0x74)]);}}exports['ControllerInjector']=ControllerInjector;