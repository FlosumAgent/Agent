const a22_0x476b=['toLowerCase','getOwnMetadata','router','root','injecting\x20nested\x20','method','META_HANDLER','handlers','./middleware.injector','1263289gGYyuN','test','../classes/logger.class','injectHandlers','nested','getOwnPropertyNames','controller-injector','\x20at\x20','handlerWrapper','CONTROLLER_DEFAULT_PREFIX','controllerType','prefix','__importDefault','1157870RommhM','return\x20/\x22\x20+\x20this\x20+\x20\x22/','map','META_CONTROLLER_PATH','name','__esModule','middlewares','637298XaIljL','get','injecting\x20','1182602LHtwWI','normalizePaths','\x20is\x20not\x20a\x20Controller','944647DMCwPa','getHandlerMeta','5306887rrnDjA','apply','injectNestedController','inject','../constants','instance','nestedPath','../utils','Router','injectMiddlewares','default','getPrototypeOf','constructor','use','522309cwYzrf','typedi','path','filter','ControllerInjector','\x20at\x20[','defineProperty','META_CONTROLLER_MIDDLEWARES','META_CONTROLLER_VERSION','META_CONTROLLER_PREFIX','log','Logger'];const a22_0x1cf9d2=a22_0x4b54;(function(_0x1fd6c0,_0x54bcb8){const _0x50c5ca=a22_0x4b54;while(!![]){try{const _0x308e76=-parseInt(_0x50c5ca(0xba))+-parseInt(_0x50c5ca(0x85))+-parseInt(_0x50c5ca(0x82))+-parseInt(_0x50c5ca(0xad))+-parseInt(_0x50c5ca(0x88))+parseInt(_0x50c5ca(0x98))+parseInt(_0x50c5ca(0x8a));if(_0x308e76===_0x54bcb8)break;else _0x1fd6c0['push'](_0x1fd6c0['shift']());}catch(_0x347442){_0x1fd6c0['push'](_0x1fd6c0['shift']());}}}(a22_0x476b,0x9d1a2));const a22_0x13fd38=function(){let _0x5fed49=!![];return function(_0x2c5748,_0x30b788){const _0x1c426a=_0x5fed49?function(){const _0x20310b=a22_0x4b54;if(_0x30b788){const _0xa330b8=_0x30b788[_0x20310b(0x8b)](_0x2c5748,arguments);return _0x30b788=null,_0xa330b8;}}:function(){};return _0x5fed49=![],_0x1c426a;};}(),a22_0x5d8816=a22_0x13fd38(this,function(){const _0x5e8313=function(){const _0x20d713=a22_0x4b54,_0x48e392=_0x5e8313[_0x20d713(0x96)](_0x20d713(0xbb))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x48e392[_0x20d713(0xae)](a22_0x5d8816);};return _0x5e8313();});a22_0x5d8816();'use strict';var __importDefault=this&&this[a22_0x1cf9d2(0xb9)]||function(_0x19df29){const _0x210521=a22_0x1cf9d2;return _0x19df29&&_0x19df29[_0x210521(0xbf)]?_0x19df29:{'default':_0x19df29};};Object[a22_0x1cf9d2(0x9e)](exports,a22_0x1cf9d2(0xbf),{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require('express'),typedi_1=__importDefault(require(a22_0x1cf9d2(0x99))),logger_class_1=require(a22_0x1cf9d2(0xaf)),constants_1=require(a22_0x1cf9d2(0x8e)),utils_1=require(a22_0x1cf9d2(0x91)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a22_0x1cf9d2(0xac)),logger=new logger_class_1[(a22_0x1cf9d2(0xa3))](a22_0x1cf9d2(0xb3));class ControllerInjector{constructor(_0x2c249e,_0x2d14fa){const _0x40171b=a22_0x1cf9d2;this[_0x40171b(0xb7)]=_0x2c249e,this[_0x40171b(0xa7)]=_0x2d14fa,this[_0x40171b(0xa6)]=express_1[_0x40171b(0x92)]({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect['getOwnMetadata'](constants_1['META_CONTROLLER'],_0x2c249e))throw TypeError(_0x2c249e[_0x40171b(0xbe)]+_0x40171b(0x87));}get[a22_0x1cf9d2(0xab)](){const _0x4a8b12=a22_0x1cf9d2,_0x42b9b1=Object[_0x4a8b12(0x95)](this[_0x4a8b12(0x8f)]);return Object[_0x4a8b12(0xb2)](_0x42b9b1)[_0x4a8b12(0xbc)](_0x200e04=>_0x42b9b1[_0x200e04])[_0x4a8b12(0x9b)](_0x52b138=>!!Reflect['getOwnMetadata'](constants_1[_0x4a8b12(0xaa)],_0x52b138));}get[a22_0x1cf9d2(0x81)](){const _0x52a2ad=a22_0x1cf9d2;return Reflect[_0x52a2ad(0xa5)](constants_1[_0x52a2ad(0x9f)],this[_0x52a2ad(0x8f)])||[];}get[a22_0x1cf9d2(0xb8)](){const _0x25623b=a22_0x1cf9d2;var _0x100d08;const _0x2fb776=(_0x100d08=Reflect[_0x25623b(0xa5)](constants_1[_0x25623b(0xa1)],this[_0x25623b(0xb7)]))!==null&&_0x100d08!==void 0x0?_0x100d08:constants_1[_0x25623b(0xb6)],_0x260c01=Reflect['getOwnMetadata'](constants_1[_0x25623b(0xa0)],this['controllerType'])||'';return this[_0x25623b(0x90)]?'':utils_1['normalizePaths'](_0x2fb776,_0x260c01);}get[a22_0x1cf9d2(0x9a)](){const _0x108f4c=a22_0x1cf9d2;if(this[_0x108f4c(0x90)])return this['nestedPath'];const _0x88e65f=Reflect[_0x108f4c(0xa5)](constants_1[_0x108f4c(0xbd)],this['controllerType'])||'';return utils_1[_0x108f4c(0x86)](_0x88e65f);}get[a22_0x1cf9d2(0x8f)](){const _0x115f35=a22_0x1cf9d2;return typedi_1[_0x115f35(0x94)][_0x115f35(0x83)](this['controllerType']);}async[a22_0x1cf9d2(0x93)](){const _0x5ab133=a22_0x1cf9d2;for(const _0x591b56 of this[_0x5ab133(0x81)]){const _0x200890=await middleware_injector_1['middlewareInjector'](_0x591b56);this[_0x5ab133(0xa6)][_0x5ab133(0x97)](_0x200890);}}async[a22_0x1cf9d2(0x8c)](_0x207e59){const _0x26b22b=a22_0x1cf9d2,_0x408f21=_0x207e59[_0x26b22b(0xb1)];logger['log'](_0x26b22b(0xa8)+_0x408f21[_0x26b22b(0xbe)]+_0x26b22b(0xb4)+this[_0x26b22b(0x9a)]+_0x207e59[_0x26b22b(0x9a)]);const _0x16ab7c=new ControllerInjector(_0x408f21,this);_0x16ab7c[_0x26b22b(0x90)]=_0x207e59[_0x26b22b(0x9a)],await _0x16ab7c['inject'](this[_0x26b22b(0xa6)]);}async['injectHandlers'](){const _0x472b24=a22_0x1cf9d2;var _0x10a925;for(const _0x555a5d of this[_0x472b24(0xab)]){const _0x3aa166=utils_1[_0x472b24(0x89)](_0x555a5d);if(_0x3aa166[_0x472b24(0xb1)])await this[_0x472b24(0x8c)](_0x3aa166);else{const _0x41a421=_0x3aa166[_0x472b24(0xa9)]['toString']()[_0x472b24(0xa4)]();logger[_0x472b24(0xa2)](_0x472b24(0x84)+this[_0x472b24(0xb7)]['name']+'#'+_0x555a5d[_0x472b24(0xbe)]+_0x472b24(0x9d)+_0x3aa166['method']+']\x20'+utils_1[_0x472b24(0x86)](((_0x10a925=this[_0x472b24(0xa7)])===null||_0x10a925===void 0x0?void 0x0:_0x10a925[_0x472b24(0x9a)])||'',this['path'],_0x3aa166[_0x472b24(0x9a)])),this[_0x472b24(0xa6)][_0x41a421](_0x3aa166[_0x472b24(0x9a)],handler_wrapper_1[_0x472b24(0xb5)](_0x555a5d,this[_0x472b24(0x8f)]));}}}async[a22_0x1cf9d2(0x8d)](_0x477b88){const _0xb46c1=a22_0x1cf9d2;!this['nestedPath']&&logger[_0xb46c1(0xa2)](_0xb46c1(0x84)+this[_0xb46c1(0xb7)]['name']+'\x20{'+this[_0xb46c1(0xb8)]+'}'),await this['injectMiddlewares'](),await this[_0xb46c1(0xb0)](),_0x477b88['use'](''+this[_0xb46c1(0xb8)]+this[_0xb46c1(0x9a)],this[_0xb46c1(0xa6)]);}}function a22_0x4b54(_0x5c2cec,_0x9e675f){return a22_0x4b54=function(_0x4e16c3,_0x5d8816){_0x4e16c3=_0x4e16c3-0x81;let _0x13fd38=a22_0x476b[_0x4e16c3];return _0x13fd38;},a22_0x4b54(_0x5c2cec,_0x9e675f);}exports[a22_0x1cf9d2(0x9c)]=ControllerInjector;