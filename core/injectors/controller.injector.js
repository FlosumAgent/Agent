const a22_0xbd77=['3531pLMPwR','getHandlerMeta','handlerWrapper','instance','filter','default','injectHandlers','./middleware.injector','META_CONTROLLER_VERSION','96885VRhqXH','158706pKXCbD','__esModule','express','constructor','78361dTHjlk','META_CONTROLLER','META_CONTROLLER_PATH','215497OxRxri','../constants','294IPxFxF','name','META_CONTROLLER_MIDDLEWARES','root','router','../wrappers/handler.wrapper','Router','use','middlewareInjector','Logger','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../utils','META_CONTROLLER_PREFIX','41ZqrbTm','\x20is\x20not\x20a\x20Controller','6213tZRmcW','1YNcdla','prefix','1013iYdJEy','log','../classes/logger.class','nestedPath','middlewares','getOwnMetadata','get','\x20at\x20[','path','method','inject','controller-injector','toString','injectNestedController','getOwnPropertyNames','handlers','normalizePaths','injecting\x20','ControllerInjector','CONTROLLER_DEFAULT_PREFIX','test','apply','nested','toLowerCase','typedi','injecting\x20nested\x20','controllerType','29puZdaN','injectMiddlewares'];const a22_0xd07935=a22_0x1a72;(function(_0x2d7d16,_0x42906f){const _0x180eec=a22_0x1a72;while(!![]){try{const _0x4c0a0c=parseInt(_0x180eec(0xd6))*parseInt(_0x180eec(0xc4))+-parseInt(_0x180eec(0xfc))+parseInt(_0x180eec(0xc2))*-parseInt(_0x180eec(0xd4))+-parseInt(_0x180eec(0xd1))*-parseInt(_0x180eec(0xf3))+parseInt(_0x180eec(0x101))+-parseInt(_0x180eec(0xf1))*parseInt(_0x180eec(0xd3))+parseInt(_0x180eec(0xfd));if(_0x4c0a0c===_0x42906f)break;else _0x2d7d16['push'](_0x2d7d16['shift']());}catch(_0x4acdc1){_0x2d7d16['push'](_0x2d7d16['shift']());}}}(a22_0xbd77,0x2dadd));const a22_0xe7fd62=function(){let _0x23eb4e=!![];return function(_0x3c92eb,_0xd352ff){const _0x97d7a4=_0x23eb4e?function(){const _0x4530ec=a22_0x1a72;if(_0xd352ff){const _0x2030f7=_0xd352ff[_0x4530ec(0xeb)](_0x3c92eb,arguments);return _0xd352ff=null,_0x2030f7;}}:function(){};return _0x23eb4e=![],_0x97d7a4;};}(),a22_0x23f9cb=a22_0xe7fd62(this,function(){const _0x4a0bd1=function(){const _0x273c21=a22_0x1a72,_0x5b4b4a=_0x4a0bd1['constructor'](_0x273c21(0xce))()[_0x273c21(0x100)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x5b4b4a[_0x273c21(0xea)](a22_0x23f9cb);};return _0x4a0bd1();});a22_0x23f9cb();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2d17c4){const _0x1a4553=a22_0x1a72;return _0x2d17c4&&_0x2d17c4[_0x1a4553(0xfe)]?_0x2d17c4:{'default':_0x2d17c4};};function a22_0x1a72(_0x47cf70,_0x3aa3d5){return a22_0x1a72=function(_0x168a1c,_0x23f9cb){_0x168a1c=_0x168a1c-0xc2;let _0xe7fd62=a22_0xbd77[_0x168a1c];return _0xe7fd62;},a22_0x1a72(_0x47cf70,_0x3aa3d5);}Object['defineProperty'](exports,a22_0xd07935(0xfe),{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require(a22_0xd07935(0xff)),typedi_1=__importDefault(require(a22_0xd07935(0xee))),logger_class_1=require(a22_0xd07935(0xd8)),constants_1=require(a22_0xd07935(0xc3)),utils_1=require(a22_0xd07935(0xcf)),handler_wrapper_1=require(a22_0xd07935(0xc9)),middleware_injector_1=require(a22_0xd07935(0xfa)),logger=new logger_class_1[(a22_0xd07935(0xcd))](a22_0xd07935(0xe1));class ControllerInjector{constructor(_0x1368cc,_0x513d30){const _0x2e45eb=a22_0xd07935;this[_0x2e45eb(0xf0)]=_0x1368cc,this[_0x2e45eb(0xc7)]=_0x513d30,this['router']=express_1[_0x2e45eb(0xca)]({'mergeParams':!![]}),this[_0x2e45eb(0xd9)]='';if(!Reflect[_0x2e45eb(0xdb)](constants_1[_0x2e45eb(0x102)],_0x1368cc))throw TypeError(_0x1368cc['name']+_0x2e45eb(0xd2));}get[a22_0xd07935(0xe5)](){const _0x233955=a22_0xd07935,_0x3f4596=Object['getPrototypeOf'](this['instance']);return Object[_0x233955(0xe4)](_0x3f4596)['map'](_0x297b49=>_0x3f4596[_0x297b49])[_0x233955(0xf7)](_0x20b5d1=>!!Reflect[_0x233955(0xdb)](constants_1['META_HANDLER'],_0x20b5d1));}get[a22_0xd07935(0xda)](){const _0x2f739c=a22_0xd07935;return Reflect[_0x2f739c(0xdb)](constants_1[_0x2f739c(0xc6)],this[_0x2f739c(0xf6)])||[];}get[a22_0xd07935(0xd5)](){const _0x4f26dc=a22_0xd07935;var _0x21085f;const _0x290ca9=(_0x21085f=Reflect[_0x4f26dc(0xdb)](constants_1[_0x4f26dc(0xd0)],this[_0x4f26dc(0xf0)]))!==null&&_0x21085f!==void 0x0?_0x21085f:constants_1[_0x4f26dc(0xe9)],_0x4faa78=Reflect[_0x4f26dc(0xdb)](constants_1[_0x4f26dc(0xfb)],this[_0x4f26dc(0xf0)])||'';return this[_0x4f26dc(0xd9)]?'':utils_1[_0x4f26dc(0xe6)](_0x290ca9,_0x4faa78);}get[a22_0xd07935(0xde)](){const _0x1c18d7=a22_0xd07935;if(this['nestedPath'])return this[_0x1c18d7(0xd9)];const _0x2159ac=Reflect['getOwnMetadata'](constants_1[_0x1c18d7(0x103)],this['controllerType'])||'';return utils_1[_0x1c18d7(0xe6)](_0x2159ac);}get[a22_0xd07935(0xf6)](){const _0x58fab9=a22_0xd07935;return typedi_1[_0x58fab9(0xf8)][_0x58fab9(0xdc)](this['controllerType']);}async[a22_0xd07935(0xf2)](){const _0x13088e=a22_0xd07935;for(const _0x5d11f6 of this[_0x13088e(0xda)]){const _0x3c3bc5=await middleware_injector_1[_0x13088e(0xcc)](_0x5d11f6);this[_0x13088e(0xc8)][_0x13088e(0xcb)](_0x3c3bc5);}}async[a22_0xd07935(0xe3)](_0x113f74){const _0x2b7d84=a22_0xd07935,_0x1548e0=_0x113f74['nested'];logger['log'](_0x2b7d84(0xef)+_0x1548e0[_0x2b7d84(0xc5)]+'\x20at\x20'+this['path']+_0x113f74[_0x2b7d84(0xde)]);const _0x592db8=new ControllerInjector(_0x1548e0,this);_0x592db8[_0x2b7d84(0xd9)]=_0x113f74['path'],await _0x592db8[_0x2b7d84(0xe0)](this[_0x2b7d84(0xc8)]);}async['injectHandlers'](){const _0x465a15=a22_0xd07935;var _0x3bc34a;for(const _0x237abf of this['handlers']){const _0x5b99b3=utils_1[_0x465a15(0xf4)](_0x237abf);if(_0x5b99b3[_0x465a15(0xec)])await this['injectNestedController'](_0x5b99b3);else{const _0x5ca7c2=_0x5b99b3[_0x465a15(0xdf)][_0x465a15(0xe2)]()[_0x465a15(0xed)]();logger[_0x465a15(0xd7)](_0x465a15(0xe7)+this[_0x465a15(0xf0)][_0x465a15(0xc5)]+'#'+_0x237abf[_0x465a15(0xc5)]+_0x465a15(0xdd)+_0x5b99b3[_0x465a15(0xdf)]+']\x20'+utils_1['normalizePaths'](((_0x3bc34a=this[_0x465a15(0xc7)])===null||_0x3bc34a===void 0x0?void 0x0:_0x3bc34a['path'])||'',this[_0x465a15(0xde)],_0x5b99b3[_0x465a15(0xde)])),this[_0x465a15(0xc8)][_0x5ca7c2](_0x5b99b3['path'],handler_wrapper_1[_0x465a15(0xf5)](_0x237abf,this[_0x465a15(0xf6)]));}}}async[a22_0xd07935(0xe0)](_0x42bb97){const _0x5c30c7=a22_0xd07935;!this[_0x5c30c7(0xd9)]&&logger[_0x5c30c7(0xd7)](_0x5c30c7(0xe7)+this[_0x5c30c7(0xf0)]['name']+'\x20{'+this['prefix']+'}'),await this[_0x5c30c7(0xf2)](),await this[_0x5c30c7(0xf9)](),_0x42bb97['use'](''+this['prefix']+this['path'],this['router']);}}exports[a22_0xd07935(0xe8)]=ControllerInjector;