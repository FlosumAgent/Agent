const a22_0x5ee5=['prefix','express','injectMiddlewares','inject','CONTROLLER_DEFAULT_PREFIX','defineProperty','toLowerCase','apply','Router','1lQzFSp','normalizePaths','META_CONTROLLER_VERSION','getHandlerMeta','typedi','\x20is\x20not\x20a\x20Controller','injecting\x20','root','log','178996aECykr','filter','1051131YWwkxI','getOwnMetadata','./middleware.injector','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','injecting\x20nested\x20','nested','constructor','injectHandlers','method','handlers','../wrappers/handler.wrapper','controller-injector','handlerWrapper','middlewares','middlewareInjector','META_CONTROLLER','657302RouOKV','ControllerInjector','235075uESolu','name','META_CONTROLLER_PREFIX','get','../utils','toString','647004MgvgJA','map','path','nestedPath','1SyslPV','../classes/logger.class','instance','1585438HmCOLm','\x20at\x20','46587AegwEW','META_HANDLER','injectNestedController','router','META_CONTROLLER_PATH','controllerType'];const a22_0x1f1970=a22_0x6bf4;(function(_0x3723a7,_0x38de03){const _0x3eea0e=a22_0x6bf4;while(!![]){try{const _0x130f46=-parseInt(_0x3eea0e(0xd7))*parseInt(_0x3eea0e(0xd2))+parseInt(_0x3eea0e(0xd5))+-parseInt(_0x3eea0e(0xce))+parseInt(_0x3eea0e(0xc6))+parseInt(_0x3eea0e(0xc8))*parseInt(_0x3eea0e(0xe6))+parseInt(_0x3eea0e(0xb4))+-parseInt(_0x3eea0e(0xb6));if(_0x130f46===_0x38de03)break;else _0x3723a7['push'](_0x3723a7['shift']());}catch(_0x27930b){_0x3723a7['push'](_0x3723a7['shift']());}}}(a22_0x5ee5,0xdead9));const a22_0x187fd8=function(){let _0x571883=!![];return function(_0x37474f,_0x4b1fca){const _0x15df7b=_0x571883?function(){const _0x1460eb=a22_0x6bf4;if(_0x4b1fca){const _0x2c9ff4=_0x4b1fca[_0x1460eb(0xe4)](_0x37474f,arguments);return _0x4b1fca=null,_0x2c9ff4;}}:function(){};return _0x571883=![],_0x15df7b;};}(),a22_0x3da5eb=a22_0x187fd8(this,function(){const _0x3480fe=function(){const _0x232a46=a22_0x6bf4,_0x4bbad7=_0x3480fe[_0x232a46(0xbc)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x232a46(0xbc)](_0x232a46(0xb9));return!_0x4bbad7['test'](a22_0x3da5eb);};return _0x3480fe();});function a22_0x6bf4(_0xbec1c3,_0x5542ed){return a22_0x6bf4=function(_0x3f6ef5,_0x3da5eb){_0x3f6ef5=_0x3f6ef5-0xb2;let _0x187fd8=a22_0x5ee5[_0x3f6ef5];return _0x187fd8;},a22_0x6bf4(_0xbec1c3,_0x5542ed);}a22_0x3da5eb();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x5ed5cd){return _0x5ed5cd&&_0x5ed5cd['__esModule']?_0x5ed5cd:{'default':_0x5ed5cd};};Object[a22_0x1f1970(0xe2)](exports,'__esModule',{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require(a22_0x1f1970(0xde)),typedi_1=__importDefault(require(a22_0x1f1970(0xea))),logger_class_1=require(a22_0x1f1970(0xd3)),constants_1=require('../constants'),utils_1=require(a22_0x1f1970(0xcc)),handler_wrapper_1=require(a22_0x1f1970(0xc0)),middleware_injector_1=require(a22_0x1f1970(0xb8)),logger=new logger_class_1['Logger'](a22_0x1f1970(0xc1));class ControllerInjector{constructor(_0x26c844,_0x2ef4c9){const _0x1ccb3=a22_0x1f1970;this[_0x1ccb3(0xdc)]=_0x26c844,this[_0x1ccb3(0xb2)]=_0x2ef4c9,this['router']=express_1[_0x1ccb3(0xe5)]({'mergeParams':!![]}),this[_0x1ccb3(0xd1)]='';if(!Reflect[_0x1ccb3(0xb7)](constants_1[_0x1ccb3(0xc5)],_0x26c844))throw TypeError(_0x26c844['name']+_0x1ccb3(0xeb));}get[a22_0x1f1970(0xbf)](){const _0x45399d=a22_0x1f1970,_0x3faaf9=Object['getPrototypeOf'](this['instance']);return Object['getOwnPropertyNames'](_0x3faaf9)[_0x45399d(0xcf)](_0x5caf28=>_0x3faaf9[_0x5caf28])[_0x45399d(0xb5)](_0x33e364=>!!Reflect[_0x45399d(0xb7)](constants_1[_0x45399d(0xd8)],_0x33e364));}get[a22_0x1f1970(0xc3)](){const _0x5a3efe=a22_0x1f1970;return Reflect[_0x5a3efe(0xb7)](constants_1['META_CONTROLLER_MIDDLEWARES'],this['instance'])||[];}get['prefix'](){const _0x4d3a11=a22_0x1f1970;var _0x2501eb;const _0x1bb84b=(_0x2501eb=Reflect[_0x4d3a11(0xb7)](constants_1[_0x4d3a11(0xca)],this[_0x4d3a11(0xdc)]))!==null&&_0x2501eb!==void 0x0?_0x2501eb:constants_1[_0x4d3a11(0xe1)],_0x38ce1b=Reflect['getOwnMetadata'](constants_1[_0x4d3a11(0xe8)],this[_0x4d3a11(0xdc)])||'';return this[_0x4d3a11(0xd1)]?'':utils_1['normalizePaths'](_0x1bb84b,_0x38ce1b);}get[a22_0x1f1970(0xd0)](){const _0x4fdec2=a22_0x1f1970;if(this[_0x4fdec2(0xd1)])return this[_0x4fdec2(0xd1)];const _0x26387c=Reflect[_0x4fdec2(0xb7)](constants_1[_0x4fdec2(0xdb)],this[_0x4fdec2(0xdc)])||'';return utils_1[_0x4fdec2(0xe7)](_0x26387c);}get['instance'](){const _0x46a861=a22_0x1f1970;return typedi_1['default'][_0x46a861(0xcb)](this['controllerType']);}async[a22_0x1f1970(0xdf)](){const _0x4de2a6=a22_0x1f1970;for(const _0x1619a6 of this['middlewares']){const _0x550d2f=await middleware_injector_1[_0x4de2a6(0xc4)](_0x1619a6);this['router']['use'](_0x550d2f);}}async[a22_0x1f1970(0xd9)](_0x14adba){const _0x1353b7=a22_0x1f1970,_0x4b5a2e=_0x14adba[_0x1353b7(0xbb)];logger['log'](_0x1353b7(0xba)+_0x4b5a2e[_0x1353b7(0xc9)]+_0x1353b7(0xd6)+this[_0x1353b7(0xd0)]+_0x14adba[_0x1353b7(0xd0)]);const _0x3d0d2b=new ControllerInjector(_0x4b5a2e,this);_0x3d0d2b[_0x1353b7(0xd1)]=_0x14adba['path'],await _0x3d0d2b[_0x1353b7(0xe0)](this[_0x1353b7(0xda)]);}async['injectHandlers'](){const _0x4ee497=a22_0x1f1970;var _0x48ac70;for(const _0x53df88 of this[_0x4ee497(0xbf)]){const _0x2af3b3=utils_1[_0x4ee497(0xe9)](_0x53df88);if(_0x2af3b3['nested'])await this[_0x4ee497(0xd9)](_0x2af3b3);else{const _0x176df9=_0x2af3b3[_0x4ee497(0xbe)][_0x4ee497(0xcd)]()[_0x4ee497(0xe3)]();logger['log'](_0x4ee497(0xec)+this[_0x4ee497(0xdc)]['name']+'#'+_0x53df88[_0x4ee497(0xc9)]+'\x20at\x20['+_0x2af3b3['method']+']\x20'+utils_1[_0x4ee497(0xe7)](((_0x48ac70=this[_0x4ee497(0xb2)])===null||_0x48ac70===void 0x0?void 0x0:_0x48ac70[_0x4ee497(0xd0)])||'',this[_0x4ee497(0xd0)],_0x2af3b3[_0x4ee497(0xd0)])),this[_0x4ee497(0xda)][_0x176df9](_0x2af3b3[_0x4ee497(0xd0)],handler_wrapper_1[_0x4ee497(0xc2)](_0x53df88,this[_0x4ee497(0xd4)]));}}}async[a22_0x1f1970(0xe0)](_0x2706a9){const _0x51c6e5=a22_0x1f1970;!this[_0x51c6e5(0xd1)]&&logger[_0x51c6e5(0xb3)](_0x51c6e5(0xec)+this[_0x51c6e5(0xdc)]['name']+'\x20{'+this[_0x51c6e5(0xdd)]+'}'),await this[_0x51c6e5(0xdf)](),await this[_0x51c6e5(0xbd)](),_0x2706a9['use'](''+this['prefix']+this[_0x51c6e5(0xd0)],this[_0x51c6e5(0xda)]);}}exports[a22_0x1f1970(0xc7)]=ControllerInjector;