const a22_0x4b07=['filter','map','901nZZNSh','398337uYdqpm','toLowerCase','nestedPath','__importDefault','name','test','injecting\x20nested\x20','express','31192Ljfhel','\x20at\x20[','7dXzOif','Router','../wrappers/handler.wrapper','apply','router','1AmXXyY','prefix','34412sTrOWL','injecting\x20','META_CONTROLLER_PATH','2iUqyxx','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','toString','controller-injector','37EpceMq','instance','101110AodXWM','getOwnPropertyNames','__esModule','middlewares','META_CONTROLLER_PREFIX','../utils','ControllerInjector','getHandlerMeta','META_CONTROLLER_VERSION','../constants','normalizePaths','injectNestedController','Logger','defineProperty','handlerWrapper','getPrototypeOf','\x20at\x20','getOwnMetadata','path','../classes/logger.class','log','default','215779MuzpLP','\x20is\x20not\x20a\x20Controller','middlewareInjector','controllerType','nested','use','inject','152549kbjGVO','META_CONTROLLER_MIDDLEWARES','injectHandlers','injectMiddlewares','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor'];const a22_0x14eb83=a22_0xec92;(function(_0x5a3ea9,_0x5d236b){const _0x1ef406=a22_0xec92;while(!![]){try{const _0x5c1efb=-parseInt(_0x1ef406(0x105))+-parseInt(_0x1ef406(0xe6))*-parseInt(_0x1ef406(0xdf))+-parseInt(_0x1ef406(0x114))*-parseInt(_0x1ef406(0xed))+-parseInt(_0x1ef406(0xe9))*parseInt(_0x1ef406(0xef))+parseInt(_0x1ef406(0xdd))+-parseInt(_0x1ef406(0x10c))+parseInt(_0x1ef406(0xe4))*parseInt(_0x1ef406(0x115));if(_0x5c1efb===_0x5d236b)break;else _0x5a3ea9['push'](_0x5a3ea9['shift']());}catch(_0x3b1a94){_0x5a3ea9['push'](_0x5a3ea9['shift']());}}}(a22_0x4b07,0x20852));const a22_0x433d81=function(){let _0x428b17=!![];return function(_0x2c55b1,_0x5437d2){const _0x541ee8=_0x428b17?function(){const _0x467b84=a22_0xec92;if(_0x5437d2){const _0x47bb3a=_0x5437d2[_0x467b84(0xe2)](_0x2c55b1,arguments);return _0x5437d2=null,_0x47bb3a;}}:function(){};return _0x428b17=![],_0x541ee8;};}(),a22_0xec318b=a22_0x433d81(this,function(){const _0x5d185c=function(){const _0x30dd9a=a22_0xec92,_0x34489f=_0x5d185c[_0x30dd9a(0x111)](_0x30dd9a(0x110))()[_0x30dd9a(0x111)](_0x30dd9a(0xea));return!_0x34489f[_0x30dd9a(0xda)](a22_0xec318b);};return _0x5d185c();});function a22_0xec92(_0x43a732,_0x2c92c3){return a22_0xec92=function(_0x554a0b,_0xec318b){_0x554a0b=_0x554a0b-0xd6;let _0x433d81=a22_0x4b07[_0x554a0b];return _0x433d81;},a22_0xec92(_0x43a732,_0x2c92c3);}a22_0xec318b();'use strict';var __importDefault=this&&this[a22_0x14eb83(0xd8)]||function(_0x11201d){const _0x171057=a22_0x14eb83;return _0x11201d&&_0x11201d[_0x171057(0xf1)]?_0x11201d:{'default':_0x11201d};};Object[a22_0x14eb83(0xfc)](exports,a22_0x14eb83(0xf1),{'value':!![]}),exports[a22_0x14eb83(0xf5)]=void 0x0;const express_1=require(a22_0x14eb83(0xdc)),typedi_1=__importDefault(require('typedi')),logger_class_1=require(a22_0x14eb83(0x102)),constants_1=require(a22_0x14eb83(0xf8)),utils_1=require(a22_0x14eb83(0xf4)),handler_wrapper_1=require(a22_0x14eb83(0xe1)),middleware_injector_1=require('./middleware.injector'),logger=new logger_class_1[(a22_0x14eb83(0xfb))](a22_0x14eb83(0xec));class ControllerInjector{constructor(_0x40a975,_0x26e6f8){const _0x37332e=a22_0x14eb83;this['controllerType']=_0x40a975,this['root']=_0x26e6f8,this[_0x37332e(0xe3)]=express_1[_0x37332e(0xe0)]({'mergeParams':!![]}),this[_0x37332e(0xd7)]='';if(!Reflect[_0x37332e(0x100)](constants_1['META_CONTROLLER'],_0x40a975))throw TypeError(_0x40a975['name']+_0x37332e(0x106));}get['handlers'](){const _0x5a81c0=a22_0x14eb83,_0x1e24a7=Object[_0x5a81c0(0xfe)](this[_0x5a81c0(0xee)]);return Object[_0x5a81c0(0xf0)](_0x1e24a7)[_0x5a81c0(0x113)](_0x2e03c8=>_0x1e24a7[_0x2e03c8])[_0x5a81c0(0x112)](_0x20bfa9=>!!Reflect['getOwnMetadata'](constants_1['META_HANDLER'],_0x20bfa9));}get[a22_0x14eb83(0xf2)](){const _0x4ca098=a22_0x14eb83;return Reflect[_0x4ca098(0x100)](constants_1[_0x4ca098(0x10d)],this[_0x4ca098(0xee)])||[];}get['prefix'](){const _0x1cd583=a22_0x14eb83;var _0x47a221;const _0x541915=(_0x47a221=Reflect[_0x1cd583(0x100)](constants_1[_0x1cd583(0xf3)],this[_0x1cd583(0x108)]))!==null&&_0x47a221!==void 0x0?_0x47a221:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x11846b=Reflect[_0x1cd583(0x100)](constants_1[_0x1cd583(0xf7)],this[_0x1cd583(0x108)])||'';return this[_0x1cd583(0xd7)]?'':utils_1[_0x1cd583(0xf9)](_0x541915,_0x11846b);}get['path'](){const _0x2159ab=a22_0x14eb83;if(this['nestedPath'])return this[_0x2159ab(0xd7)];const _0x754d2e=Reflect['getOwnMetadata'](constants_1[_0x2159ab(0xe8)],this[_0x2159ab(0x108)])||'';return utils_1[_0x2159ab(0xf9)](_0x754d2e);}get[a22_0x14eb83(0xee)](){const _0x56190b=a22_0x14eb83;return typedi_1[_0x56190b(0x104)]['get'](this['controllerType']);}async[a22_0x14eb83(0x10f)](){const _0x53cadb=a22_0x14eb83;for(const _0x5103de of this[_0x53cadb(0xf2)]){const _0x3a864e=await middleware_injector_1[_0x53cadb(0x107)](_0x5103de);this[_0x53cadb(0xe3)]['use'](_0x3a864e);}}async[a22_0x14eb83(0xfa)](_0x5bb9b0){const _0xbaf017=a22_0x14eb83,_0x1178ad=_0x5bb9b0[_0xbaf017(0x109)];logger[_0xbaf017(0x103)](_0xbaf017(0xdb)+_0x1178ad[_0xbaf017(0xd9)]+_0xbaf017(0xff)+this[_0xbaf017(0x101)]+_0x5bb9b0[_0xbaf017(0x101)]);const _0x5d5c6e=new ControllerInjector(_0x1178ad,this);_0x5d5c6e[_0xbaf017(0xd7)]=_0x5bb9b0[_0xbaf017(0x101)],await _0x5d5c6e['inject'](this[_0xbaf017(0xe3)]);}async[a22_0x14eb83(0x10e)](){const _0x4b78fa=a22_0x14eb83;var _0xd1053f;for(const _0x4da96b of this['handlers']){const _0x31c0ba=utils_1[_0x4b78fa(0xf6)](_0x4da96b);if(_0x31c0ba['nested'])await this[_0x4b78fa(0xfa)](_0x31c0ba);else{const _0x146cfa=_0x31c0ba['method'][_0x4b78fa(0xeb)]()[_0x4b78fa(0xd6)]();logger[_0x4b78fa(0x103)]('injecting\x20'+this['controllerType']['name']+'#'+_0x4da96b[_0x4b78fa(0xd9)]+_0x4b78fa(0xde)+_0x31c0ba['method']+']\x20'+utils_1[_0x4b78fa(0xf9)](((_0xd1053f=this['root'])===null||_0xd1053f===void 0x0?void 0x0:_0xd1053f[_0x4b78fa(0x101)])||'',this[_0x4b78fa(0x101)],_0x31c0ba[_0x4b78fa(0x101)])),this['router'][_0x146cfa](_0x31c0ba[_0x4b78fa(0x101)],handler_wrapper_1[_0x4b78fa(0xfd)](_0x4da96b,this[_0x4b78fa(0xee)]));}}}async[a22_0x14eb83(0x10b)](_0x46de0f){const _0x35f6ba=a22_0x14eb83;!this['nestedPath']&&logger[_0x35f6ba(0x103)](_0x35f6ba(0xe7)+this[_0x35f6ba(0x108)][_0x35f6ba(0xd9)]+'\x20{'+this[_0x35f6ba(0xe5)]+'}'),await this['injectMiddlewares'](),await this['injectHandlers'](),_0x46de0f[_0x35f6ba(0x10a)](''+this[_0x35f6ba(0xe5)]+this[_0x35f6ba(0x101)],this['router']);}}exports[a22_0x14eb83(0xf5)]=ControllerInjector;