const a22_0x3d28=['injecting\x20','controller-injector','handlerWrapper','default','return\x20/\x22\x20+\x20this\x20+\x20\x22/','__esModule','META_CONTROLLER_PREFIX','middlewareInjector','401998jOesCY','prefix','nested','Router','injectHandlers','385514auGUUv','injectMiddlewares','5149mkoPrT','toLowerCase','get','typedi','1ZQZLDy','ControllerInjector','middlewares','META_CONTROLLER','nestedPath','handlers','../constants','filter','189563LZIPYn','../wrappers/handler.wrapper','__importDefault','inject','injecting\x20nested\x20','META_HANDLER','4XBhYPH','test','use','controllerType','../classes/logger.class','435170cPusTi','310181TGpLCu','log','getOwnMetadata','\x20at\x20[','name','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','router','META_CONTROLLER_PATH','\x20is\x20not\x20a\x20Controller','path','923543GoqpmR','META_CONTROLLER_MIDDLEWARES','root','normalizePaths','constructor','../utils','./middleware.injector','instance','express','injectNestedController','Logger','method'];const a22_0x3e2566=a22_0x5c03;(function(_0x2d6661,_0x142afe){const _0x1a84e2=a22_0x5c03;while(!![]){try{const _0xf3847f=parseInt(_0x1a84e2(0x1ee))+-parseInt(_0x1a84e2(0x1cf))+parseInt(_0x1a84e2(0x1da))*parseInt(_0x1a84e2(0x1bb))+-parseInt(_0x1a84e2(0x1d6))*-parseInt(_0x1a84e2(0x1e8))+-parseInt(_0x1a84e2(0x1ed))+-parseInt(_0x1a84e2(0x1e2))+parseInt(_0x1a84e2(0x1d4));if(_0xf3847f===_0x142afe)break;else _0x2d6661['push'](_0x2d6661['shift']());}catch(_0x47da2c){_0x2d6661['push'](_0x2d6661['shift']());}}}(a22_0x3d28,0x95aef));const a22_0x2ae2ce=function(){let _0x2538b0=!![];return function(_0x437d86,_0x273277){const _0x41b9c1=_0x2538b0?function(){if(_0x273277){const _0x4f48f5=_0x273277['apply'](_0x437d86,arguments);return _0x273277=null,_0x4f48f5;}}:function(){};return _0x2538b0=![],_0x41b9c1;};}(),a22_0x4abdd1=a22_0x2ae2ce(this,function(){const _0x522284=function(){const _0x16e372=a22_0x5c03,_0x43c084=_0x522284[_0x16e372(0x1bf)](_0x16e372(0x1cb))()['constructor'](_0x16e372(0x1f3));return!_0x43c084[_0x16e372(0x1e9)](a22_0x4abdd1);};return _0x522284();});function a22_0x5c03(_0xf1c89d,_0x71a18b){return a22_0x5c03=function(_0x426cdd,_0x4abdd1){_0x426cdd=_0x426cdd-0x1b9;let _0x2ae2ce=a22_0x3d28[_0x426cdd];return _0x2ae2ce;},a22_0x5c03(_0xf1c89d,_0x71a18b);}a22_0x4abdd1();'use strict';var __importDefault=this&&this[a22_0x3e2566(0x1e4)]||function(_0x110349){const _0x30a018=a22_0x3e2566;return _0x110349&&_0x110349[_0x30a018(0x1cc)]?_0x110349:{'default':_0x110349};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a22_0x3e2566(0x1db)]=void 0x0;const express_1=require(a22_0x3e2566(0x1c3)),typedi_1=__importDefault(require(a22_0x3e2566(0x1d9))),logger_class_1=require(a22_0x3e2566(0x1ec)),constants_1=require(a22_0x3e2566(0x1e0)),utils_1=require(a22_0x3e2566(0x1c0)),handler_wrapper_1=require(a22_0x3e2566(0x1e3)),middleware_injector_1=require(a22_0x3e2566(0x1c1)),logger=new logger_class_1[(a22_0x3e2566(0x1c5))](a22_0x3e2566(0x1c8));class ControllerInjector{constructor(_0xbe3c89,_0x1bbb3a){const _0x5a8c68=a22_0x3e2566;this[_0x5a8c68(0x1eb)]=_0xbe3c89,this[_0x5a8c68(0x1bd)]=_0x1bbb3a,this['router']=express_1[_0x5a8c68(0x1d2)]({'mergeParams':!![]}),this[_0x5a8c68(0x1de)]='';if(!Reflect[_0x5a8c68(0x1f0)](constants_1[_0x5a8c68(0x1dd)],_0xbe3c89))throw TypeError(_0xbe3c89['name']+_0x5a8c68(0x1b9));}get[a22_0x3e2566(0x1df)](){const _0x3c10d9=a22_0x3e2566,_0x2cc51c=Object['getPrototypeOf'](this[_0x3c10d9(0x1c2)]);return Object['getOwnPropertyNames'](_0x2cc51c)['map'](_0x4d47c3=>_0x2cc51c[_0x4d47c3])[_0x3c10d9(0x1e1)](_0x335295=>!!Reflect[_0x3c10d9(0x1f0)](constants_1[_0x3c10d9(0x1e7)],_0x335295));}get[a22_0x3e2566(0x1dc)](){const _0x12cf37=a22_0x3e2566;return Reflect[_0x12cf37(0x1f0)](constants_1[_0x12cf37(0x1bc)],this[_0x12cf37(0x1c2)])||[];}get[a22_0x3e2566(0x1d0)](){const _0x24ded9=a22_0x3e2566;var _0x520786;const _0x14b7fc=(_0x520786=Reflect[_0x24ded9(0x1f0)](constants_1[_0x24ded9(0x1cd)],this[_0x24ded9(0x1eb)]))!==null&&_0x520786!==void 0x0?_0x520786:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x5c1859=Reflect[_0x24ded9(0x1f0)](constants_1['META_CONTROLLER_VERSION'],this['controllerType'])||'';return this[_0x24ded9(0x1de)]?'':utils_1[_0x24ded9(0x1be)](_0x14b7fc,_0x5c1859);}get[a22_0x3e2566(0x1ba)](){const _0x22ecad=a22_0x3e2566;if(this[_0x22ecad(0x1de)])return this[_0x22ecad(0x1de)];const _0x57d6ef=Reflect[_0x22ecad(0x1f0)](constants_1[_0x22ecad(0x1f5)],this[_0x22ecad(0x1eb)])||'';return utils_1[_0x22ecad(0x1be)](_0x57d6ef);}get['instance'](){const _0xcf89ed=a22_0x3e2566;return typedi_1[_0xcf89ed(0x1ca)][_0xcf89ed(0x1d8)](this['controllerType']);}async[a22_0x3e2566(0x1d5)](){const _0x434a80=a22_0x3e2566;for(const _0x144a49 of this[_0x434a80(0x1dc)]){const _0x1ec8ca=await middleware_injector_1[_0x434a80(0x1ce)](_0x144a49);this[_0x434a80(0x1f4)][_0x434a80(0x1ea)](_0x1ec8ca);}}async[a22_0x3e2566(0x1c4)](_0x4cf647){const _0x4d950b=a22_0x3e2566,_0x232765=_0x4cf647[_0x4d950b(0x1d1)];logger['log'](_0x4d950b(0x1e6)+_0x232765[_0x4d950b(0x1f2)]+'\x20at\x20'+this[_0x4d950b(0x1ba)]+_0x4cf647[_0x4d950b(0x1ba)]);const _0x4e26a8=new ControllerInjector(_0x232765,this);_0x4e26a8['nestedPath']=_0x4cf647[_0x4d950b(0x1ba)],await _0x4e26a8[_0x4d950b(0x1e5)](this[_0x4d950b(0x1f4)]);}async[a22_0x3e2566(0x1d3)](){const _0x84d82a=a22_0x3e2566;var _0x5e9f8e;for(const _0x7333d of this['handlers']){const _0x98b04e=utils_1['getHandlerMeta'](_0x7333d);if(_0x98b04e[_0x84d82a(0x1d1)])await this['injectNestedController'](_0x98b04e);else{const _0x3a43a0=_0x98b04e[_0x84d82a(0x1c6)]['toString']()[_0x84d82a(0x1d7)]();logger[_0x84d82a(0x1ef)](_0x84d82a(0x1c7)+this[_0x84d82a(0x1eb)][_0x84d82a(0x1f2)]+'#'+_0x7333d[_0x84d82a(0x1f2)]+_0x84d82a(0x1f1)+_0x98b04e['method']+']\x20'+utils_1[_0x84d82a(0x1be)](((_0x5e9f8e=this[_0x84d82a(0x1bd)])===null||_0x5e9f8e===void 0x0?void 0x0:_0x5e9f8e[_0x84d82a(0x1ba)])||'',this['path'],_0x98b04e[_0x84d82a(0x1ba)])),this[_0x84d82a(0x1f4)][_0x3a43a0](_0x98b04e[_0x84d82a(0x1ba)],handler_wrapper_1[_0x84d82a(0x1c9)](_0x7333d,this[_0x84d82a(0x1c2)]));}}}async[a22_0x3e2566(0x1e5)](_0xe9488e){const _0x1ebcd1=a22_0x3e2566;!this['nestedPath']&&logger['log'](_0x1ebcd1(0x1c7)+this[_0x1ebcd1(0x1eb)]['name']+'\x20{'+this['prefix']+'}'),await this[_0x1ebcd1(0x1d5)](),await this['injectHandlers'](),_0xe9488e['use'](''+this['prefix']+this[_0x1ebcd1(0x1ba)],this[_0x1ebcd1(0x1f4)]);}}exports[a22_0x3e2566(0x1db)]=ControllerInjector;