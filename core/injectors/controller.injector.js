const a23_0x531e03=a23_0x6046;(function(_0x1cabaf,_0xc1a09e){const _0x31a877=a23_0x6046,_0x307097=_0x1cabaf();while(!![]){try{const _0x56e910=parseInt(_0x31a877(0x1fa))/0x1+-parseInt(_0x31a877(0x1d1))/0x2+parseInt(_0x31a877(0x1dd))/0x3+parseInt(_0x31a877(0x1f0))/0x4+-parseInt(_0x31a877(0x1f4))/0x5+parseInt(_0x31a877(0x203))/0x6+-parseInt(_0x31a877(0x1d6))/0x7;if(_0x56e910===_0xc1a09e)break;else _0x307097['push'](_0x307097['shift']());}catch(_0x64256f){_0x307097['push'](_0x307097['shift']());}}}(a23_0x8c3b,0x19bbd));const a23_0x1429a4=function(){let _0x161f38=!![];return function(_0x136088,_0x5addc7){const _0xb41250=_0x161f38?function(){if(_0x5addc7){const _0x2f033d=_0x5addc7['apply'](_0x136088,arguments);return _0x5addc7=null,_0x2f033d;}}:function(){};return _0x161f38=![],_0xb41250;};}(),a23_0x45f4f2=a23_0x1429a4(this,function(){const _0x2da1c7=a23_0x6046;return a23_0x45f4f2[_0x2da1c7(0x1e6)]()[_0x2da1c7(0x1e5)]('(((.+)+)+)+$')[_0x2da1c7(0x1e6)]()['constructor'](a23_0x45f4f2)[_0x2da1c7(0x1e5)]('(((.+)+)+)+$');});a23_0x45f4f2();'use strict';var __importDefault=this&&this[a23_0x531e03(0x1fc)]||function(_0x1b3b37){return _0x1b3b37&&_0x1b3b37['__esModule']?_0x1b3b37:{'default':_0x1b3b37};};Object['defineProperty'](exports,a23_0x531e03(0x1ed),{'value':!![]}),exports[a23_0x531e03(0x1e7)]=void 0x0;function a23_0x8c3b(){const _0x4716bf=['316119jZcGSZ','Logger','\x20at\x20[','normalizePaths','root','META_HANDLER','getHandlerMeta','\x20is\x20not\x20a\x20Controller','search','toString','ControllerInjector','injectMiddlewares','filter','map','typedi','META_CONTROLLER','__esModule','META_CONTROLLER_PATH','toLowerCase','611584wJezHx','middlewareInjector','log','META_CONTROLLER_VERSION','161655Gehqrt','injecting\x20','controller-injector','router','path','../wrappers/handler.wrapper','40772bInqVn','getOwnPropertyNames','__importDefault','method','META_CONTROLLER_PREFIX','instance','get','../constants','handlers','411138SxasCs','name','injectNestedController','express','prefix','82148GvZaLJ','inject','use','nested','getPrototypeOf','1321278cYZeDp','injectHandlers','controllerType','Router','getOwnMetadata','nestedPath','./middleware.injector'];a23_0x8c3b=function(){return _0x4716bf;};return a23_0x8c3b();}const express_1=require(a23_0x531e03(0x1cf)),typedi_1=__importDefault(require(a23_0x531e03(0x1eb))),logger_class_1=require('../classes/logger.class'),constants_1=require(a23_0x531e03(0x201)),utils_1=require('../utils'),handler_wrapper_1=require(a23_0x531e03(0x1f9)),middleware_injector_1=require(a23_0x531e03(0x1dc)),logger=new logger_class_1[(a23_0x531e03(0x1de))](a23_0x531e03(0x1f6));class ControllerInjector{constructor(_0x28e7aa,_0x1f70cc){const _0x53bd30=a23_0x531e03;this[_0x53bd30(0x1d8)]=_0x28e7aa,this['root']=_0x1f70cc,this[_0x53bd30(0x1f7)]=(0x0,express_1[_0x53bd30(0x1d9)])({'mergeParams':!![]}),this[_0x53bd30(0x1db)]='';if(!Reflect[_0x53bd30(0x1da)](constants_1[_0x53bd30(0x1ec)],_0x28e7aa))throw TypeError(_0x28e7aa['name']+_0x53bd30(0x1e4));}get[a23_0x531e03(0x202)](){const _0xe9ea=a23_0x531e03,_0x18cb30=Object[_0xe9ea(0x1d5)](this[_0xe9ea(0x1ff)]);return Object[_0xe9ea(0x1fb)](_0x18cb30)[_0xe9ea(0x1ea)](_0x2d8515=>_0x18cb30[_0x2d8515])[_0xe9ea(0x1e9)](_0x5ab971=>!!Reflect[_0xe9ea(0x1da)](constants_1[_0xe9ea(0x1e2)],_0x5ab971));}get['middlewares'](){const _0x1f0bc6=a23_0x531e03;return Reflect[_0x1f0bc6(0x1da)](constants_1['META_CONTROLLER_MIDDLEWARES'],this[_0x1f0bc6(0x1ff)])||[];}get['prefix'](){const _0xc59a21=a23_0x531e03;var _0x20dc3f;const _0x10b367=(_0x20dc3f=Reflect[_0xc59a21(0x1da)](constants_1[_0xc59a21(0x1fe)],this[_0xc59a21(0x1d8)]))!==null&&_0x20dc3f!==void 0x0?_0x20dc3f:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x1898c5=Reflect[_0xc59a21(0x1da)](constants_1[_0xc59a21(0x1f3)],this[_0xc59a21(0x1d8)])||'';return this[_0xc59a21(0x1db)]?'':(0x0,utils_1[_0xc59a21(0x1e0)])(_0x10b367,_0x1898c5);}get[a23_0x531e03(0x1f8)](){const _0x2bf265=a23_0x531e03;if(this['nestedPath'])return this[_0x2bf265(0x1db)];const _0x219657=Reflect['getOwnMetadata'](constants_1[_0x2bf265(0x1ee)],this[_0x2bf265(0x1d8)])||'';return(0x0,utils_1[_0x2bf265(0x1e0)])(_0x219657);}get[a23_0x531e03(0x1ff)](){const _0x275f47=a23_0x531e03;return typedi_1['default'][_0x275f47(0x200)](this['controllerType']);}async[a23_0x531e03(0x1e8)](){const _0x33453c=a23_0x531e03;for(const _0x509c62 of this['middlewares']){const _0x2ca03f=await(0x0,middleware_injector_1[_0x33453c(0x1f1)])(_0x509c62);this[_0x33453c(0x1f7)][_0x33453c(0x1d3)](_0x2ca03f);}}async['injectNestedController'](_0x161c30){const _0x421561=a23_0x531e03,_0x15f2b6=_0x161c30[_0x421561(0x1d4)];logger['log']('injecting\x20nested\x20'+_0x15f2b6[_0x421561(0x1cd)]+'\x20at\x20'+this[_0x421561(0x1f8)]+_0x161c30[_0x421561(0x1f8)]);const _0x30f2a5=new ControllerInjector(_0x15f2b6,this);_0x30f2a5[_0x421561(0x1db)]=_0x161c30[_0x421561(0x1f8)],await _0x30f2a5['inject'](this[_0x421561(0x1f7)]);}async[a23_0x531e03(0x1d7)](){const _0x54e30c=a23_0x531e03;var _0x51df65;for(const _0x2e9851 of this[_0x54e30c(0x202)]){const _0x517521=(0x0,utils_1[_0x54e30c(0x1e3)])(_0x2e9851);if(_0x517521[_0x54e30c(0x1d4)])await this[_0x54e30c(0x1ce)](_0x517521);else{const _0xba4085=_0x517521[_0x54e30c(0x1fd)][_0x54e30c(0x1e6)]()[_0x54e30c(0x1ef)]();logger[_0x54e30c(0x1f2)](_0x54e30c(0x1f5)+this[_0x54e30c(0x1d8)][_0x54e30c(0x1cd)]+'#'+_0x2e9851[_0x54e30c(0x1cd)]+_0x54e30c(0x1df)+_0x517521[_0x54e30c(0x1fd)]+']\x20'+(0x0,utils_1[_0x54e30c(0x1e0)])(((_0x51df65=this[_0x54e30c(0x1e1)])===null||_0x51df65===void 0x0?void 0x0:_0x51df65[_0x54e30c(0x1f8)])||'',this['path'],_0x517521[_0x54e30c(0x1f8)])),this['router'][_0xba4085](_0x517521[_0x54e30c(0x1f8)],(0x0,handler_wrapper_1['handlerWrapper'])(_0x2e9851,this[_0x54e30c(0x1ff)]));}}}async[a23_0x531e03(0x1d2)](_0x15c7b7){const _0x5e8cf2=a23_0x531e03;!this[_0x5e8cf2(0x1db)]&&logger['log'](_0x5e8cf2(0x1f5)+this[_0x5e8cf2(0x1d8)][_0x5e8cf2(0x1cd)]+'\x20{'+this['prefix']+'}'),await this[_0x5e8cf2(0x1e8)](),await this[_0x5e8cf2(0x1d7)](),_0x15c7b7[_0x5e8cf2(0x1d3)](''+this[_0x5e8cf2(0x1d0)]+this[_0x5e8cf2(0x1f8)],this[_0x5e8cf2(0x1f7)]);}}function a23_0x6046(_0x5b3be6,_0x4869fc){const _0x51c73d=a23_0x8c3b();return a23_0x6046=function(_0x45f4f2,_0x1429a4){_0x45f4f2=_0x45f4f2-0x1cd;let _0x8c3b9c=_0x51c73d[_0x45f4f2];return _0x8c3b9c;},a23_0x6046(_0x5b3be6,_0x4869fc);}exports['ControllerInjector']=ControllerInjector;