const a22_0x3bf4=['^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','994OWcfRu','CONTROLLER_DEFAULT_PREFIX','getOwnPropertyNames','META_CONTROLLER_PREFIX','META_HANDLER','./middleware.injector','controllerType','normalizePaths','../wrappers/handler.wrapper','Router','316vzRRJw','1003179NsPWhB','META_CONTROLLER_VERSION','express','filter','483mIqEsr','961170KUpsFd','default','controller-injector','middlewares','../classes/logger.class','typedi','\x20at\x20[','middlewareInjector','META_CONTROLLER_MIDDLEWARES','injectNestedController','path','ControllerInjector','inject','instance','injecting\x20','getOwnMetadata','34zQzrAy','defineProperty','642859MYImCt','test','72824WmsEDe','handlers','Logger','router','apply','../utils','injectHandlers','__esModule','method','use','injectMiddlewares','get','../constants','name','27533DjuWtp','META_CONTROLLER_PATH','return\x20/\x22\x20+\x20this\x20+\x20\x22/','toString','META_CONTROLLER','nestedPath','3AVIjpr','54ekXcVk','injecting\x20nested\x20','constructor','log','getHandlerMeta','prefix','toLowerCase'];const a22_0x5f3b5f=a22_0x5dcb;(function(_0x5ba573,_0xc8d74e){const _0x51e20d=a22_0x5dcb;while(!![]){try{const _0x5d6b16=-parseInt(_0x51e20d(0x179))+-parseInt(_0x51e20d(0x175))*parseInt(_0x51e20d(0x187))+parseInt(_0x51e20d(0x165))+-parseInt(_0x51e20d(0x160))+parseInt(_0x51e20d(0x14d))*-parseInt(_0x51e20d(0x164))+-parseInt(_0x51e20d(0x15f))*parseInt(_0x51e20d(0x155))+parseInt(_0x51e20d(0x14c))*parseInt(_0x51e20d(0x177));if(_0x5d6b16===_0xc8d74e)break;else _0x5ba573['push'](_0x5ba573['shift']());}catch(_0x1931b2){_0x5ba573['push'](_0x5ba573['shift']());}}}(a22_0x3bf4,0x8335c));const a22_0x44fa05=function(){let _0x1a85d8=!![];return function(_0x26262c,_0x393672){const _0x4a8b34=_0x1a85d8?function(){const _0x15c630=a22_0x5dcb;if(_0x393672){const _0x58ee60=_0x393672[_0x15c630(0x17d)](_0x26262c,arguments);return _0x393672=null,_0x58ee60;}}:function(){};return _0x1a85d8=![],_0x4a8b34;};}(),a22_0x52b0e8=a22_0x44fa05(this,function(){const _0x202bc8=function(){const _0x4eb5a9=a22_0x5dcb,_0x2dac4f=_0x202bc8['constructor'](_0x4eb5a9(0x189))()[_0x4eb5a9(0x14f)](_0x4eb5a9(0x154));return!_0x2dac4f[_0x4eb5a9(0x178)](a22_0x52b0e8);};return _0x202bc8();});a22_0x52b0e8();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x291280){return _0x291280&&_0x291280['__esModule']?_0x291280:{'default':_0x291280};};function a22_0x5dcb(_0x4932eb,_0x32b5ae){return a22_0x5dcb=function(_0x8902a0,_0x52b0e8){_0x8902a0=_0x8902a0-0x14c;let _0x44fa05=a22_0x3bf4[_0x8902a0];return _0x44fa05;},a22_0x5dcb(_0x4932eb,_0x32b5ae);}Object[a22_0x5f3b5f(0x176)](exports,a22_0x5f3b5f(0x180),{'value':!![]}),exports[a22_0x5f3b5f(0x170)]=void 0x0;const express_1=require(a22_0x5f3b5f(0x162)),typedi_1=__importDefault(require(a22_0x5f3b5f(0x16a))),logger_class_1=require(a22_0x5f3b5f(0x169)),constants_1=require(a22_0x5f3b5f(0x185)),utils_1=require(a22_0x5f3b5f(0x17e)),handler_wrapper_1=require(a22_0x5f3b5f(0x15d)),middleware_injector_1=require(a22_0x5f3b5f(0x15a)),logger=new logger_class_1[(a22_0x5f3b5f(0x17b))](a22_0x5f3b5f(0x167));class ControllerInjector{constructor(_0x5333e8,_0x3d6a3a){const _0x21f813=a22_0x5f3b5f;this[_0x21f813(0x15b)]=_0x5333e8,this['root']=_0x3d6a3a,this['router']=express_1[_0x21f813(0x15e)]({'mergeParams':!![]}),this[_0x21f813(0x18c)]='';if(!Reflect[_0x21f813(0x174)](constants_1[_0x21f813(0x18b)],_0x5333e8))throw TypeError(_0x5333e8[_0x21f813(0x186)]+'\x20is\x20not\x20a\x20Controller');}get['handlers'](){const _0x56ea3e=a22_0x5f3b5f,_0x2bc026=Object['getPrototypeOf'](this['instance']);return Object[_0x56ea3e(0x157)](_0x2bc026)['map'](_0x3adc34=>_0x2bc026[_0x3adc34])[_0x56ea3e(0x163)](_0x4edeaa=>!!Reflect[_0x56ea3e(0x174)](constants_1[_0x56ea3e(0x159)],_0x4edeaa));}get[a22_0x5f3b5f(0x168)](){const _0x282217=a22_0x5f3b5f;return Reflect[_0x282217(0x174)](constants_1[_0x282217(0x16d)],this['instance'])||[];}get[a22_0x5f3b5f(0x152)](){const _0x1088b7=a22_0x5f3b5f;var _0xa5ae14;const _0xfbe645=(_0xa5ae14=Reflect['getOwnMetadata'](constants_1[_0x1088b7(0x158)],this['controllerType']))!==null&&_0xa5ae14!==void 0x0?_0xa5ae14:constants_1[_0x1088b7(0x156)],_0x415c46=Reflect[_0x1088b7(0x174)](constants_1[_0x1088b7(0x161)],this[_0x1088b7(0x15b)])||'';return this[_0x1088b7(0x18c)]?'':utils_1[_0x1088b7(0x15c)](_0xfbe645,_0x415c46);}get[a22_0x5f3b5f(0x16f)](){const _0x21e19e=a22_0x5f3b5f;if(this['nestedPath'])return this[_0x21e19e(0x18c)];const _0x418d19=Reflect[_0x21e19e(0x174)](constants_1[_0x21e19e(0x188)],this[_0x21e19e(0x15b)])||'';return utils_1[_0x21e19e(0x15c)](_0x418d19);}get[a22_0x5f3b5f(0x172)](){const _0x4c9653=a22_0x5f3b5f;return typedi_1[_0x4c9653(0x166)][_0x4c9653(0x184)](this['controllerType']);}async['injectMiddlewares'](){const _0x2e7c53=a22_0x5f3b5f;for(const _0xfddee6 of this[_0x2e7c53(0x168)]){const _0x20a8e2=await middleware_injector_1[_0x2e7c53(0x16c)](_0xfddee6);this[_0x2e7c53(0x17c)][_0x2e7c53(0x182)](_0x20a8e2);}}async[a22_0x5f3b5f(0x16e)](_0x2b7d2a){const _0x22d0a3=a22_0x5f3b5f,_0x2824dd=_0x2b7d2a['nested'];logger[_0x22d0a3(0x150)](_0x22d0a3(0x14e)+_0x2824dd[_0x22d0a3(0x186)]+'\x20at\x20'+this[_0x22d0a3(0x16f)]+_0x2b7d2a['path']);const _0x1b0bff=new ControllerInjector(_0x2824dd,this);_0x1b0bff[_0x22d0a3(0x18c)]=_0x2b7d2a[_0x22d0a3(0x16f)],await _0x1b0bff[_0x22d0a3(0x171)](this[_0x22d0a3(0x17c)]);}async[a22_0x5f3b5f(0x17f)](){const _0x7af510=a22_0x5f3b5f;var _0x27de08;for(const _0x26198 of this[_0x7af510(0x17a)]){const _0x2ae0f6=utils_1[_0x7af510(0x151)](_0x26198);if(_0x2ae0f6['nested'])await this[_0x7af510(0x16e)](_0x2ae0f6);else{const _0x437961=_0x2ae0f6['method'][_0x7af510(0x18a)]()[_0x7af510(0x153)]();logger[_0x7af510(0x150)]('injecting\x20'+this[_0x7af510(0x15b)][_0x7af510(0x186)]+'#'+_0x26198['name']+_0x7af510(0x16b)+_0x2ae0f6[_0x7af510(0x181)]+']\x20'+utils_1['normalizePaths'](((_0x27de08=this['root'])===null||_0x27de08===void 0x0?void 0x0:_0x27de08[_0x7af510(0x16f)])||'',this[_0x7af510(0x16f)],_0x2ae0f6[_0x7af510(0x16f)])),this[_0x7af510(0x17c)][_0x437961](_0x2ae0f6['path'],handler_wrapper_1['handlerWrapper'](_0x26198,this[_0x7af510(0x172)]));}}}async[a22_0x5f3b5f(0x171)](_0x6e8b22){const _0x1042a5=a22_0x5f3b5f;!this['nestedPath']&&logger[_0x1042a5(0x150)](_0x1042a5(0x173)+this[_0x1042a5(0x15b)][_0x1042a5(0x186)]+'\x20{'+this[_0x1042a5(0x152)]+'}'),await this[_0x1042a5(0x183)](),await this[_0x1042a5(0x17f)](),_0x6e8b22['use'](''+this[_0x1042a5(0x152)]+this['path'],this['router']);}}exports[a22_0x5f3b5f(0x170)]=ControllerInjector;