const a23_0x3c319f=a23_0x39a8;function a23_0x5d66(){const _0x2a5265=['controller-injector','instance','log','__esModule','10REvDry','middlewareInjector','defineProperty','\x20at\x20','nested','toString','(((.+)+)+)+$','apply','META_CONTROLLER_MIDDLEWARES','Router','injecting\x20nested\x20','root','method','649116fXhRhA','../wrappers/handler.wrapper','ControllerInjector','META_CONTROLLER','nestedPath','injectHandlers','5RqyhHf','handlerWrapper','use','normalizePaths','8940344QjAdHe','constructor','search','prefix','default','controllerType','inject','handlers','express','3625523oQrmuO','../utils','110fEgOwP','META_HANDLER','filter','../classes/logger.class','9xSnoWs','META_CONTROLLER_PATH','map','name','get','getPrototypeOf','200138NpPKht','8559160vpTVLy','780354RkVglE','../constants','196794MwRILr','path','middlewares','router','META_CONTROLLER_PREFIX','getOwnMetadata','injectMiddlewares','typedi','./middleware.injector'];a23_0x5d66=function(){return _0x2a5265;};return a23_0x5d66();}function a23_0x39a8(_0x198073,_0x4c7e45){const _0x187d8e=a23_0x5d66();return a23_0x39a8=function(_0x2bbd88,_0x1e1026){_0x2bbd88=_0x2bbd88-0x99;let _0x5d6655=_0x187d8e[_0x2bbd88];return _0x5d6655;},a23_0x39a8(_0x198073,_0x4c7e45);}(function(_0x5004d3,_0x258c85){const _0x356abb=a23_0x39a8,_0x12c2f5=_0x5004d3();while(!![]){try{const _0x5e3e13=parseInt(_0x356abb(0xb2))/0x1*(parseInt(_0x356abb(0xcb))/0x2)+parseInt(_0x356abb(0xcd))/0x3+parseInt(_0x356abb(0xac))/0x4+parseInt(_0x356abb(0xc1))/0x5*(-parseInt(_0x356abb(0xcf))/0x6)+parseInt(_0x356abb(0xb6))/0x7+parseInt(_0x356abb(0xcc))/0x8*(-parseInt(_0x356abb(0xc5))/0x9)+parseInt(_0x356abb(0x9f))/0xa*(parseInt(_0x356abb(0xbf))/0xb);if(_0x5e3e13===_0x258c85)break;else _0x12c2f5['push'](_0x12c2f5['shift']());}catch(_0x562b24){_0x12c2f5['push'](_0x12c2f5['shift']());}}}(a23_0x5d66,0xb4306));const a23_0x1e1026=function(){let _0x5e5026=!![];return function(_0x5acf59,_0x468bbf){const _0x37fc6b=_0x5e5026?function(){const _0x34ec5b=a23_0x39a8;if(_0x468bbf){const _0x4cdd07=_0x468bbf[_0x34ec5b(0xa6)](_0x5acf59,arguments);return _0x468bbf=null,_0x4cdd07;}}:function(){};return _0x5e5026=![],_0x37fc6b;};}(),a23_0x2bbd88=a23_0x1e1026(this,function(){const _0x24c0e1=a23_0x39a8;return a23_0x2bbd88[_0x24c0e1(0xa4)]()[_0x24c0e1(0xb8)]('(((.+)+)+)+$')['toString']()[_0x24c0e1(0xb7)](a23_0x2bbd88)[_0x24c0e1(0xb8)](_0x24c0e1(0xa5));});a23_0x2bbd88();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x2cb10d){const _0x1f74e3=a23_0x39a8;return _0x2cb10d&&_0x2cb10d[_0x1f74e3(0x9e)]?_0x2cb10d:{'default':_0x2cb10d};};Object[a23_0x3c319f(0xa1)](exports,a23_0x3c319f(0x9e),{'value':!![]}),exports[a23_0x3c319f(0xae)]=void 0x0;const express_1=require(a23_0x3c319f(0xbe)),typedi_1=__importDefault(require(a23_0x3c319f(0x99))),logger_class_1=require(a23_0x3c319f(0xc4)),constants_1=require(a23_0x3c319f(0xce)),utils_1=require(a23_0x3c319f(0xc0)),handler_wrapper_1=require(a23_0x3c319f(0xad)),middleware_injector_1=require(a23_0x3c319f(0x9a)),logger=new logger_class_1['Logger'](a23_0x3c319f(0x9b));class ControllerInjector{constructor(_0x595063,_0x16a6db){const _0x255475=a23_0x3c319f;this[_0x255475(0xbb)]=_0x595063,this[_0x255475(0xaa)]=_0x16a6db,this[_0x255475(0xd2)]=(0x0,express_1[_0x255475(0xa8)])({'mergeParams':!![]}),this[_0x255475(0xb0)]='';if(!Reflect[_0x255475(0xd4)](constants_1[_0x255475(0xaf)],_0x595063))throw TypeError(_0x595063[_0x255475(0xc8)]+'\x20is\x20not\x20a\x20Controller');}get[a23_0x3c319f(0xbd)](){const _0x41ffc7=a23_0x3c319f,_0x26c722=Object[_0x41ffc7(0xca)](this[_0x41ffc7(0x9c)]);return Object['getOwnPropertyNames'](_0x26c722)[_0x41ffc7(0xc7)](_0x257180=>_0x26c722[_0x257180])[_0x41ffc7(0xc3)](_0x506abf=>!!Reflect['getOwnMetadata'](constants_1[_0x41ffc7(0xc2)],_0x506abf));}get[a23_0x3c319f(0xd1)](){const _0x252db2=a23_0x3c319f;return Reflect[_0x252db2(0xd4)](constants_1[_0x252db2(0xa7)],this[_0x252db2(0x9c)])||[];}get['prefix'](){const _0x63d02e=a23_0x3c319f;var _0x2cf16a;const _0x367f73=(_0x2cf16a=Reflect[_0x63d02e(0xd4)](constants_1[_0x63d02e(0xd3)],this[_0x63d02e(0xbb)]))!==null&&_0x2cf16a!==void 0x0?_0x2cf16a:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x5bdc08=Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_VERSION'],this[_0x63d02e(0xbb)])||'';return this[_0x63d02e(0xb0)]?'':(0x0,utils_1[_0x63d02e(0xb5)])(_0x367f73,_0x5bdc08);}get[a23_0x3c319f(0xd0)](){const _0x307a89=a23_0x3c319f;if(this['nestedPath'])return this[_0x307a89(0xb0)];const _0x19173c=Reflect[_0x307a89(0xd4)](constants_1[_0x307a89(0xc6)],this['controllerType'])||'';return(0x0,utils_1[_0x307a89(0xb5)])(_0x19173c);}get['instance'](){const _0x5afdc2=a23_0x3c319f;return typedi_1[_0x5afdc2(0xba)][_0x5afdc2(0xc9)](this[_0x5afdc2(0xbb)]);}async[a23_0x3c319f(0xd5)](){const _0x5e9619=a23_0x3c319f;for(const _0x44b113 of this[_0x5e9619(0xd1)]){const _0x50ae81=await(0x0,middleware_injector_1[_0x5e9619(0xa0)])(_0x44b113);this[_0x5e9619(0xd2)][_0x5e9619(0xb4)](_0x50ae81);}}async['injectNestedController'](_0x1318e4){const _0x29a6f8=a23_0x3c319f,_0x368170=_0x1318e4[_0x29a6f8(0xa3)];logger[_0x29a6f8(0x9d)](_0x29a6f8(0xa9)+_0x368170['name']+_0x29a6f8(0xa2)+this[_0x29a6f8(0xd0)]+_0x1318e4[_0x29a6f8(0xd0)]);const _0x2b5efc=new ControllerInjector(_0x368170,this);_0x2b5efc['nestedPath']=_0x1318e4['path'],await _0x2b5efc['inject'](this[_0x29a6f8(0xd2)]);}async[a23_0x3c319f(0xb1)](){const _0x47894c=a23_0x3c319f;var _0x23b852;for(const _0x331434 of this[_0x47894c(0xbd)]){const _0x2b9847=(0x0,utils_1['getHandlerMeta'])(_0x331434);if(_0x2b9847[_0x47894c(0xa3)])await this['injectNestedController'](_0x2b9847);else{const _0x4df723=_0x2b9847[_0x47894c(0xab)][_0x47894c(0xa4)]()['toLowerCase']();logger[_0x47894c(0x9d)]('injecting\x20'+this[_0x47894c(0xbb)]['name']+'#'+_0x331434[_0x47894c(0xc8)]+'\x20at\x20['+_0x2b9847[_0x47894c(0xab)]+']\x20'+(0x0,utils_1[_0x47894c(0xb5)])(((_0x23b852=this['root'])===null||_0x23b852===void 0x0?void 0x0:_0x23b852[_0x47894c(0xd0)])||'',this[_0x47894c(0xd0)],_0x2b9847['path'])),this[_0x47894c(0xd2)][_0x4df723](_0x2b9847['path'],(0x0,handler_wrapper_1[_0x47894c(0xb3)])(_0x331434,this[_0x47894c(0x9c)]));}}}async[a23_0x3c319f(0xbc)](_0x3957ea){const _0x454d61=a23_0x3c319f;!this[_0x454d61(0xb0)]&&logger[_0x454d61(0x9d)]('injecting\x20'+this[_0x454d61(0xbb)]['name']+'\x20{'+this[_0x454d61(0xb9)]+'}'),await this[_0x454d61(0xd5)](),await this['injectHandlers'](),_0x3957ea[_0x454d61(0xb4)](''+this[_0x454d61(0xb9)]+this[_0x454d61(0xd0)],this[_0x454d61(0xd2)]);}}exports[a23_0x3c319f(0xae)]=ControllerInjector;