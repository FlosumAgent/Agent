const a22_0x531e=['constructor','router','../constants','../wrappers/handler.wrapper','Router','__importDefault','injecting\x20','name','toLowerCase','get','instance','CONTROLLER_DEFAULT_PREFIX','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../utils','\x20at\x20[','path','63275mSnHfd','nestedPath','typedi','getOwnPropertyNames','normalizePaths','4VdmAoy','META_CONTROLLER_PATH','defineProperty','default','getOwnMetadata','10537UFgHrI','899396XvDOJA','23789wTSOdf','1JhRaNP','13asAkqR','84415QFxGGm','map','prefix','META_CONTROLLER_PREFIX','handlerWrapper','root','injectNestedController','middlewareInjector','use','filter','META_HANDLER','\x20is\x20not\x20a\x20Controller','handlers','return\x20/\x22\x20+\x20this\x20+\x20\x22/','197646QdbUwT','inject','controllerType','express','test','middlewares','./middleware.injector','766072ARXMya','53dZxAIE','META_CONTROLLER_MIDDLEWARES','injectMiddlewares','method','META_CONTROLLER_VERSION','toString','__esModule','ControllerInjector','2iXiwzY','injectHandlers','log','getPrototypeOf','injecting\x20nested\x20','nested','apply'];const a22_0x5aab7d=a22_0x469a;(function(_0x4a7ee1,_0x249006){const _0x21ea28=a22_0x469a;while(!![]){try{const _0xa4c54=parseInt(_0x21ea28(0x214))+-parseInt(_0x21ea28(0x21d))*-parseInt(_0x21ea28(0x1ff))+parseInt(_0x21ea28(0x1f5))*-parseInt(_0x21ea28(0x1fc))+-parseInt(_0x21ea28(0x1fd))*-parseInt(_0x21ea28(0x20d))+parseInt(_0x21ea28(0x1fe))*-parseInt(_0x21ea28(0x1f0))+parseInt(_0x21ea28(0x215))*-parseInt(_0x21ea28(0x1fa))+parseInt(_0x21ea28(0x1fb));if(_0xa4c54===_0x249006)break;else _0x4a7ee1['push'](_0x4a7ee1['shift']());}catch(_0x2d22d0){_0x4a7ee1['push'](_0x4a7ee1['shift']());}}}(a22_0x531e,0x87ae8));const a22_0x3bf41f=function(){let _0x52d1f5=!![];return function(_0x187e16,_0x383bf6){const _0x69dbb0=_0x52d1f5?function(){const _0x55c464=a22_0x469a;if(_0x383bf6){const _0x391dce=_0x383bf6[_0x55c464(0x223)](_0x187e16,arguments);return _0x383bf6=null,_0x391dce;}}:function(){};return _0x52d1f5=![],_0x69dbb0;};}(),a22_0x2152d0=a22_0x3bf41f(this,function(){const _0xee68ec=function(){const _0x15ee7a=a22_0x469a,_0x16378d=_0xee68ec[_0x15ee7a(0x224)](_0x15ee7a(0x20c))()[_0x15ee7a(0x224)](_0x15ee7a(0x1ec));return!_0x16378d[_0x15ee7a(0x211)](a22_0x2152d0);};return _0xee68ec();});a22_0x2152d0();'use strict';var __importDefault=this&&this[a22_0x5aab7d(0x229)]||function(_0x1e66d7){const _0x3739a3=a22_0x5aab7d;return _0x1e66d7&&_0x1e66d7[_0x3739a3(0x21b)]?_0x1e66d7:{'default':_0x1e66d7};};function a22_0x469a(_0xdec1e5,_0x6a82fc){return a22_0x469a=function(_0x4df195,_0x2152d0){_0x4df195=_0x4df195-0x1e6;let _0x3bf41f=a22_0x531e[_0x4df195];return _0x3bf41f;},a22_0x469a(_0xdec1e5,_0x6a82fc);}Object[a22_0x5aab7d(0x1f7)](exports,a22_0x5aab7d(0x21b),{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require(a22_0x5aab7d(0x210)),typedi_1=__importDefault(require(a22_0x5aab7d(0x1f2))),logger_class_1=require('../classes/logger.class'),constants_1=require(a22_0x5aab7d(0x226)),utils_1=require(a22_0x5aab7d(0x1ed)),handler_wrapper_1=require(a22_0x5aab7d(0x227)),middleware_injector_1=require(a22_0x5aab7d(0x213)),logger=new logger_class_1['Logger']('controller-injector');class ControllerInjector{constructor(_0x12a243,_0x1d9e93){const _0x544630=a22_0x5aab7d;this[_0x544630(0x20f)]=_0x12a243,this[_0x544630(0x204)]=_0x1d9e93,this[_0x544630(0x225)]=express_1[_0x544630(0x228)]({'mergeParams':!![]}),this[_0x544630(0x1f1)]='';if(!Reflect[_0x544630(0x1f9)](constants_1['META_CONTROLLER'],_0x12a243))throw TypeError(_0x12a243[_0x544630(0x1e7)]+_0x544630(0x20a));}get[a22_0x5aab7d(0x20b)](){const _0x48d375=a22_0x5aab7d,_0x12857b=Object[_0x48d375(0x220)](this['instance']);return Object[_0x48d375(0x1f3)](_0x12857b)[_0x48d375(0x200)](_0x2bb10c=>_0x12857b[_0x2bb10c])[_0x48d375(0x208)](_0x26104e=>!!Reflect[_0x48d375(0x1f9)](constants_1[_0x48d375(0x209)],_0x26104e));}get[a22_0x5aab7d(0x212)](){const _0x39bb52=a22_0x5aab7d;return Reflect[_0x39bb52(0x1f9)](constants_1[_0x39bb52(0x216)],this[_0x39bb52(0x1ea)])||[];}get['prefix'](){const _0x399ba8=a22_0x5aab7d;var _0x1300d0;const _0xf4dbc3=(_0x1300d0=Reflect[_0x399ba8(0x1f9)](constants_1[_0x399ba8(0x202)],this[_0x399ba8(0x20f)]))!==null&&_0x1300d0!==void 0x0?_0x1300d0:constants_1[_0x399ba8(0x1eb)],_0x4f5578=Reflect[_0x399ba8(0x1f9)](constants_1[_0x399ba8(0x219)],this[_0x399ba8(0x20f)])||'';return this[_0x399ba8(0x1f1)]?'':utils_1[_0x399ba8(0x1f4)](_0xf4dbc3,_0x4f5578);}get[a22_0x5aab7d(0x1ef)](){const _0x50b91f=a22_0x5aab7d;if(this[_0x50b91f(0x1f1)])return this[_0x50b91f(0x1f1)];const _0x247cf5=Reflect[_0x50b91f(0x1f9)](constants_1[_0x50b91f(0x1f6)],this[_0x50b91f(0x20f)])||'';return utils_1[_0x50b91f(0x1f4)](_0x247cf5);}get[a22_0x5aab7d(0x1ea)](){const _0x2f1f5f=a22_0x5aab7d;return typedi_1[_0x2f1f5f(0x1f8)][_0x2f1f5f(0x1e9)](this[_0x2f1f5f(0x20f)]);}async['injectMiddlewares'](){const _0x4b7fce=a22_0x5aab7d;for(const _0x4c79ae of this[_0x4b7fce(0x212)]){const _0x169030=await middleware_injector_1[_0x4b7fce(0x206)](_0x4c79ae);this[_0x4b7fce(0x225)][_0x4b7fce(0x207)](_0x169030);}}async[a22_0x5aab7d(0x205)](_0x2dab94){const _0x749007=a22_0x5aab7d,_0x2e1109=_0x2dab94[_0x749007(0x222)];logger['log'](_0x749007(0x221)+_0x2e1109['name']+'\x20at\x20'+this[_0x749007(0x1ef)]+_0x2dab94[_0x749007(0x1ef)]);const _0x43dd3d=new ControllerInjector(_0x2e1109,this);_0x43dd3d['nestedPath']=_0x2dab94['path'],await _0x43dd3d['inject'](this[_0x749007(0x225)]);}async[a22_0x5aab7d(0x21e)](){const _0x33eb06=a22_0x5aab7d;var _0x5bb5f8;for(const _0x5629de of this['handlers']){const _0x15eb38=utils_1['getHandlerMeta'](_0x5629de);if(_0x15eb38[_0x33eb06(0x222)])await this['injectNestedController'](_0x15eb38);else{const _0x15ab4b=_0x15eb38[_0x33eb06(0x218)][_0x33eb06(0x21a)]()[_0x33eb06(0x1e8)]();logger[_0x33eb06(0x21f)]('injecting\x20'+this[_0x33eb06(0x20f)][_0x33eb06(0x1e7)]+'#'+_0x5629de['name']+_0x33eb06(0x1ee)+_0x15eb38['method']+']\x20'+utils_1['normalizePaths'](((_0x5bb5f8=this[_0x33eb06(0x204)])===null||_0x5bb5f8===void 0x0?void 0x0:_0x5bb5f8[_0x33eb06(0x1ef)])||'',this[_0x33eb06(0x1ef)],_0x15eb38[_0x33eb06(0x1ef)])),this[_0x33eb06(0x225)][_0x15ab4b](_0x15eb38[_0x33eb06(0x1ef)],handler_wrapper_1[_0x33eb06(0x203)](_0x5629de,this['instance']));}}}async[a22_0x5aab7d(0x20e)](_0x3239ac){const _0x15bb13=a22_0x5aab7d;!this[_0x15bb13(0x1f1)]&&logger[_0x15bb13(0x21f)](_0x15bb13(0x1e6)+this[_0x15bb13(0x20f)][_0x15bb13(0x1e7)]+'\x20{'+this['prefix']+'}'),await this[_0x15bb13(0x217)](),await this['injectHandlers'](),_0x3239ac[_0x15bb13(0x207)](''+this[_0x15bb13(0x201)]+this[_0x15bb13(0x1ef)],this[_0x15bb13(0x225)]);}}exports[a22_0x5aab7d(0x21c)]=ControllerInjector;