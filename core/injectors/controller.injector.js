const a22_0x4e18=['path','ControllerInjector','use','7YyIZNR','1CURxED','filter','default','instance','META_CONTROLLER_MIDDLEWARES','META_CONTROLLER_PREFIX','handlers','toLowerCase','handlerWrapper','normalizePaths','125pIpOnH','696915kLIbLQ','name','root','./middleware.injector','map','META_CONTROLLER_PATH','toString','controllerType','../classes/logger.class','injectHandlers','log','\x20at\x20[','injecting\x20nested\x20','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Logger','523563ldqjXP','../constants','router','META_CONTROLLER_VERSION','getOwnMetadata','CONTROLLER_DEFAULT_PREFIX','injecting\x20','8713OlKwJa','prefix','express','META_HANDLER','return\x20/\x22\x20+\x20this\x20+\x20\x22/','controller-injector','middlewareInjector','defineProperty','1564869StncIG','__esModule','3xzUOZT','177551qRWigi','middlewares','1177979ScOuYz','constructor','injectMiddlewares','getPrototypeOf','../utils','266998dwbGFD','method','nestedPath'];const a22_0x36b64e=a22_0x6515;(function(_0x4a6373,_0x56bc65){const _0x495682=a22_0x6515;while(!![]){try{const _0x2be8e3=parseInt(_0x495682(0x13d))*-parseInt(_0x495682(0x110))+-parseInt(_0x495682(0x132))*-parseInt(_0x495682(0x11b))+parseInt(_0x495682(0x11c))+-parseInt(_0x495682(0x13c))*parseInt(_0x495682(0x144))+parseInt(_0x495682(0x12b))+-parseInt(_0x495682(0x13f))+parseInt(_0x495682(0x111))*parseInt(_0x495682(0x13a));if(_0x2be8e3===_0x56bc65)break;else _0x4a6373['push'](_0x4a6373['shift']());}catch(_0x4c8f32){_0x4a6373['push'](_0x4a6373['shift']());}}}(a22_0x4e18,0x9f562));const a22_0x38a5f2=function(){let _0x44e53c=!![];return function(_0x2cf393,_0x193bb7){const _0x5d9230=_0x44e53c?function(){if(_0x193bb7){const _0x4d4694=_0x193bb7['apply'](_0x2cf393,arguments);return _0x193bb7=null,_0x4d4694;}}:function(){};return _0x44e53c=![],_0x5d9230;};}(),a22_0x20330c=a22_0x38a5f2(this,function(){const _0x42b934=function(){const _0x16dfed=a22_0x6515,_0xde52f9=_0x42b934['constructor'](_0x16dfed(0x136))()[_0x16dfed(0x140)](_0x16dfed(0x129));return!_0xde52f9['test'](a22_0x20330c);};return _0x42b934();});a22_0x20330c();'use strict';function a22_0x6515(_0x1736b0,_0x56d29c){return a22_0x6515=function(_0x10fe9d,_0x20330c){_0x10fe9d=_0x10fe9d-0x10b;let _0x38a5f2=a22_0x4e18[_0x10fe9d];return _0x38a5f2;},a22_0x6515(_0x1736b0,_0x56d29c);}var __importDefault=this&&this['__importDefault']||function(_0x189cc7){return _0x189cc7&&_0x189cc7['__esModule']?_0x189cc7:{'default':_0x189cc7};};Object[a22_0x36b64e(0x139)](exports,a22_0x36b64e(0x13b),{'value':!![]}),exports[a22_0x36b64e(0x10e)]=void 0x0;const express_1=require(a22_0x36b64e(0x134)),typedi_1=__importDefault(require('typedi')),logger_class_1=require(a22_0x36b64e(0x124)),constants_1=require(a22_0x36b64e(0x12c)),utils_1=require(a22_0x36b64e(0x143)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a22_0x36b64e(0x11f)),logger=new logger_class_1[(a22_0x36b64e(0x12a))](a22_0x36b64e(0x137));class ControllerInjector{constructor(_0x43e7c0,_0x57ab9c){const _0x4e42c4=a22_0x36b64e;this[_0x4e42c4(0x123)]=_0x43e7c0,this[_0x4e42c4(0x11e)]=_0x57ab9c,this['router']=express_1['Router']({'mergeParams':!![]}),this[_0x4e42c4(0x10c)]='';if(!Reflect[_0x4e42c4(0x12f)](constants_1['META_CONTROLLER'],_0x43e7c0))throw TypeError(_0x43e7c0['name']+'\x20is\x20not\x20a\x20Controller');}get[a22_0x36b64e(0x117)](){const _0x3916ab=a22_0x36b64e,_0x4b5ed6=Object[_0x3916ab(0x142)](this[_0x3916ab(0x114)]);return Object['getOwnPropertyNames'](_0x4b5ed6)[_0x3916ab(0x120)](_0x5909a2=>_0x4b5ed6[_0x5909a2])[_0x3916ab(0x112)](_0x520fb0=>!!Reflect[_0x3916ab(0x12f)](constants_1[_0x3916ab(0x135)],_0x520fb0));}get[a22_0x36b64e(0x13e)](){const _0x4b0f5e=a22_0x36b64e;return Reflect[_0x4b0f5e(0x12f)](constants_1[_0x4b0f5e(0x115)],this[_0x4b0f5e(0x114)])||[];}get[a22_0x36b64e(0x133)](){const _0x1aaef1=a22_0x36b64e;var _0x404879;const _0xfcd6bf=(_0x404879=Reflect[_0x1aaef1(0x12f)](constants_1[_0x1aaef1(0x116)],this[_0x1aaef1(0x123)]))!==null&&_0x404879!==void 0x0?_0x404879:constants_1[_0x1aaef1(0x130)],_0x4d28ef=Reflect['getOwnMetadata'](constants_1[_0x1aaef1(0x12e)],this[_0x1aaef1(0x123)])||'';return this[_0x1aaef1(0x10c)]?'':utils_1[_0x1aaef1(0x11a)](_0xfcd6bf,_0x4d28ef);}get[a22_0x36b64e(0x10d)](){const _0x4e9e14=a22_0x36b64e;if(this[_0x4e9e14(0x10c)])return this[_0x4e9e14(0x10c)];const _0x30255d=Reflect['getOwnMetadata'](constants_1[_0x4e9e14(0x121)],this[_0x4e9e14(0x123)])||'';return utils_1[_0x4e9e14(0x11a)](_0x30255d);}get[a22_0x36b64e(0x114)](){const _0x2e6e78=a22_0x36b64e;return typedi_1[_0x2e6e78(0x113)]['get'](this[_0x2e6e78(0x123)]);}async[a22_0x36b64e(0x141)](){const _0x49f15f=a22_0x36b64e;for(const _0x3334ee of this['middlewares']){const _0x4aebf4=await middleware_injector_1[_0x49f15f(0x138)](_0x3334ee);this[_0x49f15f(0x12d)][_0x49f15f(0x10f)](_0x4aebf4);}}async['injectNestedController'](_0x2a736a){const _0x31d43b=a22_0x36b64e,_0x232e16=_0x2a736a['nested'];logger[_0x31d43b(0x126)](_0x31d43b(0x128)+_0x232e16['name']+'\x20at\x20'+this[_0x31d43b(0x10d)]+_0x2a736a[_0x31d43b(0x10d)]);const _0x6df308=new ControllerInjector(_0x232e16,this);_0x6df308[_0x31d43b(0x10c)]=_0x2a736a[_0x31d43b(0x10d)],await _0x6df308['inject'](this['router']);}async[a22_0x36b64e(0x125)](){const _0x1deace=a22_0x36b64e;var _0x47f9ef;for(const _0x3b51e0 of this[_0x1deace(0x117)]){const _0x504551=utils_1['getHandlerMeta'](_0x3b51e0);if(_0x504551['nested'])await this['injectNestedController'](_0x504551);else{const _0x473fe3=_0x504551[_0x1deace(0x10b)][_0x1deace(0x122)]()[_0x1deace(0x118)]();logger['log'](_0x1deace(0x131)+this[_0x1deace(0x123)]['name']+'#'+_0x3b51e0[_0x1deace(0x11d)]+_0x1deace(0x127)+_0x504551['method']+']\x20'+utils_1[_0x1deace(0x11a)](((_0x47f9ef=this['root'])===null||_0x47f9ef===void 0x0?void 0x0:_0x47f9ef[_0x1deace(0x10d)])||'',this[_0x1deace(0x10d)],_0x504551['path'])),this[_0x1deace(0x12d)][_0x473fe3](_0x504551[_0x1deace(0x10d)],handler_wrapper_1[_0x1deace(0x119)](_0x3b51e0,this[_0x1deace(0x114)]));}}}async['inject'](_0x208b62){const _0x22c983=a22_0x36b64e;!this['nestedPath']&&logger[_0x22c983(0x126)](_0x22c983(0x131)+this[_0x22c983(0x123)][_0x22c983(0x11d)]+'\x20{'+this[_0x22c983(0x133)]+'}'),await this['injectMiddlewares'](),await this[_0x22c983(0x125)](),_0x208b62[_0x22c983(0x10f)](''+this[_0x22c983(0x133)]+this[_0x22c983(0x10d)],this[_0x22c983(0x12d)]);}}exports[a22_0x36b64e(0x10e)]=ControllerInjector;