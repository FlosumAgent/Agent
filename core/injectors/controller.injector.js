const a22_0x1c97=['Logger','1385344pfZIgV','2AdPkNr','650227hEWxYe','injectHandlers','71459mbnyFE','constructor','path','1195508DBYIQI','getOwnMetadata','\x20at\x20[','./middleware.injector','META_CONTROLLER_VERSION','injectMiddlewares','inject','defineProperty','controllerType','middlewares','../classes/logger.class','filter','nestedPath','../utils','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','router','META_CONTROLLER_PREFIX','root','toLowerCase','__esModule','prefix','map','CONTROLLER_DEFAULT_PREFIX','nested','typedi','getPrototypeOf','injecting\x20nested\x20','toString','1546925jZqYCF','use','instance','handlers','normalizePaths','get','21107KHbLrv','injectNestedController','return\x20/\x22\x20+\x20this\x20+\x20\x22/','META_HANDLER','method','805796qwjDNF','Router','../wrappers/handler.wrapper','name','ControllerInjector','META_CONTROLLER_PATH','getOwnPropertyNames','log','__importDefault','10SwIIYu','META_CONTROLLER_MIDDLEWARES','express','../constants','META_CONTROLLER'];const a22_0x2ec1ed=a22_0x48f3;(function(_0x266af4,_0xc41948){const _0x1de09b=a22_0x48f3;while(!![]){try{const _0x480b61=parseInt(_0x1de09b(0x1e5))+-parseInt(_0x1de09b(0x1e6))*-parseInt(_0x1de09b(0x1e7))+-parseInt(_0x1de09b(0x1cb))+parseInt(_0x1de09b(0x1d6))+-parseInt(_0x1de09b(0x1ec))+-parseInt(_0x1de09b(0x1d1))*-parseInt(_0x1de09b(0x1df))+-parseInt(_0x1de09b(0x1e9));if(_0x480b61===_0xc41948)break;else _0x266af4['push'](_0x266af4['shift']());}catch(_0x1ee026){_0x266af4['push'](_0x266af4['shift']());}}}(a22_0x1c97,0xd8fc4));const a22_0x56551b=function(){let _0x3276c3=!![];return function(_0x3ac45a,_0x5367ed){const _0x4095e6=_0x3276c3?function(){if(_0x5367ed){const _0x2405ff=_0x5367ed['apply'](_0x3ac45a,arguments);return _0x5367ed=null,_0x2405ff;}}:function(){};return _0x3276c3=![],_0x4095e6;};}(),a22_0x213d8d=a22_0x56551b(this,function(){const _0x37ae5c=function(){const _0x357fa3=a22_0x48f3,_0x1ad119=_0x37ae5c[_0x357fa3(0x1ea)](_0x357fa3(0x1d3))()[_0x357fa3(0x1ea)](_0x357fa3(0x1fa));return!_0x1ad119['test'](a22_0x213d8d);};return _0x37ae5c();});a22_0x213d8d();function a22_0x48f3(_0x508f47,_0x5d4e4c){return a22_0x48f3=function(_0x102197,_0x213d8d){_0x102197=_0x102197-0x1c4;let _0x56551b=a22_0x1c97[_0x102197];return _0x56551b;},a22_0x48f3(_0x508f47,_0x5d4e4c);}'use strict';var __importDefault=this&&this[a22_0x2ec1ed(0x1de)]||function(_0x93ca75){const _0x4db709=a22_0x2ec1ed;return _0x93ca75&&_0x93ca75[_0x4db709(0x1ff)]?_0x93ca75:{'default':_0x93ca75};};Object[a22_0x2ec1ed(0x1f3)](exports,'__esModule',{'value':!![]}),exports[a22_0x2ec1ed(0x1da)]=void 0x0;const express_1=require(a22_0x2ec1ed(0x1e1)),typedi_1=__importDefault(require(a22_0x2ec1ed(0x1c7))),logger_class_1=require(a22_0x2ec1ed(0x1f6)),constants_1=require(a22_0x2ec1ed(0x1e2)),utils_1=require(a22_0x2ec1ed(0x1f9)),handler_wrapper_1=require(a22_0x2ec1ed(0x1d8)),middleware_injector_1=require(a22_0x2ec1ed(0x1ef)),logger=new logger_class_1[(a22_0x2ec1ed(0x1e4))]('controller-injector');class ControllerInjector{constructor(_0x12f422,_0xf0ba12){const _0xe3ff9e=a22_0x2ec1ed;this['controllerType']=_0x12f422,this[_0xe3ff9e(0x1fd)]=_0xf0ba12,this[_0xe3ff9e(0x1fb)]=express_1[_0xe3ff9e(0x1d7)]({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect['getOwnMetadata'](constants_1[_0xe3ff9e(0x1e3)],_0x12f422))throw TypeError(_0x12f422[_0xe3ff9e(0x1d9)]+'\x20is\x20not\x20a\x20Controller');}get[a22_0x2ec1ed(0x1ce)](){const _0x4bf6a2=a22_0x2ec1ed,_0x3ca91c=Object[_0x4bf6a2(0x1c8)](this['instance']);return Object[_0x4bf6a2(0x1dc)](_0x3ca91c)[_0x4bf6a2(0x1c4)](_0x2a85b9=>_0x3ca91c[_0x2a85b9])[_0x4bf6a2(0x1f7)](_0x24b143=>!!Reflect[_0x4bf6a2(0x1ed)](constants_1[_0x4bf6a2(0x1d4)],_0x24b143));}get[a22_0x2ec1ed(0x1f5)](){const _0xe78acf=a22_0x2ec1ed;return Reflect['getOwnMetadata'](constants_1[_0xe78acf(0x1e0)],this['instance'])||[];}get['prefix'](){const _0x518767=a22_0x2ec1ed;var _0x3fb77b;const _0x5d6a13=(_0x3fb77b=Reflect[_0x518767(0x1ed)](constants_1[_0x518767(0x1fc)],this[_0x518767(0x1f4)]))!==null&&_0x3fb77b!==void 0x0?_0x3fb77b:constants_1[_0x518767(0x1c5)],_0x5c8964=Reflect[_0x518767(0x1ed)](constants_1[_0x518767(0x1f0)],this[_0x518767(0x1f4)])||'';return this['nestedPath']?'':utils_1[_0x518767(0x1cf)](_0x5d6a13,_0x5c8964);}get['path'](){const _0x12d461=a22_0x2ec1ed;if(this['nestedPath'])return this[_0x12d461(0x1f8)];const _0x3d6136=Reflect[_0x12d461(0x1ed)](constants_1[_0x12d461(0x1db)],this[_0x12d461(0x1f4)])||'';return utils_1[_0x12d461(0x1cf)](_0x3d6136);}get[a22_0x2ec1ed(0x1cd)](){const _0x5dce2f=a22_0x2ec1ed;return typedi_1['default'][_0x5dce2f(0x1d0)](this[_0x5dce2f(0x1f4)]);}async['injectMiddlewares'](){const _0x4b85cf=a22_0x2ec1ed;for(const _0x2b5a0a of this[_0x4b85cf(0x1f5)]){const _0x3b54d7=await middleware_injector_1['middlewareInjector'](_0x2b5a0a);this[_0x4b85cf(0x1fb)][_0x4b85cf(0x1cc)](_0x3b54d7);}}async[a22_0x2ec1ed(0x1d2)](_0xf8e26c){const _0x87a514=a22_0x2ec1ed,_0x381d41=_0xf8e26c['nested'];logger['log'](_0x87a514(0x1c9)+_0x381d41['name']+'\x20at\x20'+this[_0x87a514(0x1eb)]+_0xf8e26c['path']);const _0x226a3b=new ControllerInjector(_0x381d41,this);_0x226a3b[_0x87a514(0x1f8)]=_0xf8e26c[_0x87a514(0x1eb)],await _0x226a3b['inject'](this['router']);}async[a22_0x2ec1ed(0x1e8)](){const _0xc001dd=a22_0x2ec1ed;var _0x7344de;for(const _0x10726e of this[_0xc001dd(0x1ce)]){const _0x13aa0a=utils_1['getHandlerMeta'](_0x10726e);if(_0x13aa0a[_0xc001dd(0x1c6)])await this['injectNestedController'](_0x13aa0a);else{const _0xe33543=_0x13aa0a[_0xc001dd(0x1d5)][_0xc001dd(0x1ca)]()[_0xc001dd(0x1fe)]();logger[_0xc001dd(0x1dd)]('injecting\x20'+this['controllerType'][_0xc001dd(0x1d9)]+'#'+_0x10726e[_0xc001dd(0x1d9)]+_0xc001dd(0x1ee)+_0x13aa0a['method']+']\x20'+utils_1[_0xc001dd(0x1cf)](((_0x7344de=this[_0xc001dd(0x1fd)])===null||_0x7344de===void 0x0?void 0x0:_0x7344de['path'])||'',this[_0xc001dd(0x1eb)],_0x13aa0a['path'])),this[_0xc001dd(0x1fb)][_0xe33543](_0x13aa0a[_0xc001dd(0x1eb)],handler_wrapper_1['handlerWrapper'](_0x10726e,this[_0xc001dd(0x1cd)]));}}}async[a22_0x2ec1ed(0x1f2)](_0x3b3206){const _0x1ab122=a22_0x2ec1ed;!this[_0x1ab122(0x1f8)]&&logger['log']('injecting\x20'+this[_0x1ab122(0x1f4)][_0x1ab122(0x1d9)]+'\x20{'+this[_0x1ab122(0x200)]+'}'),await this[_0x1ab122(0x1f1)](),await this['injectHandlers'](),_0x3b3206[_0x1ab122(0x1cc)](''+this[_0x1ab122(0x200)]+this[_0x1ab122(0x1eb)],this[_0x1ab122(0x1fb)]);}}exports[a22_0x2ec1ed(0x1da)]=ControllerInjector;