const a22_0x2f72=['typedi','return\x20/\x22\x20+\x20this\x20+\x20\x22/','ControllerInjector','../wrappers/handler.wrapper','META_CONTROLLER_PREFIX','__importDefault','META_CONTROLLER_MIDDLEWARES','injectMiddlewares','use','controller-injector','method','27526EJgXls','852121roXQkY','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','default','1377736sEaPCD','log','controllerType','META_CONTROLLER_PATH','defineProperty','1GboNsz','META_HANDLER','constructor','\x20at\x20','\x20is\x20not\x20a\x20Controller','path','__esModule','Router','612537qeruqU','1XjoRpJ','../utils','router','getHandlerMeta','603379ESVcak','1TSHWTx','prefix','6aTGfDX','CONTROLLER_DEFAULT_PREFIX','root','../classes/logger.class','../constants','handlerWrapper','get','name','handlers','getPrototypeOf','injectHandlers','2453096ogrPIB','injecting\x20nested\x20','injectNestedController','injecting\x20','getOwnMetadata','nestedPath','instance','415392GVrQSR','nested','inject','./middleware.injector','normalizePaths','test','express','getOwnPropertyNames'];const a22_0x4017f9=a22_0x5da7;function a22_0x5da7(_0xbea289,_0x1a8740){return a22_0x5da7=function(_0x1187b8,_0x5ab5da){_0x1187b8=_0x1187b8-0x1a4;let _0x29acba=a22_0x2f72[_0x1187b8];return _0x29acba;},a22_0x5da7(_0xbea289,_0x1a8740);}(function(_0xb893fd,_0xa3b1da){const _0x325918=a22_0x5da7;while(!![]){try{const _0x6bb76c=parseInt(_0x325918(0x1c8))*parseInt(_0x325918(0x1b2))+-parseInt(_0x325918(0x1dc))+parseInt(_0x325918(0x1b1))*parseInt(_0x325918(0x1ca))+parseInt(_0x325918(0x1c2))+parseInt(_0x325918(0x1b5))+parseInt(_0x325918(0x1c3))*parseInt(_0x325918(0x1c7))+parseInt(_0x325918(0x1d5))*-parseInt(_0x325918(0x1ba));if(_0x6bb76c===_0xa3b1da)break;else _0xb893fd['push'](_0xb893fd['shift']());}catch(_0x333534){_0xb893fd['push'](_0xb893fd['shift']());}}}(a22_0x2f72,0xb5429));const a22_0x29acba=function(){let _0x56881c=!![];return function(_0x1ef70e,_0x30db0f){const _0x18effe=_0x56881c?function(){if(_0x30db0f){const _0x36046c=_0x30db0f['apply'](_0x1ef70e,arguments);return _0x30db0f=null,_0x36046c;}}:function(){};return _0x56881c=![],_0x18effe;};}(),a22_0x5ab5da=a22_0x29acba(this,function(){const _0x5a676f=function(){const _0x282a89=a22_0x5da7,_0x1e64c4=_0x5a676f[_0x282a89(0x1bc)](_0x282a89(0x1a7))()[_0x282a89(0x1bc)](_0x282a89(0x1b3));return!_0x1e64c4[_0x282a89(0x1e1)](a22_0x5ab5da);};return _0x5a676f();});a22_0x5ab5da();'use strict';var __importDefault=this&&this[a22_0x4017f9(0x1ab)]||function(_0x224f84){const _0x5aaa63=a22_0x4017f9;return _0x224f84&&_0x224f84[_0x5aaa63(0x1c0)]?_0x224f84:{'default':_0x224f84};};Object[a22_0x4017f9(0x1b9)](exports,'__esModule',{'value':!![]}),exports[a22_0x4017f9(0x1a8)]=void 0x0;const express_1=require(a22_0x4017f9(0x1a4)),typedi_1=__importDefault(require(a22_0x4017f9(0x1a6))),logger_class_1=require(a22_0x4017f9(0x1cd)),constants_1=require(a22_0x4017f9(0x1ce)),utils_1=require(a22_0x4017f9(0x1c4)),handler_wrapper_1=require(a22_0x4017f9(0x1a9)),middleware_injector_1=require(a22_0x4017f9(0x1df)),logger=new logger_class_1['Logger'](a22_0x4017f9(0x1af));class ControllerInjector{constructor(_0x31951f,_0x3ba23a){const _0x23f1ec=a22_0x4017f9;this[_0x23f1ec(0x1b7)]=_0x31951f,this[_0x23f1ec(0x1cc)]=_0x3ba23a,this[_0x23f1ec(0x1c5)]=express_1[_0x23f1ec(0x1c1)]({'mergeParams':!![]}),this[_0x23f1ec(0x1da)]='';if(!Reflect[_0x23f1ec(0x1d9)](constants_1['META_CONTROLLER'],_0x31951f))throw TypeError(_0x31951f['name']+_0x23f1ec(0x1be));}get[a22_0x4017f9(0x1d2)](){const _0x497d2c=a22_0x4017f9,_0x4e8e4a=Object[_0x497d2c(0x1d3)](this[_0x497d2c(0x1db)]);return Object[_0x497d2c(0x1a5)](_0x4e8e4a)['map'](_0x1e05a6=>_0x4e8e4a[_0x1e05a6])['filter'](_0x190e08=>!!Reflect[_0x497d2c(0x1d9)](constants_1[_0x497d2c(0x1bb)],_0x190e08));}get['middlewares'](){const _0x189d9f=a22_0x4017f9;return Reflect[_0x189d9f(0x1d9)](constants_1[_0x189d9f(0x1ac)],this[_0x189d9f(0x1db)])||[];}get['prefix'](){const _0xc7d69f=a22_0x4017f9;var _0x4c28dd;const _0x41b1fd=(_0x4c28dd=Reflect['getOwnMetadata'](constants_1[_0xc7d69f(0x1aa)],this['controllerType']))!==null&&_0x4c28dd!==void 0x0?_0x4c28dd:constants_1[_0xc7d69f(0x1cb)],_0x2c782d=Reflect[_0xc7d69f(0x1d9)](constants_1['META_CONTROLLER_VERSION'],this['controllerType'])||'';return this[_0xc7d69f(0x1da)]?'':utils_1['normalizePaths'](_0x41b1fd,_0x2c782d);}get[a22_0x4017f9(0x1bf)](){const _0x1f601b=a22_0x4017f9;if(this[_0x1f601b(0x1da)])return this[_0x1f601b(0x1da)];const _0x32693e=Reflect[_0x1f601b(0x1d9)](constants_1[_0x1f601b(0x1b8)],this[_0x1f601b(0x1b7)])||'';return utils_1['normalizePaths'](_0x32693e);}get['instance'](){const _0x1fbcee=a22_0x4017f9;return typedi_1[_0x1fbcee(0x1b4)][_0x1fbcee(0x1d0)](this[_0x1fbcee(0x1b7)]);}async[a22_0x4017f9(0x1ad)](){for(const _0x49731d of this['middlewares']){const _0x27f06a=await middleware_injector_1['middlewareInjector'](_0x49731d);this['router']['use'](_0x27f06a);}}async['injectNestedController'](_0x5763cb){const _0x40acdb=a22_0x4017f9,_0x40499d=_0x5763cb[_0x40acdb(0x1dd)];logger[_0x40acdb(0x1b6)](_0x40acdb(0x1d6)+_0x40499d[_0x40acdb(0x1d1)]+_0x40acdb(0x1bd)+this['path']+_0x5763cb[_0x40acdb(0x1bf)]);const _0x4c433f=new ControllerInjector(_0x40499d,this);_0x4c433f[_0x40acdb(0x1da)]=_0x5763cb[_0x40acdb(0x1bf)],await _0x4c433f[_0x40acdb(0x1de)](this[_0x40acdb(0x1c5)]);}async[a22_0x4017f9(0x1d4)](){const _0x14d2d9=a22_0x4017f9;var _0x324227;for(const _0x2f770e of this['handlers']){const _0x1718af=utils_1[_0x14d2d9(0x1c6)](_0x2f770e);if(_0x1718af[_0x14d2d9(0x1dd)])await this[_0x14d2d9(0x1d7)](_0x1718af);else{const _0x37a914=_0x1718af[_0x14d2d9(0x1b0)]['toString']()['toLowerCase']();logger[_0x14d2d9(0x1b6)](_0x14d2d9(0x1d8)+this['controllerType']['name']+'#'+_0x2f770e[_0x14d2d9(0x1d1)]+'\x20at\x20['+_0x1718af[_0x14d2d9(0x1b0)]+']\x20'+utils_1[_0x14d2d9(0x1e0)](((_0x324227=this['root'])===null||_0x324227===void 0x0?void 0x0:_0x324227['path'])||'',this[_0x14d2d9(0x1bf)],_0x1718af[_0x14d2d9(0x1bf)])),this['router'][_0x37a914](_0x1718af['path'],handler_wrapper_1[_0x14d2d9(0x1cf)](_0x2f770e,this['instance']));}}}async[a22_0x4017f9(0x1de)](_0x3dfee8){const _0x5c09dd=a22_0x4017f9;!this[_0x5c09dd(0x1da)]&&logger[_0x5c09dd(0x1b6)](_0x5c09dd(0x1d8)+this['controllerType'][_0x5c09dd(0x1d1)]+'\x20{'+this[_0x5c09dd(0x1c9)]+'}'),await this[_0x5c09dd(0x1ad)](),await this[_0x5c09dd(0x1d4)](),_0x3dfee8[_0x5c09dd(0x1ae)](''+this['prefix']+this[_0x5c09dd(0x1bf)],this[_0x5c09dd(0x1c5)]);}}exports[a22_0x4017f9(0x1a8)]=ControllerInjector;