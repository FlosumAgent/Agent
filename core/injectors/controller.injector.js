const a22_0x2a9b=['405338YiaChX','META_CONTROLLER_PATH','use','getPrototypeOf','./middleware.injector','__esModule','178757bcSJvj','injectHandlers','controller-injector','name','method','META_CONTROLLER_PREFIX','1obaOqI','\x20is\x20not\x20a\x20Controller','handlerWrapper','toString','router','../utils','ControllerInjector','injectNestedController','getOwnMetadata','injecting\x20','typedi','388646ELgYhu','middlewareInjector','inject','middlewares','apply','META_CONTROLLER','log','normalizePaths','111239ENsOIF','63049ExiGpZ','prefix','nestedPath','300914KCsSXL','path','getHandlerMeta','instance','../constants','2IPzfsr','injectMiddlewares','return\x20/\x22\x20+\x20this\x20+\x20\x22/','1AylPqh','__importDefault','204207WjAxEy','constructor','../classes/logger.class','Logger','nested','handlers','get','controllerType','CONTROLLER_DEFAULT_PREFIX','../wrappers/handler.wrapper','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','META_CONTROLLER_MIDDLEWARES','Router','META_CONTROLLER_VERSION','filter','root','map'];const a22_0xed16b9=a22_0x15df;(function(_0x1f4abd,_0x487d5c){const _0x7800f3=a22_0x15df;while(!![]){try{const _0x128566=parseInt(_0x7800f3(0x112))+parseInt(_0x7800f3(0xeb))*parseInt(_0x7800f3(0x11e))+-parseInt(_0x7800f3(0xf4))+parseInt(_0x7800f3(0x101))+-parseInt(_0x7800f3(0xf7))+-parseInt(_0x7800f3(0xf3))*parseInt(_0x7800f3(0xfc))+parseInt(_0x7800f3(0xff))*-parseInt(_0x7800f3(0x118));if(_0x128566===_0x487d5c)break;else _0x1f4abd['push'](_0x1f4abd['shift']());}catch(_0x150628){_0x1f4abd['push'](_0x1f4abd['shift']());}}}(a22_0x2a9b,0x38e21));function a22_0x15df(_0x1e011a,_0x4ca863){return a22_0x15df=function(_0x3f5363,_0x2a69bd){_0x3f5363=_0x3f5363-0xe8;let _0x377a75=a22_0x2a9b[_0x3f5363];return _0x377a75;},a22_0x15df(_0x1e011a,_0x4ca863);}const a22_0x377a75=function(){let _0x319566=!![];return function(_0x7c71f6,_0x116406){const _0x3270c2=_0x319566?function(){const _0x269cf7=a22_0x15df;if(_0x116406){const _0x5485fe=_0x116406[_0x269cf7(0xef)](_0x7c71f6,arguments);return _0x116406=null,_0x5485fe;}}:function(){};return _0x319566=![],_0x3270c2;};}(),a22_0x2a69bd=a22_0x377a75(this,function(){const _0x1dd1a0=function(){const _0x49176f=a22_0x15df,_0x47cfae=_0x1dd1a0[_0x49176f(0x102)](_0x49176f(0xfe))()[_0x49176f(0x102)](_0x49176f(0x10b));return!_0x47cfae['test'](a22_0x2a69bd);};return _0x1dd1a0();});a22_0x2a69bd();'use strict';var __importDefault=this&&this[a22_0xed16b9(0x100)]||function(_0x4b3e5b){const _0x415e4f=a22_0xed16b9;return _0x4b3e5b&&_0x4b3e5b[_0x415e4f(0x117)]?_0x4b3e5b:{'default':_0x4b3e5b};};Object['defineProperty'](exports,a22_0xed16b9(0x117),{'value':!![]}),exports[a22_0xed16b9(0x124)]=void 0x0;const express_1=require('express'),typedi_1=__importDefault(require(a22_0xed16b9(0xea))),logger_class_1=require(a22_0xed16b9(0x103)),constants_1=require(a22_0xed16b9(0xfb)),utils_1=require(a22_0xed16b9(0x123)),handler_wrapper_1=require(a22_0xed16b9(0x10a)),middleware_injector_1=require(a22_0xed16b9(0x116)),logger=new logger_class_1[(a22_0xed16b9(0x104))](a22_0xed16b9(0x11a));class ControllerInjector{constructor(_0x46e0e4,_0x56792a){const _0x5912ac=a22_0xed16b9;this[_0x5912ac(0x108)]=_0x46e0e4,this[_0x5912ac(0x110)]=_0x56792a,this['router']=express_1[_0x5912ac(0x10d)]({'mergeParams':!![]}),this[_0x5912ac(0xf6)]='';if(!Reflect[_0x5912ac(0xe8)](constants_1[_0x5912ac(0xf0)],_0x46e0e4))throw TypeError(_0x46e0e4[_0x5912ac(0x11b)]+_0x5912ac(0x11f));}get[a22_0xed16b9(0x106)](){const _0x13af00=a22_0xed16b9,_0x41861a=Object[_0x13af00(0x115)](this[_0x13af00(0xfa)]);return Object['getOwnPropertyNames'](_0x41861a)[_0x13af00(0x111)](_0x419695=>_0x41861a[_0x419695])[_0x13af00(0x10f)](_0x1e67ff=>!!Reflect[_0x13af00(0xe8)](constants_1['META_HANDLER'],_0x1e67ff));}get[a22_0xed16b9(0xee)](){const _0xb2d450=a22_0xed16b9;return Reflect['getOwnMetadata'](constants_1[_0xb2d450(0x10c)],this[_0xb2d450(0xfa)])||[];}get['prefix'](){const _0x460085=a22_0xed16b9;var _0x65ee8;const _0x4dc78c=(_0x65ee8=Reflect[_0x460085(0xe8)](constants_1[_0x460085(0x11d)],this[_0x460085(0x108)]))!==null&&_0x65ee8!==void 0x0?_0x65ee8:constants_1[_0x460085(0x109)],_0x51ce7d=Reflect['getOwnMetadata'](constants_1[_0x460085(0x10e)],this[_0x460085(0x108)])||'';return this[_0x460085(0xf6)]?'':utils_1[_0x460085(0xf2)](_0x4dc78c,_0x51ce7d);}get['path'](){const _0x4ff137=a22_0xed16b9;if(this[_0x4ff137(0xf6)])return this['nestedPath'];const _0x9d95f3=Reflect[_0x4ff137(0xe8)](constants_1[_0x4ff137(0x113)],this['controllerType'])||'';return utils_1[_0x4ff137(0xf2)](_0x9d95f3);}get[a22_0xed16b9(0xfa)](){const _0x180dec=a22_0xed16b9;return typedi_1['default'][_0x180dec(0x107)](this[_0x180dec(0x108)]);}async[a22_0xed16b9(0xfd)](){const _0x162809=a22_0xed16b9;for(const _0x217861 of this['middlewares']){const _0x2f5901=await middleware_injector_1[_0x162809(0xec)](_0x217861);this[_0x162809(0x122)][_0x162809(0x114)](_0x2f5901);}}async['injectNestedController'](_0x1e56d9){const _0x67fe82=a22_0xed16b9,_0x486b7e=_0x1e56d9[_0x67fe82(0x105)];logger[_0x67fe82(0xf1)]('injecting\x20nested\x20'+_0x486b7e['name']+'\x20at\x20'+this[_0x67fe82(0xf8)]+_0x1e56d9[_0x67fe82(0xf8)]);const _0x28990c=new ControllerInjector(_0x486b7e,this);_0x28990c[_0x67fe82(0xf6)]=_0x1e56d9['path'],await _0x28990c[_0x67fe82(0xed)](this['router']);}async[a22_0xed16b9(0x119)](){const _0x2cbb97=a22_0xed16b9;var _0x481e93;for(const _0x415d21 of this[_0x2cbb97(0x106)]){const _0x1b2270=utils_1[_0x2cbb97(0xf9)](_0x415d21);if(_0x1b2270['nested'])await this[_0x2cbb97(0x125)](_0x1b2270);else{const _0x37f437=_0x1b2270[_0x2cbb97(0x11c)][_0x2cbb97(0x121)]()['toLowerCase']();logger['log'](_0x2cbb97(0xe9)+this[_0x2cbb97(0x108)][_0x2cbb97(0x11b)]+'#'+_0x415d21[_0x2cbb97(0x11b)]+'\x20at\x20['+_0x1b2270['method']+']\x20'+utils_1[_0x2cbb97(0xf2)](((_0x481e93=this[_0x2cbb97(0x110)])===null||_0x481e93===void 0x0?void 0x0:_0x481e93[_0x2cbb97(0xf8)])||'',this[_0x2cbb97(0xf8)],_0x1b2270[_0x2cbb97(0xf8)])),this[_0x2cbb97(0x122)][_0x37f437](_0x1b2270[_0x2cbb97(0xf8)],handler_wrapper_1[_0x2cbb97(0x120)](_0x415d21,this[_0x2cbb97(0xfa)]));}}}async[a22_0xed16b9(0xed)](_0x4e38ee){const _0x24fc61=a22_0xed16b9;!this[_0x24fc61(0xf6)]&&logger[_0x24fc61(0xf1)](_0x24fc61(0xe9)+this['controllerType'][_0x24fc61(0x11b)]+'\x20{'+this[_0x24fc61(0xf5)]+'}'),await this[_0x24fc61(0xfd)](),await this[_0x24fc61(0x119)](),_0x4e38ee[_0x24fc61(0x114)](''+this['prefix']+this[_0x24fc61(0xf8)],this['router']);}}exports[a22_0xed16b9(0x124)]=ControllerInjector;