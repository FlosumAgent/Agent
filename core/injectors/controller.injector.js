const a22_0x6b13=['17555VzEgFt','CONTROLLER_DEFAULT_PREFIX','938477NzKAAJ','../utils','default','filter','137406QOjvPJ','injectHandlers','prefix','nested','get','log','4701LJrGOg','META_CONTROLLER_MIDDLEWARES','585bIWVTP','getHandlerMeta','router','../wrappers/handler.wrapper','46saTtQT','1NAkSpd','\x20at\x20[','handlers','getOwnPropertyNames','getOwnMetadata','../classes/logger.class','controllerType','1TiFxIf','ControllerInjector','META_HANDLER','3023902uApFQW','META_CONTROLLER','__esModule','injectMiddlewares','defineProperty','\x20at\x20','inject','41XDiQEI','META_CONTROLLER_PATH','name','map','middlewares','META_CONTROLLER_PREFIX','express','Router','injecting\x20nested\x20','instance','use','test','1573MvjVYv','nestedPath','toString','method','injectNestedController','controller-injector','toLowerCase','__importDefault','injecting\x20','125484Aeennu','3TJmooO','path','root','constructor','normalizePaths'];const a22_0x287a25=a22_0x4c0b;(function(_0x1f5b21,_0x40ef40){const _0x15141b=a22_0x4c0b;while(!![]){try{const _0x57ea7f=-parseInt(_0x15141b(0xa9))*parseInt(_0x15141b(0x87))+-parseInt(_0x15141b(0x8c))*parseInt(_0x15141b(0x73))+-parseInt(_0x15141b(0x85))*parseInt(_0x15141b(0x8b))+-parseInt(_0x15141b(0x93))*parseInt(_0x15141b(0x7b))+-parseInt(_0x15141b(0x74))*-parseInt(_0x15141b(0x7f))+parseInt(_0x15141b(0x79))*-parseInt(_0x15141b(0x9d))+parseInt(_0x15141b(0x96));if(_0x57ea7f===_0x40ef40)break;else _0x1f5b21['push'](_0x1f5b21['shift']());}catch(_0x335ac0){_0x1f5b21['push'](_0x1f5b21['shift']());}}}(a22_0x6b13,0x7df71));const a22_0xfa2243=function(){let _0x57bdf5=!![];return function(_0x1509fd,_0x233f0b){const _0x155443=_0x57bdf5?function(){if(_0x233f0b){const _0x4553f2=_0x233f0b['apply'](_0x1509fd,arguments);return _0x233f0b=null,_0x4553f2;}}:function(){};return _0x57bdf5=![],_0x155443;};}(),a22_0x37dce6=a22_0xfa2243(this,function(){const _0xb44225=function(){const _0x599283=a22_0x4c0b,_0x324eb2=_0xb44225[_0x599283(0x77)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x599283(0x77)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x324eb2[_0x599283(0xa8)](a22_0x37dce6);};return _0xb44225();});a22_0x37dce6();function a22_0x4c0b(_0x6f577e,_0x2ac52d){return a22_0x4c0b=function(_0x56c42e,_0x37dce6){_0x56c42e=_0x56c42e-0x71;let _0xfa2243=a22_0x6b13[_0x56c42e];return _0xfa2243;},a22_0x4c0b(_0x6f577e,_0x2ac52d);}'use strict';var __importDefault=this&&this[a22_0x287a25(0x71)]||function(_0x1844d7){const _0x224465=a22_0x287a25;return _0x1844d7&&_0x1844d7[_0x224465(0x98)]?_0x1844d7:{'default':_0x1844d7};};Object[a22_0x287a25(0x9a)](exports,a22_0x287a25(0x98),{'value':!![]}),exports[a22_0x287a25(0x94)]=void 0x0;const express_1=require(a22_0x287a25(0xa3)),typedi_1=__importDefault(require('typedi')),logger_class_1=require(a22_0x287a25(0x91)),constants_1=require('../constants'),utils_1=require(a22_0x287a25(0x7c)),handler_wrapper_1=require(a22_0x287a25(0x8a)),middleware_injector_1=require('./middleware.injector'),logger=new logger_class_1['Logger'](a22_0x287a25(0xae));class ControllerInjector{constructor(_0x18210e,_0x15f2a5){const _0x5adb0a=a22_0x287a25;this[_0x5adb0a(0x92)]=_0x18210e,this[_0x5adb0a(0x76)]=_0x15f2a5,this[_0x5adb0a(0x89)]=express_1[_0x5adb0a(0xa4)]({'mergeParams':!![]}),this[_0x5adb0a(0xaa)]='';if(!Reflect[_0x5adb0a(0x90)](constants_1[_0x5adb0a(0x97)],_0x18210e))throw TypeError(_0x18210e[_0x5adb0a(0x9f)]+'\x20is\x20not\x20a\x20Controller');}get[a22_0x287a25(0x8e)](){const _0xc46d78=a22_0x287a25,_0x34a526=Object['getPrototypeOf'](this[_0xc46d78(0xa6)]);return Object[_0xc46d78(0x8f)](_0x34a526)[_0xc46d78(0xa0)](_0xb91e47=>_0x34a526[_0xb91e47])[_0xc46d78(0x7e)](_0x1b8544=>!!Reflect[_0xc46d78(0x90)](constants_1[_0xc46d78(0x95)],_0x1b8544));}get['middlewares'](){const _0x36479f=a22_0x287a25;return Reflect[_0x36479f(0x90)](constants_1[_0x36479f(0x86)],this[_0x36479f(0xa6)])||[];}get[a22_0x287a25(0x81)](){const _0x5448a3=a22_0x287a25;var _0x50c643;const _0x3fe65b=(_0x50c643=Reflect['getOwnMetadata'](constants_1[_0x5448a3(0xa2)],this['controllerType']))!==null&&_0x50c643!==void 0x0?_0x50c643:constants_1[_0x5448a3(0x7a)],_0x1806bb=Reflect[_0x5448a3(0x90)](constants_1['META_CONTROLLER_VERSION'],this['controllerType'])||'';return this[_0x5448a3(0xaa)]?'':utils_1[_0x5448a3(0x78)](_0x3fe65b,_0x1806bb);}get[a22_0x287a25(0x75)](){const _0x270547=a22_0x287a25;if(this[_0x270547(0xaa)])return this[_0x270547(0xaa)];const _0x12b0ff=Reflect[_0x270547(0x90)](constants_1[_0x270547(0x9e)],this[_0x270547(0x92)])||'';return utils_1[_0x270547(0x78)](_0x12b0ff);}get[a22_0x287a25(0xa6)](){const _0x5313b1=a22_0x287a25;return typedi_1[_0x5313b1(0x7d)][_0x5313b1(0x83)](this[_0x5313b1(0x92)]);}async[a22_0x287a25(0x99)](){const _0x461112=a22_0x287a25;for(const _0x200865 of this[_0x461112(0xa1)]){const _0x23cf71=await middleware_injector_1['middlewareInjector'](_0x200865);this[_0x461112(0x89)][_0x461112(0xa7)](_0x23cf71);}}async[a22_0x287a25(0xad)](_0x4a092b){const _0xefafae=a22_0x287a25,_0x53ff03=_0x4a092b[_0xefafae(0x82)];logger[_0xefafae(0x84)](_0xefafae(0xa5)+_0x53ff03['name']+_0xefafae(0x9b)+this[_0xefafae(0x75)]+_0x4a092b[_0xefafae(0x75)]);const _0x72917=new ControllerInjector(_0x53ff03,this);_0x72917['nestedPath']=_0x4a092b['path'],await _0x72917[_0xefafae(0x9c)](this['router']);}async[a22_0x287a25(0x80)](){const _0xcb5ac0=a22_0x287a25;var _0x26f415;for(const _0x18b2ac of this[_0xcb5ac0(0x8e)]){const _0xd675d1=utils_1[_0xcb5ac0(0x88)](_0x18b2ac);if(_0xd675d1[_0xcb5ac0(0x82)])await this[_0xcb5ac0(0xad)](_0xd675d1);else{const _0x1f8e01=_0xd675d1[_0xcb5ac0(0xac)][_0xcb5ac0(0xab)]()[_0xcb5ac0(0xaf)]();logger['log'](_0xcb5ac0(0x72)+this[_0xcb5ac0(0x92)][_0xcb5ac0(0x9f)]+'#'+_0x18b2ac[_0xcb5ac0(0x9f)]+_0xcb5ac0(0x8d)+_0xd675d1[_0xcb5ac0(0xac)]+']\x20'+utils_1[_0xcb5ac0(0x78)](((_0x26f415=this[_0xcb5ac0(0x76)])===null||_0x26f415===void 0x0?void 0x0:_0x26f415['path'])||'',this['path'],_0xd675d1[_0xcb5ac0(0x75)])),this[_0xcb5ac0(0x89)][_0x1f8e01](_0xd675d1['path'],handler_wrapper_1['handlerWrapper'](_0x18b2ac,this[_0xcb5ac0(0xa6)]));}}}async[a22_0x287a25(0x9c)](_0x30421b){const _0x36e842=a22_0x287a25;!this[_0x36e842(0xaa)]&&logger['log'](_0x36e842(0x72)+this[_0x36e842(0x92)][_0x36e842(0x9f)]+'\x20{'+this['prefix']+'}'),await this[_0x36e842(0x99)](),await this[_0x36e842(0x80)](),_0x30421b[_0x36e842(0xa7)](''+this[_0x36e842(0x81)]+this[_0x36e842(0x75)],this['router']);}}exports['ControllerInjector']=ControllerInjector;