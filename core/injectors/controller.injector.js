const a22_0x206a=['constructor','5342wOwCfr','injectMiddlewares','controllerType','nested','middlewares','ControllerInjector','Router','map','injecting\x20nested\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','\x20at\x20','getPrototypeOf','1waSQRP','defineProperty','../classes/logger.class','getOwnMetadata','725530sgpvVj','prefix','CONTROLLER_DEFAULT_PREFIX','\x20is\x20not\x20a\x20Controller','instance','../utils','test','inject','35299bMgQRa','root','get','../constants','META_HANDLER','META_CONTROLLER_MIDDLEWARES','__importDefault','124702Mvqrvg','toString','1014053WgORVe','injecting\x20','router','12290vYHBhO','31zKeXQv','26015lBbSKr','use','META_CONTROLLER','Logger','express','handlerWrapper','nestedPath','middlewareInjector','2wYdrcB','handlers','1CmvBVq','path','268vPmaSw','normalizePaths','getOwnPropertyNames','filter','controller-injector','log','__esModule','injectNestedController','getHandlerMeta','12dnWcPP','injectHandlers','META_CONTROLLER_PREFIX','name'];const a22_0x30f987=a22_0x1695;(function(_0x52e07f,_0x537e6c){const _0x5d9909=a22_0x1695;while(!![]){try{const _0x598a15=parseInt(_0x5d9909(0x206))+parseInt(_0x5d9909(0x1fe))*parseInt(_0x5d9909(0x21e))+-parseInt(_0x5d9909(0x214))*-parseInt(_0x5d9909(0x229))+-parseInt(_0x5d9909(0x220))*parseInt(_0x5d9909(0x1ee))+-parseInt(_0x5d9909(0x21c))*parseInt(_0x5d9909(0x20d))+parseInt(_0x5d9909(0x20f))*parseInt(_0x5d9909(0x1fa))+-parseInt(_0x5d9909(0x213))*-parseInt(_0x5d9909(0x212));if(_0x598a15===_0x537e6c)break;else _0x52e07f['push'](_0x52e07f['shift']());}catch(_0x546a32){_0x52e07f['push'](_0x52e07f['shift']());}}}(a22_0x206a,0xc0230));const a22_0x45d727=function(){let _0x1c5c2c=!![];return function(_0x312568,_0x1ca1d9){const _0x2a055a=_0x1c5c2c?function(){if(_0x1ca1d9){const _0x18370e=_0x1ca1d9['apply'](_0x312568,arguments);return _0x1ca1d9=null,_0x18370e;}}:function(){};return _0x1c5c2c=![],_0x2a055a;};}(),a22_0x4a2091=a22_0x45d727(this,function(){const _0x2d46af=function(){const _0x182bcc=a22_0x1695,_0x10642d=_0x2d46af[_0x182bcc(0x22d)](_0x182bcc(0x1f7))()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x10642d[_0x182bcc(0x204)](a22_0x4a2091);};return _0x2d46af();});function a22_0x1695(_0x3a4052,_0x5454c5){return a22_0x1695=function(_0x8be465,_0x4a2091){_0x8be465=_0x8be465-0x1ee;let _0x45d727=a22_0x206a[_0x8be465];return _0x45d727;},a22_0x1695(_0x3a4052,_0x5454c5);}a22_0x4a2091();'use strict';var __importDefault=this&&this[a22_0x30f987(0x20c)]||function(_0x53025c){return _0x53025c&&_0x53025c['__esModule']?_0x53025c:{'default':_0x53025c};};Object[a22_0x30f987(0x1fb)](exports,a22_0x30f987(0x226),{'value':!![]}),exports[a22_0x30f987(0x1f3)]=void 0x0;const express_1=require(a22_0x30f987(0x218)),typedi_1=__importDefault(require('typedi')),logger_class_1=require(a22_0x30f987(0x1fc)),constants_1=require(a22_0x30f987(0x209)),utils_1=require(a22_0x30f987(0x203)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require('./middleware.injector'),logger=new logger_class_1[(a22_0x30f987(0x217))](a22_0x30f987(0x224));class ControllerInjector{constructor(_0x54aae5,_0x7d37fe){const _0x4df56b=a22_0x30f987;this[_0x4df56b(0x1f0)]=_0x54aae5,this['root']=_0x7d37fe,this[_0x4df56b(0x211)]=express_1[_0x4df56b(0x1f4)]({'mergeParams':!![]}),this[_0x4df56b(0x21a)]='';if(!Reflect['getOwnMetadata'](constants_1[_0x4df56b(0x216)],_0x54aae5))throw TypeError(_0x54aae5[_0x4df56b(0x22c)]+_0x4df56b(0x201));}get[a22_0x30f987(0x21d)](){const _0x4c6ac5=a22_0x30f987,_0x5d84dc=Object[_0x4c6ac5(0x1f9)](this[_0x4c6ac5(0x202)]);return Object[_0x4c6ac5(0x222)](_0x5d84dc)[_0x4c6ac5(0x1f5)](_0x7cd019=>_0x5d84dc[_0x7cd019])[_0x4c6ac5(0x223)](_0x485ddc=>!!Reflect[_0x4c6ac5(0x1fd)](constants_1[_0x4c6ac5(0x20a)],_0x485ddc));}get[a22_0x30f987(0x1f2)](){const _0x2c94c8=a22_0x30f987;return Reflect[_0x2c94c8(0x1fd)](constants_1[_0x2c94c8(0x20b)],this[_0x2c94c8(0x202)])||[];}get[a22_0x30f987(0x1ff)](){const _0x8d105b=a22_0x30f987;var _0x2825a4;const _0x554276=(_0x2825a4=Reflect['getOwnMetadata'](constants_1[_0x8d105b(0x22b)],this['controllerType']))!==null&&_0x2825a4!==void 0x0?_0x2825a4:constants_1[_0x8d105b(0x200)],_0x1190ac=Reflect[_0x8d105b(0x1fd)](constants_1['META_CONTROLLER_VERSION'],this[_0x8d105b(0x1f0)])||'';return this[_0x8d105b(0x21a)]?'':utils_1['normalizePaths'](_0x554276,_0x1190ac);}get[a22_0x30f987(0x21f)](){const _0x32cca0=a22_0x30f987;if(this[_0x32cca0(0x21a)])return this[_0x32cca0(0x21a)];const _0x1689d2=Reflect[_0x32cca0(0x1fd)](constants_1['META_CONTROLLER_PATH'],this['controllerType'])||'';return utils_1[_0x32cca0(0x221)](_0x1689d2);}get[a22_0x30f987(0x202)](){const _0x33d248=a22_0x30f987;return typedi_1['default'][_0x33d248(0x208)](this[_0x33d248(0x1f0)]);}async[a22_0x30f987(0x1ef)](){const _0x2a648e=a22_0x30f987;for(const _0x58b72e of this[_0x2a648e(0x1f2)]){const _0x409499=await middleware_injector_1[_0x2a648e(0x21b)](_0x58b72e);this[_0x2a648e(0x211)][_0x2a648e(0x215)](_0x409499);}}async['injectNestedController'](_0x391037){const _0x328091=a22_0x30f987,_0x461235=_0x391037[_0x328091(0x1f1)];logger[_0x328091(0x225)](_0x328091(0x1f6)+_0x461235[_0x328091(0x22c)]+_0x328091(0x1f8)+this[_0x328091(0x21f)]+_0x391037[_0x328091(0x21f)]);const _0x181539=new ControllerInjector(_0x461235,this);_0x181539[_0x328091(0x21a)]=_0x391037['path'],await _0x181539[_0x328091(0x205)](this[_0x328091(0x211)]);}async[a22_0x30f987(0x22a)](){const _0x3f0f46=a22_0x30f987;var _0x18aed5;for(const _0x5edba9 of this['handlers']){const _0x244152=utils_1[_0x3f0f46(0x228)](_0x5edba9);if(_0x244152[_0x3f0f46(0x1f1)])await this[_0x3f0f46(0x227)](_0x244152);else{const _0x7294ba=_0x244152['method'][_0x3f0f46(0x20e)]()['toLowerCase']();logger['log'](_0x3f0f46(0x210)+this[_0x3f0f46(0x1f0)]['name']+'#'+_0x5edba9[_0x3f0f46(0x22c)]+'\x20at\x20['+_0x244152['method']+']\x20'+utils_1[_0x3f0f46(0x221)](((_0x18aed5=this[_0x3f0f46(0x207)])===null||_0x18aed5===void 0x0?void 0x0:_0x18aed5[_0x3f0f46(0x21f)])||'',this[_0x3f0f46(0x21f)],_0x244152[_0x3f0f46(0x21f)])),this[_0x3f0f46(0x211)][_0x7294ba](_0x244152[_0x3f0f46(0x21f)],handler_wrapper_1[_0x3f0f46(0x219)](_0x5edba9,this[_0x3f0f46(0x202)]));}}}async['inject'](_0x5c2ea6){const _0x3015cd=a22_0x30f987;!this['nestedPath']&&logger['log'](_0x3015cd(0x210)+this['controllerType']['name']+'\x20{'+this['prefix']+'}'),await this[_0x3015cd(0x1ef)](),await this['injectHandlers'](),_0x5c2ea6['use'](''+this[_0x3015cd(0x1ff)]+this[_0x3015cd(0x21f)],this[_0x3015cd(0x211)]);}}exports['ControllerInjector']=ControllerInjector;