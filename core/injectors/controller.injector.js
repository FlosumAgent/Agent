const a22_0x4aa0=['getPrototypeOf','308871mtaKwy','toLowerCase','router','362893JpUAXl','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','injectHandlers','handlerWrapper','apply','CONTROLLER_DEFAULT_PREFIX','injecting\x20','getOwnMetadata','controllerType','44SQCrza','middlewareInjector','log','459878HEyzdz','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','inject','handlers','injecting\x20nested\x20','1DRGhwZ','../constants','487642GMWmTa','653474tmtmSa','injectNestedController','./middleware.injector','Logger','../utils','\x20at\x20','controller-injector','method','META_CONTROLLER_VERSION','injectMiddlewares','path','prefix','nested','META_CONTROLLER','530172eAjtKd','\x20at\x20[','name','ControllerInjector','filter','typedi','../classes/logger.class','get','middlewares','nestedPath','getHandlerMeta','getOwnPropertyNames','__esModule','1442wTdbST','default','META_CONTROLLER_MIDDLEWARES','instance','normalizePaths','root','META_CONTROLLER_PATH','express'];const a22_0x87f93b=a22_0x23b2;(function(_0x45e554,_0x375bd3){const _0x5733a1=a22_0x23b2;while(!![]){try{const _0x53ea1b=parseInt(_0x5733a1(0xa5))*-parseInt(_0x5733a1(0x90))+parseInt(_0x5733a1(0xa8))+-parseInt(_0x5733a1(0xa0))+parseInt(_0x5733a1(0x93))+parseInt(_0x5733a1(0xb6))+-parseInt(_0x5733a1(0xa7))+-parseInt(_0x5733a1(0x87))*-parseInt(_0x5733a1(0x9d));if(_0x53ea1b===_0x375bd3)break;else _0x45e554['push'](_0x45e554['shift']());}catch(_0x26ffa1){_0x45e554['push'](_0x45e554['shift']());}}}(a22_0x4aa0,0x5653c));const a22_0x58eead=function(){let _0x1cd453=!![];return function(_0x187748,_0x288ff4){const _0x2c82bf=_0x1cd453?function(){const _0x59e1b6=a22_0x23b2;if(_0x288ff4){const _0x22edc6=_0x288ff4[_0x59e1b6(0x98)](_0x187748,arguments);return _0x288ff4=null,_0x22edc6;}}:function(){};return _0x1cd453=![],_0x2c82bf;};}(),a22_0xa501ee=a22_0x58eead(this,function(){const _0x1e9853=function(){const _0x3bceb7=a22_0x23b2,_0x359f66=_0x1e9853['constructor'](_0x3bceb7(0x95))()['constructor'](_0x3bceb7(0xa1));return!_0x359f66[_0x3bceb7(0x94)](a22_0xa501ee);};return _0x1e9853();});a22_0xa501ee();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x193ca7){const _0x2fb1d5=a22_0x23b2;return _0x193ca7&&_0x193ca7[_0x2fb1d5(0x86)]?_0x193ca7:{'default':_0x193ca7};};Object['defineProperty'](exports,a22_0x87f93b(0x86),{'value':!![]}),exports[a22_0x87f93b(0xb9)]=void 0x0;function a22_0x23b2(_0x4ff665,_0x50ee80){return a22_0x23b2=function(_0xb3eec,_0xa501ee){_0xb3eec=_0xb3eec-0x85;let _0x58eead=a22_0x4aa0[_0xb3eec];return _0x58eead;},a22_0x23b2(_0x4ff665,_0x50ee80);}const express_1=require(a22_0x87f93b(0x8e)),typedi_1=__importDefault(require(a22_0x87f93b(0xbb))),logger_class_1=require(a22_0x87f93b(0xbc)),constants_1=require(a22_0x87f93b(0xa6)),utils_1=require(a22_0x87f93b(0xac)),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a22_0x87f93b(0xaa)),logger=new logger_class_1[(a22_0x87f93b(0xab))](a22_0x87f93b(0xae));class ControllerInjector{constructor(_0x23a15e,_0x15854b){const _0x2833bd=a22_0x87f93b;this[_0x2833bd(0x9c)]=_0x23a15e,this[_0x2833bd(0x8c)]=_0x15854b,this[_0x2833bd(0x92)]=express_1['Router']({'mergeParams':!![]}),this[_0x2833bd(0xbf)]='';if(!Reflect['getOwnMetadata'](constants_1[_0x2833bd(0xb5)],_0x23a15e))throw TypeError(_0x23a15e[_0x2833bd(0xb8)]+'\x20is\x20not\x20a\x20Controller');}get[a22_0x87f93b(0xa3)](){const _0x527fe6=a22_0x87f93b,_0x1ab8b5=Object[_0x527fe6(0x8f)](this[_0x527fe6(0x8a)]);return Object[_0x527fe6(0x85)](_0x1ab8b5)['map'](_0x33f1f3=>_0x1ab8b5[_0x33f1f3])[_0x527fe6(0xba)](_0x43ce9f=>!!Reflect[_0x527fe6(0x9b)](constants_1['META_HANDLER'],_0x43ce9f));}get[a22_0x87f93b(0xbe)](){const _0x42a724=a22_0x87f93b;return Reflect['getOwnMetadata'](constants_1[_0x42a724(0x89)],this['instance'])||[];}get['prefix'](){const _0x620662=a22_0x87f93b;var _0x2f9bf5;const _0x3979a5=(_0x2f9bf5=Reflect[_0x620662(0x9b)](constants_1['META_CONTROLLER_PREFIX'],this['controllerType']))!==null&&_0x2f9bf5!==void 0x0?_0x2f9bf5:constants_1[_0x620662(0x99)],_0x44b628=Reflect[_0x620662(0x9b)](constants_1[_0x620662(0xb0)],this[_0x620662(0x9c)])||'';return this['nestedPath']?'':utils_1[_0x620662(0x8b)](_0x3979a5,_0x44b628);}get[a22_0x87f93b(0xb2)](){const _0x3d05cd=a22_0x87f93b;if(this[_0x3d05cd(0xbf)])return this[_0x3d05cd(0xbf)];const _0x1080c3=Reflect['getOwnMetadata'](constants_1[_0x3d05cd(0x8d)],this[_0x3d05cd(0x9c)])||'';return utils_1[_0x3d05cd(0x8b)](_0x1080c3);}get[a22_0x87f93b(0x8a)](){const _0x2b69f5=a22_0x87f93b;return typedi_1[_0x2b69f5(0x88)][_0x2b69f5(0xbd)](this[_0x2b69f5(0x9c)]);}async['injectMiddlewares'](){const _0x3a62d1=a22_0x87f93b;for(const _0x1df080 of this[_0x3a62d1(0xbe)]){const _0x1ef00e=await middleware_injector_1[_0x3a62d1(0x9e)](_0x1df080);this[_0x3a62d1(0x92)]['use'](_0x1ef00e);}}async[a22_0x87f93b(0xa9)](_0x474431){const _0x30f9d3=a22_0x87f93b,_0x2cbaf9=_0x474431[_0x30f9d3(0xb4)];logger[_0x30f9d3(0x9f)](_0x30f9d3(0xa4)+_0x2cbaf9[_0x30f9d3(0xb8)]+_0x30f9d3(0xad)+this['path']+_0x474431[_0x30f9d3(0xb2)]);const _0x19039c=new ControllerInjector(_0x2cbaf9,this);_0x19039c[_0x30f9d3(0xbf)]=_0x474431['path'],await _0x19039c[_0x30f9d3(0xa2)](this[_0x30f9d3(0x92)]);}async[a22_0x87f93b(0x96)](){const _0x59fd89=a22_0x87f93b;var _0x5585d0;for(const _0xa13149 of this['handlers']){const _0xd67b45=utils_1[_0x59fd89(0xc0)](_0xa13149);if(_0xd67b45['nested'])await this[_0x59fd89(0xa9)](_0xd67b45);else{const _0x4b8020=_0xd67b45[_0x59fd89(0xaf)]['toString']()[_0x59fd89(0x91)]();logger[_0x59fd89(0x9f)]('injecting\x20'+this['controllerType']['name']+'#'+_0xa13149['name']+_0x59fd89(0xb7)+_0xd67b45[_0x59fd89(0xaf)]+']\x20'+utils_1[_0x59fd89(0x8b)](((_0x5585d0=this[_0x59fd89(0x8c)])===null||_0x5585d0===void 0x0?void 0x0:_0x5585d0[_0x59fd89(0xb2)])||'',this[_0x59fd89(0xb2)],_0xd67b45['path'])),this[_0x59fd89(0x92)][_0x4b8020](_0xd67b45[_0x59fd89(0xb2)],handler_wrapper_1[_0x59fd89(0x97)](_0xa13149,this['instance']));}}}async[a22_0x87f93b(0xa2)](_0x453f61){const _0x5f1548=a22_0x87f93b;!this[_0x5f1548(0xbf)]&&logger[_0x5f1548(0x9f)](_0x5f1548(0x9a)+this['controllerType'][_0x5f1548(0xb8)]+'\x20{'+this[_0x5f1548(0xb3)]+'}'),await this[_0x5f1548(0xb1)](),await this['injectHandlers'](),_0x453f61['use'](''+this['prefix']+this['path'],this[_0x5f1548(0x92)]);}}exports[a22_0x87f93b(0xb9)]=ControllerInjector;