const a28_0x28b8=['nestedPath','__importDefault','1549xuMjsm','\x20is\x20not\x20a\x20Controller','Router','injectNestedController','getPrototypeOf','META_CONTROLLER_MIDDLEWARES','router','getOwnMetadata','controllerType','injectHandlers','getOwnPropertyNames','method','__esModule','../constants','1442122WEbPEn','Logger','name','4udYHIf','express','use','path','injectMiddlewares','injecting\x20','instance','../classes/logger.class','middlewareInjector','META_CONTROLLER','controller-injector','toString','./middleware.injector','handlers','nested','684607tiAsEe','inject','getHandlerMeta','constructor','middlewares','479Lgbiur','\x20at\x20','filter','META_CONTROLLER_PREFIX','prefix','14Ajylca','test','../wrappers/handler.wrapper','log','get','911542lUfZIS','709176WxHGst','META_CONTROLLER_VERSION','toLowerCase','CONTROLLER_DEFAULT_PREFIX','default','typedi','19207UYEZfA','normalizePaths','1hwVSwF','defineProperty','128221SagdzJ'];const a28_0x2ee62a=a28_0x5781;(function(_0x415edb,_0x2cee9b){const _0x2542b1=a28_0x5781;while(!![]){try{const _0x39eaaa=-parseInt(_0x2542b1(0x135))+parseInt(_0x2542b1(0x164))*parseInt(_0x2542b1(0x14c))+parseInt(_0x2542b1(0x156))+parseInt(_0x2542b1(0x138))*parseInt(_0x2542b1(0x161))+parseInt(_0x2542b1(0x147))*parseInt(_0x2542b1(0x15f))+-parseInt(_0x2542b1(0x157))+parseInt(_0x2542b1(0x15d))*parseInt(_0x2542b1(0x151));if(_0x39eaaa===_0x2cee9b)break;else _0x415edb['push'](_0x415edb['shift']());}catch(_0x31ed60){_0x415edb['push'](_0x415edb['shift']());}}}(a28_0x28b8,0xec79c));const a28_0x34b76d=function(){let _0x518580=!![];return function(_0x12ae7f,_0x45c877){const _0x12d4f3=_0x518580?function(){if(_0x45c877){const _0x3b5bbf=_0x45c877['apply'](_0x12ae7f,arguments);return _0x45c877=null,_0x3b5bbf;}}:function(){};return _0x518580=![],_0x12d4f3;};}(),a28_0x393ffd=a28_0x34b76d(this,function(){const _0x4b2a91=function(){const _0x183a0c=a28_0x5781,_0x37c04c=_0x4b2a91[_0x183a0c(0x14a)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x37c04c[_0x183a0c(0x152)](a28_0x393ffd);};return _0x4b2a91();});a28_0x393ffd();'use strict';var __importDefault=this&&this[a28_0x2ee62a(0x163)]||function(_0x471bcc){const _0x255670=a28_0x2ee62a;return _0x471bcc&&_0x471bcc[_0x255670(0x133)]?_0x471bcc:{'default':_0x471bcc};};Object[a28_0x2ee62a(0x160)](exports,a28_0x2ee62a(0x133),{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require(a28_0x2ee62a(0x139)),typedi_1=__importDefault(require(a28_0x2ee62a(0x15c))),logger_class_1=require(a28_0x2ee62a(0x13f)),constants_1=require(a28_0x2ee62a(0x134)),utils_1=require('../utils'),handler_wrapper_1=require(a28_0x2ee62a(0x153)),middleware_injector_1=require(a28_0x2ee62a(0x144)),logger=new logger_class_1[(a28_0x2ee62a(0x136))](a28_0x2ee62a(0x142));function a28_0x5781(_0x22d98e,_0x12ebef){return a28_0x5781=function(_0x33bc5c,_0x393ffd){_0x33bc5c=_0x33bc5c-0x133;let _0x34b76d=a28_0x28b8[_0x33bc5c];return _0x34b76d;},a28_0x5781(_0x22d98e,_0x12ebef);}class ControllerInjector{constructor(_0x485ac9,_0x4c0ec7){const _0x5efcd0=a28_0x2ee62a;this['controllerType']=_0x485ac9,this['root']=_0x4c0ec7,this[_0x5efcd0(0x16a)]=express_1[_0x5efcd0(0x166)]({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect[_0x5efcd0(0x16b)](constants_1[_0x5efcd0(0x141)],_0x485ac9))throw TypeError(_0x485ac9[_0x5efcd0(0x137)]+_0x5efcd0(0x165));}get[a28_0x2ee62a(0x145)](){const _0x404e1a=a28_0x2ee62a,_0x5d0ca6=Object[_0x404e1a(0x168)](this[_0x404e1a(0x13e)]);return Object[_0x404e1a(0x16e)](_0x5d0ca6)['map'](_0x330927=>_0x5d0ca6[_0x330927])[_0x404e1a(0x14e)](_0x1ca3a2=>!!Reflect['getOwnMetadata'](constants_1['META_HANDLER'],_0x1ca3a2));}get[a28_0x2ee62a(0x14b)](){const _0x1337ec=a28_0x2ee62a;return Reflect['getOwnMetadata'](constants_1[_0x1337ec(0x169)],this[_0x1337ec(0x13e)])||[];}get[a28_0x2ee62a(0x150)](){const _0x254156=a28_0x2ee62a;var _0xf7300b;const _0x43e188=(_0xf7300b=Reflect[_0x254156(0x16b)](constants_1[_0x254156(0x14f)],this[_0x254156(0x16c)]))!==null&&_0xf7300b!==void 0x0?_0xf7300b:constants_1[_0x254156(0x15a)],_0x5742b6=Reflect[_0x254156(0x16b)](constants_1[_0x254156(0x158)],this[_0x254156(0x16c)])||'';return this[_0x254156(0x162)]?'':utils_1[_0x254156(0x15e)](_0x43e188,_0x5742b6);}get['path'](){const _0x4171a7=a28_0x2ee62a;if(this['nestedPath'])return this[_0x4171a7(0x162)];const _0x7bea91=Reflect[_0x4171a7(0x16b)](constants_1['META_CONTROLLER_PATH'],this[_0x4171a7(0x16c)])||'';return utils_1[_0x4171a7(0x15e)](_0x7bea91);}get[a28_0x2ee62a(0x13e)](){const _0x5eb0a2=a28_0x2ee62a;return typedi_1[_0x5eb0a2(0x15b)][_0x5eb0a2(0x155)](this['controllerType']);}async[a28_0x2ee62a(0x13c)](){const _0x18db07=a28_0x2ee62a;for(const _0x2e9c80 of this[_0x18db07(0x14b)]){const _0x4795b6=await middleware_injector_1[_0x18db07(0x140)](_0x2e9c80);this[_0x18db07(0x16a)][_0x18db07(0x13a)](_0x4795b6);}}async[a28_0x2ee62a(0x167)](_0x36b8aa){const _0x1d9fcb=a28_0x2ee62a,_0x11cdf8=_0x36b8aa['nested'];logger[_0x1d9fcb(0x154)]('injecting\x20nested\x20'+_0x11cdf8[_0x1d9fcb(0x137)]+_0x1d9fcb(0x14d)+this['path']+_0x36b8aa[_0x1d9fcb(0x13b)]);const _0xe34eb5=new ControllerInjector(_0x11cdf8,this);_0xe34eb5[_0x1d9fcb(0x162)]=_0x36b8aa['path'],await _0xe34eb5['inject'](this[_0x1d9fcb(0x16a)]);}async[a28_0x2ee62a(0x16d)](){const _0xab80cd=a28_0x2ee62a;var _0x129bb5;for(const _0x4709d5 of this[_0xab80cd(0x145)]){const _0x16d4f1=utils_1[_0xab80cd(0x149)](_0x4709d5);if(_0x16d4f1[_0xab80cd(0x146)])await this['injectNestedController'](_0x16d4f1);else{const _0x23b1e0=_0x16d4f1[_0xab80cd(0x16f)][_0xab80cd(0x143)]()[_0xab80cd(0x159)]();logger[_0xab80cd(0x154)]('injecting\x20'+this[_0xab80cd(0x16c)][_0xab80cd(0x137)]+'#'+_0x4709d5[_0xab80cd(0x137)]+'\x20at\x20['+_0x16d4f1[_0xab80cd(0x16f)]+']\x20'+utils_1[_0xab80cd(0x15e)](((_0x129bb5=this['root'])===null||_0x129bb5===void 0x0?void 0x0:_0x129bb5[_0xab80cd(0x13b)])||'',this[_0xab80cd(0x13b)],_0x16d4f1[_0xab80cd(0x13b)])),this[_0xab80cd(0x16a)][_0x23b1e0](_0x16d4f1[_0xab80cd(0x13b)],handler_wrapper_1['handlerWrapper'](_0x4709d5,this['instance']));}}}async[a28_0x2ee62a(0x148)](_0x78b660){const _0x26ce3e=a28_0x2ee62a;!this[_0x26ce3e(0x162)]&&logger[_0x26ce3e(0x154)](_0x26ce3e(0x13d)+this['controllerType']['name']+'\x20{'+this['prefix']+'}'),await this[_0x26ce3e(0x13c)](),await this[_0x26ce3e(0x16d)](),_0x78b660[_0x26ce3e(0x13a)](''+this[_0x26ce3e(0x150)]+this[_0x26ce3e(0x13b)],this[_0x26ce3e(0x16a)]);}}exports['ControllerInjector']=ControllerInjector;