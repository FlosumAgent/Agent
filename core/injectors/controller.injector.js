const a22_0x18b6=['getOwnPropertyNames','411001wkiDug','./middleware.injector','injectMiddlewares','controllerType','__esModule','express','968514CVGTgt','normalizePaths','ControllerInjector','143339rzQEJJ','method','Logger','../wrappers/handler.wrapper','getPrototypeOf','../classes/logger.class','META_CONTROLLER_VERSION','controller-injector','1221943iscQHt','path','injectNestedController','root','router','getOwnMetadata','prefix','default','map','META_CONTROLLER_MIDDLEWARES','name','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','get','test','log','1KLFccB','middlewares','injecting\x20nested\x20','Router','injecting\x20','typedi','toString','META_CONTROLLER_PATH','11WdQGXW','getHandlerMeta','inject','1OdUFUW','__importDefault','toLowerCase','constructor','nestedPath','injectHandlers','handlers','110504QbVytJ','middlewareInjector','1123557kXRsOj','filter','744183OfhcAP','instance','nested'];const a22_0x5977ba=a22_0x3d06;(function(_0x686515,_0x127d33){const _0x314df0=a22_0x3d06;while(!![]){try{const _0x41b581=parseInt(_0x314df0(0xba))+parseInt(_0x314df0(0xc0))*-parseInt(_0x314df0(0xe0))+parseInt(_0x314df0(0xb8))+parseInt(_0x314df0(0xc9))*parseInt(_0x314df0(0xe8))+-parseInt(_0x314df0(0xc6))+-parseInt(_0x314df0(0xbc))*-parseInt(_0x314df0(0xeb))+-parseInt(_0x314df0(0xd1));if(_0x41b581===_0x127d33)break;else _0x686515['push'](_0x686515['shift']());}catch(_0xa82207){_0x686515['push'](_0x686515['shift']());}}}(a22_0x18b6,0xe8cab));const a22_0x1cba89=function(){let _0x59deeb=!![];return function(_0x2d95e4,_0x5444cb){const _0x329187=_0x59deeb?function(){if(_0x5444cb){const _0x376f77=_0x5444cb['apply'](_0x2d95e4,arguments);return _0x5444cb=null,_0x376f77;}}:function(){};return _0x59deeb=![],_0x329187;};}(),a22_0x33e85d=a22_0x1cba89(this,function(){const _0x5e380b=function(){const _0x1c58ce=a22_0x3d06,_0xab0488=_0x5e380b['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x1c58ce(0xee)](_0x1c58ce(0xdc));return!_0xab0488[_0x1c58ce(0xde)](a22_0x33e85d);};return _0x5e380b();});a22_0x33e85d();'use strict';var __importDefault=this&&this[a22_0x5977ba(0xec)]||function(_0x54a59d){const _0x4e5645=a22_0x5977ba;return _0x54a59d&&_0x54a59d[_0x4e5645(0xc4)]?_0x54a59d:{'default':_0x54a59d};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a22_0x5977ba(0xc8)]=void 0x0;const express_1=require(a22_0x5977ba(0xc5)),typedi_1=__importDefault(require(a22_0x5977ba(0xe5))),logger_class_1=require(a22_0x5977ba(0xce)),constants_1=require('../constants'),utils_1=require('../utils'),handler_wrapper_1=require(a22_0x5977ba(0xcc)),middleware_injector_1=require(a22_0x5977ba(0xc1)),logger=new logger_class_1[(a22_0x5977ba(0xcb))](a22_0x5977ba(0xd0));class ControllerInjector{constructor(_0x38c781,_0x360d57){const _0x7cebc8=a22_0x5977ba;this['controllerType']=_0x38c781,this[_0x7cebc8(0xd4)]=_0x360d57,this[_0x7cebc8(0xd5)]=express_1[_0x7cebc8(0xe3)]({'mergeParams':!![]}),this[_0x7cebc8(0xef)]='';if(!Reflect[_0x7cebc8(0xd6)](constants_1['META_CONTROLLER'],_0x38c781))throw TypeError(_0x38c781[_0x7cebc8(0xdb)]+'\x20is\x20not\x20a\x20Controller');}get[a22_0x5977ba(0xf1)](){const _0x15f16f=a22_0x5977ba,_0x575d53=Object[_0x15f16f(0xcd)](this[_0x15f16f(0xbd)]);return Object[_0x15f16f(0xbf)](_0x575d53)[_0x15f16f(0xd9)](_0x29850b=>_0x575d53[_0x29850b])[_0x15f16f(0xbb)](_0x402a91=>!!Reflect[_0x15f16f(0xd6)](constants_1['META_HANDLER'],_0x402a91));}get[a22_0x5977ba(0xe1)](){const _0x562b02=a22_0x5977ba;return Reflect[_0x562b02(0xd6)](constants_1[_0x562b02(0xda)],this[_0x562b02(0xbd)])||[];}get[a22_0x5977ba(0xd7)](){const _0x3965e4=a22_0x5977ba;var _0x5e677a;const _0x4c963a=(_0x5e677a=Reflect[_0x3965e4(0xd6)](constants_1['META_CONTROLLER_PREFIX'],this[_0x3965e4(0xc3)]))!==null&&_0x5e677a!==void 0x0?_0x5e677a:constants_1['CONTROLLER_DEFAULT_PREFIX'],_0x2f6e6e=Reflect['getOwnMetadata'](constants_1[_0x3965e4(0xcf)],this[_0x3965e4(0xc3)])||'';return this['nestedPath']?'':utils_1['normalizePaths'](_0x4c963a,_0x2f6e6e);}get['path'](){const _0x3f66dc=a22_0x5977ba;if(this['nestedPath'])return this['nestedPath'];const _0x260c0a=Reflect[_0x3f66dc(0xd6)](constants_1[_0x3f66dc(0xe7)],this['controllerType'])||'';return utils_1[_0x3f66dc(0xc7)](_0x260c0a);}get[a22_0x5977ba(0xbd)](){const _0x2d7e80=a22_0x5977ba;return typedi_1[_0x2d7e80(0xd8)][_0x2d7e80(0xdd)](this['controllerType']);}async[a22_0x5977ba(0xc2)](){const _0x61c965=a22_0x5977ba;for(const _0xa2a5d5 of this['middlewares']){const _0x14e38e=await middleware_injector_1[_0x61c965(0xb9)](_0xa2a5d5);this[_0x61c965(0xd5)]['use'](_0x14e38e);}}async[a22_0x5977ba(0xd3)](_0x2b6e63){const _0x5d7ef1=a22_0x5977ba,_0x3d7396=_0x2b6e63['nested'];logger[_0x5d7ef1(0xdf)](_0x5d7ef1(0xe2)+_0x3d7396[_0x5d7ef1(0xdb)]+'\x20at\x20'+this[_0x5d7ef1(0xd2)]+_0x2b6e63[_0x5d7ef1(0xd2)]);const _0x309d13=new ControllerInjector(_0x3d7396,this);_0x309d13['nestedPath']=_0x2b6e63[_0x5d7ef1(0xd2)],await _0x309d13[_0x5d7ef1(0xea)](this[_0x5d7ef1(0xd5)]);}async[a22_0x5977ba(0xf0)](){const _0x13ffcb=a22_0x5977ba;var _0x24b25c;for(const _0x439aa8 of this[_0x13ffcb(0xf1)]){const _0x1f164a=utils_1[_0x13ffcb(0xe9)](_0x439aa8);if(_0x1f164a[_0x13ffcb(0xbe)])await this[_0x13ffcb(0xd3)](_0x1f164a);else{const _0x3f1c5c=_0x1f164a[_0x13ffcb(0xca)][_0x13ffcb(0xe6)]()[_0x13ffcb(0xed)]();logger[_0x13ffcb(0xdf)](_0x13ffcb(0xe4)+this[_0x13ffcb(0xc3)][_0x13ffcb(0xdb)]+'#'+_0x439aa8[_0x13ffcb(0xdb)]+'\x20at\x20['+_0x1f164a[_0x13ffcb(0xca)]+']\x20'+utils_1[_0x13ffcb(0xc7)](((_0x24b25c=this[_0x13ffcb(0xd4)])===null||_0x24b25c===void 0x0?void 0x0:_0x24b25c[_0x13ffcb(0xd2)])||'',this['path'],_0x1f164a[_0x13ffcb(0xd2)])),this['router'][_0x3f1c5c](_0x1f164a[_0x13ffcb(0xd2)],handler_wrapper_1['handlerWrapper'](_0x439aa8,this[_0x13ffcb(0xbd)]));}}}async[a22_0x5977ba(0xea)](_0x114430){const _0x1b85c1=a22_0x5977ba;!this[_0x1b85c1(0xef)]&&logger[_0x1b85c1(0xdf)]('injecting\x20'+this[_0x1b85c1(0xc3)][_0x1b85c1(0xdb)]+'\x20{'+this[_0x1b85c1(0xd7)]+'}'),await this[_0x1b85c1(0xc2)](),await this['injectHandlers'](),_0x114430['use'](''+this['prefix']+this[_0x1b85c1(0xd2)],this['router']);}}function a22_0x3d06(_0x2c0d82,_0x5cefc5){return a22_0x3d06=function(_0xbc11bb,_0x33e85d){_0xbc11bb=_0xbc11bb-0xb8;let _0x1cba89=a22_0x18b6[_0xbc11bb];return _0x1cba89;},a22_0x3d06(_0x2c0d82,_0x5cefc5);}exports[a22_0x5977ba(0xc8)]=ControllerInjector;