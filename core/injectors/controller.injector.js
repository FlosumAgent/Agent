const a22_0x3a3543=a22_0x453a;function a22_0x5f0a(){const _0x457c16=['getHandlerMeta','name','normalizePaths','getOwnPropertyNames','filter','META_CONTROLLER_VERSION','toString','controller-injector','default','injectNestedController','typedi','router','inject','injectMiddlewares','defineProperty','1LkInsO','1528ZotJKn','686625DargOM','30dlMUSr','log','injecting\x20','CONTROLLER_DEFAULT_PREFIX','61432uWliTG','handlerWrapper','nestedPath','getOwnMetadata','\x20at\x20','express','search','instance','15994vUUnJW','__importDefault','../utils','root','20853vUVPdf','ControllerInjector','../classes/logger.class','Logger','1956ngpdzJ','handlers','prefix','83520iXBIiG','method','742GOlZqt','./middleware.injector','(((.+)+)+)+$','\x20is\x20not\x20a\x20Controller','get','use','middlewares','injectHandlers','533GlUZsJ','path','../wrappers/handler.wrapper','__esModule','META_HANDLER','3103618pABQfd','558qAHvrp','middlewareInjector','nested','constructor','\x20at\x20[','controllerType','META_CONTROLLER','4790oxPpij','toLowerCase','getPrototypeOf'];a22_0x5f0a=function(){return _0x457c16;};return a22_0x5f0a();}(function(_0x36730c,_0x469ef1){const _0x414df7=a22_0x453a,_0x2547f4=_0x36730c();while(!![]){try{const _0x49cb4c=parseInt(_0x414df7(0x1ab))/0x1*(-parseInt(_0x414df7(0x191))/0x2)+-parseInt(_0x414df7(0x192))/0x3*(parseInt(_0x414df7(0x1ac))/0x4)+parseInt(_0x414df7(0x1ad))/0x5*(parseInt(_0x414df7(0x1ae))/0x6)+parseInt(_0x414df7(0x184))/0x7*(parseInt(_0x414df7(0x182))/0x8)+parseInt(_0x414df7(0x17b))/0x9*(parseInt(_0x414df7(0x199))/0xa)+-parseInt(_0x414df7(0x177))/0xb*(parseInt(_0x414df7(0x17f))/0xc)+-parseInt(_0x414df7(0x18c))/0xd*(parseInt(_0x414df7(0x1b2))/0xe);if(_0x49cb4c===_0x469ef1)break;else _0x2547f4['push'](_0x2547f4['shift']());}catch(_0xbf1bcb){_0x2547f4['push'](_0x2547f4['shift']());}}}(a22_0x5f0a,0xd2c69));function a22_0x453a(_0x341477,_0x59789c){const _0x355986=a22_0x5f0a();return a22_0x453a=function(_0x20c2e9,_0x4e2531){_0x20c2e9=_0x20c2e9-0x170;let _0x5f0a89=_0x355986[_0x20c2e9];return _0x5f0a89;},a22_0x453a(_0x341477,_0x59789c);}const a22_0x4e2531=function(){let _0x158f5e=!![];return function(_0x1217d3,_0x5ededc){const _0xe6faec=_0x158f5e?function(){if(_0x5ededc){const _0x156017=_0x5ededc['apply'](_0x1217d3,arguments);return _0x5ededc=null,_0x156017;}}:function(){};return _0x158f5e=![],_0xe6faec;};}(),a22_0x20c2e9=a22_0x4e2531(this,function(){const _0x5e2ad3=a22_0x453a;return a22_0x20c2e9[_0x5e2ad3(0x1a2)]()['search'](_0x5e2ad3(0x186))[_0x5e2ad3(0x1a2)]()[_0x5e2ad3(0x195)](a22_0x20c2e9)[_0x5e2ad3(0x175)](_0x5e2ad3(0x186));});a22_0x20c2e9();'use strict';var __importDefault=this&&this[a22_0x3a3543(0x178)]||function(_0x873bab){const _0x1aceb8=a22_0x3a3543;return _0x873bab&&_0x873bab[_0x1aceb8(0x18f)]?_0x873bab:{'default':_0x873bab};};Object[a22_0x3a3543(0x1aa)](exports,a22_0x3a3543(0x18f),{'value':!![]}),exports[a22_0x3a3543(0x17c)]=void 0x0;const express_1=require(a22_0x3a3543(0x174)),typedi_1=__importDefault(require(a22_0x3a3543(0x1a6))),logger_class_1=require(a22_0x3a3543(0x17d)),constants_1=require('../constants'),utils_1=require(a22_0x3a3543(0x179)),handler_wrapper_1=require(a22_0x3a3543(0x18e)),middleware_injector_1=require(a22_0x3a3543(0x185)),logger=new logger_class_1[(a22_0x3a3543(0x17e))](a22_0x3a3543(0x1a3));class ControllerInjector{constructor(_0xff1780,_0x500f68){const _0x1a2c43=a22_0x3a3543;this[_0x1a2c43(0x197)]=_0xff1780,this['root']=_0x500f68,this[_0x1a2c43(0x1a7)]=express_1['Router']({'mergeParams':!![]}),this[_0x1a2c43(0x171)]='';if(!Reflect['getOwnMetadata'](constants_1[_0x1a2c43(0x198)],_0xff1780))throw TypeError(_0xff1780[_0x1a2c43(0x19d)]+_0x1a2c43(0x187));}get['handlers'](){const _0x3b5679=a22_0x3a3543,_0x583876=Object[_0x3b5679(0x19b)](this[_0x3b5679(0x176)]);return Object[_0x3b5679(0x19f)](_0x583876)['map'](_0x4a9909=>_0x583876[_0x4a9909])[_0x3b5679(0x1a0)](_0x14be21=>!!Reflect[_0x3b5679(0x172)](constants_1[_0x3b5679(0x190)],_0x14be21));}get[a22_0x3a3543(0x18a)](){const _0x4ec3f9=a22_0x3a3543;return Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_MIDDLEWARES'],this[_0x4ec3f9(0x176)])||[];}get[a22_0x3a3543(0x181)](){const _0x19a9e6=a22_0x3a3543;var _0x46dae5;const _0x5e62c3=(_0x46dae5=Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_PREFIX'],this[_0x19a9e6(0x197)]))!==null&&_0x46dae5!==void 0x0?_0x46dae5:constants_1[_0x19a9e6(0x1b1)],_0x41eec5=Reflect[_0x19a9e6(0x172)](constants_1[_0x19a9e6(0x1a1)],this[_0x19a9e6(0x197)])||'';return this['nestedPath']?'':utils_1[_0x19a9e6(0x19e)](_0x5e62c3,_0x41eec5);}get[a22_0x3a3543(0x18d)](){const _0x1b188e=a22_0x3a3543;if(this['nestedPath'])return this[_0x1b188e(0x171)];const _0x4e7fee=Reflect[_0x1b188e(0x172)](constants_1['META_CONTROLLER_PATH'],this[_0x1b188e(0x197)])||'';return utils_1[_0x1b188e(0x19e)](_0x4e7fee);}get[a22_0x3a3543(0x176)](){const _0x25fbc3=a22_0x3a3543;return typedi_1[_0x25fbc3(0x1a4)][_0x25fbc3(0x188)](this['controllerType']);}async[a22_0x3a3543(0x1a9)](){const _0x323739=a22_0x3a3543;for(const _0x466539 of this[_0x323739(0x18a)]){const _0x4d0528=await middleware_injector_1[_0x323739(0x193)](_0x466539);this['router'][_0x323739(0x189)](_0x4d0528);}}async[a22_0x3a3543(0x1a5)](_0x32c0c5){const _0x9eb7f4=a22_0x3a3543,_0x2c0c71=_0x32c0c5[_0x9eb7f4(0x194)];logger[_0x9eb7f4(0x1af)]('injecting\x20nested\x20'+_0x2c0c71['name']+_0x9eb7f4(0x173)+this[_0x9eb7f4(0x18d)]+_0x32c0c5['path']);const _0x43d09c=new ControllerInjector(_0x2c0c71,this);_0x43d09c[_0x9eb7f4(0x171)]=_0x32c0c5['path'],await _0x43d09c[_0x9eb7f4(0x1a8)](this[_0x9eb7f4(0x1a7)]);}async['injectHandlers'](){const _0x137ec4=a22_0x3a3543;var _0x307e7e;for(const _0x14cc85 of this[_0x137ec4(0x180)]){const _0x4b87f0=utils_1[_0x137ec4(0x19c)](_0x14cc85);if(_0x4b87f0['nested'])await this[_0x137ec4(0x1a5)](_0x4b87f0);else{const _0x2aaacd=_0x4b87f0[_0x137ec4(0x183)][_0x137ec4(0x1a2)]()[_0x137ec4(0x19a)]();logger[_0x137ec4(0x1af)](_0x137ec4(0x1b0)+this[_0x137ec4(0x197)][_0x137ec4(0x19d)]+'#'+_0x14cc85[_0x137ec4(0x19d)]+_0x137ec4(0x196)+_0x4b87f0[_0x137ec4(0x183)]+']\x20'+utils_1[_0x137ec4(0x19e)](((_0x307e7e=this[_0x137ec4(0x17a)])===null||_0x307e7e===void 0x0?void 0x0:_0x307e7e[_0x137ec4(0x18d)])||'',this[_0x137ec4(0x18d)],_0x4b87f0['path'])),this[_0x137ec4(0x1a7)][_0x2aaacd](_0x4b87f0[_0x137ec4(0x18d)],handler_wrapper_1[_0x137ec4(0x170)](_0x14cc85,this[_0x137ec4(0x176)]));}}}async[a22_0x3a3543(0x1a8)](_0x4a4442){const _0x3c943f=a22_0x3a3543;!this[_0x3c943f(0x171)]&&logger[_0x3c943f(0x1af)](_0x3c943f(0x1b0)+this[_0x3c943f(0x197)][_0x3c943f(0x19d)]+'\x20{'+this[_0x3c943f(0x181)]+'}'),await this[_0x3c943f(0x1a9)](),await this[_0x3c943f(0x18b)](),_0x4a4442['use'](''+this[_0x3c943f(0x181)]+this[_0x3c943f(0x18d)],this[_0x3c943f(0x1a7)]);}}exports['ControllerInjector']=ControllerInjector;