const a22_0x3865=['controllerType','return\x20/\x22\x20+\x20this\x20+\x20\x22/','\x20is\x20not\x20a\x20Controller','constructor','instance','9784vBjWSo','getPrototypeOf','defineProperty','map','Logger','name','injectMiddlewares','6701ZSsTrx','nestedPath','../classes/logger.class','META_CONTROLLER_VERSION','prefix','normalizePaths','2YhCTjP','nested','769349bBckoW','router','log','test','injectHandlers','method','toString','middlewares','handlers','root','382sOKvpV','default','Router','1619dbAZDW','use','META_CONTROLLER_MIDDLEWARES','../utils','ControllerInjector','injecting\x20','105rWxxrp','META_HANDLER','\x20at\x20[','path','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','express','922170gKiUAN','META_CONTROLLER','502659yVASmQ','filter','toLowerCase','inject','1085700XOywbH','getOwnPropertyNames','CONTROLLER_DEFAULT_PREFIX','injectNestedController','../wrappers/handler.wrapper','120fwGSxk','get','injecting\x20nested\x20','getHandlerMeta','middlewareInjector','getOwnMetadata','__esModule'];const a22_0xd29c69=a22_0x48f0;function a22_0x48f0(_0x27bd4d,_0xffca6c){return a22_0x48f0=function(_0x5c2c64,_0xc98c51){_0x5c2c64=_0x5c2c64-0xce;let _0x5cbf80=a22_0x3865[_0x5c2c64];return _0x5cbf80;},a22_0x48f0(_0x27bd4d,_0xffca6c);}(function(_0x2eb72b,_0x1f5ec0){const _0x350047=a22_0x48f0;while(!![]){try{const _0x3c655f=parseInt(_0x350047(0xd2))*parseInt(_0x350047(0xf4))+-parseInt(_0x350047(0xd0))+parseInt(_0x350047(0xee))*-parseInt(_0x350047(0xdb))+-parseInt(_0x350047(0xd6))+parseInt(_0x350047(0x103))*parseInt(_0x350047(0x100))+parseInt(_0x350047(0xe7))*parseInt(_0x350047(0x109))+parseInt(_0x350047(0xf6));if(_0x3c655f===_0x1f5ec0)break;else _0x2eb72b['push'](_0x2eb72b['shift']());}catch(_0xcc5f25){_0x2eb72b['push'](_0x2eb72b['shift']());}}}(a22_0x3865,0x948c7));const a22_0x5cbf80=function(){let _0x1510d2=!![];return function(_0x5b1ec0,_0x581172){const _0x5b49ed=_0x1510d2?function(){if(_0x581172){const _0x5a2eff=_0x581172['apply'](_0x5b1ec0,arguments);return _0x581172=null,_0x5a2eff;}}:function(){};return _0x1510d2=![],_0x5b49ed;};}(),a22_0xc98c51=a22_0x5cbf80(this,function(){const _0x8a2a6d=function(){const _0x5e30d8=a22_0x48f0,_0x42222b=_0x8a2a6d[_0x5e30d8(0xe5)](_0x5e30d8(0xe3))()[_0x5e30d8(0xe5)](_0x5e30d8(0xce));return!_0x42222b[_0x5e30d8(0xf9)](a22_0xc98c51);};return _0x8a2a6d();});a22_0xc98c51();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x87258){const _0x3291df=a22_0x48f0;return _0x87258&&_0x87258[_0x3291df(0xe1)]?_0x87258:{'default':_0x87258};};Object[a22_0xd29c69(0xe9)](exports,a22_0xd29c69(0xe1),{'value':!![]}),exports['ControllerInjector']=void 0x0;const express_1=require(a22_0xd29c69(0xcf)),typedi_1=__importDefault(require('typedi')),logger_class_1=require(a22_0xd29c69(0xf0)),constants_1=require('../constants'),utils_1=require(a22_0xd29c69(0x106)),handler_wrapper_1=require(a22_0xd29c69(0xda)),middleware_injector_1=require('./middleware.injector'),logger=new logger_class_1[(a22_0xd29c69(0xeb))]('controller-injector');class ControllerInjector{constructor(_0x4eed66,_0x83720f){const _0x5ea6fd=a22_0xd29c69;this[_0x5ea6fd(0xe2)]=_0x4eed66,this[_0x5ea6fd(0xff)]=_0x83720f,this[_0x5ea6fd(0xf7)]=express_1[_0x5ea6fd(0x102)]({'mergeParams':!![]}),this[_0x5ea6fd(0xef)]='';if(!Reflect[_0x5ea6fd(0xe0)](constants_1[_0x5ea6fd(0xd1)],_0x4eed66))throw TypeError(_0x4eed66[_0x5ea6fd(0xec)]+_0x5ea6fd(0xe4));}get['handlers'](){const _0x573377=a22_0xd29c69,_0x34c96f=Object[_0x573377(0xe8)](this['instance']);return Object[_0x573377(0xd7)](_0x34c96f)[_0x573377(0xea)](_0x47432d=>_0x34c96f[_0x47432d])[_0x573377(0xd3)](_0x4e5c1b=>!!Reflect['getOwnMetadata'](constants_1[_0x573377(0x10a)],_0x4e5c1b));}get[a22_0xd29c69(0xfd)](){const _0x29a263=a22_0xd29c69;return Reflect[_0x29a263(0xe0)](constants_1[_0x29a263(0x105)],this[_0x29a263(0xe6)])||[];}get[a22_0xd29c69(0xf2)](){const _0x1cd483=a22_0xd29c69;var _0x108c05;const _0x47534c=(_0x108c05=Reflect[_0x1cd483(0xe0)](constants_1['META_CONTROLLER_PREFIX'],this[_0x1cd483(0xe2)]))!==null&&_0x108c05!==void 0x0?_0x108c05:constants_1[_0x1cd483(0xd8)],_0x3b61bc=Reflect['getOwnMetadata'](constants_1[_0x1cd483(0xf1)],this[_0x1cd483(0xe2)])||'';return this[_0x1cd483(0xef)]?'':utils_1[_0x1cd483(0xf3)](_0x47534c,_0x3b61bc);}get['path'](){const _0xbc8235=a22_0xd29c69;if(this['nestedPath'])return this[_0xbc8235(0xef)];const _0x614634=Reflect[_0xbc8235(0xe0)](constants_1['META_CONTROLLER_PATH'],this[_0xbc8235(0xe2)])||'';return utils_1[_0xbc8235(0xf3)](_0x614634);}get['instance'](){const _0x2d1244=a22_0xd29c69;return typedi_1[_0x2d1244(0x101)][_0x2d1244(0xdc)](this[_0x2d1244(0xe2)]);}async[a22_0xd29c69(0xed)](){const _0xbdbe7f=a22_0xd29c69;for(const _0x13eda7 of this[_0xbdbe7f(0xfd)]){const _0x3eff95=await middleware_injector_1[_0xbdbe7f(0xdf)](_0x13eda7);this[_0xbdbe7f(0xf7)]['use'](_0x3eff95);}}async['injectNestedController'](_0x2868a7){const _0x6c297a=a22_0xd29c69,_0x57afcd=_0x2868a7[_0x6c297a(0xf5)];logger[_0x6c297a(0xf8)](_0x6c297a(0xdd)+_0x57afcd['name']+'\x20at\x20'+this[_0x6c297a(0x10c)]+_0x2868a7[_0x6c297a(0x10c)]);const _0x5cf0f6=new ControllerInjector(_0x57afcd,this);_0x5cf0f6[_0x6c297a(0xef)]=_0x2868a7['path'],await _0x5cf0f6[_0x6c297a(0xd5)](this[_0x6c297a(0xf7)]);}async['injectHandlers'](){const _0x4b962a=a22_0xd29c69;var _0x49dd95;for(const _0x4ad75a of this[_0x4b962a(0xfe)]){const _0x12a12d=utils_1[_0x4b962a(0xde)](_0x4ad75a);if(_0x12a12d['nested'])await this[_0x4b962a(0xd9)](_0x12a12d);else{const _0x1752d8=_0x12a12d[_0x4b962a(0xfb)][_0x4b962a(0xfc)]()[_0x4b962a(0xd4)]();logger[_0x4b962a(0xf8)]('injecting\x20'+this[_0x4b962a(0xe2)][_0x4b962a(0xec)]+'#'+_0x4ad75a[_0x4b962a(0xec)]+_0x4b962a(0x10b)+_0x12a12d[_0x4b962a(0xfb)]+']\x20'+utils_1[_0x4b962a(0xf3)](((_0x49dd95=this[_0x4b962a(0xff)])===null||_0x49dd95===void 0x0?void 0x0:_0x49dd95[_0x4b962a(0x10c)])||'',this[_0x4b962a(0x10c)],_0x12a12d['path'])),this[_0x4b962a(0xf7)][_0x1752d8](_0x12a12d[_0x4b962a(0x10c)],handler_wrapper_1['handlerWrapper'](_0x4ad75a,this[_0x4b962a(0xe6)]));}}}async[a22_0xd29c69(0xd5)](_0x2a0344){const _0x52732a=a22_0xd29c69;!this[_0x52732a(0xef)]&&logger[_0x52732a(0xf8)](_0x52732a(0x108)+this[_0x52732a(0xe2)][_0x52732a(0xec)]+'\x20{'+this[_0x52732a(0xf2)]+'}'),await this[_0x52732a(0xed)](),await this[_0x52732a(0xfa)](),_0x2a0344[_0x52732a(0x104)](''+this[_0x52732a(0xf2)]+this[_0x52732a(0x10c)],this[_0x52732a(0xf7)]);}}exports[a22_0xd29c69(0x107)]=ControllerInjector;