const a22_0x58408f=a22_0x1d6f;(function(_0x3adf5d,_0x519ca8){const _0x298010=a22_0x1d6f,_0x1755c7=_0x3adf5d();while(!![]){try{const _0x483187=parseInt(_0x298010(0x119))/0x1*(parseInt(_0x298010(0x137))/0x2)+-parseInt(_0x298010(0x113))/0x3*(parseInt(_0x298010(0x139))/0x4)+parseInt(_0x298010(0x124))/0x5*(parseInt(_0x298010(0x121))/0x6)+-parseInt(_0x298010(0x12c))/0x7+-parseInt(_0x298010(0x109))/0x8*(-parseInt(_0x298010(0x136))/0x9)+-parseInt(_0x298010(0x106))/0xa+parseInt(_0x298010(0x12b))/0xb;if(_0x483187===_0x519ca8)break;else _0x1755c7['push'](_0x1755c7['shift']());}catch(_0x2a6a59){_0x1755c7['push'](_0x1755c7['shift']());}}}(a22_0x5154,0xaa793));const a22_0x859ceb=function(){let _0x34015e=!![];return function(_0x279948,_0x3212d1){const _0x26cbe1=_0x34015e?function(){const _0x1e29f8=a22_0x1d6f;if(_0x3212d1){const _0x184f5d=_0x3212d1[_0x1e29f8(0x129)](_0x279948,arguments);return _0x3212d1=null,_0x184f5d;}}:function(){};return _0x34015e=![],_0x26cbe1;};}(),a22_0xcd7e6c=a22_0x859ceb(this,function(){const _0x50bd90=a22_0x1d6f;return a22_0xcd7e6c['toString']()[_0x50bd90(0x135)]('(((.+)+)+)+$')[_0x50bd90(0x112)]()['constructor'](a22_0xcd7e6c)[_0x50bd90(0x135)]('(((.+)+)+)+$');});function a22_0x5154(){const _0x4a8024=['CONTROLLER_DEFAULT_PREFIX','ControllerInjector','filter','router','method','7235520pWFpYL','root','./middleware.injector','148328sAmjBh','controllerType','name','inject','injectNestedController','default','Logger','__importDefault','\x20at\x20','toString','28761aJMSTg','injecting\x20','prefix','META_CONTROLLER_PATH','\x20is\x20not\x20a\x20Controller','../wrappers/handler.wrapper','1QBEXyR','nestedPath','toLowerCase','getOwnMetadata','normalizePaths','instance','injectHandlers','typedi','18bEuZPs','path','META_CONTROLLER_MIDDLEWARES','1553645CwMYXm','META_CONTROLLER','META_CONTROLLER_VERSION','Router','../constants','apply','getPrototypeOf','524062eFGTqS','2979557jtYivD','use','nested','express','controller-injector','\x20at\x20[','middlewares','handlers','log','search','558orqSAC','1315234agpqzZ','__esModule','392iONBlr','injecting\x20nested\x20','injectMiddlewares'];a22_0x5154=function(){return _0x4a8024;};return a22_0x5154();}a22_0xcd7e6c();'use strict';var __importDefault=this&&this[a22_0x58408f(0x110)]||function(_0x695b27){return _0x695b27&&_0x695b27['__esModule']?_0x695b27:{'default':_0x695b27};};Object['defineProperty'](exports,a22_0x58408f(0x138),{'value':!![]}),exports[a22_0x58408f(0x13d)]=void 0x0;function a22_0x1d6f(_0x5b476a,_0x36d26e){const _0x32c429=a22_0x5154();return a22_0x1d6f=function(_0xcd7e6c,_0x859ceb){_0xcd7e6c=_0xcd7e6c-0x103;let _0x51542e=_0x32c429[_0xcd7e6c];return _0x51542e;},a22_0x1d6f(_0x5b476a,_0x36d26e);}const express_1=require(a22_0x58408f(0x12f)),typedi_1=__importDefault(require(a22_0x58408f(0x120))),logger_class_1=require('../classes/logger.class'),constants_1=require(a22_0x58408f(0x128)),utils_1=require('../utils'),handler_wrapper_1=require(a22_0x58408f(0x118)),middleware_injector_1=require(a22_0x58408f(0x108)),logger=new logger_class_1[(a22_0x58408f(0x10f))](a22_0x58408f(0x130));class ControllerInjector{constructor(_0x26c9af,_0x3f7689){const _0x109b6c=a22_0x58408f;this[_0x109b6c(0x10a)]=_0x26c9af,this[_0x109b6c(0x107)]=_0x3f7689,this[_0x109b6c(0x104)]=(0x0,express_1[_0x109b6c(0x127)])({'mergeParams':!![]}),this['nestedPath']='';if(!Reflect['getOwnMetadata'](constants_1[_0x109b6c(0x125)],_0x26c9af))throw TypeError(_0x26c9af['name']+_0x109b6c(0x117));}get[a22_0x58408f(0x133)](){const _0x2fe624=a22_0x58408f,_0x54a724=Object[_0x2fe624(0x12a)](this[_0x2fe624(0x11e)]);return Object['getOwnPropertyNames'](_0x54a724)['map'](_0x1d7027=>_0x54a724[_0x1d7027])[_0x2fe624(0x103)](_0x2dde32=>!!Reflect[_0x2fe624(0x11c)](constants_1['META_HANDLER'],_0x2dde32));}get['middlewares'](){const _0x189215=a22_0x58408f;return Reflect[_0x189215(0x11c)](constants_1[_0x189215(0x123)],this[_0x189215(0x11e)])||[];}get[a22_0x58408f(0x115)](){const _0x175274=a22_0x58408f;var _0x583697;const _0xd940d6=(_0x583697=Reflect[_0x175274(0x11c)](constants_1['META_CONTROLLER_PREFIX'],this[_0x175274(0x10a)]))!==null&&_0x583697!==void 0x0?_0x583697:constants_1[_0x175274(0x13c)],_0x4faabf=Reflect[_0x175274(0x11c)](constants_1[_0x175274(0x126)],this[_0x175274(0x10a)])||'';return this[_0x175274(0x11a)]?'':(0x0,utils_1[_0x175274(0x11d)])(_0xd940d6,_0x4faabf);}get['path'](){const _0x2300a3=a22_0x58408f;if(this[_0x2300a3(0x11a)])return this['nestedPath'];const _0x8f61f7=Reflect[_0x2300a3(0x11c)](constants_1[_0x2300a3(0x116)],this[_0x2300a3(0x10a)])||'';return(0x0,utils_1[_0x2300a3(0x11d)])(_0x8f61f7);}get[a22_0x58408f(0x11e)](){const _0x4e6a8d=a22_0x58408f;return typedi_1[_0x4e6a8d(0x10e)]['get'](this[_0x4e6a8d(0x10a)]);}async[a22_0x58408f(0x13b)](){const _0x5dd291=a22_0x58408f;for(const _0x3d8489 of this[_0x5dd291(0x132)]){const _0x5a68ce=await(0x0,middleware_injector_1['middlewareInjector'])(_0x3d8489);this[_0x5dd291(0x104)]['use'](_0x5a68ce);}}async[a22_0x58408f(0x10d)](_0x397589){const _0x10ed54=a22_0x58408f,_0x5428c5=_0x397589[_0x10ed54(0x12e)];logger[_0x10ed54(0x134)](_0x10ed54(0x13a)+_0x5428c5[_0x10ed54(0x10b)]+_0x10ed54(0x111)+this[_0x10ed54(0x122)]+_0x397589[_0x10ed54(0x122)]);const _0x3f8649=new ControllerInjector(_0x5428c5,this);_0x3f8649['nestedPath']=_0x397589[_0x10ed54(0x122)],await _0x3f8649['inject'](this[_0x10ed54(0x104)]);}async[a22_0x58408f(0x11f)](){const _0x176794=a22_0x58408f;var _0x2fc16c;for(const _0x4164c9 of this[_0x176794(0x133)]){const _0x4303b3=(0x0,utils_1['getHandlerMeta'])(_0x4164c9);if(_0x4303b3['nested'])await this[_0x176794(0x10d)](_0x4303b3);else{const _0x31d689=_0x4303b3[_0x176794(0x105)]['toString']()[_0x176794(0x11b)]();logger['log'](_0x176794(0x114)+this[_0x176794(0x10a)][_0x176794(0x10b)]+'#'+_0x4164c9[_0x176794(0x10b)]+_0x176794(0x131)+_0x4303b3[_0x176794(0x105)]+']\x20'+(0x0,utils_1[_0x176794(0x11d)])(((_0x2fc16c=this['root'])===null||_0x2fc16c===void 0x0?void 0x0:_0x2fc16c[_0x176794(0x122)])||'',this['path'],_0x4303b3[_0x176794(0x122)])),this[_0x176794(0x104)][_0x31d689](_0x4303b3[_0x176794(0x122)],(0x0,handler_wrapper_1['handlerWrapper'])(_0x4164c9,this[_0x176794(0x11e)]));}}}async[a22_0x58408f(0x10c)](_0x4259ba){const _0x26cc21=a22_0x58408f;!this[_0x26cc21(0x11a)]&&logger['log']('injecting\x20'+this['controllerType']['name']+'\x20{'+this['prefix']+'}'),await this['injectMiddlewares'](),await this['injectHandlers'](),_0x4259ba[_0x26cc21(0x12d)](''+this[_0x26cc21(0x115)]+this[_0x26cc21(0x122)],this[_0x26cc21(0x104)]);}}exports[a22_0x58408f(0x13d)]=ControllerInjector;