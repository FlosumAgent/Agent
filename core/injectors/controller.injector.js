const a22_0x4897=['201981pknTGX','controllerType','getPrototypeOf','../constants','CONTROLLER_DEFAULT_PREFIX','injecting\x20nested\x20','toString','injectNestedController','getHandlerMeta','injectHandlers','33452Ewlgln','middlewares','nested','49381ZmmeZa','inject','typedi','META_HANDLER','handlerWrapper','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','filter','middlewareInjector','347kahrbg','../classes/logger.class','toLowerCase','__esModule','return\x20/\x22\x20+\x20this\x20+\x20\x22/','META_CONTROLLER','name','test','Router','1877771FFJHtC','Logger','\x20at\x20','express','getOwnMetadata','constructor','prefix','injectMiddlewares','normalizePaths','path','META_CONTROLLER_VERSION','ControllerInjector','root','nestedPath','20UhgzSW','controller-injector','4174urpcai','log','getOwnPropertyNames','get','11362OOnsdz','instance','META_CONTROLLER_PREFIX','\x20at\x20[','defineProperty','META_CONTROLLER_MIDDLEWARES','default','apply','387963aPjSFf','router','39MVeehd','use','./middleware.injector','handlers','method','injecting\x20','__importDefault'];const a22_0x2db981=a22_0x3b2f;(function(_0x15f90c,_0x4fccdb){const _0x16e5b4=a22_0x3b2f;while(!![]){try{const _0x10d335=-parseInt(_0x16e5b4(0xff))+-parseInt(_0x16e5b4(0xf6))*-parseInt(_0x16e5b4(0xcc))+-parseInt(_0x16e5b4(0xd8))+-parseInt(_0x16e5b4(0xeb))*-parseInt(_0x16e5b4(0xda))+parseInt(_0x16e5b4(0xee))+parseInt(_0x16e5b4(0xe1))+-parseInt(_0x16e5b4(0xca))*-parseInt(_0x16e5b4(0xd0));if(_0x10d335===_0x4fccdb)break;else _0x15f90c['push'](_0x15f90c['shift']());}catch(_0xcf1109){_0x15f90c['push'](_0x15f90c['shift']());}}}(a22_0x4897,0xebcf2));const a22_0x347e70=function(){let _0x25f0d4=!![];return function(_0x3f5ecf,_0x1445a2){const _0x55a24a=_0x25f0d4?function(){const _0x3e5ea1=a22_0x3b2f;if(_0x1445a2){const _0x3741d1=_0x1445a2[_0x3e5ea1(0xd7)](_0x3f5ecf,arguments);return _0x1445a2=null,_0x3741d1;}}:function(){};return _0x25f0d4=![],_0x55a24a;};}(),a22_0x5b43f7=a22_0x347e70(this,function(){const _0x5ce23e=function(){const _0x334943=a22_0x3b2f,_0xca1c4d=_0x5ce23e[_0x334943(0xc1)](_0x334943(0xfa))()[_0x334943(0xc1)](_0x334943(0xf3));return!_0xca1c4d[_0x334943(0xfd)](a22_0x5b43f7);};return _0x5ce23e();});a22_0x5b43f7();'use strict';var __importDefault=this&&this[a22_0x2db981(0xe0)]||function(_0x1036a1){return _0x1036a1&&_0x1036a1['__esModule']?_0x1036a1:{'default':_0x1036a1};};Object[a22_0x2db981(0xd4)](exports,a22_0x2db981(0xf9),{'value':!![]}),exports[a22_0x2db981(0xc7)]=void 0x0;const express_1=require(a22_0x2db981(0x102)),typedi_1=__importDefault(require(a22_0x2db981(0xf0))),logger_class_1=require(a22_0x2db981(0xf7)),constants_1=require(a22_0x2db981(0xe4)),utils_1=require('../utils'),handler_wrapper_1=require('../wrappers/handler.wrapper'),middleware_injector_1=require(a22_0x2db981(0xdc)),logger=new logger_class_1[(a22_0x2db981(0x100))](a22_0x2db981(0xcb));function a22_0x3b2f(_0x1ec9b9,_0x44ebb1){return a22_0x3b2f=function(_0x4e4775,_0x5b43f7){_0x4e4775=_0x4e4775-0xc1;let _0x347e70=a22_0x4897[_0x4e4775];return _0x347e70;},a22_0x3b2f(_0x1ec9b9,_0x44ebb1);}class ControllerInjector{constructor(_0x17b242,_0x583382){const _0x3e1a50=a22_0x2db981;this[_0x3e1a50(0xe2)]=_0x17b242,this[_0x3e1a50(0xc8)]=_0x583382,this[_0x3e1a50(0xd9)]=express_1[_0x3e1a50(0xfe)]({'mergeParams':!![]}),this[_0x3e1a50(0xc9)]='';if(!Reflect[_0x3e1a50(0x103)](constants_1[_0x3e1a50(0xfb)],_0x17b242))throw TypeError(_0x17b242[_0x3e1a50(0xfc)]+'\x20is\x20not\x20a\x20Controller');}get[a22_0x2db981(0xdd)](){const _0x5a5243=a22_0x2db981,_0x4a4cb8=Object[_0x5a5243(0xe3)](this[_0x5a5243(0xd1)]);return Object[_0x5a5243(0xce)](_0x4a4cb8)['map'](_0x2390a0=>_0x4a4cb8[_0x2390a0])[_0x5a5243(0xf4)](_0x1fe4c2=>!!Reflect[_0x5a5243(0x103)](constants_1[_0x5a5243(0xf1)],_0x1fe4c2));}get[a22_0x2db981(0xec)](){const _0x56b7a7=a22_0x2db981;return Reflect[_0x56b7a7(0x103)](constants_1[_0x56b7a7(0xd5)],this[_0x56b7a7(0xd1)])||[];}get[a22_0x2db981(0xc2)](){const _0x3c6ba5=a22_0x2db981;var _0x2d4970;const _0x2eb049=(_0x2d4970=Reflect['getOwnMetadata'](constants_1[_0x3c6ba5(0xd2)],this[_0x3c6ba5(0xe2)]))!==null&&_0x2d4970!==void 0x0?_0x2d4970:constants_1[_0x3c6ba5(0xe5)],_0xf44124=Reflect[_0x3c6ba5(0x103)](constants_1[_0x3c6ba5(0xc6)],this['controllerType'])||'';return this[_0x3c6ba5(0xc9)]?'':utils_1[_0x3c6ba5(0xc4)](_0x2eb049,_0xf44124);}get['path'](){const _0x52770b=a22_0x2db981;if(this['nestedPath'])return this['nestedPath'];const _0x2fd938=Reflect['getOwnMetadata'](constants_1['META_CONTROLLER_PATH'],this[_0x52770b(0xe2)])||'';return utils_1['normalizePaths'](_0x2fd938);}get[a22_0x2db981(0xd1)](){const _0x54a609=a22_0x2db981;return typedi_1[_0x54a609(0xd6)][_0x54a609(0xcf)](this[_0x54a609(0xe2)]);}async[a22_0x2db981(0xc3)](){const _0x3bd5f4=a22_0x2db981;for(const _0x3211bf of this[_0x3bd5f4(0xec)]){const _0x1dd211=await middleware_injector_1[_0x3bd5f4(0xf5)](_0x3211bf);this[_0x3bd5f4(0xd9)]['use'](_0x1dd211);}}async[a22_0x2db981(0xe8)](_0x5421f2){const _0x46708b=a22_0x2db981,_0x1b80fe=_0x5421f2[_0x46708b(0xed)];logger[_0x46708b(0xcd)](_0x46708b(0xe6)+_0x1b80fe[_0x46708b(0xfc)]+_0x46708b(0x101)+this[_0x46708b(0xc5)]+_0x5421f2['path']);const _0x8fa7c=new ControllerInjector(_0x1b80fe,this);_0x8fa7c[_0x46708b(0xc9)]=_0x5421f2[_0x46708b(0xc5)],await _0x8fa7c[_0x46708b(0xef)](this[_0x46708b(0xd9)]);}async[a22_0x2db981(0xea)](){const _0x24d232=a22_0x2db981;var _0x28b907;for(const _0x3fdc8a of this[_0x24d232(0xdd)]){const _0x40ac53=utils_1[_0x24d232(0xe9)](_0x3fdc8a);if(_0x40ac53[_0x24d232(0xed)])await this[_0x24d232(0xe8)](_0x40ac53);else{const _0xccb8b6=_0x40ac53['method'][_0x24d232(0xe7)]()[_0x24d232(0xf8)]();logger['log'](_0x24d232(0xdf)+this[_0x24d232(0xe2)][_0x24d232(0xfc)]+'#'+_0x3fdc8a[_0x24d232(0xfc)]+_0x24d232(0xd3)+_0x40ac53[_0x24d232(0xde)]+']\x20'+utils_1[_0x24d232(0xc4)](((_0x28b907=this[_0x24d232(0xc8)])===null||_0x28b907===void 0x0?void 0x0:_0x28b907['path'])||'',this[_0x24d232(0xc5)],_0x40ac53['path'])),this[_0x24d232(0xd9)][_0xccb8b6](_0x40ac53['path'],handler_wrapper_1[_0x24d232(0xf2)](_0x3fdc8a,this[_0x24d232(0xd1)]));}}}async[a22_0x2db981(0xef)](_0x3bdba2){const _0x2e9bed=a22_0x2db981;!this[_0x2e9bed(0xc9)]&&logger[_0x2e9bed(0xcd)](_0x2e9bed(0xdf)+this[_0x2e9bed(0xe2)][_0x2e9bed(0xfc)]+'\x20{'+this['prefix']+'}'),await this[_0x2e9bed(0xc3)](),await this[_0x2e9bed(0xea)](),_0x3bdba2[_0x2e9bed(0xdb)](''+this[_0x2e9bed(0xc2)]+this[_0x2e9bed(0xc5)],this['router']);}}exports['ControllerInjector']=ControllerInjector;